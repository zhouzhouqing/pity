(self.webpackChunkpity=self.webpackChunkpity||[]).push([[8586],{70366:function(Ei){(function(R,b){Ei.exports=b()})(this,function(){return function(R){var b={};function o(f){if(b[f])return b[f].exports;var c=b[f]={i:f,l:!1,exports:{}};return R[f].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=R,o.c=b,o.d=function(f,c,M){o.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:M})},o.r=function(f){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},o.t=function(f,c){if(1&c&&(f=o(f)),8&c||4&c&&typeof f=="object"&&f&&f.__esModule)return f;var M=Object.create(null);if(o.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:f}),2&c&&typeof f!="string")for(var _ in f)o.d(M,_,function(x){return f[x]}.bind(null,_));return M},o.n=function(f){var c=f&&f.__esModule?function(){return f.default}:function(){return f};return o.d(c,"a",c),c},o.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},o.p="",o(o.s=547)}([function(R,b,o){"use strict";o.r(b),o.d(b,"contains",function(){return c}),o.d(b,"includes",function(){return c}),o.d(b,"difference",function(){return _}),o.d(b,"find",function(){return L}),o.d(b,"findIndex",function(){return z}),o.d(b,"firstValue",function(){return H}),o.d(b,"flatten",function(){return re}),o.d(b,"flattenDeep",function(){return ae}),o.d(b,"getRange",function(){return ye}),o.d(b,"pull",function(){return he}),o.d(b,"pullAt",function(){return W}),o.d(b,"reduce",function(){return le}),o.d(b,"remove",function(){return Oe}),o.d(b,"sortBy",function(){return se}),o.d(b,"union",function(){return te}),o.d(b,"uniq",function(){return ee}),o.d(b,"valuesOfKey",function(){return U}),o.d(b,"head",function(){return X}),o.d(b,"last",function(){return B}),o.d(b,"startsWith",function(){return J}),o.d(b,"endsWith",function(){return ne}),o.d(b,"filter",function(){return M}),o.d(b,"every",function(){return ie}),o.d(b,"some",function(){return Z}),o.d(b,"group",function(){return Me}),o.d(b,"groupBy",function(){return _e}),o.d(b,"groupToMap",function(){return je}),o.d(b,"getWrapBehavior",function(){return Ae}),o.d(b,"wrapBehavior",function(){return Le}),o.d(b,"number2color",function(){return Re}),o.d(b,"parseRadius",function(){return Ke}),o.d(b,"clamp",function(){return Je}),o.d(b,"fixedBase",function(){return nt}),o.d(b,"isDecimal",function(){return kt}),o.d(b,"isEven",function(){return At}),o.d(b,"isInteger",function(){return It}),o.d(b,"isNegative",function(){return Kt}),o.d(b,"isNumberEqual",function(){return Qt}),o.d(b,"isOdd",function(){return tr}),o.d(b,"isPositive",function(){return nr}),o.d(b,"max",function(){return ue}),o.d(b,"maxBy",function(){return Mr}),o.d(b,"min",function(){return xe}),o.d(b,"minBy",function(){return ar}),o.d(b,"mod",function(){return yr}),o.d(b,"toDegree",function(){return Rr}),o.d(b,"toInteger",function(){return pr}),o.d(b,"toRadian",function(){return dr}),o.d(b,"forIn",function(){return Gr}),o.d(b,"has",function(){return Lr}),o.d(b,"hasKey",function(){return pn}),o.d(b,"hasValue",function(){return Nr}),o.d(b,"keys",function(){return p}),o.d(b,"isMatch",function(){return A}),o.d(b,"values",function(){return Ur}),o.d(b,"lowerCase",function(){return rn}),o.d(b,"lowerFirst",function(){return Ir}),o.d(b,"substitute",function(){return On}),o.d(b,"upperCase",function(){return In}),o.d(b,"upperFirst",function(){return Dn}),o.d(b,"getType",function(){return gn}),o.d(b,"isArguments",function(){return Er}),o.d(b,"isArray",function(){return h}),o.d(b,"isArrayLike",function(){return f}),o.d(b,"isBoolean",function(){return ln}),o.d(b,"isDate",function(){return yn}),o.d(b,"isError",function(){return mn}),o.d(b,"isFunction",function(){return S}),o.d(b,"isFinite",function(){return Qn}),o.d(b,"isNil",function(){return g}),o.d(b,"isNull",function(){return Un}),o.d(b,"isNumber",function(){return dt}),o.d(b,"isObject",function(){return E}),o.d(b,"isObjectLike",function(){return N}),o.d(b,"isPlainObject",function(){return P}),o.d(b,"isPrototype",function(){return Oi}),o.d(b,"isRegExp",function(){return ni}),o.d(b,"isString",function(){return Te}),o.d(b,"isType",function(){return O}),o.d(b,"isUndefined",function(){return Bn}),o.d(b,"isElement",function(){return wi}),o.d(b,"requestAnimationFrame",function(){return Mi}),o.d(b,"clearAnimationFrame",function(){return Wn}),o.d(b,"augment",function(){return hi}),o.d(b,"clone",function(){return oi}),o.d(b,"debounce",function(){return di}),o.d(b,"memoize",function(){return _i}),o.d(b,"deepMix",function(){return Yn}),o.d(b,"each",function(){return m}),o.d(b,"extend",function(){return ki}),o.d(b,"indexOf",function(){return Gi}),o.d(b,"isEmpty",function(){return oo}),o.d(b,"isEqual",function(){return ci}),o.d(b,"isEqualWith",function(){return li}),o.d(b,"map",function(){return ao}),o.d(b,"mapValues",function(){return $i}),o.d(b,"mix",function(){return Jn}),o.d(b,"assign",function(){return Jn}),o.d(b,"get",function(){return vo}),o.d(b,"set",function(){return ir}),o.d(b,"pick",function(){return Ne}),o.d(b,"omit",function(){return He}),o.d(b,"throttle",function(){return ft}),o.d(b,"toArray",function(){return Tt}),o.d(b,"toString",function(){return Dr}),o.d(b,"uniqueId",function(){return vr}),o.d(b,"noop",function(){return Be}),o.d(b,"identity",function(){return ut}),o.d(b,"size",function(){return bt}),o.d(b,"Cache",function(){return Ft});var f=function(we){return we!==null&&typeof we!="function"&&isFinite(we.length)},c=function(we,ze){return!!f(we)&&we.indexOf(ze)>-1},M=function(we,ze){if(!f(we))return we;for(var Qe=[],lt=0;lt<we.length;lt++){var vt=we[lt];ze(vt,lt)&&Qe.push(vt)}return Qe},_=function(we,ze){return ze===void 0&&(ze=[]),M(we,function(Qe){return!c(ze,Qe)})},x={}.toString,O=function(we,ze){return x.call(we)==="[object "+ze+"]"},S=function(we){return O(we,"Function")},g=function(we){return we==null},h=function(we){return Array.isArray?Array.isArray(we):O(we,"Array")};function y(we){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze})(we)}var E=function(we){var ze=y(we);return we!==null&&ze==="object"||ze==="function"},m=function(we,ze){if(we){if(h(we))for(var Qe=0,lt=we.length;Qe<lt&&ze(we[Qe],Qe)!==!1;Qe++);else if(E(we)){for(var vt in we)if(we.hasOwnProperty(vt)&&ze(we[vt],vt)===!1)break}}},p=Object.keys?function(we){return Object.keys(we)}:function(we){var ze=[];return m(we,function(Qe,lt){S(we)&&lt==="prototype"||ze.push(lt)}),ze},A=function(we,ze){var Qe=p(ze),lt=Qe.length;if(g(we))return!lt;for(var vt=0;vt<lt;vt+=1){var wt=Qe[vt];if(ze[wt]!==we[wt]||!(wt in we))return!1}return!0};function C(we){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze})(we)}var N=function(we){return C(we)==="object"&&we!==null},P=function(we){if(!N(we)||!O(we,"Object"))return!1;if(Object.getPrototypeOf(we)===null)return!0;for(var ze=we;Object.getPrototypeOf(ze)!==null;)ze=Object.getPrototypeOf(ze);return Object.getPrototypeOf(we)===ze},L=function(we,ze){if(!h(we))return null;var Qe;if(S(ze)&&(Qe=ze),P(ze)&&(Qe=function(vt){return A(vt,ze)}),Qe){for(var lt=0;lt<we.length;lt+=1)if(Qe(we[lt]))return we[lt]}return null},z=function(we,ze,Qe){Qe===void 0&&(Qe=0);for(var lt=Qe;lt<we.length;lt++)if(ze(we[lt],lt))return lt;return-1},H=function(we,ze){for(var Qe=null,lt=0;lt<we.length;lt++){var vt=we[lt][ze];if(!g(vt)){Qe=h(vt)?vt[0]:vt;break}}return Qe},re=function(we){if(!h(we))return[];for(var ze=[],Qe=0;Qe<we.length;Qe++)ze=ze.concat(we[Qe]);return ze},ae=function we(ze,Qe){if(Qe===void 0&&(Qe=[]),h(ze))for(var lt=0;lt<ze.length;lt+=1)we(ze[lt],Qe);else Qe.push(ze);return Qe},ue=function(we){if(h(we))return we.reduce(function(ze,Qe){return Math.max(ze,Qe)},we[0])},xe=function(we){if(h(we))return we.reduce(function(ze,Qe){return Math.min(ze,Qe)},we[0])},ye=function(we){var ze=we.filter(function(wt){return!isNaN(wt)});if(!ze.length)return{min:0,max:0};if(h(we[0])){for(var Qe=[],lt=0;lt<we.length;lt++)Qe=Qe.concat(we[lt]);ze=Qe}var vt=ue(ze);return{min:xe(ze),max:vt}},Y=Array.prototype,Ce=Y.splice,ge=Y.indexOf,he=function(we){for(var ze=[],Qe=1;Qe<arguments.length;Qe++)ze[Qe-1]=arguments[Qe];for(var lt=0;lt<ze.length;lt++)for(var vt=ze[lt],wt=-1;(wt=ge.call(we,vt))>-1;)Ce.call(we,wt,1);return we},Q=Array.prototype.splice,W=function(we,ze){if(!f(we))return[];for(var Qe=we?ze.length:0,lt=Qe-1;Qe--;){var vt=void 0,wt=ze[Qe];Qe!==lt&&wt===vt||(vt=wt,Q.call(we,wt,1))}return we},le=function(we,ze,Qe){if(!h(we)&&!P(we))return we;var lt=Qe;return m(we,function(vt,wt){lt=ze(lt,vt,wt)}),lt},Oe=function(we,ze){var Qe=[];if(!f(we))return Qe;for(var lt=-1,vt=[],wt=we.length;++lt<wt;){var Lt=we[lt];ze(Lt,lt,we)&&(Qe.push(Lt),vt.push(lt))}return W(we,vt),Qe},Te=function(we){return O(we,"String")},se=function(we,ze){var Qe;if(S(ze))Qe=function(vt,wt){return ze(vt)-ze(wt)};else{var lt=[];Te(ze)?lt.push(ze):h(ze)&&(lt=ze),Qe=function(vt,wt){for(var Lt=0;Lt<lt.length;Lt+=1){var Wt=lt[Lt];if(vt[Wt]>wt[Wt])return 1;if(vt[Wt]<wt[Wt])return-1}return 0}}return we.sort(Qe),we};function ee(we,ze){ze===void 0&&(ze=new Map);var Qe=[];if(Array.isArray(we))for(var lt=0,vt=we.length;lt<vt;lt++){var wt=we[lt];ze.has(wt)||(Qe.push(wt),ze.set(wt,!0))}return Qe}var te=function(){for(var we=[],ze=0;ze<arguments.length;ze++)we[ze]=arguments[ze];return ee([].concat.apply([],we))},U=function(we,ze){for(var Qe=[],lt={},vt=0;vt<we.length;vt++){var wt=we[vt][ze];if(!g(wt)){h(wt)||(wt=[wt]);for(var Lt=0;Lt<wt.length;Lt++){var Wt=wt[Lt];lt[Wt]||(Qe.push(Wt),lt[Wt]=!0)}}}return Qe};function X(we){if(f(we))return we[0]}function B(we){if(f(we))return we[we.length-1]}var J=function(we,ze){return!(!h(we)&&!Te(we))&&we[0]===ze},ne=function(we,ze){return!(!h(we)&&!Te(we))&&we[we.length-1]===ze},ie=function(we,ze){for(var Qe=0;Qe<we.length;Qe++)if(!ze(we[Qe],Qe))return!1;return!0},Z=function(we,ze){for(var Qe=0;Qe<we.length;Qe++)if(ze(we[Qe],Qe))return!0;return!1},fe=Object.prototype.hasOwnProperty,_e=function(we,ze){if(!ze||!h(we))return{};for(var Qe,lt={},vt=S(ze)?ze:function(Wt){return Wt[ze]},wt=0;wt<we.length;wt++){var Lt=we[wt];Qe=vt(Lt),fe.call(lt,Qe)?lt[Qe].push(Lt):lt[Qe]=[Lt]}return lt};function je(we,ze){if(!ze)return{0:we};if(!S(ze)){var Qe=h(ze)?ze:ze.replace(/\s+/g,"").split("*");ze=function(lt){for(var vt="_",wt=0,Lt=Qe.length;wt<Lt;wt++)vt+=lt[Qe[wt]]&&lt[Qe[wt]].toString();return vt}}return _e(we,ze)}var Me=function(we,ze){if(!ze)return[we];var Qe=je(we,ze),lt=[];for(var vt in Qe)lt.push(Qe[vt]);return lt},Ae=function(we,ze){return we["_wrap_"+ze]},Le=function(we,ze){if(we["_wrap_"+ze])return we["_wrap_"+ze];var Qe=function(lt){we[ze](lt)};return we["_wrap_"+ze]=Qe,Qe},Se={},Re=function(we){var ze=Se[we];if(!ze){for(var Qe=we.toString(16),lt=Qe.length;lt<6;lt++)Qe="0"+Qe;ze="#"+Qe,Se[we]=ze}return ze},Ke=function(we){var ze=0,Qe=0,lt=0,vt=0;return h(we)?we.length===1?ze=Qe=lt=vt=we[0]:we.length===2?(ze=lt=we[0],Qe=vt=we[1]):we.length===3?(ze=we[0],Qe=vt=we[1],lt=we[2]):(ze=we[0],Qe=we[1],lt=we[2],vt=we[3]):ze=Qe=lt=vt=we,{r1:ze,r2:Qe,r3:lt,r4:vt}},Je=function(we,ze,Qe){return we<ze?ze:we>Qe?Qe:we},nt=function(we,ze){var Qe=ze.toString(),lt=Qe.indexOf(".");if(lt===-1)return Math.round(we);var vt=Qe.substr(lt+1).length;return vt>20&&(vt=20),parseFloat(we.toFixed(vt))},dt=function(we){return O(we,"Number")},kt=function(we){return dt(we)&&we%1!=0},At=function(we){return dt(we)&&we%2==0},It=Number.isInteger?Number.isInteger:function(we){return dt(we)&&we%1==0},Kt=function(we){return dt(we)&&we<0};function Qt(we,ze,Qe){return Qe===void 0&&(Qe=1e-5),Math.abs(we-ze)<Qe}var tr=function(we){return dt(we)&&we%2!=0},nr=function(we){return dt(we)&&we>0},Mr=function(we,ze){if(h(we)){for(var Qe,lt=-1/0,vt=0;vt<we.length;vt++){var wt=we[vt],Lt=S(ze)?ze(wt):wt[ze];Lt>lt&&(Qe=wt,lt=Lt)}return Qe}},ar=function(we,ze){if(h(we)){for(var Qe,lt=1/0,vt=0;vt<we.length;vt++){var wt=we[vt],Lt=S(ze)?ze(wt):wt[ze];Lt<lt&&(Qe=wt,lt=Lt)}return Qe}},yr=function(we,ze){return(we%ze+ze)%ze},mr=180/Math.PI,Rr=function(we){return mr*we},pr=parseInt,xr=Math.PI/180,dr=function(we){return xr*we},Gr=m,Lr=function(we,ze){return we.hasOwnProperty(ze)},pn=Lr,Ur=Object.values?function(we){return Object.values(we)}:function(we){var ze=[];return m(we,function(Qe,lt){S(we)&&lt==="prototype"||ze.push(Qe)}),ze},Nr=function(we,ze){return c(Ur(we),ze)},Dr=function(we){return g(we)?"":we.toString()},rn=function(we){return Dr(we).toLowerCase()},Ir=function(we){var ze=Dr(we);return ze.charAt(0).toLowerCase()+ze.substring(1)},On=function(we,ze){return we&&ze?we.replace(/\\?\{([^{}]+)\}/g,function(Qe,lt){return Qe.charAt(0)==="\\"?Qe.slice(1):ze[lt]===void 0?"":ze[lt]}):we},In=function(we){return Dr(we).toUpperCase()},Dn=function(we){var ze=Dr(we);return ze.charAt(0).toUpperCase()+ze.substring(1)},Rn={}.toString,gn=function(we){return Rn.call(we).replace(/^\[object /,"").replace(/]$/,"")},Er=function(we){return O(we,"Arguments")},ln=function(we){return O(we,"Boolean")},yn=function(we){return O(we,"Date")},mn=function(we){return O(we,"Error")},Qn=function(we){return dt(we)&&isFinite(we)},Un=function(we){return we===null},ri=Object.prototype,Oi=function(we){var ze=we&&we.constructor;return we===(typeof ze=="function"&&ze.prototype||ri)},ni=function(we){return O(we,"RegExp")},Bn=function(we){return we===void 0},wi=function(we){return we instanceof Element||we instanceof HTMLDocument};function Mi(we){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(ze){return setTimeout(ze,16)})(we)}function Wn(we){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(we)}function ii(we,ze){for(var Qe in ze)ze.hasOwnProperty(Qe)&&Qe!=="constructor"&&ze[Qe]!==void 0&&(we[Qe]=ze[Qe])}function Jn(we,ze,Qe,lt){return ze&&ii(we,ze),Qe&&ii(we,Qe),lt&&ii(we,lt),we}var hi=function(){for(var we=[],ze=0;ze<arguments.length;ze++)we[ze]=arguments[ze];for(var Qe=we[0],lt=1;lt<we.length;lt++){var vt=we[lt];S(vt)&&(vt=vt.prototype),Jn(Qe.prototype,vt)}};function Vn(we){return(Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze})(we)}var oi=function we(ze){if(Vn(ze)!=="object"||ze===null)return ze;var Qe;if(h(ze)){Qe=[];for(var lt=0,vt=ze.length;lt<vt;lt++)Vn(ze[lt])==="object"&&ze[lt]!=null?Qe[lt]=we(ze[lt]):Qe[lt]=ze[lt]}else for(var wt in Qe={},ze)Vn(ze[wt])==="object"&&ze[wt]!=null?Qe[wt]=we(ze[wt]):Qe[wt]=ze[wt];return Qe},di=function(we,ze,Qe){var lt;return function(){var vt=this,wt=arguments,Lt=function(){lt=null,Qe||we.apply(vt,wt)},Wt=Qe&&!lt;clearTimeout(lt),lt=setTimeout(Lt,ze),Wt&&we.apply(vt,wt)}},_i=function(we,ze){if(!S(we))throw new TypeError("Expected a function");var Qe=function lt(){for(var vt=[],wt=0;wt<arguments.length;wt++)vt[wt]=arguments[wt];var Lt=ze?ze.apply(this,vt):vt[0],Wt=lt.cache;if(Wt.has(Lt))return Wt.get(Lt);var er=we.apply(this,vt);return Wt.set(Lt,er),er};return Qe.cache=new Map,Qe};function Xn(we,ze,Qe,lt){for(var vt in Qe=Qe||0,lt=lt||5,ze)if(ze.hasOwnProperty(vt)){var wt=ze[vt];wt!==null&&P(wt)?(P(we[vt])||(we[vt]={}),Qe<lt?Xn(we[vt],wt,Qe+1,lt):we[vt]=ze[vt]):h(wt)?(we[vt]=[],we[vt]=we[vt].concat(wt)):wt!==void 0&&(we[vt]=wt)}}var Yn=function(we){for(var ze=[],Qe=1;Qe<arguments.length;Qe++)ze[Qe-1]=arguments[Qe];for(var lt=0;lt<ze.length;lt+=1)Xn(we,ze[lt]);return we},ki=function(we,ze,Qe,lt){S(ze)||(Qe=ze,ze=we,we=function(){});var vt=Object.create?function(Lt,Wt){return Object.create(Lt,{constructor:{value:Wt}})}:function(Lt,Wt){function er(){}er.prototype=Lt;var rr=new er;return rr.constructor=Wt,rr},wt=vt(ze.prototype,we);return we.prototype=Jn(wt,we.prototype),we.superclass=vt(ze.prototype,ze),Jn(wt,Qe),Jn(we,lt),we},Gi=function(we,ze){if(!f(we))return-1;var Qe=Array.prototype.indexOf;if(Qe)return Qe.call(we,ze);for(var lt=-1,vt=0;vt<we.length;vt++)if(we[vt]===ze){lt=vt;break}return lt},Hn=Object.prototype.hasOwnProperty,oo=function(we){if(g(we))return!0;if(f(we))return!we.length;var ze=gn(we);if(ze==="Map"||ze==="Set")return!we.size;if(Oi(we))return!Object.keys(we).length;for(var Qe in we)if(Hn.call(we,Qe))return!1;return!0},ci=function we(ze,Qe){if(ze===Qe)return!0;if(!ze||!Qe||Te(ze)||Te(Qe))return!1;if(f(ze)||f(Qe)){if(ze.length!==Qe.length)return!1;for(var lt=!0,vt=0;vt<ze.length&&(lt=we(ze[vt],Qe[vt]));vt++);return lt}if(N(ze)||N(Qe)){var wt=Object.keys(ze),Lt=Object.keys(Qe);if(wt.length!==Lt.length)return!1;for(lt=!0,vt=0;vt<wt.length&&(lt=we(ze[wt[vt]],Qe[wt[vt]]));vt++);return lt}return!1},li=function(we,ze,Qe){return S(Qe)?!!Qe(we,ze):ci(we,ze)},ao=function(we,ze){if(!f(we))return we;for(var Qe=[],lt=0;lt<we.length;lt++){var vt=we[lt];Qe.push(ze(vt,lt))}return Qe},Zi=function(we){return we},$i=function(we,ze){ze===void 0&&(ze=Zi);var Qe={};return E(we)&&!g(we)&&Object.keys(we).forEach(function(lt){Qe[lt]=ze(we[lt],lt)}),Qe},vo=function(we,ze,Qe){for(var lt=0,vt=Te(ze)?ze.split("."):ze;we&&lt<vt.length;)we=we[vt[lt++]];return we===void 0||lt<vt.length?Qe:we},ir=function(we,ze,Qe){var lt=we,vt=Te(ze)?ze.split("."):ze;return vt.forEach(function(wt,Lt){Lt<vt.length-1?(E(lt[wt])||(lt[wt]=dt(vt[Lt+1])?[]:{}),lt=lt[wt]):lt[wt]=Qe}),we},We=Object.prototype.hasOwnProperty,Ne=function(we,ze){if(we===null||!P(we))return{};var Qe={};return m(ze,function(lt){We.call(we,lt)&&(Qe[lt]=we[lt])}),Qe},He=function(we,ze){return le(we,function(Qe,lt,vt){return ze.includes(vt)||(Qe[vt]=lt),Qe},{})},ft=function(we,ze,Qe){var lt,vt,wt,Lt,Wt=0;Qe||(Qe={});var er=function(){Wt=Qe.leading===!1?0:Date.now(),lt=null,Lt=we.apply(vt,wt),lt||(vt=wt=null)},rr=function(){var sr=Date.now();Wt||Qe.leading!==!1||(Wt=sr);var gr=ze-(sr-Wt);return vt=this,wt=arguments,gr<=0||gr>ze?(lt&&(clearTimeout(lt),lt=null),Wt=sr,Lt=we.apply(vt,wt),lt||(vt=wt=null)):lt||Qe.trailing===!1||(lt=setTimeout(er,gr)),Lt};return rr.cancel=function(){clearTimeout(lt),Wt=0,lt=vt=wt=null},rr},Tt=function(we){return f(we)?Array.prototype.slice.call(we):[]},Ht={},vr=function(we){return Ht[we=we||"g"]?Ht[we]+=1:Ht[we]=1,we+Ht[we]},Be=function(){},ut=function(we){return we};function bt(we){return g(we)?0:f(we)?we.length:Object.keys(we).length}var Ft=function(){function we(){this.map={}}return we.prototype.has=function(ze){return this.map[ze]!==void 0},we.prototype.get=function(ze,Qe){var lt=this.map[ze];return lt===void 0?Qe:lt},we.prototype.set=function(ze,Qe){this.map[ze]=Qe},we.prototype.clear=function(){this.map={}},we.prototype.delete=function(ze){delete this.map[ze]},we.prototype.size=function(){return Object.keys(this.map).length},we}()},function(R,b,o){"use strict";function f(ge){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he})(ge)}o.r(b),o.d(b,"__extends",function(){return M}),o.d(b,"__assign",function(){return _}),o.d(b,"__rest",function(){return x}),o.d(b,"__decorate",function(){return O}),o.d(b,"__param",function(){return S}),o.d(b,"__metadata",function(){return g}),o.d(b,"__awaiter",function(){return h}),o.d(b,"__generator",function(){return y}),o.d(b,"__createBinding",function(){return E}),o.d(b,"__exportStar",function(){return m}),o.d(b,"__values",function(){return p}),o.d(b,"__read",function(){return A}),o.d(b,"__spread",function(){return C}),o.d(b,"__spreadArrays",function(){return N}),o.d(b,"__spreadArray",function(){return P}),o.d(b,"__await",function(){return L}),o.d(b,"__asyncGenerator",function(){return z}),o.d(b,"__asyncDelegator",function(){return H}),o.d(b,"__asyncValues",function(){return re}),o.d(b,"__makeTemplateObject",function(){return ae}),o.d(b,"__importStar",function(){return xe}),o.d(b,"__importDefault",function(){return ye}),o.d(b,"__classPrivateFieldGet",function(){return Y}),o.d(b,"__classPrivateFieldSet",function(){return Ce});var c=function(ge,he){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,W){Q.__proto__=W}||function(Q,W){for(var le in W)Object.prototype.hasOwnProperty.call(W,le)&&(Q[le]=W[le])})(ge,he)};function M(ge,he){if(typeof he!="function"&&he!==null)throw new TypeError("Class extends value "+String(he)+" is not a constructor or null");function Q(){this.constructor=ge}c(ge,he),ge.prototype=he===null?Object.create(he):(Q.prototype=he.prototype,new Q)}var _=function(){return(_=Object.assign||function(ge){for(var he,Q=1,W=arguments.length;Q<W;Q++)for(var le in he=arguments[Q])Object.prototype.hasOwnProperty.call(he,le)&&(ge[le]=he[le]);return ge}).apply(this,arguments)};function x(ge,he){var Q={};for(var W in ge)Object.prototype.hasOwnProperty.call(ge,W)&&he.indexOf(W)<0&&(Q[W]=ge[W]);if(ge!=null&&typeof Object.getOwnPropertySymbols=="function"){var le=0;for(W=Object.getOwnPropertySymbols(ge);le<W.length;le++)he.indexOf(W[le])<0&&Object.prototype.propertyIsEnumerable.call(ge,W[le])&&(Q[W[le]]=ge[W[le]])}return Q}function O(ge,he,Q,W){var le,Oe=arguments.length,Te=Oe<3?he:W===null?W=Object.getOwnPropertyDescriptor(he,Q):W;if((typeof Reflect=="undefined"?"undefined":f(Reflect))==="object"&&typeof Reflect.decorate=="function")Te=Reflect.decorate(ge,he,Q,W);else for(var se=ge.length-1;se>=0;se--)(le=ge[se])&&(Te=(Oe<3?le(Te):Oe>3?le(he,Q,Te):le(he,Q))||Te);return Oe>3&&Te&&Object.defineProperty(he,Q,Te),Te}function S(ge,he){return function(Q,W){he(Q,W,ge)}}function g(ge,he){if((typeof Reflect=="undefined"?"undefined":f(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ge,he)}function h(ge,he,Q,W){return new(Q||(Q=Promise))(function(le,Oe){function Te(te){try{ee(W.next(te))}catch(U){Oe(U)}}function se(te){try{ee(W.throw(te))}catch(U){Oe(U)}}function ee(te){var U;te.done?le(te.value):(U=te.value,U instanceof Q?U:new Q(function(X){X(U)})).then(Te,se)}ee((W=W.apply(ge,he||[])).next())})}function y(ge,he){var Q,W,le,Oe,Te={label:0,sent:function(){if(1&le[0])throw le[1];return le[1]},trys:[],ops:[]};return Oe={next:se(0),throw:se(1),return:se(2)},typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function se(ee){return function(te){return function(U){if(Q)throw new TypeError("Generator is already executing.");for(;Te;)try{if(Q=1,W&&(le=2&U[0]?W.return:U[0]?W.throw||((le=W.return)&&le.call(W),0):W.next)&&!(le=le.call(W,U[1])).done)return le;switch(W=0,le&&(U=[2&U[0],le.value]),U[0]){case 0:case 1:le=U;break;case 4:return Te.label++,{value:U[1],done:!1};case 5:Te.label++,W=U[1],U=[0];continue;case 7:U=Te.ops.pop(),Te.trys.pop();continue;default:if(le=Te.trys,!((le=le.length>0&&le[le.length-1])||U[0]!==6&&U[0]!==2)){Te=0;continue}if(U[0]===3&&(!le||U[1]>le[0]&&U[1]<le[3])){Te.label=U[1];break}if(U[0]===6&&Te.label<le[1]){Te.label=le[1],le=U;break}if(le&&Te.label<le[2]){Te.label=le[2],Te.ops.push(U);break}le[2]&&Te.ops.pop(),Te.trys.pop();continue}U=he.call(ge,Te)}catch(X){U=[6,X],W=0}finally{Q=le=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([ee,te])}}}var E=Object.create?function(ge,he,Q,W){W===void 0&&(W=Q),Object.defineProperty(ge,W,{enumerable:!0,get:function(){return he[Q]}})}:function(ge,he,Q,W){W===void 0&&(W=Q),ge[W]=he[Q]};function m(ge,he){for(var Q in ge)Q==="default"||Object.prototype.hasOwnProperty.call(he,Q)||E(he,ge,Q)}function p(ge){var he=typeof Symbol=="function"&&Symbol.iterator,Q=he&&ge[he],W=0;if(Q)return Q.call(ge);if(ge&&typeof ge.length=="number")return{next:function(){return ge&&W>=ge.length&&(ge=void 0),{value:ge&&ge[W++],done:!ge}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(ge,he){var Q=typeof Symbol=="function"&&ge[Symbol.iterator];if(!Q)return ge;var W,le,Oe=Q.call(ge),Te=[];try{for(;(he===void 0||he-- >0)&&!(W=Oe.next()).done;)Te.push(W.value)}catch(se){le={error:se}}finally{try{W&&!W.done&&(Q=Oe.return)&&Q.call(Oe)}finally{if(le)throw le.error}}return Te}function C(){for(var ge=[],he=0;he<arguments.length;he++)ge=ge.concat(A(arguments[he]));return ge}function N(){for(var ge=0,he=0,Q=arguments.length;he<Q;he++)ge+=arguments[he].length;var W=Array(ge),le=0;for(he=0;he<Q;he++)for(var Oe=arguments[he],Te=0,se=Oe.length;Te<se;Te++,le++)W[le]=Oe[Te];return W}function P(ge,he,Q){if(Q||arguments.length===2)for(var W,le=0,Oe=he.length;le<Oe;le++)!W&&le in he||(W||(W=Array.prototype.slice.call(he,0,le)),W[le]=he[le]);return ge.concat(W||he)}function L(ge){return this instanceof L?(this.v=ge,this):new L(ge)}function z(ge,he,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,le=Q.apply(ge,he||[]),Oe=[];return W={},Te("next"),Te("throw"),Te("return"),W[Symbol.asyncIterator]=function(){return this},W;function Te(X){le[X]&&(W[X]=function(B){return new Promise(function(J,ne){Oe.push([X,B,J,ne])>1||se(X,B)})})}function se(X,B){try{(J=le[X](B)).value instanceof L?Promise.resolve(J.value.v).then(ee,te):U(Oe[0][2],J)}catch(ne){U(Oe[0][3],ne)}var J}function ee(X){se("next",X)}function te(X){se("throw",X)}function U(X,B){X(B),Oe.shift(),Oe.length&&se(Oe[0][0],Oe[0][1])}}function H(ge){var he,Q;return he={},W("next"),W("throw",function(le){throw le}),W("return"),he[Symbol.iterator]=function(){return this},he;function W(le,Oe){he[le]=ge[le]?function(Te){return(Q=!Q)?{value:L(ge[le](Te)),done:le==="return"}:Oe?Oe(Te):Te}:Oe}}function re(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,Q=ge[Symbol.asyncIterator];return Q?Q.call(ge):(ge=p(ge),he={},W("next"),W("throw"),W("return"),he[Symbol.asyncIterator]=function(){return this},he);function W(le){he[le]=ge[le]&&function(Oe){return new Promise(function(Te,se){(function(ee,te,U,X){Promise.resolve(X).then(function(B){ee({value:B,done:U})},te)})(Te,se,(Oe=ge[le](Oe)).done,Oe.value)})}}}function ae(ge,he){return Object.defineProperty?Object.defineProperty(ge,"raw",{value:he}):ge.raw=he,ge}var ue=Object.create?function(ge,he){Object.defineProperty(ge,"default",{enumerable:!0,value:he})}:function(ge,he){ge.default=he};function xe(ge){if(ge&&ge.__esModule)return ge;var he={};if(ge!=null)for(var Q in ge)Q!=="default"&&Object.prototype.hasOwnProperty.call(ge,Q)&&E(he,ge,Q);return ue(he,ge),he}function ye(ge){return ge&&ge.__esModule?ge:{default:ge}}function Y(ge,he,Q,W){if(Q==="a"&&!W)throw new TypeError("Private accessor was defined without a getter");if(typeof he=="function"?ge!==he||!W:!he.has(ge))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Q==="m"?W:Q==="a"?W.call(ge):W?W.value:he.get(ge)}function Ce(ge,he,Q,W,le){if(W==="m")throw new TypeError("Private method is not writable");if(W==="a"&&!le)throw new TypeError("Private accessor was defined without a setter");if(typeof he=="function"?ge!==he||!le:!he.has(ge))throw new TypeError("Cannot write private member to an object whose class did not declare it");return W==="a"?le.call(ge,Q):le?le.value=Q:he.set(ge,Q),Q}},function(R,b,o){"use strict";o.d(b,"a",function(){return f}),o.d(b,"b",function(){return c}),o.d(b,"c",function(){return _}),o.d(b,"d",function(){return St}),o.d(b,"e",function(){return Er}),o.d(b,"f",function(){return M});var f={};o.r(f),o.d(f,"create",function(){return O}),o.d(f,"fromMat4",function(){return S}),o.d(f,"clone",function(){return g}),o.d(f,"copy",function(){return h}),o.d(f,"fromValues",function(){return y}),o.d(f,"set",function(){return E}),o.d(f,"identity",function(){return m}),o.d(f,"transpose",function(){return p}),o.d(f,"invert",function(){return A}),o.d(f,"adjoint",function(){return C}),o.d(f,"determinant",function(){return N}),o.d(f,"multiply",function(){return P}),o.d(f,"translate",function(){return L}),o.d(f,"rotate",function(){return z}),o.d(f,"scale",function(){return H}),o.d(f,"fromTranslation",function(){return re}),o.d(f,"fromRotation",function(){return ae}),o.d(f,"fromScaling",function(){return ue}),o.d(f,"fromMat2d",function(){return xe}),o.d(f,"fromQuat",function(){return ye}),o.d(f,"normalFromMat4",function(){return Y}),o.d(f,"projection",function(){return Ce}),o.d(f,"str",function(){return ge}),o.d(f,"frob",function(){return he}),o.d(f,"add",function(){return Q}),o.d(f,"subtract",function(){return W}),o.d(f,"multiplyScalar",function(){return le}),o.d(f,"multiplyScalarAndAdd",function(){return Oe}),o.d(f,"exactEquals",function(){return Te}),o.d(f,"equals",function(){return se}),o.d(f,"mul",function(){return ee}),o.d(f,"sub",function(){return te});var c={};o.r(c),o.d(c,"create",function(){return U}),o.d(c,"clone",function(){return X}),o.d(c,"copy",function(){return B}),o.d(c,"fromValues",function(){return J}),o.d(c,"set",function(){return ne}),o.d(c,"identity",function(){return ie}),o.d(c,"transpose",function(){return Z}),o.d(c,"invert",function(){return fe}),o.d(c,"adjoint",function(){return _e}),o.d(c,"determinant",function(){return je}),o.d(c,"multiply",function(){return Me}),o.d(c,"translate",function(){return Ae}),o.d(c,"scale",function(){return Le}),o.d(c,"rotate",function(){return Se}),o.d(c,"rotateX",function(){return Re}),o.d(c,"rotateY",function(){return Ke}),o.d(c,"rotateZ",function(){return Je}),o.d(c,"fromTranslation",function(){return nt}),o.d(c,"fromScaling",function(){return dt}),o.d(c,"fromRotation",function(){return kt}),o.d(c,"fromXRotation",function(){return At}),o.d(c,"fromYRotation",function(){return It}),o.d(c,"fromZRotation",function(){return Kt}),o.d(c,"fromRotationTranslation",function(){return Qt}),o.d(c,"fromQuat2",function(){return tr}),o.d(c,"getTranslation",function(){return nr}),o.d(c,"getScaling",function(){return Mr}),o.d(c,"getRotation",function(){return ar}),o.d(c,"fromRotationTranslationScale",function(){return yr}),o.d(c,"fromRotationTranslationScaleOrigin",function(){return mr}),o.d(c,"fromQuat",function(){return Rr}),o.d(c,"frustum",function(){return pr}),o.d(c,"perspective",function(){return xr}),o.d(c,"perspectiveFromFieldOfView",function(){return dr}),o.d(c,"ortho",function(){return Gr}),o.d(c,"lookAt",function(){return Lr}),o.d(c,"targetTo",function(){return pn}),o.d(c,"str",function(){return Ur}),o.d(c,"frob",function(){return Nr}),o.d(c,"add",function(){return Dr}),o.d(c,"subtract",function(){return rn}),o.d(c,"multiplyScalar",function(){return Ir}),o.d(c,"multiplyScalarAndAdd",function(){return On}),o.d(c,"exactEquals",function(){return In}),o.d(c,"equals",function(){return Dn}),o.d(c,"mul",function(){return Rn}),o.d(c,"sub",function(){return gn});var M={};o.r(M),o.d(M,"create",function(){return ln}),o.d(M,"clone",function(){return yn}),o.d(M,"fromValues",function(){return mn}),o.d(M,"copy",function(){return Qn}),o.d(M,"set",function(){return Un}),o.d(M,"add",function(){return ri}),o.d(M,"subtract",function(){return Oi}),o.d(M,"multiply",function(){return ni}),o.d(M,"divide",function(){return Bn}),o.d(M,"ceil",function(){return wi}),o.d(M,"floor",function(){return Mi}),o.d(M,"min",function(){return Wn}),o.d(M,"max",function(){return ii}),o.d(M,"round",function(){return Jn}),o.d(M,"scale",function(){return hi}),o.d(M,"scaleAndAdd",function(){return Vn}),o.d(M,"distance",function(){return oi}),o.d(M,"squaredDistance",function(){return di}),o.d(M,"length",function(){return _i}),o.d(M,"squaredLength",function(){return Xn}),o.d(M,"negate",function(){return Yn}),o.d(M,"inverse",function(){return ki}),o.d(M,"normalize",function(){return Gi}),o.d(M,"dot",function(){return Hn}),o.d(M,"cross",function(){return oo}),o.d(M,"lerp",function(){return ci}),o.d(M,"random",function(){return li}),o.d(M,"transformMat4",function(){return ao}),o.d(M,"transformQuat",function(){return Zi}),o.d(M,"zero",function(){return $i}),o.d(M,"str",function(){return vo}),o.d(M,"exactEquals",function(){return ir}),o.d(M,"equals",function(){return We}),o.d(M,"sub",function(){return He}),o.d(M,"mul",function(){return ft}),o.d(M,"div",function(){return Tt}),o.d(M,"dist",function(){return Ht}),o.d(M,"sqrDist",function(){return vr}),o.d(M,"len",function(){return Be}),o.d(M,"sqrLen",function(){return ut}),o.d(M,"forEach",function(){return bt});var _={};o.r(_),o.d(_,"create",function(){return Ft}),o.d(_,"identity",function(){return we}),o.d(_,"setAxisAngle",function(){return ze}),o.d(_,"getAxisAngle",function(){return Qe}),o.d(_,"getAngle",function(){return lt}),o.d(_,"multiply",function(){return vt}),o.d(_,"rotateX",function(){return wt}),o.d(_,"rotateY",function(){return Lt}),o.d(_,"rotateZ",function(){return Wt}),o.d(_,"calculateW",function(){return er}),o.d(_,"exp",function(){return rr}),o.d(_,"ln",function(){return sr}),o.d(_,"pow",function(){return gr}),o.d(_,"slerp",function(){return Vr}),o.d(_,"random",function(){return Fr}),o.d(_,"invert",function(){return $r}),o.d(_,"conjugate",function(){return Kr}),o.d(_,"fromMat3",function(){return jn}),o.d(_,"fromEuler",function(){return Cn}),o.d(_,"str",function(){return qn}),o.d(_,"clone",function(){return ko}),o.d(_,"fromValues",function(){return Fi}),o.d(_,"copy",function(){return Qi}),o.d(_,"set",function(){return nn}),o.d(_,"add",function(){return pi}),o.d(_,"mul",function(){return Ji}),o.d(_,"scale",function(){return Ai}),o.d(_,"dot",function(){return Gn}),o.d(_,"lerp",function(){return zi}),o.d(_,"length",function(){return Di}),o.d(_,"len",function(){return fi}),o.d(_,"squaredLength",function(){return Ui}),o.d(_,"sqrLen",function(){return Ci}),o.d(_,"normalize",function(){return eo}),o.d(_,"exactEquals",function(){return so}),o.d(_,"equals",function(){return Vi}),o.d(_,"rotationTo",function(){return Ti}),o.d(_,"sqlerp",function(){return _t}),o.d(_,"setAxes",function(){return $e});var x=o(12);function O(){var w=new x.a(9);return x.a!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[5]=0,w[6]=0,w[7]=0),w[0]=1,w[4]=1,w[8]=1,w}function S(w,D){return w[0]=D[0],w[1]=D[1],w[2]=D[2],w[3]=D[4],w[4]=D[5],w[5]=D[6],w[6]=D[8],w[7]=D[9],w[8]=D[10],w}function g(w){var D=new x.a(9);return D[0]=w[0],D[1]=w[1],D[2]=w[2],D[3]=w[3],D[4]=w[4],D[5]=w[5],D[6]=w[6],D[7]=w[7],D[8]=w[8],D}function h(w,D){return w[0]=D[0],w[1]=D[1],w[2]=D[2],w[3]=D[3],w[4]=D[4],w[5]=D[5],w[6]=D[6],w[7]=D[7],w[8]=D[8],w}function y(w,D,ce,K,oe,pe,be,De,Ue){var ke=new x.a(9);return ke[0]=w,ke[1]=D,ke[2]=ce,ke[3]=K,ke[4]=oe,ke[5]=pe,ke[6]=be,ke[7]=De,ke[8]=Ue,ke}function E(w,D,ce,K,oe,pe,be,De,Ue,ke){return w[0]=D,w[1]=ce,w[2]=K,w[3]=oe,w[4]=pe,w[5]=be,w[6]=De,w[7]=Ue,w[8]=ke,w}function m(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=1,w[5]=0,w[6]=0,w[7]=0,w[8]=1,w}function p(w,D){if(w===D){var ce=D[1],K=D[2],oe=D[5];w[1]=D[3],w[2]=D[6],w[3]=ce,w[5]=D[7],w[6]=K,w[7]=oe}else w[0]=D[0],w[1]=D[3],w[2]=D[6],w[3]=D[1],w[4]=D[4],w[5]=D[7],w[6]=D[2],w[7]=D[5],w[8]=D[8];return w}function A(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=D[4],De=D[5],Ue=D[6],ke=D[7],Fe=D[8],Ye=Fe*be-De*ke,Ge=-Fe*pe+De*Ue,Xe=ke*pe-be*Ue,et=ce*Ye+K*Ge+oe*Xe;return et?(et=1/et,w[0]=Ye*et,w[1]=(-Fe*K+oe*ke)*et,w[2]=(De*K-oe*be)*et,w[3]=Ge*et,w[4]=(Fe*ce-oe*Ue)*et,w[5]=(-De*ce+oe*pe)*et,w[6]=Xe*et,w[7]=(-ke*ce+K*Ue)*et,w[8]=(be*ce-K*pe)*et,w):null}function C(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=D[4],De=D[5],Ue=D[6],ke=D[7],Fe=D[8];return w[0]=be*Fe-De*ke,w[1]=oe*ke-K*Fe,w[2]=K*De-oe*be,w[3]=De*Ue-pe*Fe,w[4]=ce*Fe-oe*Ue,w[5]=oe*pe-ce*De,w[6]=pe*ke-be*Ue,w[7]=K*Ue-ce*ke,w[8]=ce*be-K*pe,w}function N(w){var D=w[0],ce=w[1],K=w[2],oe=w[3],pe=w[4],be=w[5],De=w[6],Ue=w[7],ke=w[8];return D*(ke*pe-be*Ue)+ce*(-ke*oe+be*De)+K*(Ue*oe-pe*De)}function P(w,D,ce){var K=D[0],oe=D[1],pe=D[2],be=D[3],De=D[4],Ue=D[5],ke=D[6],Fe=D[7],Ye=D[8],Ge=ce[0],Xe=ce[1],et=ce[2],tt=ce[3],Ve=ce[4],ot=ce[5],pt=ce[6],Et=ce[7],mt=ce[8];return w[0]=Ge*K+Xe*be+et*ke,w[1]=Ge*oe+Xe*De+et*Fe,w[2]=Ge*pe+Xe*Ue+et*Ye,w[3]=tt*K+Ve*be+ot*ke,w[4]=tt*oe+Ve*De+ot*Fe,w[5]=tt*pe+Ve*Ue+ot*Ye,w[6]=pt*K+Et*be+mt*ke,w[7]=pt*oe+Et*De+mt*Fe,w[8]=pt*pe+Et*Ue+mt*Ye,w}function L(w,D,ce){var K=D[0],oe=D[1],pe=D[2],be=D[3],De=D[4],Ue=D[5],ke=D[6],Fe=D[7],Ye=D[8],Ge=ce[0],Xe=ce[1];return w[0]=K,w[1]=oe,w[2]=pe,w[3]=be,w[4]=De,w[5]=Ue,w[6]=Ge*K+Xe*be+ke,w[7]=Ge*oe+Xe*De+Fe,w[8]=Ge*pe+Xe*Ue+Ye,w}function z(w,D,ce){var K=D[0],oe=D[1],pe=D[2],be=D[3],De=D[4],Ue=D[5],ke=D[6],Fe=D[7],Ye=D[8],Ge=Math.sin(ce),Xe=Math.cos(ce);return w[0]=Xe*K+Ge*be,w[1]=Xe*oe+Ge*De,w[2]=Xe*pe+Ge*Ue,w[3]=Xe*be-Ge*K,w[4]=Xe*De-Ge*oe,w[5]=Xe*Ue-Ge*pe,w[6]=ke,w[7]=Fe,w[8]=Ye,w}function H(w,D,ce){var K=ce[0],oe=ce[1];return w[0]=K*D[0],w[1]=K*D[1],w[2]=K*D[2],w[3]=oe*D[3],w[4]=oe*D[4],w[5]=oe*D[5],w[6]=D[6],w[7]=D[7],w[8]=D[8],w}function re(w,D){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=1,w[5]=0,w[6]=D[0],w[7]=D[1],w[8]=1,w}function ae(w,D){var ce=Math.sin(D),K=Math.cos(D);return w[0]=K,w[1]=ce,w[2]=0,w[3]=-ce,w[4]=K,w[5]=0,w[6]=0,w[7]=0,w[8]=1,w}function ue(w,D){return w[0]=D[0],w[1]=0,w[2]=0,w[3]=0,w[4]=D[1],w[5]=0,w[6]=0,w[7]=0,w[8]=1,w}function xe(w,D){return w[0]=D[0],w[1]=D[1],w[2]=0,w[3]=D[2],w[4]=D[3],w[5]=0,w[6]=D[4],w[7]=D[5],w[8]=1,w}function ye(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=ce+ce,De=K+K,Ue=oe+oe,ke=ce*be,Fe=K*be,Ye=K*De,Ge=oe*be,Xe=oe*De,et=oe*Ue,tt=pe*be,Ve=pe*De,ot=pe*Ue;return w[0]=1-Ye-et,w[3]=Fe-ot,w[6]=Ge+Ve,w[1]=Fe+ot,w[4]=1-ke-et,w[7]=Xe-tt,w[2]=Ge-Ve,w[5]=Xe+tt,w[8]=1-ke-Ye,w}function Y(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=D[4],De=D[5],Ue=D[6],ke=D[7],Fe=D[8],Ye=D[9],Ge=D[10],Xe=D[11],et=D[12],tt=D[13],Ve=D[14],ot=D[15],pt=ce*De-K*be,Et=ce*Ue-oe*be,mt=ce*ke-pe*be,xt=K*Ue-oe*De,Ot=K*ke-pe*De,yt=oe*ke-pe*Ue,qe=Fe*tt-Ye*et,at=Fe*Ve-Ge*et,ht=Fe*ot-Xe*et,Mt=Ye*Ve-Ge*tt,zt=Ye*ot-Xe*tt,Ut=Ge*ot-Xe*Ve,Xt=pt*Ut-Et*zt+mt*Mt+xt*ht-Ot*at+yt*qe;return Xt?(Xt=1/Xt,w[0]=(De*Ut-Ue*zt+ke*Mt)*Xt,w[1]=(Ue*ht-be*Ut-ke*at)*Xt,w[2]=(be*zt-De*ht+ke*qe)*Xt,w[3]=(oe*zt-K*Ut-pe*Mt)*Xt,w[4]=(ce*Ut-oe*ht+pe*at)*Xt,w[5]=(K*ht-ce*zt-pe*qe)*Xt,w[6]=(tt*yt-Ve*Ot+ot*xt)*Xt,w[7]=(Ve*mt-et*yt-ot*Et)*Xt,w[8]=(et*Ot-tt*mt+ot*pt)*Xt,w):null}function Ce(w,D,ce){return w[0]=2/D,w[1]=0,w[2]=0,w[3]=0,w[4]=-2/ce,w[5]=0,w[6]=-1,w[7]=1,w[8]=1,w}function ge(w){return"mat3("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+", "+w[4]+", "+w[5]+", "+w[6]+", "+w[7]+", "+w[8]+")"}function he(w){return Math.hypot(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8])}function Q(w,D,ce){return w[0]=D[0]+ce[0],w[1]=D[1]+ce[1],w[2]=D[2]+ce[2],w[3]=D[3]+ce[3],w[4]=D[4]+ce[4],w[5]=D[5]+ce[5],w[6]=D[6]+ce[6],w[7]=D[7]+ce[7],w[8]=D[8]+ce[8],w}function W(w,D,ce){return w[0]=D[0]-ce[0],w[1]=D[1]-ce[1],w[2]=D[2]-ce[2],w[3]=D[3]-ce[3],w[4]=D[4]-ce[4],w[5]=D[5]-ce[5],w[6]=D[6]-ce[6],w[7]=D[7]-ce[7],w[8]=D[8]-ce[8],w}function le(w,D,ce){return w[0]=D[0]*ce,w[1]=D[1]*ce,w[2]=D[2]*ce,w[3]=D[3]*ce,w[4]=D[4]*ce,w[5]=D[5]*ce,w[6]=D[6]*ce,w[7]=D[7]*ce,w[8]=D[8]*ce,w}function Oe(w,D,ce,K){return w[0]=D[0]+ce[0]*K,w[1]=D[1]+ce[1]*K,w[2]=D[2]+ce[2]*K,w[3]=D[3]+ce[3]*K,w[4]=D[4]+ce[4]*K,w[5]=D[5]+ce[5]*K,w[6]=D[6]+ce[6]*K,w[7]=D[7]+ce[7]*K,w[8]=D[8]+ce[8]*K,w}function Te(w,D){return w[0]===D[0]&&w[1]===D[1]&&w[2]===D[2]&&w[3]===D[3]&&w[4]===D[4]&&w[5]===D[5]&&w[6]===D[6]&&w[7]===D[7]&&w[8]===D[8]}function se(w,D){var ce=w[0],K=w[1],oe=w[2],pe=w[3],be=w[4],De=w[5],Ue=w[6],ke=w[7],Fe=w[8],Ye=D[0],Ge=D[1],Xe=D[2],et=D[3],tt=D[4],Ve=D[5],ot=D[6],pt=D[7],Et=D[8];return Math.abs(ce-Ye)<=x.b*Math.max(1,Math.abs(ce),Math.abs(Ye))&&Math.abs(K-Ge)<=x.b*Math.max(1,Math.abs(K),Math.abs(Ge))&&Math.abs(oe-Xe)<=x.b*Math.max(1,Math.abs(oe),Math.abs(Xe))&&Math.abs(pe-et)<=x.b*Math.max(1,Math.abs(pe),Math.abs(et))&&Math.abs(be-tt)<=x.b*Math.max(1,Math.abs(be),Math.abs(tt))&&Math.abs(De-Ve)<=x.b*Math.max(1,Math.abs(De),Math.abs(Ve))&&Math.abs(Ue-ot)<=x.b*Math.max(1,Math.abs(Ue),Math.abs(ot))&&Math.abs(ke-pt)<=x.b*Math.max(1,Math.abs(ke),Math.abs(pt))&&Math.abs(Fe-Et)<=x.b*Math.max(1,Math.abs(Fe),Math.abs(Et))}var ee=P,te=W;function U(){var w=new x.a(16);return x.a!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=0,w[12]=0,w[13]=0,w[14]=0),w[0]=1,w[5]=1,w[10]=1,w[15]=1,w}function X(w){var D=new x.a(16);return D[0]=w[0],D[1]=w[1],D[2]=w[2],D[3]=w[3],D[4]=w[4],D[5]=w[5],D[6]=w[6],D[7]=w[7],D[8]=w[8],D[9]=w[9],D[10]=w[10],D[11]=w[11],D[12]=w[12],D[13]=w[13],D[14]=w[14],D[15]=w[15],D}function B(w,D){return w[0]=D[0],w[1]=D[1],w[2]=D[2],w[3]=D[3],w[4]=D[4],w[5]=D[5],w[6]=D[6],w[7]=D[7],w[8]=D[8],w[9]=D[9],w[10]=D[10],w[11]=D[11],w[12]=D[12],w[13]=D[13],w[14]=D[14],w[15]=D[15],w}function J(w,D,ce,K,oe,pe,be,De,Ue,ke,Fe,Ye,Ge,Xe,et,tt){var Ve=new x.a(16);return Ve[0]=w,Ve[1]=D,Ve[2]=ce,Ve[3]=K,Ve[4]=oe,Ve[5]=pe,Ve[6]=be,Ve[7]=De,Ve[8]=Ue,Ve[9]=ke,Ve[10]=Fe,Ve[11]=Ye,Ve[12]=Ge,Ve[13]=Xe,Ve[14]=et,Ve[15]=tt,Ve}function ne(w,D,ce,K,oe,pe,be,De,Ue,ke,Fe,Ye,Ge,Xe,et,tt,Ve){return w[0]=D,w[1]=ce,w[2]=K,w[3]=oe,w[4]=pe,w[5]=be,w[6]=De,w[7]=Ue,w[8]=ke,w[9]=Fe,w[10]=Ye,w[11]=Ge,w[12]=Xe,w[13]=et,w[14]=tt,w[15]=Ve,w}function ie(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function Z(w,D){if(w===D){var ce=D[1],K=D[2],oe=D[3],pe=D[6],be=D[7],De=D[11];w[1]=D[4],w[2]=D[8],w[3]=D[12],w[4]=ce,w[6]=D[9],w[7]=D[13],w[8]=K,w[9]=pe,w[11]=D[14],w[12]=oe,w[13]=be,w[14]=De}else w[0]=D[0],w[1]=D[4],w[2]=D[8],w[3]=D[12],w[4]=D[1],w[5]=D[5],w[6]=D[9],w[7]=D[13],w[8]=D[2],w[9]=D[6],w[10]=D[10],w[11]=D[14],w[12]=D[3],w[13]=D[7],w[14]=D[11],w[15]=D[15];return w}function fe(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=D[4],De=D[5],Ue=D[6],ke=D[7],Fe=D[8],Ye=D[9],Ge=D[10],Xe=D[11],et=D[12],tt=D[13],Ve=D[14],ot=D[15],pt=ce*De-K*be,Et=ce*Ue-oe*be,mt=ce*ke-pe*be,xt=K*Ue-oe*De,Ot=K*ke-pe*De,yt=oe*ke-pe*Ue,qe=Fe*tt-Ye*et,at=Fe*Ve-Ge*et,ht=Fe*ot-Xe*et,Mt=Ye*Ve-Ge*tt,zt=Ye*ot-Xe*tt,Ut=Ge*ot-Xe*Ve,Xt=pt*Ut-Et*zt+mt*Mt+xt*ht-Ot*at+yt*qe;return Xt?(Xt=1/Xt,w[0]=(De*Ut-Ue*zt+ke*Mt)*Xt,w[1]=(oe*zt-K*Ut-pe*Mt)*Xt,w[2]=(tt*yt-Ve*Ot+ot*xt)*Xt,w[3]=(Ge*Ot-Ye*yt-Xe*xt)*Xt,w[4]=(Ue*ht-be*Ut-ke*at)*Xt,w[5]=(ce*Ut-oe*ht+pe*at)*Xt,w[6]=(Ve*mt-et*yt-ot*Et)*Xt,w[7]=(Fe*yt-Ge*mt+Xe*Et)*Xt,w[8]=(be*zt-De*ht+ke*qe)*Xt,w[9]=(K*ht-ce*zt-pe*qe)*Xt,w[10]=(et*Ot-tt*mt+ot*pt)*Xt,w[11]=(Ye*mt-Fe*Ot-Xe*pt)*Xt,w[12]=(De*at-be*Mt-Ue*qe)*Xt,w[13]=(ce*Mt-K*at+oe*qe)*Xt,w[14]=(tt*Et-et*xt-Ve*pt)*Xt,w[15]=(Fe*xt-Ye*Et+Ge*pt)*Xt,w):null}function _e(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=D[4],De=D[5],Ue=D[6],ke=D[7],Fe=D[8],Ye=D[9],Ge=D[10],Xe=D[11],et=D[12],tt=D[13],Ve=D[14],ot=D[15];return w[0]=De*(Ge*ot-Xe*Ve)-Ye*(Ue*ot-ke*Ve)+tt*(Ue*Xe-ke*Ge),w[1]=-(K*(Ge*ot-Xe*Ve)-Ye*(oe*ot-pe*Ve)+tt*(oe*Xe-pe*Ge)),w[2]=K*(Ue*ot-ke*Ve)-De*(oe*ot-pe*Ve)+tt*(oe*ke-pe*Ue),w[3]=-(K*(Ue*Xe-ke*Ge)-De*(oe*Xe-pe*Ge)+Ye*(oe*ke-pe*Ue)),w[4]=-(be*(Ge*ot-Xe*Ve)-Fe*(Ue*ot-ke*Ve)+et*(Ue*Xe-ke*Ge)),w[5]=ce*(Ge*ot-Xe*Ve)-Fe*(oe*ot-pe*Ve)+et*(oe*Xe-pe*Ge),w[6]=-(ce*(Ue*ot-ke*Ve)-be*(oe*ot-pe*Ve)+et*(oe*ke-pe*Ue)),w[7]=ce*(Ue*Xe-ke*Ge)-be*(oe*Xe-pe*Ge)+Fe*(oe*ke-pe*Ue),w[8]=be*(Ye*ot-Xe*tt)-Fe*(De*ot-ke*tt)+et*(De*Xe-ke*Ye),w[9]=-(ce*(Ye*ot-Xe*tt)-Fe*(K*ot-pe*tt)+et*(K*Xe-pe*Ye)),w[10]=ce*(De*ot-ke*tt)-be*(K*ot-pe*tt)+et*(K*ke-pe*De),w[11]=-(ce*(De*Xe-ke*Ye)-be*(K*Xe-pe*Ye)+Fe*(K*ke-pe*De)),w[12]=-(be*(Ye*Ve-Ge*tt)-Fe*(De*Ve-Ue*tt)+et*(De*Ge-Ue*Ye)),w[13]=ce*(Ye*Ve-Ge*tt)-Fe*(K*Ve-oe*tt)+et*(K*Ge-oe*Ye),w[14]=-(ce*(De*Ve-Ue*tt)-be*(K*Ve-oe*tt)+et*(K*Ue-oe*De)),w[15]=ce*(De*Ge-Ue*Ye)-be*(K*Ge-oe*Ye)+Fe*(K*Ue-oe*De),w}function je(w){var D=w[0],ce=w[1],K=w[2],oe=w[3],pe=w[4],be=w[5],De=w[6],Ue=w[7],ke=w[8],Fe=w[9],Ye=w[10],Ge=w[11],Xe=w[12],et=w[13],tt=w[14],Ve=w[15];return(D*be-ce*pe)*(Ye*Ve-Ge*tt)-(D*De-K*pe)*(Fe*Ve-Ge*et)+(D*Ue-oe*pe)*(Fe*tt-Ye*et)+(ce*De-K*be)*(ke*Ve-Ge*Xe)-(ce*Ue-oe*be)*(ke*tt-Ye*Xe)+(K*Ue-oe*De)*(ke*et-Fe*Xe)}function Me(w,D,ce){var K=D[0],oe=D[1],pe=D[2],be=D[3],De=D[4],Ue=D[5],ke=D[6],Fe=D[7],Ye=D[8],Ge=D[9],Xe=D[10],et=D[11],tt=D[12],Ve=D[13],ot=D[14],pt=D[15],Et=ce[0],mt=ce[1],xt=ce[2],Ot=ce[3];return w[0]=Et*K+mt*De+xt*Ye+Ot*tt,w[1]=Et*oe+mt*Ue+xt*Ge+Ot*Ve,w[2]=Et*pe+mt*ke+xt*Xe+Ot*ot,w[3]=Et*be+mt*Fe+xt*et+Ot*pt,Et=ce[4],mt=ce[5],xt=ce[6],Ot=ce[7],w[4]=Et*K+mt*De+xt*Ye+Ot*tt,w[5]=Et*oe+mt*Ue+xt*Ge+Ot*Ve,w[6]=Et*pe+mt*ke+xt*Xe+Ot*ot,w[7]=Et*be+mt*Fe+xt*et+Ot*pt,Et=ce[8],mt=ce[9],xt=ce[10],Ot=ce[11],w[8]=Et*K+mt*De+xt*Ye+Ot*tt,w[9]=Et*oe+mt*Ue+xt*Ge+Ot*Ve,w[10]=Et*pe+mt*ke+xt*Xe+Ot*ot,w[11]=Et*be+mt*Fe+xt*et+Ot*pt,Et=ce[12],mt=ce[13],xt=ce[14],Ot=ce[15],w[12]=Et*K+mt*De+xt*Ye+Ot*tt,w[13]=Et*oe+mt*Ue+xt*Ge+Ot*Ve,w[14]=Et*pe+mt*ke+xt*Xe+Ot*ot,w[15]=Et*be+mt*Fe+xt*et+Ot*pt,w}function Ae(w,D,ce){var K,oe,pe,be,De,Ue,ke,Fe,Ye,Ge,Xe,et,tt=ce[0],Ve=ce[1],ot=ce[2];return D===w?(w[12]=D[0]*tt+D[4]*Ve+D[8]*ot+D[12],w[13]=D[1]*tt+D[5]*Ve+D[9]*ot+D[13],w[14]=D[2]*tt+D[6]*Ve+D[10]*ot+D[14],w[15]=D[3]*tt+D[7]*Ve+D[11]*ot+D[15]):(K=D[0],oe=D[1],pe=D[2],be=D[3],De=D[4],Ue=D[5],ke=D[6],Fe=D[7],Ye=D[8],Ge=D[9],Xe=D[10],et=D[11],w[0]=K,w[1]=oe,w[2]=pe,w[3]=be,w[4]=De,w[5]=Ue,w[6]=ke,w[7]=Fe,w[8]=Ye,w[9]=Ge,w[10]=Xe,w[11]=et,w[12]=K*tt+De*Ve+Ye*ot+D[12],w[13]=oe*tt+Ue*Ve+Ge*ot+D[13],w[14]=pe*tt+ke*Ve+Xe*ot+D[14],w[15]=be*tt+Fe*Ve+et*ot+D[15]),w}function Le(w,D,ce){var K=ce[0],oe=ce[1],pe=ce[2];return w[0]=D[0]*K,w[1]=D[1]*K,w[2]=D[2]*K,w[3]=D[3]*K,w[4]=D[4]*oe,w[5]=D[5]*oe,w[6]=D[6]*oe,w[7]=D[7]*oe,w[8]=D[8]*pe,w[9]=D[9]*pe,w[10]=D[10]*pe,w[11]=D[11]*pe,w[12]=D[12],w[13]=D[13],w[14]=D[14],w[15]=D[15],w}function Se(w,D,ce,K){var oe,pe,be,De,Ue,ke,Fe,Ye,Ge,Xe,et,tt,Ve,ot,pt,Et,mt,xt,Ot,yt,qe,at,ht,Mt,zt=K[0],Ut=K[1],Xt=K[2],fr=Math.hypot(zt,Ut,Xt);return fr<x.b?null:(zt*=fr=1/fr,Ut*=fr,Xt*=fr,oe=Math.sin(ce),be=1-(pe=Math.cos(ce)),De=D[0],Ue=D[1],ke=D[2],Fe=D[3],Ye=D[4],Ge=D[5],Xe=D[6],et=D[7],tt=D[8],Ve=D[9],ot=D[10],pt=D[11],Et=zt*zt*be+pe,mt=Ut*zt*be+Xt*oe,xt=Xt*zt*be-Ut*oe,Ot=zt*Ut*be-Xt*oe,yt=Ut*Ut*be+pe,qe=Xt*Ut*be+zt*oe,at=zt*Xt*be+Ut*oe,ht=Ut*Xt*be-zt*oe,Mt=Xt*Xt*be+pe,w[0]=De*Et+Ye*mt+tt*xt,w[1]=Ue*Et+Ge*mt+Ve*xt,w[2]=ke*Et+Xe*mt+ot*xt,w[3]=Fe*Et+et*mt+pt*xt,w[4]=De*Ot+Ye*yt+tt*qe,w[5]=Ue*Ot+Ge*yt+Ve*qe,w[6]=ke*Ot+Xe*yt+ot*qe,w[7]=Fe*Ot+et*yt+pt*qe,w[8]=De*at+Ye*ht+tt*Mt,w[9]=Ue*at+Ge*ht+Ve*Mt,w[10]=ke*at+Xe*ht+ot*Mt,w[11]=Fe*at+et*ht+pt*Mt,D!==w&&(w[12]=D[12],w[13]=D[13],w[14]=D[14],w[15]=D[15]),w)}function Re(w,D,ce){var K=Math.sin(ce),oe=Math.cos(ce),pe=D[4],be=D[5],De=D[6],Ue=D[7],ke=D[8],Fe=D[9],Ye=D[10],Ge=D[11];return D!==w&&(w[0]=D[0],w[1]=D[1],w[2]=D[2],w[3]=D[3],w[12]=D[12],w[13]=D[13],w[14]=D[14],w[15]=D[15]),w[4]=pe*oe+ke*K,w[5]=be*oe+Fe*K,w[6]=De*oe+Ye*K,w[7]=Ue*oe+Ge*K,w[8]=ke*oe-pe*K,w[9]=Fe*oe-be*K,w[10]=Ye*oe-De*K,w[11]=Ge*oe-Ue*K,w}function Ke(w,D,ce){var K=Math.sin(ce),oe=Math.cos(ce),pe=D[0],be=D[1],De=D[2],Ue=D[3],ke=D[8],Fe=D[9],Ye=D[10],Ge=D[11];return D!==w&&(w[4]=D[4],w[5]=D[5],w[6]=D[6],w[7]=D[7],w[12]=D[12],w[13]=D[13],w[14]=D[14],w[15]=D[15]),w[0]=pe*oe-ke*K,w[1]=be*oe-Fe*K,w[2]=De*oe-Ye*K,w[3]=Ue*oe-Ge*K,w[8]=pe*K+ke*oe,w[9]=be*K+Fe*oe,w[10]=De*K+Ye*oe,w[11]=Ue*K+Ge*oe,w}function Je(w,D,ce){var K=Math.sin(ce),oe=Math.cos(ce),pe=D[0],be=D[1],De=D[2],Ue=D[3],ke=D[4],Fe=D[5],Ye=D[6],Ge=D[7];return D!==w&&(w[8]=D[8],w[9]=D[9],w[10]=D[10],w[11]=D[11],w[12]=D[12],w[13]=D[13],w[14]=D[14],w[15]=D[15]),w[0]=pe*oe+ke*K,w[1]=be*oe+Fe*K,w[2]=De*oe+Ye*K,w[3]=Ue*oe+Ge*K,w[4]=ke*oe-pe*K,w[5]=Fe*oe-be*K,w[6]=Ye*oe-De*K,w[7]=Ge*oe-Ue*K,w}function nt(w,D){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=D[0],w[13]=D[1],w[14]=D[2],w[15]=1,w}function dt(w,D){return w[0]=D[0],w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=D[1],w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=D[2],w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function kt(w,D,ce){var K,oe,pe,be=ce[0],De=ce[1],Ue=ce[2],ke=Math.hypot(be,De,Ue);return ke<x.b?null:(be*=ke=1/ke,De*=ke,Ue*=ke,K=Math.sin(D),pe=1-(oe=Math.cos(D)),w[0]=be*be*pe+oe,w[1]=De*be*pe+Ue*K,w[2]=Ue*be*pe-De*K,w[3]=0,w[4]=be*De*pe-Ue*K,w[5]=De*De*pe+oe,w[6]=Ue*De*pe+be*K,w[7]=0,w[8]=be*Ue*pe+De*K,w[9]=De*Ue*pe-be*K,w[10]=Ue*Ue*pe+oe,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w)}function At(w,D){var ce=Math.sin(D),K=Math.cos(D);return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=K,w[6]=ce,w[7]=0,w[8]=0,w[9]=-ce,w[10]=K,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function It(w,D){var ce=Math.sin(D),K=Math.cos(D);return w[0]=K,w[1]=0,w[2]=-ce,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=ce,w[9]=0,w[10]=K,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function Kt(w,D){var ce=Math.sin(D),K=Math.cos(D);return w[0]=K,w[1]=ce,w[2]=0,w[3]=0,w[4]=-ce,w[5]=K,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function Qt(w,D,ce){var K=D[0],oe=D[1],pe=D[2],be=D[3],De=K+K,Ue=oe+oe,ke=pe+pe,Fe=K*De,Ye=K*Ue,Ge=K*ke,Xe=oe*Ue,et=oe*ke,tt=pe*ke,Ve=be*De,ot=be*Ue,pt=be*ke;return w[0]=1-(Xe+tt),w[1]=Ye+pt,w[2]=Ge-ot,w[3]=0,w[4]=Ye-pt,w[5]=1-(Fe+tt),w[6]=et+Ve,w[7]=0,w[8]=Ge+ot,w[9]=et-Ve,w[10]=1-(Fe+Xe),w[11]=0,w[12]=ce[0],w[13]=ce[1],w[14]=ce[2],w[15]=1,w}function tr(w,D){var ce=new x.a(3),K=-D[0],oe=-D[1],pe=-D[2],be=D[3],De=D[4],Ue=D[5],ke=D[6],Fe=D[7],Ye=K*K+oe*oe+pe*pe+be*be;return Ye>0?(ce[0]=2*(De*be+Fe*K+Ue*pe-ke*oe)/Ye,ce[1]=2*(Ue*be+Fe*oe+ke*K-De*pe)/Ye,ce[2]=2*(ke*be+Fe*pe+De*oe-Ue*K)/Ye):(ce[0]=2*(De*be+Fe*K+Ue*pe-ke*oe),ce[1]=2*(Ue*be+Fe*oe+ke*K-De*pe),ce[2]=2*(ke*be+Fe*pe+De*oe-Ue*K)),Qt(w,D,ce),w}function nr(w,D){return w[0]=D[12],w[1]=D[13],w[2]=D[14],w}function Mr(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[4],be=D[5],De=D[6],Ue=D[8],ke=D[9],Fe=D[10];return w[0]=Math.hypot(ce,K,oe),w[1]=Math.hypot(pe,be,De),w[2]=Math.hypot(Ue,ke,Fe),w}function ar(w,D){var ce=new x.a(3);Mr(ce,D);var K=1/ce[0],oe=1/ce[1],pe=1/ce[2],be=D[0]*K,De=D[1]*oe,Ue=D[2]*pe,ke=D[4]*K,Fe=D[5]*oe,Ye=D[6]*pe,Ge=D[8]*K,Xe=D[9]*oe,et=D[10]*pe,tt=be+Fe+et,Ve=0;return tt>0?(Ve=2*Math.sqrt(tt+1),w[3]=.25*Ve,w[0]=(Ye-Xe)/Ve,w[1]=(Ge-Ue)/Ve,w[2]=(De-ke)/Ve):be>Fe&&be>et?(Ve=2*Math.sqrt(1+be-Fe-et),w[3]=(Ye-Xe)/Ve,w[0]=.25*Ve,w[1]=(De+ke)/Ve,w[2]=(Ge+Ue)/Ve):Fe>et?(Ve=2*Math.sqrt(1+Fe-be-et),w[3]=(Ge-Ue)/Ve,w[0]=(De+ke)/Ve,w[1]=.25*Ve,w[2]=(Ye+Xe)/Ve):(Ve=2*Math.sqrt(1+et-be-Fe),w[3]=(De-ke)/Ve,w[0]=(Ge+Ue)/Ve,w[1]=(Ye+Xe)/Ve,w[2]=.25*Ve),w}function yr(w,D,ce,K){var oe=D[0],pe=D[1],be=D[2],De=D[3],Ue=oe+oe,ke=pe+pe,Fe=be+be,Ye=oe*Ue,Ge=oe*ke,Xe=oe*Fe,et=pe*ke,tt=pe*Fe,Ve=be*Fe,ot=De*Ue,pt=De*ke,Et=De*Fe,mt=K[0],xt=K[1],Ot=K[2];return w[0]=(1-(et+Ve))*mt,w[1]=(Ge+Et)*mt,w[2]=(Xe-pt)*mt,w[3]=0,w[4]=(Ge-Et)*xt,w[5]=(1-(Ye+Ve))*xt,w[6]=(tt+ot)*xt,w[7]=0,w[8]=(Xe+pt)*Ot,w[9]=(tt-ot)*Ot,w[10]=(1-(Ye+et))*Ot,w[11]=0,w[12]=ce[0],w[13]=ce[1],w[14]=ce[2],w[15]=1,w}function mr(w,D,ce,K,oe){var pe=D[0],be=D[1],De=D[2],Ue=D[3],ke=pe+pe,Fe=be+be,Ye=De+De,Ge=pe*ke,Xe=pe*Fe,et=pe*Ye,tt=be*Fe,Ve=be*Ye,ot=De*Ye,pt=Ue*ke,Et=Ue*Fe,mt=Ue*Ye,xt=K[0],Ot=K[1],yt=K[2],qe=oe[0],at=oe[1],ht=oe[2],Mt=(1-(tt+ot))*xt,zt=(Xe+mt)*xt,Ut=(et-Et)*xt,Xt=(Xe-mt)*Ot,fr=(1-(Ge+ot))*Ot,Or=(Ve+pt)*Ot,kr=(et+Et)*yt,br=(Ve-pt)*yt,ur=(1-(Ge+tt))*yt;return w[0]=Mt,w[1]=zt,w[2]=Ut,w[3]=0,w[4]=Xt,w[5]=fr,w[6]=Or,w[7]=0,w[8]=kr,w[9]=br,w[10]=ur,w[11]=0,w[12]=ce[0]+qe-(Mt*qe+Xt*at+kr*ht),w[13]=ce[1]+at-(zt*qe+fr*at+br*ht),w[14]=ce[2]+ht-(Ut*qe+Or*at+ur*ht),w[15]=1,w}function Rr(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=ce+ce,De=K+K,Ue=oe+oe,ke=ce*be,Fe=K*be,Ye=K*De,Ge=oe*be,Xe=oe*De,et=oe*Ue,tt=pe*be,Ve=pe*De,ot=pe*Ue;return w[0]=1-Ye-et,w[1]=Fe+ot,w[2]=Ge-Ve,w[3]=0,w[4]=Fe-ot,w[5]=1-ke-et,w[6]=Xe+tt,w[7]=0,w[8]=Ge+Ve,w[9]=Xe-tt,w[10]=1-ke-Ye,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function pr(w,D,ce,K,oe,pe,be){var De=1/(ce-D),Ue=1/(oe-K),ke=1/(pe-be);return w[0]=2*pe*De,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=2*pe*Ue,w[6]=0,w[7]=0,w[8]=(ce+D)*De,w[9]=(oe+K)*Ue,w[10]=(be+pe)*ke,w[11]=-1,w[12]=0,w[13]=0,w[14]=be*pe*2*ke,w[15]=0,w}function xr(w,D,ce,K,oe){var pe,be=1/Math.tan(D/2);return w[0]=be/ce,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=be,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,oe!=null&&oe!==1/0?(pe=1/(K-oe),w[10]=(oe+K)*pe,w[14]=2*oe*K*pe):(w[10]=-1,w[14]=-2*K),w}function dr(w,D,ce,K){var oe=Math.tan(D.upDegrees*Math.PI/180),pe=Math.tan(D.downDegrees*Math.PI/180),be=Math.tan(D.leftDegrees*Math.PI/180),De=Math.tan(D.rightDegrees*Math.PI/180),Ue=2/(be+De),ke=2/(oe+pe);return w[0]=Ue,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=ke,w[6]=0,w[7]=0,w[8]=-(be-De)*Ue*.5,w[9]=(oe-pe)*ke*.5,w[10]=K/(ce-K),w[11]=-1,w[12]=0,w[13]=0,w[14]=K*ce/(ce-K),w[15]=0,w}function Gr(w,D,ce,K,oe,pe,be){var De=1/(D-ce),Ue=1/(K-oe),ke=1/(pe-be);return w[0]=-2*De,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*Ue,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=2*ke,w[11]=0,w[12]=(D+ce)*De,w[13]=(oe+K)*Ue,w[14]=(be+pe)*ke,w[15]=1,w}function Lr(w,D,ce,K){var oe,pe,be,De,Ue,ke,Fe,Ye,Ge,Xe,et=D[0],tt=D[1],Ve=D[2],ot=K[0],pt=K[1],Et=K[2],mt=ce[0],xt=ce[1],Ot=ce[2];return Math.abs(et-mt)<x.b&&Math.abs(tt-xt)<x.b&&Math.abs(Ve-Ot)<x.b?ie(w):(Fe=et-mt,Ye=tt-xt,Ge=Ve-Ot,oe=pt*(Ge*=Xe=1/Math.hypot(Fe,Ye,Ge))-Et*(Ye*=Xe),pe=Et*(Fe*=Xe)-ot*Ge,be=ot*Ye-pt*Fe,(Xe=Math.hypot(oe,pe,be))?(oe*=Xe=1/Xe,pe*=Xe,be*=Xe):(oe=0,pe=0,be=0),De=Ye*be-Ge*pe,Ue=Ge*oe-Fe*be,ke=Fe*pe-Ye*oe,(Xe=Math.hypot(De,Ue,ke))?(De*=Xe=1/Xe,Ue*=Xe,ke*=Xe):(De=0,Ue=0,ke=0),w[0]=oe,w[1]=De,w[2]=Fe,w[3]=0,w[4]=pe,w[5]=Ue,w[6]=Ye,w[7]=0,w[8]=be,w[9]=ke,w[10]=Ge,w[11]=0,w[12]=-(oe*et+pe*tt+be*Ve),w[13]=-(De*et+Ue*tt+ke*Ve),w[14]=-(Fe*et+Ye*tt+Ge*Ve),w[15]=1,w)}function pn(w,D,ce,K){var oe=D[0],pe=D[1],be=D[2],De=K[0],Ue=K[1],ke=K[2],Fe=oe-ce[0],Ye=pe-ce[1],Ge=be-ce[2],Xe=Fe*Fe+Ye*Ye+Ge*Ge;Xe>0&&(Fe*=Xe=1/Math.sqrt(Xe),Ye*=Xe,Ge*=Xe);var et=Ue*Ge-ke*Ye,tt=ke*Fe-De*Ge,Ve=De*Ye-Ue*Fe;return(Xe=et*et+tt*tt+Ve*Ve)>0&&(et*=Xe=1/Math.sqrt(Xe),tt*=Xe,Ve*=Xe),w[0]=et,w[1]=tt,w[2]=Ve,w[3]=0,w[4]=Ye*Ve-Ge*tt,w[5]=Ge*et-Fe*Ve,w[6]=Fe*tt-Ye*et,w[7]=0,w[8]=Fe,w[9]=Ye,w[10]=Ge,w[11]=0,w[12]=oe,w[13]=pe,w[14]=be,w[15]=1,w}function Ur(w){return"mat4("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+", "+w[4]+", "+w[5]+", "+w[6]+", "+w[7]+", "+w[8]+", "+w[9]+", "+w[10]+", "+w[11]+", "+w[12]+", "+w[13]+", "+w[14]+", "+w[15]+")"}function Nr(w){return Math.hypot(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])}function Dr(w,D,ce){return w[0]=D[0]+ce[0],w[1]=D[1]+ce[1],w[2]=D[2]+ce[2],w[3]=D[3]+ce[3],w[4]=D[4]+ce[4],w[5]=D[5]+ce[5],w[6]=D[6]+ce[6],w[7]=D[7]+ce[7],w[8]=D[8]+ce[8],w[9]=D[9]+ce[9],w[10]=D[10]+ce[10],w[11]=D[11]+ce[11],w[12]=D[12]+ce[12],w[13]=D[13]+ce[13],w[14]=D[14]+ce[14],w[15]=D[15]+ce[15],w}function rn(w,D,ce){return w[0]=D[0]-ce[0],w[1]=D[1]-ce[1],w[2]=D[2]-ce[2],w[3]=D[3]-ce[3],w[4]=D[4]-ce[4],w[5]=D[5]-ce[5],w[6]=D[6]-ce[6],w[7]=D[7]-ce[7],w[8]=D[8]-ce[8],w[9]=D[9]-ce[9],w[10]=D[10]-ce[10],w[11]=D[11]-ce[11],w[12]=D[12]-ce[12],w[13]=D[13]-ce[13],w[14]=D[14]-ce[14],w[15]=D[15]-ce[15],w}function Ir(w,D,ce){return w[0]=D[0]*ce,w[1]=D[1]*ce,w[2]=D[2]*ce,w[3]=D[3]*ce,w[4]=D[4]*ce,w[5]=D[5]*ce,w[6]=D[6]*ce,w[7]=D[7]*ce,w[8]=D[8]*ce,w[9]=D[9]*ce,w[10]=D[10]*ce,w[11]=D[11]*ce,w[12]=D[12]*ce,w[13]=D[13]*ce,w[14]=D[14]*ce,w[15]=D[15]*ce,w}function On(w,D,ce,K){return w[0]=D[0]+ce[0]*K,w[1]=D[1]+ce[1]*K,w[2]=D[2]+ce[2]*K,w[3]=D[3]+ce[3]*K,w[4]=D[4]+ce[4]*K,w[5]=D[5]+ce[5]*K,w[6]=D[6]+ce[6]*K,w[7]=D[7]+ce[7]*K,w[8]=D[8]+ce[8]*K,w[9]=D[9]+ce[9]*K,w[10]=D[10]+ce[10]*K,w[11]=D[11]+ce[11]*K,w[12]=D[12]+ce[12]*K,w[13]=D[13]+ce[13]*K,w[14]=D[14]+ce[14]*K,w[15]=D[15]+ce[15]*K,w}function In(w,D){return w[0]===D[0]&&w[1]===D[1]&&w[2]===D[2]&&w[3]===D[3]&&w[4]===D[4]&&w[5]===D[5]&&w[6]===D[6]&&w[7]===D[7]&&w[8]===D[8]&&w[9]===D[9]&&w[10]===D[10]&&w[11]===D[11]&&w[12]===D[12]&&w[13]===D[13]&&w[14]===D[14]&&w[15]===D[15]}function Dn(w,D){var ce=w[0],K=w[1],oe=w[2],pe=w[3],be=w[4],De=w[5],Ue=w[6],ke=w[7],Fe=w[8],Ye=w[9],Ge=w[10],Xe=w[11],et=w[12],tt=w[13],Ve=w[14],ot=w[15],pt=D[0],Et=D[1],mt=D[2],xt=D[3],Ot=D[4],yt=D[5],qe=D[6],at=D[7],ht=D[8],Mt=D[9],zt=D[10],Ut=D[11],Xt=D[12],fr=D[13],Or=D[14],kr=D[15];return Math.abs(ce-pt)<=x.b*Math.max(1,Math.abs(ce),Math.abs(pt))&&Math.abs(K-Et)<=x.b*Math.max(1,Math.abs(K),Math.abs(Et))&&Math.abs(oe-mt)<=x.b*Math.max(1,Math.abs(oe),Math.abs(mt))&&Math.abs(pe-xt)<=x.b*Math.max(1,Math.abs(pe),Math.abs(xt))&&Math.abs(be-Ot)<=x.b*Math.max(1,Math.abs(be),Math.abs(Ot))&&Math.abs(De-yt)<=x.b*Math.max(1,Math.abs(De),Math.abs(yt))&&Math.abs(Ue-qe)<=x.b*Math.max(1,Math.abs(Ue),Math.abs(qe))&&Math.abs(ke-at)<=x.b*Math.max(1,Math.abs(ke),Math.abs(at))&&Math.abs(Fe-ht)<=x.b*Math.max(1,Math.abs(Fe),Math.abs(ht))&&Math.abs(Ye-Mt)<=x.b*Math.max(1,Math.abs(Ye),Math.abs(Mt))&&Math.abs(Ge-zt)<=x.b*Math.max(1,Math.abs(Ge),Math.abs(zt))&&Math.abs(Xe-Ut)<=x.b*Math.max(1,Math.abs(Xe),Math.abs(Ut))&&Math.abs(et-Xt)<=x.b*Math.max(1,Math.abs(et),Math.abs(Xt))&&Math.abs(tt-fr)<=x.b*Math.max(1,Math.abs(tt),Math.abs(fr))&&Math.abs(Ve-Or)<=x.b*Math.max(1,Math.abs(Ve),Math.abs(Or))&&Math.abs(ot-kr)<=x.b*Math.max(1,Math.abs(ot),Math.abs(kr))}var Rn=Me,gn=rn,Er=o(39);function ln(){var w=new x.a(4);return x.a!=Float32Array&&(w[0]=0,w[1]=0,w[2]=0,w[3]=0),w}function yn(w){var D=new x.a(4);return D[0]=w[0],D[1]=w[1],D[2]=w[2],D[3]=w[3],D}function mn(w,D,ce,K){var oe=new x.a(4);return oe[0]=w,oe[1]=D,oe[2]=ce,oe[3]=K,oe}function Qn(w,D){return w[0]=D[0],w[1]=D[1],w[2]=D[2],w[3]=D[3],w}function Un(w,D,ce,K,oe){return w[0]=D,w[1]=ce,w[2]=K,w[3]=oe,w}function ri(w,D,ce){return w[0]=D[0]+ce[0],w[1]=D[1]+ce[1],w[2]=D[2]+ce[2],w[3]=D[3]+ce[3],w}function Oi(w,D,ce){return w[0]=D[0]-ce[0],w[1]=D[1]-ce[1],w[2]=D[2]-ce[2],w[3]=D[3]-ce[3],w}function ni(w,D,ce){return w[0]=D[0]*ce[0],w[1]=D[1]*ce[1],w[2]=D[2]*ce[2],w[3]=D[3]*ce[3],w}function Bn(w,D,ce){return w[0]=D[0]/ce[0],w[1]=D[1]/ce[1],w[2]=D[2]/ce[2],w[3]=D[3]/ce[3],w}function wi(w,D){return w[0]=Math.ceil(D[0]),w[1]=Math.ceil(D[1]),w[2]=Math.ceil(D[2]),w[3]=Math.ceil(D[3]),w}function Mi(w,D){return w[0]=Math.floor(D[0]),w[1]=Math.floor(D[1]),w[2]=Math.floor(D[2]),w[3]=Math.floor(D[3]),w}function Wn(w,D,ce){return w[0]=Math.min(D[0],ce[0]),w[1]=Math.min(D[1],ce[1]),w[2]=Math.min(D[2],ce[2]),w[3]=Math.min(D[3],ce[3]),w}function ii(w,D,ce){return w[0]=Math.max(D[0],ce[0]),w[1]=Math.max(D[1],ce[1]),w[2]=Math.max(D[2],ce[2]),w[3]=Math.max(D[3],ce[3]),w}function Jn(w,D){return w[0]=Math.round(D[0]),w[1]=Math.round(D[1]),w[2]=Math.round(D[2]),w[3]=Math.round(D[3]),w}function hi(w,D,ce){return w[0]=D[0]*ce,w[1]=D[1]*ce,w[2]=D[2]*ce,w[3]=D[3]*ce,w}function Vn(w,D,ce,K){return w[0]=D[0]+ce[0]*K,w[1]=D[1]+ce[1]*K,w[2]=D[2]+ce[2]*K,w[3]=D[3]+ce[3]*K,w}function oi(w,D){var ce=D[0]-w[0],K=D[1]-w[1],oe=D[2]-w[2],pe=D[3]-w[3];return Math.hypot(ce,K,oe,pe)}function di(w,D){var ce=D[0]-w[0],K=D[1]-w[1],oe=D[2]-w[2],pe=D[3]-w[3];return ce*ce+K*K+oe*oe+pe*pe}function _i(w){var D=w[0],ce=w[1],K=w[2],oe=w[3];return Math.hypot(D,ce,K,oe)}function Xn(w){var D=w[0],ce=w[1],K=w[2],oe=w[3];return D*D+ce*ce+K*K+oe*oe}function Yn(w,D){return w[0]=-D[0],w[1]=-D[1],w[2]=-D[2],w[3]=-D[3],w}function ki(w,D){return w[0]=1/D[0],w[1]=1/D[1],w[2]=1/D[2],w[3]=1/D[3],w}function Gi(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=ce*ce+K*K+oe*oe+pe*pe;return be>0&&(be=1/Math.sqrt(be)),w[0]=ce*be,w[1]=K*be,w[2]=oe*be,w[3]=pe*be,w}function Hn(w,D){return w[0]*D[0]+w[1]*D[1]+w[2]*D[2]+w[3]*D[3]}function oo(w,D,ce,K){var oe=ce[0]*K[1]-ce[1]*K[0],pe=ce[0]*K[2]-ce[2]*K[0],be=ce[0]*K[3]-ce[3]*K[0],De=ce[1]*K[2]-ce[2]*K[1],Ue=ce[1]*K[3]-ce[3]*K[1],ke=ce[2]*K[3]-ce[3]*K[2],Fe=D[0],Ye=D[1],Ge=D[2],Xe=D[3];return w[0]=Ye*ke-Ge*Ue+Xe*De,w[1]=-Fe*ke+Ge*be-Xe*pe,w[2]=Fe*Ue-Ye*be+Xe*oe,w[3]=-Fe*De+Ye*pe-Ge*oe,w}function ci(w,D,ce,K){var oe=D[0],pe=D[1],be=D[2],De=D[3];return w[0]=oe+K*(ce[0]-oe),w[1]=pe+K*(ce[1]-pe),w[2]=be+K*(ce[2]-be),w[3]=De+K*(ce[3]-De),w}function li(w,D){var ce,K,oe,pe,be,De;D=D||1;do be=(ce=2*x.c()-1)*ce+(K=2*x.c()-1)*K;while(be>=1);do De=(oe=2*x.c()-1)*oe+(pe=2*x.c()-1)*pe;while(De>=1);var Ue=Math.sqrt((1-be)/De);return w[0]=D*ce,w[1]=D*K,w[2]=D*oe*Ue,w[3]=D*pe*Ue,w}function ao(w,D,ce){var K=D[0],oe=D[1],pe=D[2],be=D[3];return w[0]=ce[0]*K+ce[4]*oe+ce[8]*pe+ce[12]*be,w[1]=ce[1]*K+ce[5]*oe+ce[9]*pe+ce[13]*be,w[2]=ce[2]*K+ce[6]*oe+ce[10]*pe+ce[14]*be,w[3]=ce[3]*K+ce[7]*oe+ce[11]*pe+ce[15]*be,w}function Zi(w,D,ce){var K=D[0],oe=D[1],pe=D[2],be=ce[0],De=ce[1],Ue=ce[2],ke=ce[3],Fe=ke*K+De*pe-Ue*oe,Ye=ke*oe+Ue*K-be*pe,Ge=ke*pe+be*oe-De*K,Xe=-be*K-De*oe-Ue*pe;return w[0]=Fe*ke+Xe*-be+Ye*-Ue-Ge*-De,w[1]=Ye*ke+Xe*-De+Ge*-be-Fe*-Ue,w[2]=Ge*ke+Xe*-Ue+Fe*-De-Ye*-be,w[3]=D[3],w}function $i(w){return w[0]=0,w[1]=0,w[2]=0,w[3]=0,w}function vo(w){return"vec4("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+")"}function ir(w,D){return w[0]===D[0]&&w[1]===D[1]&&w[2]===D[2]&&w[3]===D[3]}function We(w,D){var ce=w[0],K=w[1],oe=w[2],pe=w[3],be=D[0],De=D[1],Ue=D[2],ke=D[3];return Math.abs(ce-be)<=x.b*Math.max(1,Math.abs(ce),Math.abs(be))&&Math.abs(K-De)<=x.b*Math.max(1,Math.abs(K),Math.abs(De))&&Math.abs(oe-Ue)<=x.b*Math.max(1,Math.abs(oe),Math.abs(Ue))&&Math.abs(pe-ke)<=x.b*Math.max(1,Math.abs(pe),Math.abs(ke))}var Ne,He=Oi,ft=ni,Tt=Bn,Ht=oi,vr=di,Be=_i,ut=Xn,bt=(Ne=ln(),function(w,D,ce,K,oe,pe){var be,De;for(D||(D=4),ce||(ce=0),De=K?Math.min(K*D+ce,w.length):w.length,be=ce;be<De;be+=D)Ne[0]=w[be],Ne[1]=w[be+1],Ne[2]=w[be+2],Ne[3]=w[be+3],oe(Ne,Ne,pe),w[be]=Ne[0],w[be+1]=Ne[1],w[be+2]=Ne[2],w[be+3]=Ne[3];return w});function Ft(){var w=new x.a(4);return x.a!=Float32Array&&(w[0]=0,w[1]=0,w[2]=0),w[3]=1,w}function we(w){return w[0]=0,w[1]=0,w[2]=0,w[3]=1,w}function ze(w,D,ce){ce*=.5;var K=Math.sin(ce);return w[0]=K*D[0],w[1]=K*D[1],w[2]=K*D[2],w[3]=Math.cos(ce),w}function Qe(w,D){var ce=2*Math.acos(D[3]),K=Math.sin(ce/2);return K>x.b?(w[0]=D[0]/K,w[1]=D[1]/K,w[2]=D[2]/K):(w[0]=1,w[1]=0,w[2]=0),ce}function lt(w,D){var ce=Gn(w,D);return Math.acos(2*ce*ce-1)}function vt(w,D,ce){var K=D[0],oe=D[1],pe=D[2],be=D[3],De=ce[0],Ue=ce[1],ke=ce[2],Fe=ce[3];return w[0]=K*Fe+be*De+oe*ke-pe*Ue,w[1]=oe*Fe+be*Ue+pe*De-K*ke,w[2]=pe*Fe+be*ke+K*Ue-oe*De,w[3]=be*Fe-K*De-oe*Ue-pe*ke,w}function wt(w,D,ce){ce*=.5;var K=D[0],oe=D[1],pe=D[2],be=D[3],De=Math.sin(ce),Ue=Math.cos(ce);return w[0]=K*Ue+be*De,w[1]=oe*Ue+pe*De,w[2]=pe*Ue-oe*De,w[3]=be*Ue-K*De,w}function Lt(w,D,ce){ce*=.5;var K=D[0],oe=D[1],pe=D[2],be=D[3],De=Math.sin(ce),Ue=Math.cos(ce);return w[0]=K*Ue-pe*De,w[1]=oe*Ue+be*De,w[2]=pe*Ue+K*De,w[3]=be*Ue-oe*De,w}function Wt(w,D,ce){ce*=.5;var K=D[0],oe=D[1],pe=D[2],be=D[3],De=Math.sin(ce),Ue=Math.cos(ce);return w[0]=K*Ue+oe*De,w[1]=oe*Ue-K*De,w[2]=pe*Ue+be*De,w[3]=be*Ue-pe*De,w}function er(w,D){var ce=D[0],K=D[1],oe=D[2];return w[0]=ce,w[1]=K,w[2]=oe,w[3]=Math.sqrt(Math.abs(1-ce*ce-K*K-oe*oe)),w}function rr(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=Math.sqrt(ce*ce+K*K+oe*oe),De=Math.exp(pe),Ue=be>0?De*Math.sin(be)/be:0;return w[0]=ce*Ue,w[1]=K*Ue,w[2]=oe*Ue,w[3]=De*Math.cos(be),w}function sr(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=Math.sqrt(ce*ce+K*K+oe*oe),De=be>0?Math.atan2(be,pe)/be:0;return w[0]=ce*De,w[1]=K*De,w[2]=oe*De,w[3]=.5*Math.log(ce*ce+K*K+oe*oe+pe*pe),w}function gr(w,D,ce){return sr(w,D),Ai(w,w,ce),rr(w,w),w}function Vr(w,D,ce,K){var oe,pe,be,De,Ue,ke=D[0],Fe=D[1],Ye=D[2],Ge=D[3],Xe=ce[0],et=ce[1],tt=ce[2],Ve=ce[3];return(pe=ke*Xe+Fe*et+Ye*tt+Ge*Ve)<0&&(pe=-pe,Xe=-Xe,et=-et,tt=-tt,Ve=-Ve),1-pe>x.b?(oe=Math.acos(pe),be=Math.sin(oe),De=Math.sin((1-K)*oe)/be,Ue=Math.sin(K*oe)/be):(De=1-K,Ue=K),w[0]=De*ke+Ue*Xe,w[1]=De*Fe+Ue*et,w[2]=De*Ye+Ue*tt,w[3]=De*Ge+Ue*Ve,w}function Fr(w){var D=x.c(),ce=x.c(),K=x.c(),oe=Math.sqrt(1-D),pe=Math.sqrt(D);return w[0]=oe*Math.sin(2*Math.PI*ce),w[1]=oe*Math.cos(2*Math.PI*ce),w[2]=pe*Math.sin(2*Math.PI*K),w[3]=pe*Math.cos(2*Math.PI*K),w}function $r(w,D){var ce=D[0],K=D[1],oe=D[2],pe=D[3],be=ce*ce+K*K+oe*oe+pe*pe,De=be?1/be:0;return w[0]=-ce*De,w[1]=-K*De,w[2]=-oe*De,w[3]=pe*De,w}function Kr(w,D){return w[0]=-D[0],w[1]=-D[1],w[2]=-D[2],w[3]=D[3],w}function jn(w,D){var ce,K=D[0]+D[4]+D[8];if(K>0)ce=Math.sqrt(K+1),w[3]=.5*ce,ce=.5/ce,w[0]=(D[5]-D[7])*ce,w[1]=(D[6]-D[2])*ce,w[2]=(D[1]-D[3])*ce;else{var oe=0;D[4]>D[0]&&(oe=1),D[8]>D[3*oe+oe]&&(oe=2);var pe=(oe+1)%3,be=(oe+2)%3;ce=Math.sqrt(D[3*oe+oe]-D[3*pe+pe]-D[3*be+be]+1),w[oe]=.5*ce,ce=.5/ce,w[3]=(D[3*pe+be]-D[3*be+pe])*ce,w[pe]=(D[3*pe+oe]+D[3*oe+pe])*ce,w[be]=(D[3*be+oe]+D[3*oe+be])*ce}return w}function Cn(w,D,ce,K){var oe=.5*Math.PI/180;D*=oe,ce*=oe,K*=oe;var pe=Math.sin(D),be=Math.cos(D),De=Math.sin(ce),Ue=Math.cos(ce),ke=Math.sin(K),Fe=Math.cos(K);return w[0]=pe*Ue*Fe-be*De*ke,w[1]=be*De*Fe+pe*Ue*ke,w[2]=be*Ue*ke-pe*De*Fe,w[3]=be*Ue*Fe+pe*De*ke,w}function qn(w){return"quat("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+")"}var Qr,Mn,ai,Sn,si,Jr,ko=yn,Fi=mn,Qi=Qn,nn=Un,pi=ri,Ji=vt,Ai=hi,Gn=Hn,zi=ci,Di=_i,fi=Di,Ui=Xn,Ci=Ui,eo=Gi,so=ir,Vi=We,Ti=(Qr=Er.create(),Mn=Er.fromValues(1,0,0),ai=Er.fromValues(0,1,0),function(w,D,ce){var K=Er.dot(D,ce);return K<-.999999?(Er.cross(Qr,Mn,D),Er.len(Qr)<1e-6&&Er.cross(Qr,ai,D),Er.normalize(Qr,Qr),ze(w,Qr,Math.PI),w):K>.999999?(w[0]=0,w[1]=0,w[2]=0,w[3]=1,w):(Er.cross(Qr,D,ce),w[0]=Qr[0],w[1]=Qr[1],w[2]=Qr[2],w[3]=1+K,eo(w,w))}),_t=(Sn=Ft(),si=Ft(),function(w,D,ce,K,oe,pe){return Vr(Sn,D,oe,pe),Vr(si,ce,K,pe),Vr(w,Sn,si,2*pe*(1-pe)),w}),$e=(Jr=O(),function(w,D,ce,K){return Jr[0]=ce[0],Jr[3]=ce[1],Jr[6]=ce[2],Jr[1]=K[0],Jr[4]=K[1],Jr[7]=K[2],Jr[2]=-D[0],Jr[5]=-D[1],Jr[8]=-D[2],eo(w,jn(w,Jr))}),St=o(79)},function(R,b,o){"use strict";o.d(b,"AST_TOKEN_TYPES",function(){return h}),o.d(b,"STORAGE_CLASS",function(){return E}),o.d(b,"Target",function(){return m}),o.d(b,"DefineValuePlaceholder",function(){return A}),o(228),o(25),o(132),o(134),o(119),o(120),o(121),o(122),o(123),o(124),o(68),o(126),o(127),o(128),o(129);var f=o(118);o.d(b,"createEntity",function(){return f.b});var c=o(13);o.d(b,"IDENTIFIER",function(){return c.a});var M=o(91);o.d(b,"createWorldContainer",function(){return M.a});var _=o(237);o.d(b,"generateAABBFromVertices",function(){return _.a});var x=o(238);o.d(b,"isSafari",function(){return x.a}),o(267);var O=o(268);o.d(b,"AABB",function(){return O.a}),o.d(b,"Frustum",function(){return O.b});var S=o(114);o.o(S,"gl")&&o.d(b,"gl",function(){return S.gl});var g=o(250);o.o(g,"gl")&&o.d(b,"gl",function(){return g.gl});var h,y,E,m,p=o(251);o.o(p,"gl")&&o.d(b,"gl",function(){return p.gl}),o.o(S,"gl")&&o.d(b,"gl",function(){return S.gl}),function(C){C.Void="Void",C.Boolean="Boolean",C.Float="Float",C.Uint32="Uint32",C.Int32="Int32",C.Vector="Vector",C.Vector2Float="vec2<f32>",C.Vector3Float="vec3<f32>",C.Vector4Float="vec4<f32>",C.Vector2Boolean="vec2<bool>",C.Vector3Boolean="vec3<bool>",C.Vector4Boolean="vec4<bool>",C.Vector2Uint="vec2<u32>",C.Vector3Uint="vec3<u32>",C.Vector4Uint="vec4<u32>",C.Vector2Int="vec2<i32>",C.Vector3Int="vec3<i32>",C.Vector4Int="vec4<i32>",C.Matrix="Matrix",C.Matrix3x3Float="mat3x3<f32>",C.Matrix4x4Float="mat4x4<i32>",C.Struct="Struct",C.FloatArray="Float[]",C.Vector4FloatArray="vec4<f32>[]"}(h||(h={})),function(C){C.Program="Program",C.Identifier="Identifier",C.VariableDeclaration="VariableDeclaration",C.BlockStatement="BlockStatement",C.ReturnStatement="ReturnStatement",C.FunctionDeclaration="FunctionDeclaration",C.VariableDeclarator="VariableDeclarator",C.AssignmentExpression="AssignmentExpression",C.LogicalExpression="LogicalExpression",C.BinaryExpression="BinaryExpression",C.ArrayExpression="ArrayExpression",C.UnaryExpression="UnaryExpression",C.UpdateExpression="UpdateExpression",C.FunctionExpression="FunctionExpression",C.MemberExpression="MemberExpression",C.ConditionalExpression="ConditionalExpression",C.ExpressionStatement="ExpressionStatement",C.CallExpression="CallExpression",C.NumThreadStatement="NumThreadStatement",C.StorageStatement="StorageStatement",C.DoWhileStatement="DoWhileStatement",C.WhileStatement="WhileStatement",C.ForStatement="ForStatement",C.BreakStatement="BreakStatement",C.ContinueStatement="ContinueStatement",C.IfStatement="IfStatement",C.ImportedFunctionStatement="ImportedFunctionStatement"}(y||(y={})),function(C){C.Input="Input",C.Output="Output",C.Uniform="Uniform",C.Workgroup="Workgroup",C.UniformConstant="UniformConstant",C.Image="Image",C.StorageBuffer="StorageBuffer",C.Private="Private",C.Function="Function"}(E||(E={})),function(C){C.GLSL100="GLSL100",C.GLSL450="GLSL450",C.WGSL="WGSL"}(m||(m={}));var A="__DefineValuePlaceholder__"},function(R,b){R.exports=function(o,f,c){return f in o?Object.defineProperty(o,f,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[f]=c,o},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.multiBindToService=b.getServiceIdentifierAsString=b.typeConstraint=b.namedConstraint=b.taggedConstraint=b.traverseAncerstors=b.decorate=b.id=b.MetadataReader=b.postConstruct=b.targetName=b.multiInject=b.unmanaged=b.optional=b.LazyServiceIdentifer=b.inject=b.named=b.tagged=b.injectable=b.ContainerModule=b.AsyncContainerModule=b.TargetTypeEnum=b.BindingTypeEnum=b.BindingScopeEnum=b.Container=b.METADATA_KEY=void 0;var f=o(32);b.METADATA_KEY=f;var c=o(485);Object.defineProperty(b,"Container",{enumerable:!0,get:function(){return c.Container}});var M=o(54);Object.defineProperty(b,"BindingScopeEnum",{enumerable:!0,get:function(){return M.BindingScopeEnum}}),Object.defineProperty(b,"BindingTypeEnum",{enumerable:!0,get:function(){return M.BindingTypeEnum}}),Object.defineProperty(b,"TargetTypeEnum",{enumerable:!0,get:function(){return M.TargetTypeEnum}});var _=o(501);Object.defineProperty(b,"AsyncContainerModule",{enumerable:!0,get:function(){return _.AsyncContainerModule}}),Object.defineProperty(b,"ContainerModule",{enumerable:!0,get:function(){return _.ContainerModule}});var x=o(502);Object.defineProperty(b,"injectable",{enumerable:!0,get:function(){return x.injectable}});var O=o(503);Object.defineProperty(b,"tagged",{enumerable:!0,get:function(){return O.tagged}});var S=o(504);Object.defineProperty(b,"named",{enumerable:!0,get:function(){return S.named}});var g=o(233);Object.defineProperty(b,"inject",{enumerable:!0,get:function(){return g.inject}}),Object.defineProperty(b,"LazyServiceIdentifer",{enumerable:!0,get:function(){return g.LazyServiceIdentifer}});var h=o(505);Object.defineProperty(b,"optional",{enumerable:!0,get:function(){return h.optional}});var y=o(506);Object.defineProperty(b,"unmanaged",{enumerable:!0,get:function(){return y.unmanaged}});var E=o(507);Object.defineProperty(b,"multiInject",{enumerable:!0,get:function(){return E.multiInject}});var m=o(508);Object.defineProperty(b,"targetName",{enumerable:!0,get:function(){return m.targetName}});var p=o(509);Object.defineProperty(b,"postConstruct",{enumerable:!0,get:function(){return p.postConstruct}});var A=o(231);Object.defineProperty(b,"MetadataReader",{enumerable:!0,get:function(){return A.MetadataReader}});var C=o(66);Object.defineProperty(b,"id",{enumerable:!0,get:function(){return C.id}});var N=o(58);Object.defineProperty(b,"decorate",{enumerable:!0,get:function(){return N.decorate}});var P=o(236);Object.defineProperty(b,"traverseAncerstors",{enumerable:!0,get:function(){return P.traverseAncerstors}}),Object.defineProperty(b,"taggedConstraint",{enumerable:!0,get:function(){return P.taggedConstraint}}),Object.defineProperty(b,"namedConstraint",{enumerable:!0,get:function(){return P.namedConstraint}}),Object.defineProperty(b,"typeConstraint",{enumerable:!0,get:function(){return P.typeConstraint}});var L=o(90);Object.defineProperty(b,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return L.getServiceIdentifierAsString}});var z=o(510);Object.defineProperty(b,"multiBindToService",{enumerable:!0,get:function(){return z.multiBindToService}})},function(R,b){R.exports=function(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b){function o(f,c){for(var M=0;M<c.length;M++){var _=c[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}R.exports=function(f,c,M){return c&&o(f.prototype,c),M&&o(f,M),f},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),function(f){f.TextureCompressionBC="texture-compression-bc"}(b.ExtensionName||(b.ExtensionName={})),function(f){f.ClampToEdge="clamp-to-edge",f.Repeat="repeat",f.MirrorRepeat="mirror-repeat"}(b.AddressMode||(b.AddressMode={})),function(f){f.UniformBuffer="uniform-buffer",f.StorageBuffer="storage-buffer",f.ReadonlyStorageBuffer="readonly-storage-buffer",f.Sampler="sampler",f.ComparisonSampler="comparison-sampler",f.SampledTexture="sampled-texture",f.ReadonlyStorageTexture="readonly-storage-texture",f.WriteonlyStorageTexture="writeonly-storage-texture"}(b.BindingType||(b.BindingType={})),function(f){f.Zero="zero",f.One="one",f.SrcColor="src-color",f.OneMinusSrcColor="one-minus-src-color",f.SrcAlpha="src-alpha",f.OneMinusSrcAlpha="one-minus-src-alpha",f.DstColor="dst-color",f.OneMinusDstColor="one-minus-dst-color",f.DstAlpha="dst-alpha",f.OneMinusDstAlpha="one-minus-dst-alpha",f.SrcAlphaSaturated="src-alpha-saturated",f.BlendColor="blend-color",f.OneMinusBlendColor="one-minus-blend-color"}(b.BlendFactor||(b.BlendFactor={})),function(f){f.Add="add",f.Subtract="subtract",f.ReverseSubtract="reverse-subtract",f.Min="min",f.Max="max"}(b.BlendOperation||(b.BlendOperation={})),function(f){f.Never="never",f.Less="less",f.Equal="equal",f.LessEqual="less-equal",f.Greater="greater",f.NotEqual="not-equal",f.GreaterEqual="greater-equal",f.Always="always"}(b.CompareFunction||(b.CompareFunction={})),function(f){f.None="none",f.Front="front",f.Back="back"}(b.CullMode||(b.CullMode={})),function(f){f.Nearest="nearest",f.Linear="linear"}(b.FilterMode||(b.FilterMode={})),function(f){f.CCW="ccw",f.CW="cw"}(b.FrontFace||(b.FrontFace={})),function(f){f.Uint16="uint16",f.Uint32="uint32"}(b.IndexFormat||(b.IndexFormat={})),function(f){f.Vertex="vertex",f.Instance="instance"}(b.InputStepMode||(b.InputStepMode={})),function(f){f.Load="load"}(b.LoadOp||(b.LoadOp={})),function(f){f.PointList="point-list",f.LineList="line-list",f.LineStrip="line-strip",f.TriangleList="triangle-list",f.TriangleStrip="triangle-strip"}(b.PrimitiveTopology||(b.PrimitiveTopology={})),function(f){f.Keep="keep",f.Zero="zero",f.Replace="replace",f.Invert="invert",f.IncrementClamp="increment-clamp",f.DecrementClamp="decrement-clamp",f.IncrementWrap="increment-wrap",f.DecrementWrap="decrement-wrap"}(b.StencilOperation||(b.StencilOperation={})),function(f){f.Store="store",f.Clear="clear"}(b.StoreOp||(b.StoreOp={})),function(f){f.E1d="1d",f.E2d="2d",f.E3d="3d"}(b.TextureDimension||(b.TextureDimension={})),function(f){f.R8Unorm="r8unorm",f.R8Snorm="r8snorm",f.R8Uint="r8uint",f.R8Sint="r8sint",f.R16Uint="r16uint",f.R16Sint="r16sint",f.R16Float="r16float",f.RG8Unorm="rg8unorm",f.RG8Snorm="rg8snorm",f.RG8Uint="rg8uint",f.RG8Sint="rg8sint",f.R32Uint="r32uint",f.R32Sint="r32sint",f.R32Float="r32float",f.RG16Uint="rg16uint",f.RG16Sint="rg16sint",f.RG16Float="rg16float",f.RGBA8Unorm="rgba8unorm",f.RGBA8UnormSRGB="rgba8unorm-srgb",f.RGBA8Snorm="rgba8snorm",f.RGBA8Uint="rgba8uint",f.RGBA8Sint="rgba8sint",f.BGRA8Unorm="bgra8unorm",f.BGRA8UnormSRGB="bgra8unorm-srgb",f.RGB10A2Unorm="rgb10a2unorm",f.RG11B10Float="rg11b10float",f.RG32Uint="rg32uint",f.RG32Sint="rg32sint",f.RG32Float="rg32float",f.RGBA16Uint="rgba16uint",f.RGBA16Sint="rgba16sint",f.RGBA16Float="rgba16float",f.RGBA32Uint="rgba32uint",f.RGBA32Sint="rgba32sint",f.RGBA32Float="rgba32float",f.Depth32Float="depth32float",f.Depth24Plus="depth24plus",f.Depth24PlusStencil8="depth24plus-stencil8"}(b.TextureFormat||(b.TextureFormat={})),function(f){f.Float="float",f.Sint="sint",f.Uint="uint"}(b.TextureComponentType||(b.TextureComponentType={})),function(f){f.E1d="1d",f.E2d="2d",f.E2dArray="2d-array",f.Cube="cube",f.CubeArray="cube-array",f.E3d="3d"}(b.TextureViewDimension||(b.TextureViewDimension={})),function(f){f.Uchar2="uchar2",f.Uchar4="uchar4",f.Char2="char2",f.Char4="char4",f.Uchar2Norm="uchar2norm",f.Uchar4Norm="uchar4norm",f.Char2Norm="char2norm",f.Char4Norm="char4norm",f.Ushort2="ushort2",f.Ushort4="ushort4",f.Short2="short2",f.Short4="short4",f.Ushort2Norm="ushort2norm",f.Ushort4Norm="ushort4norm",f.Short2Norm="short2norm",f.Short4Norm="short4norm",f.Half2="half2",f.Half4="half4",f.Float="float",f.Float2="float2",f.Float3="float3",f.Float4="float4",f.Uint="uint",f.Uint2="uint2",f.Uint3="uint3",f.Uint4="uint4",f.Int="int",f.Int2="int2",f.Int3="int3",f.Int4="int4"}(b.VertexFormat||(b.VertexFormat={})),function(f){f.All="all",f.StencilOnly="stencil-only",f.DepthOnly="depth-only"}(b.TextureAspect||(b.TextureAspect={})),function(f){f.Error="error",f.Warning="warning",f.Info="info"}(b.CompilationMessageType||(b.CompilationMessageType={})),function(f){f.Occlusion="occlusion"}(b.QueryType||(b.QueryType={})),function(f){f[f.MapRead=1]="MapRead",f[f.MapWrite=2]="MapWrite",f[f.CopySrc=4]="CopySrc",f[f.CopyDst=8]="CopyDst",f[f.Index=16]="Index",f[f.Vertex=32]="Vertex",f[f.Uniform=64]="Uniform",f[f.Storage=128]="Storage",f[f.Indirect=256]="Indirect",f[f.QueryResolve=512]="QueryResolve"}(b.BufferUsage||(b.BufferUsage={})),function(f){f[f.Red=1]="Red",f[f.Green=2]="Green",f[f.Blue=4]="Blue",f[f.Alpha=8]="Alpha",f[f.All=15]="All"}(b.ColorWrite||(b.ColorWrite={})),function(f){f[f.Vertex=1]="Vertex",f[f.Fragment=2]="Fragment",f[f.Compute=4]="Compute"}(b.ShaderStage||(b.ShaderStage={})),function(f){f[f.CopySrc=1]="CopySrc",f[f.CopyDst=2]="CopyDst",f[f.Sampled=4]="Sampled",f[f.Storage=8]="Storage",f[f.OutputAttachment=16]="OutputAttachment"}(b.TextureUsage||(b.TextureUsage={})),function(f){f[f.Read=1]="Read",f[f.Write=2]="Write"}(b.MapMode||(b.MapMode={}))},function(R,b,o){R.exports=o(481)},function(R,b){R.exports=function(o,f,c,M){c&&Object.defineProperty(o,f,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(M):void 0})},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b){R.exports=function(o,f,c,M,_){var x={};return Object.keys(M).forEach(function(O){x[O]=M[O]}),x.enumerable=!!x.enumerable,x.configurable=!!x.configurable,("value"in x||x.initializer)&&(x.writable=!0),x=c.slice().reverse().reduce(function(O,S){return S(o,f,O)||O},x),_&&x.initializer!==void 0&&(x.value=x.initializer?x.initializer.call(_):void 0,x.initializer=void 0),x.initializer===void 0&&(Object.defineProperty(o,f,x),x=null),x},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";o.d(b,"b",function(){return f}),o.d(b,"a",function(){return c}),o.d(b,"c",function(){return M});var f=1e-6,c=typeof Float32Array!="undefined"?Float32Array:Array,M=Math.random;Math.hypot||(Math.hypot=function(){for(var _=0,x=arguments.length;x--;)_+=arguments[x]*arguments[x];return Math.sqrt(_)})},function(R,b,o){"use strict";o.d(b,"a",function(){return f});var f={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")}},function(R,b){function o(f,c,M,_,x,O,S){try{var g=f[O](S),h=g.value}catch(y){return void M(y)}g.done?c(h):Promise.resolve(h).then(_,x)}R.exports=function(f){return function(){var c=this,M=arguments;return new Promise(function(_,x){var O=f.apply(c,M);function S(h){o(O,_,x,S,g,"next",h)}function g(h){o(O,_,x,S,g,"throw",h)}S(void 0)})}},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";o.d(b,"d",function(){return c}),o.d(b,"b",function(){return M}),o.d(b,"e",function(){return _}),o.d(b,"f",function(){return x}),o.d(b,"l",function(){return O}),o.d(b,"j",function(){return S});var f=o(0);function c(){return window?window.devicePixelRatio:1}function M(g,h,y,E){var m=g-y,p=h-E;return Math.sqrt(m*m+p*p)}function _(g,h,y,E,m,p){return m>=g&&m<=g+y&&p>=h&&p<=h+E}function x(g,h){return!(h.minX>g.maxX||h.maxX<g.minX||h.minY>g.maxY||h.maxY<g.minY)}function O(g,h){return g&&h?{minX:Math.min(g.minX,h.minX),minY:Math.min(g.minY,h.minY),maxX:Math.max(g.maxX,h.maxX),maxY:Math.max(g.maxY,h.maxY)}:g||h}function S(g,h){return g[0]===h[0]&&g[1]===h[1]}o.d(b,"i",function(){return f.isNil}),o.d(b,"k",function(){return f.isString}),o.d(b,"h",function(){return f.isFunction}),o.d(b,"g",function(){return f.isArray}),o.d(b,"c",function(){return f.each}),o.d(b,"o",function(){return f.toRadian}),o.d(b,"m",function(){return f.mod}),o.d(b,"n",function(){return f.requestAnimationFrame}),o.d(b,"a",function(){return f.clearAnimationFrame})},function(R,b,o){"use strict";o.d(b,"a",function(){return f}),o.d(b,"b",function(){return c});var f={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},c={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},function(R,b,o){"use strict";o.d(b,"b",function(){return c.a}),o.d(b,"c",function(){return c.d}),o.d(b,"d",function(){return c.e}),o.d(b,"a",function(){return f});var f={};o.r(f),o.d(f,"leftTranslate",function(){return M}),o.d(f,"leftRotate",function(){return _}),o.d(f,"leftScale",function(){return x}),o.d(f,"transform",function(){return O}),o.d(f,"direction",function(){return S}),o.d(f,"angleTo",function(){return g}),o.d(f,"vertical",function(){return h});var c=o(2);function M(y,E,m){var p=[0,0,0,0,0,0,0,0,0];return c.a.fromTranslation(p,m),c.a.multiply(y,p,E)}function _(y,E,m){var p=[0,0,0,0,0,0,0,0,0];return c.a.fromRotation(p,m),c.a.multiply(y,p,E)}function x(y,E,m){var p=[0,0,0,0,0,0,0,0,0];return c.a.fromScaling(p,m),c.a.multiply(y,p,E)}function O(y,E){for(var m,p,A,C=y?[].concat(y):[1,0,0,0,1,0,0,0,1],N=0,P=E.length;N<P;N++){var L=E[N];switch(L[0]){case"t":M(C,C,[L[1],L[2]]);break;case"s":x(C,C,[L[1],L[2]]);break;case"r":_(C,C,L[1]);break;case"m":m=C,p=C,A=L[1],c.a.multiply(m,A,p)}}return C}function S(y,E){return y[0]*E[1]-E[0]*y[1]}function g(y,E,m){var p=c.d.angle(y,E),A=S(y,E)>=0;return m?A?2*Math.PI-p:p:A?p:2*Math.PI-p}function h(y,E,m){return m?(y[0]=E[1],y[1]=-1*E[0]):(y[0]=-1*E[1],y[1]=E[0]),y}},function(R,b){function o(f){return R.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},R.exports.default=R.exports,R.exports.__esModule=!0,o(f)}R.exports=o,R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";o.d(b,"j",function(){return c}),o.d(b,"c",function(){return M}),o.d(b,"g",function(){return _}),o.d(b,"b",function(){return x});var f=o(0);function c(O,S){var g=O.indexOf(S);g!==-1&&O.splice(g,1)}o.d(b,"e",function(){return f.isNil}),o.d(b,"d",function(){return f.isFunction}),o.d(b,"h",function(){return f.isString}),o.d(b,"f",function(){return f.isObject}),o.d(b,"i",function(){return f.mix}),o.d(b,"a",function(){return f.each}),o.d(b,"k",function(){return f.upperFirst});var M=typeof window!="undefined"&&window.document!==void 0;function _(O,S){if(O.isCanvas())return!0;for(var g=S.getParent(),h=!1;g;){if(g===O){h=!0;break}g=g.getParent()}return h}function x(O){return O.cfg.visible&&O.cfg.capture}},function(R,b,o){"use strict";o.d(b,"e",function(){return N}),o.d(b,"b",function(){return ae}),o.d(b,"a",function(){return he}),o.d(b,"c",function(){return y}),o.d(b,"d",function(){return se}),o.d(b,"f",function(){return f});var f={};function c(ee){return Math.min.apply(null,ee)}function M(ee){return Math.max.apply(null,ee)}function _(ee,te,U,X){var B=ee-U,J=te-X;return Math.sqrt(B*B+J*J)}function x(ee,te){return Math.abs(ee-te)<.001}function O(ee,te){var U=c(ee),X=c(te);return{x:U,y:X,width:M(ee)-U,height:M(te)-X}}function S(ee,te,U,X){return{minX:c([ee,U]),maxX:M([ee,U]),minY:c([te,X]),maxY:M([te,X])}}function g(ee){return(ee+2*Math.PI)%(2*Math.PI)}o.r(f),o.d(f,"distance",function(){return _}),o.d(f,"isNumberEqual",function(){return x}),o.d(f,"getBBoxByArray",function(){return O}),o.d(f,"getBBoxRange",function(){return S}),o.d(f,"piMod",function(){return g});var h=o(79),y={box:function(ee,te,U,X){return O([ee,U],[te,X])},length:function(ee,te,U,X){return _(ee,te,U,X)},pointAt:function(ee,te,U,X,B){return{x:(1-B)*ee+B*U,y:(1-B)*te+B*X}},pointDistance:function(ee,te,U,X,B,J){var ne=(U-ee)*(B-ee)+(X-te)*(J-te);return ne<0?_(ee,te,B,J):ne>(U-ee)*(U-ee)+(X-te)*(X-te)?_(U,X,B,J):this.pointToLine(ee,te,U,X,B,J)},pointToLine:function(ee,te,U,X,B,J){var ne=[U-ee,X-te];if(h.exactEquals(ne,[0,0]))return Math.sqrt((B-ee)*(B-ee)+(J-te)*(J-te));var ie=[-ne[1],ne[0]];h.normalize(ie,ie);var Z=[B-ee,J-te];return Math.abs(h.dot(Z,ie))},tangentAngle:function(ee,te,U,X){return Math.atan2(X-te,U-ee)}};function E(ee,te,U,X,B,J){var ne,ie=1/0,Z=[U,X],fe=20;J&&J>200&&(fe=J/10);for(var _e=1/fe,je=_e/10,Me=0;Me<=fe;Me++){var Ae=Me*_e,Le=[B.apply(null,ee.concat([Ae])),B.apply(null,te.concat([Ae]))];(Je=_(Z[0],Z[1],Le[0],Le[1]))<ie&&(ne=Ae,ie=Je)}if(ne===0)return{x:ee[0],y:te[0]};if(ne===1){var Se=ee.length;return{x:ee[Se-1],y:te[Se-1]}}for(ie=1/0,Me=0;Me<32&&!(je<1e-4);Me++){var Re=ne-je,Ke=ne+je,Je=(Le=[B.apply(null,ee.concat([Re])),B.apply(null,te.concat([Re]))],_(Z[0],Z[1],Le[0],Le[1]));if(Re>=0&&Je<ie)ne=Re,ie=Je;else{var nt=[B.apply(null,ee.concat([Ke])),B.apply(null,te.concat([Ke]))],dt=_(Z[0],Z[1],nt[0],nt[1]);Ke<=1&&dt<ie?(ne=Ke,ie=dt):je*=.5}}return{x:B.apply(null,ee.concat([ne])),y:B.apply(null,te.concat([ne]))}}function m(ee,te,U,X){var B=1-X;return B*B*ee+2*X*B*te+X*X*U}function p(ee,te,U){var X=ee+U-2*te;if(x(X,0))return[.5];var B=(ee-te)/X;return B<=1&&B>=0?[B]:[]}function A(ee,te,U,X){return 2*(1-X)*(te-ee)+2*X*(U-te)}function C(ee,te,U,X,B,J,ne){var ie=m(ee,U,B,ne),Z=m(te,X,J,ne),fe=y.pointAt(ee,te,U,X,ne),_e=y.pointAt(U,X,B,J,ne);return[[ee,te,fe.x,fe.y,ie,Z],[ie,Z,_e.x,_e.y,B,J]]}var N={box:function(ee,te,U,X,B,J){var ne=p(ee,U,B)[0],ie=p(te,X,J)[0],Z=[ee,B],fe=[te,J];return ne!==void 0&&Z.push(m(ee,U,B,ne)),ie!==void 0&&fe.push(m(te,X,J,ie)),O(Z,fe)},length:function(ee,te,U,X,B,J){return function ne(ie,Z,fe,_e,je,Me,Ae){if(Ae===0)return(_(ie,Z,fe,_e)+_(fe,_e,je,Me)+_(ie,Z,je,Me))/2;var Le=C(ie,Z,fe,_e,je,Me,.5),Se=Le[0],Re=Le[1];return Se.push(Ae-1),Re.push(Ae-1),ne.apply(null,Se)+ne.apply(null,Re)}(ee,te,U,X,B,J,3)},nearestPoint:function(ee,te,U,X,B,J,ne,ie){return E([ee,U,B],[te,X,J],ne,ie,m)},pointDistance:function(ee,te,U,X,B,J,ne,ie){var Z=this.nearestPoint(ee,te,U,X,B,J,ne,ie);return _(Z.x,Z.y,ne,ie)},interpolationAt:m,pointAt:function(ee,te,U,X,B,J,ne){return{x:m(ee,U,B,ne),y:m(te,X,J,ne)}},divide:function(ee,te,U,X,B,J,ne){return C(ee,te,U,X,B,J,ne)},tangentAngle:function(ee,te,U,X,B,J,ne){var ie=A(ee,U,B,ne),Z=A(te,X,J,ne);return g(Math.atan2(Z,ie))}};function P(ee,te,U,X,B){var J=1-B;return J*J*J*ee+3*te*B*J*J+3*U*B*B*J+X*B*B*B}function L(ee,te,U,X,B){var J=1-B;return 3*(J*J*(te-ee)+2*J*B*(U-te)+B*B*(X-U))}function z(ee,te,U,X){var B,J,ne,ie=-3*ee+9*te-9*U+3*X,Z=6*ee-12*te+6*U,fe=3*te-3*ee,_e=[];if(x(ie,0))x(Z,0)||(B=-fe/Z)>=0&&B<=1&&_e.push(B);else{var je=Z*Z-4*ie*fe;x(je,0)?_e.push(-Z/(2*ie)):je>0&&(J=(-Z-(ne=Math.sqrt(je)))/(2*ie),(B=(-Z+ne)/(2*ie))>=0&&B<=1&&_e.push(B),J>=0&&J<=1&&_e.push(J))}return _e}function H(ee,te,U,X,B,J,ne,ie,Z){var fe=P(ee,U,B,ne,Z),_e=P(te,X,J,ie,Z),je=y.pointAt(ee,te,U,X,Z),Me=y.pointAt(U,X,B,J,Z),Ae=y.pointAt(B,J,ne,ie,Z),Le=y.pointAt(je.x,je.y,Me.x,Me.y,Z),Se=y.pointAt(Me.x,Me.y,Ae.x,Ae.y,Z);return[[ee,te,je.x,je.y,Le.x,Le.y,fe,_e],[fe,_e,Se.x,Se.y,Ae.x,Ae.y,ne,ie]]}function re(ee,te,U,X,B,J,ne,ie,Z){if(Z===0)return function(Me,Ae){for(var Le=0,Se=Me.length,Re=0;Re<Se;Re++)Le+=_(Me[Re],Ae[Re],Me[(Re+1)%Se],Ae[(Re+1)%Se]);return Le/2}([ee,U,B,ne],[te,X,J,ie]);var fe=H(ee,te,U,X,B,J,ne,ie,.5),_e=fe[0],je=fe[1];return _e.push(Z-1),je.push(Z-1),re.apply(null,_e)+re.apply(null,je)}var ae={extrema:z,box:function(ee,te,U,X,B,J,ne,ie){for(var Z=[ee,ne],fe=[te,ie],_e=z(ee,U,B,ne),je=z(te,X,J,ie),Me=0;Me<_e.length;Me++)Z.push(P(ee,U,B,ne,_e[Me]));for(Me=0;Me<je.length;Me++)fe.push(P(te,X,J,ie,je[Me]));return O(Z,fe)},length:function(ee,te,U,X,B,J,ne,ie){return re(ee,te,U,X,B,J,ne,ie,3)},nearestPoint:function(ee,te,U,X,B,J,ne,ie,Z,fe,_e){return E([ee,U,B,ne],[te,X,J,ie],Z,fe,P,_e)},pointDistance:function(ee,te,U,X,B,J,ne,ie,Z,fe,_e){var je=this.nearestPoint(ee,te,U,X,B,J,ne,ie,Z,fe,_e);return _(je.x,je.y,Z,fe)},interpolationAt:P,pointAt:function(ee,te,U,X,B,J,ne,ie,Z){return{x:P(ee,U,B,ne,Z),y:P(te,X,J,ie,Z)}},divide:function(ee,te,U,X,B,J,ne,ie,Z){return H(ee,te,U,X,B,J,ne,ie,Z)},tangentAngle:function(ee,te,U,X,B,J,ne,ie,Z){var fe=L(ee,U,B,ne,Z),_e=L(te,X,J,ie,Z);return g(Math.atan2(_e,fe))}};function ue(ee,te){var U=Math.abs(ee);return te>0?U:-1*U}var xe=function(ee,te,U,X,B,J){var ne=U,ie=X;if(ne===0||ie===0)return{x:ee,y:te};for(var Z,fe,_e=B-ee,je=J-te,Me=Math.abs(_e),Ae=Math.abs(je),Le=ne*ne,Se=ie*ie,Re=Math.PI/4,Ke=0;Ke<4;Ke++){Z=ne*Math.cos(Re),fe=ie*Math.sin(Re);var Je=(Le-Se)*Math.pow(Math.cos(Re),3)/ne,nt=(Se-Le)*Math.pow(Math.sin(Re),3)/ie,dt=Z-Je,kt=fe-nt,At=Me-Je,It=Ae-nt,Kt=Math.hypot(kt,dt),Qt=Math.hypot(It,At);Re+=Kt*Math.asin((dt*It-kt*At)/(Kt*Qt))/Math.sqrt(Le+Se-Z*Z-fe*fe),Re=Math.min(Math.PI/2,Math.max(0,Re))}return{x:ee+ue(Z,_e),y:te+ue(fe,je)}};function ye(ee,te,U,X,B,J){return U*Math.cos(B)*Math.cos(J)-X*Math.sin(B)*Math.sin(J)+ee}function Y(ee,te,U,X,B,J){return U*Math.sin(B)*Math.cos(J)+X*Math.cos(B)*Math.sin(J)+te}function Ce(ee,te,U){return{x:ee*Math.cos(U),y:te*Math.sin(U)}}function ge(ee,te,U){var X=Math.cos(U),B=Math.sin(U);return[ee*X-te*B,ee*B+te*X]}var he={box:function(ee,te,U,X,B,J,ne){for(var ie=function(dt,kt,At){return Math.atan(-kt/dt*Math.tan(At))}(U,X,B),Z=1/0,fe=-1/0,_e=[J,ne],je=2*-Math.PI;je<=2*Math.PI;je+=Math.PI){var Me=ie+je;J<ne?J<Me&&Me<ne&&_e.push(Me):ne<Me&&Me<J&&_e.push(Me)}for(je=0;je<_e.length;je++){var Ae=ye(ee,0,U,X,B,_e[je]);Ae<Z&&(Z=Ae),Ae>fe&&(fe=Ae)}var Le=function(dt,kt,At){return Math.atan(kt/(dt*Math.tan(At)))}(U,X,B),Se=1/0,Re=-1/0,Ke=[J,ne];for(je=2*-Math.PI;je<=2*Math.PI;je+=Math.PI){var Je=Le+je;J<ne?J<Je&&Je<ne&&Ke.push(Je):ne<Je&&Je<J&&Ke.push(Je)}for(je=0;je<Ke.length;je++){var nt=Y(0,te,U,X,B,Ke[je]);nt<Se&&(Se=nt),nt>Re&&(Re=nt)}return{x:Z,y:Se,width:fe-Z,height:Re-Se}},length:function(ee,te,U,X,B,J,ne){},nearestPoint:function(ee,te,U,X,B,J,ne,ie,Z){var fe=ge(ie-ee,Z-te,-B),_e=fe[0],je=fe[1],Me=xe(0,0,U,X,_e,je),Ae=function(Se,Re,Ke,Je){return(Math.atan2(Je*Se,Ke*Re)+2*Math.PI)%(2*Math.PI)}(U,X,Me.x,Me.y);Ae<J?Me=Ce(U,X,J):Ae>ne&&(Me=Ce(U,X,ne));var Le=ge(Me.x,Me.y,B);return{x:Le[0]+ee,y:Le[1]+te}},pointDistance:function(ee,te,U,X,B,J,ne,ie,Z){var fe=this.nearestPoint(ee,te,U,X,ie,Z);return _(fe.x,fe.y,ie,Z)},pointAt:function(ee,te,U,X,B,J,ne,ie){var Z=(ne-J)*ie+J;return{x:ye(ee,0,U,X,B,Z),y:Y(0,te,U,X,B,Z)}},tangentAngle:function(ee,te,U,X,B,J,ne,ie){var Z=(ne-J)*ie+J,fe=function(je,Me,Ae,Le,Se,Re,Ke,Je){return-1*Ae*Math.cos(Se)*Math.sin(Je)-Le*Math.sin(Se)*Math.cos(Je)}(0,0,U,X,B,0,0,Z),_e=function(je,Me,Ae,Le,Se,Re,Ke,Je){return-1*Ae*Math.sin(Se)*Math.sin(Je)+Le*Math.cos(Se)*Math.cos(Je)}(0,0,U,X,B,0,0,Z);return g(Math.atan2(_e,fe))}};function Q(ee){for(var te=0,U=[],X=0;X<ee.length-1;X++){var B=ee[X],J=ee[X+1],ne=_(B[0],B[1],J[0],J[1]),ie={from:B,to:J,length:ne};U.push(ie),te+=ne}return{segments:U,totalLength:te}}function W(ee){if(ee.length<2)return 0;for(var te=0,U=0;U<ee.length-1;U++){var X=ee[U],B=ee[U+1];te+=_(X[0],X[1],B[0],B[1])}return te}function le(ee,te){if(te>1||te<0||ee.length<2)return null;var U=Q(ee),X=U.segments,B=U.totalLength;if(B===0)return{x:ee[0][0],y:ee[0][1]};for(var J=0,ne=null,ie=0;ie<X.length;ie++){var Z=X[ie],fe=Z.from,_e=Z.to,je=Z.length/B;if(te>=J&&te<=J+je){var Me=(te-J)/je;ne=y.pointAt(fe[0],fe[1],_e[0],_e[1],Me);break}J+=je}return ne}function Oe(ee,te){if(te>1||te<0||ee.length<2)return 0;for(var U=Q(ee),X=U.segments,B=U.totalLength,J=0,ne=0,ie=0;ie<X.length;ie++){var Z=X[ie],fe=Z.from,_e=Z.to,je=Z.length/B;if(te>=J&&te<=J+je){ne=Math.atan2(_e[1]-fe[1],_e[0]-fe[0]);break}J+=je}return ne}function Te(ee,te,U){for(var X=1/0,B=0;B<ee.length-1;B++){var J=ee[B],ne=ee[B+1],ie=y.pointDistance(J[0],J[1],ne[0],ne[1],te,U);ie<X&&(X=ie)}return X}var se={box:function(ee){for(var te=[],U=[],X=0;X<ee.length;X++){var B=ee[X];te.push(B[0]),U.push(B[1])}return O(te,U)},length:function(ee){return W(ee)},pointAt:function(ee,te){return le(ee,te)},pointDistance:function(ee,te,U){return Te(ee,te,U)},tangentAngle:function(ee,te){return Oe(ee,te)}}},function(R,b,o){"use strict";var f=o(51);o.d(b,"PathUtil",function(){return f}),o(164),o(165);var c=o(115);o.d(b,"Event",function(){return c.a}),o(116);var M=o(264);o.d(b,"AbstractCanvas",function(){return M.a});var _=o(167);o.d(b,"AbstractGroup",function(){return _.a});var x=o(168);o.d(b,"AbstractShape",function(){return x.a});var O=o(265);o.d(b,"getBBoxMethod",function(){return O.a});var S=o(67);o.d(b,"getTextHeight",function(){return S.b}),o.d(b,"assembleFont",function(){return S.a});var g=o(19);o.d(b,"isAllowCapture",function(){return g.b});var h=o(38);o.d(b,"multiplyVec2",function(){return h.c}),o.d(b,"invert",function(){return h.a});var y=o(117);o.d(b,"getOffScreenContext",function(){return y.a})},function(R,b){R.exports=function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){var f=o(511);R.exports=function(c,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(M&&M.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),M&&f(c,M)},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){var f=o(41).default,c=o(22);R.exports=function(M,_){return!_||f(_)!=="object"&&typeof _!="function"?c(M):_},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";o.d(b,"a",function(){return y}),o.d(b,"b",function(){return E});var f=o(9),c=o.n(f),M=o(14),_=o.n(M),x=o(7),O=o.n(x),S=o(6),g=o.n(S),h=o(118),y=function m(p){g()(this,m)},E=function(){function m(A){g()(this,m),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=A}var p;return O()(m,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(A){return this.lookup[A]>-1}},{key:"create",value:function(A,C){this.lookup[A]=this.components.length;var N=new this.clazz(C||{});return this.components.push(N),this.entities.push(A),N}},{key:"remove",value:function(A){var C=this.lookup[A];C>-1&&C<this.components.length-1&&(this.components[C]=this.components[this.components.length-1],this.entities[C]=this.entities[this.entities.length-1],this.lookup[this.entities[C]]=C),this.components.pop(),this.entities.pop(),delete this.lookup[A]}},{key:"removeKeepSorted",value:function(A){var C=this.lookup[A];if(C>-1){var N=this.entities[C];if(C<this.components.length-1){for(var P=C+1;P<this.components.length;++P)this.components[P-1]=this.components[P];for(var L=C+1;L<this.entities.length;++L)this.entities[L-1]=this.entities[L],this.lookup[this.entities[L-1]]=L-1}this.components.pop(),this.entities.pop(),delete this.lookup[N]}}},{key:"moveItem",value:function(A,C){if(A!==C){for(var N=this.components[A],P=this.entities[A],L=A<C?1:-1,z=A;z!==C;z+=L){var H=z+L;this.components[z]=this.components[H],this.entities[z]=this.entities[H],this.lookup[this.entities[z]]=z}this.components[C]=N,this.entities[C]=P,this.lookup[P]=C}}},{key:"getEntity",value:function(A){return this.entities[A]}},{key:"getComponent",value:function(A){return this.components[A]}},{key:"getComponentByEntity",value:function(A){var C=this.lookup[A];return C>-1?this.components[C]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(A){for(var C=0,N=Object.keys(this.lookup);C<N.length;C++){var P=N[C],L=Number(P);if(this.lookup[L]===A)return L}return h.a}},{key:"find",value:function(A){for(var C=0;C<this.getCount();C++){var N=this.getComponent(C);if(A(N,C))return N}return null}},{key:"findIndex",value:function(A){for(var C=0;C<this.getCount();C++)if(A(this.getComponent(C),C))return C;return-1}},{key:"forEach",value:function(A){for(var C=0,N=Object.keys(this.lookup);C<N.length;C++){var P=N[C],L=Number(P),z=this.lookup[L];A(L,this.getComponent(z))}}},{key:"forEachAsync",value:(p=_()(c.a.mark(function A(C){var N,P,L,z,H;return c.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:N=0,P=Object.keys(this.lookup);case 1:if(!(N<P.length)){re.next=10;break}return L=P[N],z=Number(L),H=this.lookup[z],re.next=7,C(z,this.getComponent(H));case 7:N++,re.next=1;break;case 10:case"end":return re.stop()}},A,this)})),function(A){return p.apply(this,arguments)})},{key:"map",value:function(A){for(var C=[],N=0,P=Object.keys(this.lookup);N<P.length;N++){var L=P[N],z=Number(L),H=this.lookup[z];C.push(A(z,this.getComponent(H)))}return C}}]),m}()},function(R,b,o){"use strict";o.d(b,"b",function(){return M}),o.d(b,"a",function(){return _}),o.d(b,"d",function(){return x}),o.d(b,"c",function(){return O});var f=o(0),c=o(16);function M(S){return document.createElementNS("http://www.w3.org/2000/svg",S)}function _(S){var g=c.a[S.type],h=S.getParent();if(!g)throw new Error("the type "+S.type+" is not supported by svg");var y=M(g);if(S.get("id")&&(y.id=S.get("id")),S.set("el",y),S.set("attrs",{}),h){var E=h.get("el");E||(E=h.createDom(),h.set("el",E)),E.appendChild(y)}return y}function x(S,g){var h=S.get("el"),y=Object(f.toArray)(h.children).sort(g),E=document.createDocumentFragment();y.forEach(function(m){E.appendChild(m)}),h.appendChild(E)}function O(S,g){var h=S.parentNode,y=Array.from(h.childNodes).filter(function(A){return A.nodeType===1&&A.nodeName.toLowerCase()!=="defs"}),E=y[g],m=y.indexOf(S);if(E){if(m>g)h.insertBefore(S,E);else if(m<g){var p=y[g+1];p?h.insertBefore(S,p):h.appendChild(S)}}else h.appendChild(S)}},function(R,b,o){var f=o(513),c=o(514),M=o(229),_=o(515);R.exports=function(x){return f(x)||c(x)||M(x)||_()},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){var f;try{f={cloneDeep:o(419),constant:o(153),defaults:o(420),each:o(193),filter:o(196),find:o(421),flatten:o(223),forEach:o(194),forIn:o(428),has:o(207),isUndefined:o(208),last:o(429),map:o(209),mapValues:o(430),max:o(431),merge:o(433),min:o(439),minBy:o(440),now:o(441),pick:o(442),range:o(447),reduce:o(211),sortBy:o(450),uniqueId:o(455),values:o(216),zipObject:o(456)}}catch(c){}f||(f=window._),R.exports=f},function(R,b){R.exports=function(o,f){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";o.d(b,"a",function(){return S}),o.d(b,"d",function(){return g}),o.d(b,"b",function(){return h}),o.d(b,"c",function(){return y}),o.d(b,"e",function(){return p}),o.d(b,"h",function(){return A}),o.d(b,"f",function(){return C}),o.d(b,"g",function(){return N});var f=o(0),c=o(139),M=o(92),_=o(15),x=o(33),O={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function S(P,L){var z=L.attr();for(var H in z){var re=z[H],ae=O[H]?O[H]:H;ae==="matrix"&&re?P.transform(re[0],re[1],re[3],re[4],re[6],re[7]):ae==="lineDash"&&P.setLineDash?Object(f.isArray)(re)&&P.setLineDash(re):(ae==="strokeStyle"||ae==="fillStyle"?re=Object(c.b)(P,L,re):ae==="globalAlpha"&&(re*=P.globalAlpha),P[ae]=re)}}function g(P,L,z){for(var H=0;H<L.length;H++){var re=L[H];re.cfg.visible?re.draw(P,z):re.skipDraw()}}function h(P,L,z){var H=P.get("refreshElements");Object(f.each)(H,function(re){if(re!==P)for(var ae=re.cfg.parent;ae&&ae!==P&&!ae.cfg.refresh;)ae.cfg.refresh=!0,ae=ae.cfg.parent}),H[0]===P?E(L,z):function re(ae,ue){for(var xe=0;xe<ae.length;xe++){var ye=ae[xe];if(ye.cfg.visible)if(ye.cfg.hasChanged)ye.cfg.refresh=!0,ye.isGroup()&&E(ye.cfg.children,ue);else if(ye.cfg.refresh)ye.isGroup()&&re(ye.cfg.children,ue);else{var Y=m(ye,ue);ye.cfg.refresh=Y,Y&&ye.isGroup()&&re(ye.cfg.children,ue)}}}(L,z)}function y(P){for(var L=0;L<P.length;L++){var z=P[L];z.cfg.hasChanged=!1,z.isGroup()&&!z.destroyed&&y(z.cfg.children)}}function E(P,L){for(var z=0;z<P.length;z++){var H=P[z];H.cfg.refresh=!0,H.isGroup()&&E(H.get("children"),L)}}function m(P,L){var z=P.cfg.cacheCanvasBBox;return P.cfg.isInView&&z&&Object(_.f)(z,L)}function p(P,L,z,H){var re=z.path,ae=z.startArrow,ue=z.endArrow;if(re){var xe=[0,0],ye=[0,0],Y={dx:0,dy:0};L.beginPath();for(var Ce=0;Ce<re.length;Ce++){var ge=re[Ce],he=ge[0];if(Ce===0&&ae&&ae.d){var Q=P.getStartTangent();Y=x.c(Q[0][0],Q[0][1],Q[1][0],Q[1][1],ae.d)}else Ce===re.length-2&&re[Ce+1][0]==="Z"&&ue&&ue.d?re[Ce+1][0]==="Z"&&(Q=P.getEndTangent(),Y=x.c(Q[0][0],Q[0][1],Q[1][0],Q[1][1],ue.d)):Ce===re.length-1&&ue&&ue.d&&re[0]!=="Z"&&(Q=P.getEndTangent(),Y=x.c(Q[0][0],Q[0][1],Q[1][0],Q[1][1],ue.d));var W=Y.dx,le=Y.dy;switch(he){case"M":L.moveTo(ge[1]-W,ge[2]-le),ye=[ge[1],ge[2]];break;case"L":L.lineTo(ge[1]-W,ge[2]-le);break;case"Q":L.quadraticCurveTo(ge[1],ge[2],ge[3]-W,ge[4]-le);break;case"C":L.bezierCurveTo(ge[1],ge[2],ge[3],ge[4],ge[5]-W,ge[6]-le);break;case"A":var Oe=void 0;H?(Oe=H[Ce])||(Oe=Object(M.a)(xe,ge),H[Ce]=Oe):Oe=Object(M.a)(xe,ge);var Te=Oe.cx,se=Oe.cy,ee=Oe.rx,te=Oe.ry,U=Oe.startAngle,X=Oe.endAngle,B=Oe.xRotation,J=Oe.sweepFlag;if(L.ellipse)L.ellipse(Te,se,ee,te,B,U,X,1-J);else{var ne=ee>te?ee:te,ie=ee>te?1:ee/te,Z=ee>te?te/ee:1;L.translate(Te,se),L.rotate(B),L.scale(ie,Z),L.arc(0,0,ne,U,X,1-J),L.scale(1/ie,1/Z),L.rotate(-B),L.translate(-Te,-se)}break;case"Z":L.closePath()}if(he==="Z")xe=ye;else{var fe=ge.length;xe=[ge[fe-2],ge[fe-1]]}}}}function A(P,L){var z=P.get("canvas");z&&(L==="remove"&&(P._cacheCanvasBBox=P.get("cacheCanvasBBox")),P.get("hasChanged")||(P.set("hasChanged",!0),P.cfg.parent&&P.cfg.parent.get("hasChanged")||(z.refreshElement(P,L,z),z.get("autoDraw")&&z.draw())))}function C(P){if(!P.length)return null;var L=[],z=[],H=[],re=[];return Object(f.each)(P,function(ae){var ue=function(xe){var ye;if(xe.destroyed)ye=xe._cacheCanvasBBox;else{var Y=xe.get("cacheCanvasBBox"),Ce=Y&&!(!Y.width||!Y.height),ge=xe.getCanvasBBox(),he=ge&&!(!ge.width||!ge.height);Ce&&he?ye=Object(_.l)(Y,ge):Ce?ye=Y:he&&(ye=ge)}return ye}(ae);ue&&(L.push(ue.minX),z.push(ue.minY),H.push(ue.maxX),re.push(ue.maxY))}),{minX:Object(f.min)(L),minY:Object(f.min)(z),maxX:Object(f.max)(H),maxY:Object(f.max)(re)}}function N(P,L){return P&&L&&Object(_.f)(P,L)?{minX:Math.max(P.minX,L.minX),minY:Math.max(P.minY,L.minY),maxX:Math.min(P.maxX,L.maxX),maxY:Math.min(P.maxY,L.maxY)}:null}},function(R,b){var o=Array.isArray;R.exports=o},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NON_CUSTOM_TAG_KEYS=b.POST_CONSTRUCT=b.DESIGN_PARAM_TYPES=b.PARAM_TYPES=b.TAGGED_PROP=b.TAGGED=b.MULTI_INJECT_TAG=b.INJECT_TAG=b.OPTIONAL_TAG=b.UNMANAGED_TAG=b.NAME_TAG=b.NAMED_TAG=void 0,b.NAMED_TAG="named",b.NAME_TAG="name",b.UNMANAGED_TAG="unmanaged",b.OPTIONAL_TAG="optional",b.INJECT_TAG="inject",b.MULTI_INJECT_TAG="multi_inject",b.TAGGED="inversify:tagged",b.TAGGED_PROP="inversify:tagged_props",b.PARAM_TYPES="inversify:paramtypes",b.DESIGN_PARAM_TYPES="design:paramtypes",b.POST_CONSTRUCT="post_construct",b.NON_CUSTOM_TAG_KEYS=[b.INJECT_TAG,b.MULTI_INJECT_TAG,b.NAME_TAG,b.UNMANAGED_TAG,b.NAMED_TAG,b.OPTIONAL_TAG]},function(R,b,o){"use strict";o.d(b,"c",function(){return y}),o.d(b,"b",function(){return E}),o.d(b,"a",function(){return m});var f=o(1),c=o(55);function M(p){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(p)}var _=Math.sin,x=Math.cos,O=Math.atan2,S=Math.PI;function g(p,A,C,N,P,L,z){var H=A.stroke,re=A.lineWidth,ae=O(N-L,C-P),ue=new c.Path({type:"path",canvas:p.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*x(S/6)+","+10*_(S/6)+" L0,0 L"+10*x(S/6)+",-"+10*_(S/6),stroke:H,lineWidth:re}});ue.translate(P,L),ue.rotateAtPoint(P,L,ae),p.set(z?"startArrowShape":"endArrowShape",ue)}function h(p,A,C,N,P,L,z){var H=A.startArrow,re=A.endArrow,ae=A.stroke,ue=A.lineWidth,xe=z?H:re,ye=xe.d,Y=xe.fill,Ce=xe.stroke,ge=xe.lineWidth,he=Object(f.__rest)(xe,["d","fill","stroke","lineWidth"]),Q=O(N-L,C-P);ye&&(P-=x(Q)*ye,L-=_(Q)*ye);var W=new c.Path({type:"path",canvas:p.get("canvas"),isArrowShape:!0,attrs:Object(f.__assign)(Object(f.__assign)({},he),{stroke:Ce||ae,lineWidth:ge||ue,fill:Y})});W.translate(P,L),W.rotateAtPoint(P,L,Q),p.set(z?"startArrowShape":"endArrowShape",W)}function y(p,A,C,N,P){var L=O(N-A,C-p);return{dx:x(L)*P,dy:_(L)*P}}function E(p,A,C,N,P,L){M(A.startArrow)==="object"?h(p,A,C,N,P,L,!0):A.startArrow?g(p,A,C,N,P,L,!0):p.set("startArrowShape",null)}function m(p,A,C,N,P,L){M(A.endArrow)==="object"?h(p,A,C,N,P,L,!1):A.endArrow?g(p,A,C,N,P,L,!1):p.set("startArrowShape",null)}},function(R,b,o){"use strict";o.d(b,"b",function(){return c}),o.d(b,"c",function(){return M}),o.d(b,"a",function(){return _});var f=o(26);function c(x,O){var S=x.cfg.el,g=x.attr(),h={dx:g.shadowOffsetX,dy:g.shadowOffsetY,blur:g.shadowBlur,color:g.shadowColor};if(h.dx||h.dy||h.blur||h.color){var y=O.find("filter",h);y||(y=O.addShadow(h)),S.setAttribute("filter","url(#"+y+")")}else S.removeAttribute("filter")}function M(x){var O=x.attr().matrix;if(O){for(var S=x.cfg.el,g=[],h=0;h<9;h+=3)g.push(O[h]+","+O[h+1]);(g=g.join(",")).indexOf("NaN")===-1?S.setAttribute("transform","matrix("+g+")"):console.warn("invalid matrix:",O)}}function _(x,O){var S=x.getClip(),g=x.get("el");if(S){if(S&&!g.hasAttribute("clip-path")){Object(f.a)(S),S.createPath(O);var h=O.addClip(S);g.setAttribute("clip-path","url(#"+h+")")}}else g.removeAttribute("clip-path")}},function(R,b,o){"use strict";var f;o.d(b,"a",function(){return f}),function(c){c[c.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",c[c.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",c[c.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",c[c.POINTS=0]="POINTS",c[c.LINES=1]="LINES",c[c.LINE_LOOP=2]="LINE_LOOP",c[c.LINE_STRIP=3]="LINE_STRIP",c[c.TRIANGLES=4]="TRIANGLES",c[c.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",c[c.TRIANGLE_FAN=6]="TRIANGLE_FAN",c[c.ZERO=0]="ZERO",c[c.ONE=1]="ONE",c[c.SRC_COLOR=768]="SRC_COLOR",c[c.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",c[c.SRC_ALPHA=770]="SRC_ALPHA",c[c.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",c[c.DST_ALPHA=772]="DST_ALPHA",c[c.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",c[c.DST_COLOR=774]="DST_COLOR",c[c.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",c[c.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",c[c.FUNC_ADD=32774]="FUNC_ADD",c[c.BLEND_EQUATION=32777]="BLEND_EQUATION",c[c.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",c[c.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",c[c.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",c[c.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",c[c.MAX_EXT=32776]="MAX_EXT",c[c.MIN_EXT=32775]="MIN_EXT",c[c.BLEND_DST_RGB=32968]="BLEND_DST_RGB",c[c.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",c[c.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",c[c.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",c[c.CONSTANT_COLOR=32769]="CONSTANT_COLOR",c[c.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",c[c.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",c[c.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",c[c.BLEND_COLOR=32773]="BLEND_COLOR",c[c.ARRAY_BUFFER=34962]="ARRAY_BUFFER",c[c.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",c[c.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",c[c.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",c[c.STREAM_DRAW=35040]="STREAM_DRAW",c[c.STATIC_DRAW=35044]="STATIC_DRAW",c[c.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",c[c.BUFFER_SIZE=34660]="BUFFER_SIZE",c[c.BUFFER_USAGE=34661]="BUFFER_USAGE",c[c.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",c[c.FRONT=1028]="FRONT",c[c.BACK=1029]="BACK",c[c.FRONT_AND_BACK=1032]="FRONT_AND_BACK",c[c.CULL_FACE=2884]="CULL_FACE",c[c.BLEND=3042]="BLEND",c[c.DITHER=3024]="DITHER",c[c.STENCIL_TEST=2960]="STENCIL_TEST",c[c.DEPTH_TEST=2929]="DEPTH_TEST",c[c.SCISSOR_TEST=3089]="SCISSOR_TEST",c[c.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",c[c.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",c[c.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",c[c.NO_ERROR=0]="NO_ERROR",c[c.INVALID_ENUM=1280]="INVALID_ENUM",c[c.INVALID_VALUE=1281]="INVALID_VALUE",c[c.INVALID_OPERATION=1282]="INVALID_OPERATION",c[c.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",c[c.CW=2304]="CW",c[c.CCW=2305]="CCW",c[c.LINE_WIDTH=2849]="LINE_WIDTH",c[c.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",c[c.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",c[c.CULL_FACE_MODE=2885]="CULL_FACE_MODE",c[c.FRONT_FACE=2886]="FRONT_FACE",c[c.DEPTH_RANGE=2928]="DEPTH_RANGE",c[c.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",c[c.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",c[c.DEPTH_FUNC=2932]="DEPTH_FUNC",c[c.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",c[c.STENCIL_FUNC=2962]="STENCIL_FUNC",c[c.STENCIL_FAIL=2964]="STENCIL_FAIL",c[c.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",c[c.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",c[c.STENCIL_REF=2967]="STENCIL_REF",c[c.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",c[c.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",c[c.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",c[c.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",c[c.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",c[c.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",c[c.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",c[c.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",c[c.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",c[c.VIEWPORT=2978]="VIEWPORT",c[c.SCISSOR_BOX=3088]="SCISSOR_BOX",c[c.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",c[c.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",c[c.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",c[c.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",c[c.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",c[c.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",c[c.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",c[c.RED_BITS=3410]="RED_BITS",c[c.GREEN_BITS=3411]="GREEN_BITS",c[c.BLUE_BITS=3412]="BLUE_BITS",c[c.ALPHA_BITS=3413]="ALPHA_BITS",c[c.DEPTH_BITS=3414]="DEPTH_BITS",c[c.STENCIL_BITS=3415]="STENCIL_BITS",c[c.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",c[c.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",c[c.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",c[c.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",c[c.SAMPLES=32937]="SAMPLES",c[c.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",c[c.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",c[c.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",c[c.DONT_CARE=4352]="DONT_CARE",c[c.FASTEST=4353]="FASTEST",c[c.NICEST=4354]="NICEST",c[c.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",c[c.BYTE=5120]="BYTE",c[c.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",c[c.SHORT=5122]="SHORT",c[c.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",c[c.INT=5124]="INT",c[c.UNSIGNED_INT=5125]="UNSIGNED_INT",c[c.FLOAT=5126]="FLOAT",c[c.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",c[c.ALPHA=6406]="ALPHA",c[c.RGB=6407]="RGB",c[c.RGBA=6408]="RGBA",c[c.LUMINANCE=6409]="LUMINANCE",c[c.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",c[c.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",c[c.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",c[c.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",c[c.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",c[c.VERTEX_SHADER=35633]="VERTEX_SHADER",c[c.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",c[c.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",c[c.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",c[c.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",c[c.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",c[c.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",c[c.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",c[c.SHADER_TYPE=35663]="SHADER_TYPE",c[c.DELETE_STATUS=35712]="DELETE_STATUS",c[c.LINK_STATUS=35714]="LINK_STATUS",c[c.VALIDATE_STATUS=35715]="VALIDATE_STATUS",c[c.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",c[c.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",c[c.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",c[c.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",c[c.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",c[c.NEVER=512]="NEVER",c[c.LESS=513]="LESS",c[c.EQUAL=514]="EQUAL",c[c.LEQUAL=515]="LEQUAL",c[c.GREATER=516]="GREATER",c[c.NOTEQUAL=517]="NOTEQUAL",c[c.GEQUAL=518]="GEQUAL",c[c.ALWAYS=519]="ALWAYS",c[c.KEEP=7680]="KEEP",c[c.REPLACE=7681]="REPLACE",c[c.INCR=7682]="INCR",c[c.DECR=7683]="DECR",c[c.INVERT=5386]="INVERT",c[c.INCR_WRAP=34055]="INCR_WRAP",c[c.DECR_WRAP=34056]="DECR_WRAP",c[c.VENDOR=7936]="VENDOR",c[c.RENDERER=7937]="RENDERER",c[c.VERSION=7938]="VERSION",c[c.NEAREST=9728]="NEAREST",c[c.LINEAR=9729]="LINEAR",c[c.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",c[c.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",c[c.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",c[c.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",c[c.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",c[c.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",c[c.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",c[c.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",c[c.TEXTURE_2D=3553]="TEXTURE_2D",c[c.TEXTURE=5890]="TEXTURE",c[c.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",c[c.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",c[c.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",c[c.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",c[c.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",c[c.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",c[c.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",c[c.TEXTURE0=33984]="TEXTURE0",c[c.TEXTURE1=33985]="TEXTURE1",c[c.TEXTURE2=33986]="TEXTURE2",c[c.TEXTURE3=33987]="TEXTURE3",c[c.TEXTURE4=33988]="TEXTURE4",c[c.TEXTURE5=33989]="TEXTURE5",c[c.TEXTURE6=33990]="TEXTURE6",c[c.TEXTURE7=33991]="TEXTURE7",c[c.TEXTURE8=33992]="TEXTURE8",c[c.TEXTURE9=33993]="TEXTURE9",c[c.TEXTURE10=33994]="TEXTURE10",c[c.TEXTURE11=33995]="TEXTURE11",c[c.TEXTURE12=33996]="TEXTURE12",c[c.TEXTURE13=33997]="TEXTURE13",c[c.TEXTURE14=33998]="TEXTURE14",c[c.TEXTURE15=33999]="TEXTURE15",c[c.TEXTURE16=34e3]="TEXTURE16",c[c.TEXTURE17=34001]="TEXTURE17",c[c.TEXTURE18=34002]="TEXTURE18",c[c.TEXTURE19=34003]="TEXTURE19",c[c.TEXTURE20=34004]="TEXTURE20",c[c.TEXTURE21=34005]="TEXTURE21",c[c.TEXTURE22=34006]="TEXTURE22",c[c.TEXTURE23=34007]="TEXTURE23",c[c.TEXTURE24=34008]="TEXTURE24",c[c.TEXTURE25=34009]="TEXTURE25",c[c.TEXTURE26=34010]="TEXTURE26",c[c.TEXTURE27=34011]="TEXTURE27",c[c.TEXTURE28=34012]="TEXTURE28",c[c.TEXTURE29=34013]="TEXTURE29",c[c.TEXTURE30=34014]="TEXTURE30",c[c.TEXTURE31=34015]="TEXTURE31",c[c.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",c[c.REPEAT=10497]="REPEAT",c[c.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",c[c.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",c[c.FLOAT_VEC2=35664]="FLOAT_VEC2",c[c.FLOAT_VEC3=35665]="FLOAT_VEC3",c[c.FLOAT_VEC4=35666]="FLOAT_VEC4",c[c.INT_VEC2=35667]="INT_VEC2",c[c.INT_VEC3=35668]="INT_VEC3",c[c.INT_VEC4=35669]="INT_VEC4",c[c.BOOL=35670]="BOOL",c[c.BOOL_VEC2=35671]="BOOL_VEC2",c[c.BOOL_VEC3=35672]="BOOL_VEC3",c[c.BOOL_VEC4=35673]="BOOL_VEC4",c[c.FLOAT_MAT2=35674]="FLOAT_MAT2",c[c.FLOAT_MAT3=35675]="FLOAT_MAT3",c[c.FLOAT_MAT4=35676]="FLOAT_MAT4",c[c.SAMPLER_2D=35678]="SAMPLER_2D",c[c.SAMPLER_CUBE=35680]="SAMPLER_CUBE",c[c.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",c[c.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",c[c.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",c[c.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",c[c.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",c[c.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",c[c.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",c[c.COMPILE_STATUS=35713]="COMPILE_STATUS",c[c.LOW_FLOAT=36336]="LOW_FLOAT",c[c.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",c[c.HIGH_FLOAT=36338]="HIGH_FLOAT",c[c.LOW_INT=36339]="LOW_INT",c[c.MEDIUM_INT=36340]="MEDIUM_INT",c[c.HIGH_INT=36341]="HIGH_INT",c[c.FRAMEBUFFER=36160]="FRAMEBUFFER",c[c.RENDERBUFFER=36161]="RENDERBUFFER",c[c.RGBA4=32854]="RGBA4",c[c.RGB5_A1=32855]="RGB5_A1",c[c.RGB565=36194]="RGB565",c[c.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",c[c.STENCIL_INDEX=6401]="STENCIL_INDEX",c[c.STENCIL_INDEX8=36168]="STENCIL_INDEX8",c[c.DEPTH_STENCIL=34041]="DEPTH_STENCIL",c[c.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",c[c.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",c[c.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",c[c.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",c[c.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",c[c.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",c[c.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",c[c.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",c[c.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",c[c.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",c[c.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",c[c.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",c[c.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",c[c.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",c[c.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",c[c.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",c[c.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",c[c.NONE=0]="NONE",c[c.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",c[c.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",c[c.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",c[c.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",c[c.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",c[c.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",c[c.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",c[c.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",c[c.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",c[c.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",c[c.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",c[c.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",c[c.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",c[c.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",c[c.COPY_SRC=1]="COPY_SRC",c[c.COPY_DST=2]="COPY_DST",c[c.SAMPLED=4]="SAMPLED",c[c.STORAGE=8]="STORAGE",c[c.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(f||(f={}))},function(R,b,o){"use strict";var f=o(28),c=o(46).Graph;function M(x,O,S,g){var h;do h=f.uniqueId(g);while(x.hasNode(h));return S.dummy=O,x.setNode(h,S),h}function _(x){return f.max(f.map(x.nodes(),function(O){var S=x.node(O).rank;if(!f.isUndefined(S))return S}))}R.exports={addDummyNode:M,simplify:function(x){var O=new c().setGraph(x.graph());return f.forEach(x.nodes(),function(S){O.setNode(S,x.node(S))}),f.forEach(x.edges(),function(S){var g=O.edge(S.v,S.w)||{weight:0,minlen:1},h=x.edge(S);O.setEdge(S.v,S.w,{weight:g.weight+h.weight,minlen:Math.max(g.minlen,h.minlen)})}),O},asNonCompoundGraph:function(x){var O=new c({multigraph:x.isMultigraph()}).setGraph(x.graph());return f.forEach(x.nodes(),function(S){x.children(S).length||O.setNode(S,x.node(S))}),f.forEach(x.edges(),function(S){O.setEdge(S,x.edge(S))}),O},successorWeights:function(x){var O=f.map(x.nodes(),function(S){var g={};return f.forEach(x.outEdges(S),function(h){g[h.w]=(g[h.w]||0)+x.edge(h).weight}),g});return f.zipObject(x.nodes(),O)},predecessorWeights:function(x){var O=f.map(x.nodes(),function(S){var g={};return f.forEach(x.inEdges(S),function(h){g[h.v]=(g[h.v]||0)+x.edge(h).weight}),g});return f.zipObject(x.nodes(),O)},intersectRect:function(x,O){var S,g,h=x.x,y=x.y,E=O.x-h,m=O.y-y,p=x.width/2,A=x.height/2;if(!E&&!m)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(m)*p>Math.abs(E)*A?(m<0&&(A=-A),S=A*E/m,g=A):(E<0&&(p=-p),S=p,g=p*m/E),{x:h+S,y:y+g}},buildLayerMatrix:function(x){var O=f.map(f.range(_(x)+1),function(){return[]});return f.forEach(x.nodes(),function(S){var g=x.node(S),h=g.rank;f.isUndefined(h)||(O[h][g.order]=S)}),O},normalizeRanks:function(x){var O=f.min(f.map(x.nodes(),function(S){return x.node(S).rank}));f.forEach(x.nodes(),function(S){var g=x.node(S);f.has(g,"rank")&&(g.rank-=O)})},removeEmptyRanks:function(x){var O=f.min(f.map(x.nodes(),function(y){return x.node(y).rank})),S=[];f.forEach(x.nodes(),function(y){var E=x.node(y).rank-O;S[E]||(S[E]=[]),S[E].push(y)});var g=0,h=x.graph().nodeRankFactor;f.forEach(S,function(y,E){f.isUndefined(y)&&E%h!=0?--g:g&&f.forEach(y,function(m){x.node(m).rank+=g})})},addBorderNode:function(x,O,S,g){var h={width:0,height:0};return arguments.length>=4&&(h.rank=S,h.order=g),M(x,"border",h,O)},maxRank:_,partition:function(x,O){var S={lhs:[],rhs:[]};return f.forEach(x,function(g){O(g)?S.lhs.push(g):S.rhs.push(g)}),S},time:function(x,O){var S=f.now();try{return O()}finally{console.log(x+" time: "+(f.now()-S)+"ms")}},notime:function(x,O){return O()}}},function(R,b,o){"use strict";o.d(b,"a",function(){return x}),o.d(b,"b",function(){return h}),o.d(b,"c",function(){return m}),o.d(b,"d",function(){return z});var f=o(0),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,M=/[^\s\,]+/gi,_=function(H){var re=H||[];return Object(f.isArray)(re)?re:Object(f.isString)(re)?(re=re.match(c),Object(f.each)(re,function(ae,ue){if((ae=ae.match(M))[0].length>1){var xe=ae[0].charAt(0);ae.splice(1,0,ae[0].substr(1)),ae[0]=xe}Object(f.each)(ae,function(ye,Y){isNaN(ye)||(ae[Y]=+ye)}),re[ue]=ae}),re):void 0};function x(H,re){for(var ae=[],ue=0,xe=H.length;xe-2*!re>ue;ue+=2){var ye=[{x:+H[ue-2],y:+H[ue-1]},{x:+H[ue],y:+H[ue+1]},{x:+H[ue+2],y:+H[ue+3]},{x:+H[ue+4],y:+H[ue+5]}];re?ue?xe-4===ue?ye[3]={x:+H[0],y:+H[1]}:xe-2===ue&&(ye[2]={x:+H[0],y:+H[1]},ye[3]={x:+H[2],y:+H[3]}):ye[0]={x:+H[xe-2],y:+H[xe-1]}:xe-4===ue?ye[3]=ye[2]:ue||(ye[0]={x:+H[ue],y:+H[ue+1]}),ae.push(["C",(-ye[0].x+6*ye[1].x+ye[2].x)/6,(-ye[0].y+6*ye[1].y+ye[2].y)/6,(ye[1].x+6*ye[2].x-ye[3].x)/6,(ye[1].y+6*ye[2].y-ye[3].y)/6,ye[2].x,ye[2].y])}return ae}var O=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,S=new RegExp("([a-z])["+O+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+O+"]*,?["+O+"]*)+)","ig"),g=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+O+"]*,?["+O+"]*","ig");function h(H){if(!H)return null;if(Object(f.isArray)(H))return H;var re={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ae=[];return String(H).replace(S,function(ue,xe,ye){var Y=[],Ce=xe.toLowerCase();if(ye.replace(g,function(ge,he){he&&Y.push(+he)}),Ce==="m"&&Y.length>2&&(ae.push([xe].concat(Y.splice(0,2))),Ce="l",xe=xe==="m"?"l":"L"),Ce==="o"&&Y.length===1&&ae.push([xe,Y[0]]),Ce==="r")ae.push([xe].concat(Y));else for(;Y.length>=re[Ce]&&(ae.push([xe].concat(Y.splice(0,re[Ce]))),re[Ce]););return""}),ae}var y=/[a-z]/;function E(H,re){return[re[0]+(re[0]-H[0]),re[1]+(re[1]-H[1])]}function m(H){var re=h(H);if(!re||!re.length)return[["M",0,0]];for(var ae=!1,ue=0;ue<re.length;ue++){var xe=re[ue][0];if(y.test(xe)||["V","H","T","S"].indexOf(xe)>=0){ae=!0;break}}if(!ae)return re;var ye=[],Y=0,Ce=0,ge=0,he=0,Q=0,W=re[0];W[0]!=="M"&&W[0]!=="m"||(ge=Y=+W[1],he=Ce=+W[2],Q++,ye[0]=["M",Y,Ce]),ue=Q;for(var le=re.length;ue<le;ue++){var Oe=re[ue],Te=ye[ue-1],se=[],ee=(xe=Oe[0]).toUpperCase();if(xe!==ee)switch(se[0]=ee,ee){case"A":se[1]=Oe[1],se[2]=Oe[2],se[3]=Oe[3],se[4]=Oe[4],se[5]=Oe[5],se[6]=+Oe[6]+Y,se[7]=+Oe[7]+Ce;break;case"V":se[1]=+Oe[1]+Ce;break;case"H":se[1]=+Oe[1]+Y;break;case"M":ge=+Oe[1]+Y,he=+Oe[2]+Ce;break;default:for(var te=1,U=Oe.length;te<U;te++)se[te]=+Oe[te]+(te%2?Y:Ce)}else se=re[ue];switch(ee){case"Z":Y=+ge,Ce=+he;break;case"H":se=["L",Y=se[1],Ce];break;case"V":se=["L",Y,Ce=se[1]];break;case"T":Y=se[1],Ce=se[2];var X=E([Te[1],Te[2]],[Te[3],Te[4]]);se=["Q",X[0],X[1],Y,Ce];break;case"S":Y=se[se.length-2],Ce=se[se.length-1];var B=Te.length,J=E([Te[B-4],Te[B-3]],[Te[B-2],Te[B-1]]);se=["C",J[0],J[1],se[1],se[2],Y,Ce];break;case"M":ge=se[se.length-2],he=se[se.length-1];break;default:Y=se[se.length-2],Ce=se[se.length-1]}ye.push(se)}return ye}function p(H){return Math.sqrt(H[0]*H[0]+H[1]*H[1])}function A(H,re){return p(H)*p(re)?(H[0]*re[0]+H[1]*re[1])/(p(H)*p(re)):1}function C(H,re){return(H[0]*re[1]<H[1]*re[0]?-1:1)*Math.acos(A(H,re))}function N(H,re){return H[0]===re[0]&&H[1]===re[1]}function P(H,re){var ae=re[1],ue=re[2],xe=Object(f.mod)(Object(f.toRadian)(re[3]),2*Math.PI),ye=re[4],Y=re[5],Ce=H[0],ge=H[1],he=re[6],Q=re[7],W=Math.cos(xe)*(Ce-he)/2+Math.sin(xe)*(ge-Q)/2,le=-1*Math.sin(xe)*(Ce-he)/2+Math.cos(xe)*(ge-Q)/2,Oe=W*W/(ae*ae)+le*le/(ue*ue);Oe>1&&(ae*=Math.sqrt(Oe),ue*=Math.sqrt(Oe));var Te=ae*ae*(le*le)+ue*ue*(W*W),se=Te?Math.sqrt((ae*ae*(ue*ue)-Te)/Te):1;ye===Y&&(se*=-1),isNaN(se)&&(se=0);var ee=ue?se*ae*le/ue:0,te=ae?se*-ue*W/ae:0,U=(Ce+he)/2+Math.cos(xe)*ee-Math.sin(xe)*te,X=(ge+Q)/2+Math.sin(xe)*ee+Math.cos(xe)*te,B=[(W-ee)/ae,(le-te)/ue],J=[(-1*W-ee)/ae,(-1*le-te)/ue],ne=C([1,0],B),ie=C(B,J);return A(B,J)<=-1&&(ie=Math.PI),A(B,J)>=1&&(ie=0),Y===0&&ie>0&&(ie-=2*Math.PI),Y===1&&ie<0&&(ie+=2*Math.PI),{cx:U,cy:X,rx:N(H,[he,Q])?0:ae,ry:N(H,[he,Q])?0:ue,startAngle:ne,endAngle:ne+ie,xRotation:xe,arcFlag:ye,sweepFlag:Y}}function L(H,re){return[re[0]+(re[0]-H[0]),re[1]+(re[1]-H[1])]}function z(H){for(var re=[],ae=null,ue=null,xe=null,ye=0,Y=(H=_(H)).length,Ce=0;Ce<Y;Ce++){var ge=H[Ce];ue=H[Ce+1];var he=ge[0],Q={command:he,prePoint:ae,params:ge,startTangent:null,endTangent:null};switch(he){case"M":xe=[ge[1],ge[2]],ye=Ce;break;case"A":var W=P(ae,ge);Q.arcParams=W}if(he==="Z")ae=xe,ue=H[ye+1];else{var le=ge.length;ae=[ge[le-2],ge[le-1]]}ue&&ue[0]==="Z"&&(ue=H[ye],re[ye]&&(re[ye].prePoint=ae)),Q.currentPoint=ae,re[ye]&&N(ae,re[ye].currentPoint)&&(re[ye].prePoint=Q.prePoint);var Oe=ue?[ue[ue.length-2],ue[ue.length-1]]:null;Q.nextPoint=Oe;var Te=Q.prePoint;if(["L","H","V"].includes(he))Q.startTangent=[Te[0]-ae[0],Te[1]-ae[1]],Q.endTangent=[ae[0]-Te[0],ae[1]-Te[1]];else if(he==="Q"){var se=[ge[1],ge[2]];Q.startTangent=[Te[0]-se[0],Te[1]-se[1]],Q.endTangent=[ae[0]-se[0],ae[1]-se[1]]}else if(he==="T")se=L((U=re[Ce-1]).currentPoint,Te),U.command==="Q"?(Q.command="Q",Q.startTangent=[Te[0]-se[0],Te[1]-se[1]],Q.endTangent=[ae[0]-se[0],ae[1]-se[1]]):(Q.command="TL",Q.startTangent=[Te[0]-ae[0],Te[1]-ae[1]],Q.endTangent=[ae[0]-Te[0],ae[1]-Te[1]]);else if(he==="C"){var ee=[ge[1],ge[2]],te=[ge[3],ge[4]];Q.startTangent=[Te[0]-ee[0],Te[1]-ee[1]],Q.endTangent=[ae[0]-te[0],ae[1]-te[1]]}else if(he==="S"){var U;ee=L((U=re[Ce-1]).currentPoint,Te),te=[ge[1],ge[2]],U.command==="C"?(Q.command="C",Q.startTangent=[Te[0]-ee[0],Te[1]-ee[1]],Q.endTangent=[ae[0]-te[0],ae[1]-te[1]]):(Q.command="SQ",Q.startTangent=[Te[0]-te[0],Te[1]-te[1]],Q.endTangent=[ae[0]-te[0],ae[1]-te[1]])}else if(he==="A"){var X=.001,B=Q.arcParams||{},J=B.cx,ne=J===void 0?0:J,ie=B.cy,Z=ie===void 0?0:ie,fe=B.rx,_e=fe===void 0?0:fe,je=B.ry,Me=je===void 0?0:je,Ae=B.sweepFlag,Le=Ae===void 0?0:Ae,Se=B.startAngle,Re=Se===void 0?0:Se,Ke=B.endAngle,Je=Ke===void 0?0:Ke;Le===0&&(X*=-1);var nt=_e*Math.cos(Re-X)+ne,dt=Me*Math.sin(Re-X)+Z;Q.startTangent=[nt-xe[0],dt-xe[1]];var kt=_e*Math.cos(Re+Je+X)+ne,At=Me*Math.sin(Re+Je-X)+Z;Q.endTangent=[Te[0]-kt,Te[1]-At]}re.push(Q)}return re}},function(R,b,o){"use strict";function f(_,x){var O=[],S=_[0],g=_[1],h=_[2],y=_[3],E=_[4],m=_[5],p=_[6],A=_[7],C=_[8],N=x[0],P=x[1],L=x[2],z=x[3],H=x[4],re=x[5],ae=x[6],ue=x[7],xe=x[8];return O[0]=N*S+P*y+L*p,O[1]=N*g+P*E+L*A,O[2]=N*h+P*m+L*C,O[3]=z*S+H*y+re*p,O[4]=z*g+H*E+re*A,O[5]=z*h+H*m+re*C,O[6]=ae*S+ue*y+xe*p,O[7]=ae*g+ue*E+xe*A,O[8]=ae*h+ue*m+xe*C,O}function c(_,x){var O=[],S=x[0],g=x[1];return O[0]=_[0]*S+_[3]*g+_[6],O[1]=_[1]*S+_[4]*g+_[7],O}function M(_){var x=[],O=_[0],S=_[1],g=_[2],h=_[3],y=_[4],E=_[5],m=_[6],p=_[7],A=_[8],C=A*y-E*p,N=-A*h+E*m,P=p*h-y*m,L=O*C+S*N+g*P;return L?(L=1/L,x[0]=C*L,x[1]=(-A*S+g*p)*L,x[2]=(E*S-g*y)*L,x[3]=N*L,x[4]=(A*O-g*m)*L,x[5]=(-E*O+g*h)*L,x[6]=P*L,x[7]=(-p*O+S*m)*L,x[8]=(y*O-S*h)*L,x):null}o.d(b,"b",function(){return f}),o.d(b,"c",function(){return c}),o.d(b,"a",function(){return M})},function(R,b,o){"use strict";o.r(b),o.d(b,"create",function(){return c}),o.d(b,"clone",function(){return M}),o.d(b,"length",function(){return _}),o.d(b,"fromValues",function(){return x}),o.d(b,"copy",function(){return O}),o.d(b,"set",function(){return S}),o.d(b,"add",function(){return g}),o.d(b,"subtract",function(){return h}),o.d(b,"multiply",function(){return y}),o.d(b,"divide",function(){return E}),o.d(b,"ceil",function(){return m}),o.d(b,"floor",function(){return p}),o.d(b,"min",function(){return A}),o.d(b,"max",function(){return C}),o.d(b,"round",function(){return N}),o.d(b,"scale",function(){return P}),o.d(b,"scaleAndAdd",function(){return L}),o.d(b,"distance",function(){return z}),o.d(b,"squaredDistance",function(){return H}),o.d(b,"squaredLength",function(){return re}),o.d(b,"negate",function(){return ae}),o.d(b,"inverse",function(){return ue}),o.d(b,"normalize",function(){return xe}),o.d(b,"dot",function(){return ye}),o.d(b,"cross",function(){return Y}),o.d(b,"lerp",function(){return Ce}),o.d(b,"hermite",function(){return ge}),o.d(b,"bezier",function(){return he}),o.d(b,"random",function(){return Q}),o.d(b,"transformMat4",function(){return W}),o.d(b,"transformMat3",function(){return le}),o.d(b,"transformQuat",function(){return Oe}),o.d(b,"rotateX",function(){return Te}),o.d(b,"rotateY",function(){return se}),o.d(b,"rotateZ",function(){return ee}),o.d(b,"angle",function(){return te}),o.d(b,"zero",function(){return U}),o.d(b,"str",function(){return X}),o.d(b,"exactEquals",function(){return B}),o.d(b,"equals",function(){return J}),o.d(b,"sub",function(){return ie}),o.d(b,"mul",function(){return Z}),o.d(b,"div",function(){return fe}),o.d(b,"dist",function(){return _e}),o.d(b,"sqrDist",function(){return je}),o.d(b,"len",function(){return Me}),o.d(b,"sqrLen",function(){return Ae}),o.d(b,"forEach",function(){return Le});var f=o(12);function c(){var Se=new f.a(3);return f.a!=Float32Array&&(Se[0]=0,Se[1]=0,Se[2]=0),Se}function M(Se){var Re=new f.a(3);return Re[0]=Se[0],Re[1]=Se[1],Re[2]=Se[2],Re}function _(Se){var Re=Se[0],Ke=Se[1],Je=Se[2];return Math.hypot(Re,Ke,Je)}function x(Se,Re,Ke){var Je=new f.a(3);return Je[0]=Se,Je[1]=Re,Je[2]=Ke,Je}function O(Se,Re){return Se[0]=Re[0],Se[1]=Re[1],Se[2]=Re[2],Se}function S(Se,Re,Ke,Je){return Se[0]=Re,Se[1]=Ke,Se[2]=Je,Se}function g(Se,Re,Ke){return Se[0]=Re[0]+Ke[0],Se[1]=Re[1]+Ke[1],Se[2]=Re[2]+Ke[2],Se}function h(Se,Re,Ke){return Se[0]=Re[0]-Ke[0],Se[1]=Re[1]-Ke[1],Se[2]=Re[2]-Ke[2],Se}function y(Se,Re,Ke){return Se[0]=Re[0]*Ke[0],Se[1]=Re[1]*Ke[1],Se[2]=Re[2]*Ke[2],Se}function E(Se,Re,Ke){return Se[0]=Re[0]/Ke[0],Se[1]=Re[1]/Ke[1],Se[2]=Re[2]/Ke[2],Se}function m(Se,Re){return Se[0]=Math.ceil(Re[0]),Se[1]=Math.ceil(Re[1]),Se[2]=Math.ceil(Re[2]),Se}function p(Se,Re){return Se[0]=Math.floor(Re[0]),Se[1]=Math.floor(Re[1]),Se[2]=Math.floor(Re[2]),Se}function A(Se,Re,Ke){return Se[0]=Math.min(Re[0],Ke[0]),Se[1]=Math.min(Re[1],Ke[1]),Se[2]=Math.min(Re[2],Ke[2]),Se}function C(Se,Re,Ke){return Se[0]=Math.max(Re[0],Ke[0]),Se[1]=Math.max(Re[1],Ke[1]),Se[2]=Math.max(Re[2],Ke[2]),Se}function N(Se,Re){return Se[0]=Math.round(Re[0]),Se[1]=Math.round(Re[1]),Se[2]=Math.round(Re[2]),Se}function P(Se,Re,Ke){return Se[0]=Re[0]*Ke,Se[1]=Re[1]*Ke,Se[2]=Re[2]*Ke,Se}function L(Se,Re,Ke,Je){return Se[0]=Re[0]+Ke[0]*Je,Se[1]=Re[1]+Ke[1]*Je,Se[2]=Re[2]+Ke[2]*Je,Se}function z(Se,Re){var Ke=Re[0]-Se[0],Je=Re[1]-Se[1],nt=Re[2]-Se[2];return Math.hypot(Ke,Je,nt)}function H(Se,Re){var Ke=Re[0]-Se[0],Je=Re[1]-Se[1],nt=Re[2]-Se[2];return Ke*Ke+Je*Je+nt*nt}function re(Se){var Re=Se[0],Ke=Se[1],Je=Se[2];return Re*Re+Ke*Ke+Je*Je}function ae(Se,Re){return Se[0]=-Re[0],Se[1]=-Re[1],Se[2]=-Re[2],Se}function ue(Se,Re){return Se[0]=1/Re[0],Se[1]=1/Re[1],Se[2]=1/Re[2],Se}function xe(Se,Re){var Ke=Re[0],Je=Re[1],nt=Re[2],dt=Ke*Ke+Je*Je+nt*nt;return dt>0&&(dt=1/Math.sqrt(dt)),Se[0]=Re[0]*dt,Se[1]=Re[1]*dt,Se[2]=Re[2]*dt,Se}function ye(Se,Re){return Se[0]*Re[0]+Se[1]*Re[1]+Se[2]*Re[2]}function Y(Se,Re,Ke){var Je=Re[0],nt=Re[1],dt=Re[2],kt=Ke[0],At=Ke[1],It=Ke[2];return Se[0]=nt*It-dt*At,Se[1]=dt*kt-Je*It,Se[2]=Je*At-nt*kt,Se}function Ce(Se,Re,Ke,Je){var nt=Re[0],dt=Re[1],kt=Re[2];return Se[0]=nt+Je*(Ke[0]-nt),Se[1]=dt+Je*(Ke[1]-dt),Se[2]=kt+Je*(Ke[2]-kt),Se}function ge(Se,Re,Ke,Je,nt,dt){var kt=dt*dt,At=kt*(2*dt-3)+1,It=kt*(dt-2)+dt,Kt=kt*(dt-1),Qt=kt*(3-2*dt);return Se[0]=Re[0]*At+Ke[0]*It+Je[0]*Kt+nt[0]*Qt,Se[1]=Re[1]*At+Ke[1]*It+Je[1]*Kt+nt[1]*Qt,Se[2]=Re[2]*At+Ke[2]*It+Je[2]*Kt+nt[2]*Qt,Se}function he(Se,Re,Ke,Je,nt,dt){var kt=1-dt,At=kt*kt,It=dt*dt,Kt=At*kt,Qt=3*dt*At,tr=3*It*kt,nr=It*dt;return Se[0]=Re[0]*Kt+Ke[0]*Qt+Je[0]*tr+nt[0]*nr,Se[1]=Re[1]*Kt+Ke[1]*Qt+Je[1]*tr+nt[1]*nr,Se[2]=Re[2]*Kt+Ke[2]*Qt+Je[2]*tr+nt[2]*nr,Se}function Q(Se,Re){Re=Re||1;var Ke=2*f.c()*Math.PI,Je=2*f.c()-1,nt=Math.sqrt(1-Je*Je)*Re;return Se[0]=Math.cos(Ke)*nt,Se[1]=Math.sin(Ke)*nt,Se[2]=Je*Re,Se}function W(Se,Re,Ke){var Je=Re[0],nt=Re[1],dt=Re[2],kt=Ke[3]*Je+Ke[7]*nt+Ke[11]*dt+Ke[15];return kt=kt||1,Se[0]=(Ke[0]*Je+Ke[4]*nt+Ke[8]*dt+Ke[12])/kt,Se[1]=(Ke[1]*Je+Ke[5]*nt+Ke[9]*dt+Ke[13])/kt,Se[2]=(Ke[2]*Je+Ke[6]*nt+Ke[10]*dt+Ke[14])/kt,Se}function le(Se,Re,Ke){var Je=Re[0],nt=Re[1],dt=Re[2];return Se[0]=Je*Ke[0]+nt*Ke[3]+dt*Ke[6],Se[1]=Je*Ke[1]+nt*Ke[4]+dt*Ke[7],Se[2]=Je*Ke[2]+nt*Ke[5]+dt*Ke[8],Se}function Oe(Se,Re,Ke){var Je=Ke[0],nt=Ke[1],dt=Ke[2],kt=Ke[3],At=Re[0],It=Re[1],Kt=Re[2],Qt=nt*Kt-dt*It,tr=dt*At-Je*Kt,nr=Je*It-nt*At,Mr=nt*nr-dt*tr,ar=dt*Qt-Je*nr,yr=Je*tr-nt*Qt,mr=2*kt;return Qt*=mr,tr*=mr,nr*=mr,Mr*=2,ar*=2,yr*=2,Se[0]=At+Qt+Mr,Se[1]=It+tr+ar,Se[2]=Kt+nr+yr,Se}function Te(Se,Re,Ke,Je){var nt=[],dt=[];return nt[0]=Re[0]-Ke[0],nt[1]=Re[1]-Ke[1],nt[2]=Re[2]-Ke[2],dt[0]=nt[0],dt[1]=nt[1]*Math.cos(Je)-nt[2]*Math.sin(Je),dt[2]=nt[1]*Math.sin(Je)+nt[2]*Math.cos(Je),Se[0]=dt[0]+Ke[0],Se[1]=dt[1]+Ke[1],Se[2]=dt[2]+Ke[2],Se}function se(Se,Re,Ke,Je){var nt=[],dt=[];return nt[0]=Re[0]-Ke[0],nt[1]=Re[1]-Ke[1],nt[2]=Re[2]-Ke[2],dt[0]=nt[2]*Math.sin(Je)+nt[0]*Math.cos(Je),dt[1]=nt[1],dt[2]=nt[2]*Math.cos(Je)-nt[0]*Math.sin(Je),Se[0]=dt[0]+Ke[0],Se[1]=dt[1]+Ke[1],Se[2]=dt[2]+Ke[2],Se}function ee(Se,Re,Ke,Je){var nt=[],dt=[];return nt[0]=Re[0]-Ke[0],nt[1]=Re[1]-Ke[1],nt[2]=Re[2]-Ke[2],dt[0]=nt[0]*Math.cos(Je)-nt[1]*Math.sin(Je),dt[1]=nt[0]*Math.sin(Je)+nt[1]*Math.cos(Je),dt[2]=nt[2],Se[0]=dt[0]+Ke[0],Se[1]=dt[1]+Ke[1],Se[2]=dt[2]+Ke[2],Se}function te(Se,Re){var Ke=Se[0],Je=Se[1],nt=Se[2],dt=Re[0],kt=Re[1],At=Re[2],It=Math.sqrt(Ke*Ke+Je*Je+nt*nt)*Math.sqrt(dt*dt+kt*kt+At*At),Kt=It&&ye(Se,Re)/It;return Math.acos(Math.min(Math.max(Kt,-1),1))}function U(Se){return Se[0]=0,Se[1]=0,Se[2]=0,Se}function X(Se){return"vec3("+Se[0]+", "+Se[1]+", "+Se[2]+")"}function B(Se,Re){return Se[0]===Re[0]&&Se[1]===Re[1]&&Se[2]===Re[2]}function J(Se,Re){var Ke=Se[0],Je=Se[1],nt=Se[2],dt=Re[0],kt=Re[1],At=Re[2];return Math.abs(Ke-dt)<=f.b*Math.max(1,Math.abs(Ke),Math.abs(dt))&&Math.abs(Je-kt)<=f.b*Math.max(1,Math.abs(Je),Math.abs(kt))&&Math.abs(nt-At)<=f.b*Math.max(1,Math.abs(nt),Math.abs(At))}var ne,ie=h,Z=y,fe=E,_e=z,je=H,Me=_,Ae=re,Le=(ne=c(),function(Se,Re,Ke,Je,nt,dt){var kt,At;for(Re||(Re=3),Ke||(Ke=0),At=Je?Math.min(Je*Re+Ke,Se.length):Se.length,kt=Ke;kt<At;kt+=Re)ne[0]=Se[kt],ne[1]=Se[kt+1],ne[2]=Se[kt+2],nt(ne,ne,dt),Se[kt]=ne[0],Se[kt+1]=ne[1],Se[kt+2]=ne[2];return Se})},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.STACK_OVERFLOW=b.CIRCULAR_DEPENDENCY_IN_FACTORY=b.POST_CONSTRUCT_ERROR=b.MULTIPLE_POST_CONSTRUCT_METHODS=b.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=b.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=b.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=b.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=b.ARGUMENTS_LENGTH_MISMATCH=b.INVALID_DECORATOR_OPERATION=b.INVALID_TO_SELF_VALUE=b.INVALID_FUNCTION_BINDING=b.INVALID_MIDDLEWARE_RETURN=b.NO_MORE_SNAPSHOTS_AVAILABLE=b.INVALID_BINDING_TYPE=b.NOT_IMPLEMENTED=b.CIRCULAR_DEPENDENCY=b.UNDEFINED_INJECT_ANNOTATION=b.MISSING_INJECT_ANNOTATION=b.MISSING_INJECTABLE_ANNOTATION=b.NOT_REGISTERED=b.CANNOT_UNBIND=b.AMBIGUOUS_MATCH=b.KEY_NOT_FOUND=b.NULL_ARGUMENT=b.DUPLICATED_METADATA=b.DUPLICATED_INJECTABLE_DECORATOR=void 0,b.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",b.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",b.NULL_ARGUMENT="NULL argument",b.KEY_NOT_FOUND="Key Not Found",b.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",b.CANNOT_UNBIND="Could not unbind serviceIdentifier:",b.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",b.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",b.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",b.UNDEFINED_INJECT_ANNOTATION=function(f){return"@inject called with undefined this could mean that the class "+f+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},b.CIRCULAR_DEPENDENCY="Circular dependency found:",b.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",b.INVALID_BINDING_TYPE="Invalid binding type:",b.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",b.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",b.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",b.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",b.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",b.ARGUMENTS_LENGTH_MISMATCH=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return"The number of constructor arguments in the derived class "+f[0]+" must be >= than the number of constructor arguments of its base class."},b.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",b.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",b.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",b.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",b.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",b.POST_CONSTRUCT_ERROR=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return"@postConstruct error in class "+f[0]+": "+f[1]},b.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return"It looks like there is a circular dependency in one of the '"+f[0]+"' bindings. Please investigate bindings withservice identifier '"+f[1]+"'."},b.STACK_OVERFLOW="Maximum call stack size exceeded"},function(R,b){function o(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(R.exports=o=function(c){return typeof c},R.exports.default=R.exports,R.exports.__esModule=!0):(R.exports=o=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},R.exports.default=R.exports,R.exports.__esModule=!0),o(f)}R.exports=o,R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){var f;try{f={clone:o(307),constant:o(153),each:o(193),filter:o(196),has:o(207),isArray:o(31),isEmpty:o(383),isFunction:o(84),isUndefined:o(208),keys:o(57),map:o(209),reduce:o(211),size:o(386),transform:o(392),union:o(393),values:o(216)}}catch(c){}f||(f=window._),R.exports=f},function(R,b){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}R.exports=function(f){var c=o(f);return f!=null&&(c=="object"||c=="function")}},function(R,b,o){"use strict";o(55),o(21);var f=o(269);o.d(b,"Canvas",function(){return f.a}),o(75),o(92)},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.uniqueId=b.getEdgesByNodeId=b.getOutEdgesNodeId=b.getNeighbors=void 0,b.getNeighbors=function(f,c,M){c===void 0&&(c=[]);var _=c.filter(function(x){return x.source===f||x.target===f});return M==="target"?_.filter(function(x){return x.source===f}).map(function(x){return x.target}):M==="source"?_.filter(function(x){return x.target===f}).map(function(x){return x.source}):_.map(function(x){return x.source===f?x.target:x.source})},b.getOutEdgesNodeId=function(f,c){return c.filter(function(M){return M.source===f})},b.getEdgesByNodeId=function(f,c){return c.filter(function(M){return M.source===f||M.target===f})},b.uniqueId=function(f){return f===void 0&&(f=0),f+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)}},function(R,b,o){var f;try{f=o(305)}catch(c){}f||(f=window.graphlib),R.exports=f},function(R,b,o){function f(x){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}var c=o(175),M=(typeof self=="undefined"?"undefined":f(self))=="object"&&self&&self.Object===Object&&self,_=c||M||Function("return this")();R.exports=_},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Metadata=void 0;var f=o(32),c=function(){function M(_,x){this.key=_,this.value=x}return M.prototype.toString=function(){return this.key===f.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},M}();b.Metadata=c},function(R,b){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}R.exports=function(f){return f!=null&&o(f)=="object"}},function(R,b,o){"use strict";o.d(b,"a",function(){return ie});var f,c,M,_,x,O,S,g,h,y,E,m,p,A,C,N,P,L,z,H,re,ae,ue,xe,ye=o(9),Y=o.n(ye),Ce=o(14),ge=o.n(Ce),he=o(10),Q=o.n(he),W=o(6),le=o.n(W),Oe=o(7),Te=o.n(Oe),se=o(11),ee=o.n(se),te=(o(29),o(2)),U=o(5),X=o(13),B=o(35);function J(Z,fe){var _e;if(typeof Symbol=="undefined"||Z[Symbol.iterator]==null){if(Array.isArray(Z)||(_e=function(Re,Ke){if(!!Re){if(typeof Re=="string")return ne(Re,Ke);var Je=Object.prototype.toString.call(Re).slice(8,-1);if(Je==="Object"&&Re.constructor&&(Je=Re.constructor.name),Je==="Map"||Je==="Set")return Array.from(Re);if(Je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Je))return ne(Re,Ke)}}(Z))||fe&&Z&&typeof Z.length=="number"){_e&&(Z=_e);var je=0,Me=function(){};return{s:Me,n:function(){return je>=Z.length?{done:!0}:{done:!1,value:Z[je++]}},e:function(Re){throw Re},f:Me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ae,Le=!0,Se=!1;return{s:function(){_e=Z[Symbol.iterator]()},n:function(){var Re=_e.next();return Le=Re.done,Re},e:function(Re){Se=!0,Ae=Re},f:function(){try{Le||_e.return==null||_e.return()}finally{if(Se)throw Ae}}}}function ne(Z,fe){(fe==null||fe>Z.length)&&(fe=Z.length);for(var _e=0,je=new Array(fe);_e<fe;_e++)je[_e]=Z[_e];return je}var ie=(f=Object(U.injectable)(),c=Object(U.inject)(X.a.MeshComponentManager),M=Object(U.inject)(X.a.GeometryComponentManager),_=Object(U.inject)(X.a.MaterialComponentManager),x=Object(U.inject)(X.a.CullableComponentManager),O=Object(U.inject)(X.a.TransformComponentManager),S=Object(U.inject)(X.a.HierarchyComponentManager),g=Object(U.inject)(X.a.Systems),h=Object(U.named)(X.a.FrameGraphSystem),y=Object(U.inject)(X.a.RenderEngine),E=Object(U.inject)(X.a.ResourcePool),f((xe=ue=function(){function Z(){var je=this;le()(this,Z),Q()(this,"mesh",A,this),Q()(this,"geometry",C,this),Q()(this,"material",N,this),Q()(this,"cullable",P,this),Q()(this,"transform",L,this),Q()(this,"hierarchy",z,this),Q()(this,"frameGraphSystem",H,this),Q()(this,"engine",re,this),Q()(this,"resourcePool",ae,this),this.modelCache={},this.setup=function(Me,Ae,Le){var Se=Me.createRenderTarget(Ae,"color buffer",{width:1,height:1,usage:B.a.RENDER_ATTACHMENT|B.a.SAMPLED|B.a.COPY_SRC});Le.data={output:Ae.write(Me,Se)}},this.execute=function(){var Me=ge()(Y.a.mark(function Ae(Le,Se,Re){var Ke,Je,nt,dt,kt,At;return Y.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:Ke=Le.getResourceNode(Se.data.output),Je=je.resourcePool.getOrCreateResource(Ke.resource),nt=J(Re),It.prev=3,nt.s();case 5:if((dt=nt.n()).done){It.next=11;break}return kt=dt.value,It.next=9,je.initView(kt);case 9:It.next=5;break;case 11:It.next=16;break;case 13:It.prev=13,It.t0=It.catch(3),nt.e(It.t0);case 16:return It.prev=16,nt.f(),It.finish(16);case 19:At=je.engine.getCanvas(),Je.resize({width:At.width,height:At.height}),je.engine.setScissor({enable:!1}),je.engine.clear({framebuffer:Je,color:Re[0].getClearColor(),depth:1}),je.engine.useFramebuffer(Je,function(){var Kt,Qt=J(Re);try{for(Qt.s();!(Kt=Qt.n()).done;){var tr=Kt.value;je.renderView(tr)}}catch(nr){Qt.e(nr)}finally{Qt.f()}});case 24:case"end":return It.stop()}},Ae,null,[[3,13,16,19]])}));return function(Ae,Le,Se){return Me.apply(this,arguments)}}()}var fe,_e;return Te()(Z,[{key:"renderView",value:function(je){var Me=je.getScene(),Ae=je.getCamera(),Le=Ae.getViewTransform(),Se=te.b.multiply(te.b.create(),Ae.getPerspective(),Le);Ae.getFrustum().extractFromVPMatrix(Se);var Re=je.getViewport(),Ke=Re.x,Je=Re.y,nt=Re.width,dt=Re.height;this.engine.viewport({x:Ke,y:Je,width:nt,height:dt});var kt,At=J(Me.getEntities());try{for(At.s();!(kt=At.n()).done;){var It=kt.value;this.renderMesh(It,{camera:Ae,view:je,viewMatrix:Le})}}catch(Kt){At.e(Kt)}finally{At.f()}}},{key:"renderMesh",value:function(je,Me){var Ae=Me.camera,Le=Me.view,Se=Me.viewMatrix,Re=this.mesh.getComponentByEntity(je);if(Re&&Re.visible){var Ke=Re.material,Je=Re.geometry;if(Je&&!Je.dirty&&Ke){var nt=this.transform.getComponentByEntity(je),dt=te.b.multiply(te.b.create(),Se,nt.worldTransform),kt=Le.getViewport(),At=kt.width,It=kt.height;Ke.setUniform({projectionMatrix:Ae.getPerspective(),modelViewMatrix:dt,modelMatrix:nt.worldTransform,viewMatrix:Se,cameraPosition:Ae.getPosition(),u_viewport:[At,It]}),Re.model&&(Re.model.draw({uniforms:Ke.uniforms.reduce(function(Kt,Qt){return Kt[Qt.name]=Qt.data,Kt},{})}),Ke.uniforms.forEach(function(Kt){Kt.dirty=!1}),Ke.dirty=!1)}}}},{key:"initMesh",value:(_e=ge()(Y.a.mark(function je(Me,Ae){var Le,Se,Re,Ke,Je,nt,dt,kt;return Y.a.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(Le=this.mesh.getComponentByEntity(Me)){At.next=3;break}return At.abrupt("return");case 3:if(Se=Le.material,(Re=Le.geometry)&&!Re.dirty&&Se){At.next=7;break}return At.abrupt("return");case 7:if(Le.model){At.next=24;break}if(Ke="m-".concat(Se.entity,"-g-").concat(Re.entity),!this.modelCache[Ke]){At.next=12;break}return Le.model=this.modelCache[Ke],At.abrupt("return");case 12:return Se.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),Je=this.engine,nt=Je.createModel,dt=Je.createAttribute,kt={vs:Se.vertexShaderGLSL,fs:Se.fragmentShaderGLSL,defines:Se.defines,attributes:Re.attributes.reduce(function(It,Kt){return Kt.data&&Kt.buffer&&(It[Kt.name]=dt({buffer:Kt.buffer,attributes:Kt.attributes,arrayStride:Kt.arrayStride,stepMode:Kt.stepMode,divisor:Kt.stepMode==="vertex"?0:1})),It},{}),uniforms:Se.uniforms.reduce(function(It,Kt){return It[Kt.name]=Kt.data,It},{}),scissor:{enable:!0,box:function(){return Ae.getViewport()}}},Se.cull&&(kt.cull=Se.cull),Se.depth&&(kt.depth=Se.depth),Se.blend&&(kt.blend=Se.blend),Re.indicesBuffer&&(kt.elements=Re.indicesBuffer),Re.maxInstancedCount&&(kt.instances=Re.maxInstancedCount,kt.count=Re.vertexCount||3),At.next=22,nt(kt);case 22:Le.model=At.sent,this.modelCache[Ke]=Le.model;case 24:case"end":return At.stop()}},je,this)})),function(je,Me){return _e.apply(this,arguments)})},{key:"initView",value:(fe=ge()(Y.a.mark(function je(Me){var Ae,Le,Se,Re;return Y.a.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:Ae=Me.getScene(),Le=J(Ae.getEntities()),Ke.prev=2,Le.s();case 4:if((Se=Le.n()).done){Ke.next=10;break}return Re=Se.value,Ke.next=8,this.initMesh(Re,Me);case 8:Ke.next=4;break;case 10:Ke.next=15;break;case 12:Ke.prev=12,Ke.t0=Ke.catch(2),Le.e(Ke.t0);case 15:return Ke.prev=15,Le.f(),Ke.finish(15);case 18:case"end":return Ke.stop()}},je,this,[[2,12,15,18]])})),function(je){return fe.apply(this,arguments)})}]),Z}(),ue.IDENTIFIER="Render Pass",p=xe,A=ee()(p.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=ee()(p.prototype,"geometry",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=ee()(p.prototype,"material",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=ee()(p.prototype,"cullable",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=ee()(p.prototype,"transform",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=ee()(p.prototype,"hierarchy",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=ee()(p.prototype,"frameGraphSystem",[g,h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=ee()(p.prototype,"engine",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=ee()(p.prototype,"resourcePool",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=p))||m)},function(R,b,o){"use strict";o.r(b),o.d(b,"catmullRomToBezier",function(){return O}),o.d(b,"fillPath",function(){return ge}),o.d(b,"fillPathByDiff",function(){return W}),o.d(b,"formatPath",function(){return Te}),o.d(b,"intersection",function(){return ye}),o.d(b,"parsePathArray",function(){return A}),o.d(b,"parsePathString",function(){return x}),o.d(b,"pathToAbsolute",function(){return g}),o.d(b,"pathToCurve",function(){return m}),o.d(b,"rectPath",function(){return H});var f=o(0),c=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,M=new RegExp("([a-z])["+c+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+c+"]*,?["+c+"]*)+)","ig"),_=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+c+"]*,?["+c+"]*","ig"),x=function(se){if(!se)return null;if(Object(f.isArray)(se))return se;var ee={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},te=[];return String(se).replace(M,function(U,X,B){var J=[],ne=X.toLowerCase();if(B.replace(_,function(ie,Z){Z&&J.push(+Z)}),ne==="m"&&J.length>2&&(te.push([X].concat(J.splice(0,2))),ne="l",X=X==="m"?"l":"L"),ne==="o"&&J.length===1&&te.push([X,J[0]]),ne==="r")te.push([X].concat(J));else for(;J.length>=ee[ne]&&(te.push([X].concat(J.splice(0,ee[ne]))),ee[ne]););return se}),te},O=function(se,ee){for(var te=[],U=0,X=se.length;X-2*!ee>U;U+=2){var B=[{x:+se[U-2],y:+se[U-1]},{x:+se[U],y:+se[U+1]},{x:+se[U+2],y:+se[U+3]},{x:+se[U+4],y:+se[U+5]}];ee?U?X-4===U?B[3]={x:+se[0],y:+se[1]}:X-2===U&&(B[2]={x:+se[0],y:+se[1]},B[3]={x:+se[2],y:+se[3]}):B[0]={x:+se[X-2],y:+se[X-1]}:X-4===U?B[3]=B[2]:U||(B[0]={x:+se[U],y:+se[U+1]}),te.push(["C",(-B[0].x+6*B[1].x+B[2].x)/6,(-B[0].y+6*B[1].y+B[2].y)/6,(B[1].x+6*B[2].x-B[3].x)/6,(B[1].y+6*B[2].y-B[3].y)/6,B[2].x,B[2].y])}return te},S=function(se,ee,te,U,X){var B=[];if(X===null&&U===null&&(U=te),se=+se,ee=+ee,te=+te,U=+U,X!==null){var J=Math.PI/180,ne=se+te*Math.cos(-U*J),ie=se+te*Math.cos(-X*J);B=[["M",ne,ee+te*Math.sin(-U*J)],["A",te,te,0,+(X-U>180),0,ie,ee+te*Math.sin(-X*J)]]}else B=[["M",se,ee],["m",0,-U],["a",te,U,0,1,1,0,2*U],["a",te,U,0,1,1,0,-2*U],["z"]];return B},g=function(se){if(!(se=x(se))||!se.length)return[["M",0,0]];var ee,te,U=[],X=0,B=0,J=0,ne=0,ie=0;se[0][0]==="M"&&(J=X=+se[0][1],ne=B=+se[0][2],ie++,U[0]=["M",X,B]);for(var Z=se.length===3&&se[0][0]==="M"&&se[1][0].toUpperCase()==="R"&&se[2][0].toUpperCase()==="Z",fe=void 0,_e=void 0,je=ie,Me=se.length;je<Me;je++){if(U.push(fe=[]),(ee=(_e=se[je])[0])!==ee.toUpperCase())switch(fe[0]=ee.toUpperCase(),fe[0]){case"A":fe[1]=_e[1],fe[2]=_e[2],fe[3]=_e[3],fe[4]=_e[4],fe[5]=_e[5],fe[6]=+_e[6]+X,fe[7]=+_e[7]+B;break;case"V":fe[1]=+_e[1]+B;break;case"H":fe[1]=+_e[1]+X;break;case"R":for(var Ae=2,Le=(te=[X,B].concat(_e.slice(1))).length;Ae<Le;Ae++)te[Ae]=+te[Ae]+X,te[++Ae]=+te[Ae]+B;U.pop(),U=U.concat(O(te,Z));break;case"O":U.pop(),(te=S(X,B,_e[1],_e[2])).push(te[0]),U=U.concat(te);break;case"U":U.pop(),U=U.concat(S(X,B,_e[1],_e[2],_e[3])),fe=["U"].concat(U[U.length-1].slice(-2));break;case"M":J=+_e[1]+X,ne=+_e[2]+B;break;default:for(Ae=1,Le=_e.length;Ae<Le;Ae++)fe[Ae]=+_e[Ae]+(Ae%2?X:B)}else if(ee==="R")te=[X,B].concat(_e.slice(1)),U.pop(),U=U.concat(O(te,Z)),fe=["R"].concat(_e.slice(-2));else if(ee==="O")U.pop(),(te=S(X,B,_e[1],_e[2])).push(te[0]),U=U.concat(te);else if(ee==="U")U.pop(),U=U.concat(S(X,B,_e[1],_e[2],_e[3])),fe=["U"].concat(U[U.length-1].slice(-2));else for(var Se=0,Re=_e.length;Se<Re;Se++)fe[Se]=_e[Se];if((ee=ee.toUpperCase())!=="O")switch(fe[0]){case"Z":X=+J,B=+ne;break;case"H":X=fe[1];break;case"V":B=fe[1];break;case"M":J=fe[fe.length-2],ne=fe[fe.length-1];break;default:X=fe[fe.length-2],B=fe[fe.length-1]}}return U},h=function(se,ee,te,U){return[se,ee,te,U,te,U]},y=function(se,ee,te,U,X,B){return[1/3*se+2/3*te,1/3*ee+2/3*U,1/3*X+2/3*te,1/3*B+2/3*U,X,B]},E=function se(ee,te,U,X,B,J,ne,ie,Z,fe){U===X&&(U+=1);var _e,je,Me,Ae,Le,Se=120*Math.PI/180,Re=Math.PI/180*(+B||0),Ke=[],Je=function(Ir,On,In){return{x:Ir*Math.cos(In)-On*Math.sin(In),y:Ir*Math.sin(In)+On*Math.cos(In)}};if(fe)je=fe[0],Me=fe[1],Ae=fe[2],Le=fe[3];else{ee=(_e=Je(ee,te,-Re)).x,te=_e.y,ie=(_e=Je(ie,Z,-Re)).x,Z=_e.y,ee===ie&&te===Z&&(ie+=1,Z+=1);var nt=(ee-ie)/2,dt=(te-Z)/2,kt=nt*nt/(U*U)+dt*dt/(X*X);kt>1&&(U*=kt=Math.sqrt(kt),X*=kt);var At=U*U,It=X*X,Kt=(J===ne?-1:1)*Math.sqrt(Math.abs((At*It-At*dt*dt-It*nt*nt)/(At*dt*dt+It*nt*nt)));Ae=Kt*U*dt/X+(ee+ie)/2,Le=Kt*-X*nt/U+(te+Z)/2,je=Math.asin(((te-Le)/X).toFixed(9)),Me=Math.asin(((Z-Le)/X).toFixed(9)),je=ee<Ae?Math.PI-je:je,Me=ie<Ae?Math.PI-Me:Me,je<0&&(je=2*Math.PI+je),Me<0&&(Me=2*Math.PI+Me),ne&&je>Me&&(je-=2*Math.PI),!ne&&Me>je&&(Me-=2*Math.PI)}var Qt=Me-je;if(Math.abs(Qt)>Se){var tr=Me,nr=ie,Mr=Z;Me=je+Se*(ne&&Me>je?1:-1),Ke=se(ie=Ae+U*Math.cos(Me),Z=Le+X*Math.sin(Me),U,X,B,0,ne,nr,Mr,[Me,tr,Ae,Le])}Qt=Me-je;var ar=Math.cos(je),yr=Math.sin(je),mr=Math.cos(Me),Rr=Math.sin(Me),pr=Math.tan(Qt/4),xr=4/3*U*pr,dr=4/3*X*pr,Gr=[ee,te],Lr=[ee+xr*yr,te-dr*ar],pn=[ie+xr*Rr,Z-dr*mr],Ur=[ie,Z];if(Lr[0]=2*Gr[0]-Lr[0],Lr[1]=2*Gr[1]-Lr[1],fe)return[Lr,pn,Ur].concat(Ke);for(var Nr=[],Dr=0,rn=(Ke=[Lr,pn,Ur].concat(Ke).join().split(",")).length;Dr<rn;Dr++)Nr[Dr]=Dr%2?Je(Ke[Dr-1],Ke[Dr],Re).y:Je(Ke[Dr],Ke[Dr+1],Re).x;return Nr},m=function(se,ee){var te,U=g(se),X=ee&&g(ee),B={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},J={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ne=[],ie=[],Z="",fe="",_e=function(Je,nt,dt){var kt,At;if(!Je)return["C",nt.x,nt.y,nt.x,nt.y,nt.x,nt.y];switch(!(Je[0]in{T:1,Q:1})&&(nt.qx=nt.qy=null),Je[0]){case"M":nt.X=Je[1],nt.Y=Je[2];break;case"A":Je=["C"].concat(E.apply(0,[nt.x,nt.y].concat(Je.slice(1))));break;case"S":dt==="C"||dt==="S"?(kt=2*nt.x-nt.bx,At=2*nt.y-nt.by):(kt=nt.x,At=nt.y),Je=["C",kt,At].concat(Je.slice(1));break;case"T":dt==="Q"||dt==="T"?(nt.qx=2*nt.x-nt.qx,nt.qy=2*nt.y-nt.qy):(nt.qx=nt.x,nt.qy=nt.y),Je=["C"].concat(y(nt.x,nt.y,nt.qx,nt.qy,Je[1],Je[2]));break;case"Q":nt.qx=Je[1],nt.qy=Je[2],Je=["C"].concat(y(nt.x,nt.y,Je[1],Je[2],Je[3],Je[4]));break;case"L":Je=["C"].concat(h(nt.x,nt.y,Je[1],Je[2]));break;case"H":Je=["C"].concat(h(nt.x,nt.y,Je[1],nt.y));break;case"V":Je=["C"].concat(h(nt.x,nt.y,nt.x,Je[1]));break;case"Z":Je=["C"].concat(h(nt.x,nt.y,nt.X,nt.Y))}return Je},je=function(Je,nt){if(Je[nt].length>7){Je[nt].shift();for(var dt=Je[nt];dt.length;)ne[nt]="A",X&&(ie[nt]="A"),Je.splice(nt++,0,["C"].concat(dt.splice(0,6)));Je.splice(nt,1),te=Math.max(U.length,X&&X.length||0)}},Me=function(Je,nt,dt,kt,At){Je&&nt&&Je[At][0]==="M"&&nt[At][0]!=="M"&&(nt.splice(At,0,["M",kt.x,kt.y]),dt.bx=0,dt.by=0,dt.x=Je[At][1],dt.y=Je[At][2],te=Math.max(U.length,X&&X.length||0))};te=Math.max(U.length,X&&X.length||0);for(var Ae=0;Ae<te;Ae++){U[Ae]&&(Z=U[Ae][0]),Z!=="C"&&(ne[Ae]=Z,Ae&&(fe=ne[Ae-1])),U[Ae]=_e(U[Ae],B,fe),ne[Ae]!=="A"&&Z==="C"&&(ne[Ae]="C"),je(U,Ae),X&&(X[Ae]&&(Z=X[Ae][0]),Z!=="C"&&(ie[Ae]=Z,Ae&&(fe=ie[Ae-1])),X[Ae]=_e(X[Ae],J,fe),ie[Ae]!=="A"&&Z==="C"&&(ie[Ae]="C"),je(X,Ae)),Me(U,X,B,J,Ae),Me(X,U,J,B,Ae);var Le=U[Ae],Se=X&&X[Ae],Re=Le.length,Ke=X&&Se.length;B.x=Le[Re-2],B.y=Le[Re-1],B.bx=parseFloat(Le[Re-4])||B.x,B.by=parseFloat(Le[Re-3])||B.y,J.bx=X&&(parseFloat(Se[Ke-4])||J.x),J.by=X&&(parseFloat(Se[Ke-3])||J.y),J.x=X&&Se[Ke-2],J.y=X&&Se[Ke-1]}return X?[U,X]:U},p=/,?([a-z]),?/gi,A=function(se){return se.join(",").replace(p,"$1")},C=function(se,ee,te,U,X){return se*(se*(-3*ee+9*te-9*U+3*X)+6*ee-12*te+6*U)-3*ee+3*te},N=function(se,ee,te,U,X,B,J,ne,ie){ie===null&&(ie=1);for(var Z=(ie=ie>1?1:ie<0?0:ie)/2,fe=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_e=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],je=0,Me=0;Me<12;Me++){var Ae=Z*fe[Me]+Z,Le=C(Ae,se,te,X,J),Se=C(Ae,ee,U,B,ne),Re=Le*Le+Se*Se;je+=_e[Me]*Math.sqrt(Re)}return Z*je},P=function(se,ee,te,U,X,B,J,ne){for(var ie,Z,fe,_e,je=[],Me=[[],[]],Ae=0;Ae<2;++Ae)if(Ae===0?(Z=6*se-12*te+6*X,ie=-3*se+9*te-9*X+3*J,fe=3*te-3*se):(Z=6*ee-12*U+6*B,ie=-3*ee+9*U-9*B+3*ne,fe=3*U-3*ee),Math.abs(ie)<1e-12){if(Math.abs(Z)<1e-12)continue;(_e=-fe/Z)>0&&_e<1&&je.push(_e)}else{var Le=Z*Z-4*fe*ie,Se=Math.sqrt(Le);if(!(Le<0)){var Re=(-Z+Se)/(2*ie);Re>0&&Re<1&&je.push(Re);var Ke=(-Z-Se)/(2*ie);Ke>0&&Ke<1&&je.push(Ke)}}for(var Je,nt=je.length,dt=nt;nt--;)Je=1-(_e=je[nt]),Me[0][nt]=Je*Je*Je*se+3*Je*Je*_e*te+3*Je*_e*_e*X+_e*_e*_e*J,Me[1][nt]=Je*Je*Je*ee+3*Je*Je*_e*U+3*Je*_e*_e*B+_e*_e*_e*ne;return Me[0][dt]=se,Me[1][dt]=ee,Me[0][dt+1]=J,Me[1][dt+1]=ne,Me[0].length=Me[1].length=dt+2,{min:{x:Math.min.apply(0,Me[0]),y:Math.min.apply(0,Me[1])},max:{x:Math.max.apply(0,Me[0]),y:Math.max.apply(0,Me[1])}}},L=function(se,ee,te,U,X,B,J,ne){if(!(Math.max(se,te)<Math.min(X,J)||Math.min(se,te)>Math.max(X,J)||Math.max(ee,U)<Math.min(B,ne)||Math.min(ee,U)>Math.max(B,ne))){var ie=(se-te)*(B-ne)-(ee-U)*(X-J);if(ie){var Z=((se*U-ee*te)*(X-J)-(se-te)*(X*ne-B*J))/ie,fe=((se*U-ee*te)*(B-ne)-(ee-U)*(X*ne-B*J))/ie,_e=+Z.toFixed(2),je=+fe.toFixed(2);if(!(_e<+Math.min(se,te).toFixed(2)||_e>+Math.max(se,te).toFixed(2)||_e<+Math.min(X,J).toFixed(2)||_e>+Math.max(X,J).toFixed(2)||je<+Math.min(ee,U).toFixed(2)||je>+Math.max(ee,U).toFixed(2)||je<+Math.min(B,ne).toFixed(2)||je>+Math.max(B,ne).toFixed(2)))return{x:Z,y:fe}}}},z=function(se,ee,te){return ee>=se.x&&ee<=se.x+se.width&&te>=se.y&&te<=se.y+se.height},H=function(se,ee,te,U,X){if(X)return[["M",+se+ +X,ee],["l",te-2*X,0],["a",X,X,0,0,1,X,X],["l",0,U-2*X],["a",X,X,0,0,1,-X,X],["l",2*X-te,0],["a",X,X,0,0,1,-X,-X],["l",0,2*X-U],["a",X,X,0,0,1,X,-X],["z"]];var B=[["M",se,ee],["l",te,0],["l",0,U],["l",-te,0],["z"]];return B.parsePathArray=A,B},re=function(se,ee,te,U){return se===null&&(se=ee=te=U=0),ee===null&&(ee=se.y,te=se.width,U=se.height,se=se.x),{x:se,y:ee,width:te,w:te,height:U,h:U,x2:se+te,y2:ee+U,cx:se+te/2,cy:ee+U/2,r1:Math.min(te,U)/2,r2:Math.max(te,U)/2,r0:Math.sqrt(te*te+U*U)/2,path:H(se,ee,te,U),vb:[se,ee,te,U].join(" ")}},ae=function(se,ee,te,U,X,B,J,ne){Object(f.isArray)(se)||(se=[se,ee,te,U,X,B,J,ne]);var ie=P.apply(null,se);return re(ie.min.x,ie.min.y,ie.max.x-ie.min.x,ie.max.y-ie.min.y)},ue=function(se,ee,te,U,X,B,J,ne,ie){var Z=1-ie,fe=Math.pow(Z,3),_e=Math.pow(Z,2),je=ie*ie,Me=je*ie,Ae=se+2*ie*(te-se)+je*(X-2*te+se),Le=ee+2*ie*(U-ee)+je*(B-2*U+ee),Se=te+2*ie*(X-te)+je*(J-2*X+te),Re=U+2*ie*(B-U)+je*(ne-2*B+U);return{x:fe*se+3*_e*ie*te+3*Z*ie*ie*X+Me*J,y:fe*ee+3*_e*ie*U+3*Z*ie*ie*B+Me*ne,m:{x:Ae,y:Le},n:{x:Se,y:Re},start:{x:Z*se+ie*te,y:Z*ee+ie*U},end:{x:Z*X+ie*J,y:Z*B+ie*ne},alpha:90-180*Math.atan2(Ae-Se,Le-Re)/Math.PI}},xe=function(se,ee,te){if(!function(dt,kt){return dt=re(dt),kt=re(kt),z(kt,dt.x,dt.y)||z(kt,dt.x2,dt.y)||z(kt,dt.x,dt.y2)||z(kt,dt.x2,dt.y2)||z(dt,kt.x,kt.y)||z(dt,kt.x2,kt.y)||z(dt,kt.x,kt.y2)||z(dt,kt.x2,kt.y2)||(dt.x<kt.x2&&dt.x>kt.x||kt.x<dt.x2&&kt.x>dt.x)&&(dt.y<kt.y2&&dt.y>kt.y||kt.y<dt.y2&&kt.y>dt.y)}(ae(se),ae(ee)))return te?0:[];for(var U=~~(N.apply(0,se)/8),X=~~(N.apply(0,ee)/8),B=[],J=[],ne={},ie=te?0:[],Z=0;Z<U+1;Z++){var fe=ue.apply(0,se.concat(Z/U));B.push({x:fe.x,y:fe.y,t:Z/U})}for(Z=0;Z<X+1;Z++)fe=ue.apply(0,ee.concat(Z/X)),J.push({x:fe.x,y:fe.y,t:Z/X});for(Z=0;Z<U;Z++)for(var _e=0;_e<X;_e++){var je=B[Z],Me=B[Z+1],Ae=J[_e],Le=J[_e+1],Se=Math.abs(Me.x-je.x)<.001?"y":"x",Re=Math.abs(Le.x-Ae.x)<.001?"y":"x",Ke=L(je.x,je.y,Me.x,Me.y,Ae.x,Ae.y,Le.x,Le.y);if(Ke){if(ne[Ke.x.toFixed(4)]===Ke.y.toFixed(4))continue;ne[Ke.x.toFixed(4)]=Ke.y.toFixed(4);var Je=je.t+Math.abs((Ke[Se]-je[Se])/(Me[Se]-je[Se]))*(Me.t-je.t),nt=Ae.t+Math.abs((Ke[Re]-Ae[Re])/(Le[Re]-Ae[Re]))*(Le.t-Ae.t);Je>=0&&Je<=1&&nt>=0&&nt<=1&&(te?ie+=1:ie.push({x:Ke.x,y:Ke.y,t1:Je,t2:nt}))}}return ie},ye=function(se,ee){return function(te,U,X){var B,J,ne,ie,Z,fe,_e,je,Me,Ae;te=m(te),U=m(U);for(var Le=X?0:[],Se=0,Re=te.length;Se<Re;Se++){var Ke=te[Se];if(Ke[0]==="M")B=Z=Ke[1],J=fe=Ke[2];else{Ke[0]==="C"?(Me=[B,J].concat(Ke.slice(1)),B=Me[6],J=Me[7]):(Me=[B,J,B,J,Z,fe,Z,fe],B=Z,J=fe);for(var Je=0,nt=U.length;Je<nt;Je++){var dt=U[Je];if(dt[0]==="M")ne=_e=dt[1],ie=je=dt[2];else{dt[0]==="C"?(Ae=[ne,ie].concat(dt.slice(1)),ne=Ae[6],ie=Ae[7]):(Ae=[ne,ie,ne,ie,_e,je,_e,je],ne=_e,ie=je);var kt=xe(Me,Ae,X);if(X)Le+=kt;else{for(var At=0,It=kt.length;At<It;At++)kt[At].segment1=Se,kt[At].segment2=Je,kt[At].bez1=Me,kt[At].bez2=Ae;Le=Le.concat(kt)}}}}}return Le}(se,ee)};function Y(se,ee){var te=[],U=[];return se.length&&function X(B,J){if(B.length===1)te.push(B[0]),U.push(B[0]);else{for(var ne=[],ie=0;ie<B.length-1;ie++)ie===0&&te.push(B[0]),ie===B.length-2&&U.push(B[ie+1]),ne[ie]=[(1-J)*B[ie][0]+J*B[ie+1][0],(1-J)*B[ie][1]+J*B[ie+1][1]];X(ne,J)}}(se,ee),{left:te,right:U.reverse()}}var Ce=function(se,ee,te){if(te===1)return[[].concat(se)];var U=[];if(ee[0]==="L"||ee[0]==="C"||ee[0]==="Q")U=U.concat(function(J,ne,ie){var Z=[[J[1],J[2]]];ie=ie||2;var fe=[];ne[0]==="A"?(Z.push(ne[6]),Z.push(ne[7])):ne[0]==="C"?(Z.push([ne[1],ne[2]]),Z.push([ne[3],ne[4]]),Z.push([ne[5],ne[6]])):ne[0]==="S"||ne[0]==="Q"?(Z.push([ne[1],ne[2]]),Z.push([ne[3],ne[4]])):Z.push([ne[1],ne[2]]);for(var _e=Z,je=1/ie,Me=0;Me<ie-1;Me++){var Ae=Y(_e,je/(1-je*Me));fe.push(Ae.left),_e=Ae.right}return fe.push(_e),fe.map(function(Le){var Se=[];return Le.length===4&&(Se.push("C"),Se=Se.concat(Le[2])),Le.length>=3&&(Le.length===3&&Se.push("Q"),Se=Se.concat(Le[1])),Le.length===2&&Se.push("L"),Se=Se.concat(Le[Le.length-1])})}(se,ee,te));else{var X=[].concat(se);X[0]==="M"&&(X[0]="L");for(var B=0;B<=te-1;B++)U.push(X)}return U},ge=function(se,ee){if(se.length===1)return se;var te=se.length-1,U=ee.length-1,X=te/U,B=[];if(se.length===1&&se[0][0]==="M"){for(var J=0;J<U-te;J++)se.push(se[0]);return se}for(J=0;J<U;J++){var ne=Math.floor(X*J);B[ne]=(B[ne]||0)+1}var ie=B.reduce(function(Z,fe,_e){return _e===te?Z.concat(se[te]):Z.concat(Ce(se[_e],se[_e+1],fe))},[]);return ie.unshift(se[0]),ee[U]!=="Z"&&ee[U]!=="z"||ie.push("Z"),ie},he=function(se,ee){if(se.length!==ee.length)return!1;var te=!0;return Object(f.each)(se,function(U,X){if(U!==ee[X])return te=!1,!1}),te};function Q(se,ee,te){var U=null,X=te;return ee<X&&(X=ee,U="add"),se<X&&(X=se,U="del"),{type:U,min:X}}var W=function(se,ee){var te=function(je,Me){var Ae,Le,Se=je.length,Re=Me.length,Ke=0;if(Se===0||Re===0)return null;for(var Je=[],nt=0;nt<=Se;nt++)Je[nt]=[],Je[nt][0]={min:nt};for(var dt=0;dt<=Re;dt++)Je[0][dt]={min:dt};for(nt=1;nt<=Se;nt++)for(Ae=je[nt-1],dt=1;dt<=Re;dt++){Le=Me[dt-1],Ke=he(Ae,Le)?0:1;var kt=Je[nt-1][dt].min+1,At=Je[nt][dt-1].min+1,It=Je[nt-1][dt-1].min+Ke;Je[nt][dt]=Q(kt,At,It)}return Je}(se,ee),U=se.length,X=ee.length,B=[],J=1,ne=1;if(te[U][X].min!==U){for(var ie=1;ie<=U;ie++){var Z=te[ie][ie].min;ne=ie;for(var fe=J;fe<=X;fe++)te[ie][fe].min<Z&&(Z=te[ie][fe].min,ne=fe);J=ne,te[ie][J].type&&B.push({index:ie-1,type:te[ie][J].type})}for(ie=B.length-1;ie>=0;ie--)J=B[ie].index,B[ie].type==="add"?se.splice(J,0,[].concat(se[J])):se.splice(J,1)}var _e=X-(U=se.length);if(U<X)for(ie=0;ie<_e;ie++)se[U-1][0]==="z"||se[U-1][0]==="Z"?se.splice(U-2,0,se[U-2]):se.push(se[U-1]),U+=1;return se};function le(se,ee,te){for(var U,X=[].concat(se),B=1/(te+1),J=Oe(ee)[0],ne=1;ne<=te;ne++)B*=ne,(U=Math.floor(se.length*B))===0?X.unshift([J[0]*B+se[U][0]*(1-B),J[1]*B+se[U][1]*(1-B)]):X.splice(U,0,[J[0]*B+se[U][0]*(1-B),J[1]*B+se[U][1]*(1-B)]);return X}function Oe(se){var ee=[];switch(se[0]){case"M":case"L":ee.push([se[1],se[2]]);break;case"A":ee.push([se[6],se[7]]);break;case"Q":ee.push([se[3],se[4]]),ee.push([se[1],se[2]]);break;case"T":ee.push([se[1],se[2]]);break;case"C":ee.push([se[5],se[6]]),ee.push([se[1],se[2]]),ee.push([se[3],se[4]]);break;case"S":ee.push([se[3],se[4]]),ee.push([se[1],se[2]]);break;case"H":case"V":ee.push([se[1],se[1]])}return ee}var Te=function(se,ee){if(se.length<=1)return se;for(var te,U=0;U<ee.length;U++)if(se[U][0]!==ee[U][0])switch(te=Oe(se[U]),ee[U][0]){case"M":se[U]=["M"].concat(te[0]);break;case"L":se[U]=["L"].concat(te[0]);break;case"A":se[U]=[].concat(ee[U]),se[U][6]=te[0][0],se[U][7]=te[0][1];break;case"Q":if(te.length<2){if(!(U>0)){se[U]=ee[U];break}te=le(te,se[U-1],1)}se[U]=["Q"].concat(te.reduce(function(X,B){return X.concat(B)},[]));break;case"T":se[U]=["T"].concat(te[0]);break;case"C":if(te.length<3){if(!(U>0)){se[U]=ee[U];break}te=le(te,se[U-1],2)}se[U]=["C"].concat(te.reduce(function(X,B){return X.concat(B)},[]));break;case"S":if(te.length<2){if(!(U>0)){se[U]=ee[U];break}te=le(te,se[U-1],1)}se[U]=["S"].concat(te.reduce(function(X,B){return X.concat(B)},[]));break;default:se[U]=ee[U]}return se}},function(R,b,o){var f=o(84),c=o(147);R.exports=function(M){return M!=null&&c(M.length)&&!f(M)}},function(R,b,o){function f(S){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}var c=o(363),M=o(373),_=o(65),x=o(31),O=o(380);R.exports=function(S){return typeof S=="function"?S:S==null?_:f(S)=="object"?x(S)?M(S[0],S[1]):c(S):O(S)}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TargetTypeEnum=b.BindingTypeEnum=b.BindingScopeEnum=void 0,b.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},b.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},b.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(R,b,o){"use strict";o.r(b),o.d(b,"Base",function(){return S}),o.d(b,"Circle",function(){return g}),o.d(b,"Ellipse",function(){return y}),o.d(b,"Image",function(){return m}),o.d(b,"Line",function(){return N}),o.d(b,"Marker",function(){return H}),o.d(b,"Path",function(){return W}),o.d(b,"Polygon",function(){return Oe}),o.d(b,"Polyline",function(){return Te}),o.d(b,"Rect",function(){return ee}),o.d(b,"Text",function(){return te});var f={};o.r(f),o.d(f,"Base",function(){return S}),o.d(f,"Circle",function(){return g}),o.d(f,"Ellipse",function(){return y}),o.d(f,"Image",function(){return m}),o.d(f,"Line",function(){return N}),o.d(f,"Marker",function(){return H}),o.d(f,"Path",function(){return W}),o.d(f,"Polygon",function(){return Oe}),o.d(f,"Polyline",function(){return Te}),o.d(f,"Rect",function(){return ee}),o.d(f,"Text",function(){return te});var c=o(1),M=o(21),_=o(15),x=o(30),O=o(75),S=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},X.prototype.getShapeBase=function(){return f},X.prototype.getGroupBase=function(){return O.a},X.prototype.onCanvasChange=function(B){Object(x.h)(this,B)},X.prototype.calculateBBox=function(){var B=this.get("type"),J=this.getHitLineWidth(),ne=Object(M.getBBoxMethod)(B)(this),ie=J/2,Z=ne.x-ie,fe=ne.y-ie,_e=ne.x+ne.width+ie,je=ne.y+ne.height+ie;return{x:Z,minX:Z,y:fe,minY:fe,width:ne.width+J,height:ne.height+J,maxX:_e,maxY:je}},X.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},X.prototype.isStroke=function(){return!!this.attrs.stroke},X.prototype._applyClip=function(B,J){J&&(B.save(),Object(x.a)(B,J),J.createPath(B),B.restore(),B.clip(),J._afterDraw())},X.prototype.draw=function(B,J){var ne=this.cfg.clipShape;if(J){if(this.cfg.refresh===!1)return void this.set("hasChanged",!1);var ie=this.getCanvasBBox();if(!Object(_.f)(J,ie))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}B.save(),Object(x.a)(B,this),this._applyClip(B,ne),this.drawPath(B),B.restore(),this._afterDraw()},X.prototype.getCanvasViewBox=function(){var B=this.cfg.canvas;return B?B.getViewRange():null},X.prototype.cacheCanvasBBox=function(){var B=this.getCanvasViewBox();if(B){var J=this.getCanvasBBox(),ne=Object(_.f)(J,B);this.set("isInView",ne),ne?this.set("cacheCanvasBBox",J):this.set("cacheCanvasBBox",null)}},X.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},X.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},X.prototype.drawPath=function(B){this.createPath(B),this.strokeAndFill(B),this.afterDrawPath(B)},X.prototype.fill=function(B){B.fill()},X.prototype.stroke=function(B){B.stroke()},X.prototype.strokeAndFill=function(B){var J=this.attrs,ne=J.lineWidth,ie=J.opacity,Z=J.strokeOpacity,fe=J.fillOpacity;this.isFill()&&(Object(_.i)(fe)||fe===1?this.fill(B):(B.globalAlpha=fe,this.fill(B),B.globalAlpha=ie)),this.isStroke()&&ne>0&&(Object(_.i)(Z)||Z===1||(B.globalAlpha=Z),this.stroke(B)),this.afterDrawPath(B)},X.prototype.createPath=function(B){},X.prototype.afterDrawPath=function(B){},X.prototype.isInShape=function(B,J){var ne=this.isStroke(),ie=this.isFill(),Z=this.getHitLineWidth();return this.isInStrokeOrPath(B,J,ne,ie,Z)},X.prototype.isInStrokeOrPath=function(B,J,ne,ie,Z){return!1},X.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var B=this.attrs;return B.lineWidth+B.lineAppendWidth},X}(M.AbstractShape),g=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{x:0,y:0,r:0})},X.prototype.isInStrokeOrPath=function(B,J,ne,ie,Z){var fe=this.attr(),_e=fe.x,je=fe.y,Me=fe.r,Ae=Z/2,Le=Object(_.b)(_e,je,B,J);return ie&&ne?Le<=Me+Ae:ie?Le<=Me:!!ne&&Le>=Me-Ae&&Le<=Me+Ae},X.prototype.createPath=function(B){var J=this.attr(),ne=J.x,ie=J.y,Z=J.r;B.beginPath(),B.arc(ne,ie,Z,0,2*Math.PI,!1),B.closePath()},X}(S);function h(U,X,B,J){return U/(B*B)+X/(J*J)}var y=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{x:0,y:0,rx:0,ry:0})},X.prototype.isInStrokeOrPath=function(B,J,ne,ie,Z){var fe=this.attr(),_e=Z/2,je=fe.x,Me=fe.y,Ae=fe.rx,Le=fe.ry,Se=(B-je)*(B-je),Re=(J-Me)*(J-Me);return ie&&ne?h(Se,Re,Ae+_e,Le+_e)<=1:ie?h(Se,Re,Ae,Le)<=1:!!ne&&h(Se,Re,Ae-_e,Le-_e)>=1&&h(Se,Re,Ae+_e,Le+_e)<=1},X.prototype.createPath=function(B){var J=this.attr(),ne=J.x,ie=J.y,Z=J.rx,fe=J.ry;if(B.beginPath(),B.ellipse)B.ellipse(ne,ie,Z,fe,0,0,2*Math.PI,!1);else{var _e=Z>fe?Z:fe,je=Z>fe?1:Z/fe,Me=Z>fe?fe/Z:1;B.save(),B.translate(ne,ie),B.scale(je,Me),B.arc(0,0,_e,0,2*Math.PI),B.restore(),B.closePath()}},X}(S);function E(U){return U instanceof HTMLElement&&Object(_.k)(U.nodeName)&&U.nodeName.toUpperCase()==="CANVAS"}var m=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{x:0,y:0,width:0,height:0})},X.prototype.initAttrs=function(B){this._setImage(B.img)},X.prototype.isStroke=function(){return!1},X.prototype.isOnlyHitBox=function(){return!0},X.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var B=this.get("canvas");B?B.draw():this.createPath(this.get("context"))}},X.prototype._setImage=function(B){var J=this,ne=this.attrs;if(Object(_.k)(B)){var ie=new Image;ie.onload=function(){if(J.destroyed)return!1;J.attr("img",ie),J.set("loading",!1),J._afterLoading();var Z=J.get("callback");Z&&Z.call(J)},ie.crossOrigin="Anonymous",ie.src=B,this.set("loading",!0)}else B instanceof Image?(ne.width||(ne.width=B.width),ne.height||(ne.height=B.height)):E(B)&&(ne.width||(ne.width=Number(B.getAttribute("width"))),ne.height||(ne.height,Number(B.getAttribute("height"))))},X.prototype.onAttrChange=function(B,J,ne){U.prototype.onAttrChange.call(this,B,J,ne),B==="img"&&this._setImage(J)},X.prototype.createPath=function(B){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",B);var J=this.attr(),ne=J.x,ie=J.y,Z=J.width,fe=J.height,_e=J.sx,je=J.sy,Me=J.swidth,Ae=J.sheight,Le=J.img;(Le instanceof Image||E(Le))&&(Object(_.i)(_e)||Object(_.i)(je)||Object(_.i)(Me)||Object(_.i)(Ae)?B.drawImage(Le,ne,ie,Z,fe):B.drawImage(Le,_e,je,Me,Ae,ne,ie,Z,fe))},X}(S),p=o(20);function A(U,X,B,J,ne,ie,Z){var fe=Math.min(U,B),_e=Math.max(U,B),je=Math.min(X,J),Me=Math.max(X,J),Ae=ne/2;return ie>=fe-Ae&&ie<=_e+Ae&&Z>=je-Ae&&Z<=Me+Ae&&p.c.pointToLine(U,X,B,J,ie,Z)<=ne/2}var C=o(33),N=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},X.prototype.initAttrs=function(B){this.setArrow()},X.prototype.onAttrChange=function(B,J,ne){U.prototype.onAttrChange.call(this,B,J,ne),this.setArrow()},X.prototype.setArrow=function(){var B=this.attr(),J=B.x1,ne=B.y1,ie=B.x2,Z=B.y2,fe=B.startArrow,_e=B.endArrow;fe&&C.b(this,B,ie,Z,J,ne),_e&&C.a(this,B,J,ne,ie,Z)},X.prototype.isInStrokeOrPath=function(B,J,ne,ie,Z){if(!ne||!Z)return!1;var fe=this.attr();return A(fe.x1,fe.y1,fe.x2,fe.y2,Z,B,J)},X.prototype.createPath=function(B){var J=this.attr(),ne=J.x1,ie=J.y1,Z=J.x2,fe=J.y2,_e=J.startArrow,je=J.endArrow,Me={dx:0,dy:0},Ae={dx:0,dy:0};_e&&_e.d&&(Me=C.c(ne,ie,Z,fe,J.startArrow.d)),je&&je.d&&(Ae=C.c(ne,ie,Z,fe,J.endArrow.d)),B.beginPath(),B.moveTo(ne+Me.dx,ie+Me.dy),B.lineTo(Z-Ae.dx,fe-Ae.dy)},X.prototype.afterDrawPath=function(B){var J=this.get("startArrowShape"),ne=this.get("endArrowShape");J&&J.draw(B),ne&&ne.draw(B)},X.prototype.getTotalLength=function(){var B=this.attr(),J=B.x1,ne=B.y1,ie=B.x2,Z=B.y2;return p.c.length(J,ne,ie,Z)},X.prototype.getPoint=function(B){var J=this.attr(),ne=J.x1,ie=J.y1,Z=J.x2,fe=J.y2;return p.c.pointAt(ne,ie,Z,fe,B)},X}(S),P=o(0),L=o(37),z={circle:function(U,X,B){return[["M",U-B,X],["A",B,B,0,1,0,U+B,X],["A",B,B,0,1,0,U-B,X]]},square:function(U,X,B){return[["M",U-B,X-B],["L",U+B,X-B],["L",U+B,X+B],["L",U-B,X+B],["Z"]]},diamond:function(U,X,B){return[["M",U-B,X],["L",U,X-B],["L",U+B,X],["L",U,X+B],["Z"]]},triangle:function(U,X,B){var J=B*Math.sin(.3333333333333333*Math.PI);return[["M",U-B,X+J],["L",U,X-J],["L",U+B,X+J],["Z"]]},"triangle-down":function(U,X,B){var J=B*Math.sin(.3333333333333333*Math.PI);return[["M",U-B,X-J],["L",U+B,X-J],["L",U,X+J],["Z"]]}},H=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.initAttrs=function(B){this._resetParamsCache()},X.prototype._resetParamsCache=function(){this.set("paramsCache",{})},X.prototype.onAttrChange=function(B,J,ne){U.prototype.onAttrChange.call(this,B,J,ne),["symbol","x","y","r","radius"].indexOf(B)!==-1&&this._resetParamsCache()},X.prototype.isOnlyHitBox=function(){return!0},X.prototype._getR=function(B){return Object(P.isNil)(B.r)?B.radius:B.r},X.prototype._getPath=function(){var B,J,ne=this.attr(),ie=ne.x,Z=ne.y,fe=ne.symbol||"circle",_e=this._getR(ne);if(Object(_.h)(fe))J=(B=fe)(ie,Z,_e),J=Object(L.c)(J);else{if(!(B=X.Symbols[fe]))return console.warn(fe+" marker is not supported."),null;J=B(ie,Z,_e)}return J},X.prototype.createPath=function(B){var J=this._getPath(),ne=this.get("paramsCache");Object(x.e)(this,B,{path:J},ne)},X.Symbols=z,X}(S);function re(U,X,B){var J=Object(M.getOffScreenContext)();return U.createPath(J),J.isPointInPath(X,B)}function ae(U){return Math.abs(U)<1e-6?0:U<0?-1:1}function ue(U,X,B){return(B[0]-U[0])*(X[1]-U[1])==(X[0]-U[0])*(B[1]-U[1])&&Math.min(U[0],X[0])<=B[0]&&B[0]<=Math.max(U[0],X[0])&&Math.min(U[1],X[1])<=B[1]&&B[1]<=Math.max(U[1],X[1])}function xe(U,X,B){var J=!1,ne=U.length;if(ne<=2)return!1;for(var ie=0;ie<ne;ie++){var Z=U[ie],fe=U[(ie+1)%ne];if(ue(Z,fe,[X,B]))return!0;ae(Z[1]-B)>0!=ae(fe[1]-B)>0&&ae(X-(B-Z[1])*(Z[0]-fe[0])/(Z[1]-fe[1])-Z[0])<0&&(J=!J)}return J}var ye=o(17),Y=o(39);function Ce(U,X,B,J,ne,ie,Z,fe){var _e=(Math.atan2(fe-X,Z-U)+2*Math.PI)%(2*Math.PI);if(_e<J||_e>ne)return!1;var je={x:U+B*Math.cos(_e),y:X+B*Math.sin(_e)};return Object(_.b)(je.x,je.y,Z,fe)<=ie/2}var ge=ye.a.transform,he=Object(c.__assign)({hasArc:function(U){for(var X=!1,B=U.length,J=0;J<B;J++){var ne=U[J][0];if(ne==="C"||ne==="A"||ne==="Q"){X=!0;break}}return X},extractPolygons:function(U){for(var X=U.length,B=[],J=[],ne=[],ie=0;ie<X;ie++){var Z=U[ie],fe=Z[0];fe==="M"?(ne.length&&(J.push(ne),ne=[]),ne.push([Z[1],Z[2]])):fe==="Z"?ne.length&&(B.push(ne),ne=[]):ne.push([Z[1],Z[2]])}return ne.length>0&&J.push(ne),{polygons:B,polylines:J}},isPointInStroke:function(U,X,B,J,ne){for(var ie=!1,Z=X/2,fe=0;fe<U.length;fe++){var _e=U[fe],je=_e.currentPoint,Me=_e.params,Ae=_e.prePoint,Le=_e.box;if(!Le||Object(_.e)(Le.x-Z,Le.y-Z,Le.width+X,Le.height+X,B,J)){switch(_e.command){case"L":case"Z":ie=A(Ae[0],Ae[1],je[0],je[1],X,B,J);break;case"Q":ie=p.e.pointDistance(Ae[0],Ae[1],Me[1],Me[2],Me[3],Me[4],B,J)<=X/2;break;case"C":ie=p.b.pointDistance(Ae[0],Ae[1],Me[1],Me[2],Me[3],Me[4],Me[5],Me[6],B,J,ne)<=X/2;break;case"A":var Se=_e.arcParams,Re=Se.cx,Ke=Se.cy,Je=Se.rx,nt=Se.ry,dt=Se.startAngle,kt=Se.endAngle,At=Se.xRotation,It=[B,J,1],Kt=Je>nt?Je:nt,Qt=ge(null,[["t",-Re,-Ke],["r",-At],["s",1/(Je>nt?1:Je/nt),1/(Je>nt?nt/Je:1)]]);Y.transformMat3(It,It,Qt),ie=Ce(0,0,Kt,dt,kt,X,It[0],It[1])}if(ie)break}}return ie}},M.PathUtil);function Q(U,X,B){for(var J=!1,ne=0;ne<U.length&&!(J=xe(U[ne],X,B));ne++);return J}var W=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{startArrow:!1,endArrow:!1})},X.prototype.initAttrs=function(B){this._setPathArr(B.path),this.setArrow()},X.prototype.onAttrChange=function(B,J,ne){U.prototype.onAttrChange.call(this,B,J,ne),B==="path"&&this._setPathArr(J),this.setArrow()},X.prototype._setPathArr=function(B){this.attrs.path=Object(L.c)(B);var J=he.hasArc(B);this.set("hasArc",J),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},X.prototype.getSegments=function(){var B=this.get("segements");return B||(B=Object(L.d)(this.attr("path")),this.set("segments",B)),B},X.prototype.setArrow=function(){var B=this.attr(),J=B.startArrow,ne=B.endArrow;if(J){var ie=this.getStartTangent();C.b(this,B,ie[0][0],ie[0][1],ie[1][0],ie[1][1])}ne&&(ie=this.getEndTangent(),C.a(this,B,ie[0][0],ie[0][1],ie[1][0],ie[1][1]))},X.prototype.isInStrokeOrPath=function(B,J,ne,ie,Z){var fe=this.getSegments(),_e=this.get("hasArc"),je=!1;if(ne){var Me=this.getTotalLength();je=he.isPointInStroke(fe,Z,B,J,Me)}if(!je&&ie)if(_e)je=re(this,B,J);else{var Ae=this.attr("path"),Le=he.extractPolygons(Ae);je=Q(Le.polygons,B,J)||Q(Le.polylines,B,J)}return je},X.prototype.createPath=function(B){var J=this.attr(),ne=this.get("paramsCache");Object(x.e)(this,B,J,ne)},X.prototype.afterDrawPath=function(B){var J=this.get("startArrowShape"),ne=this.get("endArrowShape");J&&J.draw(B),ne&&ne.draw(B)},X.prototype.getTotalLength=function(){var B=this.get("totalLength");return Object(P.isNil)(B)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):B},X.prototype.getPoint=function(B){var J,ne,ie=this.get("tCache");ie||(this._calculateCurve(),this._setTcache(),ie=this.get("tCache"));var Z=this.get("curve");if(!ie||ie.length===0)return Z?{x:Z[0][1],y:Z[0][2]}:null;Object(P.each)(ie,function(Me,Ae){B>=Me[0]&&B<=Me[1]&&(J=(B-Me[0])/(Me[1]-Me[0]),ne=Ae)});var fe=Z[ne];if(Object(P.isNil)(fe)||Object(P.isNil)(ne))return null;var _e=fe.length,je=Z[ne+1];return p.b.pointAt(fe[_e-2],fe[_e-1],je[1],je[2],je[3],je[4],je[5],je[6],J)},X.prototype._calculateCurve=function(){var B=this.attr().path;this.set("curve",he.pathToCurve(B))},X.prototype._setTcache=function(){var B,J,ne,ie,Z=0,fe=0,_e=[],je=this.get("curve");je&&(Object(P.each)(je,function(Me,Ae){ne=je[Ae+1],ie=Me.length,ne&&(Z+=p.b.length(Me[ie-2],Me[ie-1],ne[1],ne[2],ne[3],ne[4],ne[5],ne[6])||0)}),this.set("totalLength",Z),Z!==0?(Object(P.each)(je,function(Me,Ae){ne=je[Ae+1],ie=Me.length,ne&&((B=[])[0]=fe/Z,J=p.b.length(Me[ie-2],Me[ie-1],ne[1],ne[2],ne[3],ne[4],ne[5],ne[6]),fe+=J||0,B[1]=fe/Z,_e.push(B))}),this.set("tCache",_e)):this.set("tCache",[]))},X.prototype.getStartTangent=function(){var B,J=this.getSegments();if(J.length>1){var ne=J[0].currentPoint,ie=J[1].currentPoint,Z=J[1].startTangent;B=[],Z?(B.push([ne[0]-Z[0],ne[1]-Z[1]]),B.push([ne[0],ne[1]])):(B.push([ie[0],ie[1]]),B.push([ne[0],ne[1]]))}return B},X.prototype.getEndTangent=function(){var B,J=this.getSegments(),ne=J.length;if(ne>1){var ie=J[ne-2].currentPoint,Z=J[ne-1].currentPoint,fe=J[ne-1].endTangent;B=[],fe?(B.push([Z[0]-fe[0],Z[1]-fe[1]]),B.push([Z[0],Z[1]])):(B.push([ie[0],ie[1]]),B.push([Z[0],Z[1]]))}return B},X}(S);function le(U,X,B,J,ne){var ie=U.length;if(ie<2)return!1;for(var Z=0;Z<ie-1;Z++)if(A(U[Z][0],U[Z][1],U[Z+1][0],U[Z+1][1],X,B,J))return!0;if(ne){var fe=U[0],_e=U[ie-1];if(A(fe[0],fe[1],_e[0],_e[1],X,B,J))return!0}return!1}var Oe=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.isInStrokeOrPath=function(B,J,ne,ie,Z){var fe=this.attr().points,_e=!1;return ne&&(_e=le(fe,Z,B,J,!0)),!_e&&ie&&(_e=xe(fe,B,J)),_e},X.prototype.createPath=function(B){var J=this.attr().points;if(!(J.length<2)){B.beginPath();for(var ne=0;ne<J.length;ne++){var ie=J[ne];ne===0?B.moveTo(ie[0],ie[1]):B.lineTo(ie[0],ie[1])}B.closePath()}},X}(S),Te=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{startArrow:!1,endArrow:!1})},X.prototype.initAttrs=function(B){this.setArrow()},X.prototype.onAttrChange=function(B,J,ne){U.prototype.onAttrChange.call(this,B,J,ne),this.setArrow(),["points"].indexOf(B)!==-1&&this._resetCache()},X.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},X.prototype.setArrow=function(){var B=this.attr(),J=this.attrs,ne=J.points,ie=J.startArrow,Z=J.endArrow,fe=ne.length,_e=ne[0][0],je=ne[0][1],Me=ne[fe-1][0],Ae=ne[fe-1][1];ie&&C.b(this,B,ne[1][0],ne[1][1],_e,je),Z&&C.a(this,B,ne[fe-2][0],ne[fe-2][1],Me,Ae)},X.prototype.isFill=function(){return!1},X.prototype.isInStrokeOrPath=function(B,J,ne,ie,Z){return!(!ne||!Z)&&le(this.attr().points,Z,B,J,!1)},X.prototype.isStroke=function(){return!0},X.prototype.createPath=function(B){var J=this.attr(),ne=J.points,ie=J.startArrow,Z=J.endArrow,fe=ne.length;if(!(ne.length<2)){var _e,je=ne[0][0],Me=ne[0][1],Ae=ne[fe-1][0],Le=ne[fe-1][1];ie&&ie.d&&(je+=(_e=C.c(je,Me,ne[1][0],ne[1][1],ie.d)).dx,Me+=_e.dy),Z&&Z.d&&(Ae-=(_e=C.c(ne[fe-2][0],ne[fe-2][1],Ae,Le,Z.d)).dx,Le-=_e.dy),B.beginPath(),B.moveTo(je,Me);for(var Se=0;Se<fe-1;Se++){var Re=ne[Se];B.lineTo(Re[0],Re[1])}B.lineTo(Ae,Le)}},X.prototype.afterDrawPath=function(B){var J=this.get("startArrowShape"),ne=this.get("endArrowShape");J&&J.draw(B),ne&&ne.draw(B)},X.prototype.getTotalLength=function(){var B=this.attr().points,J=this.get("totalLength");return Object(P.isNil)(J)?(this.set("totalLength",p.d.length(B)),this.get("totalLength")):J},X.prototype.getPoint=function(B){var J,ne,ie=this.attr().points,Z=this.get("tCache");return Z||(this._setTcache(),Z=this.get("tCache")),Object(P.each)(Z,function(fe,_e){B>=fe[0]&&B<=fe[1]&&(J=(B-fe[0])/(fe[1]-fe[0]),ne=_e)}),p.c.pointAt(ie[ne][0],ie[ne][1],ie[ne+1][0],ie[ne+1][1],J)},X.prototype._setTcache=function(){var B=this.attr().points;if(B&&B.length!==0){var J=this.getTotalLength();if(!(J<=0)){var ne,ie,Z=0,fe=[];Object(P.each)(B,function(_e,je){B[je+1]&&((ne=[])[0]=Z/J,ie=p.c.length(_e[0],_e[1],B[je+1][0],B[je+1][1]),Z+=ie,ne[1]=Z/J,fe.push(ne))}),this.set("tCache",fe)}}},X.prototype.getStartTangent=function(){var B=this.attr().points,J=[];return J.push([B[1][0],B[1][1]]),J.push([B[0][0],B[0][1]]),J},X.prototype.getEndTangent=function(){var B=this.attr().points,J=B.length-1,ne=[];return ne.push([B[J-1][0],B[J-1][1]]),ne.push([B[J][0],B[J][1]]),ne},X}(S),se=o(139),ee=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{x:0,y:0,width:0,height:0,radius:0})},X.prototype.isInStrokeOrPath=function(B,J,ne,ie,Z){var fe=this.attr(),_e=fe.x,je=fe.y,Me=fe.width,Ae=fe.height,Le=fe.radius;if(Le){var Se=!1;return ne&&(Se=function(Ke,Je,nt,dt,kt,At,It,Kt){return A(Ke+kt,Je,Ke+nt-kt,Je,At,It,Kt)||A(Ke+nt,Je+kt,Ke+nt,Je+dt-kt,At,It,Kt)||A(Ke+nt-kt,Je+dt,Ke+kt,Je+dt,At,It,Kt)||A(Ke,Je+dt-kt,Ke,Je+kt,At,It,Kt)||Ce(Ke+nt-kt,Je+kt,kt,1.5*Math.PI,2*Math.PI,At,It,Kt)||Ce(Ke+nt-kt,Je+dt-kt,kt,0,.5*Math.PI,At,It,Kt)||Ce(Ke+kt,Je+dt-kt,kt,.5*Math.PI,Math.PI,At,It,Kt)||Ce(Ke+kt,Je+kt,kt,Math.PI,1.5*Math.PI,At,It,Kt)}(_e,je,Me,Ae,Le,Z,B,J)),!Se&&ie&&(Se=re(this,B,J)),Se}var Re=Z/2;return ie&&ne?Object(_.e)(_e-Re,je-Re,Me+Re,Ae+Re,B,J):ie?Object(_.e)(_e,je,Me,Ae,B,J):ne?function(Ke,Je,nt,dt,kt,At,It){var Kt=kt/2;return Object(_.e)(Ke-Kt,Je-Kt,nt,kt,At,It)||Object(_.e)(Ke+nt-Kt,Je-Kt,kt,dt,At,It)||Object(_.e)(Ke+Kt,Je+dt-Kt,nt,kt,At,It)||Object(_.e)(Ke-Kt,Je+Kt,kt,dt,At,It)}(_e,je,Me,Ae,Z,B,J):void 0},X.prototype.createPath=function(B){var J=this.attr(),ne=J.x,ie=J.y,Z=J.width,fe=J.height,_e=J.radius;if(B.beginPath(),_e===0)B.rect(ne,ie,Z,fe);else{var je=Object(se.a)(_e),Me=je[0],Ae=je[1],Le=je[2],Se=je[3];B.moveTo(ne+Me,ie),B.lineTo(ne+Z-Ae,ie),Ae!==0&&B.arc(ne+Z-Ae,ie+Ae,Ae,-Math.PI/2,0),B.lineTo(ne+Z,ie+fe-Le),Le!==0&&B.arc(ne+Z-Le,ie+fe-Le,Le,0,Math.PI/2),B.lineTo(ne+Se,ie+fe),Se!==0&&B.arc(ne+Se,ie+fe-Se,Se,Math.PI/2,Math.PI),B.lineTo(ne,ie+Me),Me!==0&&B.arc(ne+Me,ie+Me,Me,Math.PI,1.5*Math.PI),B.closePath()}},X}(S),te=function(U){function X(){return U!==null&&U.apply(this,arguments)||this}return Object(c.__extends)(X,U),X.prototype.getDefaultAttrs=function(){var B=U.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},B),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},X.prototype.isOnlyHitBox=function(){return!0},X.prototype.initAttrs=function(B){this._assembleFont(),B.text&&this._setText(B.text)},X.prototype._assembleFont=function(){var B=this.attrs;B.font=Object(M.assembleFont)(B)},X.prototype._setText=function(B){var J=null;Object(_.k)(B)&&B.indexOf(`
`)!==-1&&(J=B.split(`
`)),this.set("textArr",J)},X.prototype.onAttrChange=function(B,J,ne){U.prototype.onAttrChange.call(this,B,J,ne),B.startsWith("font")&&this._assembleFont(),B==="text"&&this._setText(J)},X.prototype._getSpaceingY=function(){var B=this.attrs,J=B.lineHeight,ne=1*B.fontSize;return J?J-ne:.14*ne},X.prototype._drawTextArr=function(B,J,ne){var ie,Z=this.attrs,fe=Z.textBaseline,_e=Z.x,je=Z.y,Me=1*Z.fontSize,Ae=this._getSpaceingY(),Le=Object(M.getTextHeight)(Z.text,Z.fontSize,Z.lineHeight);Object(_.c)(J,function(Se,Re){ie=je+Re*(Ae+Me)-Le+Me,fe==="middle"&&(ie+=Le-Me-(Le-Me)/2),fe==="top"&&(ie+=Le-Me),Object(_.i)(Se)||(ne?B.fillText(Se,_e,ie):B.strokeText(Se,_e,ie))})},X.prototype._drawText=function(B,J){var ne=this.attr(),ie=ne.x,Z=ne.y,fe=this.get("textArr");if(fe)this._drawTextArr(B,fe,J);else{var _e=ne.text;Object(_.i)(_e)||(J?B.fillText(_e,ie,Z):B.strokeText(_e,ie,Z))}},X.prototype.strokeAndFill=function(B){var J=this.attrs,ne=J.lineWidth,ie=J.opacity,Z=J.strokeOpacity,fe=J.fillOpacity;this.isStroke()&&ne>0&&(Object(_.i)(Z)||Z===1||(B.globalAlpha=ie),this.stroke(B)),this.isFill()&&(Object(_.i)(fe)||fe===1?this.fill(B):(B.globalAlpha=fe,this.fill(B),B.globalAlpha=ie)),this.afterDrawPath(B)},X.prototype.fill=function(B){this._drawText(B,!0)},X.prototype.stroke=function(B){this._drawText(B,!1)},X}(S)},function(R,b,o){"use strict";o.d(b,"b",function(){return f}),o.d(b,"a",function(){return y});var f,c=o(59),M=o.n(c),_=o(6),x=o.n(_),O=o(7),S=o.n(O),g=o(2),h=o(125);(function(E){E[E.OUTSIDE=4294967295]="OUTSIDE",E[E.INSIDE=0]="INSIDE",E[E.INDETERMINATE=2147483647]="INDETERMINATE"})(f||(f={}));var y=function(){function E(m){if(x()(this,E),this.planes=[],m)this.planes=m;else for(var p=0;p<6;p++)this.planes.push(new h.a)}return S()(E,[{key:"extractFromVPMatrix",value:function(m){var p=M()(m,16),A=p[0],C=p[1],N=p[2],P=p[3],L=p[4],z=p[5],H=p[6],re=p[7],ae=p[8],ue=p[9],xe=p[10],ye=p[11],Y=p[12],Ce=p[13],ge=p[14],he=p[15];g.e.set(this.planes[0].normal,P-A,re-L,ye-ae),this.planes[0].distance=-(he-Y),g.e.set(this.planes[1].normal,P+A,re+L,ye+ae),this.planes[1].distance=-(he+Y),g.e.set(this.planes[2].normal,P+C,re+z,ye+ue),this.planes[2].distance=-(he+Ce),g.e.set(this.planes[3].normal,P-C,re-z,ye-ue),this.planes[3].distance=-(he-Ce),g.e.set(this.planes[4].normal,P-N,re-H,ye-xe),this.planes[4].distance=-(he-ge),g.e.set(this.planes[5].normal,P+N,re+H,ye+xe),this.planes[5].distance=-(he+ge),this.planes.forEach(function(Q){Q.normalize(),Q.updatePNVertexFlag()})}}]),E}()},function(R,b,o){var f=o(179),c=o(149),M=o(52);R.exports=function(_){return M(_)?f(_):c(_)}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.tagProperty=b.tagParameter=b.decorate=void 0;var f=o(40),c=o(32);function M(O,S,g,h,y){var E={},m=typeof y=="number",p=y!==void 0&&m?y.toString():g;if(m&&g!==void 0)throw new Error(f.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(O,S)&&(E=Reflect.getMetadata(O,S));var A=E[p];if(Array.isArray(A))for(var C=0,N=A;C<N.length;C++){var P=N[C];if(P.key===h.key)throw new Error(f.DUPLICATED_METADATA+" "+P.key.toString())}else A=[];A.push(h),E[p]=A,Reflect.defineMetadata(O,E,S)}function _(O,S){Reflect.decorate(O,S)}function x(O,S){return function(g,h){S(g,h,O)}}b.tagParameter=function(O,S,g,h){M(c.TAGGED,O,S,h,g)},b.tagProperty=function(O,S,g){M(c.TAGGED_PROP,O.constructor,S,g)},b.decorate=function(O,S,g){typeof g=="number"?_([x(g,O)],S):typeof g=="string"?Reflect.decorate([O],S,g):_([O],S)}},function(R,b,o){var f=o(482),c=o(483),M=o(229),_=o(484);R.exports=function(x,O){return f(x)||c(x,O)||M(x,O)||_()},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";o(78),o(21);var f=o(266);o.d(b,"Canvas",function(){return f.a}),o(76)},function(R,b,o){var f=o(255),c=o(254),M=o(262),_=o(162),x=o(263),O=[0,0];R.exports.computeMiter=function(S,g,h,y,E){return f(S,h,y),M(S,S),c(g,-S[1],S[0]),c(O,-h[1],h[0]),E/x(g,O)},R.exports.normal=function(S,g){return c(S,-g[1],g[0]),S},R.exports.direction=function(S,g,h){return _(S,g,h),M(S,S),S}},function(R,b,o){var f=o(318),c=o(323);R.exports=function(M,_){var x=c(M,_);return f(x)?x:void 0}},function(R,b,o){var f=o(71),c=o(319),M=o(320),_=f?f.toStringTag:void 0;R.exports=function(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":_&&_ in Object(x)?c(x):M(x)}},function(R,b,o){var f=o(179),c=o(343),M=o(52);R.exports=function(_){return M(_)?f(_,!0):c(_)}},function(R,b){R.exports=function(o){return o}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.id=void 0;var f=0;b.id=function(){return f++}},function(R,b,o){"use strict";o.d(b,"b",function(){return M}),o.d(b,"c",function(){return _}),o.d(b,"a",function(){return x});var f=o(19),c=o(117);function M(O,S,g){var h=1;return Object(f.h)(O)&&(h=O.split(`
`).length),h>1?S*h+function(y,E){return E?E-y:.14*y}(S,g)*(h-1):S}function _(O,S){var g=Object(c.a)(),h=0;if(Object(f.e)(O)||O==="")return h;if(g.save(),g.font=S,Object(f.h)(O)&&O.includes(`
`)){var y=O.split(`
`);Object(f.a)(y,function(E){var m=g.measureText(E).width;h<m&&(h=m)})}else h=g.measureText(O).width;return g.restore(),h}function x(O){var S=O.fontSize,g=O.fontFamily,h=O.fontWeight;return[O.fontStyle,O.fontVariant,h,S+"px",g].join(" ").trim()}},function(R,b,o){"use strict";o.d(b,"a",function(){return Te});var f,c,M,_,x,O,S,g,h,y,E,m,p,A=o(9),C=o.n(A),N=o(14),P=o.n(N),L=o(10),z=o.n(L),H=o(6),re=o.n(H),ae=o(7),ue=o.n(ae),xe=o(11),ye=o.n(xe),Y=(o(29),o(5)),Ce=o(13),ge=o(140),he=o(50);function Q(se,ee){var te;if(typeof Symbol=="undefined"||se[Symbol.iterator]==null){if(Array.isArray(se)||(te=function(ie,Z){if(!!ie){if(typeof ie=="string")return W(ie,Z);var fe=Object.prototype.toString.call(ie).slice(8,-1);if(fe==="Object"&&ie.constructor&&(fe=ie.constructor.name),fe==="Map"||fe==="Set")return Array.from(ie);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return W(ie,Z)}}(se))||ee&&se&&typeof se.length=="number"){te&&(se=te);var U=0,X=function(){};return{s:X,n:function(){return U>=se.length?{done:!0}:{done:!1,value:se[U++]}},e:function(ie){throw ie},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B,J=!0,ne=!1;return{s:function(){te=se[Symbol.iterator]()},n:function(){var ie=te.next();return J=ie.done,ie},e:function(ie){ne=!0,B=ie},f:function(){try{J||te.return==null||te.return()}finally{if(ne)throw B}}}}function W(se,ee){(ee==null||ee>se.length)&&(ee=se.length);for(var te=0,U=new Array(ee);te<ee;te++)U[te]=se[te];return U}var le=1,Oe=2,Te=(f=Object(Y.injectable)(),c=Object(Y.inject)(Ce.a.RenderEngine),M=Object(Y.inject)(Ce.a.ResourcePool),_=Object(Y.inject)(Ce.a.RenderPassFactory),x=Object(Y.inject)(Ce.a.MeshComponentManager),f((p=m=function(){function se(){var ee=this;re()(this,se),z()(this,"engine",g,this),z()(this,"resourcePool",h,this),z()(this,"renderPassFactory",y,this),z()(this,"mesh",E,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(te,U,X){var B=te.createRenderTarget(U,"picking fbo",{width:1,height:1});X.data={output:U.write(te,B)},U.hasSideEffect=!0},this.execute=function(){var te=P()(C.a.mark(function U(X,B,J){var ne,ie,Z;return C.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(ee.views=J,!ee.alreadyInRendering){fe.next=3;break}return fe.abrupt("return");case 3:ne=Q(J);try{for(Z=function(){var _e=ie.value,je=_e.getViewport(),Me=je.width,Ae=je.height;ee.alreadyInRendering=!0;var Le=X.getResourceNode(B.data.output);ee.pickingFBO=ee.resourcePool.getOrCreateResource(Le.resource),ee.pickingFBO.resize({width:Me,height:Ae}),ee.engine.useFramebuffer(ee.pickingFBO,function(){ee.engine.clear({framebuffer:ee.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Se,Re=ee.renderPassFactory(he.a.IDENTIFIER),Ke=[],Je=Q(_e.getScene().getEntities());try{for(Je.s();!(Se=Je.n()).done;){var nt=Se.value,dt=ee.mesh.getComponentByEntity(nt);dt.material.setUniform("u_PickingStage",le),Ke.push(dt)}}catch(kt){Je.e(kt)}finally{Je.f()}Re.renderView(_e),Ke.forEach(function(kt){kt.material.setUniform("u_PickingStage",Oe)}),ee.alreadyInRendering=!1})},ne.s();!(ie=ne.n()).done;)Z()}catch(_e){ne.e(_e)}finally{ne.f()}case 5:case"end":return fe.stop()}},U)}));return function(U,X,B){return te.apply(this,arguments)}}(),this.pick=function(te,U){var X,B,J=te.x,ne=te.y,ie=ee.engine,Z=ie.readPixels,fe=ie.useFramebuffer,_e=U.getViewport(),je=_e.width,Me=_e.height,Ae=J*window.devicePixelRatio,Le=ne*window.devicePixelRatio;if(!(Ae>je||Ae<0||Le>Me||Le<0))return fe(ee.pickingFBO,function(){(X=Z({x:Math.round(Ae),y:Math.round(Me-(ne+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:ee.pickingFBO}))[0]===0&&X[1]===0&&X[2]===0||(B=Object(ge.a)(X),ee.highlightEnabled&&ee.highlightPickedFeature(X,U))}),B}}return ue()(se,[{key:"enableHighlight",value:function(ee){this.highlightEnabled=ee}},{key:"setHighlightColor",value:function(ee){this.highlightColor=ee}},{key:"highlightPickedFeature",value:function(ee,te){if(ee){var U,X=Q(te.getScene().getEntities());try{for(X.s();!(U=X.n()).done;){var B=U.value,J=this.mesh.getComponentByEntity(B).material;J.setUniform("u_PickingStage",Oe),J.setUniform("u_PickingColor",[ee[0],ee[1],ee[2]]),J.setUniform("u_HighlightColor",this.highlightColor)}}catch(ne){X.e(ne)}finally{X.f()}}}}]),se}(),m.IDENTIFIER="PixelPicking Pass",S=p,g=ye()(S.prototype,"engine",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=ye()(S.prototype,"resourcePool",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=ye()(S.prototype,"renderPassFactory",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=ye()(S.prototype,"mesh",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=S))||O)},function(R,b,o){"use strict";o.d(b,"a",function(){return M}),o.d(b,"b",function(){return _});var f=o(34),c=o(26);function M(x,O){O.forEach(function(S){S.draw(x)})}function _(x,O){var S=x.get("canvas");if(S&&S.get("autoDraw")){var g=S.get("context"),h=x.getParent(),y=h?h.getChildren():[S],E=x.get("el");if(O==="remove")if(x.get("isClipShape")){var m=E&&E.parentNode,p=m&&m.parentNode;m&&p&&p.removeChild(m)}else E&&E.parentNode&&E.parentNode.removeChild(E);else if(O==="show")E.setAttribute("visibility","visible");else if(O==="hide")E.setAttribute("visibility","hidden");else if(O==="zIndex")Object(c.c)(E,y.indexOf(x));else if(O==="sort"){var A=x.get("children");A&&A.length&&Object(c.d)(x,function(C,N){return A.indexOf(C)-A.indexOf(N)?1:0})}else O==="clear"?E&&(E.innerHTML=""):O==="matrix"?Object(f.c)(x):O==="clip"?Object(f.a)(x,g):O==="attr"||O==="add"&&x.draw(g)}}},function(R,b){R.exports=function(o,f){return o===f||o!=o&&f!=f}},function(R,b,o){var f=o(47).Symbol;R.exports=f},function(R,b,o){(function(f){function c(h){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(h)}var M=o(47),_=o(339),x=c(b)=="object"&&b&&!b.nodeType&&b,O=x&&c(f)=="object"&&f&&!f.nodeType&&f,S=O&&O.exports===x?M.Buffer:void 0,g=(S?S.isBuffer:void 0)||_;f.exports=g}).call(this,o(87)(R))},function(R,b,o){var f=o(348),c=o(144),M=o(349),_=o(188),x=o(350),O=o(63),S=o(177),g=S(f),h=S(c),y=S(M),E=S(_),m=S(x),p=O;(f&&p(new f(new ArrayBuffer(1)))!="[object DataView]"||c&&p(new c)!="[object Map]"||M&&p(M.resolve())!="[object Promise]"||_&&p(new _)!="[object Set]"||x&&p(new x)!="[object WeakMap]")&&(p=function(A){var C=O(A),N=C=="[object Object]"?A.constructor:void 0,P=N?S(N):"";if(P)switch(P){case g:return"[object DataView]";case h:return"[object Map]";case y:return"[object Promise]";case E:return"[object Set]";case m:return"[object WeakMap]"}return C}),R.exports=p},function(R,b,o){function f(_){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}var c=o(63),M=o(49);R.exports=function(_){return f(_)=="symbol"||M(_)&&c(_)=="[object Symbol]"}},function(R,b,o){"use strict";var f=o(1),c=o(21),M=o(55),_=o(30),x=o(0),O=o(15),S=function(g){function h(){return g!==null&&g.apply(this,arguments)||this}return Object(f.__extends)(h,g),h.prototype.onCanvasChange=function(y){Object(_.h)(this,y)},h.prototype.getShapeBase=function(){return M},h.prototype.getGroupBase=function(){return h},h.prototype._applyClip=function(y,E){E&&(y.save(),Object(_.a)(y,E),E.createPath(y),y.restore(),y.clip(),E._afterDraw())},h.prototype.cacheCanvasBBox=function(){var y=this.cfg.children,E=[],m=[];Object(x.each)(y,function(H){var re=H.cfg.cacheCanvasBBox;re&&H.cfg.isInView&&(E.push(re.minX,re.maxX),m.push(re.minY,re.maxY))});var p=null;if(E.length){var A=Object(x.min)(E),C=Object(x.max)(E),N=Object(x.min)(m),P=Object(x.max)(m);p={minX:A,minY:N,x:A,y:N,maxX:C,maxY:P,width:C-A,height:P-N};var L=this.cfg.canvas;if(L){var z=L.getViewRange();this.set("isInView",Object(O.f)(p,z))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",p)},h.prototype.draw=function(y,E){var m=this.cfg.children,p=!E||this.cfg.refresh;m.length&&p&&(y.save(),Object(_.a)(y,this),this._applyClip(y,this.getClip()),Object(_.d)(y,m,E),y.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},h.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},h}(c.AbstractGroup);b.a=S},function(R,b,o){"use strict";var f=o(1),c=o(21),M=o(0),_=o(78),x=o(69),O=o(34),S=o(16),g=o(26),h=function(y){function E(){return y!==null&&y.apply(this,arguments)||this}return Object(f.__extends)(E,y),E.prototype.isEntityGroup=function(){return!0},E.prototype.createDom=function(){var m=Object(g.b)("g");this.set("el",m);var p=this.getParent();if(p){var A=p.get("el");A||(A=p.createDom(),p.set("el",A)),A.appendChild(m)}return m},E.prototype.afterAttrsChange=function(m){y.prototype.afterAttrsChange.call(this,m);var p=this.get("canvas");if(p&&p.get("autoDraw")){var A=p.get("context");this.createPath(A,m)}},E.prototype.onCanvasChange=function(m){Object(x.b)(this,m)},E.prototype.getShapeBase=function(){return _},E.prototype.getGroupBase=function(){return E},E.prototype.draw=function(m){var p=this.getChildren(),A=this.get("el");this.get("destroyed")?A&&A.parentNode.removeChild(A):(A||this.createDom(),Object(O.a)(this,m),this.createPath(m),p.length&&Object(x.a)(m,p))},E.prototype.createPath=function(m,p){var A=this.attr(),C=this.get("el");Object(M.each)(p||A,function(N,P){S.b[P]&&C.setAttribute(S.b[P],N)}),Object(O.c)(this)},E}(c.AbstractGroup);b.a=h},function(R,b,o){"use strict";o.d(b,"a",function(){return O});var f=o(6),c=o.n(f),M=o(7),_=o.n(M),x=o(2),O=function(){function S(g,h){c()(this,S),this.center=void 0,this.halfExtents=void 0,this.min=x.e.create(),this.max=x.e.create(),this.update(g,h)}return _()(S,[{key:"update",value:function(g,h){this.center=g||x.e.create(),this.halfExtents=h||x.e.fromValues(.5,.5,.5),this.min=x.e.sub(this.min,this.center,this.halfExtents),this.max=x.e.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(g,h){x.e.add(this.center,h,g),x.e.scale(this.center,this.center,.5),x.e.sub(this.halfExtents,h,g),x.e.scale(this.halfExtents,this.halfExtents,.5),x.e.copy(this.min,g),x.e.copy(this.max,h)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(g){var h=this.center,y=h[0],E=h[1],m=h[2],p=this.halfExtents,A=p[0],C=p[1],N=p[2],P=y-A,L=y+A,z=E-C,H=E+C,re=m-N,ae=m+N,ue=g.center,xe=ue[0],ye=ue[1],Y=ue[2],Ce=g.halfExtents,ge=Ce[0],he=Ce[1],Q=Ce[2],W=xe-ge,le=xe+ge,Oe=ye-he,Te=ye+he,se=Y-Q,ee=Y+Q;W<P&&(P=W),le>L&&(L=le),Oe<z&&(z=Oe),Te>H&&(H=Te),se<re&&(re=se),ee>ae&&(ae=ee),h[0]=.5*(P+L),h[1]=.5*(z+H),h[2]=.5*(re+ae),p[0]=.5*(L-P),p[1]=.5*(H-z),p[2]=.5*(ae-re),this.min[0]=P,this.min[1]=z,this.min[2]=re,this.max[0]=L,this.max[1]=H,this.max[2]=ae}},{key:"intersects",value:function(g){var h=this.getMax(),y=this.getMin(),E=g.getMax(),m=g.getMin();return y[0]<=E[0]&&h[0]>=m[0]&&y[1]<=E[1]&&h[1]>=m[1]&&y[2]<=E[2]&&h[2]>=m[2]}},{key:"containsPoint",value:function(g){var h=this.getMin(),y=this.getMax();return!(g[0]<h[0]||g[0]>y[0]||g[1]<h[1]||g[1]>y[1]||g[2]<h[2]||g[2]>y[2])}},{key:"getNegativeFarPoint",value:function(g){return g.pnVertexFlag===273?x.e.copy(x.e.create(),this.min):g.pnVertexFlag===272?x.e.fromValues(this.min[0],this.min[1],this.max[2]):g.pnVertexFlag===257?x.e.fromValues(this.min[0],this.max[1],this.min[2]):g.pnVertexFlag===256?x.e.fromValues(this.min[0],this.max[1],this.max[2]):g.pnVertexFlag===17?x.e.fromValues(this.max[0],this.min[1],this.min[2]):g.pnVertexFlag===16?x.e.fromValues(this.max[0],this.min[1],this.max[2]):g.pnVertexFlag===1?x.e.fromValues(this.max[0],this.max[1],this.min[2]):x.e.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(g){return g.pnVertexFlag===273?x.e.copy(x.e.create(),this.max):g.pnVertexFlag===272?x.e.fromValues(this.max[0],this.max[1],this.min[2]):g.pnVertexFlag===257?x.e.fromValues(this.max[0],this.min[1],this.max[2]):g.pnVertexFlag===256?x.e.fromValues(this.max[0],this.min[1],this.min[2]):g.pnVertexFlag===17?x.e.fromValues(this.min[0],this.max[1],this.max[2]):g.pnVertexFlag===16?x.e.fromValues(this.min[0],this.max[1],this.min[2]):g.pnVertexFlag===1?x.e.fromValues(this.min[0],this.min[1],this.max[2]):x.e.fromValues(this.min[0],this.min[1],this.min[2])}}]),S}()},function(R,b,o){"use strict";o.r(b),o.d(b,"Base",function(){return h}),o.d(b,"Circle",function(){return E}),o.d(b,"Dom",function(){return m}),o.d(b,"Ellipse",function(){return p}),o.d(b,"Image",function(){return A}),o.d(b,"Line",function(){return N}),o.d(b,"Marker",function(){return z}),o.d(b,"Path",function(){return H}),o.d(b,"Polygon",function(){return re}),o.d(b,"Polyline",function(){return ae}),o.d(b,"Rect",function(){return ue}),o.d(b,"Text",function(){return ge});var f={};o.r(f),o.d(f,"Base",function(){return h}),o.d(f,"Circle",function(){return E}),o.d(f,"Dom",function(){return m}),o.d(f,"Ellipse",function(){return p}),o.d(f,"Image",function(){return A}),o.d(f,"Line",function(){return N}),o.d(f,"Marker",function(){return z}),o.d(f,"Path",function(){return H}),o.d(f,"Polygon",function(){return re}),o.d(f,"Polyline",function(){return ae}),o.d(f,"Rect",function(){return ue}),o.d(f,"Text",function(){return ge});var c=o(1),M=o(21),_=o(34),x=o(26),O=o(69),S=o(16),g=o(76),h=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="svg",W.canFill=!1,W.canStroke=!1,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},Q.prototype.afterAttrsChange=function(W){he.prototype.afterAttrsChange.call(this,W);var le=this.get("canvas");if(le&&le.get("autoDraw")){var Oe=le.get("context");this.draw(Oe,W)}},Q.prototype.getShapeBase=function(){return f},Q.prototype.getGroupBase=function(){return g.a},Q.prototype.onCanvasChange=function(W){Object(O.b)(this,W)},Q.prototype.calculateBBox=function(){var W=this.get("el"),le=null;if(W)le=W.getBBox();else{var Oe=Object(M.getBBoxMethod)(this.get("type"));Oe&&(le=Oe(this))}if(le){var Te=le.x,se=le.y,ee=le.width,te=le.height,U=this.getHitLineWidth(),X=U/2,B=Te-X,J=se-X;return{x:B,y:J,minX:B,minY:J,maxX:Te+ee+X,maxY:se+te+X,width:ee+U,height:te+U}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},Q.prototype.isFill=function(){var W=this.attr(),le=W.fill,Oe=W.fillStyle;return(le||Oe||this.isClipShape())&&this.canFill},Q.prototype.isStroke=function(){var W=this.attr(),le=W.stroke,Oe=W.strokeStyle;return(le||Oe)&&this.canStroke},Q.prototype.draw=function(W,le){var Oe=this.get("el");this.get("destroyed")?Oe&&Oe.parentNode.removeChild(Oe):(Oe||Object(x.a)(this),Object(_.a)(this,W),this.createPath(W,le),this.shadow(W,le),this.strokeAndFill(W,le),this.transform(le))},Q.prototype.createPath=function(W,le){},Q.prototype.strokeAndFill=function(W,le){var Oe=le||this.attr(),Te=Oe.fill,se=Oe.fillStyle,ee=Oe.stroke,te=Oe.strokeStyle,U=Oe.fillOpacity,X=Oe.strokeOpacity,B=Oe.lineWidth,J=this.get("el");this.canFill&&(le?"fill"in Oe?this._setColor(W,"fill",Te):"fillStyle"in Oe&&this._setColor(W,"fill",se):this._setColor(W,"fill",Te||se),U&&J.setAttribute(S.b.fillOpacity,U)),this.canStroke&&B>0&&(le?"stroke"in Oe?this._setColor(W,"stroke",ee):"strokeStyle"in Oe&&this._setColor(W,"stroke",te):this._setColor(W,"stroke",ee||te),X&&J.setAttribute(S.b.strokeOpacity,X),B&&J.setAttribute(S.b.lineWidth,B))},Q.prototype._setColor=function(W,le,Oe){var Te=this.get("el");if(Oe)if(Oe=Oe.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(Oe))(se=W.find("gradient",Oe))||(se=W.addGradient(Oe)),Te.setAttribute(S.b[le],"url(#"+se+")");else if(/^[p,P]{1}[\s]*\(/.test(Oe)){var se;(se=W.find("pattern",Oe))||(se=W.addPattern(Oe)),Te.setAttribute(S.b[le],"url(#"+se+")")}else Te.setAttribute(S.b[le],Oe);else Te.setAttribute(S.b[le],"none")},Q.prototype.shadow=function(W,le){var Oe=this.attr(),Te=le||Oe,se=Te.shadowOffsetX,ee=Te.shadowOffsetY,te=Te.shadowBlur,U=Te.shadowColor;(se||ee||te||U)&&Object(_.b)(this,W)},Q.prototype.transform=function(W){var le=this.attr();(W||le).matrix&&Object(_.c)(this)},Q.prototype.isInShape=function(W,le){return this.isPointInPath(W,le)},Q.prototype.isPointInPath=function(W,le){var Oe=this.get("el"),Te=this.get("canvas").get("el").getBoundingClientRect(),se=W+Te.left,ee=le+Te.top,te=document.elementFromPoint(se,ee);return!(!te||!te.isEqualNode(Oe))},Q.prototype.getHitLineWidth=function(){var W=this.attrs,le=W.lineWidth,Oe=W.lineAppendWidth;return this.isStroke()?le+Oe:0},Q}(M.AbstractShape),y=o(0),E=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="circle",W.canFill=!0,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{x:0,y:0,r:0})},Q.prototype.createPath=function(W,le){var Oe=this.attr(),Te=this.get("el");Object(y.each)(le||Oe,function(se,ee){ee==="x"||ee==="y"?Te.setAttribute("c"+ee,se):S.b[ee]&&Te.setAttribute(S.b[ee],se)})},Q}(h),m=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="dom",W.canFill=!1,W.canStroke=!1,W}return Object(c.__extends)(Q,he),Q.prototype.createPath=function(W,le){var Oe=this.attr(),Te=this.get("el");if(Object(y.each)(le||Oe,function(U,X){S.b[X]&&Te.setAttribute(S.b[X],U)}),typeof Oe.html=="function"){var se=Oe.html.call(this,Oe);if(se instanceof Element||se instanceof HTMLDocument){for(var ee=Te.childNodes,te=ee.length-1;te>=0;te--)Te.removeChild(ee[te]);Te.appendChild(se)}else Te.innerHTML=se}else Te.innerHTML=Oe.html},Q}(h),p=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="ellipse",W.canFill=!0,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{x:0,y:0,rx:0,ry:0})},Q.prototype.createPath=function(W,le){var Oe=this.attr(),Te=this.get("el");Object(y.each)(le||Oe,function(se,ee){ee==="x"||ee==="y"?Te.setAttribute("c"+ee,se):S.b[ee]&&Te.setAttribute(S.b[ee],se)})},Q}(h),A=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="image",W.canFill=!1,W.canStroke=!1,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{x:0,y:0,width:0,height:0})},Q.prototype.createPath=function(W,le){var Oe=this,Te=this.attr(),se=this.get("el");Object(y.each)(le||Te,function(ee,te){te==="img"?Oe._setImage(Te.img):S.b[te]&&se.setAttribute(S.b[te],ee)})},Q.prototype.setAttr=function(W,le){this.attrs[W]=le,W==="img"&&this._setImage(le)},Q.prototype._setImage=function(W){var le=this.attr(),Oe=this.get("el");if(Object(y.isString)(W))Oe.setAttribute("href",W);else if(W instanceof window.Image)le.width||(Oe.setAttribute("width",W.width),this.attr("width",W.width)),le.height||(Oe.setAttribute("height",W.height),this.attr("height",W.height)),Oe.setAttribute("href",W.src);else if(W instanceof HTMLElement&&Object(y.isString)(W.nodeName)&&W.nodeName.toUpperCase()==="CANVAS")Oe.setAttribute("href",W.toDataURL());else if(W instanceof ImageData){var Te=document.createElement("canvas");Te.setAttribute("width",""+W.width),Te.setAttribute("height",""+W.height),Te.getContext("2d").putImageData(W,0,0),le.width||(Oe.setAttribute("width",""+W.width),this.attr("width",W.width)),le.height||(Oe.setAttribute("height",""+W.height),this.attr("height",W.height)),Oe.setAttribute("href",Te.toDataURL())}},Q}(h),C=o(20),N=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="line",W.canFill=!1,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},Q.prototype.createPath=function(W,le){var Oe=this.attr(),Te=this.get("el");Object(y.each)(le||Oe,function(se,ee){if(ee==="startArrow"||ee==="endArrow")if(se){var te=Object(y.isObject)(se)?W.addArrow(Oe,S.b[ee]):W.getDefaultArrow(Oe,S.b[ee]);Te.setAttribute(S.b[ee],"url(#"+te+")")}else Te.removeAttribute(S.b[ee]);else S.b[ee]&&Te.setAttribute(S.b[ee],se)})},Q.prototype.getTotalLength=function(){var W=this.attr(),le=W.x1,Oe=W.y1,Te=W.x2,se=W.y2;return C.c.length(le,Oe,Te,se)},Q.prototype.getPoint=function(W){var le=this.attr(),Oe=le.x1,Te=le.y1,se=le.x2,ee=le.y2;return C.c.pointAt(Oe,Te,se,ee,W)},Q}(h),P={circle:function(he,Q,W){return[["M",he,Q],["m",-W,0],["a",W,W,0,1,0,2*W,0],["a",W,W,0,1,0,2*-W,0]]},square:function(he,Q,W){return[["M",he-W,Q-W],["L",he+W,Q-W],["L",he+W,Q+W],["L",he-W,Q+W],["Z"]]},diamond:function(he,Q,W){return[["M",he-W,Q],["L",he,Q-W],["L",he+W,Q],["L",he,Q+W],["Z"]]},triangle:function(he,Q,W){var le=W*Math.sin(.3333333333333333*Math.PI);return[["M",he-W,Q+le],["L",he,Q-le],["L",he+W,Q+le],["z"]]},triangleDown:function(he,Q,W){var le=W*Math.sin(.3333333333333333*Math.PI);return[["M",he-W,Q-le],["L",he+W,Q-le],["L",he,Q+le],["Z"]]}},L={get:function(he){return P[he]},register:function(he,Q){P[he]=Q},remove:function(he){delete P[he]},getAll:function(){return P}},z=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="marker",W.canFill=!0,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.createPath=function(W){this.get("el").setAttribute("d",this._assembleMarker())},Q.prototype._assembleMarker=function(){var W=this._getPath();return Object(y.isArray)(W)?W.map(function(le){return le.join(" ")}).join(""):W},Q.prototype._getPath=function(){var W,le=this.attr(),Oe=le.x,Te=le.y,se=le.r||le.radius,ee=le.symbol||"circle";return(W=Object(y.isFunction)(ee)?ee:L.get(ee))?W(Oe,Te,se):(console.warn(W+" symbol is not exist."),null)},Q.symbolsFactory=L,Q}(h),H=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="path",W.canFill=!0,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{startArrow:!1,endArrow:!1})},Q.prototype.createPath=function(W,le){var Oe=this,Te=this.attr(),se=this.get("el");Object(y.each)(le||Te,function(ee,te){if(te==="path"&&Object(y.isArray)(ee))se.setAttribute("d",Oe._formatPath(ee));else if(te==="startArrow"||te==="endArrow")if(ee){var U=Object(y.isObject)(ee)?W.addArrow(Te,S.b[te]):W.getDefaultArrow(Te,S.b[te]);se.setAttribute(S.b[te],"url(#"+U+")")}else se.removeAttribute(S.b[te]);else S.b[te]&&se.setAttribute(S.b[te],ee)})},Q.prototype._formatPath=function(W){var le=W.map(function(Oe){return Oe.join(" ")}).join("");return~le.indexOf("NaN")?"":le},Q.prototype.getTotalLength=function(){var W=this.get("el");return W?W.getTotalLength():null},Q.prototype.getPoint=function(W){var le=this.get("el"),Oe=this.getTotalLength();if(Oe===0)return null;var Te=le?le.getPointAtLength(W*Oe):null;return Te?{x:Te.x,y:Te.y}:null},Q}(h),re=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="polygon",W.canFill=!0,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.createPath=function(W,le){var Oe=this.attr(),Te=this.get("el");Object(y.each)(le||Oe,function(se,ee){ee==="points"&&Object(y.isArray)(se)&&se.length>=2?Te.setAttribute("points",se.map(function(te){return te[0]+","+te[1]}).join(" ")):S.b[ee]&&Te.setAttribute(S.b[ee],se)})},Q}(h),ae=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="polyline",W.canFill=!0,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{startArrow:!1,endArrow:!1})},Q.prototype.onAttrChange=function(W,le,Oe){he.prototype.onAttrChange.call(this,W,le,Oe),["points"].indexOf(W)!==-1&&this._resetCache()},Q.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},Q.prototype.createPath=function(W,le){var Oe=this.attr(),Te=this.get("el");Object(y.each)(le||Oe,function(se,ee){ee==="points"&&Object(y.isArray)(se)&&se.length>=2?Te.setAttribute("points",se.map(function(te){return te[0]+","+te[1]}).join(" ")):S.b[ee]&&Te.setAttribute(S.b[ee],se)})},Q.prototype.getTotalLength=function(){var W=this.attr().points,le=this.get("totalLength");return Object(y.isNil)(le)?(this.set("totalLength",C.d.length(W)),this.get("totalLength")):le},Q.prototype.getPoint=function(W){var le,Oe,Te=this.attr().points,se=this.get("tCache");return se||(this._setTcache(),se=this.get("tCache")),Object(y.each)(se,function(ee,te){W>=ee[0]&&W<=ee[1]&&(le=(W-ee[0])/(ee[1]-ee[0]),Oe=te)}),C.c.pointAt(Te[Oe][0],Te[Oe][1],Te[Oe+1][0],Te[Oe+1][1],le)},Q.prototype._setTcache=function(){var W=this.attr().points;if(W&&W.length!==0){var le=this.getTotalLength();if(!(le<=0)){var Oe,Te,se=0,ee=[];Object(y.each)(W,function(te,U){W[U+1]&&((Oe=[])[0]=se/le,Te=C.c.length(te[0],te[1],W[U+1][0],W[U+1][1]),se+=Te,Oe[1]=se/le,ee.push(Oe))}),this.set("tCache",ee)}}},Q.prototype.getStartTangent=function(){var W=this.attr().points,le=[];return le.push([W[1][0],W[1][1]]),le.push([W[0][0],W[0][1]]),le},Q.prototype.getEndTangent=function(){var W=this.attr().points,le=W.length-1,Oe=[];return Oe.push([W[le-1][0],W[le-1][1]]),Oe.push([W[le][0],W[le][1]]),Oe},Q}(h),ue=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="rect",W.canFill=!0,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{x:0,y:0,width:0,height:0,radius:0})},Q.prototype.createPath=function(W,le){var Oe=this,Te=this.attr(),se=this.get("el"),ee=!1,te=["x","y","width","height","radius"];Object(y.each)(le||Te,function(U,X){te.indexOf(X)===-1||ee?te.indexOf(X)===-1&&S.b[X]&&se.setAttribute(S.b[X],U):(se.setAttribute("d",Oe._assembleRect(Te)),ee=!0)})},Q.prototype._assembleRect=function(W){var le=W.x,Oe=W.y,Te=W.width,se=W.height,ee=W.radius;if(!ee)return"M "+le+","+Oe+" l "+Te+",0 l 0,"+se+" l"+-Te+" 0 z";var te=function(U){var X=0,B=0,J=0,ne=0;return Object(y.isArray)(U)?U.length===1?X=B=J=ne=U[0]:U.length===2?(X=J=U[0],B=ne=U[1]):U.length===3?(X=U[0],B=ne=U[1],J=U[2]):(X=U[0],B=U[1],J=U[2],ne=U[3]):X=B=J=ne=U,{r1:X,r2:B,r3:J,r4:ne}}(ee);return Object(y.isArray)(ee)?ee.length===1?te.r1=te.r2=te.r3=te.r4=ee[0]:ee.length===2?(te.r1=te.r3=ee[0],te.r2=te.r4=ee[1]):ee.length===3?(te.r1=ee[0],te.r2=te.r4=ee[1],te.r3=ee[2]):(te.r1=ee[0],te.r2=ee[1],te.r3=ee[2],te.r4=ee[3]):te.r1=te.r2=te.r3=te.r4=ee,[["M "+(le+te.r1)+","+Oe],["l "+(Te-te.r1-te.r2)+",0"],["a "+te.r2+","+te.r2+",0,0,1,"+te.r2+","+te.r2],["l 0,"+(se-te.r2-te.r3)],["a "+te.r3+","+te.r3+",0,0,1,"+-te.r3+","+te.r3],["l "+(te.r3+te.r4-Te)+",0"],["a "+te.r4+","+te.r4+",0,0,1,"+-te.r4+","+-te.r4],["l 0,"+(te.r4+te.r1-se)],["a "+te.r1+","+te.r1+",0,0,1,"+te.r1+","+-te.r1],["z"]].join(" ")},Q}(h),xe=o(138),ye={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Y={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},Ce={left:"left",start:"left",center:"middle",right:"end",end:"end"},ge=function(he){function Q(){var W=he!==null&&he.apply(this,arguments)||this;return W.type="text",W.canFill=!0,W.canStroke=!0,W}return Object(c.__extends)(Q,he),Q.prototype.getDefaultAttrs=function(){var W=he.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},W),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},Q.prototype.createPath=function(W,le){var Oe=this,Te=this.attr(),se=this.get("el");this._setFont(),Object(y.each)(le||Te,function(ee,te){te==="text"?Oe._setText(""+ee):te==="matrix"&&ee?Object(_.c)(Oe):S.b[te]&&se.setAttribute(S.b[te],ee)}),se.setAttribute("paint-order","stroke"),se.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},Q.prototype._setFont=function(){var W=this.get("el"),le=this.attr(),Oe=le.textBaseline,Te=le.textAlign,se=Object(xe.a)();se&&se.name==="firefox"?W.setAttribute("dominant-baseline",Y[Oe]||"alphabetic"):W.setAttribute("alignment-baseline",ye[Oe]||"baseline"),W.setAttribute("text-anchor",Ce[Te]||"left")},Q.prototype._setText=function(W){var le=this.get("el"),Oe=this.attr(),Te=Oe.x,se=Oe.textBaseline,ee=se===void 0?"bottom":se;if(W)if(~W.indexOf(`
`)){var te=W.split(`
`),U=te.length-1,X="";Object(y.each)(te,function(B,J){J===0?ee==="alphabetic"?X+='<tspan x="'+Te+'" dy="'+-U+'em">'+B+"</tspan>":ee==="top"?X+='<tspan x="'+Te+'" dy="0.9em">'+B+"</tspan>":ee==="middle"?X+='<tspan x="'+Te+'" dy="'+-(U-1)/2+'em">'+B+"</tspan>":ee==="bottom"?X+='<tspan x="'+Te+'" dy="-'+(U+.3)+'em">'+B+"</tspan>":ee==="hanging"&&(X+='<tspan x="'+Te+'" dy="'+(-(U-1)-.3)+'em">'+B+"</tspan>"):X+='<tspan x="'+Te+'" dy="1em">'+B+"</tspan>"}),le.innerHTML=X}else le.innerHTML=W;else le.innerHTML=""},Q}(h)},function(R,b,o){"use strict";o.r(b),o.d(b,"create",function(){return c}),o.d(b,"clone",function(){return M}),o.d(b,"fromValues",function(){return _}),o.d(b,"copy",function(){return x}),o.d(b,"set",function(){return O}),o.d(b,"add",function(){return S}),o.d(b,"subtract",function(){return g}),o.d(b,"multiply",function(){return h}),o.d(b,"divide",function(){return y}),o.d(b,"ceil",function(){return E}),o.d(b,"floor",function(){return m}),o.d(b,"min",function(){return p}),o.d(b,"max",function(){return A}),o.d(b,"round",function(){return C}),o.d(b,"scale",function(){return N}),o.d(b,"scaleAndAdd",function(){return P}),o.d(b,"distance",function(){return L}),o.d(b,"squaredDistance",function(){return z}),o.d(b,"length",function(){return H}),o.d(b,"squaredLength",function(){return re}),o.d(b,"negate",function(){return ae}),o.d(b,"inverse",function(){return ue}),o.d(b,"normalize",function(){return xe}),o.d(b,"dot",function(){return ye}),o.d(b,"cross",function(){return Y}),o.d(b,"lerp",function(){return Ce}),o.d(b,"random",function(){return ge}),o.d(b,"transformMat2",function(){return he}),o.d(b,"transformMat2d",function(){return Q}),o.d(b,"transformMat3",function(){return W}),o.d(b,"transformMat4",function(){return le}),o.d(b,"rotate",function(){return Oe}),o.d(b,"angle",function(){return Te}),o.d(b,"zero",function(){return se}),o.d(b,"str",function(){return ee}),o.d(b,"exactEquals",function(){return te}),o.d(b,"equals",function(){return U}),o.d(b,"len",function(){return B}),o.d(b,"sub",function(){return J}),o.d(b,"mul",function(){return ne}),o.d(b,"div",function(){return ie}),o.d(b,"dist",function(){return Z}),o.d(b,"sqrDist",function(){return fe}),o.d(b,"sqrLen",function(){return _e}),o.d(b,"forEach",function(){return je});var f=o(12);function c(){var Me=new f.a(2);return f.a!=Float32Array&&(Me[0]=0,Me[1]=0),Me}function M(Me){var Ae=new f.a(2);return Ae[0]=Me[0],Ae[1]=Me[1],Ae}function _(Me,Ae){var Le=new f.a(2);return Le[0]=Me,Le[1]=Ae,Le}function x(Me,Ae){return Me[0]=Ae[0],Me[1]=Ae[1],Me}function O(Me,Ae,Le){return Me[0]=Ae,Me[1]=Le,Me}function S(Me,Ae,Le){return Me[0]=Ae[0]+Le[0],Me[1]=Ae[1]+Le[1],Me}function g(Me,Ae,Le){return Me[0]=Ae[0]-Le[0],Me[1]=Ae[1]-Le[1],Me}function h(Me,Ae,Le){return Me[0]=Ae[0]*Le[0],Me[1]=Ae[1]*Le[1],Me}function y(Me,Ae,Le){return Me[0]=Ae[0]/Le[0],Me[1]=Ae[1]/Le[1],Me}function E(Me,Ae){return Me[0]=Math.ceil(Ae[0]),Me[1]=Math.ceil(Ae[1]),Me}function m(Me,Ae){return Me[0]=Math.floor(Ae[0]),Me[1]=Math.floor(Ae[1]),Me}function p(Me,Ae,Le){return Me[0]=Math.min(Ae[0],Le[0]),Me[1]=Math.min(Ae[1],Le[1]),Me}function A(Me,Ae,Le){return Me[0]=Math.max(Ae[0],Le[0]),Me[1]=Math.max(Ae[1],Le[1]),Me}function C(Me,Ae){return Me[0]=Math.round(Ae[0]),Me[1]=Math.round(Ae[1]),Me}function N(Me,Ae,Le){return Me[0]=Ae[0]*Le,Me[1]=Ae[1]*Le,Me}function P(Me,Ae,Le,Se){return Me[0]=Ae[0]+Le[0]*Se,Me[1]=Ae[1]+Le[1]*Se,Me}function L(Me,Ae){var Le=Ae[0]-Me[0],Se=Ae[1]-Me[1];return Math.hypot(Le,Se)}function z(Me,Ae){var Le=Ae[0]-Me[0],Se=Ae[1]-Me[1];return Le*Le+Se*Se}function H(Me){var Ae=Me[0],Le=Me[1];return Math.hypot(Ae,Le)}function re(Me){var Ae=Me[0],Le=Me[1];return Ae*Ae+Le*Le}function ae(Me,Ae){return Me[0]=-Ae[0],Me[1]=-Ae[1],Me}function ue(Me,Ae){return Me[0]=1/Ae[0],Me[1]=1/Ae[1],Me}function xe(Me,Ae){var Le=Ae[0],Se=Ae[1],Re=Le*Le+Se*Se;return Re>0&&(Re=1/Math.sqrt(Re)),Me[0]=Ae[0]*Re,Me[1]=Ae[1]*Re,Me}function ye(Me,Ae){return Me[0]*Ae[0]+Me[1]*Ae[1]}function Y(Me,Ae,Le){var Se=Ae[0]*Le[1]-Ae[1]*Le[0];return Me[0]=Me[1]=0,Me[2]=Se,Me}function Ce(Me,Ae,Le,Se){var Re=Ae[0],Ke=Ae[1];return Me[0]=Re+Se*(Le[0]-Re),Me[1]=Ke+Se*(Le[1]-Ke),Me}function ge(Me,Ae){Ae=Ae||1;var Le=2*f.c()*Math.PI;return Me[0]=Math.cos(Le)*Ae,Me[1]=Math.sin(Le)*Ae,Me}function he(Me,Ae,Le){var Se=Ae[0],Re=Ae[1];return Me[0]=Le[0]*Se+Le[2]*Re,Me[1]=Le[1]*Se+Le[3]*Re,Me}function Q(Me,Ae,Le){var Se=Ae[0],Re=Ae[1];return Me[0]=Le[0]*Se+Le[2]*Re+Le[4],Me[1]=Le[1]*Se+Le[3]*Re+Le[5],Me}function W(Me,Ae,Le){var Se=Ae[0],Re=Ae[1];return Me[0]=Le[0]*Se+Le[3]*Re+Le[6],Me[1]=Le[1]*Se+Le[4]*Re+Le[7],Me}function le(Me,Ae,Le){var Se=Ae[0],Re=Ae[1];return Me[0]=Le[0]*Se+Le[4]*Re+Le[12],Me[1]=Le[1]*Se+Le[5]*Re+Le[13],Me}function Oe(Me,Ae,Le,Se){var Re=Ae[0]-Le[0],Ke=Ae[1]-Le[1],Je=Math.sin(Se),nt=Math.cos(Se);return Me[0]=Re*nt-Ke*Je+Le[0],Me[1]=Re*Je+Ke*nt+Le[1],Me}function Te(Me,Ae){var Le=Me[0],Se=Me[1],Re=Ae[0],Ke=Ae[1],Je=Math.sqrt(Le*Le+Se*Se)*Math.sqrt(Re*Re+Ke*Ke),nt=Je&&(Le*Re+Se*Ke)/Je;return Math.acos(Math.min(Math.max(nt,-1),1))}function se(Me){return Me[0]=0,Me[1]=0,Me}function ee(Me){return"vec2("+Me[0]+", "+Me[1]+")"}function te(Me,Ae){return Me[0]===Ae[0]&&Me[1]===Ae[1]}function U(Me,Ae){var Le=Me[0],Se=Me[1],Re=Ae[0],Ke=Ae[1];return Math.abs(Le-Re)<=f.b*Math.max(1,Math.abs(Le),Math.abs(Re))&&Math.abs(Se-Ke)<=f.b*Math.max(1,Math.abs(Se),Math.abs(Ke))}var X,B=H,J=g,ne=h,ie=y,Z=L,fe=z,_e=re,je=(X=c(),function(Me,Ae,Le,Se,Re,Ke){var Je,nt;for(Ae||(Ae=2),Le||(Le=0),nt=Se?Math.min(Se*Ae+Le,Me.length):Me.length,Je=Le;Je<nt;Je+=Ae)X[0]=Me[Je],X[1]=Me[Je+1],Re(X,X,Ke),Me[Je]=X[0],Me[Je+1]=X[1];return Me})},function(R,b){var o=[],f=[];function c(M,_){if(_=_||{},M===void 0)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var x,O=_.prepend===!0?"prepend":"append",S=_.container!==void 0?_.container:document.querySelector("head"),g=o.indexOf(S);return g===-1&&(g=o.push(S)-1,f[g]={}),f[g]!==void 0&&f[g][O]!==void 0?x=f[g][O]:(x=f[g][O]=function(){var h=document.createElement("style");return h.setAttribute("type","text/css"),h}(),O==="prepend"?S.insertBefore(x,S.childNodes[0]):S.appendChild(x)),M.charCodeAt(0)===65279&&(M=M.substr(1,M.length)),x.styleSheet?x.styleSheet.cssText+=M:x.textContent+=M,x}R.exports=c,R.exports.insertCss=c},function(R,b,o){"use strict";o.d(b,"a",function(){return xe});var f,c,M,_,x,O,S,g,h,y=o(9),E=o.n(y),m=o(14),p=o.n(m),A=o(10),C=o.n(A),N=o(6),P=o.n(N),L=o(11),z=o.n(L),H=(o(29),o(5)),re=o(13),ae=o(35),ue=o(50),xe=(f=Object(H.injectable)(),c=Object(H.inject)(re.a.RenderEngine),M=Object(H.inject)(re.a.ResourcePool),f((h=g=function ye(){var Y=this;P()(this,ye),C()(this,"engine",O,this),C()(this,"resourcePool",S,this),this.model=void 0,this.setup=function(Ce,ge,he){var Q=Ce.getPass(ue.a.IDENTIFIER);if(Q){var W=Ce.createRenderTarget(ge,"render to screen",{width:1,height:1});he.data={input:ge.read(Q.data.output),output:ge.write(Ce,W)}}},this.execute=function(){var Ce=p()(E.a.mark(function ge(he,Q){var W,le,Oe,Te,se,ee,te;return E.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(W=Y.engine,le=W.createModel,Oe=W.createAttribute,Te=W.createBuffer,Y.model){U.next=6;break}return U.next=4,le({vs:Y.engine.supportWebGPU?`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`:`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fs:Y.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`:`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,attributes:{a_Position:Oe({buffer:Te({data:[-4,-4,4,-4,0,4],type:ae.a.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:se=U.sent,Y.model=se;case 6:ee=he.getResourceNode(Q.data.input),te=Y.resourcePool.getOrCreateResource(ee.resource),Y.engine.useFramebuffer(null,function(){Y.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),Y.model.draw({uniforms:{u_Texture:te}})});case 9:case"end":return U.stop()}},ge)}));return function(ge,he){return Ce.apply(this,arguments)}}(),this.tearDown=function(){Y.model=void 0}},g.IDENTIFIER="Copy Pass",x=h,O=z()(x.prototype,"engine",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=z()(x.prototype,"resourcePool",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=x))||_)},function(R,b,o){(function(f){var c,M,_,x;function O(S){return(O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}x=function(){return function(S){var g={};function h(y){if(g[y])return g[y].exports;var E=g[y]={i:y,l:!1,exports:{}};return S[y].call(E.exports,E,E.exports,h),E.l=!0,E.exports}return h.m=S,h.c=g,h.d=function(y,E,m){h.o(y,E)||Object.defineProperty(y,E,{configurable:!1,enumerable:!0,get:m})},h.n=function(y){var E=y&&y.__esModule?function(){return y.default}:function(){return y};return h.d(E,"a",E),E},h.o=function(y,E){return Object.prototype.hasOwnProperty.call(y,E)},h.p="",h(h.s=31)}([function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Array.isArray?Array.isArray(E):Object(y.a)(E,"Array")}},function(S,g,h){"use strict";g.a=function(y){return y!==null&&typeof y!="function"&&isFinite(y.length)}},function(S,g,h){"use strict";var y=h(0),E=h(13);g.a=function(m,p){if(m){if(Object(y.a)(m))for(var A=0,C=m.length;A<C&&p(m[A],A)!==!1;A++);else if(Object(E.a)(m)){for(var N in m)if(m.hasOwnProperty(N)&&p(m[N],N)===!1)break}}}},function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Object(y.a)(E,"Function")}},function(S,g,h){"use strict";var y={}.toString;g.a=function(E,m){return y.call(E)==="[object "+m+"]"}},function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Object(y.a)(E,"Number")}},function(S,g,h){"use strict";g.a=function(y){return y==null}},function(S,g,h){var y=h(33).mix;S.exports={assign:y}},function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Object(y.a)(E,"String")}},function(S,g,h){"use strict";var y=h(15),E=h(4);g.a=function(m){if(!Object(y.a)(m)||!Object(E.a)(m,"Object"))return!1;if(Object.getPrototypeOf(m)===null)return!0;for(var p=m;Object.getPrototypeOf(p)!==null;)p=Object.getPrototypeOf(p);return Object.getPrototypeOf(m)===p}},function(S,g,h){"use strict";var y=h(6);g.a=function(E){return Object(y.a)(E)?"":E.toString()}},function(S,g,h){var y=h(18),E=function(){function m(p,A){A===void 0&&(A={}),this.options=A,this.rootNode=y(p,A)}return m.prototype.execute=function(){throw new Error("please override this method")},m}();S.exports=E},function(S,g,h){"use strict";var y=h(1);g.a=function(E,m){return!!Object(y.a)(E)&&E.indexOf(m)>-1}},function(S,g,h){"use strict";g.a=function(y){var E=O(y);return y!==null&&E==="object"||E==="function"}},function(S,g,h){"use strict";var y=h(2),E=h(1);g.a=function(m,p){if(!Object(E.a)(m))return m;var A=[];return Object(y.a)(m,function(C,N){p(C,N)&&A.push(C)}),A}},function(S,g,h){"use strict";g.a=function(y){return O(y)==="object"&&y!==null}},function(S,g,h){"use strict";function y(E,m){for(var p in m)m.hasOwnProperty(p)&&p!=="constructor"&&m[p]!==void 0&&(E[p]=m[p])}g.a=function(E,m,p,A){return m&&y(E,m),p&&y(E,p),A&&y(E,A),E}},function(S,g,h){var y=h(30),E=["LR","RL","TB","BT","H","V"],m=["LR","RL","H"],p=E[0];S.exports=function(A,C,N){var P=C.direction||p;if(C.isHorizontal=function(ue){return m.indexOf(ue)>-1}(P),P&&E.indexOf(P)===-1)throw new TypeError("Invalid direction: "+P);if(P===E[0])N(A,C);else if(P===E[1])N(A,C),A.right2left();else if(P===E[2])N(A,C);else if(P===E[3])N(A,C),A.bottom2top();else if(P===E[4]||P===E[5]){var L=y(A,C),z=L.left,H=L.right;N(z,C),N(H,C),C.isHorizontal?z.right2left():z.bottom2top(),H.translate(z.x-H.x,z.y-H.y),A.x=z.x,A.y=H.y;var re=A.getBoundingBox();C.isHorizontal?re.top<0&&A.translate(0,-re.top):re.left<0&&A.translate(-re.left,0)}var ae=C.fixedRoot;return ae===void 0&&(ae=!0),ae&&A.translate(-(A.x+A.width/2+A.hgap),-(A.y+A.height/2+A.vgap)),A}},function(S,g,h){var y=h(7),E={getId:function(p){return p.id||p.name},getPreH:function(p){return p.preH||0},getPreV:function(p){return p.preV||0},getHGap:function(p){return p.hgap||18},getVGap:function(p){return p.vgap||18},getChildren:function(p){return p.children},getHeight:function(p){return p.height||36},getWidth:function(p){var A=p.label||" ";return p.width||18*A.split("").length}};function m(p,A){var C=this;if(C.vgap=C.hgap=0,p instanceof m)return p;C.data=p;var N=A.getHGap(p),P=A.getVGap(p);return C.preH=A.getPreH(p),C.preV=A.getPreV(p),C.width=A.getWidth(p),C.height=A.getHeight(p),C.width+=C.preH,C.height+=C.preV,C.id=A.getId(p),C.x=C.y=0,C.depth=0,C.children||(C.children=[]),C.addGap(N,P),C}y.assign(m.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(p,A){this.hgap+=p,this.vgap+=A,this.width+=2*p,this.height+=2*A},eachNode:function(p){for(var A,C=[this];A=C.shift();)p(A),C=A.children.concat(C)},DFTraverse:function(p){this.eachNode(p)},BFTraverse:function(p){for(var A,C=[this];A=C.shift();)p(A),C=C.concat(A.children)},getBoundingBox:function(){var p={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(A){p.left=Math.min(p.left,A.x),p.top=Math.min(p.top,A.y),p.width=Math.max(p.width,A.x+A.width),p.height=Math.max(p.height,A.y+A.height)}),p},translate:function(p,A){p===void 0&&(p=0),A===void 0&&(A=0),this.eachNode(function(C){C.x+=p,C.y+=A,C.x+=C.preH,C.y+=C.preV})},right2left:function(){var p=this.getBoundingBox();this.eachNode(function(A){A.x=A.x-2*(A.x-p.left)-A.width}),this.translate(p.width,0)},bottom2top:function(){var p=this.getBoundingBox();this.eachNode(function(A){A.y=A.y-2*(A.y-p.top)-A.height}),this.translate(0,p.height)}}),S.exports=function(p,A,C){A===void 0&&(A={});var N,P=new m(p,A=y.assign({},E,A)),L=[P];if(!C&&!p.collapsed){for(;N=L.shift();)if(!N.data.collapsed){var z=A.getChildren(N.data),H=z?z.length:0;if(N.children=new Array(H),z&&H)for(var re=0;re<H;re++){var ae=new m(z[re],A);N.children[re]=ae,L.push(ae),ae.parent=N,ae.depth=N.depth+1}}}return P}},function(S,g,h){"use strict";var y=h(6),E=h(20);g.a=function(m,p){var A=Object(E.a)(p),C=A.length;if(Object(y.a)(m))return!C;for(var N=0;N<C;N+=1){var P=A[N];if(p[P]!==m[P]||!(P in m))return!1}return!0}},function(S,g,h){"use strict";var y=h(2),E=h(3),m=Object.keys?function(p){return Object.keys(p)}:function(p){var A=[];return Object(y.a)(p,function(C,N){Object(E.a)(p)&&N==="prototype"||A.push(N)}),A};g.a=m},function(S,g,h){"use strict";var y=h(1),E=Array.prototype.splice;g.a=function(m,p){if(!Object(y.a)(m))return[];for(var A=m?p.length:0,C=A-1;A--;){var N=void 0,P=p[A];A!==C&&P===N||(N=P,E.call(m,P,1))}return m}},function(S,g,h){"use strict";var y=h(12),E=h(2);g.a=function(m){var p=[];return Object(E.a)(m,function(A){Object(y.a)(p,A)||p.push(A)}),p}},function(S,g,h){"use strict";var y=h(0),E=h(3),m=h(24);g.a=function(p,A){if(!A)return{0:p};if(!Object(E.a)(A)){var C=Object(y.a)(A)?A:A.replace(/\s+/g,"").split("*");A=function(N){for(var P="_",L=0,z=C.length;L<z;L++)P+=N[C[L]]&&N[C[L]].toString();return P}}return Object(m.a)(p,A)}},function(S,g,h){"use strict";var y=h(2),E=h(0),m=h(3),p=Object.prototype.hasOwnProperty;g.a=function(A,C){if(!C||!Object(E.a)(A))return{};var N,P={},L=Object(m.a)(C)?C:function(z){return z[C]};return Object(y.a)(A,function(z){N=L(z),p.call(P,N)?P[N].push(z):P[N]=[z]}),P}},function(S,g,h){"use strict";g.a=function(y,E){return y.hasOwnProperty(E)}},function(S,g,h){"use strict";var y=h(2),E=h(3),m=Object.values?function(p){return Object.values(p)}:function(p){var A=[];return Object(y.a)(p,function(C,N){Object(E.a)(p)&&N==="prototype"||A.push(C)}),A};g.a=m},function(S,g,h){"use strict";var y={}.toString;g.a=function(E){return y.call(E).replace(/^\[object /,"").replace(/]$/,"")}},function(S,g,h){"use strict";var y=Object.prototype;g.a=function(E){var m=E&&E.constructor;return E===(typeof m=="function"&&m.prototype||y)}},function(S,g,h){"use strict";var y=h(15),E=h(1),m=h(8);g.a=function p(A,C){if(A===C)return!0;if(!A||!C||Object(m.a)(A)||Object(m.a)(C))return!1;if(Object(E.a)(A)||Object(E.a)(C)){if(A.length!==C.length)return!1;for(var N=!0,P=0;P<A.length&&(N=p(A[P],C[P]));P++);return N}if(Object(y.a)(A)||Object(y.a)(C)){var L=Object.keys(A),z=Object.keys(C);if(L.length!==z.length)return!1;for(N=!0,P=0;P<L.length&&(N=p(A[L[P]],C[L[P]]));P++);return N}return!1}},function(S,g,h){var y=h(18);S.exports=function(E,m){for(var p=y(E.data,m,!0),A=y(E.data,m,!0),C=E.children.length,N=Math.round(C/2),P=m.getSide||function(H,re){return re<N?"right":"left"},L=0;L<C;L++){var z=E.children[L];P(z,L)==="right"?A.children.push(z):p.children.push(z)}return p.eachNode(function(H){H.isRoot()||(H.side="left")}),A.eachNode(function(H){H.isRoot()||(H.side="right")}),{left:p,right:A}}},function(S,g,h){var y={compactBox:h(32),dendrogram:h(114),indented:h(116),mindmap:h(118)};S.exports=y},function(S,g,h){var y=h(11),E=h(113),m=h(17),p=h(7),A=function(N){var P,L;function z(){return N.apply(this,arguments)||this}return L=N,(P=z).prototype=Object.create(L.prototype),P.prototype.constructor=P,P.__proto__=L,z.prototype.execute=function(){return m(this.rootNode,this.options,E)},z}(y),C={};S.exports=function(N,P){return P=p.assign({},C,P),new A(N,P).execute()}},function(S,g,h){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var y=h(12);h.d(g,"contains",function(){return y.a}),h.d(g,"includes",function(){return y.a});var E=h(34);h.d(g,"difference",function(){return E.a});var m=h(35);h.d(g,"find",function(){return m.a});var p=h(36);h.d(g,"findIndex",function(){return p.a});var A=h(37);h.d(g,"firstValue",function(){return A.a});var C=h(38);h.d(g,"flatten",function(){return C.a});var N=h(39);h.d(g,"flattenDeep",function(){return N.a});var P=h(40);h.d(g,"getRange",function(){return P.a});var L=h(41);h.d(g,"pull",function(){return L.a});var z=h(21);h.d(g,"pullAt",function(){return z.a});var H=h(42);h.d(g,"reduce",function(){return H.a});var re=h(43);h.d(g,"remove",function(){return re.a});var ae=h(44);h.d(g,"sortBy",function(){return ae.a});var ue=h(45);h.d(g,"union",function(){return ue.a});var xe=h(22);h.d(g,"uniq",function(){return xe.a});var ye=h(46);h.d(g,"valuesOfKey",function(){return ye.a});var Y=h(47);h.d(g,"head",function(){return Y.a});var Ce=h(48);h.d(g,"last",function(){return Ce.a});var ge=h(49);h.d(g,"startsWith",function(){return ge.a});var he=h(50);h.d(g,"endsWith",function(){return he.a});var Q=h(14);h.d(g,"filter",function(){return Q.a});var W=h(51);h.d(g,"every",function(){return W.a});var le=h(52);h.d(g,"some",function(){return le.a});var Oe=h(53);h.d(g,"group",function(){return Oe.a});var Te=h(24);h.d(g,"groupBy",function(){return Te.a});var se=h(23);h.d(g,"groupToMap",function(){return se.a});var ee=h(54);h.d(g,"getWrapBehavior",function(){return ee.a});var te=h(55);h.d(g,"wrapBehavior",function(){return te.a});var U=h(56);h.d(g,"number2color",function(){return U.a});var X=h(57);h.d(g,"parseRadius",function(){return X.a});var B=h(58);h.d(g,"clamp",function(){return B.a});var J=h(59);h.d(g,"fixedBase",function(){return J.a});var ne=h(60);h.d(g,"isDecimal",function(){return ne.a});var ie=h(61);h.d(g,"isEven",function(){return ie.a});var Z=h(62);h.d(g,"isInteger",function(){return Z.a});var fe=h(63);h.d(g,"isNegative",function(){return fe.a});var _e=h(64);h.d(g,"isNumberEqual",function(){return _e.a});var je=h(65);h.d(g,"isOdd",function(){return je.a});var Me=h(66);h.d(g,"isPositive",function(){return Me.a});var Ae=h(67);h.d(g,"maxBy",function(){return Ae.a});var Le=h(68);h.d(g,"minBy",function(){return Le.a});var Se=h(69);h.d(g,"mod",function(){return Se.a});var Re=h(70);h.d(g,"toDegree",function(){return Re.a});var Ke=h(71);h.d(g,"toInteger",function(){return Ke.a});var Je=h(72);h.d(g,"toRadian",function(){return Je.a});var nt=h(73);h.d(g,"forIn",function(){return nt.a});var dt=h(25);h.d(g,"has",function(){return dt.a});var kt=h(74);h.d(g,"hasKey",function(){return kt.a});var At=h(75);h.d(g,"hasValue",function(){return At.a});var It=h(20);h.d(g,"keys",function(){return It.a});var Kt=h(19);h.d(g,"isMatch",function(){return Kt.a});var Qt=h(26);h.d(g,"values",function(){return Qt.a});var tr=h(76);h.d(g,"lowerCase",function(){return tr.a});var nr=h(77);h.d(g,"lowerFirst",function(){return nr.a});var Mr=h(78);h.d(g,"substitute",function(){return Mr.a});var ar=h(79);h.d(g,"upperCase",function(){return ar.a});var yr=h(80);h.d(g,"upperFirst",function(){return yr.a});var mr=h(27);h.d(g,"getType",function(){return mr.a});var Rr=h(81);h.d(g,"isArguments",function(){return Rr.a});var pr=h(0);h.d(g,"isArray",function(){return pr.a});var xr=h(1);h.d(g,"isArrayLike",function(){return xr.a});var dr=h(82);h.d(g,"isBoolean",function(){return dr.a});var Gr=h(83);h.d(g,"isDate",function(){return Gr.a});var Lr=h(84);h.d(g,"isError",function(){return Lr.a});var pn=h(3);h.d(g,"isFunction",function(){return pn.a});var Ur=h(85);h.d(g,"isFinite",function(){return Ur.a});var Nr=h(6);h.d(g,"isNil",function(){return Nr.a});var Dr=h(86);h.d(g,"isNull",function(){return Dr.a});var rn=h(5);h.d(g,"isNumber",function(){return rn.a});var Ir=h(13);h.d(g,"isObject",function(){return Ir.a});var On=h(15);h.d(g,"isObjectLike",function(){return On.a});var In=h(9);h.d(g,"isPlainObject",function(){return In.a});var Dn=h(28);h.d(g,"isPrototype",function(){return Dn.a});var Rn=h(87);h.d(g,"isRegExp",function(){return Rn.a});var gn=h(8);h.d(g,"isString",function(){return gn.a});var Er=h(4);h.d(g,"isType",function(){return Er.a});var ln=h(88);h.d(g,"isUndefined",function(){return ln.a});var yn=h(89);h.d(g,"isElement",function(){return yn.a});var mn=h(90);h.d(g,"requestAnimationFrame",function(){return mn.a});var Qn=h(91);h.d(g,"clearAnimationFrame",function(){return Qn.a});var Un=h(92);h.d(g,"augment",function(){return Un.a});var ri=h(93);h.d(g,"clone",function(){return ri.a});var Oi=h(94);h.d(g,"debounce",function(){return Oi.a});var ni=h(95);h.d(g,"memoize",function(){return ni.a});var Bn=h(96);h.d(g,"deepMix",function(){return Bn.a});var wi=h(2);h.d(g,"each",function(){return wi.a});var Mi=h(97);h.d(g,"extend",function(){return Mi.a});var Wn=h(98);h.d(g,"indexOf",function(){return Wn.a});var ii=h(99);h.d(g,"isEmpty",function(){return ii.a});var Jn=h(29);h.d(g,"isEqual",function(){return Jn.a});var hi=h(100);h.d(g,"isEqualWith",function(){return hi.a});var Vn=h(101);h.d(g,"map",function(){return Vn.a});var oi=h(102);h.d(g,"mapValues",function(){return oi.a});var di=h(16);h.d(g,"mix",function(){return di.a}),h.d(g,"assign",function(){return di.a});var _i=h(103);h.d(g,"get",function(){return _i.a});var Xn=h(104);h.d(g,"set",function(){return Xn.a});var Yn=h(105);h.d(g,"pick",function(){return Yn.a});var ki=h(106);h.d(g,"throttle",function(){return ki.a});var Gi=h(107);h.d(g,"toArray",function(){return Gi.a});var Hn=h(10);h.d(g,"toString",function(){return Hn.a});var oo=h(108);h.d(g,"uniqueId",function(){return oo.a});var ci=h(109);h.d(g,"noop",function(){return ci.a});var li=h(110);h.d(g,"identity",function(){return li.a});var ao=h(111);h.d(g,"size",function(){return ao.a});var Zi=h(112);h.d(g,"Cache",function(){return Zi.a})},function(S,g,h){"use strict";var y=h(14),E=h(12);g.a=function(m,p){return p===void 0&&(p=[]),Object(y.a)(m,function(A){return!Object(E.a)(p,A)})}},function(S,g,h){"use strict";var y=h(3),E=h(19),m=h(0),p=h(9);g.a=function(A,C){if(!Object(m.a)(A))return null;var N;if(Object(y.a)(C)&&(N=C),Object(p.a)(C)&&(N=function(L){return Object(E.a)(L,C)}),N){for(var P=0;P<A.length;P+=1)if(N(A[P]))return A[P]}return null}},function(S,g,h){"use strict";g.a=function(y,E,m){m===void 0&&(m=0);for(var p=m;p<y.length;p++)if(E(y[p],p))return p;return-1}},function(S,g,h){"use strict";var y=h(6),E=h(0);g.a=function(m,p){for(var A=null,C=0;C<m.length;C++){var N=m[C][p];if(!Object(y.a)(N)){A=Object(E.a)(N)?N[0]:N;break}}return A}},function(S,g,h){"use strict";var y=h(0);g.a=function(E){if(!Object(y.a)(E))return[];for(var m=[],p=0;p<E.length;p++)m=m.concat(E[p]);return m}},function(S,g,h){"use strict";var y=h(0);g.a=function E(m,p){if(p===void 0&&(p=[]),Object(y.a)(m))for(var A=0;A<m.length;A+=1)E(m[A],p);else p.push(m);return p}},function(S,g,h){"use strict";var y=h(0),E=h(14);g.a=function(m){if(!(m=Object(E.a)(m,function(N){return!isNaN(N)})).length)return{min:0,max:0};if(Object(y.a)(m[0])){for(var p=[],A=0;A<m.length;A++)p=p.concat(m[A]);m=p}var C=Math.max.apply(null,m);return{min:Math.min.apply(null,m),max:C}}},function(S,g,h){"use strict";var y=Array.prototype,E=y.splice,m=y.indexOf;g.a=function(p){for(var A=[],C=1;C<arguments.length;C++)A[C-1]=arguments[C];for(var N=0;N<A.length;N++)for(var P=A[N],L=-1;(L=m.call(p,P))>-1;)E.call(p,L,1);return p}},function(S,g,h){"use strict";var y=h(2),E=h(0),m=h(9);g.a=function(p,A,C){if(!Object(E.a)(p)&&!Object(m.a)(p))return p;var N=C;return Object(y.a)(p,function(P,L){N=A(N,P,L)}),N}},function(S,g,h){"use strict";var y=h(1),E=h(21);g.a=function(m,p){var A=[];if(!Object(y.a)(m))return A;for(var C=-1,N=[],P=m.length;++C<P;){var L=m[C];p(L,C,m)&&(A.push(L),N.push(C))}return Object(E.a)(m,N),A}},function(S,g,h){"use strict";var y=h(0),E=h(8),m=h(3);g.a=function(p,A){var C;if(Object(m.a)(A))C=function(P,L){return A(P)-A(L)};else{var N=[];Object(E.a)(A)?N.push(A):Object(y.a)(A)&&(N=A),C=function(P,L){for(var z=0;z<N.length;z+=1){var H=N[z];if(P[H]>L[H])return 1;if(P[H]<L[H])return-1}return 0}}return p.sort(C),p}},function(S,g,h){"use strict";var y=h(22);g.a=function(){for(var E=[],m=0;m<arguments.length;m++)E[m]=arguments[m];return Object(y.a)([].concat.apply([],E))}},function(S,g,h){"use strict";var y=h(2),E=h(0),m=h(6);g.a=function(p,A){var C=[],N={};return p.forEach(function(P){var L=P[A];Object(m.a)(L)||(Object(E.a)(L)||(L=[L]),Object(y.a)(L,function(z){N[z]||(C.push(z),N[z]=!0)}))}),C}},function(S,g,h){"use strict";g.a=function(E){if(Object(y.a)(E))return E[0]};var y=h(1)},function(S,g,h){"use strict";g.a=function(E){if(Object(y.a)(E))return E[E.length-1]};var y=h(1)},function(S,g,h){"use strict";var y=h(0),E=h(8);g.a=function(m,p){return!(!Object(y.a)(m)&&!Object(E.a)(m))&&m[0]===p}},function(S,g,h){"use strict";var y=h(0),E=h(8);g.a=function(m,p){return!(!Object(y.a)(m)&&!Object(E.a)(m))&&m[m.length-1]===p}},function(S,g,h){"use strict";g.a=function(y,E){for(var m=0;m<y.length;m++)if(!E(y[m],m))return!1;return!0}},function(S,g,h){"use strict";g.a=function(y,E){for(var m=0;m<y.length;m++)if(E(y[m],m))return!0;return!1}},function(S,g,h){"use strict";var y=h(23);g.a=function(E,m){if(!m)return[E];var p=Object(y.a)(E,m),A=[];for(var C in p)A.push(p[C]);return A}},function(S,g,h){"use strict";g.a=function(y,E){return y["_wrap_"+E]}},function(S,g,h){"use strict";g.a=function(y,E){if(y["_wrap_"+E])return y["_wrap_"+E];var m=function(p){y[E](p)};return y["_wrap_"+E]=m,m}},function(S,g,h){"use strict";var y={};g.a=function(E){var m=y[E];if(!m){for(var p=E.toString(16),A=p.length;A<6;A++)p="0"+p;m="#"+p,y[E]=m}return m}},function(S,g,h){"use strict";var y=h(0);g.a=function(E){var m=0,p=0,A=0,C=0;return Object(y.a)(E)?E.length===1?m=p=A=C=E[0]:E.length===2?(m=A=E[0],p=C=E[1]):E.length===3?(m=E[0],p=C=E[1],A=E[2]):(m=E[0],p=E[1],A=E[2],C=E[3]):m=p=A=C=E,{r1:m,r2:p,r3:A,r4:C}}},function(S,g,h){"use strict";g.a=function(y,E,m){return y<E?E:y>m?m:y}},function(S,g,h){"use strict";g.a=function(y,E){var m=E.toString(),p=m.indexOf(".");if(p===-1)return Math.round(y);var A=m.substr(p+1).length;return A>20&&(A=20),parseFloat(y.toFixed(A))}},function(S,g,h){"use strict";var y=h(5);g.a=function(E){return Object(y.a)(E)&&E%1!=0}},function(S,g,h){"use strict";var y=h(5);g.a=function(E){return Object(y.a)(E)&&E%2==0}},function(S,g,h){"use strict";var y=h(5),E=Number.isInteger?Number.isInteger:function(m){return Object(y.a)(m)&&m%1==0};g.a=E},function(S,g,h){"use strict";var y=h(5);g.a=function(E){return Object(y.a)(E)&&E<0}},function(S,g,h){"use strict";g.a=function(y,E,m){return m===void 0&&(m=1e-5),Math.abs(y-E)<m}},function(S,g,h){"use strict";var y=h(5);g.a=function(E){return Object(y.a)(E)&&E%2!=0}},function(S,g,h){"use strict";var y=h(5);g.a=function(E){return Object(y.a)(E)&&E>0}},function(S,g,h){"use strict";var y=h(2),E=h(0),m=h(3);g.a=function(p,A){if(Object(E.a)(p)){var C,N,P=p[0];return C=Object(m.a)(A)?A(p[0]):p[0][A],Object(y.a)(p,function(L){(N=Object(m.a)(A)?A(L):L[A])>C&&(P=L,C=N)}),P}}},function(S,g,h){"use strict";var y=h(2),E=h(0),m=h(3);g.a=function(p,A){if(Object(E.a)(p)){var C,N,P=p[0];return C=Object(m.a)(A)?A(p[0]):p[0][A],Object(y.a)(p,function(L){(N=Object(m.a)(A)?A(L):L[A])<C&&(P=L,C=N)}),P}}},function(S,g,h){"use strict";g.a=function(y,E){return(y%E+E)%E}},function(S,g,h){"use strict";var y=180/Math.PI;g.a=function(E){return y*E}},function(S,g,h){"use strict";g.a=parseInt},function(S,g,h){"use strict";var y=Math.PI/180;g.a=function(E){return y*E}},function(S,g,h){"use strict";var y=h(2);g.a=y.a},function(S,g,h){"use strict";var y=h(25);g.a=y.a},function(S,g,h){"use strict";var y=h(12),E=h(26);g.a=function(m,p){return Object(y.a)(Object(E.a)(m),p)}},function(S,g,h){"use strict";var y=h(10);g.a=function(E){return Object(y.a)(E).toLowerCase()}},function(S,g,h){"use strict";var y=h(10);g.a=function(E){var m=Object(y.a)(E);return m.charAt(0).toLowerCase()+m.substring(1)}},function(S,g,h){"use strict";g.a=function(y,E){return y&&E?y.replace(/\\?\{([^{}]+)\}/g,function(m,p){return m.charAt(0)==="\\"?m.slice(1):E[p]===void 0?"":E[p]}):y}},function(S,g,h){"use strict";var y=h(10);g.a=function(E){return Object(y.a)(E).toUpperCase()}},function(S,g,h){"use strict";var y=h(10);g.a=function(E){var m=Object(y.a)(E);return m.charAt(0).toUpperCase()+m.substring(1)}},function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Object(y.a)(E,"Arguments")}},function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Object(y.a)(E,"Boolean")}},function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Object(y.a)(E,"Date")}},function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Object(y.a)(E,"Error")}},function(S,g,h){"use strict";var y=h(5);g.a=function(E){return Object(y.a)(E)&&isFinite(E)}},function(S,g,h){"use strict";g.a=function(y){return y===null}},function(S,g,h){"use strict";var y=h(4);g.a=function(E){return Object(y.a)(E,"RegExp")}},function(S,g,h){"use strict";g.a=function(y){return y===void 0}},function(S,g,h){"use strict";g.a=function(y){return y instanceof Element||y instanceof HTMLDocument}},function(S,g,h){"use strict";g.a=function(y){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(E){return setTimeout(E,16)})(y)}},function(S,g,h){"use strict";g.a=function(y){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(y)}},function(S,g,h){"use strict";var y=h(16),E=h(3);g.a=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];for(var A=m[0],C=1;C<m.length;C++){var N=m[C];Object(E.a)(N)&&(N=N.prototype),Object(y.a)(A.prototype,N)}}},function(S,g,h){"use strict";var y=h(0);g.a=function E(m){if(O(m)!=="object"||m===null)return m;var p;if(Object(y.a)(m)){p=[];for(var A=0,C=m.length;A<C;A++)O(m[A])==="object"&&m[A]!=null?p[A]=E(m[A]):p[A]=m[A]}else for(var N in p={},m)O(m[N])==="object"&&m[N]!=null?p[N]=E(m[N]):p[N]=m[N];return p}},function(S,g,h){"use strict";g.a=function(y,E,m){var p;return function(){var A=this,C=arguments,N=function(){p=null,m||y.apply(A,C)},P=m&&!p;clearTimeout(p),p=setTimeout(N,E),P&&y.apply(A,C)}}},function(S,g,h){"use strict";var y=h(3);g.a=function(E,m){if(!Object(y.a)(E))throw new TypeError("Expected a function");var p=function A(){for(var C=[],N=0;N<arguments.length;N++)C[N]=arguments[N];var P=m?m.apply(this,C):C[0],L=A.cache;if(L.has(P))return L.get(P);var z=E.apply(this,C);return L.set(P,z),z};return p.cache=new Map,p}},function(S,g,h){"use strict";var y=h(0),E=h(9);function m(p,A,C,N){for(var P in C=C||0,N=N||5,A)if(A.hasOwnProperty(P)){var L=A[P];L!==null&&Object(E.a)(L)?(Object(E.a)(p[P])||(p[P]={}),C<N?m(p[P],L,C+1,N):p[P]=A[P]):Object(y.a)(L)?(p[P]=[],p[P]=p[P].concat(L)):L!==void 0&&(p[P]=L)}}g.a=function(p){for(var A=[],C=1;C<arguments.length;C++)A[C-1]=arguments[C];for(var N=0;N<A.length;N+=1)m(p,A[N]);return p}},function(S,g,h){"use strict";var y=h(16),E=h(3);g.a=function(m,p,A,C){Object(E.a)(p)||(A=p,p=m,m=function(){});var N=Object.create?function(L,z){return Object.create(L,{constructor:{value:z}})}:function(L,z){function H(){}H.prototype=L;var re=new H;return re.constructor=z,re},P=N(p.prototype,m);return m.prototype=Object(y.a)(P,m.prototype),m.superclass=N(p.prototype,p),Object(y.a)(P,A),Object(y.a)(m,C),m}},function(S,g,h){"use strict";var y=h(1);g.a=function(E,m){if(!Object(y.a)(E))return-1;var p=Array.prototype.indexOf;if(p)return p.call(E,m);for(var A=-1,C=0;C<E.length;C++)if(E[C]===m){A=C;break}return A}},function(S,g,h){"use strict";var y=h(6),E=h(1),m=h(27),p=h(28),A=Object.prototype.hasOwnProperty;g.a=function(C){if(Object(y.a)(C))return!0;if(Object(E.a)(C))return!C.length;var N=Object(m.a)(C);if(N==="Map"||N==="Set")return!C.size;if(Object(p.a)(C))return!Object.keys(C).length;for(var P in C)if(A.call(C,P))return!1;return!0}},function(S,g,h){"use strict";var y=h(3),E=h(29);g.a=function(m,p,A){return Object(y.a)(A)?!!A(m,p):Object(E.a)(m,p)}},function(S,g,h){"use strict";var y=h(2),E=h(1);g.a=function(m,p){if(!Object(E.a)(m))return m;var A=[];return Object(y.a)(m,function(C,N){A.push(p(C,N))}),A}},function(S,g,h){"use strict";var y=h(6),E=h(13),m=function(p){return p};g.a=function(p,A){A===void 0&&(A=m);var C={};return Object(E.a)(p)&&!Object(y.a)(p)&&Object.keys(p).forEach(function(N){C[N]=A(p[N],N)}),C}},function(S,g,h){"use strict";var y=h(8);g.a=function(E,m,p){for(var A=0,C=Object(y.a)(m)?m.split("."):m;E&&A<C.length;)E=E[C[A++]];return E===void 0||A<C.length?p:E}},function(S,g,h){"use strict";var y=h(13),E=h(8),m=h(5);g.a=function(p,A,C){var N=p,P=Object(E.a)(A)?A.split("."):A;return P.forEach(function(L,z){z<P.length-1?(Object(y.a)(N[L])||(N[L]=Object(m.a)(P[z+1])?[]:{}),N=N[L]):N[L]=C}),p}},function(S,g,h){"use strict";var y=h(2),E=h(9),m=Object.prototype.hasOwnProperty;g.a=function(p,A){if(p===null||!Object(E.a)(p))return{};var C={};return Object(y.a)(A,function(N){m.call(p,N)&&(C[N]=p[N])}),C}},function(S,g,h){"use strict";g.a=function(y,E,m){var p,A,C,N,P=0;m||(m={});var L=function(){P=m.leading===!1?0:Date.now(),p=null,N=y.apply(A,C),p||(A=C=null)},z=function(){var H=Date.now();P||m.leading!==!1||(P=H);var re=E-(H-P);return A=this,C=arguments,re<=0||re>E?(p&&(clearTimeout(p),p=null),P=H,N=y.apply(A,C),p||(A=C=null)):p||m.trailing===!1||(p=setTimeout(L,re)),N};return z.cancel=function(){clearTimeout(p),P=0,p=A=C=null},z}},function(S,g,h){"use strict";var y=h(1);g.a=function(E){return Object(y.a)(E)?Array.prototype.slice.call(E):[]}},function(S,g,h){"use strict";var y={};g.a=function(E){return y[E=E||"g"]?y[E]+=1:y[E]=1,E+y[E]}},function(S,g,h){"use strict";g.a=function(){}},function(S,g,h){"use strict";g.a=function(y){return y}},function(S,g,h){"use strict";g.a=function(m){return Object(y.a)(m)?0:Object(E.a)(m)?m.length:Object.keys(m).length};var y=h(6),E=h(1)},function(S,g,h){"use strict";var y=function(){function E(){this.map={}}return E.prototype.has=function(m){return this.map[m]!==void 0},E.prototype.get=function(m,p){var A=this.map[m];return A===void 0?p:A},E.prototype.set=function(m,p){this.map[m]=p},E.prototype.clear=function(){this.map={}},E.prototype.delete=function(m){delete this.map[m]},E.prototype.size=function(){return Object.keys(this.map).length},E}();g.a=y},function(S,g){function h(E,m,p,A){A===void 0&&(A=[]);var C=this;C.w=E||0,C.h=m||0,C.y=p||0,C.x=0,C.c=A||[],C.cs=A.length,C.prelim=0,C.mod=0,C.shift=0,C.change=0,C.tl=null,C.tr=null,C.el=null,C.er=null,C.msel=0,C.mser=0}function y(E,m){var p=function A(C,N){var P=N?C.y:C.x;return C.children.forEach(function(L){P=Math.min(A(L,N),P)}),P}(E,m);(function A(C,N,P){P?C.y+=N:C.x+=N,C.children.forEach(function(L){A(L,N,P)})})(E,-p,m)}h.fromNode=function(E,m){if(!E)return null;var p=[];return E.children.forEach(function(A){p.push(h.fromNode(A,m))}),m?new h(E.height,E.width,E.x,p):new h(E.width,E.height,E.y,p)},S.exports=function(E,m){m===void 0&&(m={});var p=m.isHorizontal;function A(ae){ae.cs===0?(ae.el=ae,ae.er=ae,ae.msel=ae.mser=0):(ae.el=ae.c[0].el,ae.msel=ae.c[0].msel,ae.er=ae.c[ae.cs-1].er,ae.mser=ae.c[ae.cs-1].mser)}function C(ae,ue,xe){for(var ye=ae.c[ue-1],Y=ye.mod,Ce=ae.c[ue],ge=Ce.mod;ye!==null&&Ce!==null;){z(ye)>xe.low&&(xe=xe.nxt);var he=Y+ye.prelim+ye.w-(ge+Ce.prelim);he>0&&(ge+=he,N(ae,ue,xe.index,he));var Q=z(ye),W=z(Ce);Q<=W&&(ye=L(ye))!==null&&(Y+=ye.mod),Q>=W&&(Ce=P(Ce))!==null&&(ge+=Ce.mod)}!ye&&Ce?function(le,Oe,Te,se){var ee=le.c[0].el;ee.tl=Te;var te=se-Te.mod-le.c[0].msel;ee.mod+=te,ee.prelim-=te,le.c[0].el=le.c[Oe].el,le.c[0].msel=le.c[Oe].msel}(ae,ue,Ce,ge):ye&&!Ce&&function(le,Oe,Te,se){var ee=le.c[Oe].er;ee.tr=Te;var te=se-Te.mod-le.c[Oe].mser;ee.mod+=te,ee.prelim-=te,le.c[Oe].er=le.c[Oe-1].er,le.c[Oe].mser=le.c[Oe-1].mser}(ae,ue,ye,Y)}function N(ae,ue,xe,ye){ae.c[ue].mod+=ye,ae.c[ue].msel+=ye,ae.c[ue].mser+=ye,function(Y,Ce,ge,he){if(ge!==Ce-1){var Q=Ce-ge;Y.c[ge+1].shift+=he/Q,Y.c[Ce].shift-=he/Q,Y.c[Ce].change-=he-he/Q}}(ae,ue,xe,ye)}function P(ae){return ae.cs===0?ae.tl:ae.c[0]}function L(ae){return ae.cs===0?ae.tr:ae.c[ae.cs-1]}function z(ae){return ae.y+ae.h}function H(ae,ue,xe){for(;xe!==null&&ae>=xe.low;)xe=xe.nxt;return{low:ae,index:ue,nxt:xe}}(function ae(ue,xe,ye){ye===void 0&&(ye=0),xe?(ue.x=ye,ye+=ue.width):(ue.y=ye,ye+=ue.height),ue.children.forEach(function(Y){ae(Y,xe,ye)})})(E,p);var re=h.fromNode(E,p);return function ae(ue){if(ue.cs!==0){ae(ue.c[0]);for(var xe=H(z(ue.c[0].el),0,null),ye=1;ye<ue.cs;++ye){ae(ue.c[ye]);var Y=z(ue.c[ye].er);C(ue,ye,xe),xe=H(Y,ye,xe)}(function(Ce){Ce.prelim=(Ce.c[0].prelim+Ce.c[0].mod+Ce.c[Ce.cs-1].mod+Ce.c[Ce.cs-1].prelim+Ce.c[Ce.cs-1].w)/2-Ce.w/2})(ue),A(ue)}else A(ue)}(re),function ae(ue,xe){xe+=ue.mod,ue.x=ue.prelim+xe,function(Y){for(var Ce=0,ge=0,he=0;he<Y.cs;he++)Ce+=Y.c[he].shift,ge+=Ce+Y.c[he].change,Y.c[he].mod+=ge}(ue);for(var ye=0;ye<ue.cs;ye++)ae(ue.c[ye],xe)}(re,0),function ae(ue,xe,ye){ye?xe.y=ue.x:xe.x=ue.x,ue.c.forEach(function(Y,Ce){ae(Y,xe.children[Ce],ye)})}(re,E,p),y(E,p),E}},function(S,g,h){var y=h(11),E=h(115),m=h(17),p=h(7),A=function(N){var P,L;function z(){return N.apply(this,arguments)||this}return L=N,(P=z).prototype=Object.create(L.prototype),P.prototype.constructor=P,P.__proto__=L,z.prototype.execute=function(){return this.rootNode.width=0,m(this.rootNode,this.options,E)},z}(y),C={};S.exports=function(N,P){return P=p.assign({},C,P),new A(N,P).execute()}},function(S,g,h){var y=h(7);function E(p,A){p===void 0&&(p=0),A===void 0&&(A=[]);var C=this;C.x=C.y=0,C.leftChild=C.rightChild=null,C.height=0,C.children=A}var m={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};S.exports=function(p,A){A===void 0&&(A={}),A=y.assign({},m,A);var C,N=0,P=function L(z){if(!z)return null;z.width=0,z.depth&&z.depth>N&&(N=z.depth);var H=z.children,re=H.length,ae=new E(z.height,[]);return H.forEach(function(ue,xe){var ye=L(ue);ae.children.push(ye),xe===0&&(ae.leftChild=ye),xe===re-1&&(ae.rightChild=ye)}),ae.originNode=z,ae.isLeaf=z.isLeaf(),ae}(p);return function L(z){if(z.isLeaf||z.children.length===0)z.drawingDepth=N;else{var H=z.children.map(function(ae){return L(ae)}),re=Math.min.apply(null,H);z.drawingDepth=re-1}return z.drawingDepth}(P),function L(z){z.x=z.drawingDepth*A.rankSep,z.isLeaf?(z.y=0,C&&(z.y=C.y+C.height+A.nodeSep,z.originNode.parent!==C.originNode.parent&&(z.y+=A.subTreeSep)),C=z):(z.children.forEach(function(H){L(H)}),z.y=(z.leftChild.y+z.rightChild.y)/2)}(P),function L(z,H,re){re?(H.x=z.x,H.y=z.y):(H.x=z.y,H.y=z.x),z.children.forEach(function(ae,ue){L(ae,H.children[ue],re)})}(P,p,A.isHorizontal),p}},function(S,g,h){var y=h(11),E=h(117),m=h(30),p=h(7),A=["LR","RL","H"],C=A[0],N=function(L){var z,H;function re(){return L.apply(this,arguments)||this}return H=L,(z=re).prototype=Object.create(H.prototype),z.prototype.constructor=z,z.__proto__=H,re.prototype.execute=function(){var ae=this.options,ue=this.rootNode;ae.isHorizontal=!0;var xe=ae.indent,ye=xe===void 0?20:xe,Y=ae.dropCap,Ce=Y===void 0||Y,ge=ae.direction||C;if(ge&&A.indexOf(ge)===-1)throw new TypeError("Invalid direction: "+ge);if(ge===A[0])E(ue,ye,Ce);else if(ge===A[1])E(ue,ye,Ce),ue.right2left();else if(ge===A[2]){var he=m(ue,ae),Q=he.left,W=he.right;E(Q,ye,Ce),Q.right2left(),E(W,ye,Ce);var le=Q.getBoundingBox();W.translate(le.width,0),ue.x=W.x-ue.width/2}return ue},re}(y),P={};S.exports=function(L,z){return z=p.assign({},P,z),new N(L,z).execute()}},function(S,g){S.exports=function(h,y,E){var m=null;h.eachNode(function(p){(function(A,C,N,P){if(!P)try{if(A.id===A.parent.children[0].id)return A.x+=N*A.depth,void(A.y=C?C.y:0)}catch(L){}A.x+=N*A.depth,A.y=C?C.y+C.height:0})(p,m,y,E),m=p})}},function(S,g,h){var y=h(11),E=h(119),m=h(17),p=h(7),A=function(N){var P,L;function z(){return N.apply(this,arguments)||this}return L=N,(P=z).prototype=Object.create(L.prototype),P.prototype.constructor=P,P.__proto__=L,z.prototype.execute=function(){return m(this.rootNode,this.options,E)},z}(y),C={};S.exports=function(N,P){return P=p.assign({},C,P),new A(N,P).execute()}},function(S,g,h){var y=h(7),E={getSubTreeSep:function(){return 0}};S.exports=function(m,p){p===void 0&&(p={}),p=y.assign({},E,p),m.parent={x:0,width:0,height:0,y:0},m.BFTraverse(function(A){A.x=A.parent.x+A.parent.width}),m.parent=null,function A(C,N){var P=0;return C.children.length?C.children.forEach(function(L){P+=A(L,N)}):P=C.height,C._subTreeSep=N.getSubTreeSep(C.data),C.totalHeight=Math.max(C.height,P)+2*C._subTreeSep,C.totalHeight}(m,p),m.startY=0,m.y=m.totalHeight/2-m.height/2,m.eachNode(function(A){var C=A.children,N=C.length;if(N){var P=C[0];if(P.startY=A.startY+A._subTreeSep,N===1)P.y=A.y+A.height/2-P.height/2;else{P.y=P.startY+P.totalHeight/2-P.height/2;for(var L=1;L<N;L++){var z=C[L];z.startY=C[L-1].startY+C[L-1].totalHeight,z.y=z.startY+z.totalHeight/2-z.height/2}}}}),function A(C){var N=C.children,P=N.length;if(P){N.forEach(function(ue){A(ue)});var L=N[0],z=N[P-1],H=z.y-L.y+z.height,re=0;if(N.forEach(function(ue){re+=ue.totalHeight}),H>C.height)C.y=L.y+H/2-C.height/2;else if(N.length!==1||C.height>re){var ae=C.y+(C.height-H)/2-L.y;N.forEach(function(ue){ue.translate(0,ae)})}else C.y=(L.y+L.height/2+z.y+z.height/2)/2-C.height/2}}(m)}}])},O(b)==="object"&&O(f)==="object"?f.exports=x():(M=[],(_=typeof(c=x)=="function"?c.apply(b,M):c)===void 0||(f.exports=_))}).call(this,o(87)(R))},function(R,b,o){"use strict";function f(p){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(p)}var c=o(298),M=o(302),_=[].slice,x=["keyword","gray","hex"],O={};Object.keys(M).forEach(function(p){O[_.call(M[p].labels).sort().join("")]=p});var S={};function g(p,A){if(!(this instanceof g))return new g(p,A);if(A&&A in x&&(A=null),A&&!(A in M))throw new Error("Unknown model: "+A);var C,N;if(p==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(p instanceof g)this.model=p.model,this.color=p.color.slice(),this.valpha=p.valpha;else if(typeof p=="string"){var P=c.get(p);if(P===null)throw new Error("Unable to parse color from string: "+p);this.model=P.model,N=M[this.model].channels,this.color=P.value.slice(0,N),this.valpha=typeof P.value[N]=="number"?P.value[N]:1}else if(p.length){this.model=A||"rgb",N=M[this.model].channels;var L=_.call(p,0,N);this.color=m(L,N),this.valpha=typeof p[N]=="number"?p[N]:1}else if(typeof p=="number")p&=16777215,this.model="rgb",this.color=[p>>16&255,p>>8&255,255&p],this.valpha=1;else{this.valpha=1;var z=Object.keys(p);"alpha"in p&&(z.splice(z.indexOf("alpha"),1),this.valpha=typeof p.alpha=="number"?p.alpha:0);var H=z.sort().join("");if(!(H in O))throw new Error("Unable to parse color from object: "+JSON.stringify(p));this.model=O[H];var re=M[this.model].labels,ae=[];for(C=0;C<re.length;C++)ae.push(p[re[C]]);this.color=m(ae)}if(S[this.model])for(N=M[this.model].channels,C=0;C<N;C++){var ue=S[this.model][C];ue&&(this.color[C]=ue(this.color[C]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function h(p,A,C){return(p=Array.isArray(p)?p:[p]).forEach(function(N){(S[N]||(S[N]=[]))[A]=C}),p=p[0],function(N){var P;return arguments.length?(C&&(N=C(N)),(P=this[p]()).color[A]=N,P):(P=this[p]().color[A],C&&(P=C(P)),P)}}function y(p){return function(A){return Math.max(0,Math.min(p,A))}}function E(p){return Array.isArray(p)?p:[p]}function m(p,A){for(var C=0;C<A;C++)typeof p[C]!="number"&&(p[C]=0);return p}g.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(p){var A=this.model in c.to?this:this.rgb(),C=(A=A.round(typeof p=="number"?p:1)).valpha===1?A.color:A.color.concat(this.valpha);return c.to[A.model](C)},percentString:function(p){var A=this.rgb().round(typeof p=="number"?p:1),C=A.valpha===1?A.color:A.color.concat(this.valpha);return c.to.rgb.percent(C)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var p={},A=M[this.model].channels,C=M[this.model].labels,N=0;N<A;N++)p[C[N]]=this.color[N];return this.valpha!==1&&(p.alpha=this.valpha),p},unitArray:function(){var p=this.rgb().color;return p[0]/=255,p[1]/=255,p[2]/=255,this.valpha!==1&&p.push(this.valpha),p},unitObject:function(){var p=this.rgb().object();return p.r/=255,p.g/=255,p.b/=255,this.valpha!==1&&(p.alpha=this.valpha),p},round:function(p){return p=Math.max(p||0,0),new g(this.color.map(function(A){return function(C){return function(N,P){return Number(N.toFixed(P))}(C,A)}}(p)).concat(this.valpha),this.model)},alpha:function(p){return arguments.length?new g(this.color.concat(Math.max(0,Math.min(1,p))),this.model):this.valpha},red:h("rgb",0,y(255)),green:h("rgb",1,y(255)),blue:h("rgb",2,y(255)),hue:h(["hsl","hsv","hsl","hwb","hcg"],0,function(p){return(p%360+360)%360}),saturationl:h("hsl",1,y(100)),lightness:h("hsl",2,y(100)),saturationv:h("hsv",1,y(100)),value:h("hsv",2,y(100)),chroma:h("hcg",1,y(100)),gray:h("hcg",2,y(100)),white:h("hwb",1,y(100)),wblack:h("hwb",2,y(100)),cyan:h("cmyk",0,y(100)),magenta:h("cmyk",1,y(100)),yellow:h("cmyk",2,y(100)),black:h("cmyk",3,y(100)),x:h("xyz",0,y(100)),y:h("xyz",1,y(100)),z:h("xyz",2,y(100)),l:h("lab",0,y(100)),a:h("lab",1),b:h("lab",2),keyword:function(p){return arguments.length?new g(p):M[this.model].keyword(this.color)},hex:function(p){return arguments.length?new g(p):c.to.hex(this.rgb().round().color)},rgbNumber:function(){var p=this.rgb().color;return(255&p[0])<<16|(255&p[1])<<8|255&p[2]},luminosity:function(){for(var p=this.rgb().color,A=[],C=0;C<p.length;C++){var N=p[C]/255;A[C]=N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4)}return .2126*A[0]+.7152*A[1]+.0722*A[2]},contrast:function(p){var A=this.luminosity(),C=p.luminosity();return A>C?(A+.05)/(C+.05):(C+.05)/(A+.05)},level:function(p){var A=this.contrast(p);return A>=7.1?"AAA":A>=4.5?"AA":""},isDark:function(){var p=this.rgb().color;return(299*p[0]+587*p[1]+114*p[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var p=this.rgb(),A=0;A<3;A++)p.color[A]=255-p.color[A];return p},lighten:function(p){var A=this.hsl();return A.color[2]+=A.color[2]*p,A},darken:function(p){var A=this.hsl();return A.color[2]-=A.color[2]*p,A},saturate:function(p){var A=this.hsl();return A.color[1]+=A.color[1]*p,A},desaturate:function(p){var A=this.hsl();return A.color[1]-=A.color[1]*p,A},whiten:function(p){var A=this.hwb();return A.color[1]+=A.color[1]*p,A},blacken:function(p){var A=this.hwb();return A.color[2]+=A.color[2]*p,A},grayscale:function(){var p=this.rgb().color,A=.3*p[0]+.59*p[1]+.11*p[2];return g.rgb(A,A,A)},fade:function(p){return this.alpha(this.valpha-this.valpha*p)},opaquer:function(p){return this.alpha(this.valpha+this.valpha*p)},rotate:function(p){var A=this.hsl(),C=A.color[0];return C=(C=(C+p)%360)<0?360+C:C,A.color[0]=C,A},mix:function(p,A){if(!p||!p.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+f(p));var C=p.rgb(),N=this.rgb(),P=A===void 0?.5:A,L=2*P-1,z=C.alpha()-N.alpha(),H=((L*z==-1?L:(L+z)/(1+L*z))+1)/2,re=1-H;return g.rgb(H*C.red()+re*N.red(),H*C.green()+re*N.green(),H*C.blue()+re*N.blue(),C.alpha()*P+N.alpha()*(1-P))}},Object.keys(M).forEach(function(p){if(x.indexOf(p)===-1){var A=M[p].channels;g.prototype[p]=function(){if(this.model===p)return new g(this);if(arguments.length)return new g(arguments,p);var C=typeof arguments[A]=="number"?A:this.valpha;return new g(E(M[this.model][p].raw(this.color)).concat(C),p)},g[p]=function(C){return typeof C=="number"&&(C=m(_.call(arguments),A)),new g(C,p)}}}),R.exports=g},function(R,b,o){var f=o(63),c=o(43);R.exports=function(M){if(!c(M))return!1;var _=f(M);return _=="[object Function]"||_=="[object GeneratorFunction]"||_=="[object AsyncFunction]"||_=="[object Proxy]"}},function(R,b,o){var f=o(101),c=o(102);R.exports=function(M,_,x,O){var S=!x;x||(x={});for(var g=-1,h=_.length;++g<h;){var y=_[g],E=O?O(x[y],M[y],y,x,M):void 0;E===void 0&&(E=M[y]),S?c(x,y,E):f(x,y,E)}return x}},function(R,b,o){var f=o(338),c=o(49),M=Object.prototype,_=M.hasOwnProperty,x=M.propertyIsEnumerable,O=f(function(){return arguments}())?f:function(S){return c(S)&&_.call(S,"callee")&&!x.call(S,"callee")};R.exports=O},function(R,b){R.exports=function(o){return o.webpackPolyfill||(o.deprecate=function(){},o.paths=[],o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),o.webpackPolyfill=1),o}},function(R,b,o){var f=o(340),c=o(104),M=o(148),_=M&&M.isTypedArray,x=_?c(_):f;R.exports=x},function(R,b,o){var f=o(74);R.exports=function(c){if(typeof c=="string"||f(c))return c;var M=c+"";return M=="0"&&1/c==-1/0?"-0":M}},function(R,b,o){"use strict";function f(x){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}Object.defineProperty(b,"__esModule",{value:!0}),b.circularDependencyToException=b.listMetadataForTarget=b.listRegisteredBindingsForServiceIdentifier=b.getServiceIdentifierAsString=b.getFunctionName=void 0;var c=o(40);function M(x){return typeof x=="function"?x.name:f(x)==="symbol"?x.toString():x}function _(x){if(x.name)return x.name;var O=x.toString(),S=O.match(/^function\s*([^\s(]+)/);return S?S[1]:"Anonymous function: "+O}b.getServiceIdentifierAsString=M,b.listRegisteredBindingsForServiceIdentifier=function(x,O,S){var g="",h=S(x,O);return h.length!==0&&(g=`
Registered bindings:`,h.forEach(function(y){var E="Object";y.implementationType!==null&&(E=_(y.implementationType)),g=g+`
 `+E,y.constraint.metaData&&(g=g+" - "+y.constraint.metaData)})),g},b.circularDependencyToException=function x(O){O.childRequests.forEach(function(S){if(function h(y,E){return y.parentRequest!==null&&(y.parentRequest.serviceIdentifier===E||h(y.parentRequest,E))}(S,S.serviceIdentifier)){var g=function(h){return function y(E,m){m===void 0&&(m=[]);var p=M(E.serviceIdentifier);return m.push(p),E.parentRequest!==null?y(E.parentRequest,m):m}(h).reverse().join(" --> ")}(S);throw new Error(c.CIRCULAR_DEPENDENCY+" "+g)}x(S)})},b.listMetadataForTarget=function(x,O){if(O.isTagged()||O.isNamed()){var S="",g=O.getNamedTag(),h=O.getCustomTags();return g!==null&&(S+=g.toString()+`
`),h!==null&&h.forEach(function(y){S+=y.toString()+`
`})," "+x+`
 `+x+" - "+S}return" "+x},b.getFunctionName=_},function(R,b,o){"use strict";o.d(b,"a",function(){return Me}),o(228);var f,c,M,_,x,O=o(5),S=o(271),g=o.n(S),h=o(25),y=o(10),E=o.n(y),m=o(6),p=o.n(m),A=o(7),C=o.n(A),N=o(11),P=o.n(N),L=(o(29),o(13)),z=o(35),H=(f=Object(O.injectable)(),c=Object(O.inject)(L.a.RenderEngine),f((_=function(){function Ae(){p()(this,Ae),E()(this,"engine",x,this),this.resourcePool={}}return C()(Ae,[{key:"getOrCreateResource",value:function(Le){if(!this.resourcePool[Le.name]){var Se=Le.descriptor,Re=Se.width,Ke=Se.height,Je=Se.usage;this.resourcePool[Le.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:Re,height:Ke,wrapS:z.a.CLAMP_TO_EDGE,wrapT:z.a.CLAMP_TO_EDGE,usage:Je})})}return this.resourcePool[Le.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),Ae}(),x=P()(_.prototype,"engine",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=_))||M),re=o(132),ae=o(134),ue=o(119),xe=o(120),ye=o(121),Y=o(122),Ce=o(123),ge=o(124),he=o(81),Q=o(68),W=o(50),le=o(126),Oe=o(127),Te=o(23),se=o.n(Te),ee=o(24),te=o.n(ee),U=o(18),X=o.n(U);function B(Ae){var Le=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Se){return!1}}();return function(){var Se,Re=X()(Ae);if(Le){var Ke=X()(this).constructor;Se=Reflect.construct(Re,arguments,Ke)}else Se=Re.apply(this,arguments);return te()(this,Se)}}var J=function(Ae){se()(Se,Ae);var Le=B(Se);function Se(Re){var Ke;return p()(this,Se),(Ke=Le.call(this,Re)).name=void 0,Ke.name=Re.name||"",Ke}return Se}(h.a),ne=o(128),ie=o(129),Z=o(130),fe=o(131),_e=o(133),je=new O.Container;g()(je,!1);function Me(){var Ae=new O.Container;return Ae.parent=je,Ae.bind(L.a.Systems).to(ne.a).inSingletonScope().whenTargetNamed(L.a.SceneGraphSystem),Ae.bind(L.a.Systems).to(re.a).inSingletonScope().whenTargetNamed(L.a.FrameGraphSystem),Ae.bind(L.a.Systems).to(ge.a).inSingletonScope().whenTargetNamed(L.a.MeshSystem),Ae.bind(L.a.Systems).to(ue.a).inSingletonScope().whenTargetNamed(L.a.GeometrySystem),Ae.bind(L.a.Systems).to(ye.a).inSingletonScope().whenTargetNamed(L.a.MaterialSystem),Ae.bind(L.a.Systems).to(le.a).inSingletonScope().whenTargetNamed(L.a.RendererSystem),Ae.bind(L.a.ResourcePool).to(H).inSingletonScope(),Ae.bind(L.a.ConfigService).to(Z.a).inSingletonScope(),Ae.bind(L.a.InteractorService).to(fe.a).inSingletonScope(),Ae.bind(L.a.RenderPass).to(W.a).inSingletonScope().whenTargetNamed(W.a.IDENTIFIER),Ae.bind(L.a.RenderPass).to(he.a).inSingletonScope().whenTargetNamed(he.a.IDENTIFIER),Ae.bind(L.a.RenderPass).to(Q.a).inSingletonScope().whenTargetNamed(Q.a.IDENTIFIER),Ae.bind(L.a.RenderPassFactory).toFactory(function(Le){return function(Se){return Le.container.getNamed(L.a.RenderPass,Se)}}),Ae}je.bind(L.a.ShaderModuleService).to(_e.a).inSingletonScope(),je.bind(L.a.NameComponentManager).toConstantValue(new h.b(J)),je.bind(L.a.HierarchyComponentManager).toConstantValue(new h.b(Oe.a)),je.bind(L.a.TransformComponentManager).toConstantValue(new h.b(ie.a)),je.bind(L.a.MeshComponentManager).toConstantValue(new h.b(Ce.a)),je.bind(L.a.CullableComponentManager).toConstantValue(new h.b(Y.a)),je.bind(L.a.GeometryComponentManager).toConstantValue(new h.b(ae.a)),je.bind(L.a.MaterialComponentManager).toConstantValue(new h.b(xe.a))},function(R,b,o){"use strict";o.d(b,"a",function(){return x});var f=o(15);function c(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])}function M(O,S){return c(O)*c(S)?(O[0]*S[0]+O[1]*S[1])/(c(O)*c(S)):1}function _(O,S){return(O[0]*S[1]<O[1]*S[0]?-1:1)*Math.acos(M(O,S))}function x(O,S){var g=S[1],h=S[2],y=Object(f.m)(Object(f.o)(S[3]),2*Math.PI),E=S[4],m=S[5],p=O[0],A=O[1],C=S[6],N=S[7],P=Math.cos(y)*(p-C)/2+Math.sin(y)*(A-N)/2,L=-1*Math.sin(y)*(p-C)/2+Math.cos(y)*(A-N)/2,z=P*P/(g*g)+L*L/(h*h);z>1&&(g*=Math.sqrt(z),h*=Math.sqrt(z));var H=g*g*(L*L)+h*h*(P*P),re=H?Math.sqrt((g*g*(h*h)-H)/H):1;E===m&&(re*=-1),isNaN(re)&&(re=0);var ae=h?re*g*L/h:0,ue=g?re*-h*P/g:0,xe=(p+C)/2+Math.cos(y)*ae-Math.sin(y)*ue,ye=(A+N)/2+Math.sin(y)*ae+Math.cos(y)*ue,Y=[(P-ae)/g,(L-ue)/h],Ce=[(-1*P-ae)/g,(-1*L-ue)/h],ge=_([1,0],Y),he=_(Y,Ce);return M(Y,Ce)<=-1&&(he=Math.PI),M(Y,Ce)>=1&&(he=0),m===0&&he>0&&(he-=2*Math.PI),m===1&&he<0&&(he+=2*Math.PI),{cx:xe,cy:ye,rx:Object(f.j)(O,[C,N])?0:g,ry:Object(f.j)(O,[C,N])?0:h,startAngle:ge,endAngle:ge+he,xRotation:y,arcFlag:E,sweepFlag:m}}},function(R,b,o){var f;function c(M){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(M)}(function(M){var _=/^\s+/,x=/\s+$/,O=0,S=M.round,g=M.min,h=M.max,y=M.random;function E(Z,fe){if(fe=fe||{},(Z=Z||"")instanceof E)return Z;if(!(this instanceof E))return new E(Z,fe);var _e=function(je){var Me={r:0,g:0,b:0},Ae=1,Le=null,Se=null,Re=null,Ke=!1,Je=!1;typeof je=="string"&&(je=function(At){At=At.replace(_,"").replace(x,"").toLowerCase();var It,Kt=!1;if(he[At])At=he[At],Kt=!0;else if(At=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(It=ne.rgb.exec(At))?{r:It[1],g:It[2],b:It[3]}:(It=ne.rgba.exec(At))?{r:It[1],g:It[2],b:It[3],a:It[4]}:(It=ne.hsl.exec(At))?{h:It[1],s:It[2],l:It[3]}:(It=ne.hsla.exec(At))?{h:It[1],s:It[2],l:It[3],a:It[4]}:(It=ne.hsv.exec(At))?{h:It[1],s:It[2],v:It[3]}:(It=ne.hsva.exec(At))?{h:It[1],s:It[2],v:It[3],a:It[4]}:(It=ne.hex8.exec(At))?{r:Te(It[1]),g:Te(It[2]),b:Te(It[3]),a:U(It[4]),format:Kt?"name":"hex8"}:(It=ne.hex6.exec(At))?{r:Te(It[1]),g:Te(It[2]),b:Te(It[3]),format:Kt?"name":"hex"}:(It=ne.hex4.exec(At))?{r:Te(It[1]+""+It[1]),g:Te(It[2]+""+It[2]),b:Te(It[3]+""+It[3]),a:U(It[4]+""+It[4]),format:Kt?"name":"hex8"}:(It=ne.hex3.exec(At))?{r:Te(It[1]+""+It[1]),g:Te(It[2]+""+It[2]),b:Te(It[3]+""+It[3]),format:Kt?"name":"hex"}:!1}(je)),c(je)=="object"&&(ie(je.r)&&ie(je.g)&&ie(je.b)?(nt=je.r,dt=je.g,kt=je.b,Me={r:255*le(nt,255),g:255*le(dt,255),b:255*le(kt,255)},Ke=!0,Je=String(je.r).substr(-1)==="%"?"prgb":"rgb"):ie(je.h)&&ie(je.s)&&ie(je.v)?(Le=ee(je.s),Se=ee(je.v),Me=function(At,It,Kt){At=6*le(At,360),It=le(It,100),Kt=le(Kt,100);var Qt=M.floor(At),tr=At-Qt,nr=Kt*(1-It),Mr=Kt*(1-tr*It),ar=Kt*(1-(1-tr)*It),yr=Qt%6;return{r:255*[Kt,Mr,nr,nr,ar,Kt][yr],g:255*[ar,Kt,Kt,Mr,nr,nr][yr],b:255*[nr,nr,ar,Kt,Kt,Mr][yr]}}(je.h,Le,Se),Ke=!0,Je="hsv"):ie(je.h)&&ie(je.s)&&ie(je.l)&&(Le=ee(je.s),Re=ee(je.l),Me=function(At,It,Kt){var Qt,tr,nr;function Mr(mr,Rr,pr){return pr<0&&(pr+=1),pr>1&&(pr-=1),pr<1/6?mr+6*(Rr-mr)*pr:pr<.5?Rr:pr<2/3?mr+(Rr-mr)*(2/3-pr)*6:mr}if(At=le(At,360),It=le(It,100),Kt=le(Kt,100),It===0)Qt=tr=nr=Kt;else{var ar=Kt<.5?Kt*(1+It):Kt+It-Kt*It,yr=2*Kt-ar;Qt=Mr(yr,ar,At+1/3),tr=Mr(yr,ar,At),nr=Mr(yr,ar,At-1/3)}return{r:255*Qt,g:255*tr,b:255*nr}}(je.h,Le,Re),Ke=!0,Je="hsl"),je.hasOwnProperty("a")&&(Ae=je.a));var nt,dt,kt;return Ae=W(Ae),{ok:Ke,format:je.format||Je,r:g(255,h(Me.r,0)),g:g(255,h(Me.g,0)),b:g(255,h(Me.b,0)),a:Ae}}(Z);this._originalInput=Z,this._r=_e.r,this._g=_e.g,this._b=_e.b,this._a=_e.a,this._roundA=S(100*this._a)/100,this._format=fe.format||_e.format,this._gradientType=fe.gradientType,this._r<1&&(this._r=S(this._r)),this._g<1&&(this._g=S(this._g)),this._b<1&&(this._b=S(this._b)),this._ok=_e.ok,this._tc_id=O++}function m(Z,fe,_e){Z=le(Z,255),fe=le(fe,255),_e=le(_e,255);var je,Me,Ae=h(Z,fe,_e),Le=g(Z,fe,_e),Se=(Ae+Le)/2;if(Ae==Le)je=Me=0;else{var Re=Ae-Le;switch(Me=Se>.5?Re/(2-Ae-Le):Re/(Ae+Le),Ae){case Z:je=(fe-_e)/Re+(fe<_e?6:0);break;case fe:je=(_e-Z)/Re+2;break;case _e:je=(Z-fe)/Re+4}je/=6}return{h:je,s:Me,l:Se}}function p(Z,fe,_e){Z=le(Z,255),fe=le(fe,255),_e=le(_e,255);var je,Me,Ae=h(Z,fe,_e),Le=g(Z,fe,_e),Se=Ae,Re=Ae-Le;if(Me=Ae===0?0:Re/Ae,Ae==Le)je=0;else{switch(Ae){case Z:je=(fe-_e)/Re+(fe<_e?6:0);break;case fe:je=(_e-Z)/Re+2;break;case _e:je=(Z-fe)/Re+4}je/=6}return{h:je,s:Me,v:Se}}function A(Z,fe,_e,je){var Me=[se(S(Z).toString(16)),se(S(fe).toString(16)),se(S(_e).toString(16))];return je&&Me[0].charAt(0)==Me[0].charAt(1)&&Me[1].charAt(0)==Me[1].charAt(1)&&Me[2].charAt(0)==Me[2].charAt(1)?Me[0].charAt(0)+Me[1].charAt(0)+Me[2].charAt(0):Me.join("")}function C(Z,fe,_e,je){return[se(te(je)),se(S(Z).toString(16)),se(S(fe).toString(16)),se(S(_e).toString(16))].join("")}function N(Z,fe){fe=fe===0?0:fe||10;var _e=E(Z).toHsl();return _e.s-=fe/100,_e.s=Oe(_e.s),E(_e)}function P(Z,fe){fe=fe===0?0:fe||10;var _e=E(Z).toHsl();return _e.s+=fe/100,_e.s=Oe(_e.s),E(_e)}function L(Z){return E(Z).desaturate(100)}function z(Z,fe){fe=fe===0?0:fe||10;var _e=E(Z).toHsl();return _e.l+=fe/100,_e.l=Oe(_e.l),E(_e)}function H(Z,fe){fe=fe===0?0:fe||10;var _e=E(Z).toRgb();return _e.r=h(0,g(255,_e.r-S(-fe/100*255))),_e.g=h(0,g(255,_e.g-S(-fe/100*255))),_e.b=h(0,g(255,_e.b-S(-fe/100*255))),E(_e)}function re(Z,fe){fe=fe===0?0:fe||10;var _e=E(Z).toHsl();return _e.l-=fe/100,_e.l=Oe(_e.l),E(_e)}function ae(Z,fe){var _e=E(Z).toHsl(),je=(_e.h+fe)%360;return _e.h=je<0?360+je:je,E(_e)}function ue(Z){var fe=E(Z).toHsl();return fe.h=(fe.h+180)%360,E(fe)}function xe(Z){var fe=E(Z).toHsl(),_e=fe.h;return[E(Z),E({h:(_e+120)%360,s:fe.s,l:fe.l}),E({h:(_e+240)%360,s:fe.s,l:fe.l})]}function ye(Z){var fe=E(Z).toHsl(),_e=fe.h;return[E(Z),E({h:(_e+90)%360,s:fe.s,l:fe.l}),E({h:(_e+180)%360,s:fe.s,l:fe.l}),E({h:(_e+270)%360,s:fe.s,l:fe.l})]}function Y(Z){var fe=E(Z).toHsl(),_e=fe.h;return[E(Z),E({h:(_e+72)%360,s:fe.s,l:fe.l}),E({h:(_e+216)%360,s:fe.s,l:fe.l})]}function Ce(Z,fe,_e){fe=fe||6,_e=_e||30;var je=E(Z).toHsl(),Me=360/_e,Ae=[E(Z)];for(je.h=(je.h-(Me*fe>>1)+720)%360;--fe;)je.h=(je.h+Me)%360,Ae.push(E(je));return Ae}function ge(Z,fe){fe=fe||6;for(var _e=E(Z).toHsv(),je=_e.h,Me=_e.s,Ae=_e.v,Le=[],Se=1/fe;fe--;)Le.push(E({h:je,s:Me,v:Ae})),Ae=(Ae+Se)%1;return Le}E.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(299*Z.r+587*Z.g+114*Z.b)/1e3},getLuminance:function(){var Z,fe,_e,je=this.toRgb();return Z=je.r/255,fe=je.g/255,_e=je.b/255,.2126*(Z<=.03928?Z/12.92:M.pow((Z+.055)/1.055,2.4))+.7152*(fe<=.03928?fe/12.92:M.pow((fe+.055)/1.055,2.4))+.0722*(_e<=.03928?_e/12.92:M.pow((_e+.055)/1.055,2.4))},setAlpha:function(Z){return this._a=W(Z),this._roundA=S(100*this._a)/100,this},toHsv:function(){var Z=p(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=p(this._r,this._g,this._b),fe=S(360*Z.h),_e=S(100*Z.s),je=S(100*Z.v);return this._a==1?"hsv("+fe+", "+_e+"%, "+je+"%)":"hsva("+fe+", "+_e+"%, "+je+"%, "+this._roundA+")"},toHsl:function(){var Z=m(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=m(this._r,this._g,this._b),fe=S(360*Z.h),_e=S(100*Z.s),je=S(100*Z.l);return this._a==1?"hsl("+fe+", "+_e+"%, "+je+"%)":"hsla("+fe+", "+_e+"%, "+je+"%, "+this._roundA+")"},toHex:function(Z){return A(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return function(fe,_e,je,Me,Ae){var Le=[se(S(fe).toString(16)),se(S(_e).toString(16)),se(S(je).toString(16)),se(te(Me))];return Ae&&Le[0].charAt(0)==Le[0].charAt(1)&&Le[1].charAt(0)==Le[1].charAt(1)&&Le[2].charAt(0)==Le[2].charAt(1)&&Le[3].charAt(0)==Le[3].charAt(1)?Le[0].charAt(0)+Le[1].charAt(0)+Le[2].charAt(0)+Le[3].charAt(0):Le.join("")}(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:S(this._r),g:S(this._g),b:S(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+S(this._r)+", "+S(this._g)+", "+S(this._b)+")":"rgba("+S(this._r)+", "+S(this._g)+", "+S(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:S(100*le(this._r,255))+"%",g:S(100*le(this._g,255))+"%",b:S(100*le(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+S(100*le(this._r,255))+"%, "+S(100*le(this._g,255))+"%, "+S(100*le(this._b,255))+"%)":"rgba("+S(100*le(this._r,255))+"%, "+S(100*le(this._g,255))+"%, "+S(100*le(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Q[A(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Z){var fe="#"+C(this._r,this._g,this._b,this._a),_e=fe,je=this._gradientType?"GradientType = 1, ":"";if(Z){var Me=E(Z);_e="#"+C(Me._r,Me._g,Me._b,Me._a)}return"progid:DXImageTransform.Microsoft.gradient("+je+"startColorstr="+fe+",endColorstr="+_e+")"},toString:function(Z){var fe=!!Z;Z=Z||this._format;var _e=!1,je=this._a<1&&this._a>=0;return fe||!je||Z!=="hex"&&Z!=="hex6"&&Z!=="hex3"&&Z!=="hex4"&&Z!=="hex8"&&Z!=="name"?(Z==="rgb"&&(_e=this.toRgbString()),Z==="prgb"&&(_e=this.toPercentageRgbString()),Z!=="hex"&&Z!=="hex6"||(_e=this.toHexString()),Z==="hex3"&&(_e=this.toHexString(!0)),Z==="hex4"&&(_e=this.toHex8String(!0)),Z==="hex8"&&(_e=this.toHex8String()),Z==="name"&&(_e=this.toName()),Z==="hsl"&&(_e=this.toHslString()),Z==="hsv"&&(_e=this.toHsvString()),_e||this.toHexString()):Z==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return E(this.toString())},_applyModification:function(Z,fe){var _e=Z.apply(null,[this].concat([].slice.call(fe)));return this._r=_e._r,this._g=_e._g,this._b=_e._b,this.setAlpha(_e._a),this},lighten:function(){return this._applyModification(z,arguments)},brighten:function(){return this._applyModification(H,arguments)},darken:function(){return this._applyModification(re,arguments)},desaturate:function(){return this._applyModification(N,arguments)},saturate:function(){return this._applyModification(P,arguments)},greyscale:function(){return this._applyModification(L,arguments)},spin:function(){return this._applyModification(ae,arguments)},_applyCombination:function(Z,fe){return Z.apply(null,[this].concat([].slice.call(fe)))},analogous:function(){return this._applyCombination(Ce,arguments)},complement:function(){return this._applyCombination(ue,arguments)},monochromatic:function(){return this._applyCombination(ge,arguments)},splitcomplement:function(){return this._applyCombination(Y,arguments)},triad:function(){return this._applyCombination(xe,arguments)},tetrad:function(){return this._applyCombination(ye,arguments)}},E.fromRatio=function(Z,fe){if(c(Z)=="object"){var _e={};for(var je in Z)Z.hasOwnProperty(je)&&(_e[je]=je==="a"?Z[je]:ee(Z[je]));Z=_e}return E(Z,fe)},E.equals=function(Z,fe){return!(!Z||!fe)&&E(Z).toRgbString()==E(fe).toRgbString()},E.random=function(){return E.fromRatio({r:y(),g:y(),b:y()})},E.mix=function(Z,fe,_e){_e=_e===0?0:_e||50;var je=E(Z).toRgb(),Me=E(fe).toRgb(),Ae=_e/100;return E({r:(Me.r-je.r)*Ae+je.r,g:(Me.g-je.g)*Ae+je.g,b:(Me.b-je.b)*Ae+je.b,a:(Me.a-je.a)*Ae+je.a})},E.readability=function(Z,fe){var _e=E(Z),je=E(fe);return(M.max(_e.getLuminance(),je.getLuminance())+.05)/(M.min(_e.getLuminance(),je.getLuminance())+.05)},E.isReadable=function(Z,fe,_e){var je,Me,Ae=E.readability(Z,fe);switch(Me=!1,(je=function(Le){var Se,Re;return Se=((Le=Le||{level:"AA",size:"small"}).level||"AA").toUpperCase(),Re=(Le.size||"small").toLowerCase(),Se!=="AA"&&Se!=="AAA"&&(Se="AA"),Re!=="small"&&Re!=="large"&&(Re="small"),{level:Se,size:Re}}(_e)).level+je.size){case"AAsmall":case"AAAlarge":Me=Ae>=4.5;break;case"AAlarge":Me=Ae>=3;break;case"AAAsmall":Me=Ae>=7}return Me},E.mostReadable=function(Z,fe,_e){var je,Me,Ae,Le,Se=null,Re=0;Me=(_e=_e||{}).includeFallbackColors,Ae=_e.level,Le=_e.size;for(var Ke=0;Ke<fe.length;Ke++)(je=E.readability(Z,fe[Ke]))>Re&&(Re=je,Se=E(fe[Ke]));return E.isReadable(Z,Se,{level:Ae,size:Le})||!Me?Se:(_e.includeFallbackColors=!1,E.mostReadable(Z,["#fff","#000"],_e))};var he=E.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Q=E.hexNames=function(Z){var fe={};for(var _e in Z)Z.hasOwnProperty(_e)&&(fe[Z[_e]]=_e);return fe}(he);function W(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function le(Z,fe){(function(je){return typeof je=="string"&&je.indexOf(".")!=-1&&parseFloat(je)===1})(Z)&&(Z="100%");var _e=function(je){return typeof je=="string"&&je.indexOf("%")!=-1}(Z);return Z=g(fe,h(0,parseFloat(Z))),_e&&(Z=parseInt(Z*fe,10)/100),M.abs(Z-fe)<1e-6?1:Z%fe/parseFloat(fe)}function Oe(Z){return g(1,h(0,Z))}function Te(Z){return parseInt(Z,16)}function se(Z){return Z.length==1?"0"+Z:""+Z}function ee(Z){return Z<=1&&(Z=100*Z+"%"),Z}function te(Z){return M.round(255*parseFloat(Z)).toString(16)}function U(Z){return Te(Z)/255}var X,B,J,ne=(B="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",J="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{CSS_UNIT:new RegExp(X),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+J),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+J),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+J),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function ie(Z){return!!ne.CSS_UNIT.exec(Z)}R.exports?R.exports=E:(f=function(){return E}.call(b,o,b,R))===void 0||(R.exports=f)})(Math)},function(R,b,o){R.exports={EPSILON:o(252),create:o(253),clone:o(516),fromValues:o(517),copy:o(518),set:o(254),equals:o(519),exactEquals:o(520),add:o(255),subtract:o(162),sub:o(521),multiply:o(256),mul:o(522),divide:o(257),div:o(523),inverse:o(524),min:o(525),max:o(526),rotate:o(527),floor:o(528),ceil:o(529),round:o(530),scale:o(531),scaleAndAdd:o(532),distance:o(258),dist:o(533),squaredDistance:o(259),sqrDist:o(534),length:o(260),len:o(535),squaredLength:o(261),sqrLen:o(536),negate:o(537),normalize:o(262),dot:o(263),cross:o(538),lerp:o(539),random:o(540),transformMat2:o(541),transformMat2d:o(542),transformMat3:o(543),transformMat4:o(544),forEach:o(545),limit:o(546)}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=function(c,M){var _=c.nodes,x=c.edges,O=[],S={};if(!_)throw new Error("invalid nodes data!");return _&&_.forEach(function(g,h){S[g.id]=h,O.push([])}),x&&x.forEach(function(g){var h=g.source,y=g.target,E=S[h],m=S[y];!E&&E!==0||!m&&m!==0||(O[E][m]=1,M||(O[m][E]=1))}),O};b.default=f},function(R,b,o){var f=o(97),c=o(313),M=o(314),_=o(315),x=o(316),O=o(317);function S(g){var h=this.__data__=new f(g);this.size=h.size}S.prototype.clear=c,S.prototype.delete=M,S.prototype.get=_,S.prototype.has=x,S.prototype.set=O,R.exports=S},function(R,b,o){var f=o(308),c=o(309),M=o(310),_=o(311),x=o(312);function O(S){var g=-1,h=S==null?0:S.length;for(this.clear();++g<h;){var y=S[g];this.set(y[0],y[1])}}O.prototype.clear=f,O.prototype.delete=c,O.prototype.get=M,O.prototype.has=_,O.prototype.set=x,R.exports=O},function(R,b,o){var f=o(70);R.exports=function(c,M){for(var _=c.length;_--;)if(f(c[_][0],M))return _;return-1}},function(R,b,o){var f=o(62)(Object,"create");R.exports=f},function(R,b,o){var f=o(332);R.exports=function(c,M){var _=c.__data__;return f(M)?_[typeof M=="string"?"string":"hash"]:_.map}},function(R,b,o){var f=o(102),c=o(70),M=Object.prototype.hasOwnProperty;R.exports=function(_,x,O){var S=_[x];M.call(_,x)&&c(S,O)&&(O!==void 0||x in _)||f(_,x,O)}},function(R,b,o){var f=o(178);R.exports=function(c,M,_){M=="__proto__"&&f?f(c,M,{configurable:!0,enumerable:!0,value:_,writable:!0}):c[M]=_}},function(R,b){function o(c){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(c)}var f=/^(?:0|[1-9]\d*)$/;R.exports=function(c,M){var _=o(c);return!!(M=M==null?9007199254740991:M)&&(_=="number"||_!="symbol"&&f.test(c))&&c>-1&&c%1==0&&c<M}},function(R,b){R.exports=function(o){return function(f){return o(f)}}},function(R,b){var o=Object.prototype;R.exports=function(f){var c=f&&f.constructor;return f===(typeof c=="function"&&c.prototype||o)}},function(R,b,o){var f=o(180)(Object.getPrototypeOf,Object);R.exports=f},function(R,b,o){var f=o(154),c=o(361)(f);R.exports=c},function(R,b,o){var f=o(109),c=o(89);R.exports=function(M,_){for(var x=0,O=(_=f(_,M)).length;M!=null&&x<O;)M=M[c(_[x++])];return x&&x==O?M:void 0}},function(R,b,o){var f=o(31),c=o(157),M=o(375),_=o(203);R.exports=function(x,O){return f(x)?x:c(x,O)?[x]:M(_(x))}},function(R,b){R.exports=function(o,f){for(var c=-1,M=o==null?0:o.length,_=Array(M);++c<M;)_[c]=f(o[c],c,o);return _}},function(R,b,o){var f=o(65),c=o(212),M=o(213);R.exports=function(_,x){return M(c(_,x,f),_+"")}},function(R,b,o){function f(O){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(O)}var c=o(70),M=o(52),_=o(103),x=o(43);R.exports=function(O,S,g){if(!x(g))return!1;var h=f(S);return!!(h=="number"?M(g)&&_(S,g.length):h=="string"&&S in g)&&c(g[S],O)}},function(R,b,o){"use strict";var f=o(28);R.exports={longestPath:function(c){var M={};f.forEach(c.sources(),function _(x){var O=c.node(x);if(f.has(M,x))return O.rank;M[x]=!0;var S=f.min(f.map(c.outEdges(x),function(g){return _(g.w)-c.edge(g).minlen}));return S!==Number.POSITIVE_INFINITY&&S!=null||(S=0),O.rank=S})},slack:function(c,M){return c.node(M.w).rank-c.node(M.v).rank-c.edge(M).minlen}}},function(R,b,o){"use strict";var f=o(35);o.d(b,"gl",function(){return f.a}),o(239),o(240),o(241),o(242),o(243),o(244),o(245),o(246),o(247),o(248),o(249)},function(R,b,o){"use strict";var f=function(){function c(M,_){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=M,this.name=M,this.originalEvent=_,this.timeStamp=_.timeStamp}return c.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},c.prototype.stopPropagation=function(){this.propagationStopped=!0},c.prototype.toString=function(){return"[Event (type="+this.type+")]"},c.prototype.save=function(){},c.prototype.restore=function(){},c}();b.a=f},function(R,b,o){"use strict";var f=o(1),c=o(135),M=o(19),_=function(x){function O(S){var g=x.call(this)||this;g.destroyed=!1;var h=g.getDefaultCfg();return g.cfg=Object(M.i)(h,S),g}return Object(f.__extends)(O,x),O.prototype.getDefaultCfg=function(){return{}},O.prototype.get=function(S){return this.cfg[S]},O.prototype.set=function(S,g){this.cfg[S]=g},O.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},O}(c.a);b.a=_},function(R,b,o){"use strict";o.d(b,"a",function(){return c});var f=null;function c(){if(!f){var M=document.createElement("canvas");M.width=1,M.height=1,f=M.getContext("2d")}return f}},function(R,b,o){"use strict";o.d(b,"a",function(){return f}),o.d(b,"b",function(){return M});var f=-1,c=1;function M(){return c++}},function(R,b,o){"use strict";o.d(b,"a",function(){return xe});var f,c,M,_,x,O,S,g=o(9),h=o.n(g),y=o(14),E=o.n(y),m=o(10),p=o.n(m),A=o(6),C=o.n(A),N=o(7),P=o.n(N),L=o(11),z=o.n(L),H=(o(29),o(5)),re=o(3),ae=o(13),ue=o(35),xe=(f=Object(H.injectable)(),c=Object(H.inject)(ae.a.GeometryComponentManager),M=Object(H.inject)(ae.a.RenderEngine),f((x=function(){function ye(){C()(this,ye),p()(this,"geometry",O,this),p()(this,"engine",S,this)}var Y;return P()(ye,[{key:"execute",value:(Y=E()(h.a.mark(function Ce(){var ge=this;return h.a.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:this.geometry.forEach(function(Q,W){W.dirty&&(W.attributes.forEach(function(le){var Oe;le.dirty&&le.data&&(le.buffer?(Oe=le.buffer)===null||Oe===void 0||Oe.subData({data:le.data,offset:0}):le.buffer=ge.engine.createBuffer({data:le.data,type:ue.a.FLOAT}),le.dirty=!1)}),W.indices&&(W.indicesBuffer?W.indicesBuffer.subData({data:W.indices,offset:0}):W.indicesBuffer=ge.engine.createElements({data:W.indices,count:W.indices.length,type:ue.a.UNSIGNED_INT,usage:ue.a.STATIC_DRAW})),W.dirty=!1)});case 1:case"end":return he.stop()}},Ce,this)})),function(){return Y.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach(function(Ce,ge){ge.indicesBuffer&&ge.indicesBuffer.destroy(),ge.attributes.forEach(function(he){he.buffer&&he.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},ge=Ce.vertexCount,he=Object(re.createEntity)();return this.geometry.create(he,{vertexCount:ge})}},{key:"createInstancedBufferGeometry",value:function(Ce){var ge=Ce.maxInstancedCount,he=Ce.vertexCount,Q=Object(re.createEntity)();return this.geometry.create(Q,{maxInstancedCount:ge,vertexCount:he})}}]),ye}(),O=z()(x.prototype,"geometry",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=z()(x.prototype,"engine",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=x))||_)},function(R,b,o){"use strict";o.d(b,"a",function(){return z});var f=o(4),c=o.n(f),M=o(6),_=o.n(M),x=o(7),O=o.n(x),S=o(22),g=o.n(S),h=o(23),y=o.n(h),E=o(24),m=o.n(E),p=o(18),A=o.n(p),C=o(3);function N(H,re){var ae=Object.keys(H);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(H);re&&(ue=ue.filter(function(xe){return Object.getOwnPropertyDescriptor(H,xe).enumerable})),ae.push.apply(ae,ue)}return ae}function P(H){for(var re=1;re<arguments.length;re++){var ae=arguments[re]!=null?arguments[re]:{};re%2?N(Object(ae),!0).forEach(function(ue){c()(H,ue,ae[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(ae)):N(Object(ae)).forEach(function(ue){Object.defineProperty(H,ue,Object.getOwnPropertyDescriptor(ae,ue))})}return H}function L(H){var re=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ae){return!1}}();return function(){var ae,ue=A()(H);if(re){var xe=A()(this).constructor;ae=Reflect.construct(ue,arguments,xe)}else ae=ue.apply(this,arguments);return m()(this,ae)}}var z=function(H){y()(ae,H);var re=L(ae);function ae(ue){var xe;return _()(this,ae),(xe=re.call(this,ue)).vertexShaderGLSL=void 0,xe.fragmentShaderGLSL=void 0,xe.defines={},xe.dirty=!0,xe.uniforms=[],xe.cull={enable:!0,face:C.gl.BACK},xe.depth={enable:!0},xe.blend=void 0,xe.entity=void 0,xe.type=void 0,Object.assign(g()(xe),ue),xe}return O()(ae,[{key:"setDefines",value:function(ue){return this.defines=P(P({},this.defines),ue),this}},{key:"setCull",value:function(ue){return this.cull=ue,this}},{key:"setDepth",value:function(ue){return this.depth=ue,this}},{key:"setBlend",value:function(ue){return this.blend=ue,this}},{key:"setUniform",value:function(ue,xe){var ye=this;if(typeof ue!="string")return Object.keys(ue).forEach(function(Ce){return ye.setUniform(Ce,ue[Ce])}),this;var Y=this.uniforms.find(function(Ce){return Ce.name===ue});return Y?(Y.dirty=!0,Y.data=xe):this.uniforms.push({name:ue,dirty:!0,data:xe}),this.dirty=!0,this}}]),ae}(o(25).a)},function(R,b,o){"use strict";o.d(b,"a",function(){return he});var f,c,M,_,x,O,S,g,h,y=o(4),E=o.n(y),m=o(9),p=o.n(m),A=o(14),C=o.n(A),N=o(10),P=o.n(N),L=o(6),z=o.n(L),H=o(7),re=o.n(H),ae=o(11),ue=o.n(ae),xe=(o(29),o(5)),ye=o(3),Y=o(13);function Ce(Q,W){var le=Object.keys(Q);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(Q);W&&(Oe=Oe.filter(function(Te){return Object.getOwnPropertyDescriptor(Q,Te).enumerable})),le.push.apply(le,Oe)}return le}function ge(Q){for(var W=1;W<arguments.length;W++){var le=arguments[W]!=null?arguments[W]:{};W%2?Ce(Object(le),!0).forEach(function(Oe){E()(Q,Oe,le[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(le)):Ce(Object(le)).forEach(function(Oe){Object.defineProperty(Q,Oe,Object.getOwnPropertyDescriptor(le,Oe))})}return Q}var he=(f=Object(xe.injectable)(),c=Object(xe.inject)(Y.a.MaterialComponentManager),M=Object(xe.inject)(Y.a.RenderEngine),_=Object(xe.inject)(Y.a.ShaderModuleService),f((O=function(){function Q(){z()(this,Q),P()(this,"material",S,this),P()(this,"engine",g,this),P()(this,"shaderModule",h,this)}var W;return re()(Q,[{key:"execute",value:(W=C()(p.a.mark(function le(){return p.a.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:case"end":return Oe.stop()}},le)})),function(){return W.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(le){var Oe=Object(ye.createEntity)(),Te=le.vertexShader,se=le.fragmentShader,ee=[];if(!this.engine.supportWebGPU){var te="material-".concat(Oe);this.shaderModule.registerModule(te,{vs:le.vertexShader,fs:le.fragmentShader});var U=this.shaderModule.getModule(te);Te=U.vs,se=U.fs,U.uniforms&&(ee=Object.keys(U.uniforms).map(function(X){return{dirty:!0,name:X,data:U.uniforms[X]}}))}return this.material.create(Oe,ge(ge({vertexShaderGLSL:Te,fragmentShaderGLSL:se},le),{},{uniforms:ee}))}}]),Q}(),S=ue()(O.prototype,"material",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=ue()(O.prototype,"engine",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=ue()(O.prototype,"shaderModule",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=O))||x)},function(R,b,o){"use strict";o.d(b,"a",function(){return A});var f,c=o(6),M=o.n(c),_=o(22),x=o.n(_),O=o(23),S=o.n(O),g=o(24),h=o.n(g),y=o(18),E=o.n(y),m=o(25);function p(C){var N=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}();return function(){var P,L=E()(C);if(N){var z=E()(this).constructor;P=Reflect.construct(L,arguments,z)}else P=L.apply(this,arguments);return h()(this,P)}}(function(C){C[C.Standard=0]="Standard"})(f||(f={}));var A=function(C){S()(P,C);var N=p(P);function P(L){var z;return M()(this,P),(z=N.call(this,L)).strategy=f.Standard,z.visibilityPlaneMask=0,z.visible=!1,Object.assign(x()(z),L),z}return P}(m.a)},function(R,b,o){"use strict";o.d(b,"a",function(){return A});var f=o(6),c=o.n(f),M=o(22),_=o.n(M),x=o(23),O=o.n(x),S=o(24),g=o.n(S),h=o(18),y=o.n(h),E=o(25),m=o(77);function p(C){var N=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}();return function(){var P,L=y()(C);if(N){var z=y()(this).constructor;P=Reflect.construct(L,arguments,z)}else P=L.apply(this,arguments);return g()(this,P)}}var A=function(C){O()(P,C);var N=p(P);function P(L){var z;return c()(this,P),(z=N.call(this,L)).material=void 0,z.geometry=void 0,z.aabb=new m.a,z.aabbDirty=!0,z.model=void 0,z.visible=!0,z.children=[],Object.assign(_()(z),L),z}return P}(E.a)},function(R,b,o){"use strict";o.d(b,"a",function(){return Oe});var f,c,M,_,x,O,S,g,h,y,E,m,p,A=o(9),C=o.n(A),N=o(14),P=o.n(N),L=o(10),z=o.n(L),H=o(6),re=o.n(H),ae=o(7),ue=o.n(ae),xe=o(11),ye=o.n(xe),Y=(o(29),o(2)),Ce=o(5),ge=o(13),he=o(56),Q=o(140);function W(Te,se){var ee;if(typeof Symbol=="undefined"||Te[Symbol.iterator]==null){if(Array.isArray(Te)||(ee=function(ne,ie){if(!!ne){if(typeof ne=="string")return le(ne,ie);var Z=Object.prototype.toString.call(ne).slice(8,-1);if(Z==="Object"&&ne.constructor&&(Z=ne.constructor.name),Z==="Map"||Z==="Set")return Array.from(ne);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return le(ne,ie)}}(Te))||se&&Te&&typeof Te.length=="number"){ee&&(Te=ee);var te=0,U=function(){};return{s:U,n:function(){return te>=Te.length?{done:!0}:{done:!1,value:Te[te++]}},e:function(ne){throw ne},f:U}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var X,B=!0,J=!1;return{s:function(){ee=Te[Symbol.iterator]()},n:function(){var ne=ee.next();return B=ne.done,ne},e:function(ne){J=!0,X=ne},f:function(){try{B||ee.return==null||ee.return()}finally{if(J)throw X}}}}function le(Te,se){(se==null||se>Te.length)&&(se=Te.length);for(var ee=0,te=new Array(se);ee<se;ee++)te[ee]=Te[ee];return te}var Oe=(f=Object(Ce.injectable)(),c=Object(Ce.inject)(ge.a.MeshComponentManager),M=Object(Ce.inject)(ge.a.CullableComponentManager),_=Object(Ce.inject)(ge.a.GeometryComponentManager),x=Object(Ce.inject)(ge.a.HierarchyComponentManager),O=Object(Ce.inject)(ge.a.TransformComponentManager),f((g=function(){function Te(){re()(this,Te),z()(this,"mesh",h,this),z()(this,"cullable",y,this),z()(this,"geometry",E,this),z()(this,"hierarchy",m,this),z()(this,"transform",p,this),this.planes=void 0}var se;return ue()(Te,[{key:"setFrustumPlanes",value:function(ee){this.planes=ee}},{key:"execute",value:(se=P()(C.a.mark(function ee(te){var U,X,B,J,ne,ie,Z,fe,_e,je,Me,Ae,Le,Se,Re,Ke,Je,nt,dt,kt,At;return C.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:U=W(te);try{for(U.s();!(X=U.n()).done;){B=X.value,J=B.getScene(),ne=B.getCamera(),ie=W(J.getEntities());try{for(ie.s();!(Z=ie.n()).done;)fe=Z.value,(_e=this.mesh.getComponentByEntity(fe))&&(je=this.hierarchy.getComponentByEntity(fe),Me=this.cullable.getComponentByEntity(fe),Ae=_e.geometry,Le=this.transform.getComponentByEntity(fe),Ae&&Ae.aabb&&Le&&_e.aabbDirty&&(Se=Le.worldTransform,Re=Ae.aabb,Ke=Re.center,Je=Re.halfExtents,nt=Y.e.transformMat4(Y.e.create(),Ke,Se),dt=Object(Q.b)(Se,Y.a.create()),kt=Y.e.transformMat3(Y.e.create(),Je,dt),_e.aabb.update(nt,kt),_e.aabbDirty=!1),Me&&Ae&&(At=this.cullable.getComponentByEntity((je==null?void 0:je.parentID)||-1),Me.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(_e.aabb,(At==null?void 0:At.visibilityPlaneMask)||he.b.INDETERMINATE,this.planes||ne.getFrustum().planes),Me.visible=Me.visibilityPlaneMask!==he.b.OUTSIDE))}catch(Kt){ie.e(Kt)}finally{ie.f()}}}catch(Kt){U.e(Kt)}finally{U.f()}case 2:case"end":return It.stop()}},ee,this)})),function(ee){return se.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(ee,te,U){if(te===he.b.OUTSIDE||te===he.b.INSIDE)return te;for(var X=he.b.INSIDE,B=0,J=U.length;B<J;++B){var ne=B<31?1<<B:0;if(!(B<31&&(te&ne)==0)){var ie=U[B],Z=ie.normal,fe=ie.distance;if(Y.e.dot(Z,ee.getNegativeFarPoint(U[B]))+fe>0)return he.b.OUTSIDE;Y.e.dot(Z,ee.getPositiveFarPoint(U[B]))+fe>0&&(X|=ne)}}return X}}]),Te}(),h=ye()(g.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=ye()(g.prototype,"cullable",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=ye()(g.prototype,"geometry",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=ye()(g.prototype,"hierarchy",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=ye()(g.prototype,"transform",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=g))||S)},function(R,b,o){"use strict";o.d(b,"a",function(){return O});var f=o(6),c=o.n(f),M=o(7),_=o.n(M),x=o(2),O=function(){function S(g,h){c()(this,S),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=g||0,this.normal=h||x.e.fromValues(0,1,0),this.updatePNVertexFlag()}return _()(S,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(g){return x.e.dot(g,this.normal)-this.distance}},{key:"normalize",value:function(){var g=1/x.e.len(this.normal);x.e.scale(this.normal,this.normal,g),this.distance*=g}},{key:"intersectsLine",value:function(g,h,y){var E=this.distanceToPoint(g),m=E/(E-this.distanceToPoint(h)),p=m>=0&&m<=1;return p&&y&&x.e.lerp(y,g,h,m),p}}]),S}()},function(R,b,o){"use strict";o.d(b,"a",function(){return Q});var f,c,M,_,x,O,S,g,h,y,E,m,p=o(9),A=o.n(p),C=o(14),N=o.n(C),P=o(10),L=o.n(P),z=o(6),H=o.n(z),re=o(7),ae=o.n(re),ue=o(11),xe=o.n(ue),ye=(o(29),o(5)),Y=o(13),Ce=o(81),ge=o(68),he=o(50),Q=(f=Object(ye.injectable)(),c=Object(ye.inject)(Y.a.Systems),M=Object(ye.named)(Y.a.FrameGraphSystem),_=Object(ye.inject)(Y.a.RenderPassFactory),x=Object(ye.inject)(Y.a.ConfigService),O=Object(ye.inject)(Y.a.ResourcePool),f((g=function(){function W(){H()(this,W),L()(this,"frameGraphSystem",h,this),L()(this,"renderPassFactory",y,this),L()(this,"configService",E,this),L()(this,"resourcePool",m,this)}var le;return ae()(W,[{key:"execute",value:(le=N()(A.a.mark(function Oe(Te){var se,ee,te,U,X,B,J,ne;return A.a.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:se=this.renderPassFactory(he.a.IDENTIFIER),ee=se.setup,te=se.execute,this.frameGraphSystem.addPass(he.a.IDENTIFIER,ee,te),U=this.renderPassFactory(Ce.a.IDENTIFIER),X=U.setup,B=U.execute,J=U.tearDown,ne=this.frameGraphSystem.addPass(Ce.a.IDENTIFIER,X,B,J),this.frameGraphSystem.present(ne.data.output);case 5:case"end":return ie.stop()}},Oe,this)})),function(Oe){return le.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(Oe,Te){return this.renderPassFactory(ge.a.IDENTIFIER).pick(Oe,Te)}}]),W}(),h=xe()(g.prototype,"frameGraphSystem",[c,M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=xe()(g.prototype,"renderPassFactory",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=xe()(g.prototype,"configService",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=xe()(g.prototype,"resourcePool",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=g))||S)},function(R,b,o){"use strict";o.d(b,"a",function(){return m});var f=o(6),c=o.n(f),M=o(22),_=o.n(M),x=o(23),O=o.n(x),S=o(24),g=o.n(S),h=o(18),y=o.n(h);function E(p){var A=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C){return!1}}();return function(){var C,N=y()(p);if(A){var P=y()(this).constructor;C=Reflect.construct(N,arguments,P)}else C=N.apply(this,arguments);return g()(this,C)}}var m=function(p){O()(C,p);var A=E(C);function C(N){var P;return c()(this,C),(P=A.call(this,N)).parentID=void 0,Object.assign(_()(P),N),P}return C}(o(25).a)},function(R,b,o){"use strict";o.d(b,"a",function(){return ye});var f,c,M,_,x,O,S,g,h,y=o(9),E=o.n(y),m=o(14),p=o.n(m),A=o(10),C=o.n(A),N=o(6),P=o.n(N),L=o(7),z=o.n(L),H=o(11),re=o.n(H),ae=(o(29),o(2)),ue=o(5),xe=o(13),ye=(f=Object(ue.injectable)(),c=Object(ue.inject)(xe.a.HierarchyComponentManager),M=Object(ue.inject)(xe.a.TransformComponentManager),_=Object(ue.inject)(xe.a.MeshComponentManager),f((O=function(){function Y(){P()(this,Y),C()(this,"hierarchy",S,this),C()(this,"transform",g,this),C()(this,"mesh",h,this)}var Ce;return z()(Y,[{key:"execute",value:(Ce=p()(E.a.mark(function ge(){return E.a.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return he.stop()}},ge,this)})),function(){return Ce.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var ge=this;this.transform.forEach(function(he,Q){(Q.isDirty()||Q.isLocalDirty())&&(ge.setMeshAABBDirty(ge.mesh.getComponentByEntity(he)),Q.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var ge=this;this.hierarchy.forEach(function(he,Q){var W=ge.transform.getComponentByEntity(he),le=ge.transform.getComponentByEntity(Q.parentID);W!==null&&le!==null&&W.updateTransformWithParent(le)})}},{key:"attach",value:function(ge,he,Q){this.hierarchy.contains(ge)&&this.detach(ge),this.hierarchy.create(ge,{parentID:he});var W=this.mesh.getComponentByEntity(he);if(this.setMeshAABBDirty(W),W&&W.children.indexOf(ge)===-1&&W.children.push(ge),this.hierarchy.getCount()>1){for(var le=this.hierarchy.getCount()-1;le>0;--le)for(var Oe=this.hierarchy.getEntity(le),Te=0;Te<le;++Te)if(this.hierarchy.getComponent(Te).parentID===Oe){this.hierarchy.moveItem(le,Te),++le;break}}this.hierarchy.getComponentByEntity(ge);var se=this.transform.getComponentByEntity(he);se===null&&(se=this.transform.create(he));var ee=this.transform.getComponentByEntity(ge);ee===null&&(ee=this.transform.create(ge),se=this.transform.getComponentByEntity(he)),ee.parent=se,!Q&&se&&(ee.matrixTransform(ae.b.invert(ae.b.create(),se.worldTransform)),ee.updateTransform()),se&&ee.updateTransformWithParent(se)}},{key:"detach",value:function(ge){var he=this.hierarchy.getComponentByEntity(ge);if(he!==null){var Q=this.transform.getComponentByEntity(ge);Q!==null&&(Q.parent=null,Q.applyTransform()),this.hierarchy.removeKeepSorted(ge);var W=this.mesh.getComponentByEntity(he.parentID);if(W){var le=W.children.indexOf(ge);W.children.splice(le,1)}this.setMeshAABBDirty(W)}}},{key:"detachChildren",value:function(ge){var he=this.mesh.getComponentByEntity(ge);he&&(he.children=[]);for(var Q=0;Q<this.hierarchy.getCount();){var W;if(((W=this.hierarchy.getComponent(Q))===null||W===void 0?void 0:W.parentID)===ge){var le=this.hierarchy.getEntity(Q);this.detach(le)}else++Q}}},{key:"setMeshAABBDirty",value:function(ge){ge&&(ge.aabbDirty=!0)}}]),Y}(),S=re()(O.prototype,"hierarchy",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=re()(O.prototype,"transform",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=re()(O.prototype,"mesh",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=O))||x)},function(R,b,o){"use strict";o.d(b,"a",function(){return C});var f=o(6),c=o.n(f),M=o(7),_=o.n(M),x=o(22),O=o.n(x),S=o(23),g=o.n(S),h=o(24),y=o.n(h),E=o(18),m=o.n(E),p=o(2);function A(N){var P=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(L){return!1}}();return function(){var L,z=m()(N);if(P){var H=m()(this).constructor;L=Reflect.construct(z,arguments,H)}else L=z.apply(this,arguments);return y()(this,L)}}var C=function(N){g()(L,N);var P=A(L);function L(z){var H,re,ae,ue,xe,ye,Y,Ce,ge,he,Q,W,le,Oe,Te;return c()(this,L),(H=P.call(this,z)).dirtyFlag=void 0,H.localDirtyFlag=void 0,H.parent=null,H.localPosition=p.e.fromValues(0,0,0),H.localRotation=p.c.fromValues(0,0,0,1),H.localScale=p.e.fromValues(1,1,1),H.localTransform=p.b.create(),H.position=p.e.fromValues(0,0,0),H.rotation=p.c.fromValues(0,0,0,1),H.scaling=p.e.fromValues(1,1,1),H.worldTransform=p.b.create(),H.matrixTransform=(re=p.b.create(),function(se){p.b.multiply(re,H.getLocalTransform(),se),p.b.getScaling(H.localScale,re),p.b.getTranslation(H.localPosition,re),p.b.getRotation(H.localRotation,re)}),H.rotateRollPitchYaw=(ae=p.c.create(),ue=p.c.create(),xe=p.c.create(),function(se,ee,te){H.setDirty(),p.c.fromEuler(ae,se,0,0),p.c.fromEuler(ue,0,ee,0),p.c.fromEuler(xe,0,0,te),p.c.multiply(H.localRotation,ae,H.localRotation),p.c.multiply(H.localRotation,H.localRotation,ue),p.c.multiply(H.localRotation,xe,H.localRotation),p.c.normalize(H.localRotation,H.localRotation)}),H.lerp=(ye=p.e.create(),Y=p.c.create(),Ce=p.e.create(),ge=p.e.create(),he=p.c.create(),Q=p.e.create(),function(se,ee,te){H.setDirty(),p.b.getScaling(ye,se.worldTransform),p.b.getTranslation(Ce,se.worldTransform),p.b.getRotation(Y,se.worldTransform),p.b.getScaling(ge,ee.worldTransform),p.b.getTranslation(Q,ee.worldTransform),p.b.getRotation(he,ee.worldTransform),p.e.lerp(H.localScale,ye,ge,te),p.c.slerp(H.localRotation,Y,he,te),p.e.lerp(H.localPosition,Ce,Q,te)}),H.translate=(W=p.e.create(),function(se){return p.e.add(W,H.getPosition(),se),H.setPosition(W),H.setDirty(!0),O()(H)}),H.translateLocal=function(se){return p.e.transformQuat(se,se,H.localRotation),p.e.add(H.localPosition,H.localPosition,se),H.setLocalDirty(!0),O()(H)},H.setPosition=(le=p.b.create(),function(se){return H.position=se,H.setLocalDirty(!0),H.parent===null?p.e.copy(H.localPosition,se):(p.b.copy(le,H.parent.worldTransform),p.b.invert(le,le),p.e.transformMat4(H.localPosition,se,le)),O()(H)}),H.rotate=(Oe=p.c.create(),function(se){if(H.parent===null)p.c.multiply(H.localRotation,H.localRotation,se),p.c.normalize(H.localRotation,H.localRotation);else{var ee=H.getRotation(),te=H.parent.getRotation();p.c.copy(Oe,te),p.c.invert(Oe,Oe),p.c.multiply(Oe,Oe,se),p.c.multiply(H.localRotation,se,ee),p.c.normalize(H.localRotation,H.localRotation)}return H.setLocalDirty(),O()(H)}),H.rotateLocal=function(se){return p.c.multiply(H.localRotation,H.localRotation,se),p.c.normalize(H.localRotation,H.localRotation),H.setLocalDirty(!0),O()(H)},H.setRotation=(Te=p.c.create(),function(se){return H.parent===null?p.c.copy(H.localRotation,se):(p.c.copy(Te,H.parent.getRotation()),p.c.invert(Te,Te),p.c.copy(H.localRotation,Te),p.c.mul(H.localRotation,H.localRotation,se)),H.setLocalDirty(!0),O()(H)}),H}return _()(L,[{key:"setLocalPosition",value:function(z){p.e.copy(this.localPosition,z),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(z){p.e.copy(this.localScale,z),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(z){return p.c.copy(this.localRotation,z),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var z=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];z?this.dirtyFlag|=L.DIRTY:this.dirtyFlag&=~L.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var z=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];z?(this.localDirtyFlag|=L.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~L.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(p.b.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(z){p.b.multiply(this.worldTransform,z.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),p.b.getScaling(this.localScale,this.worldTransform),p.b.getTranslation(this.localPosition,this.worldTransform),p.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=p.e.fromValues(0,0,0),this.localRotation=p.c.fromValues(0,0,0,1),this.localScale=p.e.fromValues(1,1,1)}},{key:"scaleLocal",value:function(z){return this.setLocalDirty(),p.e.multiply(this.localScale,this.localScale,z),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(p.b.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return this.isLocalDirty()||this.isDirty()?(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform):this.worldTransform}},{key:"getPosition",value:function(){return p.b.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return p.b.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return p.b.getScaling(this.scaling,this.worldTransform),this.scaling}}]),L}(o(25).a);C.DIRTY=1},function(R,b,o){"use strict";o.d(b,"a",function(){return S});var f,c=o(6),M=o.n(c),_=o(7),x=o.n(_),O=o(5),S=Object(O.injectable)()(f=function(){function g(){M()(this,g),this.config=void 0}return x()(g,[{key:"get",value:function(){return this.config}},{key:"set",value:function(h){this.config=h}}]),g}())||f},function(R,b,o){"use strict";o.d(b,"a",function(){return g});var f,c,M=o(6),_=o.n(M),x=o(7),O=o.n(x),S=o(5);(function(h){h.PANSTART="PANSTART",h.PANEND="PANEND",h.PANMOVE="PANMOVE",h.PINCH="PINCH",h.KEYDOWN="KEYDOWN",h.KEYUP="KEYUP",h.HOVER="HOVER"})(c||(c={}));var g=Object(S.injectable)()(f=function(){function h(){_()(this,h)}return O()(h,[{key:"listen",value:function(y){}},{key:"on",value:function(y,E){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),h}())||f},function(R,b,o){"use strict";o.d(b,"a",function(){return ee});var f=o(59),c=o.n(f),M=o(9),_=o.n(M),x=o(14),O=o.n(x),S=o(10),g=o.n(S),h=o(6),y=o.n(h),E=o(7),m=o.n(E),p=o(11),A=o.n(p),C=(o(29),o(5)),N=o(13),P=function te(){y()(this,te),this.index=void 0},L=function te(){y()(this,te),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},z=function(){function te(){y()(this,te),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return m()(te,[{key:"read",value:function(U){return this.reads.find(function(X){return X.index===U.index})||this.reads.push(U),U}},{key:"sample",value:function(U){return this.read(U),U}},{key:"write",value:function(U,X){if(this.writes.find(function(ne){return ne.index===X.index}))return X;var B=U.getResourceNode(X);B.resource.version++,B.resource.imported&&(this.hasSideEffect=!0);var J=U.createResourceNode(B.resource);return U.getResourceNode(J).writer=this,this.writes.push(J),J}}]),te}(),H=o(23),re=o.n(H),ae=o(24),ue=o.n(ae),xe=o(18),ye=o.n(xe);function Y(te){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(X){return!1}}();return function(){var X,B=ye()(te);if(U){var J=ye()(this).constructor;X=Reflect.construct(B,arguments,J)}else X=B.apply(this,arguments);return ue()(this,X)}}var Ce,ge,he,Q,W,le=function(te){re()(X,te);var U=Y(X);function X(){var B;y()(this,X);for(var J=arguments.length,ne=new Array(J),ie=0;ie<J;ie++)ne[ie]=arguments[ie];return(B=U.call.apply(U,[this].concat(ne))).version=0,B.refs=0,B.name=void 0,B.imported=void 0,B.priority=void 0,B.discardStart=!0,B.discardEnd=!1,B.descriptor=void 0,B.resource=void 0,B}return m()(X,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),X}(function te(){y()(this,te),this.first=void 0,this.last=void 0}),Oe=function te(){y()(this,te),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function Te(te,U){var X;if(typeof Symbol=="undefined"||te[Symbol.iterator]==null){if(Array.isArray(te)||(X=function(fe,_e){if(!!fe){if(typeof fe=="string")return se(fe,_e);var je=Object.prototype.toString.call(fe).slice(8,-1);if(je==="Object"&&fe.constructor&&(je=fe.constructor.name),je==="Map"||je==="Set")return Array.from(fe);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return se(fe,_e)}}(te))||U&&te&&typeof te.length=="number"){X&&(te=X);var B=0,J=function(){};return{s:J,n:function(){return B>=te.length?{done:!0}:{done:!1,value:te[B++]}},e:function(fe){throw fe},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,ie=!0,Z=!1;return{s:function(){X=te[Symbol.iterator]()},n:function(){var fe=X.next();return ie=fe.done,fe},e:function(fe){Z=!0,ne=fe},f:function(){try{ie||X.return==null||X.return()}finally{if(Z)throw ne}}}}function se(te,U){(U==null||U>te.length)&&(U=te.length);for(var X=0,B=new Array(U);X<U;X++)B[X]=te[X];return B}var ee=(Ce=Object(C.injectable)(),ge=Object(C.inject)(N.a.RenderEngine),Ce((Q=function(){function te(){y()(this,te),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],g()(this,"engine",W,this)}var U,X;return m()(te,[{key:"execute",value:(X=O()(_.a.mark(function B(J){return _.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return this.compile(),ne.next=3,this.executePassNodes(J);case 3:case"end":return ne.stop()}},B,this)})),function(B){return X.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(B){B.tearDown&&B.tearDown()}),this.reset()}},{key:"addPass",value:function(B,J,ne,ie){var Z=new L;Z.execute=ne,ie&&(Z.tearDown=ie),Z.name=B;var fe=new z;return fe.name=B,this.passNodes.push(fe),this.frameGraphPasses.push(Z),J(this,fe,Z),Z}},{key:"getPass",value:function(B){return this.frameGraphPasses.find(function(J){return J.name===B})}},{key:"compile",value:function(){var B,J=this,ne=Te(this.passNodes);try{for(ne.s();!(B=ne.n()).done;){var ie=B.value;ie.refCount=ie.writes.length+(ie.hasSideEffect?1:0),ie.reads.forEach(function(dr){J.resourceNodes[dr.index].readerCount++})}}catch(dr){ne.e(dr)}finally{ne.f()}var Z,fe=[],_e=Te(this.resourceNodes);try{for(_e.s();!(Z=_e.n()).done;){var je=Z.value;je.readerCount===0&&fe.push(je)}}catch(dr){_e.e(dr)}finally{_e.f()}for(;fe.length;){var Me=fe.pop(),Ae=Me&&Me.writer;if(Ae&&--Ae.refCount==0){var Le,Se=Te(Ae.reads);try{for(Se.s();!(Le=Se.n()).done;){var Re=Le.value,Ke=this.resourceNodes[Re.index];--Ke.readerCount==0&&fe.push(Ke)}}catch(dr){Se.e(dr)}finally{Se.f()}}}this.resourceNodes.forEach(function(dr){dr.resource.refs+=dr.readerCount});var Je,nt=Te(this.passNodes);try{for(nt.s();!(Je=nt.n()).done;){var dt=Je.value;if(dt.refCount){var kt,At=Te(dt.reads);try{for(At.s();!(kt=At.n()).done;){var It=kt.value,Kt=this.resourceNodes[It.index].resource;Kt.first=Kt.first?Kt.first:dt,Kt.last=dt}}catch(dr){At.e(dr)}finally{At.f()}var Qt,tr=Te(dt.writes);try{for(tr.s();!(Qt=tr.n()).done;){var nr=Qt.value,Mr=this.resourceNodes[nr.index].resource;Mr.first=Mr.first?Mr.first:dt,Mr.last=dt}}catch(dr){tr.e(dr)}finally{tr.f()}}}}catch(dr){nt.e(dr)}finally{nt.f()}for(var ar=0;ar<2;ar++){var yr,mr=Te(this.resourceNodes);try{for(mr.s();!(yr=mr.n()).done;){var Rr=yr.value.resource;if(Rr.priority===ar&&Rr.refs){var pr=Rr.first,xr=Rr.last;pr&&xr&&(pr.devirtualize.push(Rr),xr.destroy.push(Rr))}}}catch(dr){mr.e(dr)}finally{mr.f()}}}},{key:"executePassNodes",value:(U=O()(_.a.mark(function B(J){var ne,ie,Z,fe,_e,je,Me,Ae,Le,Se,Re,Ke,Je;return _.a.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:ne=Te(this.passNodes.entries()),nt.prev=1,ne.s();case 3:if((ie=ne.n()).done){nt.next=18;break}if(Z=c()(ie.value,2),fe=Z[0],!(_e=Z[1]).refCount){nt.next=16;break}je=Te(_e.devirtualize);try{for(je.s();!(Me=je.n()).done;)Me.value.preExecuteDevirtualize(this.engine)}catch(dt){je.e(dt)}finally{je.f()}Ae=Te(_e.destroy);try{for(Ae.s();!(Le=Ae.n()).done;)Le.value.preExecuteDestroy(this.engine)}catch(dt){Ae.e(dt)}finally{Ae.f()}return nt.next=12,this.frameGraphPasses[fe].execute(this,this.frameGraphPasses[fe],J);case 12:Se=Te(_e.devirtualize);try{for(Se.s();!(Re=Se.n()).done;)Re.value.postExecuteDevirtualize(this.engine)}catch(dt){Se.e(dt)}finally{Se.f()}Ke=Te(_e.destroy);try{for(Ke.s();!(Je=Ke.n()).done;)Je.value.postExecuteDestroy(this.engine)}catch(dt){Ke.e(dt)}finally{Ke.f()}case 16:nt.next=3;break;case 18:nt.next=23;break;case 20:nt.prev=20,nt.t0=nt.catch(1),ne.e(nt.t0);case 23:return nt.prev=23,ne.f(),nt.finish(23);case 26:this.reset();case 27:case"end":return nt.stop()}},B,this,[[1,20,23,26]])})),function(B){return U.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(B){return this.resourceNodes[B.index]}},{key:"createResourceNode",value:function(B){var J=new Oe;J.resource=B,J.version=B.version,this.resourceNodes.push(J);var ne=new P;return ne.index=this.resourceNodes.length-1,ne}},{key:"createTexture",value:function(B,J,ne){var ie=new le;return ie.name=J,ie.descriptor=ne,this.createResourceNode(ie)}},{key:"createRenderTarget",value:function(B,J,ne){var ie=new le;return ie.name=J,ie.descriptor=ne,this.createResourceNode(ie)}},{key:"present",value:function(B){this.addPass("Present",function(J,ne){ne.read(B),ne.hasSideEffect=!0},O()(_.a.mark(function J(){return _.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:case"end":return ne.stop()}},J)})))}}]),te}(),W=A()(Q.prototype,"engine",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=Q))||he)},function(R,b,o){"use strict";o.d(b,"a",function(){return C});var f=o(4),c=o.n(f),M=o(6),_=o.n(M),x=o(7),O=o.n(x),S=o(5),g,h=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function y(N){var P={};return{content:N=N.replace(h,function(L,z,H){var re=H.split(":"),ae=re[0].trim(),ue="";switch(re.length>1&&(ue=re[1].trim()),z){case"bool":ue=ue==="true";break;case"float":case"int":ue=Number(ue);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":ue=ue?ue.replace("[","").replace("]","").split(",").reduce(function(xe,ye){return xe.push(Number(ye.trim())),xe},[]):new Array(function(xe){var ye=0;switch(xe){case"vec2":case"ivec2":ye=2;break;case"vec3":case"ivec3":ye=3;break;case"vec4":case"ivec4":case"mat2":ye=4;break;case"mat3":ye=9;break;case"mat4":ye=16}return ye}(z)).fill(0)}return P[ae]=ue,"uniform ".concat(z," ").concat(ae,`;
`)}),uniforms:P}}function E(N,P){var L=Object.keys(N);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(N);P&&(z=z.filter(function(H){return Object.getOwnPropertyDescriptor(N,H).enumerable})),L.push.apply(L,z)}return L}function m(N){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?E(Object(L),!0).forEach(function(z){c()(N,z,L[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(L)):E(Object(L)).forEach(function(z){Object.defineProperty(N,z,Object.getOwnPropertyDescriptor(L,z))})}return N}var p=/precision\s+(high|low|medium)p\s+float/,A=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,C=Object(S.injectable)()(g=function(){function N(){_()(this,N),this.moduleCache={},this.rawContentCache={}}return O()(N,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,fs:`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`}),this.registerModule("sdf2d",{vs:"",fs:`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`})}},{key:"registerModule",value:function(P,L){if(!this.rawContentCache[P]){var z=L.vs,H=z===void 0?"":z,re=L.fs,ae=re===void 0?"":re,ue=L.uniforms,xe=y(H),ye=xe.content,Y=xe.uniforms,Ce=y(ae),ge=Ce.content,he=Ce.uniforms;this.rawContentCache[P]={fs:ge,uniforms:m(m(m({},Y),he),ue),vs:ye}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(P){var L=this;if(this.moduleCache[P])return this.moduleCache[P];var z,H=this.rawContentCache[P].vs||"",re=this.rawContentCache[P].fs||"",ae=this.processModule(H,[],"vs"),ue=ae.content,xe=ae.includeList,ye=this.processModule(re,[],"fs"),Y=ye.content,Ce=ye.includeList,ge=Y,he=(z=xe.concat(Ce).concat(P),z.filter(function(Q,W,le){return le.indexOf(Q)===W})).reduce(function(Q,W){return m(m({},Q),L.rawContentCache[W].uniforms)},{});return p.test(Y)||(ge=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`+Y),this.moduleCache[P]={fs:ge.trim(),uniforms:he,vs:ue.trim()},this.moduleCache[P]}},{key:"processModule",value:function(P,L,z){var H=this;return{content:P.replace(A,function(re,ae){var ue=ae.split(" ")[0].replace(/"/g,"");if(L.indexOf(ue)>-1)return"";var xe=H.rawContentCache[ue][z];return L.push(ue),H.processModule(xe||"",L,z).content}),includeList:L}}}]),N}())||g},function(R,b,o){"use strict";o.d(b,"a",function(){return ye});var f=o(4),c=o.n(f),M=o(6),_=o.n(M),x=o(7),O=o.n(x),S=o(22),g=o.n(S),h=o(23),y=o.n(h),E=o(24),m=o.n(E),p=o(18),A=o.n(p),C=o(2),N=o(25),P=o(41),L=o.n(P),z={};z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z["[object Arguments]"]=z["[object Array]"]=z["[object ArrayBuffer]"]=z["[object Boolean]"]=z["[object DataView]"]=z["[object Date]"]=z["[object Error]"]=z["[object Function]"]=z["[object Map]"]=z["[object Number]"]=z["[object Object]"]=z["[object RegExp]"]=z["[object Set]"]=z["[object String]"]=z["[object WeakMap]"]=!1;var H=Object.prototype.toString,re=function(Y){return function(Ce){return!!Ce&&L()(Ce)==="object"}(Y)&&function(Ce){return typeof Ce=="number"&&Ce>-1&&Ce%1==0&&Ce<=9007199254740991}(Y.length)&&!!z[H.call(Y)]};function ae(Y,Ce){var ge=Object.keys(Y);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(Y);Ce&&(he=he.filter(function(Q){return Object.getOwnPropertyDescriptor(Y,Q).enumerable})),ge.push.apply(ge,he)}return ge}function ue(Y){for(var Ce=1;Ce<arguments.length;Ce++){var ge=arguments[Ce]!=null?arguments[Ce]:{};Ce%2?ae(Object(ge),!0).forEach(function(he){c()(Y,he,ge[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ge)):ae(Object(ge)).forEach(function(he){Object.defineProperty(Y,he,Object.getOwnPropertyDescriptor(ge,he))})}return Y}function xe(Y){var Ce=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ge){return!1}}();return function(){var ge,he=A()(Y);if(Ce){var Q=A()(this).constructor;ge=Reflect.construct(he,arguments,Q)}else ge=he.apply(this,arguments);return m()(this,ge)}}var ye=function(Y){y()(ge,Y);var Ce=xe(ge);function ge(he){var Q;return _()(this,ge),(Q=Ce.call(this,he)).dirty=!0,Q.attributes=[],Q.indices=void 0,Q.indicesBuffer=void 0,Q.vertexCount=0,Q.maxInstancedCount=void 0,Q.aabb=void 0,Q.entity=void 0,Object.assign(g()(Q),he),Q}return O()(ge,[{key:"setAttribute",value:function(he,Q,W,le){var Oe=this.attributes.find(function(Te){return Te.name===he});return Oe?(Oe.data=Q,Oe.dirty=!0):this.attributes.push(ue(ue({dirty:!0,name:he,data:Q},W),{},{bufferGetter:le})),this.dirty=!0,this}},{key:"setIndex",value:function(he){return this.indices=new Uint32Array(he.buffer?he.buffer:he),this.dirty=!0,this}},{key:"applyMatrix",value:function(he){var Q=this.attributes.find(function(te){return te.name==="position"}),W=this.attributes.find(function(te){return te.name==="normal"});if(Q&&(Q.dirty=!0,Q.data&&Q.data.length))for(var le=0;le<Q.data.length;le+=3){var Oe=C.f.fromValues(Q.data[le],Q.data[le+1],Q.data[le+2],1);C.f.transformMat4(Oe,Oe,he),re(Q.data)?Q.data.set([Oe[0],Oe[1],Oe[2]],le):(Q.data[le]=Oe[0],Q.data[le+1]=Oe[1],Q.data[le+2]=Oe[2])}if(W){var Te=C.a.normalFromMat4(C.a.create(),he);if(W.data&&W.data.length)for(var se=0;se<W.data.length;se+=3){var ee=C.e.fromValues(W.data[se],W.data[se+1],W.data[se+2]);C.e.transformMat3(ee,ee,Te),C.e.normalize(ee,ee),re(W.data)?W.data.set([ee[0],ee[1],ee[2]],se):(W.data[se]=ee[0],W.data[se+1]=ee[1],W.data[se+2]=ee[2])}}}}]),ge}(N.a)},function(R,b,o){"use strict";var f=function(){function c(){this._events={}}return c.prototype.on=function(M,_,x){return this._events[M]||(this._events[M]=[]),this._events[M].push({callback:_,once:!!x}),this},c.prototype.once=function(M,_){return this.on(M,_,!0),this},c.prototype.emit=function(M){for(var _=this,x=[],O=1;O<arguments.length;O++)x[O-1]=arguments[O];var S=this._events[M]||[],g=this._events["*"]||[],h=function(y){for(var E=y.length,m=0;m<E;m++)if(y[m]){var p=y[m],A=p.callback;p.once&&(y.splice(m,1),y.length===0&&delete _._events[M],E--,m--),A.apply(_,x)}};h(S),h(g)},c.prototype.off=function(M,_){if(M)if(_){for(var x=this._events[M]||[],O=x.length,S=0;S<O;S++)x[S].callback===_&&(x.splice(S,1),O--,S--);x.length===0&&delete this._events[M]}else delete this._events[M];else this._events={};return this},c.prototype.getEvents=function(){return this._events},c}();b.a=f},function(R,b,o){"use strict";var f=o(1),c=o(0),M=o(137),_=o(19),x={},O=function(S){function g(){return S!==null&&S.apply(this,arguments)||this}return Object(f.__extends)(g,S),g.prototype.isCanvas=function(){return!1},g.prototype.getBBox=function(){var h=1/0,y=-1/0,E=1/0,m=-1/0,p=[],A=[],C=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});return C.length>0?(Object(_.a)(C,function(N){var P=N.getBBox();p.push(P.minX,P.maxX),A.push(P.minY,P.maxY)}),h=Object(c.min)(p),y=Object(c.max)(p),E=Object(c.min)(A),m=Object(c.max)(A)):(h=0,y=0,E=0,m=0),{x:h,y:E,minX:h,minY:E,maxX:y,maxY:m,width:y-h,height:m-E}},g.prototype.getCanvasBBox=function(){var h=1/0,y=-1/0,E=1/0,m=-1/0,p=[],A=[],C=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});return C.length>0?(Object(_.a)(C,function(N){var P=N.getCanvasBBox();p.push(P.minX,P.maxX),A.push(P.minY,P.maxY)}),h=Object(c.min)(p),y=Object(c.max)(p),E=Object(c.min)(A),m=Object(c.max)(A)):(h=0,y=0,E=0,m=0),{x:h,y:E,minX:h,minY:E,maxX:y,maxY:m,width:y-h,height:m-E}},g.prototype.getDefaultCfg=function(){var h=S.prototype.getDefaultCfg.call(this);return h.children=[],h},g.prototype.onAttrChange=function(h,y,E){if(S.prototype.onAttrChange.call(this,h,y,E),h==="matrix"){var m=this.getTotalMatrix();this._applyChildrenMarix(m)}},g.prototype.applyMatrix=function(h){var y=this.getTotalMatrix();S.prototype.applyMatrix.call(this,h);var E=this.getTotalMatrix();E!==y&&this._applyChildrenMarix(E)},g.prototype._applyChildrenMarix=function(h){var y=this.getChildren();Object(_.a)(y,function(E){E.applyMatrix(h)})},g.prototype.addShape=function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];var E=h[0],m=h[1];Object(_.f)(E)?m=E:m.type=E;var p=x[m.type];p||(p=Object(_.k)(m.type),x[m.type]=p);var A=this.getShapeBase(),C=new A[p](m);return this.add(C),C},g.prototype.addGroup=function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];var E,m=h[0],p=h[1];if(Object(_.d)(m))E=new m(p||{parent:this});else{var A=m||{},C=this.getGroupBase();E=new C(A)}return this.add(E),E},g.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},g.prototype.getShape=function(h,y,E){if(!Object(_.b)(this))return null;var m,p=this.getChildren();if(this.isCanvas())m=this._findShape(p,h,y,E);else{var A=[h,y,1];A=this.invertFromMatrix(A),this.isClipped(A[0],A[1])||(m=this._findShape(p,A[0],A[1],E))}return m},g.prototype._findShape=function(h,y,E,m){for(var p=null,A=h.length-1;A>=0;A--){var C=h[A];if(Object(_.b)(C)&&(C.isGroup()?p=C.getShape(y,E,m):C.isHit(y,E)&&(p=C)),p)break}return p},g.prototype.add=function(h){var y=this.getCanvas(),E=this.getChildren(),m=this.get("timeline"),p=h.getParent();p&&function(A,C,N){N===void 0&&(N=!0),N?C.destroy():(C.set("parent",null),C.set("canvas",null)),Object(_.j)(A.getChildren(),C)}(p,h,!1),h.set("parent",this),y&&function A(C,N){if(C.set("canvas",N),C.isGroup()){var P=C.get("children");P.length&&P.forEach(function(L){A(L,N)})}}(h,y),m&&function A(C,N){if(C.set("timeline",N),C.isGroup()){var P=C.get("children");P.length&&P.forEach(function(L){A(L,N)})}}(h,m),E.push(h),h.onCanvasChange("add"),this._applyElementMatrix(h)},g.prototype._applyElementMatrix=function(h){var y=this.getTotalMatrix();y&&h.applyMatrix(y)},g.prototype.getChildren=function(){return this.get("children")},g.prototype.sort=function(){var h,y=this.getChildren();Object(_.a)(y,function(E,m){return E._INDEX=m,E}),y.sort((h=function(E,m){return E.get("zIndex")-m.get("zIndex")},function(E,m){var p=h(E,m);return p===0?E._INDEX-m._INDEX:p})),this.onCanvasChange("sort")},g.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var h=this.getChildren(),y=h.length-1;y>=0;y--)h[y].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},g.prototype.destroy=function(){this.get("destroyed")||(this.clear(),S.prototype.destroy.call(this))},g.prototype.getFirst=function(){return this.getChildByIndex(0)},g.prototype.getLast=function(){var h=this.getChildren();return this.getChildByIndex(h.length-1)},g.prototype.getChildByIndex=function(h){return this.getChildren()[h]},g.prototype.getCount=function(){return this.getChildren().length},g.prototype.contain=function(h){return this.getChildren().indexOf(h)>-1},g.prototype.removeChild=function(h,y){y===void 0&&(y=!0),this.contain(h)&&h.remove(y)},g.prototype.findAll=function(h){var y=[],E=this.getChildren();return Object(_.a)(E,function(m){h(m)&&y.push(m),m.isGroup()&&(y=y.concat(m.findAll(h)))}),y},g.prototype.find=function(h){var y=null,E=this.getChildren();return Object(_.a)(E,function(m){if(h(m)?y=m:m.isGroup()&&(y=m.find(h)),y)return!1}),y},g.prototype.findById=function(h){return this.find(function(y){return y.get("id")===h})},g.prototype.findByClassName=function(h){return this.find(function(y){return y.get("className")===h})},g.prototype.findAllByName=function(h){return this.findAll(function(y){return y.get("name")===h})},g}(M.a);b.a=O},function(R,b,o){"use strict";var f=o(1),c=o(0),M=o(17),_=o(19),x=o(38),O=o(116),S=M.a.transform,g=["zIndex","capture","visible","type"],h=["repeat"];function y(A,C){var N={},P=C.attrs;for(var L in A)N[L]=P[L];return N}function E(A,C){var N={},P=C.attr();return Object(c.each)(A,function(L,z){h.indexOf(z)!==-1||Object(c.isEqual)(P[z],L)||(N[z]=L)}),N}function m(A,C){if(C.onFrame)return A;var N=C.startTime,P=C.delay,L=C.duration,z=Object.prototype.hasOwnProperty;return Object(c.each)(A,function(H){N+P<H.startTime+H.delay+H.duration&&L>H.delay&&Object(c.each)(C.toAttrs,function(re,ae){z.call(H.toAttrs,ae)&&(delete H.toAttrs[ae],delete H.fromAttrs[ae])})}),A}var p=function(A){function C(N){var P=A.call(this,N)||this;P.attrs={};var L=P.getDefaultAttrs();return Object(c.mix)(L,N.attrs),P.attrs=L,P.initAttrs(L),P.initAnimate(),P}return Object(f.__extends)(C,A),C.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},C.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},C.prototype.onCanvasChange=function(N){},C.prototype.initAttrs=function(N){},C.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},C.prototype.isGroup=function(){return!1},C.prototype.getParent=function(){return this.get("parent")},C.prototype.getCanvas=function(){return this.get("canvas")},C.prototype.attr=function(){for(var N,P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];var z=P[0],H=P[1];if(!z)return this.attrs;if(Object(c.isObject)(z)){for(var re in z)this.setAttr(re,z[re]);return this.afterAttrsChange(z),this}return P.length===2?(this.setAttr(z,H),this.afterAttrsChange(((N={})[z]=H,N)),this):this.attrs[z]},C.prototype.isClipped=function(N,P){var L=this.getClip();return L&&!L.isHit(N,P)},C.prototype.setAttr=function(N,P){var L=this.attrs[N];L!==P&&(this.attrs[N]=P,this.onAttrChange(N,P,L))},C.prototype.onAttrChange=function(N,P,L){N==="matrix"&&this.set("totalMatrix",null)},C.prototype.afterAttrsChange=function(N){if(this.cfg.isClipShape){var P=this.cfg.applyTo;P&&P.onCanvasChange("clip")}else this.onCanvasChange("attr")},C.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},C.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},C.prototype.setZIndex=function(N){this.set("zIndex",N);var P=this.getParent();return P&&P.sort(),this},C.prototype.toFront=function(){var N=this.getParent();if(N){var P=N.getChildren(),L=(this.get("el"),P.indexOf(this));P.splice(L,1),P.push(this),this.onCanvasChange("zIndex")}},C.prototype.toBack=function(){var N=this.getParent();if(N){var P=N.getChildren(),L=(this.get("el"),P.indexOf(this));P.splice(L,1),P.unshift(this),this.onCanvasChange("zIndex")}},C.prototype.remove=function(N){N===void 0&&(N=!0);var P=this.getParent();P?(Object(_.j)(P.getChildren(),this),P.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),N&&this.destroy()},C.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},C.prototype.getMatrix=function(){return this.attr("matrix")},C.prototype.setMatrix=function(N){this.attr("matrix",N),this.onCanvasChange("matrix")},C.prototype.getTotalMatrix=function(){var N=this.cfg.totalMatrix;if(!N){var P=this.attr("matrix"),L=this.cfg.parentMatrix;N=L&&P?Object(x.b)(L,P):P||L,this.set("totalMatrix",N)}return N},C.prototype.applyMatrix=function(N){var P=this.attr("matrix"),L=null;L=N&&P?Object(x.b)(N,P):P||N,this.set("totalMatrix",L),this.set("parentMatrix",N)},C.prototype.getDefaultMatrix=function(){return null},C.prototype.applyToMatrix=function(N){var P=this.attr("matrix");return P?Object(x.c)(P,N):N},C.prototype.invertFromMatrix=function(N){var P=this.attr("matrix");if(P){var L=Object(x.a)(P);if(L)return Object(x.c)(L,N)}return N},C.prototype.setClip=function(N){var P=this.getCanvas(),L=null;if(N){var z=this.getShapeBase()[Object(c.upperFirst)(N.type)];z&&(L=new z({type:N.type,isClipShape:!0,applyTo:this,attrs:N.attrs,canvas:P}))}return this.set("clipShape",L),this.onCanvasChange("clip"),L},C.prototype.getClip=function(){var N=this.cfg.clipShape;return N||null},C.prototype.clone=function(){var N=this,P=this.attrs,L={};Object(c.each)(P,function(H,re){Object(c.isArray)(P[re])?L[re]=function(ae){for(var ue=[],xe=0;xe<ae.length;xe++)Object(c.isArray)(ae[xe])?ue.push([].concat(ae[xe])):ue.push(ae[xe]);return ue}(P[re]):L[re]=P[re]});var z=new this.constructor({attrs:L});return Object(c.each)(g,function(H){z.set(H,N.get(H))}),z},C.prototype.destroy=function(){this.destroyed||(this.attrs={},A.prototype.destroy.call(this))},C.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},C.prototype.animate=function(){for(var N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var L=this.get("timeline");L||(L=this.get("canvas").get("timeline"),this.set("timeline",L));var z=this.get("animations")||[];L.timer||L.initTimer();var H,re,ae,ue,xe,ye=N[0],Y=N[1],Ce=N[2],ge=Ce===void 0?"easeLinear":Ce,he=N[3],Q=he===void 0?c.noop:he,W=N[4],le=W===void 0?0:W;Object(c.isFunction)(ye)?(H=ye,ye={}):Object(c.isObject)(ye)&&ye.onFrame&&(H=ye.onFrame,re=ye.repeat),Object(c.isObject)(Y)?(Y=(xe=Y).duration,ge=xe.easing||"easeLinear",le=xe.delay||0,re=xe.repeat||re||!1,Q=xe.callback||c.noop,ae=xe.pauseCallback||c.noop,ue=xe.resumeCallback||c.noop):(Object(c.isNumber)(Q)&&(le=Q,Q=null),Object(c.isFunction)(ge)?(Q=ge,ge="easeLinear"):ge=ge||"easeLinear");var Oe=E(ye,this),Te={fromAttrs:y(Oe,this),toAttrs:Oe,duration:Y,easing:ge,repeat:re,callback:Q,pauseCallback:ae,resumeCallback:ue,delay:le,startTime:L.getTime(),id:Object(c.uniqueId)(),onFrame:H,pathFormatted:!1};z.length>0?z=m(z,Te):L.addAnimator(this),z.push(Te),this.set("animations",z),this.set("_pause",{isPaused:!1})}},C.prototype.stopAnimate=function(N){var P=this;N===void 0&&(N=!0);var L=this.get("animations");Object(c.each)(L,function(z){N&&(z.onFrame?P.attr(z.onFrame(1)):P.attr(z.toAttrs)),z.callback&&z.callback()}),this.set("animating",!1),this.set("animations",[])},C.prototype.pauseAnimate=function(){var N=this.get("timeline"),P=this.get("animations"),L=N.getTime();return Object(c.each)(P,function(z){z._paused=!0,z._pauseTime=L,z.pauseCallback&&z.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:L}),this},C.prototype.resumeAnimate=function(){var N=this.get("timeline").getTime(),P=this.get("animations"),L=this.get("_pause").pauseTime;return Object(c.each)(P,function(z){z.startTime=z.startTime+(N-L),z._paused=!1,z._pauseTime=null,z.resumeCallback&&z.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",P),this},C.prototype.emitDelegation=function(N,P){var L,z=this,H=P.propagationPath;this.getEvents(),N==="mouseenter"?L=P.fromShape:N==="mouseleave"&&(L=P.toShape);for(var re=function(xe){var ye=H[xe],Y=ye.get("name");if(Y){if((ye.isGroup()||ye.isCanvas&&ye.isCanvas())&&L&&Object(_.g)(ye,L))return"break";Object(c.isArray)(Y)?Object(c.each)(Y,function(Ce){z.emitDelegateEvent(ye,Ce,P)}):ae.emitDelegateEvent(ye,Y,P)}},ae=this,ue=0;ue<H.length&&re(ue)!=="break";ue++);},C.prototype.emitDelegateEvent=function(N,P,L){var z=this.getEvents(),H=P+":"+L.type;(z[H]||z["*"])&&(L.name=H,L.currentTarget=N,L.delegateTarget=this,L.delegateObject=N.get("delegateObject"),this.emit(H,L))},C.prototype.translate=function(N,P){N===void 0&&(N=0),P===void 0&&(P=0);var L=this.getMatrix(),z=S(L,[["t",N,P]]);return this.setMatrix(z),this},C.prototype.move=function(N,P){var L=this.attr("x")||0,z=this.attr("y")||0;return this.translate(N-L,P-z),this},C.prototype.moveTo=function(N,P){return this.move(N,P)},C.prototype.scale=function(N,P){var L=this.getMatrix(),z=S(L,[["s",N,P||N]]);return this.setMatrix(z),this},C.prototype.rotate=function(N){var P=this.getMatrix(),L=S(P,[["r",N]]);return this.setMatrix(L),this},C.prototype.rotateAtStart=function(N){var P=this.attr(),L=P.x,z=P.y,H=this.getMatrix(),re=S(H,[["t",-L,-z],["r",N],["t",L,z]]);return this.setMatrix(re),this},C.prototype.rotateAtPoint=function(N,P,L){var z=this.getMatrix(),H=S(z,[["t",-N,-P],["r",L],["t",N,P]]);return this.setMatrix(H),this},C}(O.a);b.a=p},function(R,b,o){"use strict";(function(f){o.d(b,"a",function(){return E});var c=function(){for(var A=0,C=0,N=arguments.length;C<N;C++)A+=arguments[C].length;var P=Array(A),L=0;for(C=0;C<N;C++)for(var z=arguments[C],H=0,re=z.length;H<re;H++,L++)P[L]=z[H];return P},M=function(A,C,N){this.name=A,this.version=C,this.os=N,this.type="browser"},_=function(A){this.version=A,this.type="node",this.name="node",this.os=f.platform},x=function(A,C,N,P){this.name=A,this.version=C,this.os=N,this.bot=P,this.type="bot-device"},O=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},S=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},g=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,h=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],y=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function E(A){return A?p(A):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new S:typeof navigator!="undefined"?p(navigator.userAgent):f!==void 0&&f.version?new _(f.version.slice(1)):null}function m(A){return A!==""&&h.reduce(function(C,N){var P=N[0],L=N[1];if(C)return C;var z=L.exec(A);return!!z&&[P,z]},!1)}function p(A){var C=m(A);if(!C)return null;var N=C[0],P=C[1];if(N==="searchbot")return new O;var L=P[1]&&P[1].split(/[._]/).slice(0,3);L?L.length<3&&(L=c(L,function(ae){for(var ue=[],xe=0;xe<ae;xe++)ue.push("0");return ue}(3-L.length))):L=[];var z=L.join("."),H=function(ae){for(var ue=0,xe=y.length;ue<xe;ue++){var ye=y[ue],Y=ye[0];if(ye[1].exec(ae))return Y}return null}(A),re=g.exec(A);return re&&re[1]?new x(N,z,H,re[1]):new M(N,z,H)}}).call(this,o(166))},function(R,b,o){"use strict";o.d(b,"b",function(){return S}),o.d(b,"a",function(){return g});var f=o(15),c=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,M=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,x=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function O(h,y){var E=h.match(x);Object(f.c)(E,function(m){var p=m.split(":");y.addColorStop(p[0],p[1])})}function S(h,y,E){if(Object(f.k)(E)){if(E[1]==="("||E[2]==="("){if(E[0]==="l")return function(m,p,A){var C,N,P=c.exec(A),L=parseFloat(P[1])%360*(Math.PI/180),z=P[2],H=p.getBBox();L>=0&&L<.5*Math.PI?(C={x:H.minX,y:H.minY},N={x:H.maxX,y:H.maxY}):.5*Math.PI<=L&&L<Math.PI?(C={x:H.maxX,y:H.minY},N={x:H.minX,y:H.maxY}):Math.PI<=L&&L<1.5*Math.PI?(C={x:H.maxX,y:H.maxY},N={x:H.minX,y:H.minY}):(C={x:H.minX,y:H.maxY},N={x:H.maxX,y:H.minY});var re=Math.tan(L),ae=re*re,ue=(N.x-C.x+re*(N.y-C.y))/(ae+1)+C.x,xe=re*(N.x-C.x+re*(N.y-C.y))/(ae+1)+C.y,ye=m.createLinearGradient(C.x,C.y,ue,xe);return O(z,ye),ye}(h,y,E);if(E[0]==="r")return function(m,p,A){var C=M.exec(A),N=parseFloat(C[1]),P=parseFloat(C[2]),L=parseFloat(C[3]),z=C[4];if(L===0){var H=z.match(x);return H[H.length-1].split(":")[1]}var re=p.getBBox(),ae=re.maxX-re.minX,ue=re.maxY-re.minY,xe=Math.sqrt(ae*ae+ue*ue)/2,ye=m.createRadialGradient(re.minX+ae*N,re.minY+ue*P,0,re.minX+ae/2,re.minY+ue/2,L*xe);return O(z,ye),ye}(h,y,E);if(E[0]==="p")return function(m,p,A){if(p.get("patternSource")&&p.get("patternSource")===A)return p.get("pattern");var C,N,P=_.exec(A),L=P[1],z=P[2];function H(){C=m.createPattern(N,L),p.set("pattern",C),p.set("patternSource",A)}switch(L){case"a":L="repeat";break;case"x":L="repeat-x";break;case"y":L="repeat-y";break;case"n":L="no-repeat";break;default:L="no-repeat"}return N=new Image,z.match(/^data:/i)||(N.crossOrigin="Anonymous"),N.src=z,N.complete?H():(N.onload=H,N.src=N.src),C}(h,y,E)}return E}}function g(h){var y=0,E=0,m=0,p=0;return Object(f.g)(h)?h.length===1?y=E=m=p=h[0]:h.length===2?(y=m=h[0],E=p=h[1]):h.length===3?(y=h[0],E=p=h[1],m=h[2]):(y=h[0],E=h[1],m=h[2],p=h[3]):y=E=m=p=h,[y,E,m,p]}},function(R,b,o){"use strict";o.d(b,"b",function(){return M}),o.d(b,"a",function(){return _});var f=o(59),c=o.n(f);o(2);function M(x,O){return O[0]=x[0],O[1]=x[1],O[2]=x[2],O[3]=x[4],O[4]=x[5],O[5]=x[6],O[6]=x[8],O[7]=x[9],O[8]=x[10],O}function _(x){var O=c()(x,3);return O[0]+256*O[1]+65536*O[2]-1}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MESSAGE=b.ALGORITHM=void 0,b.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},b.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=o(1),c=o(0),M=o(45),_=function(O,S,g,h){var y=O.nodes,E=y===void 0?[]:y,m=O.edges,p=m===void 0?[]:m,A=[],C={},N={},P={};E.forEach(function(xe,ye){var Y=xe.id;A.push(Y),N[Y]=1/0,Y===S&&(N[Y]=0)});for(var L=E.length,z=function(xe){var ye=function(Ce,ge,he){for(var Q,W=1/0,le=0;le<ge.length;le++){var Oe=ge[le].id;!he[Oe]&&Ce[Oe]<=W&&(W=Ce[Oe],Q=ge[le])}return Q}(N,E,C),Y=ye.id;if(C[Y]=!0,N[Y]===1/0)return"continue";(g?(0,M.getOutEdgesNodeId)(Y,p):(0,M.getEdgesByNodeId)(Y,p)).forEach(function(Ce){var ge=Ce.target,he=Ce.source,Q=ge===Y?he:ge,W=h&&Ce[h]?Ce[h]:1;N[Q]>N[ye.id]+W?(N[Q]=N[ye.id]+W,P[Q]=[ye.id]):N[Q]===N[ye.id]+W&&P[Q].push(ye.id)})},H=0;H<L;H++)z();P[S]=[S];var re={};for(var ae in N)N[ae]!==1/0&&x(S,ae,P,re);var ue={};for(var ae in re)ue[ae]=re[ae][0];return{length:N,path:ue,allPath:re}};function x(O,S,g,h){if(O===S)return[O];if(h[S])return h[S];for(var y=[],E=0,m=g[S];E<m.length;E++){var p=x(O,m[E],g,h);if(!p)return;for(var A=0,C=p;A<C.length;A++){var N=C[A];(0,c.isArray)(N)?y.push((0,f.__spreadArray)((0,f.__spreadArray)([],N),[S])):y.push([N,S])}}return h[S]=y,h[S]}b.default=_},function(R,b,o){"use strict";function f(h){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(h)}var c=o(42);R.exports=M;function M(h){this._isDirected=!c.has(h,"directed")||h.directed,this._isMultigraph=!!c.has(h,"multigraph")&&h.multigraph,this._isCompound=!!c.has(h,"compound")&&h.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function _(h,y){h[y]?h[y]++:h[y]=1}function x(h,y){--h[y]||delete h[y]}function O(h,y,E,m){var p=""+y,A=""+E;if(!h&&p>A){var C=p;p=A,A=C}return p+""+A+""+(c.isUndefined(m)?"\0":m)}function S(h,y,E,m){var p=""+y,A=""+E;if(!h&&p>A){var C=p;p=A,A=C}var N={v:p,w:A};return m&&(N.name=m),N}function g(h,y){return O(h,y.v,y.w,y.name)}M.prototype._nodeCount=0,M.prototype._edgeCount=0,M.prototype.isDirected=function(){return this._isDirected},M.prototype.isMultigraph=function(){return this._isMultigraph},M.prototype.isCompound=function(){return this._isCompound},M.prototype.setGraph=function(h){return this._label=h,this},M.prototype.graph=function(){return this._label},M.prototype.setDefaultNodeLabel=function(h){return c.isFunction(h)||(h=c.constant(h)),this._defaultNodeLabelFn=h,this},M.prototype.nodeCount=function(){return this._nodeCount},M.prototype.nodes=function(){return c.keys(this._nodes)},M.prototype.sources=function(){var h=this;return c.filter(this.nodes(),function(y){return c.isEmpty(h._in[y])})},M.prototype.sinks=function(){var h=this;return c.filter(this.nodes(),function(y){return c.isEmpty(h._out[y])})},M.prototype.setNodes=function(h,y){var E=arguments,m=this;return c.each(h,function(p){E.length>1?m.setNode(p,y):m.setNode(p)}),this},M.prototype.setNode=function(h,y){return c.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=y),this):(this._nodes[h]=arguments.length>1?y:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]="\0",this._children[h]={},this._children["\0"][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},M.prototype.node=function(h){return this._nodes[h]},M.prototype.hasNode=function(h){return c.has(this._nodes,h)},M.prototype.removeNode=function(h){var y=this;if(c.has(this._nodes,h)){var E=function(m){y.removeEdge(y._edgeObjs[m])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],c.each(this.children(h),function(m){y.setParent(m)}),delete this._children[h]),c.each(c.keys(this._in[h]),E),delete this._in[h],delete this._preds[h],c.each(c.keys(this._out[h]),E),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},M.prototype.setParent=function(h,y){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(y))y="\0";else{for(var E=y+="";!c.isUndefined(E);E=this.parent(E))if(E===h)throw new Error("Setting "+y+" as parent of "+h+" would create a cycle");this.setNode(y)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=y,this._children[y][h]=!0,this},M.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},M.prototype.parent=function(h){if(this._isCompound){var y=this._parent[h];if(y!=="\0")return y}},M.prototype.children=function(h){if(c.isUndefined(h)&&(h="\0"),this._isCompound){var y=this._children[h];if(y)return c.keys(y)}else{if(h==="\0")return this.nodes();if(this.hasNode(h))return[]}},M.prototype.predecessors=function(h){var y=this._preds[h];if(y)return c.keys(y)},M.prototype.successors=function(h){var y=this._sucs[h];if(y)return c.keys(y)},M.prototype.neighbors=function(h){var y=this.predecessors(h);if(y)return c.union(y,this.successors(h))},M.prototype.isLeaf=function(h){return(this.isDirected()?this.successors(h):this.neighbors(h)).length===0},M.prototype.filterNodes=function(h){var y=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});y.setGraph(this.graph());var E=this;c.each(this._nodes,function(p,A){h(A)&&y.setNode(A,p)}),c.each(this._edgeObjs,function(p){y.hasNode(p.v)&&y.hasNode(p.w)&&y.setEdge(p,E.edge(p))});var m={};return this._isCompound&&c.each(y.nodes(),function(p){y.setParent(p,function A(C){var N=E.parent(C);return N===void 0||y.hasNode(N)?(m[C]=N,N):N in m?m[N]:A(N)}(p))}),y},M.prototype.setDefaultEdgeLabel=function(h){return c.isFunction(h)||(h=c.constant(h)),this._defaultEdgeLabelFn=h,this},M.prototype.edgeCount=function(){return this._edgeCount},M.prototype.edges=function(){return c.values(this._edgeObjs)},M.prototype.setPath=function(h,y){var E=this,m=arguments;return c.reduce(h,function(p,A){return m.length>1?E.setEdge(p,A,y):E.setEdge(p,A),A}),this},M.prototype.setEdge=function(){var h,y,E,m,p=!1,A=arguments[0];f(A)==="object"&&A!==null&&"v"in A?(h=A.v,y=A.w,E=A.name,arguments.length===2&&(m=arguments[1],p=!0)):(h=A,y=arguments[1],E=arguments[3],arguments.length>2&&(m=arguments[2],p=!0)),h=""+h,y=""+y,c.isUndefined(E)||(E=""+E);var C=O(this._isDirected,h,y,E);if(c.has(this._edgeLabels,C))return p&&(this._edgeLabels[C]=m),this;if(!c.isUndefined(E)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(y),this._edgeLabels[C]=p?m:this._defaultEdgeLabelFn(h,y,E);var N=S(this._isDirected,h,y,E);return h=N.v,y=N.w,Object.freeze(N),this._edgeObjs[C]=N,_(this._preds[y],h),_(this._sucs[h],y),this._in[y][C]=N,this._out[h][C]=N,this._edgeCount++,this},M.prototype.edge=function(h,y,E){var m=arguments.length===1?g(this._isDirected,arguments[0]):O(this._isDirected,h,y,E);return this._edgeLabels[m]},M.prototype.hasEdge=function(h,y,E){var m=arguments.length===1?g(this._isDirected,arguments[0]):O(this._isDirected,h,y,E);return c.has(this._edgeLabels,m)},M.prototype.removeEdge=function(h,y,E){var m=arguments.length===1?g(this._isDirected,arguments[0]):O(this._isDirected,h,y,E),p=this._edgeObjs[m];return p&&(h=p.v,y=p.w,delete this._edgeLabels[m],delete this._edgeObjs[m],x(this._preds[y],h),x(this._sucs[h],y),delete this._in[y][m],delete this._out[h][m],this._edgeCount--),this},M.prototype.inEdges=function(h,y){var E=this._in[h];if(E){var m=c.values(E);return y?c.filter(m,function(p){return p.v===y}):m}},M.prototype.outEdges=function(h,y){var E=this._out[h];if(E){var m=c.values(E);return y?c.filter(m,function(p){return p.w===y}):m}},M.prototype.nodeEdges=function(h,y){var E=this.inEdges(h,y);if(E)return E.concat(this.outEdges(h,y))}},function(R,b,o){var f=o(62)(o(47),"Map");R.exports=f},function(R,b,o){var f=o(324),c=o(331),M=o(333),_=o(334),x=o(335);function O(S){var g=-1,h=S==null?0:S.length;for(this.clear();++g<h;){var y=S[g];this.set(y[0],y[1])}}O.prototype.clear=f,O.prototype.delete=c,O.prototype.get=M,O.prototype.has=_,O.prototype.set=x,R.exports=O},function(R,b){R.exports=function(o,f){for(var c=-1,M=o==null?0:o.length;++c<M&&f(o[c],c,o)!==!1;);return o}},function(R,b){R.exports=function(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=9007199254740991}},function(R,b,o){(function(f){function c(g){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(g)}var M=o(175),_=c(b)=="object"&&b&&!b.nodeType&&b,x=_&&c(f)=="object"&&f&&!f.nodeType&&f,O=x&&x.exports===_&&M.process,S=function(){try{var g=x&&x.require&&x.require("util").types;return g||O&&O.binding&&O.binding("util")}catch(h){}}();f.exports=S}).call(this,o(87)(R))},function(R,b,o){var f=o(105),c=o(341),M=Object.prototype.hasOwnProperty;R.exports=function(_){if(!f(_))return c(_);var x=[];for(var O in Object(_))M.call(_,O)&&O!="constructor"&&x.push(O);return x}},function(R,b,o){var f=o(183),c=o(184),M=Object.prototype.propertyIsEnumerable,_=Object.getOwnPropertySymbols,x=_?function(O){return O==null?[]:(O=Object(O),f(_(O),function(S){return M.call(O,S)}))}:c;R.exports=x},function(R,b){R.exports=function(o,f){for(var c=-1,M=f.length,_=o.length;++c<M;)o[_+c]=f[c];return o}},function(R,b,o){var f=o(189);R.exports=function(c){var M=new c.constructor(c.byteLength);return new f(M).set(new f(c)),M}},function(R,b){R.exports=function(o){return function(){return o}}},function(R,b,o){var f=o(155),c=o(57);R.exports=function(M,_){return M&&f(M,_,c)}},function(R,b,o){var f=o(360)();R.exports=f},function(R,b){R.exports=function(o){var f=-1,c=Array(o.size);return o.forEach(function(M){c[++f]=M}),c}},function(R,b,o){function f(O){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(O)}var c=o(31),M=o(74),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;R.exports=function(O,S){if(c(O))return!1;var g=f(O);return!(g!="number"&&g!="symbol"&&g!="boolean"&&O!=null&&!M(O))||x.test(O)||!_.test(O)||S!=null&&O in Object(S)}},function(R,b,o){var f=o(151),c=o(394);R.exports=function M(_,x,O,S,g){var h=-1,y=_.length;for(O||(O=c),g||(g=[]);++h<y;){var E=_[h];x>0&&O(E)?x>1?M(E,x-1,O,S,g):f(g,E):S||(g[g.length]=E)}return g}},function(R,b,o){var f=o(74);R.exports=function(c,M,_){for(var x=-1,O=c.length;++x<O;){var S=c[x],g=M(S);if(g!=null&&(h===void 0?g==g&&!f(g):_(g,h)))var h=g,y=S}return y}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BindingOnSyntax=void 0;var f=o(161),c=function(){function M(_){this._binding=_}return M.prototype.onActivation=function(_){return this._binding.onActivation=_,new f.BindingWhenSyntax(this._binding)},M}();b.BindingOnSyntax=c},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BindingWhenSyntax=void 0;var f=o(160),c=o(236),M=function(){function _(x){this._binding=x}return _.prototype.when=function(x){return this._binding.constraint=x,new f.BindingOnSyntax(this._binding)},_.prototype.whenTargetNamed=function(x){return this._binding.constraint=c.namedConstraint(x),new f.BindingOnSyntax(this._binding)},_.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(x){return x.target!==null&&!x.target.isNamed()&&!x.target.isTagged()},new f.BindingOnSyntax(this._binding)},_.prototype.whenTargetTagged=function(x,O){return this._binding.constraint=c.taggedConstraint(x)(O),new f.BindingOnSyntax(this._binding)},_.prototype.whenInjectedInto=function(x){return this._binding.constraint=function(O){return c.typeConstraint(x)(O.parentRequest)},new f.BindingOnSyntax(this._binding)},_.prototype.whenParentNamed=function(x){return this._binding.constraint=function(O){return c.namedConstraint(x)(O.parentRequest)},new f.BindingOnSyntax(this._binding)},_.prototype.whenParentTagged=function(x,O){return this._binding.constraint=function(S){return c.taggedConstraint(x)(O)(S.parentRequest)},new f.BindingOnSyntax(this._binding)},_.prototype.whenAnyAncestorIs=function(x){return this._binding.constraint=function(O){return c.traverseAncerstors(O,c.typeConstraint(x))},new f.BindingOnSyntax(this._binding)},_.prototype.whenNoAncestorIs=function(x){return this._binding.constraint=function(O){return!c.traverseAncerstors(O,c.typeConstraint(x))},new f.BindingOnSyntax(this._binding)},_.prototype.whenAnyAncestorNamed=function(x){return this._binding.constraint=function(O){return c.traverseAncerstors(O,c.namedConstraint(x))},new f.BindingOnSyntax(this._binding)},_.prototype.whenNoAncestorNamed=function(x){return this._binding.constraint=function(O){return!c.traverseAncerstors(O,c.namedConstraint(x))},new f.BindingOnSyntax(this._binding)},_.prototype.whenAnyAncestorTagged=function(x,O){return this._binding.constraint=function(S){return c.traverseAncerstors(S,c.taggedConstraint(x)(O))},new f.BindingOnSyntax(this._binding)},_.prototype.whenNoAncestorTagged=function(x,O){return this._binding.constraint=function(S){return!c.traverseAncerstors(S,c.taggedConstraint(x)(O))},new f.BindingOnSyntax(this._binding)},_.prototype.whenAnyAncestorMatches=function(x){return this._binding.constraint=function(O){return c.traverseAncerstors(O,x)},new f.BindingOnSyntax(this._binding)},_.prototype.whenNoAncestorMatches=function(x){return this._binding.constraint=function(O){return!c.traverseAncerstors(O,x)},new f.BindingOnSyntax(this._binding)},_}();b.BindingWhenSyntax=M},function(R,b){R.exports=function(o,f,c){return o[0]=f[0]-c[0],o[1]=f[1]-c[1],o}},function(R,b,o){R.exports={graphlib:o(46),layout:o(418),debug:o(479),util:{time:o(36).time,notime:o(36).notime},version:o(480)}},function(R,b){},function(R,b){},function(R,b){var o,f,c=R.exports={};function M(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}function x(A){if(o===setTimeout)return setTimeout(A,0);if((o===M||!o)&&setTimeout)return o=setTimeout,setTimeout(A,0);try{return o(A,0)}catch(C){try{return o.call(null,A,0)}catch(N){return o.call(this,A,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:M}catch(A){o=M}try{f=typeof clearTimeout=="function"?clearTimeout:_}catch(A){f=_}})();var O,S=[],g=!1,h=-1;function y(){g&&O&&(g=!1,O.length?S=O.concat(S):h=-1,S.length&&E())}function E(){if(!g){var A=x(y);g=!0;for(var C=S.length;C;){for(O=S,S=[];++h<C;)O&&O[h].run();h=-1,C=S.length}O=null,g=!1,function(N){if(f===clearTimeout)return clearTimeout(N);if((f===_||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(N);try{f(N)}catch(P){try{return f.call(null,N)}catch(L){return f.call(this,N)}}}(A)}}function m(A,C){this.fun=A,this.array=C}function p(){}c.nextTick=function(A){var C=new Array(arguments.length-1);if(arguments.length>1)for(var N=1;N<arguments.length;N++)C[N-1]=arguments[N];S.push(new m(A,C)),S.length!==1||g||x(E)},m.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=p,c.addListener=p,c.once=p,c.off=p,c.removeListener=p,c.removeAllListeners=p,c.emit=p,c.prependListener=p,c.prependOnceListener=p,c.listeners=function(A){return[]},c.binding=function(A){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(A){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(R,b,o){"use strict";var f=o(1),c=function(M){function _(){return M!==null&&M.apply(this,arguments)||this}return Object(f.__extends)(_,M),_.prototype.isGroup=function(){return!0},_.prototype.isEntityGroup=function(){return!1},_.prototype.clone=function(){for(var x=M.prototype.clone.call(this),O=this.getChildren(),S=0;S<O.length;S++){var g=O[S];x.add(g.clone())}return x},_}(o(136).a);b.a=c},function(R,b,o){"use strict";var f=o(1),c=o(137),M=o(38),_=function(x){function O(S){return x.call(this,S)||this}return Object(f.__extends)(O,x),O.prototype._isInBBox=function(S,g){var h=this.getBBox();return h.minX<=S&&h.maxX>=S&&h.minY<=g&&h.maxY>=g},O.prototype.afterAttrsChange=function(S){x.prototype.afterAttrsChange.call(this,S),this.clearCacheBBox()},O.prototype.getBBox=function(){var S=this.cfg.bbox;return S||(S=this.calculateBBox(),this.set("bbox",S)),S},O.prototype.getCanvasBBox=function(){var S=this.cfg.canvasBBox;return S||(S=this.calculateCanvasBBox(),this.set("canvasBBox",S)),S},O.prototype.applyMatrix=function(S){x.prototype.applyMatrix.call(this,S),this.set("canvasBBox",null)},O.prototype.calculateCanvasBBox=function(){var S=this.getBBox(),g=this.getTotalMatrix(),h=S.minX,y=S.minY,E=S.maxX,m=S.maxY;if(g){var p=Object(M.c)(g,[S.minX,S.minY]),A=Object(M.c)(g,[S.maxX,S.minY]),C=Object(M.c)(g,[S.minX,S.maxY]),N=Object(M.c)(g,[S.maxX,S.maxY]);h=Math.min(p[0],A[0],C[0],N[0]),E=Math.max(p[0],A[0],C[0],N[0]),y=Math.min(p[1],A[1],C[1],N[1]),m=Math.max(p[1],A[1],C[1],N[1])}var P=this.attrs;if(P.shadowColor){var L=P.shadowBlur,z=L===void 0?0:L,H=P.shadowOffsetX,re=H===void 0?0:H,ae=P.shadowOffsetY,ue=ae===void 0?0:ae,xe=h-z+re,ye=E+z+re,Y=y-z+ue,Ce=m+z+ue;h=Math.min(h,xe),E=Math.max(E,ye),y=Math.min(y,Y),m=Math.max(m,Ce)}return{x:h,y,minX:h,minY:y,maxX:E,maxY:m,width:E-h,height:m-y}},O.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},O.prototype.isClipShape=function(){return this.get("isClipShape")},O.prototype.isInShape=function(S,g){return!1},O.prototype.isOnlyHitBox=function(){return!1},O.prototype.isHit=function(S,g){var h=this.get("startArrowShape"),y=this.get("endArrowShape"),E=[S,g,1],m=(E=this.invertFromMatrix(E))[0],p=E[1],A=this._isInBBox(m,p);return this.isOnlyHitBox()?A:!!(A&&!this.isClipped(m,p)&&(this.isInShape(m,p)||h&&h.isHit(m,p)||y&&y.isHit(m,p)))},O}(c.a);b.a=_},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(_,x){return x?M(_):c(_)},b.detectStrongConnectComponents=b.detectConnectedComponents=void 0;var f=o(45),c=function(_){for(var x=_.nodes,O=x===void 0?[]:x,S=_.edges,g=S===void 0?[]:S,h=[],y={},E=[],m=function N(P){E.push(P),y[P.id]=!0;for(var L=(0,f.getNeighbors)(P.id,g),z=function(re){var ae=L[re];if(!y[ae]){var ue=O.filter(function(xe){return xe.id===ae});ue.length>0&&N(ue[0])}},H=0;H<L.length;++H)z(H)},p=0;p<O.length;p++){var A=O[p];if(!y[A.id]){m(A);for(var C=[];E.length>0;)C.push(E.pop());h.push(C)}}return h};b.detectConnectedComponents=c;var M=function(_){for(var x=_.nodes,O=x===void 0?[]:x,S=_.edges,g=S===void 0?[]:S,h=[],y={},E={},m={},p=[],A=0,C=function z(H){E[H.id]=A,m[H.id]=A,A+=1,h.push(H),y[H.id]=!0;for(var re=(0,f.getNeighbors)(H.id,g,"target").filter(function(Y){return O.map(function(Ce){return Ce.id}).indexOf(Y)>-1}),ae=function(Y){var Ce=re[Y];if(E[Ce]||E[Ce]===0)y[Ce]&&(m[H.id]=Math.min(m[H.id],E[Ce]));else{var ge=O.filter(function(he){return he.id===Ce});ge.length>0&&z(ge[0]),m[H.id]=Math.min(m[H.id],m[Ce])}},ue=0;ue<re.length;ue++)ae(ue);if(m[H.id]===E[H.id]){for(var xe=[];h.length>0;){var ye=h.pop();if(y[ye.id]=!1,xe.push(ye),ye===H)break}xe.length>0&&p.push(xe)}},N=0,P=O;N<P.length;N++){var L=P[N];E[L.id]||E[L.id]===0||C(L)}return p};b.detectStrongConnectComponents=M},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.getOutDegree=b.getInDegree=b.default=void 0;var f=function(M){var _={},x=M.nodes,O=x===void 0?[]:x,S=M.edges,g=S===void 0?[]:S;return O.forEach(function(h){_[h.id]={degree:0,inDegree:0,outDegree:0}}),g.forEach(function(h){_[h.source].degree++,_[h.source].outDegree++,_[h.target].degree++,_[h.target].inDegree++}),_},c=f;b.default=c,b.getInDegree=function(M,_){return f(M)[_]?f(M)[_].inDegree:0},b.getOutDegree=function(M,_){return f(M)[_]?f(M)[_].outDegree:0}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(c,M,_){(function x(O,S,g,h){h.enter({current:S,previous:g});var y=O.edges,E=y===void 0?[]:y;(0,f.getNeighbors)(S,E,"target").forEach(function(m){h.allowTraversal({previous:g,current:S,next:m})&&x(O,m,S,h)}),h.leave({current:S,previous:g})})(c,M,"",function(x){x===void 0&&(x={});var O=x,S=function(){},g=(h={},function(y){var E=y.next;return!h[E]&&(h[E]=!0,!0)}),h;return O.allowTraversal=x.allowTraversal||g,O.enter=x.enter||S,O.leave=x.leave||S,O}(_))};var f=o(45)},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f,c=(f=o(95))&&f.__esModule?f:{default:f},M=function(_,x){for(var O=(0,c.default)(_,x),S=[],g=O.length,h=0;h<g;h+=1){S[h]=[];for(var y=0;y<g;y+=1)h===y?S[h][y]=0:O[h][y]!==0&&O[h][y]?S[h][y]=O[h][y]:S[h][y]=1/0}for(var E=0;E<g;E+=1)for(h=0;h<g;h+=1)for(y=0;y<g;y+=1)S[h][y]>S[h][E]+S[E][y]&&(S[h][y]=S[h][E]+S[E][y]);return S};b.default=M},function(R,b,o){var f=o(303),c={};for(var M in f)f.hasOwnProperty(M)&&(c[f[M]]=M);var _=R.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var x in _)if(_.hasOwnProperty(x)){if(!("channels"in _[x]))throw new Error("missing channels property: "+x);if(!("labels"in _[x]))throw new Error("missing channel labels property: "+x);if(_[x].labels.length!==_[x].channels)throw new Error("channel and label counts mismatch: "+x);var O=_[x].channels,S=_[x].labels;delete _[x].channels,delete _[x].labels,Object.defineProperty(_[x],"channels",{value:O}),Object.defineProperty(_[x],"labels",{value:S})}_.rgb.hsl=function(g){var h,y,E=g[0]/255,m=g[1]/255,p=g[2]/255,A=Math.min(E,m,p),C=Math.max(E,m,p),N=C-A;return C===A?h=0:E===C?h=(m-p)/N:m===C?h=2+(p-E)/N:p===C&&(h=4+(E-m)/N),(h=Math.min(60*h,360))<0&&(h+=360),y=(A+C)/2,[h,100*(C===A?0:y<=.5?N/(C+A):N/(2-C-A)),100*y]},_.rgb.hsv=function(g){var h,y,E,m,p,A=g[0]/255,C=g[1]/255,N=g[2]/255,P=Math.max(A,C,N),L=P-Math.min(A,C,N),z=function(H){return(P-H)/6/L+.5};return L===0?m=p=0:(p=L/P,h=z(A),y=z(C),E=z(N),A===P?m=E-y:C===P?m=1/3+h-E:N===P&&(m=2/3+y-h),m<0?m+=1:m>1&&(m-=1)),[360*m,100*p,100*P]},_.rgb.hwb=function(g){var h=g[0],y=g[1],E=g[2];return[_.rgb.hsl(g)[0],100*(1/255*Math.min(h,Math.min(y,E))),100*(E=1-1/255*Math.max(h,Math.max(y,E)))]},_.rgb.cmyk=function(g){var h,y=g[0]/255,E=g[1]/255,m=g[2]/255;return[100*((1-y-(h=Math.min(1-y,1-E,1-m)))/(1-h)||0),100*((1-E-h)/(1-h)||0),100*((1-m-h)/(1-h)||0),100*h]},_.rgb.keyword=function(g){var h=c[g];if(h)return h;var y,E,m,p=1/0;for(var A in f)if(f.hasOwnProperty(A)){var C=f[A],N=(E=g,m=C,Math.pow(E[0]-m[0],2)+Math.pow(E[1]-m[1],2)+Math.pow(E[2]-m[2],2));N<p&&(p=N,y=A)}return y},_.keyword.rgb=function(g){return f[g]},_.rgb.xyz=function(g){var h=g[0]/255,y=g[1]/255,E=g[2]/255;return[100*(.4124*(h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92)+.3576*(y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92)+.1805*(E=E>.04045?Math.pow((E+.055)/1.055,2.4):E/12.92)),100*(.2126*h+.7152*y+.0722*E),100*(.0193*h+.1192*y+.9505*E)]},_.rgb.lab=function(g){var h=_.rgb.xyz(g),y=h[0],E=h[1],m=h[2];return E/=100,m/=108.883,y=(y/=95.047)>.008856?Math.pow(y,1/3):7.787*y+16/116,[116*(E=E>.008856?Math.pow(E,1/3):7.787*E+16/116)-16,500*(y-E),200*(E-(m=m>.008856?Math.pow(m,1/3):7.787*m+16/116))]},_.hsl.rgb=function(g){var h,y,E,m,p,A=g[0]/360,C=g[1]/100,N=g[2]/100;if(C===0)return[p=255*N,p,p];h=2*N-(y=N<.5?N*(1+C):N+C-N*C),m=[0,0,0];for(var P=0;P<3;P++)(E=A+1/3*-(P-1))<0&&E++,E>1&&E--,p=6*E<1?h+6*(y-h)*E:2*E<1?y:3*E<2?h+(y-h)*(2/3-E)*6:h,m[P]=255*p;return m},_.hsl.hsv=function(g){var h=g[0],y=g[1]/100,E=g[2]/100,m=y,p=Math.max(E,.01);return y*=(E*=2)<=1?E:2-E,m*=p<=1?p:2-p,[h,100*(E===0?2*m/(p+m):2*y/(E+y)),100*((E+y)/2)]},_.hsv.rgb=function(g){var h=g[0]/60,y=g[1]/100,E=g[2]/100,m=Math.floor(h)%6,p=h-Math.floor(h),A=255*E*(1-y),C=255*E*(1-y*p),N=255*E*(1-y*(1-p));switch(E*=255,m){case 0:return[E,N,A];case 1:return[C,E,A];case 2:return[A,E,N];case 3:return[A,C,E];case 4:return[N,A,E];case 5:return[E,A,C]}},_.hsv.hsl=function(g){var h,y,E,m=g[0],p=g[1]/100,A=g[2]/100,C=Math.max(A,.01);return E=(2-p)*A,y=p*C,[m,100*(y=(y/=(h=(2-p)*C)<=1?h:2-h)||0),100*(E/=2)]},_.hwb.rgb=function(g){var h,y,E,m,p,A,C,N=g[0]/360,P=g[1]/100,L=g[2]/100,z=P+L;switch(z>1&&(P/=z,L/=z),E=6*N-(h=Math.floor(6*N)),(1&h)!=0&&(E=1-E),m=P+E*((y=1-L)-P),h){default:case 6:case 0:p=y,A=m,C=P;break;case 1:p=m,A=y,C=P;break;case 2:p=P,A=y,C=m;break;case 3:p=P,A=m,C=y;break;case 4:p=m,A=P,C=y;break;case 5:p=y,A=P,C=m}return[255*p,255*A,255*C]},_.cmyk.rgb=function(g){var h=g[0]/100,y=g[1]/100,E=g[2]/100,m=g[3]/100;return[255*(1-Math.min(1,h*(1-m)+m)),255*(1-Math.min(1,y*(1-m)+m)),255*(1-Math.min(1,E*(1-m)+m))]},_.xyz.rgb=function(g){var h,y,E,m=g[0]/100,p=g[1]/100,A=g[2]/100;return y=-.9689*m+1.8758*p+.0415*A,E=.0557*m+-.204*p+1.057*A,h=(h=3.2406*m+-1.5372*p+-.4986*A)>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,y=y>.0031308?1.055*Math.pow(y,1/2.4)-.055:12.92*y,E=E>.0031308?1.055*Math.pow(E,1/2.4)-.055:12.92*E,[255*(h=Math.min(Math.max(0,h),1)),255*(y=Math.min(Math.max(0,y),1)),255*(E=Math.min(Math.max(0,E),1))]},_.xyz.lab=function(g){var h=g[0],y=g[1],E=g[2];return y/=100,E/=108.883,h=(h/=95.047)>.008856?Math.pow(h,1/3):7.787*h+16/116,[116*(y=y>.008856?Math.pow(y,1/3):7.787*y+16/116)-16,500*(h-y),200*(y-(E=E>.008856?Math.pow(E,1/3):7.787*E+16/116))]},_.lab.xyz=function(g){var h,y,E,m=g[0];h=g[1]/500+(y=(m+16)/116),E=y-g[2]/200;var p=Math.pow(y,3),A=Math.pow(h,3),C=Math.pow(E,3);return y=p>.008856?p:(y-16/116)/7.787,h=A>.008856?A:(h-16/116)/7.787,E=C>.008856?C:(E-16/116)/7.787,[h*=95.047,y*=100,E*=108.883]},_.lab.lch=function(g){var h,y=g[0],E=g[1],m=g[2];return(h=360*Math.atan2(m,E)/2/Math.PI)<0&&(h+=360),[y,Math.sqrt(E*E+m*m),h]},_.lch.lab=function(g){var h,y=g[0],E=g[1];return h=g[2]/360*2*Math.PI,[y,E*Math.cos(h),E*Math.sin(h)]},_.rgb.ansi16=function(g){var h=g[0],y=g[1],E=g[2],m=1 in arguments?arguments[1]:_.rgb.hsv(g)[2];if((m=Math.round(m/50))===0)return 30;var p=30+(Math.round(E/255)<<2|Math.round(y/255)<<1|Math.round(h/255));return m===2&&(p+=60),p},_.hsv.ansi16=function(g){return _.rgb.ansi16(_.hsv.rgb(g),g[2])},_.rgb.ansi256=function(g){var h=g[0],y=g[1],E=g[2];return h===y&&y===E?h<8?16:h>248?231:Math.round((h-8)/247*24)+232:16+36*Math.round(h/255*5)+6*Math.round(y/255*5)+Math.round(E/255*5)},_.ansi16.rgb=function(g){var h=g%10;if(h===0||h===7)return g>50&&(h+=3.5),[h=h/10.5*255,h,h];var y=.5*(1+~~(g>50));return[(1&h)*y*255,(h>>1&1)*y*255,(h>>2&1)*y*255]},_.ansi256.rgb=function(g){if(g>=232){var h=10*(g-232)+8;return[h,h,h]}var y;return g-=16,[Math.floor(g/36)/5*255,Math.floor((y=g%36)/6)/5*255,y%6/5*255]},_.rgb.hex=function(g){var h=(((255&Math.round(g[0]))<<16)+((255&Math.round(g[1]))<<8)+(255&Math.round(g[2]))).toString(16).toUpperCase();return"000000".substring(h.length)+h},_.hex.rgb=function(g){var h=g.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!h)return[0,0,0];var y=h[0];h[0].length===3&&(y=y.split("").map(function(m){return m+m}).join(""));var E=parseInt(y,16);return[E>>16&255,E>>8&255,255&E]},_.rgb.hcg=function(g){var h,y=g[0]/255,E=g[1]/255,m=g[2]/255,p=Math.max(Math.max(y,E),m),A=Math.min(Math.min(y,E),m),C=p-A;return h=C<=0?0:p===y?(E-m)/C%6:p===E?2+(m-y)/C:4+(y-E)/C+4,h/=6,[360*(h%=1),100*C,100*(C<1?A/(1-C):0)]},_.hsl.hcg=function(g){var h=g[1]/100,y=g[2]/100,E=1,m=0;return(E=y<.5?2*h*y:2*h*(1-y))<1&&(m=(y-.5*E)/(1-E)),[g[0],100*E,100*m]},_.hsv.hcg=function(g){var h=g[1]/100,y=g[2]/100,E=h*y,m=0;return E<1&&(m=(y-E)/(1-E)),[g[0],100*E,100*m]},_.hcg.rgb=function(g){var h=g[0]/360,y=g[1]/100,E=g[2]/100;if(y===0)return[255*E,255*E,255*E];var m,p=[0,0,0],A=h%1*6,C=A%1,N=1-C;switch(Math.floor(A)){case 0:p[0]=1,p[1]=C,p[2]=0;break;case 1:p[0]=N,p[1]=1,p[2]=0;break;case 2:p[0]=0,p[1]=1,p[2]=C;break;case 3:p[0]=0,p[1]=N,p[2]=1;break;case 4:p[0]=C,p[1]=0,p[2]=1;break;default:p[0]=1,p[1]=0,p[2]=N}return m=(1-y)*E,[255*(y*p[0]+m),255*(y*p[1]+m),255*(y*p[2]+m)]},_.hcg.hsv=function(g){var h=g[1]/100,y=h+g[2]/100*(1-h),E=0;return y>0&&(E=h/y),[g[0],100*E,100*y]},_.hcg.hsl=function(g){var h=g[1]/100,y=g[2]/100*(1-h)+.5*h,E=0;return y>0&&y<.5?E=h/(2*y):y>=.5&&y<1&&(E=h/(2*(1-y))),[g[0],100*E,100*y]},_.hcg.hwb=function(g){var h=g[1]/100,y=h+g[2]/100*(1-h);return[g[0],100*(y-h),100*(1-y)]},_.hwb.hcg=function(g){var h=g[1]/100,y=1-g[2]/100,E=y-h,m=0;return E<1&&(m=(y-E)/(1-E)),[g[0],100*E,100*m]},_.apple.rgb=function(g){return[g[0]/65535*255,g[1]/65535*255,g[2]/65535*255]},_.rgb.apple=function(g){return[g[0]/255*65535,g[1]/255*65535,g[2]/255*65535]},_.gray.rgb=function(g){return[g[0]/100*255,g[0]/100*255,g[0]/100*255]},_.gray.hsl=_.gray.hsv=function(g){return[0,0,g[0]]},_.gray.hwb=function(g){return[0,100,g[0]]},_.gray.cmyk=function(g){return[0,0,0,g[0]]},_.gray.lab=function(g){return[g[0],0,0]},_.gray.hex=function(g){var h=255&Math.round(g[0]/100*255),y=((h<<16)+(h<<8)+h).toString(16).toUpperCase();return"000000".substring(y.length)+y},_.rgb.gray=function(g){return[(g[0]+g[1]+g[2])/3/255*100]}},function(R,b,o){var f=o(96),c=o(146),M=o(101),_=o(336),x=o(342),O=o(181),S=o(182),g=o(345),h=o(346),y=o(186),E=o(347),m=o(73),p=o(351),A=o(352),C=o(191),N=o(31),P=o(72),L=o(356),z=o(43),H=o(358),re=o(57),ae=o(64),ue={};ue["[object Arguments]"]=ue["[object Array]"]=ue["[object ArrayBuffer]"]=ue["[object DataView]"]=ue["[object Boolean]"]=ue["[object Date]"]=ue["[object Float32Array]"]=ue["[object Float64Array]"]=ue["[object Int8Array]"]=ue["[object Int16Array]"]=ue["[object Int32Array]"]=ue["[object Map]"]=ue["[object Number]"]=ue["[object Object]"]=ue["[object RegExp]"]=ue["[object Set]"]=ue["[object String]"]=ue["[object Symbol]"]=ue["[object Uint8Array]"]=ue["[object Uint8ClampedArray]"]=ue["[object Uint16Array]"]=ue["[object Uint32Array]"]=!0,ue["[object Error]"]=ue["[object Function]"]=ue["[object WeakMap]"]=!1,R.exports=function xe(ye,Y,Ce,ge,he,Q){var W,le=1&Y,Oe=2&Y,Te=4&Y;if(Ce&&(W=he?Ce(ye,ge,he,Q):Ce(ye)),W!==void 0)return W;if(!z(ye))return ye;var se=N(ye);if(se){if(W=p(ye),!le)return S(ye,W)}else{var ee=m(ye),te=ee=="[object Function]"||ee=="[object GeneratorFunction]";if(P(ye))return O(ye,le);if(ee=="[object Object]"||ee=="[object Arguments]"||te&&!he){if(W=Oe||te?{}:C(ye),!le)return Oe?h(ye,x(W,ye)):g(ye,_(W,ye))}else{if(!ue[ee])return he?ye:{};W=A(ye,ee,le)}}Q||(Q=new f);var U=Q.get(ye);if(U)return U;Q.set(ye,W),H(ye)?ye.forEach(function(B){W.add(xe(B,Y,Ce,B,ye,Q))}):L(ye)&&ye.forEach(function(B,J){W.set(J,xe(B,Y,Ce,J,ye,Q))});var X=se?void 0:(Te?Oe?E:y:Oe?ae:re)(ye);return c(X||ye,function(B,J){X&&(B=ye[J=B]),M(W,J,xe(B,Y,Ce,J,ye,Q))}),W}},function(R,b,o){(function(f){function c(_){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}var M=(f===void 0?"undefined":c(f))=="object"&&f&&f.Object===Object&&f;R.exports=M}).call(this,o(176))},function(R,b){function o(c){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(c)}var f;f=function(){return this}();try{f=f||new Function("return this")()}catch(c){(typeof window=="undefined"?"undefined":o(window))==="object"&&(f=window)}R.exports=f},function(R,b){var o=Function.prototype.toString;R.exports=function(f){if(f!=null){try{return o.call(f)}catch(c){}try{return f+""}catch(c){}}return""}},function(R,b,o){var f=o(62),c=function(){try{var M=f(Object,"defineProperty");return M({},"",{}),M}catch(_){}}();R.exports=c},function(R,b,o){var f=o(337),c=o(86),M=o(31),_=o(72),x=o(103),O=o(88),S=Object.prototype.hasOwnProperty;R.exports=function(g,h){var y=M(g),E=!y&&c(g),m=!y&&!E&&_(g),p=!y&&!E&&!m&&O(g),A=y||E||m||p,C=A?f(g.length,String):[],N=C.length;for(var P in g)!h&&!S.call(g,P)||A&&(P=="length"||m&&(P=="offset"||P=="parent")||p&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||x(P,N))||C.push(P);return C}},function(R,b){R.exports=function(o,f){return function(c){return o(f(c))}}},function(R,b,o){(function(f){function c(g){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(g)}var M=o(47),_=c(b)=="object"&&b&&!b.nodeType&&b,x=_&&c(f)=="object"&&f&&!f.nodeType&&f,O=x&&x.exports===_?M.Buffer:void 0,S=O?O.allocUnsafe:void 0;f.exports=function(g,h){if(h)return g.slice();var y=g.length,E=S?S(y):new g.constructor(y);return g.copy(E),E}}).call(this,o(87)(R))},function(R,b){R.exports=function(o,f){var c=-1,M=o.length;for(f||(f=Array(M));++c<M;)f[c]=o[c];return f}},function(R,b){R.exports=function(o,f){for(var c=-1,M=o==null?0:o.length,_=0,x=[];++c<M;){var O=o[c];f(O,c,o)&&(x[_++]=O)}return x}},function(R,b){R.exports=function(){return[]}},function(R,b,o){var f=o(151),c=o(106),M=o(150),_=o(184),x=Object.getOwnPropertySymbols?function(O){for(var S=[];O;)f(S,M(O)),O=c(O);return S}:_;R.exports=x},function(R,b,o){var f=o(187),c=o(150),M=o(57);R.exports=function(_){return f(_,M,c)}},function(R,b,o){var f=o(151),c=o(31);R.exports=function(M,_,x){var O=_(M);return c(M)?O:f(O,x(M))}},function(R,b,o){var f=o(62)(o(47),"Set");R.exports=f},function(R,b,o){var f=o(47).Uint8Array;R.exports=f},function(R,b,o){var f=o(152);R.exports=function(c,M){var _=M?f(c.buffer):c.buffer;return new c.constructor(_,c.byteOffset,c.length)}},function(R,b,o){var f=o(192),c=o(106),M=o(105);R.exports=function(_){return typeof _.constructor!="function"||M(_)?{}:f(c(_))}},function(R,b,o){var f=o(43),c=Object.create,M=function(){function _(){}return function(x){if(!f(x))return{};if(c)return c(x);_.prototype=x;var O=new _;return _.prototype=void 0,O}}();R.exports=M},function(R,b,o){R.exports=o(194)},function(R,b,o){var f=o(146),c=o(107),M=o(195),_=o(31);R.exports=function(x,O){return(_(x)?f:c)(x,M(O))}},function(R,b,o){var f=o(65);R.exports=function(c){return typeof c=="function"?c:f}},function(R,b,o){var f=o(183),c=o(362),M=o(53),_=o(31);R.exports=function(x,O){return(_(x)?f:c)(x,M(O,3))}},function(R,b,o){var f=o(365),c=o(49);R.exports=function M(_,x,O,S,g){return _===x||(_==null||x==null||!c(_)&&!c(x)?_!=_&&x!=x:f(_,x,O,S,M,g))}},function(R,b,o){var f=o(199),c=o(368),M=o(200);R.exports=function(_,x,O,S,g,h){var y=1&O,E=_.length,m=x.length;if(E!=m&&!(y&&m>E))return!1;var p=h.get(_),A=h.get(x);if(p&&A)return p==x&&A==_;var C=-1,N=!0,P=2&O?new f:void 0;for(h.set(_,x),h.set(x,_);++C<E;){var L=_[C],z=x[C];if(S)var H=y?S(z,L,C,x,_,h):S(L,z,C,_,x,h);if(H!==void 0){if(H)continue;N=!1;break}if(P){if(!c(x,function(re,ae){if(!M(P,ae)&&(L===re||g(L,re,O,S,h)))return P.push(ae)})){N=!1;break}}else if(L!==z&&!g(L,z,O,S,h)){N=!1;break}}return h.delete(_),h.delete(x),N}},function(R,b,o){var f=o(145),c=o(366),M=o(367);function _(x){var O=-1,S=x==null?0:x.length;for(this.__data__=new f;++O<S;)this.add(x[O])}_.prototype.add=_.prototype.push=c,_.prototype.has=M,R.exports=_},function(R,b){R.exports=function(o,f){return o.has(f)}},function(R,b,o){var f=o(43);R.exports=function(c){return c==c&&!f(c)}},function(R,b){R.exports=function(o,f){return function(c){return c!=null&&c[o]===f&&(f!==void 0||o in Object(c))}}},function(R,b,o){var f=o(378);R.exports=function(c){return c==null?"":f(c)}},function(R,b,o){var f=o(379),c=o(205);R.exports=function(M,_){return M!=null&&c(M,_,f)}},function(R,b,o){var f=o(109),c=o(86),M=o(31),_=o(103),x=o(147),O=o(89);R.exports=function(S,g,h){for(var y=-1,E=(g=f(g,S)).length,m=!1;++y<E;){var p=O(g[y]);if(!(m=S!=null&&h(S,p)))break;S=S[p]}return m||++y!=E?m:!!(E=S==null?0:S.length)&&x(E)&&_(p,E)&&(M(S)||c(S))}},function(R,b){R.exports=function(o){return function(f){return f==null?void 0:f[o]}}},function(R,b,o){var f=o(382),c=o(205);R.exports=function(M,_){return M!=null&&c(M,_,f)}},function(R,b){R.exports=function(o){return o===void 0}},function(R,b,o){var f=o(110),c=o(53),M=o(210),_=o(31);R.exports=function(x,O){return(_(x)?f:M)(x,c(O,3))}},function(R,b,o){var f=o(107),c=o(52);R.exports=function(M,_){var x=-1,O=c(M)?Array(M.length):[];return f(M,function(S,g,h){O[++x]=_(S,g,h)}),O}},function(R,b,o){var f=o(384),c=o(107),M=o(53),_=o(385),x=o(31);R.exports=function(O,S,g){var h=x(O)?f:_,y=arguments.length<3;return h(O,M(S,4),g,y,c)}},function(R,b,o){var f=o(395),c=Math.max;R.exports=function(M,_,x){return _=c(_===void 0?M.length-1:_,0),function(){for(var O=arguments,S=-1,g=c(O.length-_,0),h=Array(g);++S<g;)h[S]=O[_+S];S=-1;for(var y=Array(_+1);++S<_;)y[S]=O[S];return y[_]=x(h),f(M,this,y)}}},function(R,b,o){var f=o(396),c=o(397)(f);R.exports=c},function(R,b){R.exports=function(o,f,c,M){for(var _=o.length,x=c+(M?1:-1);M?x--:++x<_;)if(f(o[x],x,o))return x;return-1}},function(R,b,o){var f=o(52),c=o(49);R.exports=function(M){return c(M)&&f(M)}},function(R,b,o){var f=o(406),c=o(57);R.exports=function(M){return M==null?[]:f(M,c(M))}},function(R,b,o){var f=o(42),c=o(218);R.exports=function(_,x,O,S){return function(g,h,y,E){var m,p,A={},C=new c,N=function(P){var L=P.v!==m?P.v:P.w,z=A[L],H=y(P),re=p.distance+H;if(H<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+P+" Weight: "+H);re<z.distance&&(z.distance=re,z.predecessor=m,C.decrease(L,re))};for(g.nodes().forEach(function(P){var L=P===h?0:Number.POSITIVE_INFINITY;A[P]={distance:L},C.add(P,L)});C.size()>0&&(m=C.removeMin(),(p=A[m]).distance!==Number.POSITIVE_INFINITY);)E(m).forEach(N);return A}(_,String(x),O||M,S||function(g){return _.outEdges(g)})};var M=f.constant(1)},function(R,b,o){var f=o(42);function c(){this._arr=[],this._keyIndices={}}R.exports=c,c.prototype.size=function(){return this._arr.length},c.prototype.keys=function(){return this._arr.map(function(M){return M.key})},c.prototype.has=function(M){return f.has(this._keyIndices,M)},c.prototype.priority=function(M){var _=this._keyIndices[M];if(_!==void 0)return this._arr[_].priority},c.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},c.prototype.add=function(M,_){var x=this._keyIndices;if(M=String(M),!f.has(x,M)){var O=this._arr,S=O.length;return x[M]=S,O.push({key:M,priority:_}),this._decrease(S),!0}return!1},c.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var M=this._arr.pop();return delete this._keyIndices[M.key],this._heapify(0),M.key},c.prototype.decrease=function(M,_){var x=this._keyIndices[M];if(_>this._arr[x].priority)throw new Error("New priority is greater than current priority. Key: "+M+" Old: "+this._arr[x].priority+" New: "+_);this._arr[x].priority=_,this._decrease(x)},c.prototype._heapify=function(M){var _=this._arr,x=2*M,O=x+1,S=M;x<_.length&&(S=_[x].priority<_[S].priority?x:S,O<_.length&&(S=_[O].priority<_[S].priority?O:S),S!==M&&(this._swap(M,S),this._heapify(S)))},c.prototype._decrease=function(M){for(var _,x=this._arr,O=x[M].priority;M!==0&&!(x[_=M>>1].priority<O);)this._swap(M,_),M=_},c.prototype._swap=function(M,_){var x=this._arr,O=this._keyIndices,S=x[M],g=x[_];x[M]=g,x[_]=S,O[g.key]=M,O[S.key]=_}},function(R,b,o){var f=o(42);R.exports=function(c){var M=0,_=[],x={},O=[];return c.nodes().forEach(function(S){f.has(x,S)||function g(h){var y=x[h]={onStack:!0,lowlink:M,index:M++};if(_.push(h),c.successors(h).forEach(function(p){f.has(x,p)?x[p].onStack&&(y.lowlink=Math.min(y.lowlink,x[p].index)):(g(p),y.lowlink=Math.min(y.lowlink,x[p].lowlink))}),y.lowlink===y.index){var E,m=[];do E=_.pop(),x[E].onStack=!1,m.push(E);while(h!==E);O.push(m)}}(S)}),O}},function(R,b,o){var f=o(42);function c(_){var x={},O={},S=[];if(f.each(_.sinks(),function g(h){if(f.has(O,h))throw new M;f.has(x,h)||(O[h]=!0,x[h]=!0,f.each(_.predecessors(h),g),delete O[h],S.push(h))}),f.size(x)!==_.nodeCount())throw new M;return S}function M(){}R.exports=c,c.CycleException=M,M.prototype=new Error},function(R,b,o){var f=o(42);R.exports=function(c,M,_){f.isArray(M)||(M=[M]);var x=(c.isDirected()?c.successors:c.neighbors).bind(c),O=[],S={};return f.each(M,function(g){if(!c.hasNode(g))throw new Error("Graph does not have node: "+g);(function h(y,E,m,p,A,C){f.has(p,E)||(p[E]=!0,m||C.push(E),f.each(A(E),function(N){h(y,N,m,p,A,C)}),m&&C.push(E))})(c,g,_==="post",S,x,O)}),O}},function(R,b,o){var f=o(425);R.exports=function(c){return c?(c=f(c))===1/0||c===-1/0?17976931348623157e292*(c<0?-1:1):c==c?c:0:c===0?c:0}},function(R,b,o){var f=o(158);R.exports=function(c){return c!=null&&c.length?f(c,1):[]}},function(R,b,o){var f=o(102),c=o(70);R.exports=function(M,_,x){(x!==void 0&&!c(M[_],x)||x===void 0&&!(_ in M))&&f(M,_,x)}},function(R,b){R.exports=function(o,f){if((f!=="constructor"||typeof o[f]!="function")&&f!="__proto__")return o[f]}},function(R,b){R.exports=function(o,f){return o<f}},function(R,b,o){"use strict";var f=o(28),c=o(46).Graph,M=o(113).slack;function _(S,g){return f.forEach(S.nodes(),function h(y){f.forEach(g.nodeEdges(y),function(E){var m=E.v,p=y===m?E.w:m;S.hasNode(p)||M(g,E)||(S.setNode(p,{}),S.setEdge(y,p,{}),h(p))})}),S.nodeCount()}function x(S,g){return f.minBy(g.edges(),function(h){if(S.hasNode(h.v)!==S.hasNode(h.w))return M(g,h)})}function O(S,g,h){f.forEach(S.nodes(),function(y){g.node(y).rank+=h})}R.exports=function(S){var g,h,y=new c({directed:!1}),E=S.nodes()[0],m=S.nodeCount();for(y.setNode(E,{});_(y,S)<m;)g=x(y,S),h=y.hasNode(g.v)?M(S,g):-M(S,g),O(y,S,h);return y}},function(R,b,o){(function(f,c){function M(x){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}var _;(function(x){(function(O){var S=(c===void 0?"undefined":M(c))==="object"?c:(typeof self=="undefined"?"undefined":M(self))==="object"?self:M(this)==="object"?this:Function("return this;")(),g=h(x);function h(y,E){return function(m,p){typeof y[m]!="function"&&Object.defineProperty(y,m,{configurable:!0,writable:!0,value:p}),E&&E(m,p)}}S.Reflect===void 0?S.Reflect=x:g=h(S.Reflect,g),function(y){var E=Object.prototype.hasOwnProperty,m=typeof Symbol=="function",p=m&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",A=m&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",C=typeof Object.create=="function",N={__proto__:[]}instanceof Array,P=!C&&!N,L={create:C?function(){return ne(Object.create(null))}:N?function(){return ne({__proto__:null})}:function(){return ne({})},has:P?function(ie,Z){return E.call(ie,Z)}:function(ie,Z){return Z in ie},get:P?function(ie,Z){return E.call(ie,Z)?ie[Z]:void 0}:function(ie,Z){return ie[Z]}},z=Object.getPrototypeOf(Function),H=(f===void 0?"undefined":M(f))==="object"&&f.env&&f.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",re=H||typeof Map!="function"||typeof Map.prototype.entries!="function"?function(){var ie={},Z=[],fe=function(){function Ae(Le,Se,Re){this._index=0,this._keys=Le,this._values=Se,this._selector=Re}return Ae.prototype["@@iterator"]=function(){return this},Ae.prototype[A]=function(){return this},Ae.prototype.next=function(){var Le=this._index;if(Le>=0&&Le<this._keys.length){var Se=this._selector(this._keys[Le],this._values[Le]);return Le+1>=this._keys.length?(this._index=-1,this._keys=Z,this._values=Z):this._index++,{value:Se,done:!1}}return{value:void 0,done:!0}},Ae.prototype.throw=function(Le){throw this._index>=0&&(this._index=-1,this._keys=Z,this._values=Z),Le},Ae.prototype.return=function(Le){return this._index>=0&&(this._index=-1,this._keys=Z,this._values=Z),{value:Le,done:!0}},Ae}();return function(){function Ae(){this._keys=[],this._values=[],this._cacheKey=ie,this._cacheIndex=-2}return Object.defineProperty(Ae.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ae.prototype.has=function(Le){return this._find(Le,!1)>=0},Ae.prototype.get=function(Le){var Se=this._find(Le,!1);return Se>=0?this._values[Se]:void 0},Ae.prototype.set=function(Le,Se){var Re=this._find(Le,!0);return this._values[Re]=Se,this},Ae.prototype.delete=function(Le){var Se=this._find(Le,!1);if(Se>=0){for(var Re=this._keys.length,Ke=Se+1;Ke<Re;Ke++)this._keys[Ke-1]=this._keys[Ke],this._values[Ke-1]=this._values[Ke];return this._keys.length--,this._values.length--,Le===this._cacheKey&&(this._cacheKey=ie,this._cacheIndex=-2),!0}return!1},Ae.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ie,this._cacheIndex=-2},Ae.prototype.keys=function(){return new fe(this._keys,this._values,_e)},Ae.prototype.values=function(){return new fe(this._keys,this._values,je)},Ae.prototype.entries=function(){return new fe(this._keys,this._values,Me)},Ae.prototype["@@iterator"]=function(){return this.entries()},Ae.prototype[A]=function(){return this.entries()},Ae.prototype._find=function(Le,Se){return this._cacheKey!==Le&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Le)),this._cacheIndex<0&&Se&&(this._cacheIndex=this._keys.length,this._keys.push(Le),this._values.push(void 0)),this._cacheIndex},Ae}();function _e(Ae,Le){return Ae}function je(Ae,Le){return Le}function Me(Ae,Le){return[Ae,Le]}}():Map,ae=H||typeof Set!="function"||typeof Set.prototype.entries!="function"?function(){function ie(){this._map=new re}return Object.defineProperty(ie.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ie.prototype.has=function(Z){return this._map.has(Z)},ie.prototype.add=function(Z){return this._map.set(Z,Z),this},ie.prototype.delete=function(Z){return this._map.delete(Z)},ie.prototype.clear=function(){this._map.clear()},ie.prototype.keys=function(){return this._map.keys()},ie.prototype.values=function(){return this._map.values()},ie.prototype.entries=function(){return this._map.entries()},ie.prototype["@@iterator"]=function(){return this.keys()},ie.prototype[A]=function(){return this.keys()},ie}():Set,ue=new(H||typeof WeakMap!="function"?function(){var ie=L.create(),Z=fe();return function(){function Ae(){this._key=fe()}return Ae.prototype.has=function(Le){var Se=_e(Le,!1);return Se!==void 0&&L.has(Se,this._key)},Ae.prototype.get=function(Le){var Se=_e(Le,!1);return Se!==void 0?L.get(Se,this._key):void 0},Ae.prototype.set=function(Le,Se){return _e(Le,!0)[this._key]=Se,this},Ae.prototype.delete=function(Le){var Se=_e(Le,!1);return Se!==void 0&&delete Se[this._key]},Ae.prototype.clear=function(){this._key=fe()},Ae}();function fe(){var Ae;do Ae="@@WeakMap@@"+Me();while(L.has(ie,Ae));return ie[Ae]=!0,Ae}function _e(Ae,Le){if(!E.call(Ae,Z)){if(!Le)return;Object.defineProperty(Ae,Z,{value:L.create()})}return Ae[Z]}function je(Ae,Le){for(var Se=0;Se<Le;++Se)Ae[Se]=255*Math.random()|0;return Ae}function Me(){var Ae,Le=(Ae=16,typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Ae)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Ae)):je(new Uint8Array(Ae),Ae):je(new Array(Ae),Ae));Le[6]=79&Le[6]|64,Le[8]=191&Le[8]|128;for(var Se="",Re=0;Re<16;++Re){var Ke=Le[Re];Re!==4&&Re!==6&&Re!==8||(Se+="-"),Ke<16&&(Se+="0"),Se+=Ke.toString(16).toLowerCase()}return Se}}():WeakMap);function xe(ie,Z,fe){var _e=ue.get(ie);if(Q(_e)){if(!fe)return;_e=new re,ue.set(ie,_e)}var je=_e.get(Z);if(Q(je)){if(!fe)return;je=new re,_e.set(Z,je)}return je}function ye(ie,Z,fe){var _e=xe(Z,fe,!1);return!Q(_e)&&!!_e.has(ie)}function Y(ie,Z,fe){var _e=xe(Z,fe,!1);if(!Q(_e))return _e.get(ie)}function Ce(ie,Z,fe,_e){xe(fe,_e,!0).set(ie,Z)}function ge(ie,Z){var fe=[],_e=xe(ie,Z,!1);if(Q(_e))return fe;for(var je=function(Se){var Re=U(Se,A);if(!ee(Re))throw new TypeError;var Ke=Re.call(Se);if(!le(Ke))throw new TypeError;return Ke}(_e.keys()),Me=0;;){var Ae=X(je);if(!Ae)return fe.length=Me,fe;var Le=Ae.value;try{fe[Me]=Le}catch(Se){try{B(je)}finally{throw Se}}Me++}}function he(ie){if(ie===null)return 1;switch(M(ie)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ie===null?1:6;default:return 6}}function Q(ie){return ie===void 0}function W(ie){return ie===null}function le(ie){return M(ie)==="object"?ie!==null:typeof ie=="function"}function Oe(ie,Z){switch(he(ie)){case 0:case 1:case 2:case 3:case 4:case 5:return ie}var fe=Z===3?"string":Z===5?"number":"default",_e=U(ie,p);if(_e!==void 0){var je=_e.call(ie,fe);if(le(je))throw new TypeError;return je}return function(Me,Ae){if(Ae==="string"){var Le=Me.toString;if(ee(Le)&&!le(Re=Le.call(Me))||ee(Se=Me.valueOf)&&!le(Re=Se.call(Me)))return Re}else{var Se;if(ee(Se=Me.valueOf)&&!le(Re=Se.call(Me)))return Re;var Re,Ke=Me.toString;if(ee(Ke)&&!le(Re=Ke.call(Me)))return Re}throw new TypeError}(ie,fe==="default"?"number":fe)}function Te(ie){var Z=Oe(ie,3);return M(Z)==="symbol"?Z:function(fe){return""+fe}(Z)}function se(ie){return Array.isArray?Array.isArray(ie):ie instanceof Object?ie instanceof Array:Object.prototype.toString.call(ie)==="[object Array]"}function ee(ie){return typeof ie=="function"}function te(ie){return typeof ie=="function"}function U(ie,Z){var fe=ie[Z];if(fe!=null){if(!ee(fe))throw new TypeError;return fe}}function X(ie){var Z=ie.next();return!Z.done&&Z}function B(ie){var Z=ie.return;Z&&Z.call(ie)}function J(ie){var Z=Object.getPrototypeOf(ie);if(typeof ie!="function"||ie===z||Z!==z)return Z;var fe=ie.prototype,_e=fe&&Object.getPrototypeOf(fe);if(_e==null||_e===Object.prototype)return Z;var je=_e.constructor;return typeof je!="function"||je===ie?Z:je}function ne(ie){return ie.__=void 0,delete ie.__,ie}y("decorate",function(ie,Z,fe,_e){if(Q(fe)){if(!se(ie))throw new TypeError;if(!te(Z))throw new TypeError;return function(je,Me){for(var Ae=je.length-1;Ae>=0;--Ae){var Le=(0,je[Ae])(Me);if(!Q(Le)&&!W(Le)){if(!te(Le))throw new TypeError;Me=Le}}return Me}(ie,Z)}if(!se(ie))throw new TypeError;if(!le(Z))throw new TypeError;if(!le(_e)&&!Q(_e)&&!W(_e))throw new TypeError;return W(_e)&&(_e=void 0),function(je,Me,Ae,Le){for(var Se=je.length-1;Se>=0;--Se){var Re=(0,je[Se])(Me,Ae,Le);if(!Q(Re)&&!W(Re)){if(!le(Re))throw new TypeError;Le=Re}}return Le}(ie,Z,fe=Te(fe),_e)}),y("metadata",function(ie,Z){return function(fe,_e){if(!le(fe))throw new TypeError;if(!Q(_e)&&!function(je){switch(he(je)){case 3:case 4:return!0;default:return!1}}(_e))throw new TypeError;Ce(ie,Z,fe,_e)}}),y("defineMetadata",function(ie,Z,fe,_e){if(!le(fe))throw new TypeError;return Q(_e)||(_e=Te(_e)),Ce(ie,Z,fe,_e)}),y("hasMetadata",function(ie,Z,fe){if(!le(Z))throw new TypeError;return Q(fe)||(fe=Te(fe)),function _e(je,Me,Ae){if(ye(je,Me,Ae))return!0;var Le=J(Me);return!W(Le)&&_e(je,Le,Ae)}(ie,Z,fe)}),y("hasOwnMetadata",function(ie,Z,fe){if(!le(Z))throw new TypeError;return Q(fe)||(fe=Te(fe)),ye(ie,Z,fe)}),y("getMetadata",function(ie,Z,fe){if(!le(Z))throw new TypeError;return Q(fe)||(fe=Te(fe)),function _e(je,Me,Ae){if(ye(je,Me,Ae))return Y(je,Me,Ae);var Le=J(Me);return W(Le)?void 0:_e(je,Le,Ae)}(ie,Z,fe)}),y("getOwnMetadata",function(ie,Z,fe){if(!le(Z))throw new TypeError;return Q(fe)||(fe=Te(fe)),Y(ie,Z,fe)}),y("getMetadataKeys",function(ie,Z){if(!le(ie))throw new TypeError;return Q(Z)||(Z=Te(Z)),function fe(_e,je){var Me=ge(_e,je),Ae=J(_e);if(Ae===null)return Me;var Le=fe(Ae,je);if(Le.length<=0)return Me;if(Me.length<=0)return Le;for(var Se=new ae,Re=[],Ke=0,Je=Me;Ke<Je.length;Ke++){var nt=Je[Ke];Se.has(nt)||(Se.add(nt),Re.push(nt))}for(var dt=0,kt=Le;dt<kt.length;dt++)nt=kt[dt],Se.has(nt)||(Se.add(nt),Re.push(nt));return Re}(ie,Z)}),y("getOwnMetadataKeys",function(ie,Z){if(!le(ie))throw new TypeError;return Q(Z)||(Z=Te(Z)),ge(ie,Z)}),y("deleteMetadata",function(ie,Z,fe){if(!le(Z))throw new TypeError;Q(fe)||(fe=Te(fe));var _e=xe(Z,fe,!1);if(Q(_e)||!_e.delete(ie))return!1;if(_e.size>0)return!0;var je=ue.get(Z);return je.delete(fe),je.size>0||ue.delete(Z),!0})}(g)})()})(_||(_={}))}).call(this,o(166),o(176))},function(R,b,o){var f=o(230);R.exports=function(c,M){if(c){if(typeof c=="string")return f(c,M);var _=Object.prototype.toString.call(c).slice(8,-1);return _==="Object"&&c.constructor&&(_=c.constructor.name),_==="Map"||_==="Set"?Array.from(c):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?f(c,M):void 0}},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b){R.exports=function(o,f){(f==null||f>o.length)&&(f=o.length);for(var c=0,M=new Array(f);c<f;c++)M[c]=o[c];return M},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MetadataReader=void 0;var f=o(32),c=function(){function M(){}return M.prototype.getConstructorMetadata=function(_){return{compilerGeneratedMetadata:Reflect.getMetadata(f.PARAM_TYPES,_),userGeneratedMetadata:Reflect.getMetadata(f.TAGGED,_)||{}}},M.prototype.getPropertiesMetadata=function(_){return Reflect.getMetadata(f.TAGGED_PROP,_)||[]},M}();b.MetadataReader=c},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isStackOverflowExeption=void 0;var f=o(40);b.isStackOverflowExeption=function(c){return c instanceof RangeError||c.message===f.STACK_OVERFLOW}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.inject=b.LazyServiceIdentifer=void 0;var f=o(40),c=o(32),M=o(48),_=o(58),x=function(){function O(S){this._cb=S}return O.prototype.unwrap=function(){return this._cb()},O}();b.LazyServiceIdentifer=x,b.inject=function(O){return function(S,g,h){if(O===void 0)throw new Error(f.UNDEFINED_INJECT_ANNOTATION(S.name));var y=new M.Metadata(c.INJECT_TAG,O);typeof h=="number"?_.tagParameter(S,g,h,y):_.tagProperty(S,g,y)}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Target=void 0;var f=o(32),c=o(66),M=o(48),_=o(492),x=function(){function O(S,g,h,y){this.id=c.id(),this.type=S,this.serviceIdentifier=h,this.name=new _.QueryableString(g||""),this.metadata=new Array;var E=null;typeof y=="string"?E=new M.Metadata(f.NAMED_TAG,y):y instanceof M.Metadata&&(E=y),E!==null&&this.metadata.push(E)}return O.prototype.hasTag=function(S){for(var g=0,h=this.metadata;g<h.length;g++)if(h[g].key===S)return!0;return!1},O.prototype.isArray=function(){return this.hasTag(f.MULTI_INJECT_TAG)},O.prototype.matchesArray=function(S){return this.matchesTag(f.MULTI_INJECT_TAG)(S)},O.prototype.isNamed=function(){return this.hasTag(f.NAMED_TAG)},O.prototype.isTagged=function(){return this.metadata.some(function(S){return f.NON_CUSTOM_TAG_KEYS.every(function(g){return S.key!==g})})},O.prototype.isOptional=function(){return this.matchesTag(f.OPTIONAL_TAG)(!0)},O.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(S){return S.key===f.NAMED_TAG})[0]:null},O.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(S){return f.NON_CUSTOM_TAG_KEYS.every(function(g){return S.key!==g})}):null},O.prototype.matchesNamedTag=function(S){return this.matchesTag(f.NAMED_TAG)(S)},O.prototype.matchesTag=function(S){var g=this;return function(h){for(var y=0,E=g.metadata;y<E.length;y++){var m=E[y];if(m.key===S&&m.value===h)return!0}return!1}},O}();b.Target=x},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BindingWhenOnSyntax=void 0;var f=o(160),c=o(161),M=function(){function _(x){this._binding=x,this._bindingWhenSyntax=new c.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new f.BindingOnSyntax(this._binding)}return _.prototype.when=function(x){return this._bindingWhenSyntax.when(x)},_.prototype.whenTargetNamed=function(x){return this._bindingWhenSyntax.whenTargetNamed(x)},_.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},_.prototype.whenTargetTagged=function(x,O){return this._bindingWhenSyntax.whenTargetTagged(x,O)},_.prototype.whenInjectedInto=function(x){return this._bindingWhenSyntax.whenInjectedInto(x)},_.prototype.whenParentNamed=function(x){return this._bindingWhenSyntax.whenParentNamed(x)},_.prototype.whenParentTagged=function(x,O){return this._bindingWhenSyntax.whenParentTagged(x,O)},_.prototype.whenAnyAncestorIs=function(x){return this._bindingWhenSyntax.whenAnyAncestorIs(x)},_.prototype.whenNoAncestorIs=function(x){return this._bindingWhenSyntax.whenNoAncestorIs(x)},_.prototype.whenAnyAncestorNamed=function(x){return this._bindingWhenSyntax.whenAnyAncestorNamed(x)},_.prototype.whenAnyAncestorTagged=function(x,O){return this._bindingWhenSyntax.whenAnyAncestorTagged(x,O)},_.prototype.whenNoAncestorNamed=function(x){return this._bindingWhenSyntax.whenNoAncestorNamed(x)},_.prototype.whenNoAncestorTagged=function(x,O){return this._bindingWhenSyntax.whenNoAncestorTagged(x,O)},_.prototype.whenAnyAncestorMatches=function(x){return this._bindingWhenSyntax.whenAnyAncestorMatches(x)},_.prototype.whenNoAncestorMatches=function(x){return this._bindingWhenSyntax.whenNoAncestorMatches(x)},_.prototype.onActivation=function(x){return this._bindingOnSyntax.onActivation(x)},_}();b.BindingWhenOnSyntax=M},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.typeConstraint=b.namedConstraint=b.taggedConstraint=b.traverseAncerstors=void 0;var f=o(32),c=o(48);b.traverseAncerstors=function x(O,S){var g=O.parentRequest;return g!==null&&(!!S(g)||x(g,S))};var M=function(x){return function(O){var S=function(g){return g!==null&&g.target!==null&&g.target.matchesTag(x)(O)};return S.metaData=new c.Metadata(x,O),S}};b.taggedConstraint=M;var _=M(f.NAMED_TAG);b.namedConstraint=_,b.typeConstraint=function(x){return function(O){var S=null;if(O!==null){if(S=O.bindings[0],typeof x=="string")return S.serviceIdentifier===x;var g=O.bindings[0].implementationType;return x===g}return!1}}},function(R,b,o){"use strict";o.d(b,"a",function(){return M});var f=o(2),c=o(77);function M(_){for(var x=new c.a,O=f.e.fromValues(_[0],_[1],_[2]),S=f.e.fromValues(_[0],_[1],_[2]),g=3;g<_.length;){var h=_[g++],y=_[g++],E=_[g++];h<O[0]&&(O[0]=h),y<O[1]&&(O[1]=y),E<O[2]&&(O[2]=E),h>S[0]&&(S[0]=h),y>S[1]&&(S[1]=y),E>S[2]&&(S[2]=E)}return x.setMinMax(O,S),x}},function(R,b,o){"use strict";o.d(b,"a",function(){return f});var f=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent)},function(R,b){},function(R,b){},function(R,b){},function(R,b){},function(R,b){},function(R,b){},function(R,b,o){"use strict";var f;(function(c){c.Normal="normal",c.PostProcessing="post-processing"})(f||(f={}))},function(R,b){},function(R,b){},function(R,b){},function(R,b){},function(R,b){},function(R,b){},function(R,b){R.exports=1e-6},function(R,b){R.exports=function(){var o=new Float32Array(2);return o[0]=0,o[1]=0,o}},function(R,b){R.exports=function(o,f,c){return o[0]=f,o[1]=c,o}},function(R,b){R.exports=function(o,f,c){return o[0]=f[0]+c[0],o[1]=f[1]+c[1],o}},function(R,b){R.exports=function(o,f,c){return o[0]=f[0]*c[0],o[1]=f[1]*c[1],o}},function(R,b){R.exports=function(o,f,c){return o[0]=f[0]/c[0],o[1]=f[1]/c[1],o}},function(R,b){R.exports=function(o,f){var c=f[0]-o[0],M=f[1]-o[1];return Math.sqrt(c*c+M*M)}},function(R,b){R.exports=function(o,f){var c=f[0]-o[0],M=f[1]-o[1];return c*c+M*M}},function(R,b){R.exports=function(o){var f=o[0],c=o[1];return Math.sqrt(f*f+c*c)}},function(R,b){R.exports=function(o){var f=o[0],c=o[1];return f*f+c*c}},function(R,b){R.exports=function(o,f){var c=f[0],M=f[1],_=c*c+M*M;return _>0&&(_=1/Math.sqrt(_),o[0]=f[0]*_,o[1]=f[1]*_),o}},function(R,b){R.exports=function(o,f){return o[0]*f[0]+o[1]*f[1]}},function(R,b,o){"use strict";var f={};o.r(f),o.d(f,"easeLinear",function(){return ye}),o.d(f,"easeQuad",function(){return ge}),o.d(f,"easeQuadIn",function(){return Y}),o.d(f,"easeQuadOut",function(){return Ce}),o.d(f,"easeQuadInOut",function(){return ge}),o.d(f,"easeCubic",function(){return W}),o.d(f,"easeCubicIn",function(){return he}),o.d(f,"easeCubicOut",function(){return Q}),o.d(f,"easeCubicInOut",function(){return W}),o.d(f,"easePoly",function(){return Te}),o.d(f,"easePolyIn",function(){return le}),o.d(f,"easePolyOut",function(){return Oe}),o.d(f,"easePolyInOut",function(){return Te}),o.d(f,"easeSin",function(){return X}),o.d(f,"easeSinIn",function(){return te}),o.d(f,"easeSinOut",function(){return U}),o.d(f,"easeSinInOut",function(){return X}),o.d(f,"easeExp",function(){return ie}),o.d(f,"easeExpIn",function(){return J}),o.d(f,"easeExpOut",function(){return ne}),o.d(f,"easeExpInOut",function(){return ie}),o.d(f,"easeCircle",function(){return _e}),o.d(f,"easeCircleIn",function(){return Z}),o.d(f,"easeCircleOut",function(){return fe}),o.d(f,"easeCircleInOut",function(){return _e}),o.d(f,"easeBounce",function(){return Ae}),o.d(f,"easeBounceIn",function(){return Me}),o.d(f,"easeBounceOut",function(){return Ae}),o.d(f,"easeBounceInOut",function(){return Le}),o.d(f,"easeBack",function(){return Ke}),o.d(f,"easeBackIn",function(){return Se}),o.d(f,"easeBackOut",function(){return Re}),o.d(f,"easeBackInOut",function(){return Ke}),o.d(f,"easeElastic",function(){return dt}),o.d(f,"easeElasticIn",function(){return nt}),o.d(f,"easeElasticOut",function(){return dt}),o.d(f,"easeElasticInOut",function(){return kt});var c=o(1),M=o(138),_=o(136),x=o(19),O=o(0);function S(We){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne})(We)}var g,h,y=0,E=0,m=0,p=0,A=0,C=0,N=(typeof performance=="undefined"?"undefined":S(performance))==="object"&&performance.now?performance:Date,P=(typeof window=="undefined"?"undefined":S(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(We){setTimeout(We,17)};function L(){return A||(P(z),A=N.now()+C)}function z(){A=0}function H(){this._call=this._time=this._next=null}function re(We,Ne,He){var ft=new H;return ft.restart(We,Ne,He),ft}function ae(){A=(p=N.now())+C,y=E=0;try{(function(){L(),++y;for(var We,Ne=g;Ne;)(We=A-Ne._time)>=0&&Ne._call.call(null,We),Ne=Ne._next;--y})()}finally{y=0,function(){for(var We,Ne,He=g,ft=1/0;He;)He._call?(ft>He._time&&(ft=He._time),We=He,He=He._next):(Ne=He._next,He._next=null,He=We?We._next=Ne:g=Ne);h=We,xe(ft)}(),A=0}}function ue(){var We=N.now(),Ne=We-p;Ne>1e3&&(C-=Ne,p=We)}function xe(We){y||(E&&(E=clearTimeout(E)),We-A>24?(We<1/0&&(E=setTimeout(ae,We-N.now()-C)),m&&(m=clearInterval(m))):(m||(p=N.now(),m=setInterval(ue,1e3)),y=1,P(ae)))}function ye(We){return+We}function Y(We){return We*We}function Ce(We){return We*(2-We)}function ge(We){return((We*=2)<=1?We*We:--We*(2-We)+1)/2}function he(We){return We*We*We}function Q(We){return--We*We*We+1}function W(We){return((We*=2)<=1?We*We*We:(We-=2)*We*We+2)/2}H.prototype=re.prototype={constructor:H,restart:function(We,Ne,He){if(typeof We!="function")throw new TypeError("callback is not a function");He=(He==null?L():+He)+(Ne==null?0:+Ne),this._next||h===this||(h?h._next=this:g=this,h=this),this._call=We,this._time=He,xe()},stop:function(){this._call&&(this._call=null,this._time=1/0,xe())}};var le=function We(Ne){function He(ft){return Math.pow(ft,Ne)}return Ne=+Ne,He.exponent=We,He}(3),Oe=function We(Ne){function He(ft){return 1-Math.pow(1-ft,Ne)}return Ne=+Ne,He.exponent=We,He}(3),Te=function We(Ne){function He(ft){return((ft*=2)<=1?Math.pow(ft,Ne):2-Math.pow(2-ft,Ne))/2}return Ne=+Ne,He.exponent=We,He}(3),se=Math.PI,ee=se/2;function te(We){return+We==1?1:1-Math.cos(We*ee)}function U(We){return Math.sin(We*ee)}function X(We){return(1-Math.cos(se*We))/2}function B(We){return 1.0009775171065494*(Math.pow(2,-10*We)-.0009765625)}function J(We){return B(1-+We)}function ne(We){return 1-B(We)}function ie(We){return((We*=2)<=1?B(1-We):2-B(We-1))/2}function Z(We){return 1-Math.sqrt(1-We*We)}function fe(We){return Math.sqrt(1- --We*We)}function _e(We){return((We*=2)<=1?1-Math.sqrt(1-We*We):Math.sqrt(1-(We-=2)*We)+1)/2}var je=7.5625;function Me(We){return 1-Ae(1-We)}function Ae(We){return(We=+We)<4/11?je*We*We:We<8/11?je*(We-=6/11)*We+3/4:We<10/11?je*(We-=9/11)*We+15/16:je*(We-=21/22)*We+63/64}function Le(We){return((We*=2)<=1?1-Ae(1-We):Ae(We-1)+1)/2}var Se=function We(Ne){function He(ft){return(ft=+ft)*ft*(Ne*(ft-1)+ft)}return Ne=+Ne,He.overshoot=We,He}(1.70158),Re=function We(Ne){function He(ft){return--ft*ft*((ft+1)*Ne+ft)+1}return Ne=+Ne,He.overshoot=We,He}(1.70158),Ke=function We(Ne){function He(ft){return((ft*=2)<1?ft*ft*((Ne+1)*ft-Ne):(ft-=2)*ft*((Ne+1)*ft+Ne)+2)/2}return Ne=+Ne,He.overshoot=We,He}(1.70158),Je=2*Math.PI,nt=function We(Ne,He){var ft=Math.asin(1/(Ne=Math.max(1,Ne)))*(He/=Je);function Tt(Ht){return Ne*B(- --Ht)*Math.sin((ft-Ht)/He)}return Tt.amplitude=function(Ht){return We(Ht,He*Je)},Tt.period=function(Ht){return We(Ne,Ht)},Tt}(1,.3),dt=function We(Ne,He){var ft=Math.asin(1/(Ne=Math.max(1,Ne)))*(He/=Je);function Tt(Ht){return 1-Ne*B(Ht=+Ht)*Math.sin((Ht+ft)/He)}return Tt.amplitude=function(Ht){return We(Ht,He*Je)},Tt.period=function(Ht){return We(Ne,Ht)},Tt}(1,.3),kt=function We(Ne,He){var ft=Math.asin(1/(Ne=Math.max(1,Ne)))*(He/=Je);function Tt(Ht){return((Ht=2*Ht-1)<0?Ne*B(-Ht)*Math.sin((ft-Ht)/He):2-Ne*B(Ht)*Math.sin((ft+Ht)/He))/2}return Tt.amplitude=function(Ht){return We(Ht,He*Je)},Tt.period=function(Ht){return We(Ne,Ht)},Tt}(1,.3),At=function(We,Ne,He){We.prototype=Ne.prototype=He,He.constructor=We};function It(We,Ne){var He=Object.create(We.prototype);for(var ft in Ne)He[ft]=Ne[ft];return He}function Kt(){}var Qt="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mr=/^#([0-9a-f]{3,8})$/,ar=new RegExp("^rgb\\("+[Qt,Qt,Qt]+"\\)$"),yr=new RegExp("^rgb\\("+[nr,nr,nr]+"\\)$"),mr=new RegExp("^rgba\\("+[Qt,Qt,Qt,tr]+"\\)$"),Rr=new RegExp("^rgba\\("+[nr,nr,nr,tr]+"\\)$"),pr=new RegExp("^hsl\\("+[tr,nr,nr]+"\\)$"),xr=new RegExp("^hsla\\("+[tr,nr,nr,tr]+"\\)$"),dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gr(){return this.rgb().formatHex()}function Lr(){return this.rgb().formatRgb()}function pn(We){var Ne,He;return We=(We+"").trim().toLowerCase(),(Ne=Mr.exec(We))?(He=Ne[1].length,Ne=parseInt(Ne[1],16),He===6?Ur(Ne):He===3?new Ir(Ne>>8&15|Ne>>4&240,Ne>>4&15|240&Ne,(15&Ne)<<4|15&Ne,1):He===8?Nr(Ne>>24&255,Ne>>16&255,Ne>>8&255,(255&Ne)/255):He===4?Nr(Ne>>12&15|Ne>>8&240,Ne>>8&15|Ne>>4&240,Ne>>4&15|240&Ne,((15&Ne)<<4|15&Ne)/255):null):(Ne=ar.exec(We))?new Ir(Ne[1],Ne[2],Ne[3],1):(Ne=yr.exec(We))?new Ir(255*Ne[1]/100,255*Ne[2]/100,255*Ne[3]/100,1):(Ne=mr.exec(We))?Nr(Ne[1],Ne[2],Ne[3],Ne[4]):(Ne=Rr.exec(We))?Nr(255*Ne[1]/100,255*Ne[2]/100,255*Ne[3]/100,Ne[4]):(Ne=pr.exec(We))?Rn(Ne[1],Ne[2]/100,Ne[3]/100,1):(Ne=xr.exec(We))?Rn(Ne[1],Ne[2]/100,Ne[3]/100,Ne[4]):dr.hasOwnProperty(We)?Ur(dr[We]):We==="transparent"?new Ir(NaN,NaN,NaN,0):null}function Ur(We){return new Ir(We>>16&255,We>>8&255,255&We,1)}function Nr(We,Ne,He,ft){return ft<=0&&(We=Ne=He=NaN),new Ir(We,Ne,He,ft)}function Dr(We){return We instanceof Kt||(We=pn(We)),We?new Ir((We=We.rgb()).r,We.g,We.b,We.opacity):new Ir}function rn(We,Ne,He,ft){return arguments.length===1?Dr(We):new Ir(We,Ne,He,ft==null?1:ft)}function Ir(We,Ne,He,ft){this.r=+We,this.g=+Ne,this.b=+He,this.opacity=+ft}function On(){return"#"+Dn(this.r)+Dn(this.g)+Dn(this.b)}function In(){var We=this.opacity;return((We=isNaN(We)?1:Math.max(0,Math.min(1,We)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(We===1?")":", "+We+")")}function Dn(We){return((We=Math.max(0,Math.min(255,Math.round(We)||0)))<16?"0":"")+We.toString(16)}function Rn(We,Ne,He,ft){return ft<=0?We=Ne=He=NaN:He<=0||He>=1?We=Ne=NaN:Ne<=0&&(We=NaN),new Er(We,Ne,He,ft)}function gn(We){if(We instanceof Er)return new Er(We.h,We.s,We.l,We.opacity);if(We instanceof Kt||(We=pn(We)),!We)return new Er;if(We instanceof Er)return We;var Ne=(We=We.rgb()).r/255,He=We.g/255,ft=We.b/255,Tt=Math.min(Ne,He,ft),Ht=Math.max(Ne,He,ft),vr=NaN,Be=Ht-Tt,ut=(Ht+Tt)/2;return Be?(vr=Ne===Ht?(He-ft)/Be+6*(He<ft):He===Ht?(ft-Ne)/Be+2:(Ne-He)/Be+4,Be/=ut<.5?Ht+Tt:2-Ht-Tt,vr*=60):Be=ut>0&&ut<1?0:vr,new Er(vr,Be,ut,We.opacity)}function Er(We,Ne,He,ft){this.h=+We,this.s=+Ne,this.l=+He,this.opacity=+ft}function ln(We,Ne,He){return 255*(We<60?Ne+(He-Ne)*We/60:We<180?He:We<240?Ne+(He-Ne)*(240-We)/60:Ne)}function yn(We,Ne,He,ft,Tt){var Ht=We*We,vr=Ht*We;return((1-3*We+3*Ht-vr)*Ne+(4-6*Ht+3*vr)*He+(1+3*We+3*Ht-3*vr)*ft+vr*Tt)/6}At(Kt,pn,{copy:function(We){return Object.assign(new this.constructor,this,We)},displayable:function(){return this.rgb().displayable()},hex:Gr,formatHex:Gr,formatHsl:function(){return gn(this).formatHsl()},formatRgb:Lr,toString:Lr}),At(Ir,rn,It(Kt,{brighter:function(We){return We=We==null?1/.7:Math.pow(1/.7,We),new Ir(this.r*We,this.g*We,this.b*We,this.opacity)},darker:function(We){return We=We==null?.7:Math.pow(.7,We),new Ir(this.r*We,this.g*We,this.b*We,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:On,formatHex:On,formatRgb:In,toString:In})),At(Er,function(We,Ne,He,ft){return arguments.length===1?gn(We):new Er(We,Ne,He,ft==null?1:ft)},It(Kt,{brighter:function(We){return We=We==null?1/.7:Math.pow(1/.7,We),new Er(this.h,this.s,this.l*We,this.opacity)},darker:function(We){return We=We==null?.7:Math.pow(.7,We),new Er(this.h,this.s,this.l*We,this.opacity)},rgb:function(){var We=this.h%360+360*(this.h<0),Ne=isNaN(We)||isNaN(this.s)?0:this.s,He=this.l,ft=He+(He<.5?He:1-He)*Ne,Tt=2*He-ft;return new Ir(ln(We>=240?We-240:We+120,Tt,ft),ln(We,Tt,ft),ln(We<120?We+240:We-120,Tt,ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var We=this.opacity;return((We=isNaN(We)?1:Math.max(0,Math.min(1,We)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(We===1?")":", "+We+")")}}));var mn=function(We){return function(){return We}};function Qn(We,Ne){return function(He){return We+He*Ne}}function Un(We){return(We=+We)==1?ri:function(Ne,He){return He-Ne?function(ft,Tt,Ht){return ft=Math.pow(ft,Ht),Tt=Math.pow(Tt,Ht)-ft,Ht=1/Ht,function(vr){return Math.pow(ft+vr*Tt,Ht)}}(Ne,He,We):mn(isNaN(Ne)?He:Ne)}}function ri(We,Ne){var He=Ne-We;return He?Qn(We,He):mn(isNaN(We)?Ne:We)}var Oi=function We(Ne){var He=Un(Ne);function ft(Tt,Ht){var vr=He((Tt=rn(Tt)).r,(Ht=rn(Ht)).r),Be=He(Tt.g,Ht.g),ut=He(Tt.b,Ht.b),bt=ri(Tt.opacity,Ht.opacity);return function(Ft){return Tt.r=vr(Ft),Tt.g=Be(Ft),Tt.b=ut(Ft),Tt.opacity=bt(Ft),Tt+""}}return ft.gamma=We,ft}(1);function ni(We){return function(Ne){var He,ft,Tt=Ne.length,Ht=new Array(Tt),vr=new Array(Tt),Be=new Array(Tt);for(He=0;He<Tt;++He)ft=rn(Ne[He]),Ht[He]=ft.r||0,vr[He]=ft.g||0,Be[He]=ft.b||0;return Ht=We(Ht),vr=We(vr),Be=We(Be),ft.opacity=1,function(ut){return ft.r=Ht(ut),ft.g=vr(ut),ft.b=Be(ut),ft+""}}}ni(function(We){var Ne=We.length-1;return function(He){var ft=He<=0?He=0:He>=1?(He=1,Ne-1):Math.floor(He*Ne),Tt=We[ft],Ht=We[ft+1],vr=ft>0?We[ft-1]:2*Tt-Ht,Be=ft<Ne-1?We[ft+2]:2*Ht-Tt;return yn((He-ft/Ne)*Ne,vr,Tt,Ht,Be)}}),ni(function(We){var Ne=We.length;return function(He){var ft=Math.floor(((He%=1)<0?++He:He)*Ne),Tt=We[(ft+Ne-1)%Ne],Ht=We[ft%Ne],vr=We[(ft+1)%Ne],Be=We[(ft+2)%Ne];return yn((He-ft/Ne)*Ne,Tt,Ht,vr,Be)}});var Bn=function(We,Ne){Ne||(Ne=[]);var He,ft=We?Math.min(Ne.length,We.length):0,Tt=Ne.slice();return function(Ht){for(He=0;He<ft;++He)Tt[He]=We[He]*(1-Ht)+Ne[He]*Ht;return Tt}};function wi(We){return ArrayBuffer.isView(We)&&!(We instanceof DataView)}function Mi(We,Ne){var He,ft=Ne?Ne.length:0,Tt=We?Math.min(ft,We.length):0,Ht=new Array(Tt),vr=new Array(ft);for(He=0;He<Tt;++He)Ht[He]=Xn(We[He],Ne[He]);for(;He<ft;++He)vr[He]=Ne[He];return function(Be){for(He=0;He<Tt;++He)vr[He]=Ht[He](Be);return vr}}var Wn=function(We,Ne){var He=new Date;return We=+We,Ne=+Ne,function(ft){return He.setTime(We*(1-ft)+Ne*ft),He}},ii=function(We,Ne){return We=+We,Ne=+Ne,function(He){return We*(1-He)+Ne*He}};function Jn(We){return(Jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne})(We)}var hi=function(We,Ne){var He,ft={},Tt={};for(He in We!==null&&Jn(We)==="object"||(We={}),Ne!==null&&Jn(Ne)==="object"||(Ne={}),Ne)He in We?ft[He]=Xn(We[He],Ne[He]):Tt[He]=Ne[He];return function(Ht){for(He in ft)Tt[He]=ft[He](Ht);return Tt}},Vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oi=new RegExp(Vn.source,"g"),di=function(We,Ne){var He,ft,Tt,Ht=Vn.lastIndex=oi.lastIndex=0,vr=-1,Be=[],ut=[];for(We+="",Ne+="";(He=Vn.exec(We))&&(ft=oi.exec(Ne));)(Tt=ft.index)>Ht&&(Tt=Ne.slice(Ht,Tt),Be[vr]?Be[vr]+=Tt:Be[++vr]=Tt),(He=He[0])===(ft=ft[0])?Be[vr]?Be[vr]+=ft:Be[++vr]=ft:(Be[++vr]=null,ut.push({i:vr,x:ii(He,ft)})),Ht=oi.lastIndex;return Ht<Ne.length&&(Tt=Ne.slice(Ht),Be[vr]?Be[vr]+=Tt:Be[++vr]=Tt),Be.length<2?ut[0]?function(bt){return function(Ft){return bt(Ft)+""}}(ut[0].x):function(bt){return function(){return bt}}(Ne):(Ne=ut.length,function(bt){for(var Ft,we=0;we<Ne;++we)Be[(Ft=ut[we]).i]=Ft.x(bt);return Be.join("")})};function _i(We){return(_i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne})(We)}var Xn=function(We,Ne){var He,ft=_i(Ne);return Ne==null||ft==="boolean"?mn(Ne):(ft==="number"?ii:ft==="string"?(He=pn(Ne))?(Ne=He,Oi):di:Ne instanceof pn?Oi:Ne instanceof Date?Wn:wi(Ne)?Bn:Array.isArray(Ne)?Mi:typeof Ne.valueOf!="function"&&typeof Ne.toString!="function"||isNaN(Ne)?hi:ii)(We,Ne)},Yn=o(51),ki=[1,0,0,0,1,0,0,0,1];function Gi(We,Ne,He){var ft,Tt=Ne.startTime;if(He<Tt+Ne.delay||Ne._paused)return!1;var Ht=Ne.duration,vr=Ne.easing;if(He=He-Tt-Ne.delay,Ne.repeat)ft=He%Ht/Ht,ft=f[vr](ft);else{if(!((ft=He/Ht)<1))return Ne.onFrame?We.attr(Ne.onFrame(1)):We.attr(Ne.toAttrs),!0;ft=f[vr](ft)}if(Ne.onFrame){var Be=Ne.onFrame(ft);We.attr(Be)}else(function(ut,bt,Ft){var we={},ze=bt.fromAttrs,Qe=bt.toAttrs;if(!ut.destroyed){var lt,vt,wt,Lt;for(var Wt in Qe)if(!Object(O.isEqual)(ze[Wt],Qe[Wt]))if(Wt==="path"){var er=Qe[Wt],rr=ze[Wt];er.length>rr.length?(er=Yn.parsePathString(Qe[Wt]),rr=Yn.parsePathString(ze[Wt]),rr=Yn.fillPathByDiff(rr,er),rr=Yn.formatPath(rr,er),bt.fromAttrs.path=rr,bt.toAttrs.path=er):bt.pathFormatted||(er=Yn.parsePathString(Qe[Wt]),rr=Yn.parsePathString(ze[Wt]),rr=Yn.formatPath(rr,er),bt.fromAttrs.path=rr,bt.toAttrs.path=er,bt.pathFormatted=!0),we[Wt]=[];for(var sr=0;sr<er.length;sr++){for(var gr=er[sr],Vr=rr[sr],Fr=[],$r=0;$r<gr.length;$r++)Object(O.isNumber)(gr[$r])&&Vr&&Object(O.isNumber)(Vr[$r])?(lt=Xn(Vr[$r],gr[$r]),Fr.push(lt(Ft))):Fr.push(gr[$r]);we[Wt].push(Fr)}}else if(Wt==="matrix"){var Kr=(wt=ze[Wt]||ki,(wi(Lt=Qe[Wt]||ki)?Bn:Mi)(wt,Lt))(Ft);we[Wt]=Kr}else["fill","stroke","fillStyle","strokeStyle"].includes(Wt)&&(vt=Qe[Wt],/^[r,R,L,l]{1}[\s]*\(/.test(vt))?we[Wt]=Qe[Wt]:Object(O.isFunction)(Qe[Wt])||(lt=Xn(ze[Wt],Qe[Wt]),we[Wt]=lt(Ft));ut.attr(we)}})(We,Ne,ft);return!1}var Hn=function(){function We(Ne){this.animators=[],this.current=0,this.timer=null,this.canvas=Ne}return We.prototype.initTimer=function(){var Ne,He,ft,Tt=this;this.timer=re(function(Ht){if(Tt.current=Ht,Tt.animators.length>0){for(var vr=Tt.animators.length-1;vr>=0;vr--)if((Ne=Tt.animators[vr]).destroyed)Tt.removeAnimator(vr);else{if(!Ne.isAnimatePaused())for(var Be=(He=Ne.get("animations")).length-1;Be>=0;Be--)ft=He[Be],Gi(Ne,ft,Ht)&&(He.splice(Be,1),ft.callback&&ft.callback());He.length===0&&Tt.removeAnimator(vr)}Tt.canvas.get("autoDraw")||Tt.canvas.draw()}})},We.prototype.addAnimator=function(Ne){this.animators.push(Ne)},We.prototype.removeAnimator=function(Ne){this.animators.splice(Ne,1)},We.prototype.isAnimating=function(){return!!this.animators.length},We.prototype.stop=function(){this.timer&&this.timer.stop()},We.prototype.stopAllAnimations=function(Ne){Ne===void 0&&(Ne=!0),this.animators.forEach(function(He){He.stopAnimate(Ne)}),this.animators=[],this.canvas.draw()},We.prototype.getTime=function(){return this.current},We}(),oo=o(115),ci=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function li(We,Ne,He){He.name=Ne,He.target=We,He.currentTarget=We,He.delegateTarget=We,We.emit(Ne,He)}function ao(We,Ne,He){if(He.bubbles){var ft=void 0,Tt=!1;if(Ne==="mouseenter"?(ft=He.fromShape,Tt=!0):Ne==="mouseleave"&&(Tt=!0,ft=He.toShape),We.isCanvas()&&Tt)return;if(ft&&Object(x.g)(We,ft))return void(He.bubbles=!1);He.name=Ne,He.currentTarget=We,He.delegateTarget=We,We.emit(Ne,He)}}var Zi=function(){function We(Ne){var He=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(ft){var Tt=ft.type;He._triggerEvent(Tt,ft)},this._onDocumentMove=function(ft){if(He.canvas.get("el")!==ft.target&&(He.dragging||He.currentShape)){var Tt=He._getPointInfo(ft);He.dragging&&He._emitEvent("drag",ft,Tt,He.draggingShape)}},this._onDocumentMouseUp=function(ft){if(He.canvas.get("el")!==ft.target&&He.dragging){var Tt=He._getPointInfo(ft);He.draggingShape&&He._emitEvent("drop",ft,Tt,null),He._emitEvent("dragend",ft,Tt,He.draggingShape),He._afterDrag(He.draggingShape,Tt,ft)}},this.canvas=Ne.canvas}return We.prototype.init=function(){this._bindEvents()},We.prototype._bindEvents=function(){var Ne=this,He=this.canvas.get("el");Object(x.a)(ci,function(ft){He.addEventListener(ft,Ne._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},We.prototype._clearEvents=function(){var Ne=this,He=this.canvas.get("el");Object(x.a)(ci,function(ft){He.removeEventListener(ft,Ne._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},We.prototype._getEventObj=function(Ne,He,ft,Tt,Ht,vr){var Be=new oo.a(Ne,He);return Be.fromShape=Ht,Be.toShape=vr,Be.x=ft.x,Be.y=ft.y,Be.clientX=ft.clientX,Be.clientY=ft.clientY,Be.propagationPath.push(Tt),Be},We.prototype._getShape=function(Ne,He){return this.canvas.getShape(Ne.x,Ne.y,He)},We.prototype._getPointInfo=function(Ne){var He=this.canvas,ft=He.getClientByEvent(Ne),Tt=He.getPointByEvent(Ne);return{x:Tt.x,y:Tt.y,clientX:ft.x,clientY:ft.y}},We.prototype._triggerEvent=function(Ne,He){var ft=this._getPointInfo(He),Tt=this._getShape(ft,He),Ht=this["_on"+Ne],vr=!1;if(Ht)Ht.call(this,ft,Tt,He);else{var Be=this.currentShape;Ne==="mouseenter"||Ne==="dragenter"||Ne==="mouseover"?(this._emitEvent(Ne,He,ft,null,null,Tt),Tt&&this._emitEvent(Ne,He,ft,Tt,null,Tt),Ne==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",He,ft,null)):Ne==="mouseleave"||Ne==="dragleave"||Ne==="mouseout"?(vr=!0,Be&&this._emitEvent(Ne,He,ft,Be,Be,null),this._emitEvent(Ne,He,ft,null,Be,null),Ne==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",He,ft,null)):this._emitEvent(Ne,He,ft,Tt,null,null)}if(vr||(this.currentShape=Tt),Tt&&!Tt.get("destroyed")){var ut=this.canvas;ut.get("el").style.cursor=Tt.attr("cursor")||ut.get("cursor")}},We.prototype._onmousedown=function(Ne,He,ft){ft.button===0&&(this.mousedownShape=He,this.mousedownPoint=Ne,this.mousedownTimeStamp=ft.timeStamp),this._emitEvent("mousedown",ft,Ne,He,null,null)},We.prototype._emitMouseoverEvents=function(Ne,He,ft,Tt){var Ht=this.canvas.get("el");ft!==Tt&&(ft&&(this._emitEvent("mouseout",Ne,He,ft,ft,Tt),this._emitEvent("mouseleave",Ne,He,ft,ft,Tt),Tt&&!Tt.get("destroyed")||(Ht.style.cursor=this.canvas.get("cursor"))),Tt&&(this._emitEvent("mouseover",Ne,He,Tt,ft,Tt),this._emitEvent("mouseenter",Ne,He,Tt,ft,Tt)))},We.prototype._emitDragoverEvents=function(Ne,He,ft,Tt,Ht){Tt?(Tt!==ft&&(ft&&this._emitEvent("dragleave",Ne,He,ft,ft,Tt),this._emitEvent("dragenter",Ne,He,Tt,ft,Tt)),Ht||this._emitEvent("dragover",Ne,He,Tt)):ft&&this._emitEvent("dragleave",Ne,He,ft,ft,Tt),Ht&&this._emitEvent("dragover",Ne,He,Tt)},We.prototype._afterDrag=function(Ne,He,ft){Ne&&(Ne.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Tt=this._getShape(He,ft);Tt!==Ne&&this._emitMouseoverEvents(ft,He,Ne,Tt),this.currentShape=Tt},We.prototype._onmouseup=function(Ne,He,ft){if(ft.button===0){var Tt=this.draggingShape;this.dragging?(Tt&&this._emitEvent("drop",ft,Ne,He),this._emitEvent("dragend",ft,Ne,Tt),this._afterDrag(Tt,Ne,ft)):(this._emitEvent("mouseup",ft,Ne,He),He===this.mousedownShape&&this._emitEvent("click",ft,Ne,He),this.mousedownShape=null,this.mousedownPoint=null)}},We.prototype._ondragover=function(Ne,He,ft){ft.preventDefault();var Tt=this.currentShape;this._emitDragoverEvents(ft,Ne,Tt,He,!0)},We.prototype._onmousemove=function(Ne,He,ft){var Tt=this.canvas,Ht=this.currentShape,vr=this.draggingShape;if(this.dragging)vr&&this._emitDragoverEvents(ft,Ne,Ht,He,!1),this._emitEvent("drag",ft,Ne,vr);else{var Be=this.mousedownPoint;if(Be){var ut=this.mousedownShape,bt=ft.timeStamp-this.mousedownTimeStamp,Ft=Be.clientX-Ne.clientX,we=Be.clientY-Ne.clientY;bt>120||Ft*Ft+we*we>40?ut&&ut.get("draggable")?((vr=this.mousedownShape).set("capture",!1),this.draggingShape=vr,this.dragging=!0,this._emitEvent("dragstart",ft,Ne,vr),this.mousedownShape=null,this.mousedownPoint=null):!ut&&Tt.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",ft,Ne,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(ft,Ne,Ht,He),this._emitEvent("mousemove",ft,Ne,He)):(this._emitMouseoverEvents(ft,Ne,Ht,He),this._emitEvent("mousemove",ft,Ne,He))}else this._emitMouseoverEvents(ft,Ne,Ht,He),this._emitEvent("mousemove",ft,Ne,He)}},We.prototype._emitEvent=function(Ne,He,ft,Tt,Ht,vr){var Be=this._getEventObj(Ne,He,ft,Tt,Ht,vr);if(Tt){Be.shape=Tt,li(Tt,Ne,Be);for(var ut=Tt.getParent();ut;)ut.emitDelegation(Ne,Be),Be.propagationStopped||ao(ut,Ne,Be),Be.propagationPath.push(ut),ut=ut.getParent()}else li(this.canvas,Ne,Be)},We.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},We}(),$i=Object(M.a)(),vo=$i&&$i.name==="firefox",ir=function(We){function Ne(He){var ft=We.call(this,He)||this;return ft.initContainer(),ft.initDom(),ft.initEvents(),ft.initTimeline(),ft}return Object(c.__extends)(Ne,We),Ne.prototype.getDefaultCfg=function(){var He=We.prototype.getDefaultCfg.call(this);return He.cursor="default",He.supportCSSTransform=!1,He},Ne.prototype.initContainer=function(){var He=this.get("container");Object(x.h)(He)&&(He=document.getElementById(He),this.set("container",He))},Ne.prototype.initDom=function(){var He=this.createDom();this.set("el",He),this.get("container").appendChild(He),this.setDOMSize(this.get("width"),this.get("height"))},Ne.prototype.initEvents=function(){var He=new Zi({canvas:this});He.init(),this.set("eventController",He)},Ne.prototype.initTimeline=function(){var He=new Hn(this);this.set("timeline",He)},Ne.prototype.setDOMSize=function(He,ft){var Tt=this.get("el");x.c&&(Tt.style.width=He+"px",Tt.style.height=ft+"px")},Ne.prototype.changeSize=function(He,ft){this.setDOMSize(He,ft),this.set("width",He),this.set("height",ft),this.onCanvasChange("changeSize")},Ne.prototype.getRenderer=function(){return this.get("renderer")},Ne.prototype.getCursor=function(){return this.get("cursor")},Ne.prototype.setCursor=function(He){this.set("cursor",He);var ft=this.get("el");x.c&&ft&&(ft.style.cursor=He)},Ne.prototype.getPointByEvent=function(He){if(this.get("supportCSSTransform")){if(vo&&!Object(x.e)(He.layerX)&&He.layerX!==He.offsetX)return{x:He.layerX,y:He.layerY};if(!Object(x.e)(He.offsetX))return{x:He.offsetX,y:He.offsetY}}var ft=this.getClientByEvent(He),Tt=ft.x,Ht=ft.y;return this.getPointByClient(Tt,Ht)},Ne.prototype.getClientByEvent=function(He){var ft=He;return He.touches&&(ft=He.type==="touchend"?He.changedTouches[0]:He.touches[0]),{x:ft.clientX,y:ft.clientY}},Ne.prototype.getPointByClient=function(He,ft){var Tt=this.get("el").getBoundingClientRect();return{x:He-Tt.left,y:ft-Tt.top}},Ne.prototype.getClientByPoint=function(He,ft){var Tt=this.get("el").getBoundingClientRect();return{x:He+Tt.left,y:ft+Tt.top}},Ne.prototype.draw=function(){},Ne.prototype.removeDom=function(){var He=this.get("el");He.parentNode.removeChild(He)},Ne.prototype.clearEvents=function(){this.get("eventController").destroy()},Ne.prototype.isCanvas=function(){return!0},Ne.prototype.getParent=function(){return null},Ne.prototype.destroy=function(){var He=this.get("timeline");this.get("destroyed")||(this.clear(),He&&He.stop(),this.clearEvents(),this.removeDom(),We.prototype.destroy.call(this))},Ne}(_.a);b.a=ir},function(R,b,o){"use strict";o.d(b,"a",function(){return M});var f=new Map;function c(p,A){f.set(p,A)}function M(p){return f.get(p)}var _=function(p){var A=p.attr();return{x:A.x,y:A.y,width:A.width,height:A.height}},x=function(p){var A=p.attr(),C=A.x,N=A.y,P=A.r;return{x:C-P,y:N-P,width:2*P,height:2*P}},O=o(20);function S(p,A){return p&&A?{minX:Math.min(p.minX,A.minX),minY:Math.min(p.minY,A.minY),maxX:Math.max(p.maxX,A.maxX),maxY:Math.max(p.maxY,A.maxY)}:p||A}function g(p,A){var C=p.get("startArrowShape"),N=p.get("endArrowShape");return C&&(A=S(A,C.getCanvasBBox())),N&&(A=S(A,N.getCanvasBBox())),A}var h=o(67),y=o(37),E=o(0);function m(p,A){var C=p.prePoint,N=p.currentPoint,P=p.nextPoint,L=Math.pow(N[0]-C[0],2)+Math.pow(N[1]-C[1],2),z=Math.pow(N[0]-P[0],2)+Math.pow(N[1]-P[1],2),H=Math.pow(C[0]-P[0],2)+Math.pow(C[1]-P[1],2),re=Math.acos((L+z-H)/(2*Math.sqrt(L)*Math.sqrt(z)));if(!re||Math.sin(re)===0||Object(E.isNumberEqual)(re,0))return{xExtra:0,yExtra:0};var ae=Math.abs(Math.atan2(P[1]-N[1],P[0]-N[0])),ue=Math.abs(Math.atan2(P[0]-N[0],P[1]-N[1]));return ae=ae>Math.PI/2?Math.PI-ae:ae,ue=ue>Math.PI/2?Math.PI-ue:ue,{xExtra:Math.cos(re/2-ae)*(A/2*(1/Math.sin(re/2)))-A/2||0,yExtra:Math.cos(ue-re/2)*(A/2*(1/Math.sin(re/2)))-A/2||0}}c("rect",_),c("image",_),c("circle",x),c("marker",x),c("polyline",function(p){for(var A=p.attr().points,C=[],N=[],P=0;P<A.length;P++){var L=A[P];C.push(L[0]),N.push(L[1])}var z=O.f.getBBoxByArray(C,N),H=z.x,re=z.y,ae={minX:H,minY:re,maxX:H+z.width,maxY:re+z.height};return{x:(ae=g(p,ae)).minX,y:ae.minY,width:ae.maxX-ae.minX,height:ae.maxY-ae.minY}}),c("polygon",function(p){for(var A=p.attr().points,C=[],N=[],P=0;P<A.length;P++){var L=A[P];C.push(L[0]),N.push(L[1])}return O.f.getBBoxByArray(C,N)}),c("text",function(p){var A=p.attr(),C=A.x,N=A.y,P=A.text,L=A.fontSize,z=A.lineHeight,H=A.font;H||(H=Object(h.a)(A));var re,ae=Object(h.c)(P,H);if(ae){var ue=A.textAlign,xe=A.textBaseline,ye=Object(h.b)(P,L,z),Y={x:C,y:N-ye};ue&&(ue==="end"||ue==="right"?Y.x-=ae:ue==="center"&&(Y.x-=ae/2)),xe&&(xe==="top"?Y.y+=ye:xe==="middle"&&(Y.y+=ye/2)),re={x:Y.x,y:Y.y,width:ae,height:ye}}else re={x:C,y:N,width:0,height:0};return re}),c("path",function(p){var A=p.attr(),C=A.path,N=A.stroke?A.lineWidth:0,P=function(re,ae){for(var ue=[],xe=[],ye=[],Y=0;Y<re.length;Y++){var Ce=(ee=re[Y]).currentPoint,ge=ee.params,he=ee.prePoint,Q=void 0;switch(ee.command){case"Q":Q=O.e.box(he[0],he[1],ge[1],ge[2],ge[3],ge[4]);break;case"C":Q=O.b.box(he[0],he[1],ge[1],ge[2],ge[3],ge[4],ge[5],ge[6]);break;case"A":var W=ee.arcParams;Q=O.a.box(W.cx,W.cy,W.rx,W.ry,W.xRotation,W.startAngle,W.endAngle);break;default:ue.push(Ce[0]),xe.push(Ce[1])}Q&&(ee.box=Q,ue.push(Q.x,Q.x+Q.width),xe.push(Q.y,Q.y+Q.height)),ae&&(ee.command==="L"||ee.command==="M")&&ee.prePoint&&ee.nextPoint&&ye.push(ee)}ue=ue.filter(function(te){return!Number.isNaN(te)}),xe=xe.filter(function(te){return!Number.isNaN(te)});var le=Object(E.min)(ue),Oe=Object(E.min)(xe),Te=Object(E.max)(ue),se=Object(E.max)(xe);if(ye.length===0)return{x:le,y:Oe,width:Te-le,height:se-Oe};for(Y=0;Y<ye.length;Y++){var ee;(Ce=(ee=ye[Y]).currentPoint)[0]===le?le-=m(ee,ae).xExtra:Ce[0]===Te&&(Te+=m(ee,ae).xExtra),Ce[1]===Oe?Oe-=m(ee,ae).yExtra:Ce[1]===se&&(se+=m(ee,ae).yExtra)}return{x:le,y:Oe,width:Te-le,height:se-Oe}}(p.get("segments")||Object(y.d)(C),N),L=P.x,z=P.y,H={minX:L,minY:z,maxX:L+P.width,maxY:z+P.height};return{x:(H=g(p,H)).minX,y:H.minY,width:H.maxX-H.minX,height:H.maxY-H.minY}}),c("line",function(p){var A=p.attr(),C=A.x1,N=A.y1,P=A.x2,L=A.y2,z={minX:Math.min(C,P),maxX:Math.max(C,P),minY:Math.min(N,L),maxY:Math.max(N,L)};return{x:(z=g(p,z)).minX,y:z.minY,width:z.maxX-z.minX,height:z.maxY-z.minY}}),c("ellipse",function(p){var A=p.attr(),C=A.x,N=A.y,P=A.rx,L=A.ry;return{x:C-P,y:N-L,width:2*P,height:2*L}})},function(R,b,o){"use strict";var f=o(1),c=o(21),M=o(16),_=o(69),x=o(34),O=o(26),S=o(78),g=o(76),h=o(0),y=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,E=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,m=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function p(xe){var ye=xe.match(m);if(!ye)return"";var Y="";return ye.sort(function(Ce,ge){return Ce=Ce.split(":"),ge=ge.split(":"),Number(Ce[0])-Number(ge[0])}),Object(h.each)(ye,function(Ce){Ce=Ce.split(":"),Y+='<stop offset="'+Ce[0]+'" stop-color="'+Ce[1]+'"></stop>'}),Y}var A=function(){function xe(ye){this.cfg={};var Y=null,Ce=Object(h.uniqueId)("gradient_");return ye.toLowerCase()[0]==="l"?function(ge,he){var Q,W,le=y.exec(ge),Oe=Object(h.mod)(Object(h.toRadian)(parseFloat(le[1])),2*Math.PI),Te=le[2];Oe>=0&&Oe<.5*Math.PI?(Q={x:0,y:0},W={x:1,y:1}):.5*Math.PI<=Oe&&Oe<Math.PI?(Q={x:1,y:0},W={x:0,y:1}):Math.PI<=Oe&&Oe<1.5*Math.PI?(Q={x:1,y:1},W={x:0,y:0}):(Q={x:0,y:1},W={x:1,y:0});var se=Math.tan(Oe),ee=se*se,te=(W.x-Q.x+se*(W.y-Q.y))/(ee+1)+Q.x,U=se*(W.x-Q.x+se*(W.y-Q.y))/(ee+1)+Q.y;he.setAttribute("x1",Q.x),he.setAttribute("y1",Q.y),he.setAttribute("x2",te),he.setAttribute("y2",U),he.innerHTML=p(Te)}(ye,Y=Object(O.b)("linearGradient")):function(ge,he){var Q=E.exec(ge),W=parseFloat(Q[1]),le=parseFloat(Q[2]),Oe=parseFloat(Q[3]),Te=Q[4];he.setAttribute("cx",W),he.setAttribute("cy",le),he.setAttribute("r",Oe),he.innerHTML=p(Te)}(ye,Y=Object(O.b)("radialGradient")),Y.setAttribute("id",Ce),this.el=Y,this.id=Ce,this.cfg=ye,this}return xe.prototype.match=function(ye,Y){return this.cfg===Y},xe}(),C={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},N={x:"-40%",y:"-40%",width:"200%",height:"200%"},P=function(){function xe(ye){this.type="filter",this.cfg={},this.type="filter";var Y=Object(O.b)("filter");return Object(h.each)(N,function(Ce,ge){Y.setAttribute(ge,Ce)}),this.el=Y,this.id=Object(h.uniqueId)("filter_"),this.el.id=this.id,this.cfg=ye,this._parseShadow(ye,Y),this}return xe.prototype.match=function(ye,Y){if(this.type!==ye)return!1;var Ce=!0,ge=this.cfg;return Object(h.each)(Object.keys(ge),function(he){if(ge[he]!==Y[he])return Ce=!1,!1}),Ce},xe.prototype.update=function(ye,Y){var Ce=this.cfg;return Ce[C[ye]]=Y,this._parseShadow(Ce,this.el),this},xe.prototype._parseShadow=function(ye,Y){var Ce=`<feDropShadow
      dx="`+(ye.dx||0)+`"
      dy="`+(ye.dy||0)+`"
      stdDeviation="`+(ye.blur?ye.blur/10:0)+`"
      flood-color="`+(ye.color?ye.color:"#000")+`"
      flood-opacity="`+(ye.opacity?ye.opacity:1)+`"
      />`;Y.innerHTML=Ce},xe}(),L=function(){function xe(ye,Y){this.cfg={};var Ce=Object(O.b)("marker"),ge=Object(h.uniqueId)("marker_");Ce.setAttribute("id",ge);var he=Object(O.b)("path");he.setAttribute("stroke",ye.stroke||"none"),he.setAttribute("fill",ye.fill||"none"),Ce.appendChild(he),Ce.setAttribute("overflow","visible"),Ce.setAttribute("orient","auto-start-reverse"),this.el=Ce,this.child=he,this.id=ge;var Q=ye[Y==="marker-start"?"startArrow":"endArrow"];return this.stroke=ye.stroke||"#000",Q===!0?this._setDefaultPath(Y,he):(this.cfg=Q,this._setMarker(ye.lineWidth,he)),this}return xe.prototype.match=function(){return!1},xe.prototype._setDefaultPath=function(ye,Y){var Ce=this.el;Y.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),Ce.setAttribute("refX",""+10*Math.cos(Math.PI/6)),Ce.setAttribute("refY","5")},xe.prototype._setMarker=function(ye,Y){var Ce=this.el,ge=this.cfg.path,he=this.cfg.d;Object(h.isArray)(ge)&&(ge=ge.map(function(Q){return Q.join(" ")}).join("")),Y.setAttribute("d",ge),Ce.appendChild(Y),he&&Ce.setAttribute("refX",""+he/ye)},xe.prototype.update=function(ye){var Y=this.child;Y.attr?Y.attr("fill",ye):Y.setAttribute("fill",ye)},xe}(),z=function(){function xe(ye){this.type="clip",this.cfg={};var Y=Object(O.b)("clipPath");this.el=Y,this.id=Object(h.uniqueId)("clip_"),Y.id=this.id;var Ce=ye.cfg.el;return Y.appendChild(Ce),this.cfg=ye,this}return xe.prototype.match=function(){return!1},xe.prototype.remove=function(){var ye=this.el;ye.parentNode.removeChild(ye)},xe}(),H=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,re=function(){function xe(ye){this.cfg={};var Y=Object(O.b)("pattern");Y.setAttribute("patternUnits","userSpaceOnUse");var Ce=Object(O.b)("image");Y.appendChild(Ce);var ge=Object(h.uniqueId)("pattern_");Y.id=ge,this.el=Y,this.id=ge,this.cfg=ye;var he=H.exec(ye)[2];Ce.setAttribute("href",he);var Q=new Image;function W(){Y.setAttribute("width",""+Q.width),Y.setAttribute("height",""+Q.height)}return he.match(/^data:/i)||(Q.crossOrigin="Anonymous"),Q.src=he,Q.complete?W():(Q.onload=W,Q.src=Q.src),this}return xe.prototype.match=function(ye,Y){return this.cfg===Y},xe}(),ae=function(){function xe(ye){var Y=Object(O.b)("defs"),Ce=Object(h.uniqueId)("defs_");Y.id=Ce,ye.appendChild(Y),this.children=[],this.defaultArrow={},this.el=Y,this.canvas=ye}return xe.prototype.find=function(ye,Y){for(var Ce=this.children,ge=null,he=0;he<Ce.length;he++)if(Ce[he].match(ye,Y)){ge=Ce[he].id;break}return ge},xe.prototype.findById=function(ye){for(var Y=this.children,Ce=null,ge=0;ge<Y.length;ge++)if(Y[ge].id===ye){Ce=Y[ge];break}return Ce},xe.prototype.add=function(ye){this.children.push(ye),ye.canvas=this.canvas,ye.parent=this},xe.prototype.getDefaultArrow=function(ye,Y){var Ce=ye.stroke||ye.strokeStyle;if(this.defaultArrow[Ce])return this.defaultArrow[Ce].id;var ge=new L(ye,Y);return this.defaultArrow[Ce]=ge,this.el.appendChild(ge.el),this.add(ge),ge.id},xe.prototype.addGradient=function(ye){var Y=new A(ye);return this.el.appendChild(Y.el),this.add(Y),Y.id},xe.prototype.addArrow=function(ye,Y){var Ce=new L(ye,Y);return this.el.appendChild(Ce.el),this.add(Ce),Ce.id},xe.prototype.addShadow=function(ye){var Y=new P(ye);return this.el.appendChild(Y.el),this.add(Y),Y.id},xe.prototype.addPattern=function(ye){var Y=new re(ye);return this.el.appendChild(Y.el),this.add(Y),Y.id},xe.prototype.addClip=function(ye){var Y=new z(ye);return this.el.appendChild(Y.el),this.add(Y),Y.id},xe}(),ue=function(xe){function ye(Y){return xe.call(this,Object(f.__assign)(Object(f.__assign)({},Y),{autoDraw:!0,renderer:"svg"}))||this}return Object(f.__extends)(ye,xe),ye.prototype.getShapeBase=function(){return S},ye.prototype.getGroupBase=function(){return g.a},ye.prototype.getShape=function(Y,Ce,ge){var he=ge.target||ge.srcElement;if(!M.a[he.tagName]){for(var Q=he.parentNode;Q&&!M.a[Q.tagName];)Q=Q.parentNode;he=Q}return this.find(function(W){return W.get("el")===he})},ye.prototype.createDom=function(){var Y=Object(O.b)("svg"),Ce=new ae(Y);return Y.setAttribute("width",""+this.get("width")),Y.setAttribute("height",""+this.get("height")),this.set("context",Ce),Y},ye.prototype.onCanvasChange=function(Y){var Ce=this.get("context"),ge=this.get("el");if(Y==="sort"){var he=this.get("children");he&&he.length&&Object(O.d)(this,function(W,le){return he.indexOf(W)-he.indexOf(le)?1:0})}else if(Y==="clear"){if(ge){ge.innerHTML="";var Q=Ce.el;Q.innerHTML="",ge.appendChild(Q)}}else Y==="matrix"?Object(x.c)(this):Y==="clip"?Object(x.a)(this,Ce):Y==="changeSize"&&(ge.setAttribute("width",""+this.get("width")),ge.setAttribute("height",""+this.get("height")))},ye.prototype.draw=function(){var Y=this.get("context"),Ce=this.getChildren();Object(x.a)(this,Y),Ce.length&&Object(_.a)(Y,Ce)},ye}(c.AbstractCanvas);b.a=ue},function(R,b,o){"use strict";o(130),o(131),o(133)},function(R,b,o){"use strict";o.d(b,"a",function(){return f.a}),o.d(b,"b",function(){return M.a});var f=o(77),c=(o(6),o(7),o(2)),M=(c.e.create(),o(56));o(125),c.e.create(),c.e.create(),c.e.create(),c.e.create(),c.e.create()},function(R,b,o){"use strict";var f=o(1),c=o(21);function M(y,E,m){var p=y.getTotalMatrix();if(p){var A=function(C,N){if(N){var P=Object(c.invert)(N);return Object(c.multiplyVec2)(P,C)}return C}([E,m,1],p);return[A[0],A[1]]}return[E,m]}function _(y,E,m){if(y.isCanvas&&y.isCanvas())return!0;if(!Object(c.isAllowCapture)(y)||y.cfg.isInView===!1)return!1;if(y.cfg.clipShape){var p=M(y,E,m),A=p[0],C=p[1];if(y.isClipped(A,C))return!1}var N=y.cfg.cacheCanvasBBox||y.getCanvasBBox();return E>=N.minX&&E<=N.maxX&&m>=N.minY&&m<=N.maxY}var x=o(55),O=o(75),S=o(15),g=o(30),h=function(y){function E(){return y!==null&&y.apply(this,arguments)||this}return Object(f.__extends)(E,y),E.prototype.getDefaultCfg=function(){var m=y.prototype.getDefaultCfg.call(this);return m.renderer="canvas",m.autoDraw=!0,m.localRefresh=!0,m.refreshElements=[],m.clipView=!0,m.quickHit=!1,m},E.prototype.onCanvasChange=function(m){m!=="attr"&&m!=="sort"&&m!=="changeSize"||(this.set("refreshElements",[this]),this.draw())},E.prototype.getShapeBase=function(){return x},E.prototype.getGroupBase=function(){return O.a},E.prototype.getPixelRatio=function(){var m=this.get("pixelRatio")||Object(S.d)();return m>=1?Math.ceil(m):1},E.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},E.prototype.createDom=function(){var m=document.createElement("canvas"),p=m.getContext("2d");return this.set("context",p),m},E.prototype.setDOMSize=function(m,p){y.prototype.setDOMSize.call(this,m,p);var A=this.get("context"),C=this.get("el"),N=this.getPixelRatio();C.width=N*m,C.height=N*p,N>1&&A.scale(N,N)},E.prototype.clear=function(){y.prototype.clear.call(this),this._clearFrame();var m=this.get("context"),p=this.get("el");m.clearRect(0,0,p.width,p.height)},E.prototype.getShape=function(m,p){return this.get("quickHit")?function A(C,N,P){if(!_(C,N,P))return null;for(var L=null,z=C.getChildren(),H=z.length-1;H>=0;H--){var re=z[H];if(re.isGroup())L=A(re,N,P);else if(_(re,N,P)){var ae=re,ue=M(re,N,P),xe=ue[0],ye=ue[1];ae.isInShape(xe,ye)&&(L=re)}if(L)break}return L}(this,m,p):y.prototype.getShape.call(this,m,p,null)},E.prototype._getRefreshRegion=function(){var m,p=this.get("refreshElements"),A=this.getViewRange();return p.length&&p[0]===this?m=A:(m=Object(g.f)(p))&&(m.minX=Math.floor(m.minX),m.minY=Math.floor(m.minY),m.maxX=Math.ceil(m.maxX),m.maxY=Math.ceil(m.maxY),m.maxY+=1,this.get("clipView")&&(m=Object(g.g)(m,A))),m},E.prototype.refreshElement=function(m){this.get("refreshElements").push(m)},E.prototype._clearFrame=function(){var m=this.get("drawFrame");m&&(Object(S.a)(m),this.set("drawFrame",null),this.set("refreshElements",[]))},E.prototype.draw=function(){var m=this.get("drawFrame");this.get("autoDraw")&&m||this._startDraw()},E.prototype._drawAll=function(){var m=this.get("context"),p=this.get("el"),A=this.getChildren();m.clearRect(0,0,p.width,p.height),Object(g.a)(m,this),Object(g.d)(m,A),this.set("refreshElements",[])},E.prototype._drawRegion=function(){var m=this.get("context"),p=this.get("refreshElements"),A=this.getChildren(),C=this._getRefreshRegion();C?(m.clearRect(C.minX,C.minY,C.maxX-C.minX,C.maxY-C.minY),m.save(),m.beginPath(),m.rect(C.minX,C.minY,C.maxX-C.minX,C.maxY-C.minY),m.clip(),Object(g.a)(m,this),Object(g.b)(this,A,C),Object(g.d)(m,A,C),m.restore()):p.length&&Object(g.c)(p),Object(S.c)(p,function(N){N.get("hasChanged")&&N.set("hasChanged",!1)}),this.set("refreshElements",[])},E.prototype._startDraw=function(){var m=this,p=this.get("drawFrame");p||(p=Object(S.n)(function(){m.get("localRefresh")?m._drawRegion():m._drawAll(),m.set("drawFrame",null)}),this.set("drawFrame",p))},E.prototype.skipDraw=function(){},E.prototype.removeDom=function(){var m=this.get("el");m.width=0,m.height=0,m.parentNode.removeChild(m)},E}(c.AbstractCanvas);b.a=h},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getAdjMatrixAsync",{enumerable:!0,get:function(){return f.getAdjMatrixAsync}}),Object.defineProperty(b,"connectedComponentAsync",{enumerable:!0,get:function(){return f.connectedComponentAsync}}),Object.defineProperty(b,"getDegreeAsync",{enumerable:!0,get:function(){return f.getDegreeAsync}}),Object.defineProperty(b,"getInDegreeAsync",{enumerable:!0,get:function(){return f.getInDegreeAsync}}),Object.defineProperty(b,"getOutDegreeAsync",{enumerable:!0,get:function(){return f.getOutDegreeAsync}}),Object.defineProperty(b,"detectCycleAsync",{enumerable:!0,get:function(){return f.detectCycleAsync}}),Object.defineProperty(b,"detectAllCyclesAsync",{enumerable:!0,get:function(){return f.detectAllCyclesAsync}}),Object.defineProperty(b,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return f.detectAllDirectedCycleAsync}}),Object.defineProperty(b,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return f.detectAllUndirectedCycleAsync}}),Object.defineProperty(b,"dijkstraAsync",{enumerable:!0,get:function(){return f.dijkstraAsync}}),Object.defineProperty(b,"findAllPathAsync",{enumerable:!0,get:function(){return f.findAllPathAsync}}),Object.defineProperty(b,"findShortestPathAsync",{enumerable:!0,get:function(){return f.findShortestPathAsync}}),Object.defineProperty(b,"floydWarshallAsync",{enumerable:!0,get:function(){return f.floydWarshallAsync}}),Object.defineProperty(b,"labelPropagationAsync",{enumerable:!0,get:function(){return f.labelPropagationAsync}}),Object.defineProperty(b,"louvainAsync",{enumerable:!0,get:function(){return f.louvainAsync}}),Object.defineProperty(b,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return f.minimumSpanningTreeAsync}}),Object.defineProperty(b,"pageRankAsync",{enumerable:!0,get:function(){return f.pageRankAsync}}),Object.defineProperty(b,"getNeighborsAsync",{enumerable:!0,get:function(){return f.getNeighborsAsync}}),Object.defineProperty(b,"GADDIAsync",{enumerable:!0,get:function(){return f.GADDIAsync}}),b.default=b.detectDirectedCycleAsync=void 0;var f=o(280),c=f.detectCycleAsync;b.detectDirectedCycleAsync=c;var M={getAdjMatrixAsync:f.getAdjMatrixAsync,connectedComponentAsync:f.connectedComponentAsync,getDegreeAsync:f.getDegreeAsync,getInDegreeAsync:f.getInDegreeAsync,getOutDegreeAsync:f.getOutDegreeAsync,detectCycleAsync:f.detectCycleAsync,detectDirectedCycleAsync:c,detectAllCyclesAsync:f.detectAllCyclesAsync,detectAllDirectedCycleAsync:f.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:f.detectAllUndirectedCycleAsync,dijkstraAsync:f.dijkstraAsync,findAllPathAsync:f.findAllPathAsync,findShortestPathAsync:f.findShortestPathAsync,floydWarshallAsync:f.floydWarshallAsync,labelPropagationAsync:f.labelPropagationAsync,louvainAsync:f.louvainAsync,minimumSpanningTreeAsync:f.minimumSpanningTreeAsync,pageRankAsync:f.pageRankAsync,getNeighborsAsync:f.getNeighborsAsync,GADDIAsync:f.GADDIAsync};b.default=M},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var f=o(512);b.default=function(c,M){return M===void 0&&(M=!0),{lazyInject:f.makePropertyInjectDecorator(c,M),lazyInjectNamed:f.makePropertyInjectNamedDecorator(c,M),lazyInjectTagged:f.makePropertyInjectTaggedDecorator(c,M),lazyMultiInject:f.makePropertyMultiInjectDecorator(c,M)}}},function(R,b,o){var f,c,M;function _(x){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}M=function(){"use strict";var x=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},O=function(Be,ut){for(var bt=Object.keys(ut),Ft=0;Ft<bt.length;++Ft)Be[bt[Ft]]=ut[bt[Ft]];return Be};function S(Be){var ut=new Error("(regl) "+Be);throw console.error(ut),ut}function g(Be,ut){Be||S(ut)}function h(Be){return Be?": "+Be:""}function y(Be,ut){switch(ut){case"number":return typeof Be=="number";case"object":return _(Be)==="object";case"string":return typeof Be=="string";case"boolean":return typeof Be=="boolean";case"function":return typeof Be=="function";case"undefined":return Be===void 0;case"symbol":return _(Be)==="symbol"}}function E(Be,ut,bt){ut.indexOf(Be)<0&&S("invalid value"+h(bt)+". must be one of: "+ut)}var m=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(Be,ut){for(Be+="";Be.length<ut;)Be=" "+Be;return Be}function A(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function C(Be,ut){this.number=Be,this.line=ut,this.errors=[]}function N(Be,ut,bt){this.file=Be,this.line=ut,this.message=bt}function P(){var Be=new Error,ut=(Be.stack||Be).toString(),bt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ut);if(bt)return bt[1];var Ft=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ut);return Ft?Ft[1]:"unknown"}function L(){var Be=new Error,ut=(Be.stack||Be).toString(),bt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ut);if(bt)return bt[1];var Ft=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ut);return Ft?Ft[1]:"unknown"}function z(Be,ut){var bt,Ft=Be.split(`
`),we=1,ze=0,Qe={unknown:new A,0:new A};Qe.unknown.name=Qe[0].name=ut||P(),Qe.unknown.lines.push(new C(0,""));for(var lt=0;lt<Ft.length;++lt){var vt=Ft[lt],wt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(vt);if(wt)switch(wt[1]){case"line":var Lt=/(\d+)(\s+\d+)?/.exec(wt[2]);Lt&&(we=0|Lt[1],Lt[2]&&((ze=0|Lt[2])in Qe||(Qe[ze]=new A)));break;case"define":var Wt=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wt[2]);Wt&&(Qe[ze].name=Wt[1]?(bt=Wt[2],typeof atob!="undefined"?atob(bt):"base64:"+bt):Wt[2])}Qe[ze].lines.push(new C(we++,vt))}return Object.keys(Qe).forEach(function(er){var rr=Qe[er];rr.lines.forEach(function(sr){rr.index[sr.number]=sr})}),Qe}function H(Be){Be._commandRef=P()}function re(Be,ut){var bt=L();S(Be+" in command "+(ut||P())+(bt==="unknown"?"":" called from "+bt))}function ae(Be,ut,bt,Ft){y(Be,ut)||re("invalid parameter type"+h(bt)+". expected "+ut+", got "+_(Be),Ft||P())}var ue={};function xe(Be,ut){return Be===32820||Be===32819||Be===33635?2:Be===34042?4:ue[Be]*ut}function ye(Be){return!(Be&Be-1||!Be)}ue[5120]=ue[5121]=1,ue[5122]=ue[5123]=ue[36193]=ue[33635]=ue[32819]=ue[32820]=2,ue[5124]=ue[5125]=ue[5126]=ue[34042]=4;var Y=O(g,{optional:function(Be){Be()},raise:S,commandRaise:re,command:function(Be,ut,bt){Be||re(ut,bt||P())},parameter:function(Be,ut,bt){Be in ut||S("unknown parameter ("+Be+")"+h(bt)+". possible values: "+Object.keys(ut).join())},commandParameter:function(Be,ut,bt,Ft){Be in ut||re("unknown parameter ("+Be+")"+h(bt)+". possible values: "+Object.keys(ut).join(),Ft||P())},constructor:function(Be){Object.keys(Be).forEach(function(ut){m.indexOf(ut)<0&&S('invalid regl constructor argument "'+ut+'". must be one of '+m)})},type:function(Be,ut,bt){y(Be,ut)||S("invalid parameter type"+h(bt)+". expected "+ut+", got "+_(Be))},commandType:ae,isTypedArray:function(Be,ut){x(Be)||S("invalid parameter type"+h(ut)+". must be a typed array")},nni:function(Be,ut){Be>=0&&(0|Be)===Be||S("invalid parameter type, ("+Be+")"+h(ut)+". must be a nonnegative integer")},oneOf:E,shaderError:function(Be,ut,bt,Ft,we){if(!Be.getShaderParameter(ut,Be.COMPILE_STATUS)){var ze=Be.getShaderInfoLog(ut),Qe=Ft===Be.FRAGMENT_SHADER?"fragment":"vertex";ae(bt,"string",Qe+" shader source must be a string",we);var lt=z(bt,we),vt=function(wt){var Lt=[];return wt.split(`
`).forEach(function(Wt){if(!(Wt.length<5)){var er=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Wt);er?Lt.push(new N(0|er[1],0|er[2],er[3].trim())):Wt.length>0&&Lt.push(new N("unknown",0,Wt))}}),Lt}(ze);(function(wt,Lt){Lt.forEach(function(Wt){var er=wt[Wt.file];if(er){var rr=er.index[Wt.line];if(rr)return rr.errors.push(Wt),void(er.hasErrors=!0)}wt.unknown.hasErrors=!0,wt.unknown.lines[0].errors.push(Wt)})})(lt,vt),Object.keys(lt).forEach(function(wt){var Lt=lt[wt];if(Lt.hasErrors){var Wt=[""],er=[""];rr("file number "+wt+": "+Lt.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Lt.lines.forEach(function(sr){if(sr.errors.length>0){rr(p(sr.number,4)+"|  ","background-color:yellow; font-weight:bold"),rr(sr.line+`
`,"color:red; background-color:yellow; font-weight:bold");var gr=0;sr.errors.forEach(function(Vr){var Fr=Vr.message,$r=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Fr);if($r){var Kr=$r[1];switch(Fr=$r[2],Kr){case"assign":Kr="="}gr=Math.max(sr.line.indexOf(Kr,gr),0)}else gr=0;rr(p("| ",6)),rr(p("^^^",gr+3)+`
`,"font-weight:bold"),rr(p("| ",6)),rr(Fr+`
`,"font-weight:bold")}),rr(p("| ",6)+`
`)}else rr(p(sr.number,4)+"|  "),rr(sr.line+`
`,"color:red")}),typeof document=="undefined"||window.chrome?console.log(Wt.join("")):(er[0]=Wt.join("%c"),console.log.apply(console,er))}function rr(sr,gr){Wt.push(sr),er.push(gr||"")}}),g.raise("Error compiling "+Qe+" shader, "+lt[0].name)}},linkError:function(Be,ut,bt,Ft,we){if(!Be.getProgramParameter(ut,Be.LINK_STATUS)){var ze=Be.getProgramInfoLog(ut),Qe=z(bt,we),lt='Error linking program with vertex shader, "'+z(Ft,we)[0].name+'", and fragment shader "'+Qe[0].name+'"';typeof document!="undefined"?console.log("%c"+lt+`
%c`+ze,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(lt+`
`+ze),g.raise(lt)}},callSite:L,saveCommandRef:H,saveDrawInfo:function(Be,ut,bt,Ft){function we(vt){return vt?Ft.id(vt):0}function ze(vt,wt){Object.keys(wt).forEach(function(Lt){vt[Ft.id(Lt)]=!0})}H(Be),Be._fragId=we(Be.static.frag),Be._vertId=we(Be.static.vert);var Qe=Be._uniformSet={};ze(Qe,ut.static),ze(Qe,ut.dynamic);var lt=Be._attributeSet={};ze(lt,bt.static),ze(lt,bt.dynamic),Be._hasCount="count"in Be.static||"count"in Be.dynamic||"elements"in Be.static||"elements"in Be.dynamic},framebufferFormat:function(Be,ut,bt){Be.texture?E(Be.texture._texture.internalformat,ut,"unsupported texture format for attachment"):E(Be.renderbuffer._renderbuffer.format,bt,"unsupported renderbuffer format for attachment")},guessCommand:P,texture2D:function(Be,ut,bt){var Ft,we=ut.width,ze=ut.height,Qe=ut.channels;g(we>0&&we<=bt.maxTextureSize&&ze>0&&ze<=bt.maxTextureSize,"invalid texture shape"),Be.wrapS===33071&&Be.wrapT===33071||g(ye(we)&&ye(ze),"incompatible wrap mode for texture, both width and height must be power of 2"),ut.mipmask===1?we!==1&&ze!==1&&g(Be.minFilter!==9984&&Be.minFilter!==9986&&Be.minFilter!==9985&&Be.minFilter!==9987,"min filter requires mipmap"):(g(ye(we)&&ye(ze),"texture must be a square power of 2 to support mipmapping"),g(ut.mipmask===(we<<1)-1,"missing or incomplete mipmap data")),ut.type===5126&&(bt.extensions.indexOf("oes_texture_float_linear")<0&&g(Be.minFilter===9728&&Be.magFilter===9728,"filter not supported, must enable oes_texture_float_linear"),g(!Be.genMipmaps,"mipmap generation not supported with float textures"));var lt=ut.images;for(Ft=0;Ft<16;++Ft)if(lt[Ft]){var vt=we>>Ft,wt=ze>>Ft;g(ut.mipmask&1<<Ft,"missing mipmap data");var Lt=lt[Ft];if(g(Lt.width===vt&&Lt.height===wt,"invalid shape for mip images"),g(Lt.format===ut.format&&Lt.internalformat===ut.internalformat&&Lt.type===ut.type,"incompatible type for mip image"),!Lt.compressed)if(Lt.data){var Wt=Math.ceil(xe(Lt.type,Qe)*vt/Lt.unpackAlignment)*Lt.unpackAlignment;g(Lt.data.byteLength===Wt*wt,"invalid data for image, buffer size is inconsistent with image format")}else Lt.element||Lt.copy}else Be.genMipmaps||g((ut.mipmask&1<<Ft)==0,"extra mipmap data");ut.compressed&&g(!Be.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(Be,ut,bt,Ft){var we=Be.width,ze=Be.height,Qe=Be.channels;g(we>0&&we<=Ft.maxTextureSize&&ze>0&&ze<=Ft.maxTextureSize,"invalid texture shape"),g(we===ze,"cube map must be square"),g(ut.wrapS===33071&&ut.wrapT===33071,"wrap mode not supported by cube map");for(var lt=0;lt<bt.length;++lt){var vt=bt[lt];g(vt.width===we&&vt.height===ze,"inconsistent cube map face shape"),ut.genMipmaps&&(g(!vt.compressed,"can not generate mipmap for compressed textures"),g(vt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var wt=vt.images,Lt=0;Lt<16;++Lt){var Wt=wt[Lt];if(Wt){var er=we>>Lt,rr=ze>>Lt;g(vt.mipmask&1<<Lt,"missing mipmap data"),g(Wt.width===er&&Wt.height===rr,"invalid shape for mip images"),g(Wt.format===Be.format&&Wt.internalformat===Be.internalformat&&Wt.type===Be.type,"incompatible type for mip image"),Wt.compressed||(Wt.data?g(Wt.data.byteLength===er*rr*Math.max(xe(Wt.type,Qe),Wt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Wt.element||Wt.copy)}}}}}),Ce=0;function ge(Be,ut){this.id=Ce++,this.type=Be,this.data=ut}function he(Be){return Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Q(Be){return"["+function ut(bt){if(bt.length===0)return[];var Ft=bt.charAt(0),we=bt.charAt(bt.length-1);if(bt.length>1&&Ft===we&&(Ft==='"'||Ft==="'"))return['"'+he(bt.substr(1,bt.length-2))+'"'];var ze=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(bt);if(ze)return ut(bt.substr(0,ze.index)).concat(ut(ze[1])).concat(ut(bt.substr(ze.index+ze[0].length)));var Qe=bt.split(".");if(Qe.length===1)return['"'+he(bt)+'"'];for(var lt=[],vt=0;vt<Qe.length;++vt)lt=lt.concat(ut(Qe[vt]));return lt}(Be).join("][")+"]"}var W={DynamicVariable:ge,define:function(Be,ut){return new ge(Be,Q(ut+""))},isDynamic:function(Be){return typeof Be=="function"&&!Be._reglType||Be instanceof ge},unbox:function Be(ut,bt){return typeof ut=="function"?new ge(0,ut):typeof ut=="number"||typeof ut=="boolean"?new ge(5,ut):Array.isArray(ut)?new ge(6,ut.map(function(Ft,we){return Be(Ft,bt+"["+we+"]")})):ut instanceof ge?ut:void Y(!1,"invalid option type in uniform "+bt)},accessor:Q},le={next:typeof requestAnimationFrame=="function"?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:typeof cancelAnimationFrame=="function"?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},Oe=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Te(Be){return typeof Be=="string"?Be.split():(Y(Array.isArray(Be),"invalid extension array"),Be)}function se(Be){return typeof Be=="string"?(Y(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Be)):Be}function ee(Be){var ut,bt,Ft,we,ze,Qe=Be||{},lt={},vt=[],wt=[],Lt=typeof window=="undefined"?1:window.devicePixelRatio,Wt=!1,er=function(gr){gr&&Y.raise(gr)},rr=function(){};if(typeof Qe=="string"?(Y(typeof document!="undefined","selector queries only supported in DOM enviroments"),ut=document.querySelector(Qe),Y(ut,"invalid query string for element")):_(Qe)==="object"?typeof(ze=Qe).nodeName=="string"&&typeof ze.appendChild=="function"&&typeof ze.getBoundingClientRect=="function"?ut=Qe:function(gr){return typeof gr.drawArrays=="function"||typeof gr.drawElements=="function"}(Qe)?Ft=(we=Qe).canvas:(Y.constructor(Qe),"gl"in Qe?we=Qe.gl:"canvas"in Qe?Ft=se(Qe.canvas):"container"in Qe&&(bt=se(Qe.container)),"attributes"in Qe&&(lt=Qe.attributes,Y.type(lt,"object","invalid context attributes")),"extensions"in Qe&&(vt=Te(Qe.extensions)),"optionalExtensions"in Qe&&(wt=Te(Qe.optionalExtensions)),"onDone"in Qe&&(Y.type(Qe.onDone,"function","invalid or missing onDone callback"),er=Qe.onDone),"profile"in Qe&&(Wt=!!Qe.profile),"pixelRatio"in Qe&&(Lt=+Qe.pixelRatio,Y(Lt>0,"invalid pixel ratio"))):Y.raise("invalid arguments to regl"),ut&&(ut.nodeName.toLowerCase()==="canvas"?Ft=ut:bt=ut),!we){if(!Ft){Y(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var sr=function(gr,Vr,Fr){var $r,Kr=document.createElement("canvas");function jn(){var Cn=window.innerWidth,qn=window.innerHeight;if(gr!==document.body){var Qr=gr.getBoundingClientRect();Cn=Qr.right-Qr.left,qn=Qr.bottom-Qr.top}Kr.width=Fr*Cn,Kr.height=Fr*qn,O(Kr.style,{width:Cn+"px",height:qn+"px"})}return O(Kr.style,{border:0,margin:0,padding:0,top:0,left:0}),gr.appendChild(Kr),gr===document.body&&(Kr.style.position="absolute",O(gr.style,{margin:0,padding:0})),gr!==document.body&&typeof ResizeObserver=="function"?($r=new ResizeObserver(function(){setTimeout(jn)})).observe(gr):window.addEventListener("resize",jn,!1),jn(),{canvas:Kr,onDestroy:function(){$r?$r.disconnect():window.removeEventListener("resize",jn),gr.removeChild(Kr)}}}(bt||document.body,0,Lt);if(!sr)return null;Ft=sr.canvas,rr=sr.onDestroy}lt.premultipliedAlpha===void 0&&(lt.premultipliedAlpha=!0),we=function(gr,Vr){function Fr($r){try{return gr.getContext($r,Vr)}catch(Kr){return null}}return Fr("webgl")||Fr("experimental-webgl")||Fr("webgl-experimental")}(Ft,lt)}return we?{gl:we,canvas:Ft,container:bt,extensions:vt,optionalExtensions:wt,pixelRatio:Lt,profile:Wt,onDone:er,onDestroy:rr}:(rr(),er("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function te(Be,ut){for(var bt=Array(Be),Ft=0;Ft<Be;++Ft)bt[Ft]=ut(Ft);return bt}function U(Be){var ut,bt;return ut=(Be>65535)<<4,ut|=bt=((Be>>>=ut)>255)<<3,ut|=bt=((Be>>>=bt)>15)<<2,(ut|=bt=((Be>>>=bt)>3)<<1)|(Be>>>=bt)>>1}function X(){var Be=te(8,function(){return[]});function ut(Ft){var we=function(Qe){for(var lt=16;lt<=268435456;lt*=16)if(Qe<=lt)return lt;return 0}(Ft),ze=Be[U(we)>>2];return ze.length>0?ze.pop():new ArrayBuffer(we)}function bt(Ft){Be[U(Ft.byteLength)>>2].push(Ft)}return{alloc:ut,free:bt,allocType:function(Ft,we){var ze=null;switch(Ft){case 5120:ze=new Int8Array(ut(we),0,we);break;case 5121:ze=new Uint8Array(ut(we),0,we);break;case 5122:ze=new Int16Array(ut(2*we),0,we);break;case 5123:ze=new Uint16Array(ut(2*we),0,we);break;case 5124:ze=new Int32Array(ut(4*we),0,we);break;case 5125:ze=new Uint32Array(ut(4*we),0,we);break;case 5126:ze=new Float32Array(ut(4*we),0,we);break;default:return null}return ze.length!==we?ze.subarray(0,we):ze},freeType:function(Ft){bt(Ft.buffer)}}}var B=X();function J(Be){return!!Be&&_(Be)==="object"&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&typeof Be.offset=="number"&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||x(Be.data))}B.zero=X();var ne=function(Be){return Object.keys(Be).map(function(ut){return Be[ut]})},ie={shape:function(Be){for(var ut=[],bt=Be;bt.length;bt=bt[0])ut.push(bt.length);return ut},flatten:function(Be,ut,bt,Ft){var we=1;if(ut.length)for(var ze=0;ze<ut.length;++ze)we*=ut[ze];else we=0;var Qe=Ft||B.allocType(bt,we);switch(ut.length){case 0:break;case 1:(function(lt,vt,wt){for(var Lt=0;Lt<vt;++Lt)wt[Lt]=lt[Lt]})(Be,ut[0],Qe);break;case 2:(function(lt,vt,wt,Lt){for(var Wt=0,er=0;er<vt;++er)for(var rr=lt[er],sr=0;sr<wt;++sr)Lt[Wt++]=rr[sr]})(Be,ut[0],ut[1],Qe);break;case 3:Z(Be,ut[0],ut[1],ut[2],Qe,0);break;default:(function lt(vt,wt,Lt,Wt,er){for(var rr=1,sr=Lt+1;sr<wt.length;++sr)rr*=wt[sr];var gr=wt[Lt];if(wt.length-Lt==4){var Vr=wt[Lt+1],Fr=wt[Lt+2],$r=wt[Lt+3];for(sr=0;sr<gr;++sr)Z(vt[sr],Vr,Fr,$r,Wt,er),er+=rr}else for(sr=0;sr<gr;++sr)lt(vt[sr],wt,Lt+1,Wt,er),er+=rr})(Be,ut,0,Qe,0)}return Qe}};function Z(Be,ut,bt,Ft,we,ze){for(var Qe=ze,lt=0;lt<ut;++lt)for(var vt=Be[lt],wt=0;wt<bt;++wt)for(var Lt=vt[wt],Wt=0;Wt<Ft;++Wt)we[Qe++]=Lt[Wt]}var fe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},_e={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},je={dynamic:35048,stream:35040,static:35044},Me=ie.flatten,Ae=ie.shape,Le=[];function Se(Be){return 0|fe[Object.prototype.toString.call(Be)]}function Re(Be,ut){for(var bt=0;bt<ut.length;++bt)Be[bt]=ut[bt]}function Ke(Be,ut,bt,Ft,we,ze,Qe){for(var lt=0,vt=0;vt<bt;++vt)for(var wt=0;wt<Ft;++wt)Be[lt++]=ut[we*vt+ze*wt+Qe]}Le[5120]=1,Le[5122]=2,Le[5124]=4,Le[5121]=1,Le[5123]=2,Le[5125]=4,Le[5126]=4;var Je={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},nt=new Float32Array(1),dt=new Uint32Array(nt.buffer);function kt(Be){for(var ut=B.allocType(5123,Be.length),bt=0;bt<Be.length;++bt)if(isNaN(Be[bt]))ut[bt]=65535;else if(Be[bt]===1/0)ut[bt]=31744;else if(Be[bt]===-1/0)ut[bt]=64512;else{nt[0]=Be[bt];var Ft=dt[0],we=Ft>>>31<<15,ze=(Ft<<1>>>24)-127,Qe=Ft>>13&1023;if(ze<-24)ut[bt]=we;else if(ze<-14){var lt=-14-ze;ut[bt]=we+(Qe+1024>>lt)}else ut[bt]=ze>15?we+31744:we+(ze+15<<10)+Qe}return ut}function At(Be){return Array.isArray(Be)||x(Be)}var It=function(Be){return!(Be&Be-1||!Be)},Kt=[9984,9986,9985,9987],Qt=[0,6409,6410,6407,6408],tr={};function nr(Be){return"[object "+Be+"]"}tr[6409]=tr[6406]=tr[6402]=1,tr[34041]=tr[6410]=2,tr[6407]=tr[35904]=3,tr[6408]=tr[35906]=4;var Mr=nr("HTMLCanvasElement"),ar=nr("OffscreenCanvas"),yr=nr("CanvasRenderingContext2D"),mr=nr("ImageBitmap"),Rr=nr("HTMLImageElement"),pr=nr("HTMLVideoElement"),xr=Object.keys(fe).concat([Mr,ar,yr,mr,Rr,pr]),dr=[];dr[5121]=1,dr[5126]=4,dr[36193]=2,dr[5123]=2,dr[5125]=4;var Gr=[];function Lr(Be){return Array.isArray(Be)&&(Be.length===0||typeof Be[0]=="number")}function pn(Be){return!!Array.isArray(Be)&&!(Be.length===0||!At(Be[0]))}function Ur(Be){return Object.prototype.toString.call(Be)}function Nr(Be){return Ur(Be)===Mr}function Dr(Be){return Ur(Be)===ar}function rn(Be){if(!Be)return!1;var ut=Ur(Be);return xr.indexOf(ut)>=0||Lr(Be)||pn(Be)||J(Be)}function Ir(Be){return 0|fe[Object.prototype.toString.call(Be)]}function On(Be,ut){return B.allocType(Be.type===36193?5126:Be.type,ut)}function In(Be,ut){Be.type===36193?(Be.data=kt(ut),B.freeType(ut)):Be.data=ut}function Dn(Be,ut,bt,Ft,we,ze){var Qe;if(Qe=Gr[Be]!==void 0?Gr[Be]:tr[Be]*dr[ut],ze&&(Qe*=6),we){for(var lt=0,vt=bt;vt>=1;)lt+=Qe*vt*vt,vt/=2;return lt}return Qe*bt*Ft}function Rn(Be,ut,bt,Ft,we,ze,Qe){var lt={"don't care":4352,"dont care":4352,nice:4354,fast:4353},vt={repeat:10497,clamp:33071,mirror:33648},wt={nearest:9728,linear:9729},Lt=O({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wt),Wt={none:0,browser:37444},er={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},rr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},sr={};ut.ext_srgb&&(rr.srgb=35904,rr.srgba=35906),ut.oes_texture_float&&(er.float32=er.float=5126),ut.oes_texture_half_float&&(er.float16=er["half float"]=36193),ut.webgl_depth_texture&&(O(rr,{depth:6402,"depth stencil":34041}),O(er,{uint16:5123,uint32:5125,"depth stencil":34042})),ut.webgl_compressed_texture_s3tc&&O(sr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ut.webgl_compressed_texture_atc&&O(sr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ut.webgl_compressed_texture_pvrtc&&O(sr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ut.webgl_compressed_texture_etc1&&(sr["rgb etc1"]=36196);var gr=Array.prototype.slice.call(Be.getParameter(34467));Object.keys(sr).forEach(function(K){var oe=sr[K];gr.indexOf(oe)>=0&&(rr[K]=oe)});var Vr=Object.keys(rr);bt.textureFormats=Vr;var Fr=[];Object.keys(rr).forEach(function(K){var oe=rr[K];Fr[oe]=K});var $r=[];Object.keys(er).forEach(function(K){var oe=er[K];$r[oe]=K});var Kr=[];Object.keys(wt).forEach(function(K){Kr[wt[K]]=K});var jn=[];Object.keys(Lt).forEach(function(K){var oe=Lt[K];jn[oe]=K});var Cn=[];Object.keys(vt).forEach(function(K){Cn[vt[K]]=K});var qn=Vr.reduce(function(K,oe){var pe=rr[oe];return pe===6409||pe===6406||pe===6409||pe===6410||pe===6402||pe===34041||ut.ext_srgb&&(pe===35904||pe===35906)?K[pe]=pe:pe===32855||oe.indexOf("rgba")>=0?K[pe]=6408:K[pe]=6407,K},{});function Qr(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function Mn(K,oe){K.internalformat=oe.internalformat,K.format=oe.format,K.type=oe.type,K.compressed=oe.compressed,K.premultiplyAlpha=oe.premultiplyAlpha,K.flipY=oe.flipY,K.unpackAlignment=oe.unpackAlignment,K.colorSpace=oe.colorSpace,K.width=oe.width,K.height=oe.height,K.channels=oe.channels}function ai(K,oe){if(_(oe)==="object"&&oe){if("premultiplyAlpha"in oe&&(Y.type(oe.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),K.premultiplyAlpha=oe.premultiplyAlpha),"flipY"in oe&&(Y.type(oe.flipY,"boolean","invalid texture flip"),K.flipY=oe.flipY),"alignment"in oe&&(Y.oneOf(oe.alignment,[1,2,4,8],"invalid texture unpack alignment"),K.unpackAlignment=oe.alignment),"colorSpace"in oe&&(Y.parameter(oe.colorSpace,Wt,"invalid colorSpace"),K.colorSpace=Wt[oe.colorSpace]),"type"in oe){var pe=oe.type;Y(ut.oes_texture_float||!(pe==="float"||pe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Y(ut.oes_texture_half_float||!(pe==="half float"||pe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Y(ut.webgl_depth_texture||!(pe==="uint16"||pe==="uint32"||pe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Y.parameter(pe,er,"invalid texture type"),K.type=er[pe]}var be=K.width,De=K.height,Ue=K.channels,ke=!1;"shape"in oe?(Y(Array.isArray(oe.shape)&&oe.shape.length>=2,"shape must be an array"),be=oe.shape[0],De=oe.shape[1],oe.shape.length===3&&(Ue=oe.shape[2],Y(Ue>0&&Ue<=4,"invalid number of channels"),ke=!0),Y(be>=0&&be<=bt.maxTextureSize,"invalid width"),Y(De>=0&&De<=bt.maxTextureSize,"invalid height")):("radius"in oe&&(be=De=oe.radius,Y(be>=0&&be<=bt.maxTextureSize,"invalid radius")),"width"in oe&&(be=oe.width,Y(be>=0&&be<=bt.maxTextureSize,"invalid width")),"height"in oe&&(De=oe.height,Y(De>=0&&De<=bt.maxTextureSize,"invalid height")),"channels"in oe&&(Ue=oe.channels,Y(Ue>0&&Ue<=4,"invalid number of channels"),ke=!0)),K.width=0|be,K.height=0|De,K.channels=0|Ue;var Fe=!1;if("format"in oe){var Ye=oe.format;Y(ut.webgl_depth_texture||!(Ye==="depth"||Ye==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Y.parameter(Ye,rr,"invalid texture format");var Ge=K.internalformat=rr[Ye];K.format=qn[Ge],Ye in er&&("type"in oe||(K.type=er[Ye])),Ye in sr&&(K.compressed=!0),Fe=!0}!ke&&Fe?K.channels=tr[K.format]:ke&&!Fe?K.channels!==Qt[K.format]&&(K.format=K.internalformat=Qt[K.channels]):Fe&&ke&&Y(K.channels===tr[K.format],"number of channels inconsistent with specified format")}}function Sn(K){Be.pixelStorei(37440,K.flipY),Be.pixelStorei(37441,K.premultiplyAlpha),Be.pixelStorei(37443,K.colorSpace),Be.pixelStorei(3317,K.unpackAlignment)}function si(){Qr.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Jr(K,oe){var pe=null;if(rn(oe)?pe=oe:oe&&(Y.type(oe,"object","invalid pixel data type"),ai(K,oe),"x"in oe&&(K.xOffset=0|oe.x),"y"in oe&&(K.yOffset=0|oe.y),rn(oe.data)&&(pe=oe.data)),Y(!K.compressed||pe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),oe.copy){Y(!pe,"can not specify copy and data field for the same texture");var be=we.viewportWidth,De=we.viewportHeight;K.width=K.width||be-K.xOffset,K.height=K.height||De-K.yOffset,K.needsCopy=!0,Y(K.xOffset>=0&&K.xOffset<be&&K.yOffset>=0&&K.yOffset<De&&K.width>0&&K.width<=be&&K.height>0&&K.height<=De,"copy texture read out of bounds")}else if(pe){if(x(pe))K.channels=K.channels||4,K.data=pe,"type"in oe||K.type!==5121||(K.type=Ir(pe));else if(Lr(pe))K.channels=K.channels||4,function(qe,at){var ht=at.length;switch(qe.type){case 5121:case 5123:case 5125:case 5126:var Mt=B.allocType(qe.type,ht);Mt.set(at),qe.data=Mt;break;case 36193:qe.data=kt(at);break;default:Y.raise("unsupported texture type, must specify a typed array")}}(K,pe),K.alignment=1,K.needsFree=!0;else if(J(pe)){var Ue=pe.data;Array.isArray(Ue)||K.type!==5121||(K.type=Ir(Ue));var ke,Fe,Ye,Ge,Xe,et,tt=pe.shape,Ve=pe.stride;tt.length===3?(Ye=tt[2],et=Ve[2]):(Y(tt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ye=1,et=1),ke=tt[0],Fe=tt[1],Ge=Ve[0],Xe=Ve[1],K.alignment=1,K.width=ke,K.height=Fe,K.channels=Ye,K.format=K.internalformat=Qt[Ye],K.needsFree=!0,function(qe,at,ht,Mt,zt,Ut){for(var Xt=qe.width,fr=qe.height,Or=qe.channels,kr=On(qe,Xt*fr*Or),br=0,ur=0;ur<fr;++ur)for(var an=0;an<Xt;++an)for(var sn=0;sn<Or;++sn)kr[br++]=at[ht*an+Mt*ur+zt*sn+Ut];In(qe,kr)}(K,Ue,Ge,Xe,et,pe.offset)}else if(Nr(pe)||Dr(pe)||Ur(pe)===yr)Nr(pe)||Dr(pe)?K.element=pe:K.element=pe.canvas,K.width=K.element.width,K.height=K.element.height,K.channels=4;else if(function(qe){return Ur(qe)===mr}(pe))K.element=pe,K.width=pe.width,K.height=pe.height,K.channels=4;else if(function(qe){return Ur(qe)===Rr}(pe))K.element=pe,K.width=pe.naturalWidth,K.height=pe.naturalHeight,K.channels=4;else if(function(qe){return Ur(qe)===pr}(pe))K.element=pe,K.width=pe.videoWidth,K.height=pe.videoHeight,K.channels=4;else if(pn(pe)){var ot=K.width||pe[0].length,pt=K.height||pe.length,Et=K.channels;Et=At(pe[0][0])?Et||pe[0][0].length:Et||1;for(var mt=ie.shape(pe),xt=1,Ot=0;Ot<mt.length;++Ot)xt*=mt[Ot];var yt=On(K,xt);ie.flatten(pe,mt,"",yt),In(K,yt),K.alignment=1,K.width=ot,K.height=pt,K.channels=Et,K.format=K.internalformat=Qt[Et],K.needsFree=!0}}else K.width=K.width||1,K.height=K.height||1,K.channels=K.channels||4;K.type===5126?Y(bt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):K.type===36193&&Y(bt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function ko(K,oe,pe){var be=K.element,De=K.data,Ue=K.internalformat,ke=K.format,Fe=K.type,Ye=K.width,Ge=K.height;Sn(K),be?Be.texImage2D(oe,pe,ke,ke,Fe,be):K.compressed?Be.compressedTexImage2D(oe,pe,Ue,Ye,Ge,0,De):K.needsCopy?(Ft(),Be.copyTexImage2D(oe,pe,ke,K.xOffset,K.yOffset,Ye,Ge,0)):Be.texImage2D(oe,pe,ke,Ye,Ge,0,ke,Fe,De||null)}function Fi(K,oe,pe,be,De){var Ue=K.element,ke=K.data,Fe=K.internalformat,Ye=K.format,Ge=K.type,Xe=K.width,et=K.height;Sn(K),Ue?Be.texSubImage2D(oe,De,pe,be,Ye,Ge,Ue):K.compressed?Be.compressedTexSubImage2D(oe,De,pe,be,Fe,Xe,et,ke):K.needsCopy?(Ft(),Be.copyTexSubImage2D(oe,De,pe,be,K.xOffset,K.yOffset,Xe,et)):Be.texSubImage2D(oe,De,pe,be,Xe,et,Ye,Ge,ke)}var Qi=[];function nn(){return Qi.pop()||new si}function pi(K){K.needsFree&&B.freeType(K.data),si.call(K),Qi.push(K)}function Ji(){Qr.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Ai(K,oe,pe){var be=K.images[0]=nn();K.mipmask=1,be.width=K.width=oe,be.height=K.height=pe,be.channels=K.channels=4}function Gn(K,oe){var pe=null;if(rn(oe))Mn(pe=K.images[0]=nn(),K),Jr(pe,oe),K.mipmask=1;else if(ai(K,oe),Array.isArray(oe.mipmap))for(var be=oe.mipmap,De=0;De<be.length;++De)Mn(pe=K.images[De]=nn(),K),pe.width>>=De,pe.height>>=De,Jr(pe,be[De]),K.mipmask|=1<<De;else Mn(pe=K.images[0]=nn(),K),Jr(pe,oe),K.mipmask=1;Mn(K,K.images[0]),!K.compressed||K.internalformat!==33776&&K.internalformat!==33777&&K.internalformat!==33778&&K.internalformat!==33779||Y(K.width%4==0&&K.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function zi(K,oe){for(var pe=K.images,be=0;be<pe.length;++be){if(!pe[be])return;ko(pe[be],oe,be)}}var Di=[];function fi(){var K=Di.pop()||new Ji;Qr.call(K),K.mipmask=0;for(var oe=0;oe<16;++oe)K.images[oe]=null;return K}function Ui(K){for(var oe=K.images,pe=0;pe<oe.length;++pe)oe[pe]&&pi(oe[pe]),oe[pe]=null;Di.push(K)}function Ci(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function eo(K,oe){if("min"in oe){var pe=oe.min;Y.parameter(pe,Lt),K.minFilter=Lt[pe],Kt.indexOf(K.minFilter)>=0&&!("faces"in oe)&&(K.genMipmaps=!0)}if("mag"in oe){var be=oe.mag;Y.parameter(be,wt),K.magFilter=wt[be]}var De=K.wrapS,Ue=K.wrapT;if("wrap"in oe){var ke=oe.wrap;typeof ke=="string"?(Y.parameter(ke,vt),De=Ue=vt[ke]):Array.isArray(ke)&&(Y.parameter(ke[0],vt),Y.parameter(ke[1],vt),De=vt[ke[0]],Ue=vt[ke[1]])}else{if("wrapS"in oe){var Fe=oe.wrapS;Y.parameter(Fe,vt),De=vt[Fe]}if("wrapT"in oe){var Ye=oe.wrapT;Y.parameter(Ye,vt),Ue=vt[Ye]}}if(K.wrapS=De,K.wrapT=Ue,"anisotropic"in oe){var Ge=oe.anisotropic;Y(typeof Ge=="number"&&Ge>=1&&Ge<=bt.maxAnisotropic,"aniso samples must be between 1 and "),K.anisotropic=oe.anisotropic}if("mipmap"in oe){var Xe=!1;switch(_(oe.mipmap)){case"string":Y.parameter(oe.mipmap,lt,"invalid mipmap hint"),K.mipmapHint=lt[oe.mipmap],K.genMipmaps=!0,Xe=!0;break;case"boolean":Xe=K.genMipmaps=oe.mipmap;break;case"object":Y(Array.isArray(oe.mipmap),"invalid mipmap type"),K.genMipmaps=!1,Xe=!0;break;default:Y.raise("invalid mipmap type")}Xe&&!("min"in oe)&&(K.minFilter=9984)}}function so(K,oe){Be.texParameteri(oe,10241,K.minFilter),Be.texParameteri(oe,10240,K.magFilter),Be.texParameteri(oe,10242,K.wrapS),Be.texParameteri(oe,10243,K.wrapT),ut.ext_texture_filter_anisotropic&&Be.texParameteri(oe,34046,K.anisotropic),K.genMipmaps&&(Be.hint(33170,K.mipmapHint),Be.generateMipmap(oe))}var Vi=0,Ti={},_t=bt.maxTextureUnits,$e=Array(_t).map(function(){return null});function St(K){Qr.call(this),this.mipmask=0,this.internalformat=6408,this.id=Vi++,this.refCount=1,this.target=K,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ci,Qe.profile&&(this.stats={size:0})}function w(K){Be.activeTexture(33984),Be.bindTexture(K.target,K.texture)}function D(){var K=$e[0];K?Be.bindTexture(K.target,K.texture):Be.bindTexture(3553,null)}function ce(K){var oe=K.texture;Y(oe,"must not double destroy texture");var pe=K.unit,be=K.target;pe>=0&&(Be.activeTexture(33984+pe),Be.bindTexture(be,null),$e[pe]=null),Be.deleteTexture(oe),K.texture=null,K.params=null,K.pixels=null,K.refCount=0,delete Ti[K.id],ze.textureCount--}return O(St.prototype,{bind:function(){this.bindCount+=1;var K=this.unit;if(K<0){for(var oe=0;oe<_t;++oe){var pe=$e[oe];if(pe){if(pe.bindCount>0)continue;pe.unit=-1}$e[oe]=this,K=oe;break}K>=_t&&Y.raise("insufficient number of texture units"),Qe.profile&&ze.maxTextureUnits<K+1&&(ze.maxTextureUnits=K+1),this.unit=K,Be.activeTexture(33984+K),Be.bindTexture(this.target,this.texture)}return K},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ce(this)}}),Qe.profile&&(ze.getTotalTextureSize=function(){var K=0;return Object.keys(Ti).forEach(function(oe){K+=Ti[oe].stats.size}),K}),{create2D:function(K,oe){var pe=new St(3553);function be(De,Ue){var ke=pe.texInfo;Ci.call(ke);var Fe=fi();return typeof De=="number"?Ai(Fe,0|De,typeof Ue=="number"?0|Ue:0|De):De?(Y.type(De,"object","invalid arguments to regl.texture"),eo(ke,De),Gn(Fe,De)):Ai(Fe,1,1),ke.genMipmaps&&(Fe.mipmask=(Fe.width<<1)-1),pe.mipmask=Fe.mipmask,Mn(pe,Fe),Y.texture2D(ke,Fe,bt),pe.internalformat=Fe.internalformat,be.width=Fe.width,be.height=Fe.height,w(pe),zi(Fe,3553),so(ke,3553),D(),Ui(Fe),Qe.profile&&(pe.stats.size=Dn(pe.internalformat,pe.type,Fe.width,Fe.height,ke.genMipmaps,!1)),be.format=Fr[pe.internalformat],be.type=$r[pe.type],be.mag=Kr[ke.magFilter],be.min=jn[ke.minFilter],be.wrapS=Cn[ke.wrapS],be.wrapT=Cn[ke.wrapT],be}return Ti[pe.id]=pe,ze.textureCount++,be(K,oe),be.subimage=function(De,Ue,ke,Fe){Y(!!De,"must specify image data");var Ye=0|Ue,Ge=0|ke,Xe=0|Fe,et=nn();return Mn(et,pe),et.width=0,et.height=0,Jr(et,De),et.width=et.width||(pe.width>>Xe)-Ye,et.height=et.height||(pe.height>>Xe)-Ge,Y(pe.type===et.type&&pe.format===et.format&&pe.internalformat===et.internalformat,"incompatible format for texture.subimage"),Y(Ye>=0&&Ge>=0&&Ye+et.width<=pe.width&&Ge+et.height<=pe.height,"texture.subimage write out of bounds"),Y(pe.mipmask&1<<Xe,"missing mipmap data"),Y(et.data||et.element||et.needsCopy,"missing image data"),w(pe),Fi(et,3553,Ye,Ge,Xe),D(),pi(et),be},be.resize=function(De,Ue){var ke=0|De,Fe=0|Ue||ke;if(ke===pe.width&&Fe===pe.height)return be;be.width=pe.width=ke,be.height=pe.height=Fe,w(pe);for(var Ye=0;pe.mipmask>>Ye;++Ye){var Ge=ke>>Ye,Xe=Fe>>Ye;if(!Ge||!Xe)break;Be.texImage2D(3553,Ye,pe.format,Ge,Xe,0,pe.format,pe.type,null)}return D(),Qe.profile&&(pe.stats.size=Dn(pe.internalformat,pe.type,ke,Fe,!1,!1)),be},be._reglType="texture2d",be._texture=pe,Qe.profile&&(be.stats=pe.stats),be.destroy=function(){pe.decRef()},be},createCube:function(K,oe,pe,be,De,Ue){var ke=new St(34067);Ti[ke.id]=ke,ze.cubeCount++;var Fe=new Array(6);function Ye(Ge,Xe,et,tt,Ve,ot){var pt,Et=ke.texInfo;for(Ci.call(Et),pt=0;pt<6;++pt)Fe[pt]=fi();if(typeof Ge!="number"&&Ge)if(_(Ge)==="object")if(Xe)Gn(Fe[0],Ge),Gn(Fe[1],Xe),Gn(Fe[2],et),Gn(Fe[3],tt),Gn(Fe[4],Ve),Gn(Fe[5],ot);else if(eo(Et,Ge),ai(ke,Ge),"faces"in Ge){var mt=Ge.faces;for(Y(Array.isArray(mt)&&mt.length===6,"cube faces must be a length 6 array"),pt=0;pt<6;++pt)Y(_(mt[pt])==="object"&&!!mt[pt],"invalid input for cube map face"),Mn(Fe[pt],ke),Gn(Fe[pt],mt[pt])}else for(pt=0;pt<6;++pt)Gn(Fe[pt],Ge);else Y.raise("invalid arguments to cube map");else{var xt=0|Ge||1;for(pt=0;pt<6;++pt)Ai(Fe[pt],xt,xt)}for(Mn(ke,Fe[0]),bt.npotTextureCube||Y(It(ke.width)&&It(ke.height),"your browser does not support non power or two texture dimensions"),Et.genMipmaps?ke.mipmask=(Fe[0].width<<1)-1:ke.mipmask=Fe[0].mipmask,Y.textureCube(ke,Et,Fe,bt),ke.internalformat=Fe[0].internalformat,Ye.width=Fe[0].width,Ye.height=Fe[0].height,w(ke),pt=0;pt<6;++pt)zi(Fe[pt],34069+pt);for(so(Et,34067),D(),Qe.profile&&(ke.stats.size=Dn(ke.internalformat,ke.type,Ye.width,Ye.height,Et.genMipmaps,!0)),Ye.format=Fr[ke.internalformat],Ye.type=$r[ke.type],Ye.mag=Kr[Et.magFilter],Ye.min=jn[Et.minFilter],Ye.wrapS=Cn[Et.wrapS],Ye.wrapT=Cn[Et.wrapT],pt=0;pt<6;++pt)Ui(Fe[pt]);return Ye}return Ye(K,oe,pe,be,De,Ue),Ye.subimage=function(Ge,Xe,et,tt,Ve){Y(!!Xe,"must specify image data"),Y(typeof Ge=="number"&&Ge===(0|Ge)&&Ge>=0&&Ge<6,"invalid face");var ot=0|et,pt=0|tt,Et=0|Ve,mt=nn();return Mn(mt,ke),mt.width=0,mt.height=0,Jr(mt,Xe),mt.width=mt.width||(ke.width>>Et)-ot,mt.height=mt.height||(ke.height>>Et)-pt,Y(ke.type===mt.type&&ke.format===mt.format&&ke.internalformat===mt.internalformat,"incompatible format for texture.subimage"),Y(ot>=0&&pt>=0&&ot+mt.width<=ke.width&&pt+mt.height<=ke.height,"texture.subimage write out of bounds"),Y(ke.mipmask&1<<Et,"missing mipmap data"),Y(mt.data||mt.element||mt.needsCopy,"missing image data"),w(ke),Fi(mt,34069+Ge,ot,pt,Et),D(),pi(mt),Ye},Ye.resize=function(Ge){var Xe=0|Ge;if(Xe!==ke.width){Ye.width=ke.width=Xe,Ye.height=ke.height=Xe,w(ke);for(var et=0;et<6;++et)for(var tt=0;ke.mipmask>>tt;++tt)Be.texImage2D(34069+et,tt,ke.format,Xe>>tt,Xe>>tt,0,ke.format,ke.type,null);return D(),Qe.profile&&(ke.stats.size=Dn(ke.internalformat,ke.type,Ye.width,Ye.height,!1,!0)),Ye}},Ye._reglType="textureCube",Ye._texture=ke,Qe.profile&&(Ye.stats=ke.stats),Ye.destroy=function(){ke.decRef()},Ye},clear:function(){for(var K=0;K<_t;++K)Be.activeTexture(33984+K),Be.bindTexture(3553,null),$e[K]=null;ne(Ti).forEach(ce),ze.cubeCount=0,ze.textureCount=0},getTexture:function(K){return null},restore:function(){for(var K=0;K<_t;++K){var oe=$e[K];oe&&(oe.bindCount=0,oe.unit=-1,$e[K]=null)}ne(Ti).forEach(function(pe){pe.texture=Be.createTexture(),Be.bindTexture(pe.target,pe.texture);for(var be=0;be<32;++be)if((pe.mipmask&1<<be)!=0)if(pe.target===3553)Be.texImage2D(3553,be,pe.internalformat,pe.width>>be,pe.height>>be,0,pe.internalformat,pe.type,null);else for(var De=0;De<6;++De)Be.texImage2D(34069+De,be,pe.internalformat,pe.width>>be,pe.height>>be,0,pe.internalformat,pe.type,null);so(pe.texInfo,pe.target)})},refresh:function(){for(var K=0;K<_t;++K){var oe=$e[K];oe&&(oe.bindCount=0,oe.unit=-1,$e[K]=null),Be.activeTexture(33984+K),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}Gr[32854]=2,Gr[32855]=2,Gr[36194]=2,Gr[34041]=4,Gr[33776]=.5,Gr[33777]=.5,Gr[33778]=1,Gr[33779]=1,Gr[35986]=.5,Gr[35987]=1,Gr[34798]=1,Gr[35840]=.5,Gr[35841]=.25,Gr[35842]=.5,Gr[35843]=.25,Gr[36196]=.5;var gn=[];function Er(Be,ut,bt){return gn[Be]*ut*bt}gn[32854]=2,gn[32855]=2,gn[36194]=2,gn[33189]=2,gn[36168]=1,gn[34041]=4,gn[35907]=4,gn[34836]=16,gn[34842]=8,gn[34843]=6;var ln=[6407,6408],yn=[];yn[6408]=4,yn[6407]=3;var mn=[];mn[5121]=1,mn[5126]=4,mn[36193]=2;var Qn=[32854,32855,36194,35907,34842,34843,34836],Un={};function ri(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Oi(Be,ut,bt,Ft,we,ze,Qe){function lt(vt){var wt;ut.next===null?(Y(we.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),wt=5121):(Y(ut.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),wt=ut.next.colorAttachments[0].texture._texture.type,ze.oes_texture_float?(Y(wt===5121||wt===5126,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),wt===5126&&Y(Qe.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Y(wt===5121,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Lt=0,Wt=0,er=Ft.framebufferWidth,rr=Ft.framebufferHeight,sr=null;x(vt)?sr=vt:vt&&(Y.type(vt,"object","invalid arguments to regl.read()"),Lt=0|vt.x,Wt=0|vt.y,Y(Lt>=0&&Lt<Ft.framebufferWidth,"invalid x offset for regl.read"),Y(Wt>=0&&Wt<Ft.framebufferHeight,"invalid y offset for regl.read"),er=0|(vt.width||Ft.framebufferWidth-Lt),rr=0|(vt.height||Ft.framebufferHeight-Wt),sr=vt.data||null),sr&&(wt===5121?Y(sr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):wt===5126&&Y(sr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Y(er>0&&er+Lt<=Ft.framebufferWidth,"invalid width for read pixels"),Y(rr>0&&rr+Wt<=Ft.framebufferHeight,"invalid height for read pixels"),bt();var gr=er*rr*4;return sr||(wt===5121?sr=new Uint8Array(gr):wt===5126&&(sr=sr||new Float32Array(gr))),Y.isTypedArray(sr,"data buffer for regl.read() must be a typedarray"),Y(sr.byteLength>=gr,"data buffer for regl.read() too small"),Be.pixelStorei(3333,4),Be.readPixels(Lt,Wt,er,rr,6408,wt,sr),sr}return function(vt){return vt&&"framebuffer"in vt?function(wt){var Lt;return ut.setFBO({framebuffer:wt.framebuffer},function(){Lt=lt(wt)}),Lt}(vt):lt(vt)}}function ni(Be){return Array.prototype.slice.call(Be)}function Bn(Be){return ni(Be).join("")}Un[36053]="complete",Un[36054]="incomplete attachment",Un[36057]="incomplete dimensions",Un[36055]="incomplete, missing attachment",Un[36061]="unsupported";var wi="xyzw".split(""),Mi="profile",Wn="framebuffer",ii="vert",Jn="frag",hi="elements",Vn="primitive",oi="count",di="offset",_i="instances",Xn="vao",Yn=Wn+"Width",ki=Wn+"Height",Gi=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Hn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},oo=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ci={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},li={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ao={frag:35632,vert:35633},Zi={cw:2304,ccw:2305};function $i(Be){return Array.isArray(Be)||x(Be)||J(Be)}function vo(Be){return Be.sort(function(ut,bt){return ut==="viewport"?-1:bt==="viewport"?1:ut<bt?-1:1})}function ir(Be,ut,bt,Ft){this.thisDep=Be,this.contextDep=ut,this.propDep=bt,this.append=Ft}function We(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function Ne(Be){return new ir(!1,!1,!1,Be)}function He(Be,ut){var bt=Be.type;if(bt===0){var Ft=Be.data.length;return new ir(!0,Ft>=1,Ft>=2,ut)}if(bt===4){var we=Be.data;return new ir(we.thisDep,we.contextDep,we.propDep,ut)}if(bt===5)return new ir(!1,!1,!1,ut);if(bt===6){for(var ze=!1,Qe=!1,lt=!1,vt=0;vt<Be.data.length;++vt){var wt=Be.data[vt];if(wt.type===1)lt=!0;else if(wt.type===2)Qe=!0;else if(wt.type===3)ze=!0;else if(wt.type===0){ze=!0;var Lt=wt.data;Lt>=1&&(Qe=!0),Lt>=2&&(lt=!0)}else wt.type===4&&(ze=ze||wt.data.thisDep,Qe=Qe||wt.data.contextDep,lt=lt||wt.data.propDep)}return new ir(ze,Qe,lt,ut)}return new ir(bt===3,bt===2,bt===1,ut)}var ft=new ir(!1,!1,!1,function(){});function Tt(Be,ut,bt,Ft,we,ze,Qe,lt,vt,wt,Lt,Wt,er,rr,sr){var gr=wt.Record,Vr={add:32774,subtract:32778,"reverse subtract":32779};bt.ext_blend_minmax&&(Vr.min=32775,Vr.max=32776);var Fr=bt.angle_instanced_arrays,$r=bt.webgl_draw_buffers,Kr={dirty:!0,profile:sr.profile},jn={},Cn=[],qn={},Qr={};function Mn(_t){return _t.replace(".","_")}function ai(_t,$e,St){var w=Mn(_t);Cn.push(_t),jn[w]=Kr[w]=!!St,qn[w]=$e}function Sn(_t,$e,St){var w=Mn(_t);Cn.push(_t),Array.isArray(St)?(Kr[w]=St.slice(),jn[w]=St.slice()):Kr[w]=jn[w]=St,Qr[w]=$e}ai("dither",3024),ai("blend.enable",3042),Sn("blend.color","blendColor",[0,0,0,0]),Sn("blend.equation","blendEquationSeparate",[32774,32774]),Sn("blend.func","blendFuncSeparate",[1,0,1,0]),ai("depth.enable",2929,!0),Sn("depth.func","depthFunc",513),Sn("depth.range","depthRange",[0,1]),Sn("depth.mask","depthMask",!0),Sn("colorMask","colorMask",[!0,!0,!0,!0]),ai("cull.enable",2884),Sn("cull.face","cullFace",1029),Sn("frontFace","frontFace",2305),Sn("lineWidth","lineWidth",1),ai("polygonOffset.enable",32823),Sn("polygonOffset.offset","polygonOffset",[0,0]),ai("sample.alpha",32926),ai("sample.enable",32928),Sn("sample.coverage","sampleCoverage",[1,!1]),ai("stencil.enable",2960),Sn("stencil.mask","stencilMask",-1),Sn("stencil.func","stencilFunc",[519,0,-1]),Sn("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Sn("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),ai("scissor.enable",3089),Sn("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),Sn("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var si={gl:Be,context:er,strings:ut,next:jn,current:Kr,draw:Wt,elements:ze,buffer:we,shader:Lt,attributes:wt.state,vao:wt,uniforms:vt,framebuffer:lt,extensions:bt,timer:rr,isBufferArgs:$i},Jr={primTypes:Je,compareFuncs:ci,blendFuncs:Hn,blendEquations:Vr,stencilOps:li,glTypes:_e,orientationType:Zi};Y.optional(function(){si.isArrayLike=At}),$r&&(Jr.backBuffer=[1029],Jr.drawBuffer=te(Ft.maxDrawbuffers,function(_t){return _t===0?[0]:te(_t,function($e){return 36064+$e})}));var ko=0;function Fi(){var _t=function(){var be=0,De=[],Ue=[];function ke(){var Xe=[],et=[];return O(function(){Xe.push.apply(Xe,ni(arguments))},{def:function(){var tt="v"+be++;return et.push(tt),arguments.length>0&&(Xe.push(tt,"="),Xe.push.apply(Xe,ni(arguments)),Xe.push(";")),tt},toString:function(){return Bn([et.length>0?"var "+et.join(",")+";":"",Bn(Xe)])}})}function Fe(){var Xe=ke(),et=ke(),tt=Xe.toString,Ve=et.toString;function ot(pt,Et){et(pt,Et,"=",Xe.def(pt,Et),";")}return O(function(){Xe.apply(Xe,ni(arguments))},{def:Xe.def,entry:Xe,exit:et,save:ot,set:function(pt,Et,mt){ot(pt,Et),Xe(pt,Et,"=",mt,";")},toString:function(){return tt()+Ve()}})}var Ye=ke(),Ge={};return{global:Ye,link:function(Xe){for(var et=0;et<Ue.length;++et)if(Ue[et]===Xe)return De[et];var tt="g"+be++;return De.push(tt),Ue.push(Xe),tt},block:ke,proc:function(Xe,et){var tt=[];function Ve(){var mt="a"+tt.length;return tt.push(mt),mt}et=et||0;for(var ot=0;ot<et;++ot)Ve();var pt=Fe(),Et=pt.toString;return Ge[Xe]=O(pt,{arg:Ve,toString:function(){return Bn(["function(",tt.join(),"){",Et(),"}"])}})},scope:Fe,cond:function(){var Xe=Bn(arguments),et=Fe(),tt=Fe(),Ve=et.toString,ot=tt.toString;return O(et,{then:function(){return et.apply(et,ni(arguments)),this},else:function(){return tt.apply(tt,ni(arguments)),this},toString:function(){var pt=ot();return pt&&(pt="else{"+pt+"}"),Bn(["if(",Xe,"){",Ve(),"}",pt])}})},compile:function(){var Xe=['"use strict";',Ye,"return {"];Object.keys(Ge).forEach(function(tt){Xe.push('"',tt,'":',Ge[tt].toString(),",")}),Xe.push("}");var et=Bn(Xe).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,De.concat(et)).apply(null,Ue)}}}(),$e=_t.link,St=_t.global;_t.id=ko++,_t.batchId="0";var w=$e(si),D=_t.shared={props:"a0"};Object.keys(si).forEach(function(be){D[be]=St.def(w,".",be)}),Y.optional(function(){_t.CHECK=$e(Y),_t.commandStr=Y.guessCommand(),_t.command=$e(_t.commandStr),_t.assert=function(be,De,Ue){be("if(!(",De,"))",this.CHECK,".commandRaise(",$e(Ue),",",this.command,");")},Jr.invalidBlendCombinations=oo});var ce=_t.next={},K=_t.current={};Object.keys(Qr).forEach(function(be){Array.isArray(Kr[be])&&(ce[be]=St.def(D.next,".",be),K[be]=St.def(D.current,".",be))});var oe=_t.constants={};Object.keys(Jr).forEach(function(be){oe[be]=St.def(JSON.stringify(Jr[be]))}),_t.invoke=function(be,De){switch(De.type){case 0:var Ue=["this",D.context,D.props,_t.batchId];return be.def($e(De.data),".call(",Ue.slice(0,Math.max(De.data.length+1,4)),")");case 1:return be.def(D.props,De.data);case 2:return be.def(D.context,De.data);case 3:return be.def("this",De.data);case 4:return De.data.append(_t,be),De.data.ref;case 5:return De.data.toString();case 6:return De.data.map(function(ke){return _t.invoke(be,ke)})}},_t.attribCache={};var pe={};return _t.scopeAttrib=function(be){var De=ut.id(be);if(De in pe)return pe[De];var Ue=wt.scope[De];return Ue||(Ue=wt.scope[De]=new gr),pe[De]=$e(Ue)},_t}function Qi(_t,$e,St,w,D){var ce=_t.static,K=_t.dynamic;Y.optional(function(){var Ve=[Wn,ii,Jn,hi,Vn,di,oi,_i,Mi,Xn].concat(Cn);function ot(pt){Object.keys(pt).forEach(function(Et){Y.command(Ve.indexOf(Et)>=0,'unknown parameter "'+Et+'"',D.commandStr)})}ot(ce),ot(K)});var oe=function(Ve,ot){var pt=Ve.static;if(typeof pt[Jn]=="string"&&typeof pt[ii]=="string"){if(Object.keys(ot.dynamic).length>0)return null;var Et=ot.static,mt=Object.keys(Et);if(mt.length>0&&typeof Et[mt[0]]=="number"){for(var xt=[],Ot=0;Ot<mt.length;++Ot)Y(typeof Et[mt[Ot]]=="number","must specify all vertex attribute locations when using vaos"),xt.push([0|Et[mt[Ot]],mt[Ot]]);return xt}}return null}(_t,$e),pe=function(Ve,ot){var pt=Ve.static,Et=Ve.dynamic;if(Wn in pt){var mt=pt[Wn];return mt?(mt=lt.getFramebuffer(mt),Y.command(mt,"invalid framebuffer object"),Ne(function(Ot,yt){var qe=Ot.link(mt),at=Ot.shared;yt.set(at.framebuffer,".next",qe);var ht=at.context;return yt.set(ht,"."+Yn,qe+".width"),yt.set(ht,"."+ki,qe+".height"),qe})):Ne(function(Ot,yt){var qe=Ot.shared;yt.set(qe.framebuffer,".next","null");var at=qe.context;return yt.set(at,"."+Yn,at+".drawingBufferWidth"),yt.set(at,"."+ki,at+".drawingBufferHeight"),"null"})}if(Wn in Et){var xt=Et[Wn];return He(xt,function(Ot,yt){var qe=Ot.invoke(yt,xt),at=Ot.shared,ht=at.framebuffer,Mt=yt.def(ht,".getFramebuffer(",qe,")");Y.optional(function(){Ot.assert(yt,"!"+qe+"||"+Mt,"invalid framebuffer object")}),yt.set(ht,".next",Mt);var zt=at.context;return yt.set(zt,"."+Yn,Mt+"?"+Mt+".width:"+zt+".drawingBufferWidth"),yt.set(zt,"."+ki,Mt+"?"+Mt+".height:"+zt+".drawingBufferHeight"),Mt})}return null}(_t),be=function(Ve,ot,pt){var Et=Ve.static,mt=Ve.dynamic;function xt(qe){if(qe in Et){var at=Et[qe];Y.commandType(at,"object","invalid "+qe,pt.commandStr);var ht,Mt,zt=!0,Ut=0|at.x,Xt=0|at.y;return"width"in at?(ht=0|at.width,Y.command(ht>=0,"invalid "+qe,pt.commandStr)):zt=!1,"height"in at?(Mt=0|at.height,Y.command(Mt>=0,"invalid "+qe,pt.commandStr)):zt=!1,new ir(!zt&&ot&&ot.thisDep,!zt&&ot&&ot.contextDep,!zt&&ot&&ot.propDep,function(kr,br){var ur=kr.shared.context,an=ht;"width"in at||(an=br.def(ur,".",Yn,"-",Ut));var sn=Mt;return"height"in at||(sn=br.def(ur,".",ki,"-",Xt)),[Ut,Xt,an,sn]})}if(qe in mt){var fr=mt[qe],Or=He(fr,function(kr,br){var ur=kr.invoke(br,fr);Y.optional(function(){kr.assert(br,ur+"&&typeof "+ur+'==="object"',"invalid "+qe)});var an=kr.shared.context,sn=br.def(ur,".x|0"),Ii=br.def(ur,".y|0"),Wi=br.def('"width" in ',ur,"?",ur,".width|0:","(",an,".",Yn,"-",sn,")"),fo=br.def('"height" in ',ur,"?",ur,".height|0:","(",an,".",ki,"-",Ii,")");return Y.optional(function(){kr.assert(br,Wi+">=0&&"+fo+">=0","invalid "+qe)}),[sn,Ii,Wi,fo]});return ot&&(Or.thisDep=Or.thisDep||ot.thisDep,Or.contextDep=Or.contextDep||ot.contextDep,Or.propDep=Or.propDep||ot.propDep),Or}return ot?new ir(ot.thisDep,ot.contextDep,ot.propDep,function(kr,br){var ur=kr.shared.context;return[0,0,br.def(ur,".",Yn),br.def(ur,".",ki)]}):null}var Ot=xt("viewport");if(Ot){var yt=Ot;Ot=new ir(Ot.thisDep,Ot.contextDep,Ot.propDep,function(qe,at){var ht=yt.append(qe,at),Mt=qe.shared.context;return at.set(Mt,".viewportWidth",ht[2]),at.set(Mt,".viewportHeight",ht[3]),ht})}return{viewport:Ot,scissor_box:xt("scissor.box")}}(_t,pe,D),De=function(Ve,ot){var pt=Ve.static,Et=Ve.dynamic,mt=function(){if(hi in pt){var yt=pt[hi];$i(yt)?yt=ze.getElements(ze.create(yt,!0)):yt&&(yt=ze.getElements(yt),Y.command(yt,"invalid elements",ot.commandStr));var qe=Ne(function(ht,Mt){if(yt){var zt=ht.link(yt);return ht.ELEMENTS=zt,zt}return ht.ELEMENTS=null,null});return qe.value=yt,qe}if(hi in Et){var at=Et[hi];return He(at,function(ht,Mt){var zt=ht.shared,Ut=zt.isBufferArgs,Xt=zt.elements,fr=ht.invoke(Mt,at),Or=Mt.def("null"),kr=Mt.def(Ut,"(",fr,")"),br=ht.cond(kr).then(Or,"=",Xt,".createStream(",fr,");").else(Or,"=",Xt,".getElements(",fr,");");return Y.optional(function(){ht.assert(br.else,"!"+fr+"||"+Or,"invalid elements")}),Mt.entry(br),Mt.exit(ht.cond(kr).then(Xt,".destroyStream(",Or,");")),ht.ELEMENTS=Or,Or})}return null}();function xt(yt,qe){if(yt in pt){var at=0|pt[yt];return Y.command(!qe||at>=0,"invalid "+yt,ot.commandStr),Ne(function(Mt,zt){return qe&&(Mt.OFFSET=at),at})}if(yt in Et){var ht=Et[yt];return He(ht,function(Mt,zt){var Ut=Mt.invoke(zt,ht);return qe&&(Mt.OFFSET=Ut,Y.optional(function(){Mt.assert(zt,Ut+">=0","invalid "+yt)})),Ut})}return qe&&mt?Ne(function(Mt,zt){return Mt.OFFSET="0",0}):null}var Ot=xt(di,!0);return{elements:mt,primitive:function(){if(Vn in pt){var yt=pt[Vn];return Y.commandParameter(yt,Je,"invalid primitve",ot.commandStr),Ne(function(at,ht){return Je[yt]})}if(Vn in Et){var qe=Et[Vn];return He(qe,function(at,ht){var Mt=at.constants.primTypes,zt=at.invoke(ht,qe);return Y.optional(function(){at.assert(ht,zt+" in "+Mt,"invalid primitive, must be one of "+Object.keys(Je))}),ht.def(Mt,"[",zt,"]")})}return mt?We(mt)?mt.value?Ne(function(at,ht){return ht.def(at.ELEMENTS,".primType")}):Ne(function(){return 4}):new ir(mt.thisDep,mt.contextDep,mt.propDep,function(at,ht){var Mt=at.ELEMENTS;return ht.def(Mt,"?",Mt,".primType:",4)}):null}(),count:function(){if(oi in pt){var yt=0|pt[oi];return Y.command(typeof yt=="number"&&yt>=0,"invalid vertex count",ot.commandStr),Ne(function(){return yt})}if(oi in Et){var qe=Et[oi];return He(qe,function(Mt,zt){var Ut=Mt.invoke(zt,qe);return Y.optional(function(){Mt.assert(zt,"typeof "+Ut+'==="number"&&'+Ut+">=0&&"+Ut+"===("+Ut+"|0)","invalid vertex count")}),Ut})}if(mt){if(We(mt)){if(mt)return Ot?new ir(Ot.thisDep,Ot.contextDep,Ot.propDep,function(Mt,zt){var Ut=zt.def(Mt.ELEMENTS,".vertCount-",Mt.OFFSET);return Y.optional(function(){Mt.assert(zt,Ut+">=0","invalid vertex offset/element buffer too small")}),Ut}):Ne(function(Mt,zt){return zt.def(Mt.ELEMENTS,".vertCount")});var at=Ne(function(){return-1});return Y.optional(function(){at.MISSING=!0}),at}var ht=new ir(mt.thisDep||Ot.thisDep,mt.contextDep||Ot.contextDep,mt.propDep||Ot.propDep,function(Mt,zt){var Ut=Mt.ELEMENTS;return Mt.OFFSET?zt.def(Ut,"?",Ut,".vertCount-",Mt.OFFSET,":-1"):zt.def(Ut,"?",Ut,".vertCount:-1")});return Y.optional(function(){ht.DYNAMIC=!0}),ht}return null}(),instances:xt(_i,!1),offset:Ot}}(_t,D),Ue=function(Ve,ot){var pt=Ve.static,Et=Ve.dynamic,mt={};return Cn.forEach(function(xt){var Ot=Mn(xt);function yt(qe,at){if(xt in pt){var ht=qe(pt[xt]);mt[Ot]=Ne(function(){return ht})}else if(xt in Et){var Mt=Et[xt];mt[Ot]=He(Mt,function(zt,Ut){return at(zt,Ut,zt.invoke(Ut,Mt))})}}switch(xt){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return yt(function(qe){return Y.commandType(qe,"boolean",xt,ot.commandStr),qe},function(qe,at,ht){return Y.optional(function(){qe.assert(at,"typeof "+ht+'==="boolean"',"invalid flag "+xt,qe.commandStr)}),ht});case"depth.func":return yt(function(qe){return Y.commandParameter(qe,ci,"invalid "+xt,ot.commandStr),ci[qe]},function(qe,at,ht){var Mt=qe.constants.compareFuncs;return Y.optional(function(){qe.assert(at,ht+" in "+Mt,"invalid "+xt+", must be one of "+Object.keys(ci))}),at.def(Mt,"[",ht,"]")});case"depth.range":return yt(function(qe){return Y.command(At(qe)&&qe.length===2&&typeof qe[0]=="number"&&typeof qe[1]=="number"&&qe[0]<=qe[1],"depth range is 2d array",ot.commandStr),qe},function(qe,at,ht){return Y.optional(function(){qe.assert(at,qe.shared.isArrayLike+"("+ht+")&&"+ht+".length===2&&typeof "+ht+'[0]==="number"&&typeof '+ht+'[1]==="number"&&'+ht+"[0]<="+ht+"[1]","depth range must be a 2d array")}),[at.def("+",ht,"[0]"),at.def("+",ht,"[1]")]});case"blend.func":return yt(function(qe){Y.commandType(qe,"object","blend.func",ot.commandStr);var at="srcRGB"in qe?qe.srcRGB:qe.src,ht="srcAlpha"in qe?qe.srcAlpha:qe.src,Mt="dstRGB"in qe?qe.dstRGB:qe.dst,zt="dstAlpha"in qe?qe.dstAlpha:qe.dst;return Y.commandParameter(at,Hn,Ot+".srcRGB",ot.commandStr),Y.commandParameter(ht,Hn,Ot+".srcAlpha",ot.commandStr),Y.commandParameter(Mt,Hn,Ot+".dstRGB",ot.commandStr),Y.commandParameter(zt,Hn,Ot+".dstAlpha",ot.commandStr),Y.command(oo.indexOf(at+", "+Mt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+at+", "+Mt+")",ot.commandStr),[Hn[at],Hn[Mt],Hn[ht],Hn[zt]]},function(qe,at,ht){var Mt=qe.constants.blendFuncs;function zt(kr,br){var ur=at.def('"',kr,br,'" in ',ht,"?",ht,".",kr,br,":",ht,".",kr);return Y.optional(function(){qe.assert(at,ur+" in "+Mt,"invalid "+xt+"."+kr+br+", must be one of "+Object.keys(Hn))}),ur}Y.optional(function(){qe.assert(at,ht+"&&typeof "+ht+'==="object"',"invalid blend func, must be an object")});var Ut=zt("src","RGB"),Xt=zt("dst","RGB");Y.optional(function(){var kr=qe.constants.invalidBlendCombinations;qe.assert(at,kr+".indexOf("+Ut+'+", "+'+Xt+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var fr=at.def(Mt,"[",Ut,"]"),Or=at.def(Mt,"[",zt("src","Alpha"),"]");return[fr,at.def(Mt,"[",Xt,"]"),Or,at.def(Mt,"[",zt("dst","Alpha"),"]")]});case"blend.equation":return yt(function(qe){return typeof qe=="string"?(Y.commandParameter(qe,Vr,"invalid "+xt,ot.commandStr),[Vr[qe],Vr[qe]]):_(qe)==="object"?(Y.commandParameter(qe.rgb,Vr,xt+".rgb",ot.commandStr),Y.commandParameter(qe.alpha,Vr,xt+".alpha",ot.commandStr),[Vr[qe.rgb],Vr[qe.alpha]]):void Y.commandRaise("invalid blend.equation",ot.commandStr)},function(qe,at,ht){var Mt=qe.constants.blendEquations,zt=at.def(),Ut=at.def(),Xt=qe.cond("typeof ",ht,'==="string"');return Y.optional(function(){function fr(Or,kr,br){qe.assert(Or,br+" in "+Mt,"invalid "+kr+", must be one of "+Object.keys(Vr))}fr(Xt.then,xt,ht),qe.assert(Xt.else,ht+"&&typeof "+ht+'==="object"',"invalid "+xt),fr(Xt.else,xt+".rgb",ht+".rgb"),fr(Xt.else,xt+".alpha",ht+".alpha")}),Xt.then(zt,"=",Ut,"=",Mt,"[",ht,"];"),Xt.else(zt,"=",Mt,"[",ht,".rgb];",Ut,"=",Mt,"[",ht,".alpha];"),at(Xt),[zt,Ut]});case"blend.color":return yt(function(qe){return Y.command(At(qe)&&qe.length===4,"blend.color must be a 4d array",ot.commandStr),te(4,function(at){return+qe[at]})},function(qe,at,ht){return Y.optional(function(){qe.assert(at,qe.shared.isArrayLike+"("+ht+")&&"+ht+".length===4","blend.color must be a 4d array")}),te(4,function(Mt){return at.def("+",ht,"[",Mt,"]")})});case"stencil.mask":return yt(function(qe){return Y.commandType(qe,"number",Ot,ot.commandStr),0|qe},function(qe,at,ht){return Y.optional(function(){qe.assert(at,"typeof "+ht+'==="number"',"invalid stencil.mask")}),at.def(ht,"|0")});case"stencil.func":return yt(function(qe){Y.commandType(qe,"object",Ot,ot.commandStr);var at=qe.cmp||"keep",ht=qe.ref||0,Mt="mask"in qe?qe.mask:-1;return Y.commandParameter(at,ci,xt+".cmp",ot.commandStr),Y.commandType(ht,"number",xt+".ref",ot.commandStr),Y.commandType(Mt,"number",xt+".mask",ot.commandStr),[ci[at],ht,Mt]},function(qe,at,ht){var Mt=qe.constants.compareFuncs;return Y.optional(function(){function zt(){qe.assert(at,Array.prototype.join.call(arguments,""),"invalid stencil.func")}zt(ht+"&&typeof ",ht,'==="object"'),zt('!("cmp" in ',ht,")||(",ht,".cmp in ",Mt,")")}),[at.def('"cmp" in ',ht,"?",Mt,"[",ht,".cmp]",":",7680),at.def(ht,".ref|0"),at.def('"mask" in ',ht,"?",ht,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return yt(function(qe){Y.commandType(qe,"object",Ot,ot.commandStr);var at=qe.fail||"keep",ht=qe.zfail||"keep",Mt=qe.zpass||"keep";return Y.commandParameter(at,li,xt+".fail",ot.commandStr),Y.commandParameter(ht,li,xt+".zfail",ot.commandStr),Y.commandParameter(Mt,li,xt+".zpass",ot.commandStr),[xt==="stencil.opBack"?1029:1028,li[at],li[ht],li[Mt]]},function(qe,at,ht){var Mt=qe.constants.stencilOps;function zt(Ut){return Y.optional(function(){qe.assert(at,'!("'+Ut+'" in '+ht+")||("+ht+"."+Ut+" in "+Mt+")","invalid "+xt+"."+Ut+", must be one of "+Object.keys(li))}),at.def('"',Ut,'" in ',ht,"?",Mt,"[",ht,".",Ut,"]:",7680)}return Y.optional(function(){qe.assert(at,ht+"&&typeof "+ht+'==="object"',"invalid "+xt)}),[xt==="stencil.opBack"?1029:1028,zt("fail"),zt("zfail"),zt("zpass")]});case"polygonOffset.offset":return yt(function(qe){Y.commandType(qe,"object",Ot,ot.commandStr);var at=0|qe.factor,ht=0|qe.units;return Y.commandType(at,"number",Ot+".factor",ot.commandStr),Y.commandType(ht,"number",Ot+".units",ot.commandStr),[at,ht]},function(qe,at,ht){return Y.optional(function(){qe.assert(at,ht+"&&typeof "+ht+'==="object"',"invalid "+xt)}),[at.def(ht,".factor|0"),at.def(ht,".units|0")]});case"cull.face":return yt(function(qe){var at=0;return qe==="front"?at=1028:qe==="back"&&(at=1029),Y.command(!!at,Ot,ot.commandStr),at},function(qe,at,ht){return Y.optional(function(){qe.assert(at,ht+'==="front"||'+ht+'==="back"',"invalid cull.face")}),at.def(ht,'==="front"?',1028,":",1029)});case"lineWidth":return yt(function(qe){return Y.command(typeof qe=="number"&&qe>=Ft.lineWidthDims[0]&&qe<=Ft.lineWidthDims[1],"invalid line width, must be a positive number between "+Ft.lineWidthDims[0]+" and "+Ft.lineWidthDims[1],ot.commandStr),qe},function(qe,at,ht){return Y.optional(function(){qe.assert(at,"typeof "+ht+'==="number"&&'+ht+">="+Ft.lineWidthDims[0]+"&&"+ht+"<="+Ft.lineWidthDims[1],"invalid line width")}),ht});case"frontFace":return yt(function(qe){return Y.commandParameter(qe,Zi,Ot,ot.commandStr),Zi[qe]},function(qe,at,ht){return Y.optional(function(){qe.assert(at,ht+'==="cw"||'+ht+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),at.def(ht+'==="cw"?2304:2305')});case"colorMask":return yt(function(qe){return Y.command(At(qe)&&qe.length===4,"color.mask must be length 4 array",ot.commandStr),qe.map(function(at){return!!at})},function(qe,at,ht){return Y.optional(function(){qe.assert(at,qe.shared.isArrayLike+"("+ht+")&&"+ht+".length===4","invalid color.mask")}),te(4,function(Mt){return"!!"+ht+"["+Mt+"]"})});case"sample.coverage":return yt(function(qe){Y.command(_(qe)==="object"&&qe,Ot,ot.commandStr);var at="value"in qe?qe.value:1,ht=!!qe.invert;return Y.command(typeof at=="number"&&at>=0&&at<=1,"sample.coverage.value must be a number between 0 and 1",ot.commandStr),[at,ht]},function(qe,at,ht){return Y.optional(function(){qe.assert(at,ht+"&&typeof "+ht+'==="object"',"invalid sample.coverage")}),[at.def('"value" in ',ht,"?+",ht,".value:1"),at.def("!!",ht,".invert")]})}}),mt}(_t,D),ke=function(Ve,ot,pt){var Et=Ve.static,mt=Ve.dynamic;function xt(ht){if(ht in Et){var Mt=ut.id(Et[ht]);Y.optional(function(){Lt.shader(ao[ht],Mt,Y.guessCommand())});var zt=Ne(function(){return Mt});return zt.id=Mt,zt}if(ht in mt){var Ut=mt[ht];return He(Ut,function(Xt,fr){var Or=Xt.invoke(fr,Ut),kr=fr.def(Xt.shared.strings,".id(",Or,")");return Y.optional(function(){fr(Xt.shared.shader,".shader(",ao[ht],",",kr,",",Xt.command,");")}),kr})}return null}var Ot,yt=xt(Jn),qe=xt(ii),at=null;return We(yt)&&We(qe)?(at=Lt.program(qe.id,yt.id,null,pt),Ot=Ne(function(ht,Mt){return ht.link(at)})):Ot=new ir(yt&&yt.thisDep||qe&&qe.thisDep,yt&&yt.contextDep||qe&&qe.contextDep,yt&&yt.propDep||qe&&qe.propDep,function(ht,Mt){var zt,Ut=ht.shared.shader;zt=yt?yt.append(ht,Mt):Mt.def(Ut,".",Jn);var Xt=Ut+".program("+(qe?qe.append(ht,Mt):Mt.def(Ut,".",ii))+","+zt;return Y.optional(function(){Xt+=","+ht.command}),Mt.def(Xt+")")}),{frag:yt,vert:qe,progVar:Ot,program:at}}(_t,0,oe);function Fe(Ve){var ot=be[Ve];ot&&(Ue[Ve]=ot)}Fe("viewport"),Fe(Mn("scissor.box"));var Ye=Object.keys(Ue).length>0,Ge={framebuffer:pe,draw:De,shader:ke,state:Ue,dirty:Ye,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ge.profile=function(Ve){var ot,pt=Ve.static,Et=Ve.dynamic;if(Mi in pt){var mt=!!pt[Mi];(ot=Ne(function(Ot,yt){return mt})).enable=mt}else if(Mi in Et){var xt=Et[Mi];ot=He(xt,function(Ot,yt){return Ot.invoke(yt,xt)})}return ot}(_t),Ge.uniforms=function(Ve,ot){var pt=Ve.static,Et=Ve.dynamic,mt={};return Object.keys(pt).forEach(function(xt){var Ot,yt=pt[xt];if(typeof yt=="number"||typeof yt=="boolean")Ot=Ne(function(){return yt});else if(typeof yt=="function"){var qe=yt._reglType;qe==="texture2d"||qe==="textureCube"?Ot=Ne(function(at){return at.link(yt)}):qe==="framebuffer"||qe==="framebufferCube"?(Y.command(yt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+xt+'"',ot.commandStr),Ot=Ne(function(at){return at.link(yt.color[0])})):Y.commandRaise('invalid data for uniform "'+xt+'"',ot.commandStr)}else At(yt)?Ot=Ne(function(at){return at.global.def("[",te(yt.length,function(ht){return Y.command(typeof yt[ht]=="number"||typeof yt[ht]=="boolean","invalid uniform "+xt,at.commandStr),yt[ht]}),"]")}):Y.commandRaise('invalid or missing data for uniform "'+xt+'"',ot.commandStr);Ot.value=yt,mt[xt]=Ot}),Object.keys(Et).forEach(function(xt){var Ot=Et[xt];mt[xt]=He(Ot,function(yt,qe){return yt.invoke(qe,Ot)})}),mt}(St,D),Ge.drawVAO=Ge.scopeVAO=function(Ve,ot){var pt=Ve.static,Et=Ve.dynamic;if(Xn in pt){var mt=pt[Xn];return mt!==null&&wt.getVAO(mt)===null&&(mt=wt.createVAO(mt)),Ne(function(Ot){return Ot.link(wt.getVAO(mt))})}if(Xn in Et){var xt=Et[Xn];return He(xt,function(Ot,yt){var qe=Ot.invoke(yt,xt);return yt.def(Ot.shared.vao+".getVAO("+qe+")")})}return null}(_t),!Ge.drawVAO&&ke.program&&!oe&&bt.angle_instanced_arrays){var Xe=!0,et=ke.program.attributes.map(function(Ve){var ot=$e.static[Ve];return Xe=Xe&&!!ot,ot});if(Xe&&et.length>0){var tt=wt.getVAO(wt.createVAO(et));Ge.drawVAO=new ir(null,null,null,function(Ve,ot){return Ve.link(tt)}),Ge.useVAO=!0}}return oe?Ge.useVAO=!0:Ge.attributes=function(Ve,ot){var pt=Ve.static,Et=Ve.dynamic,mt={};return Object.keys(pt).forEach(function(xt){var Ot=pt[xt],yt=ut.id(xt),qe=new gr;if($i(Ot))qe.state=1,qe.buffer=we.getBuffer(we.create(Ot,34962,!1,!0)),qe.type=0;else{var at=we.getBuffer(Ot);if(at)qe.state=1,qe.buffer=at,qe.type=0;else if(Y.command(_(Ot)==="object"&&Ot,"invalid data for attribute "+xt,ot.commandStr),"constant"in Ot){var ht=Ot.constant;qe.buffer="null",qe.state=2,typeof ht=="number"?qe.x=ht:(Y.command(At(ht)&&ht.length>0&&ht.length<=4,"invalid constant for attribute "+xt,ot.commandStr),wi.forEach(function(kr,br){br<ht.length&&(qe[kr]=ht[br])}))}else{at=$i(Ot.buffer)?we.getBuffer(we.create(Ot.buffer,34962,!1,!0)):we.getBuffer(Ot.buffer),Y.command(!!at,'missing buffer for attribute "'+xt+'"',ot.commandStr);var Mt=0|Ot.offset;Y.command(Mt>=0,'invalid offset for attribute "'+xt+'"',ot.commandStr);var zt=0|Ot.stride;Y.command(zt>=0&&zt<256,'invalid stride for attribute "'+xt+'", must be integer betweeen [0, 255]',ot.commandStr);var Ut=0|Ot.size;Y.command(!("size"in Ot)||Ut>0&&Ut<=4,'invalid size for attribute "'+xt+'", must be 1,2,3,4',ot.commandStr);var Xt=!!Ot.normalized,fr=0;"type"in Ot&&(Y.commandParameter(Ot.type,_e,"invalid type for attribute "+xt,ot.commandStr),fr=_e[Ot.type]);var Or=0|Ot.divisor;"divisor"in Ot&&(Y.command(Or===0||Fr,'cannot specify divisor for attribute "'+xt+'", instancing not supported',ot.commandStr),Y.command(Or>=0,'invalid divisor for attribute "'+xt+'"',ot.commandStr)),Y.optional(function(){var kr=ot.commandStr,br=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ot).forEach(function(ur){Y.command(br.indexOf(ur)>=0,'unknown parameter "'+ur+'" for attribute pointer "'+xt+'" (valid parameters are '+br+")",kr)})}),qe.buffer=at,qe.state=1,qe.size=Ut,qe.normalized=Xt,qe.type=fr||at.dtype,qe.offset=Mt,qe.stride=zt,qe.divisor=Or}}mt[xt]=Ne(function(kr,br){var ur=kr.attribCache;if(yt in ur)return ur[yt];var an={isStream:!1};return Object.keys(qe).forEach(function(sn){an[sn]=qe[sn]}),qe.buffer&&(an.buffer=kr.link(qe.buffer),an.type=an.type||an.buffer+".dtype"),ur[yt]=an,an})}),Object.keys(Et).forEach(function(xt){var Ot=Et[xt];mt[xt]=He(Ot,function(yt,qe){var at=yt.invoke(qe,Ot),ht=yt.shared,Mt=yt.constants,zt=ht.isBufferArgs,Ut=ht.buffer;Y.optional(function(){yt.assert(qe,at+"&&(typeof "+at+'==="object"||typeof '+at+'==="function")&&('+zt+"("+at+")||"+Ut+".getBuffer("+at+")||"+Ut+".getBuffer("+at+".buffer)||"+zt+"("+at+'.buffer)||("constant" in '+at+"&&(typeof "+at+'.constant==="number"||'+ht.isArrayLike+"("+at+".constant))))",'invalid dynamic attribute "'+xt+'"')});var Xt={isStream:qe.def(!1)},fr=new gr;fr.state=1,Object.keys(fr).forEach(function(ur){Xt[ur]=qe.def(""+fr[ur])});var Or=Xt.buffer,kr=Xt.type;function br(ur){qe(Xt[ur],"=",at,".",ur,"|0;")}return qe("if(",zt,"(",at,")){",Xt.isStream,"=true;",Or,"=",Ut,".createStream(",34962,",",at,");",kr,"=",Or,".dtype;","}else{",Or,"=",Ut,".getBuffer(",at,");","if(",Or,"){",kr,"=",Or,".dtype;",'}else if("constant" in ',at,"){",Xt.state,"=",2,";","if(typeof "+at+'.constant === "number"){',Xt[wi[0]],"=",at,".constant;",wi.slice(1).map(function(ur){return Xt[ur]}).join("="),"=0;","}else{",wi.map(function(ur,an){return Xt[ur]+"="+at+".constant.length>"+an+"?"+at+".constant["+an+"]:0;"}).join(""),"}}else{","if(",zt,"(",at,".buffer)){",Or,"=",Ut,".createStream(",34962,",",at,".buffer);","}else{",Or,"=",Ut,".getBuffer(",at,".buffer);","}",kr,'="type" in ',at,"?",Mt.glTypes,"[",at,".type]:",Or,".dtype;",Xt.normalized,"=!!",at,".normalized;"),br("size"),br("offset"),br("stride"),br("divisor"),qe("}}"),qe.exit("if(",Xt.isStream,"){",Ut,".destroyStream(",Or,");","}"),Xt})}),mt}($e,D),Ge.context=function(Ve){var ot=Ve.static,pt=Ve.dynamic,Et={};return Object.keys(ot).forEach(function(mt){var xt=ot[mt];Et[mt]=Ne(function(Ot,yt){return typeof xt=="number"||typeof xt=="boolean"?""+xt:Ot.link(xt)})}),Object.keys(pt).forEach(function(mt){var xt=pt[mt];Et[mt]=He(xt,function(Ot,yt){return Ot.invoke(yt,xt)})}),Et}(w),Ge}function nn(_t,$e,St){var w=_t.shared.context,D=_t.scope();Object.keys(St).forEach(function(ce){$e.save(w,"."+ce);var K=St[ce].append(_t,$e);Array.isArray(K)?D(w,".",ce,"=[",K.join(),"];"):D(w,".",ce,"=",K,";")}),$e(D)}function pi(_t,$e,St,w){var D,ce=_t.shared,K=ce.gl,oe=ce.framebuffer;$r&&(D=$e.def(ce.extensions,".webgl_draw_buffers"));var pe,be=_t.constants,De=be.drawBuffer,Ue=be.backBuffer;pe=St?St.append(_t,$e):$e.def(oe,".next"),w||$e("if(",pe,"!==",oe,".cur){"),$e("if(",pe,"){",K,".bindFramebuffer(",36160,",",pe,".framebuffer);"),$r&&$e(D,".drawBuffersWEBGL(",De,"[",pe,".colorAttachments.length]);"),$e("}else{",K,".bindFramebuffer(",36160,",null);"),$r&&$e(D,".drawBuffersWEBGL(",Ue,");"),$e("}",oe,".cur=",pe,";"),w||$e("}")}function Ji(_t,$e,St){var w=_t.shared,D=w.gl,ce=_t.current,K=_t.next,oe=w.current,pe=w.next,be=_t.cond(oe,".dirty");Cn.forEach(function(De){var Ue,ke,Fe=Mn(De);if(!(Fe in St.state))if(Fe in K){Ue=K[Fe],ke=ce[Fe];var Ye=te(Kr[Fe].length,function(Xe){return be.def(Ue,"[",Xe,"]")});be(_t.cond(Ye.map(function(Xe,et){return Xe+"!=="+ke+"["+et+"]"}).join("||")).then(D,".",Qr[Fe],"(",Ye,");",Ye.map(function(Xe,et){return ke+"["+et+"]="+Xe}).join(";"),";"))}else{Ue=be.def(pe,".",Fe);var Ge=_t.cond(Ue,"!==",oe,".",Fe);be(Ge),Fe in qn?Ge(_t.cond(Ue).then(D,".enable(",qn[Fe],");").else(D,".disable(",qn[Fe],");"),oe,".",Fe,"=",Ue,";"):Ge(D,".",Qr[Fe],"(",Ue,");",oe,".",Fe,"=",Ue,";")}}),Object.keys(St.state).length===0&&be(oe,".dirty=false;"),$e(be)}function Ai(_t,$e,St,w){var D=_t.shared,ce=_t.current,K=D.current,oe=D.gl;vo(Object.keys(St)).forEach(function(pe){var be=St[pe];if(!w||w(be)){var De=be.append(_t,$e);if(qn[pe]){var Ue=qn[pe];We(be)?$e(oe,De?".enable(":".disable(",Ue,");"):$e(_t.cond(De).then(oe,".enable(",Ue,");").else(oe,".disable(",Ue,");")),$e(K,".",pe,"=",De,";")}else if(At(De)){var ke=ce[pe];$e(oe,".",Qr[pe],"(",De,");",De.map(function(Fe,Ye){return ke+"["+Ye+"]="+Fe}).join(";"),";")}else $e(oe,".",Qr[pe],"(",De,");",K,".",pe,"=",De,";")}})}function Gn(_t,$e){Fr&&(_t.instancing=$e.def(_t.shared.extensions,".angle_instanced_arrays"))}function zi(_t,$e,St,w,D){var ce,K,oe,pe=_t.shared,be=_t.stats,De=pe.current,Ue=pe.timer,ke=St.profile;function Fe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function Ye(Ve){Ve(ce=$e.def(),"=",Fe(),";"),typeof D=="string"?Ve(be,".count+=",D,";"):Ve(be,".count++;"),rr&&(w?Ve(K=$e.def(),"=",Ue,".getNumPendingQueries();"):Ve(Ue,".beginQuery(",be,");"))}function Ge(Ve){Ve(be,".cpuTime+=",Fe(),"-",ce,";"),rr&&(w?Ve(Ue,".pushScopeStats(",K,",",Ue,".getNumPendingQueries(),",be,");"):Ve(Ue,".endQuery();"))}function Xe(Ve){var ot=$e.def(De,".profile");$e(De,".profile=",Ve,";"),$e.exit(De,".profile=",ot,";")}if(ke){if(We(ke))return void(ke.enable?(Ye($e),Ge($e.exit),Xe("true")):Xe("false"));Xe(oe=ke.append(_t,$e))}else oe=$e.def(De,".profile");var et=_t.block();Ye(et),$e("if(",oe,"){",et,"}");var tt=_t.block();Ge(tt),$e.exit("if(",oe,"){",tt,"}")}function Di(_t,$e,St,w,D){var ce=_t.shared;w.forEach(function(K){var oe,pe=K.name,be=St.attributes[pe];if(be){if(!D(be))return;oe=be.append(_t,$e)}else{if(!D(ft))return;var De=_t.scopeAttrib(pe);Y.optional(function(){_t.assert($e,De+".state","missing attribute "+pe)}),oe={},Object.keys(new gr).forEach(function(Ue){oe[Ue]=$e.def(De,".",Ue)})}(function(Ue,ke,Fe){var Ye=ce.gl,Ge=$e.def(Ue,".location"),Xe=$e.def(ce.attributes,"[",Ge,"]"),et=Fe.state,tt=Fe.buffer,Ve=[Fe.x,Fe.y,Fe.z,Fe.w],ot=["buffer","normalized","offset","stride"];function pt(){$e("if(!",Xe,".buffer){",Ye,".enableVertexAttribArray(",Ge,");}");var mt,xt=Fe.type;if(mt=Fe.size?$e.def(Fe.size,"||",ke):ke,$e("if(",Xe,".type!==",xt,"||",Xe,".size!==",mt,"||",ot.map(function(yt){return Xe+"."+yt+"!=="+Fe[yt]}).join("||"),"){",Ye,".bindBuffer(",34962,",",tt,".buffer);",Ye,".vertexAttribPointer(",[Ge,mt,xt,Fe.normalized,Fe.stride,Fe.offset],");",Xe,".type=",xt,";",Xe,".size=",mt,";",ot.map(function(yt){return Xe+"."+yt+"="+Fe[yt]+";"}).join(""),"}"),Fr){var Ot=Fe.divisor;$e("if(",Xe,".divisor!==",Ot,"){",_t.instancing,".vertexAttribDivisorANGLE(",[Ge,Ot],");",Xe,".divisor=",Ot,";}")}}function Et(){$e("if(",Xe,".buffer){",Ye,".disableVertexAttribArray(",Ge,");",Xe,".buffer=null;","}if(",wi.map(function(mt,xt){return Xe+"."+mt+"!=="+Ve[xt]}).join("||"),"){",Ye,".vertexAttrib4f(",Ge,",",Ve,");",wi.map(function(mt,xt){return Xe+"."+mt+"="+Ve[xt]+";"}).join(""),"}")}et===1?pt():et===2?Et():($e("if(",et,"===",1,"){"),pt(),$e("}else{"),Et(),$e("}"))})(_t.link(K),function(Ue){switch(Ue){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(K.info.type),oe)})}function fi(_t,$e,St,w,D){for(var ce,K=_t.shared,oe=K.gl,pe=0;pe<w.length;++pe){var be,De=w[pe],Ue=De.name,ke=De.info.type,Fe=St.uniforms[Ue],Ye=_t.link(De)+".location";if(Fe){if(!D(Fe))continue;if(We(Fe)){var Ge=Fe.value;if(Y.command(Ge!=null,'missing uniform "'+Ue+'"',_t.commandStr),ke===35678||ke===35680){Y.command(typeof Ge=="function"&&(ke===35678&&(Ge._reglType==="texture2d"||Ge._reglType==="framebuffer")||ke===35680&&(Ge._reglType==="textureCube"||Ge._reglType==="framebufferCube")),"invalid texture for uniform "+Ue,_t.commandStr);var Xe=_t.link(Ge._texture||Ge.color[0]._texture);$e(oe,".uniform1i(",Ye,",",Xe+".bind());"),$e.exit(Xe,".unbind();")}else if(ke===35674||ke===35675||ke===35676){Y.optional(function(){Y.command(At(Ge),"invalid matrix for uniform "+Ue,_t.commandStr),Y.command(ke===35674&&Ge.length===4||ke===35675&&Ge.length===9||ke===35676&&Ge.length===16,"invalid length for matrix uniform "+Ue,_t.commandStr)});var et=_t.global.def("new Float32Array(["+Array.prototype.slice.call(Ge)+"])"),tt=2;ke===35675?tt=3:ke===35676&&(tt=4),$e(oe,".uniformMatrix",tt,"fv(",Ye,",false,",et,");")}else{switch(ke){case 5126:Y.commandType(Ge,"number","uniform "+Ue,_t.commandStr),ce="1f";break;case 35664:Y.command(At(Ge)&&Ge.length===2,"uniform "+Ue,_t.commandStr),ce="2f";break;case 35665:Y.command(At(Ge)&&Ge.length===3,"uniform "+Ue,_t.commandStr),ce="3f";break;case 35666:Y.command(At(Ge)&&Ge.length===4,"uniform "+Ue,_t.commandStr),ce="4f";break;case 35670:Y.commandType(Ge,"boolean","uniform "+Ue,_t.commandStr),ce="1i";break;case 5124:Y.commandType(Ge,"number","uniform "+Ue,_t.commandStr),ce="1i";break;case 35671:case 35667:Y.command(At(Ge)&&Ge.length===2,"uniform "+Ue,_t.commandStr),ce="2i";break;case 35672:case 35668:Y.command(At(Ge)&&Ge.length===3,"uniform "+Ue,_t.commandStr),ce="3i";break;case 35673:case 35669:Y.command(At(Ge)&&Ge.length===4,"uniform "+Ue,_t.commandStr),ce="4i"}$e(oe,".uniform",ce,"(",Ye,",",At(Ge)?Array.prototype.slice.call(Ge):Ge,");")}continue}be=Fe.append(_t,$e)}else{if(!D(ft))continue;be=$e.def(K.uniforms,"[",ut.id(Ue),"]")}ke===35678?(Y(!Array.isArray(be),"must specify a scalar prop for textures"),$e("if(",be,"&&",be,'._reglType==="framebuffer"){',be,"=",be,".color[0];","}")):ke===35680&&(Y(!Array.isArray(be),"must specify a scalar prop for cube maps"),$e("if(",be,"&&",be,'._reglType==="framebufferCube"){',be,"=",be,".color[0];","}")),Y.optional(function(){function mt(qe,at){_t.assert($e,qe,'bad data or missing for uniform "'+Ue+'".  '+at)}function xt(qe){Y(!Array.isArray(be),"must not specify an array type for uniform"),mt("typeof "+be+'==="'+qe+'"',"invalid type, expected "+qe)}function Ot(qe,at){Array.isArray(be)?Y(be.length===qe,"must have length "+qe):mt(K.isArrayLike+"("+be+")&&"+be+".length==="+qe,"invalid vector, should have length "+qe,_t.commandStr)}function yt(qe){Y(!Array.isArray(be),"must not specify a value type"),mt("typeof "+be+'==="function"&&'+be+'._reglType==="texture'+(qe===3553?"2d":"Cube")+'"',"invalid texture type",_t.commandStr)}switch(ke){case 5124:xt("number");break;case 35667:Ot(2);break;case 35668:Ot(3);break;case 35669:Ot(4);break;case 5126:xt("number");break;case 35664:Ot(2);break;case 35665:Ot(3);break;case 35666:Ot(4);break;case 35670:xt("boolean");break;case 35671:Ot(2);break;case 35672:Ot(3);break;case 35673:case 35674:Ot(4);break;case 35675:Ot(9);break;case 35676:Ot(16);break;case 35678:yt(3553);break;case 35680:yt(34067)}});var Ve=1;switch(ke){case 35678:case 35680:var ot=$e.def(be,"._texture");$e(oe,".uniform1i(",Ye,",",ot,".bind());"),$e.exit(ot,".unbind();");continue;case 5124:case 35670:ce="1i";break;case 35667:case 35671:ce="2i",Ve=2;break;case 35668:case 35672:ce="3i",Ve=3;break;case 35669:case 35673:ce="4i",Ve=4;break;case 5126:ce="1f";break;case 35664:ce="2f",Ve=2;break;case 35665:ce="3f",Ve=3;break;case 35666:ce="4f",Ve=4;break;case 35674:ce="Matrix2fv";break;case 35675:ce="Matrix3fv";break;case 35676:ce="Matrix4fv"}if($e(oe,".uniform",ce,"(",Ye,","),ce.charAt(0)==="M"){var pt=Math.pow(ke-35674+2,2),Et=_t.global.def("new Float32Array(",pt,")");Array.isArray(be)?$e("false,(",te(pt,function(mt){return Et+"["+mt+"]="+be[mt]}),",",Et,")"):$e("false,(Array.isArray(",be,")||",be," instanceof Float32Array)?",be,":(",te(pt,function(mt){return Et+"["+mt+"]="+be+"["+mt+"]"}),",",Et,")")}else Ve>1?$e(te(Ve,function(mt){return Array.isArray(be)?be[mt]:be+"["+mt+"]"})):(Y(!Array.isArray(be),"uniform value must not be an array"),$e(be));$e(");")}}function Ui(_t,$e,St,w){var D=_t.shared,ce=D.gl,K=D.draw,oe=w.draw,pe=function(){var Ve,ot=oe.elements,pt=$e;return ot?((ot.contextDep&&w.contextDynamic||ot.propDep)&&(pt=St),Ve=ot.append(_t,pt)):Ve=pt.def(K,".",hi),Ve&&pt("if("+Ve+")"+ce+".bindBuffer(34963,"+Ve+".buffer.buffer);"),Ve}();function be(Ve){var ot=oe[Ve];return ot?ot.contextDep&&w.contextDynamic||ot.propDep?ot.append(_t,St):ot.append(_t,$e):$e.def(K,".",Ve)}var De,Ue,ke=be(Vn),Fe=be(di),Ye=function(){var Ve,ot=oe.count,pt=$e;return ot?((ot.contextDep&&w.contextDynamic||ot.propDep)&&(pt=St),Ve=ot.append(_t,pt),Y.optional(function(){ot.MISSING&&_t.assert($e,"false","missing vertex count"),ot.DYNAMIC&&_t.assert(pt,Ve+">=0","missing vertex count")})):(Ve=pt.def(K,".",oi),Y.optional(function(){_t.assert(pt,Ve+">=0","missing vertex count")})),Ve}();if(typeof Ye=="number"){if(Ye===0)return}else St("if(",Ye,"){"),St.exit("}");Fr&&(De=be(_i),Ue=_t.instancing);var Ge=pe+".type",Xe=oe.elements&&We(oe.elements);function et(){function Ve(){St(Ue,".drawElementsInstancedANGLE(",[ke,Ye,Ge,Fe+"<<(("+Ge+"-5121)>>1)",De],");")}function ot(){St(Ue,".drawArraysInstancedANGLE(",[ke,Fe,Ye,De],");")}pe?Xe?Ve():(St("if(",pe,"){"),Ve(),St("}else{"),ot(),St("}")):ot()}function tt(){function Ve(){St(ce+".drawElements("+[ke,Ye,Ge,Fe+"<<(("+Ge+"-5121)>>1)"]+");")}function ot(){St(ce+".drawArrays("+[ke,Fe,Ye]+");")}pe?Xe?Ve():(St("if(",pe,"){"),Ve(),St("}else{"),ot(),St("}")):ot()}Fr&&(typeof De!="number"||De>=0)?typeof De=="string"?(St("if(",De,">0){"),et(),St("}else if(",De,"<0){"),tt(),St("}")):et():tt()}function Ci(_t,$e,St,w,D){var ce=Fi(),K=ce.proc("body",D);return Y.optional(function(){ce.commandStr=$e.commandStr,ce.command=ce.link($e.commandStr)}),Fr&&(ce.instancing=K.def(ce.shared.extensions,".angle_instanced_arrays")),_t(ce,K,St,w),ce.compile().body}function eo(_t,$e,St,w){Gn(_t,$e),St.useVAO?St.drawVAO?$e(_t.shared.vao,".setVAO(",St.drawVAO.append(_t,$e),");"):$e(_t.shared.vao,".setVAO(",_t.shared.vao,".targetVAO);"):($e(_t.shared.vao,".setVAO(null);"),Di(_t,$e,St,w.attributes,function(){return!0})),fi(_t,$e,St,w.uniforms,function(){return!0}),Ui(_t,$e,$e,St)}function so(_t,$e,St,w){function D(){return!0}_t.batchId="a1",Gn(_t,$e),Di(_t,$e,St,w.attributes,D),fi(_t,$e,St,w.uniforms,D),Ui(_t,$e,$e,St)}function Vi(_t,$e,St,w){Gn(_t,$e);var D=St.contextDep,ce=$e.def(),K=$e.def();_t.shared.props=K,_t.batchId=ce;var oe=_t.scope(),pe=_t.scope();function be(Ge){return Ge.contextDep&&D||Ge.propDep}function De(Ge){return!be(Ge)}if($e(oe.entry,"for(",ce,"=0;",ce,"<","a1",";++",ce,"){",K,"=","a0","[",ce,"];",pe,"}",oe.exit),St.needsContext&&nn(_t,pe,St.context),St.needsFramebuffer&&pi(_t,pe,St.framebuffer),Ai(_t,pe,St.state,be),St.profile&&be(St.profile)&&zi(_t,pe,St,!1,!0),w)St.useVAO?St.drawVAO?be(St.drawVAO)?pe(_t.shared.vao,".setVAO(",St.drawVAO.append(_t,pe),");"):oe(_t.shared.vao,".setVAO(",St.drawVAO.append(_t,oe),");"):oe(_t.shared.vao,".setVAO(",_t.shared.vao,".targetVAO);"):(oe(_t.shared.vao,".setVAO(null);"),Di(_t,oe,St,w.attributes,De),Di(_t,pe,St,w.attributes,be)),fi(_t,oe,St,w.uniforms,De),fi(_t,pe,St,w.uniforms,be),Ui(_t,oe,pe,St);else{var Ue=_t.global.def("{}"),ke=St.shader.progVar.append(_t,pe),Fe=pe.def(ke,".id"),Ye=pe.def(Ue,"[",Fe,"]");pe(_t.shared.gl,".useProgram(",ke,".program);","if(!",Ye,"){",Ye,"=",Ue,"[",Fe,"]=",_t.link(function(Ge){return Ci(so,_t,St,Ge,2)}),"(",ke,");}",Ye,".call(this,a0[",ce,"],",ce,");")}}function Ti(_t,$e,St){var w=$e.static[St];if(w&&function(De){if(_(De)==="object"&&!At(De)){for(var Ue=Object.keys(De),ke=0;ke<Ue.length;++ke)if(W.isDynamic(De[Ue[ke]]))return!0;return!1}}(w)){var D=_t.global,ce=Object.keys(w),K=!1,oe=!1,pe=!1,be=_t.global.def("{}");ce.forEach(function(De){var Ue=w[De];if(W.isDynamic(Ue)){typeof Ue=="function"&&(Ue=w[De]=W.unbox(Ue));var ke=He(Ue,null);K=K||ke.thisDep,pe=pe||ke.propDep,oe=oe||ke.contextDep}else{switch(D(be,".",De,"="),_(Ue)){case"number":D(Ue);break;case"string":D('"',Ue,'"');break;case"object":Array.isArray(Ue)&&D("[",Ue.join(),"]");break;default:D(_t.link(Ue))}D(";")}}),$e.dynamic[St]=new W.DynamicVariable(4,{thisDep:K,contextDep:oe,propDep:pe,ref:be,append:function(De,Ue){ce.forEach(function(ke){var Fe=w[ke];if(W.isDynamic(Fe)){var Ye=De.invoke(Ue,Fe);Ue(be,".",ke,"=",Ye,";")}})}}),delete $e.static[St]}}return{next:jn,current:Kr,procs:function(){var _t=Fi(),$e=_t.proc("poll"),St=_t.proc("refresh"),w=_t.block();$e(w),St(w);var D,ce=_t.shared,K=ce.gl,oe=ce.next,pe=ce.current;w(pe,".dirty=false;"),pi(_t,$e),pi(_t,St,null,!0),Fr&&(D=_t.link(Fr)),bt.oes_vertex_array_object&&St(_t.link(bt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var be=0;be<Ft.maxAttributes;++be){var De=St.def(ce.attributes,"[",be,"]"),Ue=_t.cond(De,".buffer");Ue.then(K,".enableVertexAttribArray(",be,");",K,".bindBuffer(",34962,",",De,".buffer.buffer);",K,".vertexAttribPointer(",be,",",De,".size,",De,".type,",De,".normalized,",De,".stride,",De,".offset);").else(K,".disableVertexAttribArray(",be,");",K,".vertexAttrib4f(",be,",",De,".x,",De,".y,",De,".z,",De,".w);",De,".buffer=null;"),St(Ue),Fr&&St(D,".vertexAttribDivisorANGLE(",be,",",De,".divisor);")}return St(_t.shared.vao,".currentVAO=null;",_t.shared.vao,".setVAO(",_t.shared.vao,".targetVAO);"),Object.keys(qn).forEach(function(ke){var Fe=qn[ke],Ye=w.def(oe,".",ke),Ge=_t.block();Ge("if(",Ye,"){",K,".enable(",Fe,")}else{",K,".disable(",Fe,")}",pe,".",ke,"=",Ye,";"),St(Ge),$e("if(",Ye,"!==",pe,".",ke,"){",Ge,"}")}),Object.keys(Qr).forEach(function(ke){var Fe,Ye,Ge=Qr[ke],Xe=Kr[ke],et=_t.block();if(et(K,".",Ge,"("),At(Xe)){var tt=Xe.length;Fe=_t.global.def(oe,".",ke),Ye=_t.global.def(pe,".",ke),et(te(tt,function(Ve){return Fe+"["+Ve+"]"}),");",te(tt,function(Ve){return Ye+"["+Ve+"]="+Fe+"["+Ve+"];"}).join("")),$e("if(",te(tt,function(Ve){return Fe+"["+Ve+"]!=="+Ye+"["+Ve+"]"}).join("||"),"){",et,"}")}else Fe=w.def(oe,".",ke),Ye=w.def(pe,".",ke),et(Fe,");",pe,".",ke,"=",Fe,";"),$e("if(",Fe,"!==",Ye,"){",et,"}");St(et)}),_t.compile()}(),compile:function(_t,$e,St,w,D){var ce=Fi();ce.stats=ce.link(D),Object.keys($e.static).forEach(function(oe){Ti(ce,$e,oe)}),Gi.forEach(function(oe){Ti(ce,_t,oe)});var K=Qi(_t,$e,St,w,ce);return function(oe,pe){var be=oe.proc("draw",1);Gn(oe,be),nn(oe,be,pe.context),pi(oe,be,pe.framebuffer),Ji(oe,be,pe),Ai(oe,be,pe.state),zi(oe,be,pe,!1,!0);var De=pe.shader.progVar.append(oe,be);if(be(oe.shared.gl,".useProgram(",De,".program);"),pe.shader.program)eo(oe,be,pe,pe.shader.program);else{be(oe.shared.vao,".setVAO(null);");var Ue=oe.global.def("{}"),ke=be.def(De,".id"),Fe=be.def(Ue,"[",ke,"]");be(oe.cond(Fe).then(Fe,".call(this,a0);").else(Fe,"=",Ue,"[",ke,"]=",oe.link(function(Ye){return Ci(eo,oe,pe,Ye,1)}),"(",De,");",Fe,".call(this,a0);"))}Object.keys(pe.state).length>0&&be(oe.shared.current,".dirty=true;")}(ce,K),function(oe,pe){var be=oe.proc("scope",3);oe.batchId="a2";var De=oe.shared,Ue=De.current;function ke(Fe){var Ye=pe.shader[Fe];Ye&&be.set(De.shader,"."+Fe,Ye.append(oe,be))}nn(oe,be,pe.context),pe.framebuffer&&pe.framebuffer.append(oe,be),vo(Object.keys(pe.state)).forEach(function(Fe){var Ye=pe.state[Fe].append(oe,be);At(Ye)?Ye.forEach(function(Ge,Xe){be.set(oe.next[Fe],"["+Xe+"]",Ge)}):be.set(De.next,"."+Fe,Ye)}),zi(oe,be,pe,!0,!0),[hi,di,oi,_i,Vn].forEach(function(Fe){var Ye=pe.draw[Fe];Ye&&be.set(De.draw,"."+Fe,""+Ye.append(oe,be))}),Object.keys(pe.uniforms).forEach(function(Fe){var Ye=pe.uniforms[Fe].append(oe,be);Array.isArray(Ye)&&(Ye="["+Ye.join()+"]"),be.set(De.uniforms,"["+ut.id(Fe)+"]",Ye)}),Object.keys(pe.attributes).forEach(function(Fe){var Ye=pe.attributes[Fe].append(oe,be),Ge=oe.scopeAttrib(Fe);Object.keys(new gr).forEach(function(Xe){be.set(Ge,"."+Xe,Ye[Xe])})}),pe.scopeVAO&&be.set(De.vao,".targetVAO",pe.scopeVAO.append(oe,be)),ke(ii),ke(Jn),Object.keys(pe.state).length>0&&(be(Ue,".dirty=true;"),be.exit(Ue,".dirty=true;")),be("a1(",oe.shared.context,",a0,",oe.batchId,");")}(ce,K),function(oe,pe){var be=oe.proc("batch",2);oe.batchId="0",Gn(oe,be);var De=!1,Ue=!0;Object.keys(pe.context).forEach(function(ot){De=De||pe.context[ot].propDep}),De||(nn(oe,be,pe.context),Ue=!1);var ke=pe.framebuffer,Fe=!1;function Ye(ot){return ot.contextDep&&De||ot.propDep}ke?(ke.propDep?De=Fe=!0:ke.contextDep&&De&&(Fe=!0),Fe||pi(oe,be,ke)):pi(oe,be,null),pe.state.viewport&&pe.state.viewport.propDep&&(De=!0),Ji(oe,be,pe),Ai(oe,be,pe.state,function(ot){return!Ye(ot)}),pe.profile&&Ye(pe.profile)||zi(oe,be,pe,!1,"a1"),pe.contextDep=De,pe.needsContext=Ue,pe.needsFramebuffer=Fe;var Ge=pe.shader.progVar;if(Ge.contextDep&&De||Ge.propDep)Vi(oe,be,pe,null);else{var Xe=Ge.append(oe,be);if(be(oe.shared.gl,".useProgram(",Xe,".program);"),pe.shader.program)Vi(oe,be,pe,pe.shader.program);else{be(oe.shared.vao,".setVAO(null);");var et=oe.global.def("{}"),tt=be.def(Xe,".id"),Ve=be.def(et,"[",tt,"]");be(oe.cond(Ve).then(Ve,".call(this,a0,a1);").else(Ve,"=",et,"[",tt,"]=",oe.link(function(ot){return Ci(Vi,oe,pe,ot,2)}),"(",Xe,");",Ve,".call(this,a0,a1);"))}}Object.keys(pe.state).length>0&&be(oe.shared.current,".dirty=true;")}(ce,K),O(ce.compile(),{destroy:function(){K.shader.program.destroy()}})}}}var Ht=function(Be,ut){if(!ut.ext_disjoint_timer_query)return null;var bt=[];function Ft(er){bt.push(er)}var we=[];function ze(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Qe=[];function lt(er){Qe.push(er)}var vt=[];function wt(er,rr,sr){var gr=Qe.pop()||new ze;gr.startQueryIndex=er,gr.endQueryIndex=rr,gr.sum=0,gr.stats=sr,vt.push(gr)}var Lt=[],Wt=[];return{beginQuery:function(er){var rr=bt.pop()||ut.ext_disjoint_timer_query.createQueryEXT();ut.ext_disjoint_timer_query.beginQueryEXT(35007,rr),we.push(rr),wt(we.length-1,we.length,er)},endQuery:function(){ut.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:wt,update:function(){var er,rr,sr=we.length;if(sr!==0){Wt.length=Math.max(Wt.length,sr+1),Lt.length=Math.max(Lt.length,sr+1),Lt[0]=0,Wt[0]=0;var gr=0;for(er=0,rr=0;rr<we.length;++rr){var Vr=we[rr];ut.ext_disjoint_timer_query.getQueryObjectEXT(Vr,34919)?(gr+=ut.ext_disjoint_timer_query.getQueryObjectEXT(Vr,34918),Ft(Vr)):we[er++]=Vr,Lt[rr+1]=gr,Wt[rr+1]=er}for(we.length=er,er=0,rr=0;rr<vt.length;++rr){var Fr=vt[rr],$r=Fr.startQueryIndex,Kr=Fr.endQueryIndex;Fr.sum+=Lt[Kr]-Lt[$r];var jn=Wt[$r],Cn=Wt[Kr];Cn===jn?(Fr.stats.gpuTime+=Fr.sum/1e6,lt(Fr)):(Fr.startQueryIndex=jn,Fr.endQueryIndex=Cn,vt[er++]=Fr)}vt.length=er}},getNumPendingQueries:function(){return we.length},clear:function(){bt.push.apply(bt,we);for(var er=0;er<bt.length;er++)ut.ext_disjoint_timer_query.deleteQueryEXT(bt[er]);we.length=0,bt.length=0},restore:function(){we.length=0,bt.length=0}}};function vr(Be,ut){for(var bt=0;bt<Be.length;++bt)if(Be[bt]===ut)return bt;return-1}return function(Be){var ut=ee(Be);if(!ut)return null;var bt=ut.gl,Ft=bt.getContextAttributes(),we=bt.isContextLost(),ze=function($e,St){var w={};function D(oe){Y.type(oe,"string","extension name must be string");var pe,be=oe.toLowerCase();try{pe=w[be]=$e.getExtension(be)}catch(De){}return!!pe}for(var ce=0;ce<St.extensions.length;++ce){var K=St.extensions[ce];if(!D(K))return St.onDestroy(),St.onDone('"'+K+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return St.optionalExtensions.forEach(D),{extensions:w,restore:function(){Object.keys(w).forEach(function(oe){if(w[oe]&&!D(oe))throw new Error("(regl): error restoring extension "+oe)})}}}(bt,ut);if(!ze)return null;var Qe,lt,vt=(Qe={"":0},lt=[""],{id:function($e){var St=Qe[$e];return St||(St=Qe[$e]=lt.length,lt.push($e),St)},str:function($e){return lt[$e]}}),wt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Lt=ze.extensions,Wt=Ht(0,Lt),er=Oe(),rr=bt.drawingBufferWidth,sr=bt.drawingBufferHeight,gr={tick:0,time:0,viewportWidth:rr,viewportHeight:sr,framebufferWidth:rr,framebufferHeight:sr,drawingBufferWidth:rr,drawingBufferHeight:sr,pixelRatio:ut.pixelRatio},Vr=function($e,St){var w=1;St.ext_texture_filter_anisotropic&&(w=$e.getParameter(34047));var D=1,ce=1;St.webgl_draw_buffers&&(D=$e.getParameter(34852),ce=$e.getParameter(36063));var K=!!St.oes_texture_float;if(K){var oe=$e.createTexture();$e.bindTexture(3553,oe),$e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var pe=$e.createFramebuffer();if($e.bindFramebuffer(36160,pe),$e.framebufferTexture2D(36160,36064,3553,oe,0),$e.bindTexture(3553,null),$e.checkFramebufferStatus(36160)!==36053)K=!1;else{$e.viewport(0,0,1,1),$e.clearColor(1,0,0,1),$e.clear(16384);var be=B.allocType(5126,4);$e.readPixels(0,0,1,1,6408,5126,be),$e.getError()?K=!1:($e.deleteFramebuffer(pe),$e.deleteTexture(oe),K=be[0]===1),B.freeType(be)}}var De=!0;if(typeof navigator=="undefined"||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var Ue=$e.createTexture(),ke=B.allocType(5121,36);$e.activeTexture(33984),$e.bindTexture(34067,Ue),$e.texImage2D(34069,0,6408,3,3,0,6408,5121,ke),B.freeType(ke),$e.bindTexture(34067,null),$e.deleteTexture(Ue),De=!$e.getError()}return{colorBits:[$e.getParameter(3410),$e.getParameter(3411),$e.getParameter(3412),$e.getParameter(3413)],depthBits:$e.getParameter(3414),stencilBits:$e.getParameter(3415),subpixelBits:$e.getParameter(3408),extensions:Object.keys(St).filter(function(Fe){return!!St[Fe]}),maxAnisotropic:w,maxDrawbuffers:D,maxColorAttachments:ce,pointSizeDims:$e.getParameter(33901),lineWidthDims:$e.getParameter(33902),maxViewportDims:$e.getParameter(3386),maxCombinedTextureUnits:$e.getParameter(35661),maxCubeMapSize:$e.getParameter(34076),maxRenderbufferSize:$e.getParameter(34024),maxTextureUnits:$e.getParameter(34930),maxTextureSize:$e.getParameter(3379),maxAttributes:$e.getParameter(34921),maxVertexUniforms:$e.getParameter(36347),maxVertexTextureUnits:$e.getParameter(35660),maxVaryingVectors:$e.getParameter(36348),maxFragmentUniforms:$e.getParameter(36349),glsl:$e.getParameter(35724),renderer:$e.getParameter(7937),vendor:$e.getParameter(7936),version:$e.getParameter(7938),readFloat:K,npotTextureCube:De}}(bt,Lt),Fr=function($e,St,w,D){var ce=0,K={};function oe(ke){this.id=ce++,this.buffer=$e.createBuffer(),this.type=ke,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,w.profile&&(this.stats={size:0})}oe.prototype.bind=function(){$e.bindBuffer(this.type,this.buffer)},oe.prototype.destroy=function(){Ue(this)};var pe=[];function be(ke,Fe,Ye){ke.byteLength=Fe.byteLength,$e.bufferData(ke.type,Fe,Ye)}function De(ke,Fe,Ye,Ge,Xe,et){var tt,Ve;if(ke.usage=Ye,Array.isArray(Fe)){if(ke.dtype=Ge||5126,Fe.length>0)if(Array.isArray(Fe[0])){tt=Ae(Fe);for(var ot=1,pt=1;pt<tt.length;++pt)ot*=tt[pt];ke.dimension=ot,be(ke,Ve=Me(Fe,tt,ke.dtype),Ye),et?ke.persistentData=Ve:B.freeType(Ve)}else if(typeof Fe[0]=="number"){ke.dimension=Xe;var Et=B.allocType(ke.dtype,Fe.length);Re(Et,Fe),be(ke,Et,Ye),et?ke.persistentData=Et:B.freeType(Et)}else x(Fe[0])?(ke.dimension=Fe[0].length,ke.dtype=Ge||Se(Fe[0])||5126,be(ke,Ve=Me(Fe,[Fe.length,Fe[0].length],ke.dtype),Ye),et?ke.persistentData=Ve:B.freeType(Ve)):Y.raise("invalid buffer data")}else if(x(Fe))ke.dtype=Ge||Se(Fe),ke.dimension=Xe,be(ke,Fe,Ye),et&&(ke.persistentData=new Uint8Array(new Uint8Array(Fe.buffer)));else if(J(Fe)){tt=Fe.shape;var mt=Fe.stride,xt=Fe.offset,Ot=0,yt=0,qe=0,at=0;tt.length===1?(Ot=tt[0],yt=1,qe=mt[0],at=0):tt.length===2?(Ot=tt[0],yt=tt[1],qe=mt[0],at=mt[1]):Y.raise("invalid shape"),ke.dtype=Ge||Se(Fe.data)||5126,ke.dimension=yt;var ht=B.allocType(ke.dtype,Ot*yt);Ke(ht,Fe.data,Ot,yt,qe,at,xt),be(ke,ht,Ye),et?ke.persistentData=ht:B.freeType(ht)}else Fe instanceof ArrayBuffer?(ke.dtype=5121,ke.dimension=Xe,be(ke,Fe,Ye),et&&(ke.persistentData=new Uint8Array(new Uint8Array(Fe)))):Y.raise("invalid buffer data")}function Ue(ke){St.bufferCount--,D(ke);var Fe=ke.buffer;Y(Fe,"buffer must not be deleted already"),$e.deleteBuffer(Fe),ke.buffer=null,delete K[ke.id]}return w.profile&&(St.getTotalBufferSize=function(){var ke=0;return Object.keys(K).forEach(function(Fe){ke+=K[Fe].stats.size}),ke}),{create:function(ke,Fe,Ye,Ge){St.bufferCount++;var Xe=new oe(Fe);function et(Ve){var ot=35044,pt=null,Et=0,mt=0,xt=1;return Array.isArray(Ve)||x(Ve)||J(Ve)||Ve instanceof ArrayBuffer?pt=Ve:typeof Ve=="number"?Et=0|Ve:Ve&&(Y.type(Ve,"object","buffer arguments must be an object, a number or an array"),"data"in Ve&&(Y(pt===null||Array.isArray(pt)||x(pt)||J(pt),"invalid data for buffer"),pt=Ve.data),"usage"in Ve&&(Y.parameter(Ve.usage,je,"invalid buffer usage"),ot=je[Ve.usage]),"type"in Ve&&(Y.parameter(Ve.type,_e,"invalid buffer type"),mt=_e[Ve.type]),"dimension"in Ve&&(Y.type(Ve.dimension,"number","invalid dimension"),xt=0|Ve.dimension),"length"in Ve&&(Y.nni(Et,"buffer length must be a nonnegative integer"),Et=0|Ve.length)),Xe.bind(),pt?De(Xe,pt,ot,mt,xt,Ge):(Et&&$e.bufferData(Xe.type,Et,ot),Xe.dtype=mt||5121,Xe.usage=ot,Xe.dimension=xt,Xe.byteLength=Et),w.profile&&(Xe.stats.size=Xe.byteLength*Le[Xe.dtype]),et}function tt(Ve,ot){Y(ot+Ve.byteLength<=Xe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ve.byteLength+" starting from offset "+ot+" to a buffer of size "+Xe.byteLength),$e.bufferSubData(Xe.type,ot,Ve)}return K[Xe.id]=Xe,Ye||et(ke),et._reglType="buffer",et._buffer=Xe,et.subdata=function(Ve,ot){var pt,Et=0|(ot||0);if(Xe.bind(),x(Ve)||Ve instanceof ArrayBuffer)tt(Ve,Et);else if(Array.isArray(Ve)){if(Ve.length>0)if(typeof Ve[0]=="number"){var mt=B.allocType(Xe.dtype,Ve.length);Re(mt,Ve),tt(mt,Et),B.freeType(mt)}else if(Array.isArray(Ve[0])||x(Ve[0])){pt=Ae(Ve);var xt=Me(Ve,pt,Xe.dtype);tt(xt,Et),B.freeType(xt)}else Y.raise("invalid buffer data")}else if(J(Ve)){pt=Ve.shape;var Ot=Ve.stride,yt=0,qe=0,at=0,ht=0;pt.length===1?(yt=pt[0],qe=1,at=Ot[0],ht=0):pt.length===2?(yt=pt[0],qe=pt[1],at=Ot[0],ht=Ot[1]):Y.raise("invalid shape");var Mt=Array.isArray(Ve.data)?Xe.dtype:Se(Ve.data),zt=B.allocType(Mt,yt*qe);Ke(zt,Ve.data,yt,qe,at,ht,Ve.offset),tt(zt,Et),B.freeType(zt)}else Y.raise("invalid data for buffer subdata");return et},w.profile&&(et.stats=Xe.stats),et.destroy=function(){Ue(Xe)},et},createStream:function(ke,Fe){var Ye=pe.pop();return Ye||(Ye=new oe(ke)),Ye.bind(),De(Ye,Fe,35040,0,1,!1),Ye},destroyStream:function(ke){pe.push(ke)},clear:function(){ne(K).forEach(Ue),pe.forEach(Ue)},getBuffer:function(ke){return ke&&ke._buffer instanceof oe?ke._buffer:null},restore:function(){ne(K).forEach(function(ke){ke.buffer=$e.createBuffer(),$e.bindBuffer(ke.type,ke.buffer),$e.bufferData(ke.type,ke.persistentData||ke.byteLength,ke.usage)})},_initBuffer:De}}(bt,wt,ut,function($e){return $r.destroyBuffer($e)}),$r=function($e,St,w,D,ce){for(var K=w.maxAttributes,oe=new Array(K),pe=0;pe<K;++pe)oe[pe]=new ri;var be=0,De={},Ue={Record:ri,scope:{},state:oe,currentVAO:null,targetVAO:null,restore:ke()?function(){ke()&&ne(De).forEach(function(Ge){Ge.refresh()})}:function(){},createVAO:function(Ge){var Xe=new Ye;function et(tt){Y(Array.isArray(tt),"arguments to vertex array constructor must be an array"),Y(tt.length<K,"too many attributes"),Y(tt.length>0,"must specify at least one attribute");var Ve={},ot=Xe.attributes;ot.length=tt.length;for(var pt=0;pt<tt.length;++pt){var Et,mt=tt[pt],xt=ot[pt]=new ri,Ot=mt.data||mt;Array.isArray(Ot)||x(Ot)||J(Ot)?(Xe.buffers[pt]&&(Et=Xe.buffers[pt],x(Ot)&&Et._buffer.byteLength>=Ot.byteLength?Et.subdata(Ot):(Et.destroy(),Xe.buffers[pt]=null)),Xe.buffers[pt]||(Et=Xe.buffers[pt]=ce.create(mt,34962,!1,!0)),xt.buffer=ce.getBuffer(Et),xt.size=0|xt.buffer.dimension,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1,Ve[pt]=1):ce.getBuffer(mt)?(xt.buffer=ce.getBuffer(mt),xt.size=0|xt.buffer.dimension,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1):ce.getBuffer(mt.buffer)?(xt.buffer=ce.getBuffer(mt.buffer),xt.size=0|(+mt.size||xt.buffer.dimension),xt.normalized=!!mt.normalized||!1,"type"in mt?(Y.parameter(mt.type,_e,"invalid buffer type"),xt.type=_e[mt.type]):xt.type=xt.buffer.dtype,xt.offset=0|(mt.offset||0),xt.stride=0|(mt.stride||0),xt.divisor=0|(mt.divisor||0),xt.state=1,Y(xt.size>=1&&xt.size<=4,"size must be between 1 and 4"),Y(xt.offset>=0,"invalid offset"),Y(xt.stride>=0&&xt.stride<=255,"stride must be between 0 and 255"),Y(xt.divisor>=0,"divisor must be positive"),Y(!xt.divisor||!!St.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in mt?(Y(pt>0,"first attribute must not be a constant"),xt.x=+mt.x||0,xt.y=+mt.y||0,xt.z=+mt.z||0,xt.w=+mt.w||0,xt.state=2):Y(!1,"invalid attribute spec for location "+pt)}for(var yt=0;yt<Xe.buffers.length;++yt)!Ve[yt]&&Xe.buffers[yt]&&(Xe.buffers[yt].destroy(),Xe.buffers[yt]=null);return Xe.refresh(),et}return D.vaoCount+=1,et.destroy=function(){for(var tt=0;tt<Xe.buffers.length;++tt)Xe.buffers[tt]&&Xe.buffers[tt].destroy();Xe.buffers.length=0,Xe.destroy()},et._vao=Xe,et._reglType="vao",et(Ge)},getVAO:function(Ge){return typeof Ge=="function"&&Ge._vao?Ge._vao:null},destroyBuffer:function(Ge){for(var Xe=0;Xe<oe.length;++Xe){var et=oe[Xe];et.buffer===Ge&&($e.disableVertexAttribArray(Xe),et.buffer=null)}},setVAO:ke()?function(Ge){if(Ge!==Ue.currentVAO){var Xe=ke();Ge?Xe.bindVertexArrayOES(Ge.vao):Xe.bindVertexArrayOES(null),Ue.currentVAO=Ge}}:function(Ge){if(Ge!==Ue.currentVAO){if(Ge)Ge.bindAttrs();else for(var Xe=Fe(),et=0;et<oe.length;++et){var tt=oe[et];tt.buffer?($e.enableVertexAttribArray(et),$e.vertexAttribPointer(et,tt.size,tt.type,tt.normalized,tt.stride,tt.offfset),Xe&&tt.divisor&&Xe.vertexAttribDivisorANGLE(et,tt.divisor)):($e.disableVertexAttribArray(et),$e.vertexAttrib4f(et,tt.x,tt.y,tt.z,tt.w))}Ue.currentVAO=Ge}},clear:ke()?function(){ne(De).forEach(function(Ge){Ge.destroy()})}:function(){}};function ke(){return St.oes_vertex_array_object}function Fe(){return St.angle_instanced_arrays}function Ye(){this.id=++be,this.attributes=[];var Ge=ke();this.vao=Ge?Ge.createVertexArrayOES():null,De[this.id]=this,this.buffers=[]}return Ye.prototype.bindAttrs=function(){for(var Ge=Fe(),Xe=this.attributes,et=0;et<Xe.length;++et){var tt=Xe[et];tt.buffer?($e.enableVertexAttribArray(et),$e.bindBuffer(34962,tt.buffer.buffer),$e.vertexAttribPointer(et,tt.size,tt.type,tt.normalized,tt.stride,tt.offset),Ge&&tt.divisor&&Ge.vertexAttribDivisorANGLE(et,tt.divisor)):($e.disableVertexAttribArray(et),$e.vertexAttrib4f(et,tt.x,tt.y,tt.z,tt.w))}for(var Ve=Xe.length;Ve<K;++Ve)$e.disableVertexAttribArray(Ve)},Ye.prototype.refresh=function(){var Ge=ke();Ge&&(Ge.bindVertexArrayOES(this.vao),this.bindAttrs(),Ue.currentVAO=this)},Ye.prototype.destroy=function(){if(this.vao){var Ge=ke();this===Ue.currentVAO&&(Ue.currentVAO=null,Ge.bindVertexArrayOES(null)),Ge.deleteVertexArrayOES(this.vao),this.vao=null}De[this.id]&&(delete De[this.id],D.vaoCount-=1)},Ue}(bt,Lt,Vr,wt,Fr),Kr=function($e,St,w,D){var ce={},K=0,oe={uint8:5121,uint16:5123};function pe(ke){this.id=K++,ce[this.id]=this,this.buffer=ke,this.primType=4,this.vertCount=0,this.type=0}St.oes_element_index_uint&&(oe.uint32=5125),pe.prototype.bind=function(){this.buffer.bind()};var be=[];function De(ke,Fe,Ye,Ge,Xe,et,tt){var Ve;if(ke.buffer.bind(),Fe){var ot=tt;tt||x(Fe)&&(!J(Fe)||x(Fe.data))||(ot=St.oes_element_index_uint?5125:5123),w._initBuffer(ke.buffer,Fe,Ye,ot,3)}else $e.bufferData(34963,et,Ye),ke.buffer.dtype=Ve||5121,ke.buffer.usage=Ye,ke.buffer.dimension=3,ke.buffer.byteLength=et;if(Ve=tt,!tt){switch(ke.buffer.dtype){case 5121:case 5120:Ve=5121;break;case 5123:case 5122:Ve=5123;break;case 5125:case 5124:Ve=5125;break;default:Y.raise("unsupported type for element array")}ke.buffer.dtype=Ve}ke.type=Ve,Y(Ve!==5125||!!St.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var pt=Xe;pt<0&&(pt=ke.buffer.byteLength,Ve===5123?pt>>=1:Ve===5125&&(pt>>=2)),ke.vertCount=pt;var Et=Ge;if(Ge<0){Et=4;var mt=ke.buffer.dimension;mt===1&&(Et=0),mt===2&&(Et=1),mt===3&&(Et=4)}ke.primType=Et}function Ue(ke){D.elementsCount--,Y(ke.buffer!==null,"must not double destroy elements"),delete ce[ke.id],ke.buffer.destroy(),ke.buffer=null}return{create:function(ke,Fe){var Ye=w.create(null,34963,!0),Ge=new pe(Ye._buffer);function Xe(et){if(et)if(typeof et=="number")Ye(et),Ge.primType=4,Ge.vertCount=0|et,Ge.type=5121;else{var tt=null,Ve=35044,ot=-1,pt=-1,Et=0,mt=0;Array.isArray(et)||x(et)||J(et)?tt=et:(Y.type(et,"object","invalid arguments for elements"),"data"in et&&(tt=et.data,Y(Array.isArray(tt)||x(tt)||J(tt),"invalid data for element buffer")),"usage"in et&&(Y.parameter(et.usage,je,"invalid element buffer usage"),Ve=je[et.usage]),"primitive"in et&&(Y.parameter(et.primitive,Je,"invalid element buffer primitive"),ot=Je[et.primitive]),"count"in et&&(Y(typeof et.count=="number"&&et.count>=0,"invalid vertex count for elements"),pt=0|et.count),"type"in et&&(Y.parameter(et.type,oe,"invalid buffer type"),mt=oe[et.type]),"length"in et?Et=0|et.length:(Et=pt,mt===5123||mt===5122?Et*=2:mt!==5125&&mt!==5124||(Et*=4))),De(Ge,tt,Ve,ot,pt,Et,mt)}else Ye(),Ge.primType=4,Ge.vertCount=0,Ge.type=5121;return Xe}return D.elementsCount++,Xe(ke),Xe._reglType="elements",Xe._elements=Ge,Xe.subdata=function(et,tt){return Ye.subdata(et,tt),Xe},Xe.destroy=function(){Ue(Ge)},Xe},createStream:function(ke){var Fe=be.pop();return Fe||(Fe=new pe(w.create(null,34963,!0,!1)._buffer)),De(Fe,ke,35040,-1,-1,0,0),Fe},destroyStream:function(ke){be.push(ke)},getElements:function(ke){return typeof ke=="function"&&ke._elements instanceof pe?ke._elements:null},clear:function(){ne(ce).forEach(Ue)}}}(bt,Lt,Fr,wt),jn=function($e,St,w,D){var ce={},K={};function oe(Ge,Xe,et,tt){this.name=Ge,this.id=Xe,this.location=et,this.info=tt}function pe(Ge,Xe){for(var et=0;et<Ge.length;++et)if(Ge[et].id===Xe.id)return void(Ge[et].location=Xe.location);Ge.push(Xe)}function be(Ge,Xe,et){var tt=Ge===35632?ce:K,Ve=tt[Xe];if(!Ve){var ot=St.str(Xe);Ve=$e.createShader(Ge),$e.shaderSource(Ve,ot),$e.compileShader(Ve),Y.shaderError($e,Ve,ot,Ge,et),tt[Xe]=Ve}return Ve}var De={},Ue=[],ke=0;function Fe(Ge,Xe){this.id=ke++,this.fragId=Ge,this.vertId=Xe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,D.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ye(Ge,Xe,et){var tt,Ve,ot=be(35632,Ge.fragId),pt=be(35633,Ge.vertId),Et=Ge.program=$e.createProgram();if($e.attachShader(Et,ot),$e.attachShader(Et,pt),et)for(tt=0;tt<et.length;++tt){var mt=et[tt];$e.bindAttribLocation(Et,mt[0],mt[1])}$e.linkProgram(Et),Y.linkError($e,Et,St.str(Ge.fragId),St.str(Ge.vertId),Xe);var xt=$e.getProgramParameter(Et,35718);D.profile&&(Ge.stats.uniformsCount=xt);var Ot=Ge.uniforms;for(tt=0;tt<xt;++tt)if(Ve=$e.getActiveUniform(Et,tt))if(Ve.size>1)for(var yt=0;yt<Ve.size;++yt){var qe=Ve.name.replace("[0]","["+yt+"]");pe(Ot,new oe(qe,St.id(qe),$e.getUniformLocation(Et,qe),Ve))}else pe(Ot,new oe(Ve.name,St.id(Ve.name),$e.getUniformLocation(Et,Ve.name),Ve));var at=$e.getProgramParameter(Et,35721);D.profile&&(Ge.stats.attributesCount=at);var ht=Ge.attributes;for(tt=0;tt<at;++tt)(Ve=$e.getActiveAttrib(Et,tt))&&pe(ht,new oe(Ve.name,St.id(Ve.name),$e.getAttribLocation(Et,Ve.name),Ve))}return D.profile&&(w.getMaxUniformsCount=function(){var Ge=0;return Ue.forEach(function(Xe){Xe.stats.uniformsCount>Ge&&(Ge=Xe.stats.uniformsCount)}),Ge},w.getMaxAttributesCount=function(){var Ge=0;return Ue.forEach(function(Xe){Xe.stats.attributesCount>Ge&&(Ge=Xe.stats.attributesCount)}),Ge}),{clear:function(){var Ge=$e.deleteShader.bind($e);ne(ce).forEach(Ge),ce={},ne(K).forEach(Ge),K={},Ue.forEach(function(Xe){$e.deleteProgram(Xe.program)}),Ue.length=0,De={},w.shaderCount=0},program:function(Ge,Xe,et,tt){Y.command(Ge>=0,"missing vertex shader",et),Y.command(Xe>=0,"missing fragment shader",et);var Ve=De[Xe];Ve||(Ve=De[Xe]={});var ot=Ve[Ge];if(ot&&(ot.refCount++,!tt))return ot;var pt=new Fe(Xe,Ge);return w.shaderCount++,Ye(pt,et,tt),ot||(Ve[Ge]=pt),Ue.push(pt),O(pt,{destroy:function(){if(pt.refCount--,pt.refCount<=0){$e.deleteProgram(pt.program);var Et=Ue.indexOf(pt);Ue.splice(Et,1),w.shaderCount--}Ve[pt.vertId].refCount<=0&&($e.deleteShader(K[pt.vertId]),delete K[pt.vertId],delete De[pt.fragId][pt.vertId]),Object.keys(De[pt.fragId]).length||($e.deleteShader(ce[pt.fragId]),delete ce[pt.fragId],delete De[pt.fragId])}})},restore:function(){ce={},K={};for(var Ge=0;Ge<Ue.length;++Ge)Ye(Ue[Ge],null,Ue[Ge].attributes.map(function(Xe){return[Xe.location,Xe.name]}))},shader:be,frag:-1,vert:-1}}(bt,vt,wt,ut),Cn=Rn(bt,Lt,Vr,function(){Mn.procs.poll()},gr,wt,ut),qn=function($e,St,w,D,ce){var K={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};St.ext_srgb&&(K.srgba=35907),St.ext_color_buffer_half_float&&(K.rgba16f=34842,K.rgb16f=34843),St.webgl_color_buffer_float&&(K.rgba32f=34836);var oe=[];Object.keys(K).forEach(function(ke){var Fe=K[ke];oe[Fe]=ke});var pe=0,be={};function De(ke){this.id=pe++,this.refCount=1,this.renderbuffer=ke,this.format=32854,this.width=0,this.height=0,ce.profile&&(this.stats={size:0})}function Ue(ke){var Fe=ke.renderbuffer;Y(Fe,"must not double destroy renderbuffer"),$e.bindRenderbuffer(36161,null),$e.deleteRenderbuffer(Fe),ke.renderbuffer=null,ke.refCount=0,delete be[ke.id],D.renderbufferCount--}return De.prototype.decRef=function(){--this.refCount<=0&&Ue(this)},ce.profile&&(D.getTotalRenderbufferSize=function(){var ke=0;return Object.keys(be).forEach(function(Fe){ke+=be[Fe].stats.size}),ke}),{create:function(ke,Fe){var Ye=new De($e.createRenderbuffer());function Ge(Xe,et){var tt=0,Ve=0,ot=32854;if(_(Xe)==="object"&&Xe){var pt=Xe;if("shape"in pt){var Et=pt.shape;Y(Array.isArray(Et)&&Et.length>=2,"invalid renderbuffer shape"),tt=0|Et[0],Ve=0|Et[1]}else"radius"in pt&&(tt=Ve=0|pt.radius),"width"in pt&&(tt=0|pt.width),"height"in pt&&(Ve=0|pt.height);"format"in pt&&(Y.parameter(pt.format,K,"invalid renderbuffer format"),ot=K[pt.format])}else typeof Xe=="number"?(tt=0|Xe,Ve=typeof et=="number"?0|et:tt):Xe?Y.raise("invalid arguments to renderbuffer constructor"):tt=Ve=1;if(Y(tt>0&&Ve>0&&tt<=w.maxRenderbufferSize&&Ve<=w.maxRenderbufferSize,"invalid renderbuffer size"),tt!==Ye.width||Ve!==Ye.height||ot!==Ye.format)return Ge.width=Ye.width=tt,Ge.height=Ye.height=Ve,Ye.format=ot,$e.bindRenderbuffer(36161,Ye.renderbuffer),$e.renderbufferStorage(36161,ot,tt,Ve),Y($e.getError()===0,"invalid render buffer format"),ce.profile&&(Ye.stats.size=Er(Ye.format,Ye.width,Ye.height)),Ge.format=oe[Ye.format],Ge}return be[Ye.id]=Ye,D.renderbufferCount++,Ge(ke,Fe),Ge.resize=function(Xe,et){var tt=0|Xe,Ve=0|et||tt;return tt===Ye.width&&Ve===Ye.height||(Y(tt>0&&Ve>0&&tt<=w.maxRenderbufferSize&&Ve<=w.maxRenderbufferSize,"invalid renderbuffer size"),Ge.width=Ye.width=tt,Ge.height=Ye.height=Ve,$e.bindRenderbuffer(36161,Ye.renderbuffer),$e.renderbufferStorage(36161,Ye.format,tt,Ve),Y($e.getError()===0,"invalid render buffer format"),ce.profile&&(Ye.stats.size=Er(Ye.format,Ye.width,Ye.height))),Ge},Ge._reglType="renderbuffer",Ge._renderbuffer=Ye,ce.profile&&(Ge.stats=Ye.stats),Ge.destroy=function(){Ye.decRef()},Ge},clear:function(){ne(be).forEach(Ue)},restore:function(){ne(be).forEach(function(ke){ke.renderbuffer=$e.createRenderbuffer(),$e.bindRenderbuffer(36161,ke.renderbuffer),$e.renderbufferStorage(36161,ke.format,ke.width,ke.height)}),$e.bindRenderbuffer(36161,null)}}}(bt,Lt,Vr,wt,ut),Qr=function($e,St,w,D,ce,K){var oe={cur:null,next:null,dirty:!1,setFBO:null},pe=["rgba"],be=["rgba4","rgb565","rgb5 a1"];St.ext_srgb&&be.push("srgba"),St.ext_color_buffer_half_float&&be.push("rgba16f","rgb16f"),St.webgl_color_buffer_float&&be.push("rgba32f");var De=["uint8"];function Ue(yt,qe,at){this.target=yt,this.texture=qe,this.renderbuffer=at;var ht=0,Mt=0;qe?(ht=qe.width,Mt=qe.height):at&&(ht=at.width,Mt=at.height),this.width=ht,this.height=Mt}function ke(yt){yt&&(yt.texture&&yt.texture._texture.decRef(),yt.renderbuffer&&yt.renderbuffer._renderbuffer.decRef())}function Fe(yt,qe,at){if(yt)if(yt.texture){var ht=yt.texture._texture,Mt=Math.max(1,ht.width),zt=Math.max(1,ht.height);Y(Mt===qe&&zt===at,"inconsistent width/height for supplied texture"),ht.refCount+=1}else{var Ut=yt.renderbuffer._renderbuffer;Y(Ut.width===qe&&Ut.height===at,"inconsistent width/height for renderbuffer"),Ut.refCount+=1}}function Ye(yt,qe){qe&&(qe.texture?$e.framebufferTexture2D(36160,yt,qe.target,qe.texture._texture.texture,0):$e.framebufferRenderbuffer(36160,yt,36161,qe.renderbuffer._renderbuffer.renderbuffer))}function Ge(yt){var qe=3553,at=null,ht=null,Mt=yt;_(yt)==="object"&&(Mt=yt.data,"target"in yt&&(qe=0|yt.target)),Y.type(Mt,"function","invalid attachment data");var zt=Mt._reglType;return zt==="texture2d"?(at=Mt,Y(qe===3553)):zt==="textureCube"?(at=Mt,Y(qe>=34069&&qe<34075,"invalid cube map target")):zt==="renderbuffer"?(ht=Mt,qe=36161):Y.raise("invalid regl object for attachment"),new Ue(qe,at,ht)}function Xe(yt,qe,at,ht,Mt){if(at){var zt=D.create2D({width:yt,height:qe,format:ht,type:Mt});return zt._texture.refCount=0,new Ue(3553,zt,null)}var Ut=ce.create({width:yt,height:qe,format:ht});return Ut._renderbuffer.refCount=0,new Ue(36161,null,Ut)}function et(yt){return yt&&(yt.texture||yt.renderbuffer)}function tt(yt,qe,at){yt&&(yt.texture?yt.texture.resize(qe,at):yt.renderbuffer&&yt.renderbuffer.resize(qe,at),yt.width=qe,yt.height=at)}St.oes_texture_half_float&&De.push("half float","float16"),St.oes_texture_float&&De.push("float","float32");var Ve=0,ot={};function pt(){this.id=Ve++,ot[this.id]=this,this.framebuffer=$e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Et(yt){yt.colorAttachments.forEach(ke),ke(yt.depthAttachment),ke(yt.stencilAttachment),ke(yt.depthStencilAttachment)}function mt(yt){var qe=yt.framebuffer;Y(qe,"must not double destroy framebuffer"),$e.deleteFramebuffer(qe),yt.framebuffer=null,K.framebufferCount--,delete ot[yt.id]}function xt(yt){var qe;$e.bindFramebuffer(36160,yt.framebuffer);var at=yt.colorAttachments;for(qe=0;qe<at.length;++qe)Ye(36064+qe,at[qe]);for(qe=at.length;qe<w.maxColorAttachments;++qe)$e.framebufferTexture2D(36160,36064+qe,3553,null,0);$e.framebufferTexture2D(36160,33306,3553,null,0),$e.framebufferTexture2D(36160,36096,3553,null,0),$e.framebufferTexture2D(36160,36128,3553,null,0),Ye(36096,yt.depthAttachment),Ye(36128,yt.stencilAttachment),Ye(33306,yt.depthStencilAttachment);var ht=$e.checkFramebufferStatus(36160);$e.isContextLost()||ht===36053||Y.raise("framebuffer configuration not supported, status = "+Un[ht]),$e.bindFramebuffer(36160,oe.next?oe.next.framebuffer:null),oe.cur=oe.next,$e.getError()}function Ot(yt,qe){var at=new pt;function ht(Mt,zt){var Ut;Y(oe.next!==at,"can not update framebuffer which is currently in use");var Xt=0,fr=0,Or=!0,kr=!0,br=null,ur=!0,an="rgba",sn="uint8",Ii=1,Wi=null,fo=null,or=null,ga=!1;if(typeof Mt=="number")Xt=0|Mt,fr=0|zt||Xt;else if(Mt){Y.type(Mt,"object","invalid arguments for framebuffer");var Xr=Mt;if("shape"in Xr){var Ao=Xr.shape;Y(Array.isArray(Ao)&&Ao.length>=2,"invalid shape for framebuffer"),Xt=Ao[0],fr=Ao[1]}else"radius"in Xr&&(Xt=fr=Xr.radius),"width"in Xr&&(Xt=Xr.width),"height"in Xr&&(fr=Xr.height);("color"in Xr||"colors"in Xr)&&(br=Xr.color||Xr.colors,Array.isArray(br)&&Y(br.length===1||St.webgl_draw_buffers,"multiple render targets not supported")),br||("colorCount"in Xr&&(Ii=0|Xr.colorCount,Y(Ii>0,"invalid color buffer count")),"colorTexture"in Xr&&(ur=!!Xr.colorTexture,an="rgba4"),"colorType"in Xr&&(sn=Xr.colorType,ur?(Y(St.oes_texture_float||!(sn==="float"||sn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Y(St.oes_texture_half_float||!(sn==="half float"||sn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):sn==="half float"||sn==="float16"?(Y(St.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),an="rgba16f"):sn!=="float"&&sn!=="float32"||(Y(St.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),an="rgba32f"),Y.oneOf(sn,De,"invalid color type")),"colorFormat"in Xr&&(an=Xr.colorFormat,pe.indexOf(an)>=0?ur=!0:be.indexOf(an)>=0?ur=!1:ur?Y.oneOf(Xr.colorFormat,pe,"invalid color format for texture"):Y.oneOf(Xr.colorFormat,be,"invalid color format for renderbuffer"))),("depthTexture"in Xr||"depthStencilTexture"in Xr)&&(ga=!(!Xr.depthTexture&&!Xr.depthStencilTexture),Y(!ga||St.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Xr&&(typeof Xr.depth=="boolean"?Or=Xr.depth:(Wi=Xr.depth,kr=!1)),"stencil"in Xr&&(typeof Xr.stencil=="boolean"?kr=Xr.stencil:(fo=Xr.stencil,Or=!1)),"depthStencil"in Xr&&(typeof Xr.depthStencil=="boolean"?Or=kr=Xr.depthStencil:(or=Xr.depthStencil,Or=!1,kr=!1))}else Xt=fr=1;var Nt=null,uo=null,yo=null,co=null;if(Array.isArray(br))Nt=br.map(Ge);else if(br)Nt=[Ge(br)];else for(Nt=new Array(Ii),Ut=0;Ut<Ii;++Ut)Nt[Ut]=Xe(Xt,fr,ur,an,sn);Y(St.webgl_draw_buffers||Nt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Y(Nt.length<=w.maxColorAttachments,"too many color attachments, not supported"),Xt=Xt||Nt[0].width,fr=fr||Nt[0].height,Wi?uo=Ge(Wi):Or&&!kr&&(uo=Xe(Xt,fr,ga,"depth","uint32")),fo?yo=Ge(fo):kr&&!Or&&(yo=Xe(Xt,fr,!1,"stencil","uint8")),or?co=Ge(or):!Wi&&!fo&&kr&&Or&&(co=Xe(Xt,fr,ga,"depth stencil","depth stencil")),Y(!!Wi+!!fo+!!or<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Da=null;for(Ut=0;Ut<Nt.length;++Ut)if(Fe(Nt[Ut],Xt,fr),Y(!Nt[Ut]||Nt[Ut].texture&&ln.indexOf(Nt[Ut].texture._texture.format)>=0||Nt[Ut].renderbuffer&&Qn.indexOf(Nt[Ut].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Ut+" is invalid"),Nt[Ut]&&Nt[Ut].texture){var Ra=yn[Nt[Ut].texture._texture.format]*mn[Nt[Ut].texture._texture.type];Da===null?Da=Ra:Y(Da===Ra,"all color attachments much have the same number of bits per pixel.")}return Fe(uo,Xt,fr),Y(!uo||uo.texture&&uo.texture._texture.format===6402||uo.renderbuffer&&uo.renderbuffer._renderbuffer.format===33189,"invalid depth attachment for framebuffer object"),Fe(yo,Xt,fr),Y(!yo||yo.renderbuffer&&yo.renderbuffer._renderbuffer.format===36168,"invalid stencil attachment for framebuffer object"),Fe(co,Xt,fr),Y(!co||co.texture&&co.texture._texture.format===34041||co.renderbuffer&&co.renderbuffer._renderbuffer.format===34041,"invalid depth-stencil attachment for framebuffer object"),Et(at),at.width=Xt,at.height=fr,at.colorAttachments=Nt,at.depthAttachment=uo,at.stencilAttachment=yo,at.depthStencilAttachment=co,ht.color=Nt.map(et),ht.depth=et(uo),ht.stencil=et(yo),ht.depthStencil=et(co),ht.width=at.width,ht.height=at.height,xt(at),ht}return K.framebufferCount++,ht(yt,qe),O(ht,{resize:function(Mt,zt){Y(oe.next!==at,"can not resize a framebuffer which is currently in use");var Ut=Math.max(0|Mt,1),Xt=Math.max(0|zt||Ut,1);if(Ut===at.width&&Xt===at.height)return ht;for(var fr=at.colorAttachments,Or=0;Or<fr.length;++Or)tt(fr[Or],Ut,Xt);return tt(at.depthAttachment,Ut,Xt),tt(at.stencilAttachment,Ut,Xt),tt(at.depthStencilAttachment,Ut,Xt),at.width=ht.width=Ut,at.height=ht.height=Xt,xt(at),ht},_reglType:"framebuffer",_framebuffer:at,destroy:function(){mt(at),Et(at)},use:function(Mt){oe.setFBO({framebuffer:ht},Mt)}})}return O(oe,{getFramebuffer:function(yt){if(typeof yt=="function"&&yt._reglType==="framebuffer"){var qe=yt._framebuffer;if(qe instanceof pt)return qe}return null},create:Ot,createCube:function(yt){var qe=Array(6);function at(ht){var Mt;Y(qe.indexOf(oe.next)<0,"can not update framebuffer which is currently in use");var zt,Ut={color:null},Xt=0,fr=null,Or="rgba",kr="uint8",br=1;if(typeof ht=="number")Xt=0|ht;else if(ht){Y.type(ht,"object","invalid arguments for framebuffer");var ur=ht;if("shape"in ur){var an=ur.shape;Y(Array.isArray(an)&&an.length>=2,"invalid shape for framebuffer"),Y(an[0]===an[1],"cube framebuffer must be square"),Xt=an[0]}else"radius"in ur&&(Xt=0|ur.radius),"width"in ur?(Xt=0|ur.width,"height"in ur&&Y(ur.height===Xt,"must be square")):"height"in ur&&(Xt=0|ur.height);("color"in ur||"colors"in ur)&&(fr=ur.color||ur.colors,Array.isArray(fr)&&Y(fr.length===1||St.webgl_draw_buffers,"multiple render targets not supported")),fr||("colorCount"in ur&&(br=0|ur.colorCount,Y(br>0,"invalid color buffer count")),"colorType"in ur&&(Y.oneOf(ur.colorType,De,"invalid color type"),kr=ur.colorType),"colorFormat"in ur&&(Or=ur.colorFormat,Y.oneOf(ur.colorFormat,pe,"invalid color format for texture"))),"depth"in ur&&(Ut.depth=ur.depth),"stencil"in ur&&(Ut.stencil=ur.stencil),"depthStencil"in ur&&(Ut.depthStencil=ur.depthStencil)}else Xt=1;if(fr)if(Array.isArray(fr))for(zt=[],Mt=0;Mt<fr.length;++Mt)zt[Mt]=fr[Mt];else zt=[fr];else{zt=Array(br);var sn={radius:Xt,format:Or,type:kr};for(Mt=0;Mt<br;++Mt)zt[Mt]=D.createCube(sn)}for(Ut.color=Array(zt.length),Mt=0;Mt<zt.length;++Mt){var Ii=zt[Mt];Y(typeof Ii=="function"&&Ii._reglType==="textureCube","invalid cube map"),Xt=Xt||Ii.width,Y(Ii.width===Xt&&Ii.height===Xt,"invalid cube map shape"),Ut.color[Mt]={target:34069,data:zt[Mt]}}for(Mt=0;Mt<6;++Mt){for(var Wi=0;Wi<zt.length;++Wi)Ut.color[Wi].target=34069+Mt;Mt>0&&(Ut.depth=qe[0].depth,Ut.stencil=qe[0].stencil,Ut.depthStencil=qe[0].depthStencil),qe[Mt]?qe[Mt](Ut):qe[Mt]=Ot(Ut)}return O(at,{width:Xt,height:Xt,color:zt})}return at(yt),O(at,{faces:qe,resize:function(ht){var Mt,zt=0|ht;if(Y(zt>0&&zt<=w.maxCubeMapSize,"invalid radius for cube fbo"),zt===at.width)return at;var Ut=at.color;for(Mt=0;Mt<Ut.length;++Mt)Ut[Mt].resize(zt);for(Mt=0;Mt<6;++Mt)qe[Mt].resize(zt);return at.width=at.height=zt,at},_reglType:"framebufferCube",destroy:function(){qe.forEach(function(ht){ht.destroy()})}})},clear:function(){ne(ot).forEach(mt)},restore:function(){oe.cur=null,oe.next=null,oe.dirty=!0,ne(ot).forEach(function(yt){yt.framebuffer=$e.createFramebuffer(),xt(yt)})}})}(bt,Lt,Vr,Cn,qn,wt),Mn=Tt(bt,vt,Lt,Vr,Fr,Kr,0,Qr,{},$r,jn,{elements:null,primitive:4,count:-1,offset:0,instances:-1},gr,Wt,ut),ai=Oi(bt,Qr,Mn.procs.poll,gr,Ft,Lt,Vr),Sn=Mn.next,si=bt.canvas,Jr=[],ko=[],Fi=[],Qi=[ut.onDestroy],nn=null;function pi(){if(Jr.length===0)return Wt&&Wt.update(),void(nn=null);nn=le.next(pi),so();for(var $e=Jr.length-1;$e>=0;--$e){var St=Jr[$e];St&&St(gr,null,0)}bt.flush(),Wt&&Wt.update()}function Ji(){!nn&&Jr.length>0&&(nn=le.next(pi))}function Ai(){nn&&(le.cancel(pi),nn=null)}function Gn($e){$e.preventDefault(),we=!0,Ai(),ko.forEach(function(St){St()})}function zi($e){bt.getError(),we=!1,ze.restore(),jn.restore(),Fr.restore(),Cn.restore(),qn.restore(),Qr.restore(),$r.restore(),Wt&&Wt.restore(),Mn.procs.refresh(),Ji(),Fi.forEach(function(St){St()})}function Di($e){function St(Fe,Ye){var Ge={},Xe={};return Object.keys(Fe).forEach(function(et){var tt=Fe[et];if(W.isDynamic(tt))Xe[et]=W.unbox(tt,et);else{if(Ye&&Array.isArray(tt)){for(var Ve=0;Ve<tt.length;++Ve)if(W.isDynamic(tt[Ve]))return void(Xe[et]=W.unbox(tt,et))}Ge[et]=tt}}),{dynamic:Xe,static:Ge}}Y(!!$e,"invalid args to regl({...})"),Y.type($e,"object","invalid args to regl({...})");var w=St($e.context||{},!0),D=St($e.uniforms||{},!0),ce=St($e.attributes||{},!1),K=St(function(Fe){var Ye=O({},Fe);function Ge(Xe){if(Xe in Ye){var et=Ye[Xe];delete Ye[Xe],Object.keys(et).forEach(function(tt){Ye[Xe+"."+tt]=et[tt]})}}return delete Ye.uniforms,delete Ye.attributes,delete Ye.context,delete Ye.vao,"stencil"in Ye&&Ye.stencil.op&&(Ye.stencil.opBack=Ye.stencil.opFront=Ye.stencil.op,delete Ye.stencil.op),Ge("blend"),Ge("depth"),Ge("cull"),Ge("stencil"),Ge("polygonOffset"),Ge("scissor"),Ge("sample"),"vao"in Fe&&(Ye.vao=Fe.vao),Ye}($e),!1),oe={gpuTime:0,cpuTime:0,count:0},pe=Mn.compile(K,ce,D,w,oe),be=pe.draw,De=pe.batch,Ue=pe.scope,ke=[];return O(function(Fe,Ye){var Ge;if(we&&Y.raise("context lost"),typeof Fe=="function")return Ue.call(this,null,Fe,0);if(typeof Ye=="function")if(typeof Fe=="number")for(Ge=0;Ge<Fe;++Ge)Ue.call(this,null,Ye,Ge);else{if(!Array.isArray(Fe))return Ue.call(this,Fe,Ye,0);for(Ge=0;Ge<Fe.length;++Ge)Ue.call(this,Fe[Ge],Ye,Ge)}else if(typeof Fe=="number"){if(Fe>0)return De.call(this,function(Xe){for(;ke.length<Xe;)ke.push(null);return ke}(0|Fe),0|Fe)}else{if(!Array.isArray(Fe))return be.call(this,Fe);if(Fe.length)return De.call(this,Fe,Fe.length)}},{stats:oe,destroy:function(){pe.destroy()}})}si&&(si.addEventListener("webglcontextlost",Gn,!1),si.addEventListener("webglcontextrestored",zi,!1));var fi=Qr.setFBO=Di({framebuffer:W.define.call(null,1,"framebuffer")});function Ui($e,St){var w=0;Mn.procs.poll();var D=St.color;D&&(bt.clearColor(+D[0]||0,+D[1]||0,+D[2]||0,+D[3]||0),w|=16384),"depth"in St&&(bt.clearDepth(+St.depth),w|=256),"stencil"in St&&(bt.clearStencil(0|St.stencil),w|=1024),Y(!!w,"called regl.clear with no buffer specified"),bt.clear(w)}function Ci($e){return Y.type($e,"function","regl.frame() callback must be a function"),Jr.push($e),Ji(),{cancel:function(){var St=vr(Jr,$e);Y(St>=0,"cannot cancel a frame twice"),Jr[St]=function w(){var D=vr(Jr,w);Jr[D]=Jr[Jr.length-1],Jr.length-=1,Jr.length<=0&&Ai()}}}}function eo(){var $e=Sn.viewport,St=Sn.scissor_box;$e[0]=$e[1]=St[0]=St[1]=0,gr.viewportWidth=gr.framebufferWidth=gr.drawingBufferWidth=$e[2]=St[2]=bt.drawingBufferWidth,gr.viewportHeight=gr.framebufferHeight=gr.drawingBufferHeight=$e[3]=St[3]=bt.drawingBufferHeight}function so(){gr.tick+=1,gr.time=Ti(),eo(),Mn.procs.poll()}function Vi(){Cn.refresh(),eo(),Mn.procs.refresh(),Wt&&Wt.update()}function Ti(){return(Oe()-er)/1e3}Vi();var _t=O(Di,{clear:function($e){if(Y(_($e)==="object"&&$e,"regl.clear() takes an object as input"),"framebuffer"in $e)if($e.framebuffer&&$e.framebuffer_reglType==="framebufferCube")for(var St=0;St<6;++St)fi(O({framebuffer:$e.framebuffer.faces[St]},$e),Ui);else fi($e,Ui);else Ui(0,$e)},prop:W.define.bind(null,1),context:W.define.bind(null,2),this:W.define.bind(null,3),draw:Di({}),buffer:function($e){return Fr.create($e,34962,!1,!1)},elements:function($e){return Kr.create($e,!1)},texture:Cn.create2D,cube:Cn.createCube,renderbuffer:qn.create,framebuffer:Qr.create,framebufferCube:Qr.createCube,vao:$r.createVAO,attributes:Ft,frame:Ci,on:function($e,St){var w;switch(Y.type(St,"function","listener callback must be a function"),$e){case"frame":return Ci(St);case"lost":w=ko;break;case"restore":w=Fi;break;case"destroy":w=Qi;break;default:Y.raise("invalid event, must be one of frame,lost,restore,destroy")}return w.push(St),{cancel:function(){for(var D=0;D<w.length;++D)if(w[D]===St)return w[D]=w[w.length-1],void w.pop()}}},limits:Vr,hasExtension:function($e){return Vr.extensions.indexOf($e.toLowerCase())>=0},read:ai,destroy:function(){Jr.length=0,Ai(),si&&(si.removeEventListener("webglcontextlost",Gn),si.removeEventListener("webglcontextrestored",zi)),jn.clear(),Qr.clear(),qn.clear(),Cn.clear(),Kr.clear(),Fr.clear(),$r.clear(),Wt&&Wt.clear(),Qi.forEach(function($e){$e()})},_gl:bt,_refresh:Vi,poll:function(){so(),Wt&&Wt.update()},now:Ti,stats:wt});return ut.onDone(null,_t),_t}},_(b)==="object"&&R!==void 0?R.exports=M():(c=typeof(f=M)=="function"?f.call(b,o,b,R):f)===void 0||(R.exports=c)},,,,,,,,function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GADDIAsync=b.getNeighborsAsync=b.pageRankAsync=b.minimumSpanningTreeAsync=b.louvainAsync=b.labelPropagationAsync=b.floydWarshallAsync=b.findShortestPathAsync=b.findAllPathAsync=b.dijkstraAsync=b.detectAllUndirectedCycleAsync=b.detectAllDirectedCycleAsync=b.detectAllCyclesAsync=b.detectCycleAsync=b.getOutDegreeAsync=b.getInDegreeAsync=b.getDegreeAsync=b.connectedComponentAsync=b.getAdjMatrixAsync=void 0;var f,c=(f=o(281))&&f.__esModule?f:{default:f},M=o(141);b.getAdjMatrixAsync=function(_,x){return(0,c.default)(M.ALGORITHM.getAdjMatrix).apply(void 0,[_,x])},b.connectedComponentAsync=function(_,x){return(0,c.default)(M.ALGORITHM.connectedComponent).apply(void 0,[_,x])},b.getDegreeAsync=function(_){return(0,c.default)(M.ALGORITHM.getDegree)(_)},b.getInDegreeAsync=function(_,x){return(0,c.default)(M.ALGORITHM.getInDegree)(_,x)},b.getOutDegreeAsync=function(_,x){return(0,c.default)(M.ALGORITHM.getOutDegree)(_,x)},b.detectCycleAsync=function(_){return(0,c.default)(M.ALGORITHM.detectCycle)(_)},b.detectAllCyclesAsync=function(_){return(0,c.default)(M.ALGORITHM.detectAllCycles)(_)},b.detectAllDirectedCycleAsync=function(_){return(0,c.default)(M.ALGORITHM.detectAllDirectedCycle)(_)},b.detectAllUndirectedCycleAsync=function(_){return(0,c.default)(M.ALGORITHM.detectAllUndirectedCycle)(_)},b.dijkstraAsync=function(_,x,O,S){return(0,c.default)(M.ALGORITHM.dijkstra).apply(void 0,[_,x,O,S])},b.findAllPathAsync=function(_,x,O,S){return(0,c.default)(M.ALGORITHM.findAllPath).apply(void 0,[_,x,O,S])},b.findShortestPathAsync=function(_,x,O,S,g){return(0,c.default)(M.ALGORITHM.findShortestPath).apply(void 0,[_,x,O,S,g])},b.floydWarshallAsync=function(_,x){return(0,c.default)(M.ALGORITHM.floydWarshall).apply(void 0,[_,x])},b.labelPropagationAsync=function(_,x,O,S){return S===void 0&&(S=1e3),(0,c.default)(M.ALGORITHM.labelPropagation)(_,x,O,S)},b.louvainAsync=function(_,x,O,S){return(0,c.default)(M.ALGORITHM.louvain)(_,x,O,S)},b.minimumSpanningTreeAsync=function(_,x,O){return(0,c.default)(M.ALGORITHM.minimumSpanningTree).apply(void 0,[_,x,O])},b.pageRankAsync=function(_,x,O){return(0,c.default)(M.ALGORITHM.pageRank).apply(void 0,[_,x,O])},b.getNeighborsAsync=function(_,x,O){return(0,c.default)(M.ALGORITHM.getNeighbors).apply(void 0,[_,x,O])},b.GADDIAsync=function(_,x,O,S,g,h,y){return O===void 0&&(O=!1),h===void 0&&(h="cluster"),y===void 0&&(y="cluster"),(0,c.default)(M.ALGORITHM.GADDI).apply(void 0,[_,x,O,S,g,h,y])}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f,c=o(141),M=(f=o(282))&&f.__esModule?f:{default:f},_=function(x){return function(){for(var O=[],S=0;S<arguments.length;S++)O[S]=arguments[S];return new Promise(function(g,h){var y=new M.default;y.postMessage({_algorithmType:x,data:O}),y.onmessage=function(E){var m=E.data,p=m.data,A=m._algorithmType;c.MESSAGE.SUCCESS===A?g(p):h(),y.terminate()}})}};b.default=_},function(R,b,o){"use strict";function f(O){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(O)}Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var c=function(O){if(O&&O.__esModule)return O;if(O===null||f(O)!=="object"&&typeof O!="function")return{default:O};var S=_();if(S&&S.has(O))return S.get(O);var g={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in O)if(Object.prototype.hasOwnProperty.call(O,y)){var E=h?Object.getOwnPropertyDescriptor(O,y):null;E&&(E.get||E.set)?Object.defineProperty(g,y,E):g[y]=O[y]}return g.default=O,S&&S.set(O,g),g}(o(283)),M=o(141);function _(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return _=function(){return O},O}var x=self;x.onmessage=function(O){var S=O.data,g=S._algorithmType,h=S.data;if(g)if(typeof c[g]!="function")x.postMessage({_algorithmType:M.MESSAGE.FAILURE});else{var y=c[g].apply(c,h);x.postMessage({_algorithmType:M.MESSAGE.SUCCESS,data:y})}},b.default=null},function(R,b,o){"use strict";function f(z){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(z)}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getAdjMatrix",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(b,"breadthFirstSearch",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(b,"connectedComponent",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(b,"getDegree",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(b,"getInDegree",{enumerable:!0,get:function(){return x.getInDegree}}),Object.defineProperty(b,"getOutDegree",{enumerable:!0,get:function(){return x.getOutDegree}}),Object.defineProperty(b,"detectCycle",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(b,"depthFirstSearch",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(b,"dijkstra",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(b,"findAllPath",{enumerable:!0,get:function(){return h.findAllPath}}),Object.defineProperty(b,"findShortestPath",{enumerable:!0,get:function(){return h.findShortestPath}}),Object.defineProperty(b,"floydWarshall",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(b,"labelPropagation",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(b,"louvain",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(b,"minimumSpanningTree",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(b,"pageRank",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(b,"GADDI",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(b,"getNeighbors",{enumerable:!0,get:function(){return N.getNeighbors}});var c=L(o(95)),M=L(o(284)),_=L(o(169)),x=function(z){if(z&&z.__esModule)return z;if(z===null||f(z)!=="object"&&typeof z!="function")return{default:z};var H=P();if(H&&H.has(z))return H.get(z);var re={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in z)if(Object.prototype.hasOwnProperty.call(z,ue)){var xe=ae?Object.getOwnPropertyDescriptor(z,ue):null;xe&&(xe.get||xe.set)?Object.defineProperty(re,ue,xe):re[ue]=z[ue]}return re.default=z,H&&H.set(z,re),re}(o(170)),O=L(o(287)),S=L(o(171)),g=L(o(142)),h=o(288),y=L(o(172)),E=L(o(289)),m=L(o(290)),p=L(o(291)),A=L(o(294)),C=L(o(295)),N=o(45);function P(){if(typeof WeakMap!="function")return null;var z=new WeakMap;return P=function(){return z},z}function L(z){return z&&z.__esModule?z:{default:z}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f,c=(f=o(285))&&f.__esModule?f:{default:f},M=o(45),_=function(x,O,S){var g=function(A){A===void 0&&(A={});var C,N=A,P=function(){},L=(C={},function(z){var H=z.next;return!C[H]&&(C[H]=!0,!0)});return N.allowTraversal=A.allowTraversal||L,N.enter=A.enter||P,N.leave=A.leave||P,N}(S),h=new c.default,y=x.edges,E=y===void 0?[]:y;h.enqueue(O);for(var m="",p=function(){var A=h.dequeue();g.enter({current:A,previous:m}),(0,M.getNeighbors)(A,E,"target").forEach(function(C){g.allowTraversal({previous:m,current:A,next:C})&&h.enqueue(C)}),g.leave({current:A,previous:m}),m=A};!h.isEmpty();)p()};b.default=_},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f,c=(f=o(286))&&f.__esModule?f:{default:f},M=function(){function _(){this.linkedList=new c.default}return _.prototype.isEmpty=function(){return!this.linkedList.head},_.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},_.prototype.enqueue=function(x){this.linkedList.append(x)},_.prototype.dequeue=function(){var x=this.linkedList.deleteHead();return x?x.value:null},_.prototype.toString=function(x){return this.linkedList.toString(x)},_}();b.default=M},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=b.LinkedListNode=void 0;var f=function(_,x){return _===x},c=function(){function _(x,O){O===void 0&&(O=null),this.value=x,this.next=O}return _.prototype.toString=function(x){return x?x(this.value):""+this.value},_}();b.LinkedListNode=c;var M=function(){function _(x){x===void 0&&(x=f),this.head=null,this.tail=null,this.compare=x}return _.prototype.prepend=function(x){var O=new c(x,this.head);return this.head=O,this.tail||(this.tail=O),this},_.prototype.append=function(x){var O=new c(x);return this.head?(this.tail.next=O,this.tail=O,this):(this.head=O,this.tail=O,this)},_.prototype.delete=function(x){if(!this.head)return null;for(var O=null;this.head&&this.compare(this.head.value,x);)O=this.head,this.head=this.head.next;var S=this.head;if(S!==null)for(;S.next;)this.compare(S.next.value,x)?(O=S.next,S.next=S.next.next):S=S.next;return this.compare(this.tail.value,x)&&(this.tail=S),O},_.prototype.find=function(x){var O=x.value,S=O===void 0?void 0:O,g=x.callback,h=g===void 0?void 0:g;if(!this.head)return null;for(var y=this.head;y;){if(h&&h(y.value)||S!==void 0&&this.compare(y.value,S))return y;y=y.next}return null},_.prototype.deleteTail=function(){var x=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,x;for(var O=this.head;O.next;)O.next.next?O=O.next:O.next=null;return this.tail=O,x},_.prototype.deleteHead=function(){if(!this.head)return null;var x=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),x},_.prototype.fromArray=function(x){var O=this;return x.forEach(function(S){return O.append(S)}),this},_.prototype.toArray=function(){for(var x=[],O=this.head;O;)x.push(O),O=O.next;return x},_.prototype.reverse=function(){for(var x=this.head,O=null,S=null;x;)S=x.next,x.next=O,O=x,x=S;this.tail=this.head,this.head=O},_.prototype.toString=function(x){return x===void 0&&(x=void 0),this.toArray().map(function(O){return O.toString(x)}).toString()},_}();b.default=M},function(R,b,o){"use strict";function f(y){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(y)}Object.defineProperty(b,"__esModule",{value:!0}),b.default=b.detectAllCycles=b.detectAllDirectedCycle=b.detectAllUndirectedCycle=void 0;var c,M=(c=o(171))&&c.__esModule?c:{default:c},_=function(y){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var E=O();if(E&&E.has(y))return E.get(y);var m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in y)if(Object.prototype.hasOwnProperty.call(y,A)){var C=p?Object.getOwnPropertyDescriptor(y,A):null;C&&(C.get||C.set)?Object.defineProperty(m,A,C):m[A]=y[A]}return m.default=y,E&&E.set(y,m),m}(o(169)),x=o(45);function O(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return O=function(){return y},y}var S=function(y,E,m){var p,A;m===void 0&&(m=!0);for(var C=[],N=0,P=(0,_.default)(y,!1);N<P.length;N++){var L=P[N];if(L.length)for(var z=L[0],H=z.id,re=[z],ae=((p={})[H]=z,p),ue=((A={})[H]=new Set,A);re.length>0;)for(var xe=re.pop(),ye=xe.id,Y=(0,x.getNeighbors)(ye,y.edges),Ce=function(he){var Q,W=Y[he],le=y.nodes.find(function(U){return U.id===W});if(W===ye)C.push(((Q={})[W]=xe,Q));else if(W in ue){if(!ue[ye].has(le)){for(var Oe=!0,Te=[le,xe],se=ae[ye];ue[W].size&&!ue[W].has(se)&&(Te.push(se),se!==ae[se.id]);)se=ae[se.id];if(Te.push(se),E&&m?(Oe=!1,Te.findIndex(function(U){return E.indexOf(U.id)>-1})>-1&&(Oe=!0)):E&&!m&&Te.findIndex(function(U){return E.indexOf(U.id)>-1})>-1&&(Oe=!1),Oe){for(var ee={},te=1;te<Te.length;te+=1)ee[Te[te-1].id]=Te[te];Te.length&&(ee[Te[Te.length-1].id]=Te[0]),C.push(ee)}ue[W].add(xe)}}else ae[W]=xe,re.push(le),ue[W]=new Set([xe])},ge=0;ge<Y.length;ge+=1)Ce(ge)}return C};b.detectAllUndirectedCycle=S;var g=function(y,E,m){m===void 0&&(m=!0);for(var p=[],A=new Set,C=[],N=[],P={},L={},z=function se(ee,te,U){var X=!1;if(E&&m===!1&&E.indexOf(ee.id)>-1)return X;p.push(ee),A.add(ee);for(var B=U[ee.id],J=0;J<B.length;J+=1)if((Z=P[B[J]])===te){for(var ne={},ie=1;ie<p.length;ie+=1)ne[p[ie-1].id]=p[ie];p.length&&(ne[p[p.length-1].id]=p[0]),N.push(ne),X=!0}else A.has(Z)||se(Z,te,U)&&(X=!0);if(X)(function(fe){for(var _e=[fe];_e.length>0;){var je=_e.pop();A.has(je)&&(A.delete(je),C[je.id].forEach(function(Me){_e.push(Me)}),C[je.id].clear())}})(ee);else for(J=0;J<B.length;J+=1){var Z=P[B[J]];C[Z.id].has(ee)||C[Z.id].add(ee)}return p.pop(),X},H=y.nodes,re=H===void 0?[]:H,ae=0;ae<re.length;ae+=1){var ue=re[ae],xe=ue.id;L[xe]=ae,P[ae]=ue}if(E&&m){var ye=function(se){var ee=E[se];L[re[se].id]=L[ee],L[ee]=0,P[0]=re.find(function(te){return te.id===ee}),P[L[re[se].id]]=re[se]};for(ae=0;ae<E.length;ae++)ye(ae)}for(var Y=function(se){for(var ee,te,U=1/0,X=0;X<se.length;X+=1)for(var B=se[X],J=0;J<B.length;J++){var ne=L[B[J].id];ne<U&&(U=ne,te=X)}var ie=se[te],Z=[];for(X=0;X<ie.length;X+=1){var fe=ie[X];Z[fe.id]=[];for(var _e=0,je=(0,x.getNeighbors)(fe.id,y.edges,"target").filter(function(Ae){return ie.map(function(Le){return Le.id}).indexOf(Ae)>-1});_e<je.length;_e++){var Me=je[_e];Me!==fe.id||m===!1&&E.indexOf(fe.id)>-1?Z[fe.id].push(L[Me]):N.push(((ee={})[fe.id]=fe,ee))}}return{component:ie,adjList:Z,minIdx:U}},Ce=0;Ce<re.length;){var ge=re.filter(function(se){return L[se.id]>=Ce}),he=(0,_.detectStrongConnectComponents)({nodes:ge,edges:y.edges}).filter(function(se){return se.length>1});if(he.length===0)break;var Q=Y(he),W=Q.minIdx,le=Q.adjList,Oe=Q.component;if(!(Oe.length>1))break;Oe.forEach(function(se){C[se.id]=new Set});var Te=P[W];if(E&&m&&E.indexOf(Te.id)===-1)return N;z(Te,Te,le),Ce=W+1}return N};b.detectAllDirectedCycle=g,b.detectAllCycles=function(y,E,m,p){return p===void 0&&(p=!0),E?g(y,m,p):S(y,m,p)};var h=function(y){var E=null,m=y.nodes,p={},A={},C={},N={};(m===void 0?[]:m).forEach(function(z){A[z.id]=z});for(var P={enter:function(z){var H=z.current,re=z.previous;if(C[H]){E={};for(var ae=H,ue=re;ue!==H;)E[ae]=ue,ae=ue,ue=p[ue];E[ae]=ue}else C[H]=H,delete A[H],p[H]=re},leave:function(z){var H=z.current;N[H]=H,delete C[H]},allowTraversal:function(z){var H=z.next;return!E&&!N[H]}};Object.keys(A).length;){var L=Object.keys(A)[0];(0,M.default)(y,L,P)}return E};b.default=h},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.findAllPath=b.findShortestPath=void 0;var f,c=(f=o(142))&&f.__esModule?f:{default:f},M=o(45);b.findShortestPath=function(_,x,O,S,g){var h=(0,c.default)(_,x,S,g),y=h.length,E=h.path,m=h.allPath;return{length:y[O],path:E[O],allPath:m[O]}},b.findAllPath=function(_,x,O,S){var g;if(x===O)return[[x]];var h=_.edges,y=h===void 0?[]:h,E=[x],m=((g={})[x]=!0,g),p=[],A=[],C=S?(0,M.getNeighbors)(x,y,"target"):(0,M.getNeighbors)(x,y);for(p.push(C);E.length>0&&p.length>0;){var N=p[p.length-1];if(N.length){var P=N.shift();if(P&&(E.push(P),m[P]=!0,C=S?(0,M.getNeighbors)(P,y,"target"):(0,M.getNeighbors)(P,y),p.push(C.filter(function(H){return!m[H]}))),E[E.length-1]===O){var L=E.map(function(H){return H});A.push(L),z=E.pop(),m[z]=!1,p.pop()}}else{var z=E.pop();m[z]=!1,p.pop()}}return A}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f,c=(f=o(95))&&f.__esModule?f:{default:f},M=o(45),_=function(x,O,S,g){O===void 0&&(O=!1),S===void 0&&(S="weight"),g===void 0&&(g=1e3);var h=x.nodes,y=h===void 0?[]:h,E=x.edges,m=E===void 0?[]:E,p={},A={};y.forEach(function(ue,xe){var ye=(0,M.uniqueId)();ue.clusterId=ye,p[ye]={id:ye,nodes:[ue]},A[ue.id]={node:ue,idx:xe}});var C=(0,c.default)(x,O),N=[],P={};C.forEach(function(ue,xe){var ye=0,Y=y[xe].id;P[Y]={},ue.forEach(function(Ce,ge){if(Ce){ye+=Ce;var he=y[ge].id;P[Y][he]=Ce}}),N.push(ye)});for(var L=0,z=function(){var ue=!1;if(y.forEach(function(xe){var ye={};Object.keys(P[xe.id]).forEach(function(Oe){var Te=P[xe.id][Oe],se=A[Oe].node.clusterId;ye[se]||(ye[se]=0),ye[se]+=Te});var Y=-1/0,Ce=[];if(Object.keys(ye).forEach(function(Oe){Y<ye[Oe]?(Y=ye[Oe],Ce=[Oe]):Y===ye[Oe]&&Ce.push(Oe)}),Ce.length!==1||Ce[0]!==xe.clusterId){var ge=Ce.indexOf(xe.clusterId);if(ge>=0&&Ce.splice(ge,1),Ce&&Ce.length){ue=!0;var he=p[xe.clusterId],Q=he.nodes.indexOf(xe);he.nodes.splice(Q,1);var W=Math.floor(Math.random()*Ce.length),le=p[Ce[W]];le.nodes.push(xe),xe.clusterId=le.id}}}),!ue)return"break";L++};L<g&&z()!=="break";);Object.keys(p).forEach(function(ue){var xe=p[ue];xe.nodes&&xe.nodes.length||delete p[ue]});var H=[],re={};m.forEach(function(ue){var xe=ue.source,ye=ue.target,Y=ue[S]||1,Ce=A[xe].node.clusterId,ge=A[ye].node.clusterId,he=Ce+"---"+ge;if(re[he])re[he].weight+=Y,re[he].count++;else{var Q={source:Ce,target:ge,weight:Y,count:1};re[he]=Q,H.push(Q)}});var ae=[];return Object.keys(p).forEach(function(ue){ae.push(p[ue])}),{clusters:ae,clusterEdges:H}};b.default=_},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f,c=(f=o(95))&&f.__esModule?f:{default:f},M=function(x,O,S,g){for(var h=O.length,y=2*g,E=0,m=0;m<h;m++)for(var p=x[m].clusterId,A=0;A<h;A++)p===x[A].clusterId&&(E+=(O[m][A]||0)-(S[m]||0)*(S[A]||0)/y);return E*=1/y},_=function(x,O,S,g){O===void 0&&(O=!1),S===void 0&&(S="weight"),g===void 0&&(g=1e-4);var h=x.nodes,y=h===void 0?[]:h,E=x.edges,m=E===void 0?[]:E,p=1,A={},C={};y.forEach(function(ge,he){var Q=String(p++);ge.clusterId=Q,A[Q]={id:Q,nodes:[ge]},C[ge.id]={node:ge,idx:he}});var N=(0,c.default)(x,O),P=[],L={},z=0;N.forEach(function(ge,he){var Q=0,W=y[he].id;L[W]={},ge.forEach(function(le,Oe){if(le){Q+=le;var Te=y[Oe].id;L[W][Te]=le,z+=le}}),P.push(Q)}),z/=2;for(var H=1/0,re=1/0,ae=0;H=M(y,N,P,z),!(Math.abs(H-re)<g||ae>100);)re=H,ae++,Object.keys(A).forEach(function(ge){var he=0;m.forEach(function(Q){var W=Q.source,le=Q.target,Oe=C[W].node.clusterId,Te=C[le].node.clusterId;(Oe===ge&&Te!==ge||Te===ge&&Oe!==ge)&&(he+=Q[S]||1)}),A[ge].sumTot=he}),y.forEach(function(ge,he){var Q,W=A[ge.clusterId],le=0,Oe=P[he]/(2*z),Te=0;W.nodes.forEach(function(J){var ne=C[J.id].idx;Te+=N[he][ne]||0});var se=Te-W.sumTot*Oe,ee=L[ge.id];if(Object.keys(ee).forEach(function(J){var ne=C[J].node.clusterId;if(ne!==ge.clusterId){var ie=A[ne],Z=ie.nodes;if(Z&&Z.length){var fe=0;Z.forEach(function(je){var Me=C[je.id].idx;fe+=N[he][Me]||0});var _e=fe-ie.sumTot*Oe-se;_e>le&&(le=_e,Q=ie)}}}),le>0){Q.nodes.push(ge);var te=ge.clusterId;ge.clusterId=Q.id;var U=W.nodes.indexOf(ge);W.nodes.splice(U,1);var X=0,B=0;m.forEach(function(J){var ne=J.source,ie=J.target,Z=C[ne].node.clusterId,fe=C[ie].node.clusterId;(Z===Q.id&&fe!==Q.id||fe===Q.id&&Z!==Q.id)&&(X+=J[S]||1),(Z===te&&fe!==te||fe===te&&Z!==te)&&(B+=J[S]||1)}),Q.sumTot=X,W.sumTot=B}});var ue={},xe=0;Object.keys(A).forEach(function(ge){var he=A[ge];if(he.nodes&&he.nodes.length){var Q=String(xe+1);Q!==ge&&(he.id=Q,he.nodes=he.nodes.map(function(W){return{id:W.id,clusterId:Q}}),A[Q]=he,ue[ge]=Q,delete A[ge],xe++)}else delete A[ge]}),y.forEach(function(ge){ge.clusterId&&ue[ge.clusterId]&&(ge.clusterId=ue[ge.clusterId])});var ye=[],Y={};m.forEach(function(ge){var he=ge.source,Q=ge.target,W=ge[S]||1,le=C[he].node.clusterId,Oe=C[Q].node.clusterId,Te=le+"---"+Oe;if(Y[Te])Y[Te].weight+=W,Y[Te].count++;else{var se={source:le,target:Oe,weight:W,count:1};Y[Te]=se,ye.push(se)}});var Ce=[];return Object.keys(A).forEach(function(ge){Ce.push(A[ge])}),{clusters:Ce,clusterEdges:ye}};b.default=_},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=_(o(292)),c=_(o(293)),M=o(45);function _(g){return g&&g.__esModule?g:{default:g}}var x=function(g,h){var y=[],E=g.nodes,m=E===void 0?[]:E,p=g.edges,A=p===void 0?[]:p;if(m.length===0)return y;var C=m[0],N=new Set;N.add(C);var P=new c.default(function(re,ae){return h?re.weight-ae.weight:0});for((0,M.getEdgesByNodeId)(C.id,A).forEach(function(re){P.insert(re)});!P.isEmpty();){var L=P.delMin(),z=L.source,H=L.target;N.has(z)&&N.has(H)||(y.push(L),N.has(z)||(N.add(z),(0,M.getEdgesByNodeId)(z,A).forEach(function(re){P.insert(re)})),N.has(H)||(N.add(H),(0,M.getEdgesByNodeId)(H,A).forEach(function(re){P.insert(re)})))}return y},O=function(g,h){var y=[],E=g.nodes,m=E===void 0?[]:E,p=g.edges,A=p===void 0?[]:p;if(m.length===0)return y;var C=A.map(function(H){return H});h&&C.sort(function(H,re){return H.weight-re.weight});for(var N=new f.default(m.map(function(H){return H.id}));C.length>0;){var P=C.shift(),L=P.source,z=P.target;N.connected(L,z)||(y.push(P),N.union(L,z))}return y},S=function(g,h,y){return y?{prim:x,kruskal:O}[y](g,h):O(g,h)};b.default=S},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=function(){function c(M){this.count=M.length,this.parent={};for(var _=0,x=M;_<x.length;_++){var O=x[_];this.parent[O]=O}}return c.prototype.find=function(M){for(;this.parent[M]!==M;)M=this.parent[M];return M},c.prototype.union=function(M,_){var x=this.find(M),O=this.find(_);x!==O&&(x<O?(this.parent[_]!==_&&this.union(this.parent[_],M),this.parent[_]=this.parent[M]):(this.parent[M]!==M&&this.union(this.parent[M],_),this.parent[M]=this.parent[_]))},c.prototype.connected=function(M,_){return this.find(M)===this.find(_)},c}();b.default=f},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=function(M,_){return M-_},c=function(){function M(_){_===void 0&&(_=f),this.compareFn=_,this.list=[]}return M.prototype.getLeft=function(_){return 2*_+1},M.prototype.getRight=function(_){return 2*_+2},M.prototype.getParent=function(_){return _===0?null:Math.floor((_-1)/2)},M.prototype.isEmpty=function(){return this.list.length<=0},M.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},M.prototype.delMin=function(){var _=this.top(),x=this.list.pop();return this.list.length>0&&(this.list[0]=x,this.moveDown(0)),_},M.prototype.insert=function(_){if(_!==null){this.list.push(_);var x=this.list.length-1;return this.moveUp(x),!0}return!1},M.prototype.moveUp=function(_){for(var x=this.getParent(_);_&&_>0&&this.compareFn(this.list[x],this.list[_])>0;){var O=this.list[x];this.list[x]=this.list[_],this.list[_]=O,_=x,x=this.getParent(_)}},M.prototype.moveDown=function(_){var x,O=_,S=this.getLeft(_),g=this.getRight(_),h=this.list.length;S!==null&&S<h&&this.compareFn(this.list[O],this.list[S])>0?O=S:g!==null&&g<h&&this.compareFn(this.list[O],this.list[g])>0&&(O=g),_!==O&&(x=[this.list[O],this.list[_]],this.list[_]=x[0],this.list[O]=x[1],this.moveDown(O))},M}();b.default=c},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f,c=(f=o(170))&&f.__esModule?f:{default:f},M=o(45),_=function(x,O,S){typeof O!="number"&&(O=1e-6),typeof S!="number"&&(S=.85);for(var g,h=1,y=0,E=1e3,m=x.nodes,p=m===void 0?[]:m,A=x.edges,C=A===void 0?[]:A,N=p.length,P={},L={},z=0;z<N;++z)P[re=(Y=p[z]).id]=1/N,L[re]=1/N;for(var H=(0,c.default)(x);E>0&&h>O;){for(y=0,z=0;z<N;++z){var re=(Y=p[z]).id;if(g=0,H[Y.id].inDegree===0)P[re]=0;else{for(var ae=(0,M.getNeighbors)(re,C,"source"),ue=0;ue<ae.length;++ue){var xe=ae[ue],ye=H[xe].outDegree;ye>0&&(g+=L[xe]/ye)}P[re]=S*g,y+=P[re]}}for(y=(1-y)/N,h=0,z=0;z<N;++z){var Y;g=P[re=(Y=p[z]).id]+y,h+=Math.abs(g-L[re]),L[re]=g}E-=1}return L};b.default=_},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=o(1),c=O(o(172)),M=O(o(296)),_=O(o(142)),x=o(45);function O(N){return N&&N.__esModule?N:{default:N}}function S(N){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(N)}var g=function(N,P,L,z){L===void 0&&(L="cluster"),z===void 0&&(z=2);var H=[],re=N.nodes;return P.forEach(function(ae,ue){H.push(h(re,ae,ue,L,z))}),H},h=function(N,P,L,z,H){var re=[L],ae=[],ue={};return P.forEach(function(xe,ye){if(xe<=H&&L!==ye){re.push(ye),ae.push(N[ye]);var Y=N[ye][z];ue[Y]?(ue[Y].count++,ue[Y].dists.push(xe)):ue[Y]={count:1,dists:[xe]}}}),Object.keys(ue).forEach(function(xe){ue[xe].dists=ue[xe].dists.sort(function(ye,Y){return ye-Y})}),{nodeIdx:L,nodeId:N[L].id,nodeIdxs:re,neighbors:ae,neighborNum:re.length-1,nodeLabelCountMap:ue}},y=function(N,P,L,z){var H=L.nodes;return z||(z={}),Object.keys(N).forEach(function(re){var ae,ue;if(!z||!z[re]){z[re]={nodes:[],edges:[]};var xe=N[re],ye=(ae=P[xe.start])===null||ae===void 0?void 0:ae.nodeIdxs,Y=(ue=P[xe.end])===null||ue===void 0?void 0:ue.nodeIdxs;if(ye&&Y){var Ce=new Set(Y),ge=ye.filter(function(Oe){return Ce.has(Oe)});if(ge&&ge.length){for(var he={},Q=ge.length,W=0;W<Q;W++){var le=H[ge[W]];z[re].nodes.push(le),he[le.id]=!0}L.edges.forEach(function(Oe){he[Oe.source]&&he[Oe.target]&&z[re].edges.push(Oe)})}}}}),z},E=function(N,P,L,z){var H={};N.nodes.forEach(function(ae){H[ae.id]=ae});var re=0;return N.edges.forEach(function(ae){var ue=H[ae.source][L],xe=H[ae.target][L],ye=P.nodes[0][L],Y=P.nodes[1][L],Ce=P.edges[0][z];ae[z]===Ce&&(ue===ye&&xe===Y||ue===Y&&xe===ye)&&re++}),re},m=function(N,P){var L={},z={};return N.forEach(function(H,re){L[H.id]={idx:re,node:H,degree:0};var ae=H[P];z[ae]||(z[ae]=[]),z[ae].push(H)}),{nodeMap:L,nodeLabelMap:z}},p=function(N,P,L){var z={},H={};return N.forEach(function(re,ae){z[""+x.uniqueId]={idx:ae,edge:re};var ue=re[P];H[ue]||(H[ue]=[]),H[ue].push(re);var xe=L[re.source];xe&&xe.degree++;var ye=L[re.target];ye&&ye.degree++}),{edgeMap:z,edgeLabelMap:H}},A=function(N,P,L){var z=P.length,H={};return P.forEach(function(re,ae){for(var ue=L?0:ae+1,xe=N[ae].id,ye=ue;ye<z;ye++)if(ae!==ye){var Y=N[ye].id,Ce=re[ye];H[xe+"-"+Y]=Ce,L||(H[Y+"-"+xe]=Ce)}}),H},C=function(N,P,L,z,H,re,ae){if(L===void 0&&(L=!1),re===void 0&&(re="cluster"),ae===void 0&&(ae="cluster"),N&&N.nodes){var ue=N.nodes.length;if(ue){var xe=(0,c.default)(N,L),ye=(0,c.default)(P,L),Y=A(N.nodes,xe,L),Ce=A(P.nodes,ye,L),ge=m(N.nodes,re),he=ge.nodeMap,Q=ge.nodeLabelMap,W=m(P.nodes,re),le=W.nodeMap,Oe=W.nodeLabelMap;p(N.edges,ae,he);var Te=p(P.edges,ae,le).edgeLabelMap;H||(H=Math.max.apply(Math,(0,f.__spreadArray)((0,f.__spreadArray)([],ye[0]),[2]))),z||(z=H);var se=g(N,xe,re,z),ee=g(P,ye,re,z),te=function(Qt,tr,nr,Mr,ar){var yr=Math.ceil(nr/tr),mr={},Rr=0;return Mr.forEach(function(pr,xr){for(var dr=0,Gr=0,Lr=pr.nodeIdxs,pn=pr.neighborNum-1;dr<yr;){for(var Ur=Lr[1+Math.floor(Math.random()*pn)],Nr=0;(mr[xr+"-"+Ur]||mr[Ur+"-"+xr])&&(Ur=Math.floor(Math.random()*tr),!(++Nr>2*tr)););if(Nr<2*tr&&(mr[xr+"-"+Ur]={start:xr,end:Ur,distance:ar[xr][Ur]},dr++,++Rr>=nr))return mr;if(++Gr>2*tr)break}dr<yr&&(yr=(yr+(yr-dr))/(tr-xr-1))}),mr}(0,ue,Math.min(100,ue*(ue-1)/2),ee,xe),U=y(te,se,N),X={graphs:U,nodeLabelProp:re,edgeLabelProp:ae,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:L},B=(0,M.default)(X).slice(0,10),J=B.length,ne=[];B.forEach(function(Qt,tr){ne[tr]={},Object.keys(U).forEach(function(nr){var Mr=U[nr],ar=E(Mr,Qt,re,ae);ne[tr][nr]=ar})});var ie=function(Qt,tr,nr){for(var Mr=1/0,ar=0,yr=function(Rr){var pr=Qt[Rr],xr=Object.keys(pr).sort(function(Nr,Dr){return pr[Nr]-pr[Dr]}),dr=[];xr.forEach(function(Nr,Dr){dr[Dr%10]||(dr[Dr%10]={graphs:[],totalCount:0,aveCount:0}),dr[Dr%10].graphs.push(Nr),dr[Dr%10].totalCount+=pr[Nr]});var Gr=0,Lr=[];dr.forEach(function(Nr){var Dr=Nr.totalCount/Nr.graphs.length;Nr.aveCount=Dr,Lr.push(Dr);var rn=0,Ir=Nr.length;Nr.graphs.forEach(function(On,In){var Dn=pr[On];Nr.graphs.forEach(function(Rn,gn){In!==gn&&(rn+=Math.abs(Dn-pr[Rn]))})}),Gr+=rn/=Ir*(Ir-1)/2}),Gr/=dr.length;var pn=0;Lr.forEach(function(Nr,Dr){Lr.forEach(function(rn,Ir){Dr!==Ir&&(pn+=Math.abs(Nr-rn))}),pn/=Lr.length*(Lr.length-1)/2});var Ur=pn-Gr;Mr<Ur&&(Mr=Ur,ar=Rr)},mr=0;mr<tr;mr++)yr(mr);return{structure:nr[ar],structureCountMap:Qt[ar]}}(ne,J,B),Z=ie.structure,fe=ie.structureCountMap,_e=P.nodes[0],je=_e[re],Me=Q[je],Ae={},Le={},Se={},Re={},Ke={};Object.keys(Oe).forEach(function(Qt,tr){Ke[Qt]=[];var nr=-1/0,Mr=Oe[Qt],ar={};Mr.forEach(function(pr){var xr=Ce[_e.id+"-"+pr.id];xr&&Ke[Qt].push(xr),nr<xr&&(nr=xr),ar[_e.id+"-"+pr.id]={start:0,end:le[pr.id].idx,distance:xr}}),Ke[Qt]=Ke[Qt].sort(function(pr,xr){return pr-xr}),Le=y(ar,ee,P,Le);var yr=[];if(Object.keys(ar).forEach(function(pr){if(Se[pr])yr.push(Se[pr]);else{var xr=Le[pr];Se[pr]=E(xr,Z,re,ae),yr.push(Se[pr])}}),yr=yr.sort(function(pr,xr){return xr-pr}),Re[_e.id+"-"+Qt]=yr,Qt!==je)for(var mr=function(pr){var xr=Me[pr],dr=se[he[xr.id].idx],Gr=dr.nodeLabelCountMap[Qt],Lr=Oe[Qt].length;if(!Gr||Gr.count<Lr)return Me.splice(pr,1),"continue";for(var pn=!1,Ur=0;Ur<Lr;Ur++)if(Gr.dists[Ur]>Ke[Qt][Ur]){pn=!0;break}if(pn)return Me.splice(pr,1),"continue";var Nr={};dr.neighbors.forEach(function(Ir){var On=Y[xr.id+"-"+Ir.id];Nr[xr.id+"-"+Ir.id]={start:he[xr.id].idx,end:he[Ir.id].idx,distance:On}}),U=y(Nr,se,N,U);var Dr=[];Object.keys(Nr).forEach(function(Ir){if(fe[Ir])Dr.push(fe[Ir]);else{var On=U[Ir];fe[Ir]=E(On,Z,re,ae),Dr.push(fe[Ir])}}),Dr=Dr.sort(function(Ir,On){return On-Ir});var rn=!1;for(Ur=0;Ur<Lr;Ur++)if(Dr[Ur]<yr[Ur]){rn=!0;break}return rn?(Me.splice(pr,1),"continue"):void 0},Rr=Me.length-1;Rr>=0;Rr--)mr(Rr)});var Je=[];Me.forEach(function(Qt){for(var tr=he[Qt.id].idx,nr=h(N.nodes,xe[tr],tr,re,H).neighbors,Mr=nr.length,ar=!1,yr=function(pr){if(nr.length+1<P.nodes.length)return ar=!0,{value:void 0};var xr=nr[pr],dr=xr[re];if(!Oe[dr]||!Oe[dr].length)return nr.splice(pr,1),"continue";var Gr=Qt.id+"-"+xr.id;if(!Ke[dr]||!Ke[dr].length)return nr.splice(pr,1),"continue";var Lr=Y[Gr];if(Lr>Ke[dr][Ke[dr].length-1])return nr.splice(pr,1),"continue";var pn=fe[Gr]?fe[Gr]:function(Dr,rn,Ir,On,In,Dn,Rn,gn,Er,ln,yn){var mn,Qn=rn.id+"-"+Ir.id;if(ln&&ln[Qn])return ln[Qn];var Un=yn?yn[Qn]:void 0;if(!Un){var ri=((mn={})[Qn]={start:On[rn.id].idx,end:On[Ir.id].idx,distance:In},mn);Un=(yn=y(ri,Dn,Dr,yn))[Qn]}return E(Un,Rn,gn,Er)}(N,Qt,xr,he,Lr,se,Z,re,ae,fe,U),Ur=_e.id+"-"+dr;if(pn<Re[Ur][Re[Ur].length-1])return nr.splice(pr,1),"continue";var Nr=Ae[dr];return Nr===void 0&&(Nr=1/0,Oe[dr].forEach(function(Dr){var rn=le[Dr.id].degree;Nr>rn&&(Nr=rn)}),Ae[dr]=Nr),he[xr.id].degree<Nr?(nr.splice(pr,1),"continue"):void 0},mr=Mr-1;mr>=0;mr--){var Rr=yr(mr);if(S(Rr)==="object")return Rr.value}ar||Je.push({nodes:[Qt].concat(nr)})});var nt=(0,_.default)(P,_e.id,!1).length,dt={};L?(Object.keys(nt).forEach(function(Qt){var tr=le[Qt].node[re];dt[tr]?dt[tr].push(nt[Qt]):dt[tr]=[nt[Qt]]}),Object.keys(dt).forEach(function(Qt){dt[Qt].sort(function(tr,nr){return tr-nr})})):dt=Ke;for(var kt=function(Qt){var tr=Je[Qt],nr=tr.nodes[0],Mr={},ar={};tr.nodes.forEach(function(Er,ln){ar[Er.id]={idx:ln,node:Er,degree:0};var yn=Er[re];Mr[yn]?Mr[yn]++:Mr[yn]=1});var yr=[],mr={};N.edges.forEach(function(Er){ar[Er.source]&&ar[Er.target]&&(yr.push(Er),mr[Er[ae]]?mr[Er[ae]]++:mr[Er[ae]]=1,ar[Er.source].degree++,ar[Er.target].degree++)});for(var Rr=Object.keys(Te).length,pr=!1,xr=0;xr<Rr;xr++){var dr=Object.keys(Te)[xr];if(!mr[dr]||mr[dr]<Te[dr].length){pr=!0;break}}if(pr)return Je.splice(Qt,1),"continue";var Gr=yr.length;if(Gr<P.edges.length)return Je.splice(Qt,1),"break";var Lr=!1,pn=function(Er){var ln=yr[Er],yn=ln[ae],mn=Te[yn];if(!mn||!mn.length)return mr[yn]--,mn&&mr[yn]<mn.length?(Lr=!0,"break"):(yr.splice(Er,1),ar[ln.source].degree--,ar[ln.target].degree--,"continue");var Qn=ar[ln.source].node[re],Un=ar[ln.target].node[re],ri=!1;return mn.forEach(function(Oi){var ni=le[Oi.source].node,Bn=le[Oi.target].node;ni[re]===Qn&&Bn[re]===Un&&(ri=!0),L||ni[re]!==Un||Bn[re]!==Qn||(ri=!0)}),ri?void 0:(mr[yn]--,mn&&mr[yn]<mn.length?(Lr=!0,"break"):(yr.splice(Er,1),ar[ln.source].degree--,ar[ln.target].degree--,"continue"))};for(xr=Gr-1;xr>=0&&pn(xr)!=="break";xr--);if(Lr)return Je.splice(Qt,1),"continue";tr.edges=yr;var Ur=(0,_.default)(tr,tr.nodes[0].id,!1).length;if(Object.keys(Ur).reverse().forEach(function(Er){if(Er!==tr.nodes[0].id&&!Lr){if(Ur[Er]===1/0){var ln=ar[Er].node[re];if(Mr[ln]--,Mr[ln]<Oe[ln].length)return void(Lr=!0);var yn=tr.nodes.indexOf(ar[Er].node);return tr.nodes.splice(yn,1),void(ar[Er]=void 0)}var mn=he[Er].node[re];if(!dt[mn]||!dt[mn].length||Ur[Er]>dt[mn][dt[mn].length-1]){if(ln=ar[Er].node[re],Mr[ln]--,Mr[ln]<Oe[ln].length)return void(Lr=!0);yn=tr.nodes.indexOf(ar[Er].node),tr.nodes.splice(yn,1),ar[Er]=void 0}}}),Lr)return Je.splice(Qt,1),"continue";for(var Nr=!0,Dr=0;Nr&&!Lr;){if(Nr=!1,ar[nr.id].degree<le[_e.id].degree){Lr=!0;break}if(Mr[nr[re]]<Oe[nr[re]].length){Lr=!0;break}for(var rn=tr.nodes.length-1;rn>=0;rn--){var Ir=tr.nodes[rn],On=ar[Ir.id].degree,In=Ir[re];if(On<Ae[In]){if(Mr[Ir[re]]--,Mr[Ir[re]]<Oe[Ir[re]].length){Lr=!0;break}tr.nodes.splice(rn,1),ar[Ir.id]=void 0,Nr=!0}}if(Lr||!Nr&&Dr!==0)break;for(var Dn=(Gr=yr.length)-1;Dn>=0;Dn--){var Rn=yr[Dn];if(!ar[Rn.source]||!ar[Rn.target]){yr.splice(Dn,1);var gn=Rn[ae];if(mr[gn]--,ar[Rn.source]&&ar[Rn.source].degree--,ar[Rn.target]&&ar[Rn.target].degree--,Te[gn]&&mr[gn]<Te[gn].length){Lr=!0;break}Nr=!0}}Dr++}return Lr||Lr||tr.nodes.length<P.nodes.length||yr.length<P.edges.length?(Je.splice(Qt,1),"continue"):void 0},At=Je.length-1;At>=0&&kt(At)!=="break";At--);var It=Je.length,Kt=function(Qt){var tr=Je[Qt],nr={};tr.edges.forEach(function(yr){var mr=yr.source+"-"+yr.target+"-"+yr.label;nr[mr]?nr[mr]++:nr[mr]=1});for(var Mr=function(yr){var mr=Je[yr],Rr={};mr.edges.forEach(function(xr){var dr=xr.source+"-"+xr.target+"-"+xr.label;Rr[dr]?Rr[dr]++:Rr[dr]=1});var pr=!0;Object.keys(Rr).length!==Object.keys(nr).length?pr=!1:Object.keys(nr).forEach(function(xr){Rr[xr]!==nr[xr]&&(pr=!1)}),pr&&Je.splice(yr,1)},ar=It-1;ar>Qt;ar--)Mr(ar);It=Je.length};for(At=0;At<=It-1;At++)Kt(At);return Je}}};b.default=C},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=o(0),c=o(297),M=function(){function g(h,y,E,m,p){this.fromNode=h,this.toNode=y,this.nodeEdgeNodeLabel={nodeLabel1:E||c.VACANT_NODE_LABEL,edgeLabel:m||c.VACANT_EDGE_LABEL,nodeLabel2:p||c.VACANT_NODE_LABEL}}return g.prototype.equalTo=function(h){return this.fromNode===h.formNode&&this.toNode===h.toNode&&this.nodeEdgeNodeLabel===h.nodeEdgeNodeLabel},g.prototype.notEqualTo=function(h){return!this.equalTo(h)},g}(),_=function(){function g(){this.rmpath=[],this.dfsEdgeList=[]}return g.prototype.equalTo=function(h){var y=this.dfsEdgeList.length;if(y!==h.length)return!1;for(var E=0;E<y;E++)if(this.dfsEdgeList[E]!==h[E])return!1;return!0},g.prototype.notEqualTo=function(h){return!this.equalTo(h)},g.prototype.pushBack=function(h,y,E,m,p){return this.dfsEdgeList.push(new M(h,y,E,m,p)),this.dfsEdgeList},g.prototype.toGraph=function(h,y){h===void 0&&(h=c.VACANT_GRAPH_ID),y===void 0&&(y=!1);var E=new c.Graph(h,!0,y);return this.dfsEdgeList.forEach(function(m){var p=m.fromNode,A=m.toNode,C=m.nodeEdgeNodeLabel,N=C.nodeLabel1,P=C.edgeLabel,L=C.nodeLabel2;N!==c.VACANT_NODE_LABEL&&E.addNode(p,N),L!==c.VACANT_NODE_LABEL&&E.addNode(A,L),E.addEdge(void 0,p,A,P)}),E},g.prototype.buildRmpath=function(){this.rmpath=[];for(var h=void 0,y=this.dfsEdgeList.length-1;y>=0;y--){var E=this.dfsEdgeList[y],m=E.fromNode,p=E.toNode;m<p&&(h===void 0||p===h)&&(this.rmpath.push(y),h=m)}return this.rmpath},g.prototype.getNodeNum=function(){var h={};return this.dfsEdgeList.forEach(function(y){h[y.fromNode]||(h[y.fromNode]=!0),h[y.toNode]||(h[y.toNode]=!0)}),Object.keys(h).length},g}(),x=function(){function g(h){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],h){for(;h;){var y=h.edge;this.edges.push(y),this.nodesUsed[y.from]=1,this.nodesUsed[y.to]=1,this.edgesUsed[y.id]=1,h=h.preNode}this.edges=this.edges.reverse()}}return g.prototype.hasNode=function(h){return this.nodesUsed[h.id]===1},g.prototype.hasEdge=function(h){return this.edgesUsed[h.id]===1},g}(),O=function(){function g(h){var y=h.graphs,E=h.minSupport,m=E===void 0?2:E,p=h.minNodeNum,A=p===void 0?1:p,C=h.maxNodeNum,N=C===void 0?4:C,P=h.top,L=P===void 0?10:P,z=h.directed,H=z!==void 0&&z,re=h.verbose,ae=re!==void 0&&re;this.graphs=y,this.dfsCode=new _,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=m,this.top=L,this.directed=H,this.counter=0,this.maxNodeNum=N,this.minNodeNum=A,this.verbose=ae,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return g.prototype.findForwardRootEdges=function(h,y){var E=this,m=[],p=h.nodeMap;return y.edges.forEach(function(A){(E.directed||y.label<=p[A.to].label)&&m.push(A)}),m},g.prototype.findBackwardEdge=function(h,y,E,m){if(!this.directed&&y===E)return null;for(var p=h.nodeMap,A=p[E.to].edges,C=A.length,N=0;N<C;N++){var P=A[N];if(!m.hasEdge(P)&&P.to===y.from){if(this.directed){if(p[y.from].label<p[E.to].label||p[y.from].label===p[E.to].label&&y.label<=P.label)return P}else if(y.label<P.label||y.label===P.label&&p[y.to].label<=p[E.to].label)return P}}return null},g.prototype.findForwardPureEdges=function(h,y,E,m){for(var p=[],A=y.to,C=h.nodeMap[A].edges,N=C.length,P=0;P<N;P++){var L=C[P],z=h.nodeMap[L.to];E<=z.label&&!m.hasNode(z)&&p.push(L)}return p},g.prototype.findForwardRmpathEdges=function(h,y,E,m){for(var p=[],A=h.nodeMap,C=A[y.to].label,N=A[y.from].edges,P=N.length,L=0;L<P;L++){var z=N[L],H=A[z.to].label;y.to===z.to||E>H||m.hasNode(A[z.to])||(y.label<z.label||y.label===z.label&&C<=H)&&p.push(z)}return p},g.prototype.getSupport=function(h){var y={};return h.forEach(function(E){y[E.graphId]||(y[E.graphId]=!0)}),Object.keys(y).length},g.prototype.findMinLabel=function(h){var y=void 0;return Object.keys(h).forEach(function(E){var m=h[E],p=m.nodeLabel1,A=m.edgeLabel,C=m.nodeLabel2;y?(p<y.nodeLabel1||p===y.nodeLabel1&&A<y.edgeLabel||p===y.nodeLabel1&&A===y.edgeLabel&&C<y.nodeLabel2)&&(y={nodeLabel1:p,edgeLabel:A,nodeLabel2:C}):y={nodeLabel1:p,edgeLabel:A,nodeLabel2:C}}),y},g.prototype.isMin=function(){var h=this,y=this.dfsCode;if(this.verbose&&console.log("isMin checking",y),y.dfsEdgeList.length===1)return!0;var E=this.directed,m=y.toGraph(c.VACANT_GRAPH_ID,E),p=m.nodeMap,A=new _,C={};m.nodes.forEach(function(L){h.findForwardRootEdges(m,L).forEach(function(z){var H=p[z.to],re=L.label+"-"+z.label+"-"+H.label;C[re]||(C[re]={projected:[],nodeLabel1:L.label,edgeLabel:z.label,nodeLabel2:H.label});var ae={graphId:m.id,edge:z,preNode:null};C[re].projected.push(ae)})});var N=this.findMinLabel(C);A.dfsEdgeList.push(new M(0,1,N.nodeLabel1,N.edgeLabel,N.nodeLabel2));var P=N.nodeLabel1+"-"+N.edgeLabel+"-"+N.nodeLabel2;return function L(z){for(var H=A.buildRmpath(),re=A.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ae=A.dfsEdgeList[H[0]].toNode,ue={},xe=!1,ye=0,Y=E?-1:0,Ce=function(te){if(xe)return"break";z.forEach(function(U){var X=new x(U),B=h.findBackwardEdge(m,X.edges[H[te]],X.edges[H[0]],X);B&&(ue[B.label]||(ue[B.label]={projected:[],edgeLabel:B.label}),ue[B.label].projected.push({graphId:m.id,edge:ue,preNode:U}),ye=A.dfsEdgeList[H[te]].fromNode,xe=!0)})},ge=H.length-1;ge>Y&&Ce(ge)!=="break";ge--);if(xe){var he=h.findMinLabel(ue);A.dfsEdgeList.push(new M(ae,ye,c.VACANT_NODE_LABEL,he.edgeLabel,c.VACANT_NODE_LABEL));var Q=A.dfsEdgeList.length-1;return h.dfsCode.dfsEdgeList[Q]===A.dfsEdgeList[Q]&&L(ue[he.edgeLabel].projected)}var W={};xe=!1;var le=0;z.forEach(function(te){var U=new x(te),X=h.findForwardPureEdges(m,U.edges[H[0]],re,U);X.length>0&&(xe=!0,le=ae,X.forEach(function(B){var J=B.label+"-"+p[B.to].label;W[J]||(W[J]={projected:[],edgeLabel:B.label,nodeLabel2:p[B.to].label}),W[J].projected.push({graphId:m.id,edge:B,preNode:te})}))});var Oe=H.length,Te=function(te){if(xe)return"break";var U=H[te];z.forEach(function(X){var B=new x(X),J=h.findForwardRmpathEdges(m,B.edges[U],re,B);J.length>0&&(xe=!0,le=A.dfsEdgeList[U].fromNode,J.forEach(function(ne){var ie=ne.label+"-"+p[ne.to].label;W[ie]||(W[ie]={projected:[],edgeLabel:ne.label,nodeLabel2:p[ne.to].label}),W[ie].projected.push({graphId:m.id,edge:ne,preNode:X})}))})};for(ge=0;ge<Oe&&Te(ge)!=="break";ge++);if(!xe)return!0;var se=h.findMinLabel(W);A.dfsEdgeList.push(new M(le,ae+1,c.VACANT_NODE_LABEL,se.edgeLabel,se.nodeLabel2));var ee=A.dfsEdgeList.length-1;return y.dfsEdgeList[ee]===A.dfsEdgeList[ee]&&L(W[se.edgeLabel+"-"+se.nodeLabel2].projected)}(C[P].projected)},g.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var h=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,f.clone)(h))}},g.prototype.subGraphMining=function(h){var y=this;if(!(this.getSupport(h)<this.minSupport)&&this.isMin()){this.report();var E=this.dfsCode.getNodeNum(),m=this.dfsCode.buildRmpath(),p=this.dfsCode.dfsEdgeList[m[0]].toNode,A=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,C={},N={};h.forEach(function(P){for(var L=y.graphs[P.graphId],z=L.nodeMap,H=new x(P),re=m.length-1;re>=0;re--){var ae=y.findBackwardEdge(L,H.edges[m[re]],H.edges[m[0]],H);if(ae){var ue=y.dfsCode.dfsEdgeList[m[re]].fromNode+"-"+ae.label;N[ue]||(N[ue]={projected:[],toNodeId:y.dfsCode.dfsEdgeList[m[re]].fromNode,edgeLabel:ae.label}),N[ue].projected.push({graphId:P.graphId,edge:ae,preNode:P})}}if(!(E>=y.maxNodeNum)){y.findForwardPureEdges(L,H.edges[m[0]],A,H).forEach(function(ye){var Y=p+"-"+ye.label+"-"+z[ye.to].label;C[Y]||(C[Y]={projected:[],fromNodeId:p,edgeLabel:ye.label,nodeLabel2:z[ye.to].label}),C[Y].projected.push({graphId:P.graphId,edge:ye,preNode:P})});var xe=function(ye){y.findForwardRmpathEdges(L,H.edges[m[ye]],A,H).forEach(function(Y){var Ce=y.dfsCode.dfsEdgeList[m[ye]].fromNode+"-"+Y.label+"-"+z[Y.to].label;C[Ce]||(C[Ce]={projected:[],fromNodeId:y.dfsCode.dfsEdgeList[m[ye]].fromNode,edgeLabel:Y.label,nodeLabel2:z[Y.to].label}),C[Ce].projected.push({graphId:P.graphId,edge:Y,preNode:P})})};for(re=0;re<m.length;re++)xe(re)}}),Object.keys(N).forEach(function(P){var L=N[P],z=L.toNodeId,H=L.edgeLabel;y.dfsCode.dfsEdgeList.push(new M(p,z,"-1",H,"-1")),y.subGraphMining(N[P].projected),y.dfsCode.dfsEdgeList.pop()}),Object.keys(C).forEach(function(P){var L=C[P],z=L.fromNodeId,H=L.edgeLabel,re=L.nodeLabel2;y.dfsCode.dfsEdgeList.push(new M(z,p+1,c.VACANT_NODE_LABEL,H,re)),y.subGraphMining(C[P].projected),y.dfsCode.dfsEdgeList.pop()})}},g.prototype.generate1EdgeFrequentSubGraphs=function(){var h=this.graphs,y=this.directed,E=this.minSupport,m=this.frequentSize1Subgraphs,p={},A={},C={},N={};return Object.keys(h).forEach(function(P){var L=h[P],z=L.nodeMap;L.nodes.forEach(function(H,re){var ae=H.label,ue=P+"-"+ae;if(!C[ue]){var xe=p[ae]||0;xe++,p[ae]=xe}C[ue]={graphKey:P,label:ae},H.edges.forEach(function(ye){var Y=ae,Ce=z[ye.to].label;if(!y&&Y>Ce){var ge=Ce;Ce=Y,Y=ge}var he=ye.label,Q=P+"-"+Y+"-"+he+"-"+Ce,W=Y+"-"+he+"-"+Ce;if(!A[W]){var le=A[W]||0;le++,A[W]=le}N[Q]={graphId:P,nodeLabel1:Y,edgeLabel:he,nodeLabel2:Ce}})})}),Object.keys(p).forEach(function(P){if(!(p[P]<E)){var L={nodes:[],edges:[]};L.nodes.push({id:"0",label:P}),m.push(L)}}),m},g.prototype.run=function(){var h=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var y=this.graphs,E=(this.directed,{});Object.keys(y).forEach(function(m){var p=y[m],A=p.nodeMap;p.nodes.forEach(function(C){h.findForwardRootEdges(p,C).forEach(function(N){var P=A[N.to],L=C.label+"-"+N.label+"-"+P.label;E[L]||(E[L]={projected:[],nodeLabel1:C.label,edgeLabel:N.label,nodeLabel2:P.label});var z={graphId:m,edge:N,preNode:null};E[L].projected.push(z)})})}),Object.keys(E).forEach(function(m){var p=E[m],A=p.projected,C=p.nodeLabel1,N=p.edgeLabel,P=p.nodeLabel2;h.dfsCode.dfsEdgeList.push(new M(0,1,C,N,P)),h.subGraphMining(A),h.dfsCode.dfsEdgeList.pop()})}},g}(),S=function(g){var h=g.graphs,y=g.directed,E=y!==void 0&&y,m=g.nodeLabelProp,p=m===void 0?"cluster":m,A=g.edgeLabelProp,C=A===void 0?"cluster":A,N=function(ue,xe,ye,Y){var Ce={};return Object.keys(ue).forEach(function(ge,he){var Q=ue[ge],W=new c.Graph(he,!0,xe),le={};Q.nodes.forEach(function(Oe,Te){W.addNode(Te,Oe[ye]),le[Oe.id]=Te}),Q.edges.forEach(function(Oe,Te){var se=le[Oe.source],ee=le[Oe.target];W.addEdge(-1,se,ee,Oe[Y])}),W&&W.getNodeNum()&&(Ce[W.id]=W)}),Ce}(h,E,p,C),P=g.minSupport,L=g.maxNodeNum,z=g.minNodeNum,H=g.verbose,re=g.top,ae=new O({graphs:N,minSupport:P,maxNodeNum:L,minNodeNum:z,top:re,verbose:H,directed:E});return ae.run(),function(ue,xe,ye){var Y=[];return ue.forEach(function(Ce){var ge={nodes:[],edges:[]};Ce.nodes.forEach(function(he){var Q;ge.nodes.push(((Q={id:""+he.id})[xe]=he.label,Q))}),Ce.edges.forEach(function(he){var Q;ge.edges.push(((Q={source:""+he.from,target:""+he.to})[ye]=he.label,Q))}),Y.push(ge)}),Y}(ae.frequentSubgraphs,p,C)};b.default=S},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Graph=b.Node=b.Edge=b.AUTO_EDGE_ID=b.VACANT_GRAPH_ID=b.VACANT_NODE_LABEL=b.VACANT_EDGE_LABEL=b.VACANT_NODE_ID=b.VACANT_EDGE_ID=void 0,b.VACANT_EDGE_ID=-1,b.VACANT_NODE_ID=-1,b.VACANT_EDGE_LABEL="-1",b.VACANT_NODE_LABEL="-1",b.VACANT_GRAPH_ID=-1,b.AUTO_EDGE_ID="-1";var f=function(_,x,O,S){_===void 0&&(_=-1),x===void 0&&(x=-1),O===void 0&&(O=-1),S===void 0&&(S="-1"),this.id=_,this.from=x,this.to=O,this.label=S};b.Edge=f;var c=function(){function _(x,O){x===void 0&&(x=-1),O===void 0&&(O="-1"),this.id=x,this.label=O,this.edges=[],this.edgeMap={}}return _.prototype.addEdge=function(x){this.edges.push(x),this.edgeMap[x.id]=x},_}();b.Node=c;var M=function(){function _(x,O,S){x===void 0&&(x=-1),O===void 0&&(O=!0),S===void 0&&(S=!1),this.id=x,this.edgeIdAutoIncrease=O,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=S}return _.prototype.getNodeNum=function(){return this.nodes.length},_.prototype.addNode=function(x,O){if(!this.nodeMap[x]){var S=new c(x,O);this.nodes.push(S),this.nodeMap[x]=S,this.nodeLabelMap[O]||(this.nodeLabelMap[O]=[]),this.nodeLabelMap[O].push(x)}},_.prototype.addEdge=function(x,O,S,g){if((this.edgeIdAutoIncrease||x===void 0)&&(x=this.counter++),!(this.nodeMap[O]&&this.nodeMap[S]&&this.nodeMap[S].edgeMap[x])){var h=new f(x,O,S,g);if(this.edges.push(h),this.edgeMap[x]=h,this.nodeMap[O].addEdge(h),this.edgeLabelMap[g]||(this.edgeLabelMap[g]=[]),this.edgeLabelMap[g].push(h),!this.directed){var y=new f(x,S,O,g);this.nodeMap[S].addEdge(y),this.edgeLabelMap[g].push(y)}}},_}();b.Graph=M},function(R,b,o){var f=o(299),c=o(300),M={};for(var _ in f)f.hasOwnProperty(_)&&(M[f[_]]=_);var x=R.exports={to:{},get:{}};function O(g,h,y){return Math.min(Math.max(h,g),y)}function S(g){var h=g.toString(16).toUpperCase();return h.length<2?"0"+h:h}x.get=function(g){var h,y;switch(g.substring(0,3).toLowerCase()){case"hsl":h=x.get.hsl(g),y="hsl";break;case"hwb":h=x.get.hwb(g),y="hwb";break;default:h=x.get.rgb(g),y="rgb"}return h?{model:y,value:h}:null},x.get.rgb=function(g){if(!g)return null;var h,y,E,m=[0,0,0,1];if(h=g.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(E=h[2],h=h[1],y=0;y<3;y++){var p=2*y;m[y]=parseInt(h.slice(p,p+2),16)}E&&(m[3]=parseInt(E,16)/255)}else if(h=g.match(/^#([a-f0-9]{3,4})$/i)){for(E=(h=h[1])[3],y=0;y<3;y++)m[y]=parseInt(h[y]+h[y],16);E&&(m[3]=parseInt(E+E,16)/255)}else if(h=g.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(y=0;y<3;y++)m[y]=parseInt(h[y+1],0);h[4]&&(m[3]=parseFloat(h[4]))}else{if(!(h=g.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(h=g.match(/(\D+)/))?h[1]==="transparent"?[0,0,0,0]:(m=f[h[1]])?(m[3]=1,m):null:null;for(y=0;y<3;y++)m[y]=Math.round(2.55*parseFloat(h[y+1]));h[4]&&(m[3]=parseFloat(h[4]))}for(y=0;y<3;y++)m[y]=O(m[y],0,255);return m[3]=O(m[3],0,1),m},x.get.hsl=function(g){if(!g)return null;var h=g.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)\s*)?\)$/);if(h){var y=parseFloat(h[4]);return[(parseFloat(h[1])+360)%360,O(parseFloat(h[2]),0,100),O(parseFloat(h[3]),0,100),O(isNaN(y)?1:y,0,1)]}return null},x.get.hwb=function(g){if(!g)return null;var h=g.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(h){var y=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,O(parseFloat(h[2]),0,100),O(parseFloat(h[3]),0,100),O(isNaN(y)?1:y,0,1)]}return null},x.to.hex=function(){var g=c(arguments);return"#"+S(g[0])+S(g[1])+S(g[2])+(g[3]<1?S(Math.round(255*g[3])):"")},x.to.rgb=function(){var g=c(arguments);return g.length<4||g[3]===1?"rgb("+Math.round(g[0])+", "+Math.round(g[1])+", "+Math.round(g[2])+")":"rgba("+Math.round(g[0])+", "+Math.round(g[1])+", "+Math.round(g[2])+", "+g[3]+")"},x.to.rgb.percent=function(){var g=c(arguments),h=Math.round(g[0]/255*100),y=Math.round(g[1]/255*100),E=Math.round(g[2]/255*100);return g.length<4||g[3]===1?"rgb("+h+"%, "+y+"%, "+E+"%)":"rgba("+h+"%, "+y+"%, "+E+"%, "+g[3]+")"},x.to.hsl=function(){var g=c(arguments);return g.length<4||g[3]===1?"hsl("+g[0]+", "+g[1]+"%, "+g[2]+"%)":"hsla("+g[0]+", "+g[1]+"%, "+g[2]+"%, "+g[3]+")"},x.to.hwb=function(){var g=c(arguments),h="";return g.length>=4&&g[3]!==1&&(h=", "+g[3]),"hwb("+g[0]+", "+g[1]+"%, "+g[2]+"%"+h+")"},x.to.keyword=function(g){return M[g.slice(0,3)]}},function(R,b,o){"use strict";R.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(R,b,o){"use strict";var f=o(301),c=Array.prototype.concat,M=Array.prototype.slice,_=R.exports=function(x){for(var O=[],S=0,g=x.length;S<g;S++){var h=x[S];f(h)?O=c.call(O,M.call(h)):O.push(h)}return O};_.wrap=function(x){return function(){return x(_(arguments))}}},function(R,b){R.exports=function(o){return!(!o||typeof o=="string")&&(o instanceof Array||Array.isArray(o)||o.length>=0&&(o.splice instanceof Function||Object.getOwnPropertyDescriptor(o,o.length-1)&&o.constructor.name!=="String"))}},function(R,b,o){function f(x){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}var c=o(173),M=o(304),_={};Object.keys(c).forEach(function(x){_[x]={},Object.defineProperty(_[x],"channels",{value:c[x].channels}),Object.defineProperty(_[x],"labels",{value:c[x].labels});var O=M(x);Object.keys(O).forEach(function(S){var g=O[S];_[x][S]=function(h){var y=function(E){if(E==null)return E;arguments.length>1&&(E=Array.prototype.slice.call(arguments));var m=h(E);if(f(m)==="object")for(var p=m.length,A=0;A<p;A++)m[A]=Math.round(m[A]);return m};return"conversion"in h&&(y.conversion=h.conversion),y}(g),_[x][S].raw=function(h){var y=function(E){return E==null?E:(arguments.length>1&&(E=Array.prototype.slice.call(arguments)),h(E))};return"conversion"in h&&(y.conversion=h.conversion),y}(g)})}),R.exports=_},function(R,b,o){"use strict";R.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(R,b,o){var f=o(173);function c(x){var O=function(){for(var A={},C=Object.keys(f),N=C.length,P=0;P<N;P++)A[C[P]]={distance:-1,parent:null};return A}(),S=[x];for(O[x].distance=0;S.length;)for(var g=S.pop(),h=Object.keys(f[g]),y=h.length,E=0;E<y;E++){var m=h[E],p=O[m];p.distance===-1&&(p.distance=O[g].distance+1,p.parent=g,S.unshift(m))}return O}function M(x,O){return function(S){return O(x(S))}}function _(x,O){for(var S=[O[x].parent,x],g=f[O[x].parent][x],h=O[x].parent;O[h].parent;)S.unshift(O[h].parent),g=M(f[O[h].parent][h],g),h=O[h].parent;return g.conversion=S,g}R.exports=function(x){for(var O=c(x),S={},g=Object.keys(O),h=g.length,y=0;y<h;y++){var E=g[y];O[E].parent!==null&&(S[E]=_(E,O))}return S}},function(R,b,o){var f=o(306);R.exports={Graph:f.Graph,json:o(408),alg:o(409),version:f.version}},function(R,b,o){R.exports={Graph:o(143),version:o(407)}},function(R,b,o){var f=o(174);R.exports=function(c){return f(c,4)}},function(R,b){R.exports=function(){this.__data__=[],this.size=0}},function(R,b,o){var f=o(98),c=Array.prototype.splice;R.exports=function(M){var _=this.__data__,x=f(_,M);return!(x<0)&&(x==_.length-1?_.pop():c.call(_,x,1),--this.size,!0)}},function(R,b,o){var f=o(98);R.exports=function(c){var M=this.__data__,_=f(M,c);return _<0?void 0:M[_][1]}},function(R,b,o){var f=o(98);R.exports=function(c){return f(this.__data__,c)>-1}},function(R,b,o){var f=o(98);R.exports=function(c,M){var _=this.__data__,x=f(_,c);return x<0?(++this.size,_.push([c,M])):_[x][1]=M,this}},function(R,b,o){var f=o(97);R.exports=function(){this.__data__=new f,this.size=0}},function(R,b){R.exports=function(o){var f=this.__data__,c=f.delete(o);return this.size=f.size,c}},function(R,b){R.exports=function(o){return this.__data__.get(o)}},function(R,b){R.exports=function(o){return this.__data__.has(o)}},function(R,b,o){var f=o(97),c=o(144),M=o(145);R.exports=function(_,x){var O=this.__data__;if(O instanceof f){var S=O.__data__;if(!c||S.length<199)return S.push([_,x]),this.size=++O.size,this;O=this.__data__=new M(S)}return O.set(_,x),this.size=O.size,this}},function(R,b,o){var f=o(84),c=o(321),M=o(43),_=o(177),x=/^\[object .+?Constructor\]$/,O=Function.prototype,S=Object.prototype,g=O.toString,h=S.hasOwnProperty,y=RegExp("^"+g.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");R.exports=function(E){return!(!M(E)||c(E))&&(f(E)?y:x).test(_(E))}},function(R,b,o){var f=o(71),c=Object.prototype,M=c.hasOwnProperty,_=c.toString,x=f?f.toStringTag:void 0;R.exports=function(O){var S=M.call(O,x),g=O[x];try{O[x]=void 0;var h=!0}catch(E){}var y=_.call(O);return h&&(S?O[x]=g:delete O[x]),y}},function(R,b){var o=Object.prototype.toString;R.exports=function(f){return o.call(f)}},function(R,b,o){var f,c=o(322),M=(f=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"";R.exports=function(_){return!!M&&M in _}},function(R,b,o){var f=o(47)["__core-js_shared__"];R.exports=f},function(R,b){R.exports=function(o,f){return o==null?void 0:o[f]}},function(R,b,o){var f=o(325),c=o(97),M=o(144);R.exports=function(){this.size=0,this.__data__={hash:new f,map:new(M||c),string:new f}}},function(R,b,o){var f=o(326),c=o(327),M=o(328),_=o(329),x=o(330);function O(S){var g=-1,h=S==null?0:S.length;for(this.clear();++g<h;){var y=S[g];this.set(y[0],y[1])}}O.prototype.clear=f,O.prototype.delete=c,O.prototype.get=M,O.prototype.has=_,O.prototype.set=x,R.exports=O},function(R,b,o){var f=o(99);R.exports=function(){this.__data__=f?f(null):{},this.size=0}},function(R,b){R.exports=function(o){var f=this.has(o)&&delete this.__data__[o];return this.size-=f?1:0,f}},function(R,b,o){var f=o(99),c=Object.prototype.hasOwnProperty;R.exports=function(M){var _=this.__data__;if(f){var x=_[M];return x==="__lodash_hash_undefined__"?void 0:x}return c.call(_,M)?_[M]:void 0}},function(R,b,o){var f=o(99),c=Object.prototype.hasOwnProperty;R.exports=function(M){var _=this.__data__;return f?_[M]!==void 0:c.call(_,M)}},function(R,b,o){var f=o(99);R.exports=function(c,M){var _=this.__data__;return this.size+=this.has(c)?0:1,_[c]=f&&M===void 0?"__lodash_hash_undefined__":M,this}},function(R,b,o){var f=o(100);R.exports=function(c){var M=f(this,c).delete(c);return this.size-=M?1:0,M}},function(R,b){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}R.exports=function(f){var c=o(f);return c=="string"||c=="number"||c=="symbol"||c=="boolean"?f!=="__proto__":f===null}},function(R,b,o){var f=o(100);R.exports=function(c){return f(this,c).get(c)}},function(R,b,o){var f=o(100);R.exports=function(c){return f(this,c).has(c)}},function(R,b,o){var f=o(100);R.exports=function(c,M){var _=f(this,c),x=_.size;return _.set(c,M),this.size+=_.size==x?0:1,this}},function(R,b,o){var f=o(85),c=o(57);R.exports=function(M,_){return M&&f(_,c(_),M)}},function(R,b){R.exports=function(o,f){for(var c=-1,M=Array(o);++c<o;)M[c]=f(c);return M}},function(R,b,o){var f=o(63),c=o(49);R.exports=function(M){return c(M)&&f(M)=="[object Arguments]"}},function(R,b){R.exports=function(){return!1}},function(R,b,o){var f=o(63),c=o(147),M=o(49),_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Arguments]"]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_["[object Function]"]=_["[object Map]"]=_["[object Number]"]=_["[object Object]"]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1,R.exports=function(x){return M(x)&&c(x.length)&&!!_[f(x)]}},function(R,b,o){var f=o(180)(Object.keys,Object);R.exports=f},function(R,b,o){var f=o(85),c=o(64);R.exports=function(M,_){return M&&f(_,c(_),M)}},function(R,b,o){var f=o(43),c=o(105),M=o(344),_=Object.prototype.hasOwnProperty;R.exports=function(x){if(!f(x))return M(x);var O=c(x),S=[];for(var g in x)(g!="constructor"||!O&&_.call(x,g))&&S.push(g);return S}},function(R,b){R.exports=function(o){var f=[];if(o!=null)for(var c in Object(o))f.push(c);return f}},function(R,b,o){var f=o(85),c=o(150);R.exports=function(M,_){return f(M,c(M),_)}},function(R,b,o){var f=o(85),c=o(185);R.exports=function(M,_){return f(M,c(M),_)}},function(R,b,o){var f=o(187),c=o(185),M=o(64);R.exports=function(_){return f(_,M,c)}},function(R,b,o){var f=o(62)(o(47),"DataView");R.exports=f},function(R,b,o){var f=o(62)(o(47),"Promise");R.exports=f},function(R,b,o){var f=o(62)(o(47),"WeakMap");R.exports=f},function(R,b){var o=Object.prototype.hasOwnProperty;R.exports=function(f){var c=f.length,M=new f.constructor(c);return c&&typeof f[0]=="string"&&o.call(f,"index")&&(M.index=f.index,M.input=f.input),M}},function(R,b,o){var f=o(152),c=o(353),M=o(354),_=o(355),x=o(190);R.exports=function(O,S,g){var h=O.constructor;switch(S){case"[object ArrayBuffer]":return f(O);case"[object Boolean]":case"[object Date]":return new h(+O);case"[object DataView]":return c(O,g);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(O,g);case"[object Map]":return new h;case"[object Number]":case"[object String]":return new h(O);case"[object RegExp]":return M(O);case"[object Set]":return new h;case"[object Symbol]":return _(O)}}},function(R,b,o){var f=o(152);R.exports=function(c,M){var _=M?f(c.buffer):c.buffer;return new c.constructor(_,c.byteOffset,c.byteLength)}},function(R,b){var o=/\w*$/;R.exports=function(f){var c=new f.constructor(f.source,o.exec(f));return c.lastIndex=f.lastIndex,c}},function(R,b,o){var f=o(71),c=f?f.prototype:void 0,M=c?c.valueOf:void 0;R.exports=function(_){return M?Object(M.call(_)):{}}},function(R,b,o){var f=o(357),c=o(104),M=o(148),_=M&&M.isMap,x=_?c(_):f;R.exports=x},function(R,b,o){var f=o(73),c=o(49);R.exports=function(M){return c(M)&&f(M)=="[object Map]"}},function(R,b,o){var f=o(359),c=o(104),M=o(148),_=M&&M.isSet,x=_?c(_):f;R.exports=x},function(R,b,o){var f=o(73),c=o(49);R.exports=function(M){return c(M)&&f(M)=="[object Set]"}},function(R,b){R.exports=function(o){return function(f,c,M){for(var _=-1,x=Object(f),O=M(f),S=O.length;S--;){var g=O[o?S:++_];if(c(x[g],g,x)===!1)break}return f}}},function(R,b,o){var f=o(52);R.exports=function(c,M){return function(_,x){if(_==null)return _;if(!f(_))return c(_,x);for(var O=_.length,S=M?O:-1,g=Object(_);(M?S--:++S<O)&&x(g[S],S,g)!==!1;);return _}}},function(R,b,o){var f=o(107);R.exports=function(c,M){var _=[];return f(c,function(x,O,S){M(x,O,S)&&_.push(x)}),_}},function(R,b,o){var f=o(364),c=o(372),M=o(202);R.exports=function(_){var x=c(_);return x.length==1&&x[0][2]?M(x[0][0],x[0][1]):function(O){return O===_||f(O,_,x)}}},function(R,b,o){var f=o(96),c=o(197);R.exports=function(M,_,x,O){var S=x.length,g=S,h=!O;if(M==null)return!g;for(M=Object(M);S--;){var y=x[S];if(h&&y[2]?y[1]!==M[y[0]]:!(y[0]in M))return!1}for(;++S<g;){var E=(y=x[S])[0],m=M[E],p=y[1];if(h&&y[2]){if(m===void 0&&!(E in M))return!1}else{var A=new f;if(O)var C=O(m,p,E,M,_,A);if(!(C===void 0?c(p,m,3,O,A):C))return!1}}return!0}},function(R,b,o){var f=o(96),c=o(198),M=o(369),_=o(371),x=o(73),O=o(31),S=o(72),g=o(88),h="[object Object]",y=Object.prototype.hasOwnProperty;R.exports=function(E,m,p,A,C,N){var P=O(E),L=O(m),z=P?"[object Array]":x(E),H=L?"[object Array]":x(m),re=(z=z=="[object Arguments]"?h:z)==h,ae=(H=H=="[object Arguments]"?h:H)==h,ue=z==H;if(ue&&S(E)){if(!S(m))return!1;P=!0,re=!1}if(ue&&!re)return N||(N=new f),P||g(E)?c(E,m,p,A,C,N):M(E,m,z,p,A,C,N);if(!(1&p)){var xe=re&&y.call(E,"__wrapped__"),ye=ae&&y.call(m,"__wrapped__");if(xe||ye){var Y=xe?E.value():E,Ce=ye?m.value():m;return N||(N=new f),C(Y,Ce,p,A,N)}}return!!ue&&(N||(N=new f),_(E,m,p,A,C,N))}},function(R,b){R.exports=function(o){return this.__data__.set(o,"__lodash_hash_undefined__"),this}},function(R,b){R.exports=function(o){return this.__data__.has(o)}},function(R,b){R.exports=function(o,f){for(var c=-1,M=o==null?0:o.length;++c<M;)if(f(o[c],c,o))return!0;return!1}},function(R,b,o){var f=o(71),c=o(189),M=o(70),_=o(198),x=o(370),O=o(156),S=f?f.prototype:void 0,g=S?S.valueOf:void 0;R.exports=function(h,y,E,m,p,A,C){switch(E){case"[object DataView]":if(h.byteLength!=y.byteLength||h.byteOffset!=y.byteOffset)return!1;h=h.buffer,y=y.buffer;case"[object ArrayBuffer]":return!(h.byteLength!=y.byteLength||!A(new c(h),new c(y)));case"[object Boolean]":case"[object Date]":case"[object Number]":return M(+h,+y);case"[object Error]":return h.name==y.name&&h.message==y.message;case"[object RegExp]":case"[object String]":return h==y+"";case"[object Map]":var N=x;case"[object Set]":var P=1&m;if(N||(N=O),h.size!=y.size&&!P)return!1;var L=C.get(h);if(L)return L==y;m|=2,C.set(h,y);var z=_(N(h),N(y),m,p,A,C);return C.delete(h),z;case"[object Symbol]":if(g)return g.call(h)==g.call(y)}return!1}},function(R,b){R.exports=function(o){var f=-1,c=Array(o.size);return o.forEach(function(M,_){c[++f]=[_,M]}),c}},function(R,b,o){var f=o(186),c=Object.prototype.hasOwnProperty;R.exports=function(M,_,x,O,S,g){var h=1&x,y=f(M),E=y.length;if(E!=f(_).length&&!h)return!1;for(var m=E;m--;){var p=y[m];if(!(h?p in _:c.call(_,p)))return!1}var A=g.get(M),C=g.get(_);if(A&&C)return A==_&&C==M;var N=!0;g.set(M,_),g.set(_,M);for(var P=h;++m<E;){var L=M[p=y[m]],z=_[p];if(O)var H=h?O(z,L,p,_,M,g):O(L,z,p,M,_,g);if(!(H===void 0?L===z||S(L,z,x,O,g):H)){N=!1;break}P||(P=p=="constructor")}if(N&&!P){var re=M.constructor,ae=_.constructor;re==ae||!("constructor"in M)||!("constructor"in _)||typeof re=="function"&&re instanceof re&&typeof ae=="function"&&ae instanceof ae||(N=!1)}return g.delete(M),g.delete(_),N}},function(R,b,o){var f=o(201),c=o(57);R.exports=function(M){for(var _=c(M),x=_.length;x--;){var O=_[x],S=M[O];_[x]=[O,S,f(S)]}return _}},function(R,b,o){var f=o(197),c=o(374),M=o(204),_=o(157),x=o(201),O=o(202),S=o(89);R.exports=function(g,h){return _(g)&&x(h)?O(S(g),h):function(y){var E=c(y,g);return E===void 0&&E===h?M(y,g):f(h,E,3)}}},function(R,b,o){var f=o(108);R.exports=function(c,M,_){var x=c==null?void 0:f(c,M);return x===void 0?_:x}},function(R,b,o){var f=o(376),c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,_=f(function(x){var O=[];return x.charCodeAt(0)===46&&O.push(""),x.replace(c,function(S,g,h,y){O.push(h?y.replace(M,"$1"):g||S)}),O});R.exports=_},function(R,b,o){var f=o(377);R.exports=function(c){var M=f(c,function(x){return _.size===500&&_.clear(),x}),_=M.cache;return M}},function(R,b,o){var f=o(145);function c(M,_){if(typeof M!="function"||_!=null&&typeof _!="function")throw new TypeError("Expected a function");var x=function O(){var S=arguments,g=_?_.apply(this,S):S[0],h=O.cache;if(h.has(g))return h.get(g);var y=M.apply(this,S);return O.cache=h.set(g,y)||h,y};return x.cache=new(c.Cache||f),x}c.Cache=f,R.exports=c},function(R,b,o){var f=o(71),c=o(110),M=o(31),_=o(74),x=f?f.prototype:void 0,O=x?x.toString:void 0;R.exports=function S(g){if(typeof g=="string")return g;if(M(g))return c(g,S)+"";if(_(g))return O?O.call(g):"";var h=g+"";return h=="0"&&1/g==-1/0?"-0":h}},function(R,b){R.exports=function(o,f){return o!=null&&f in Object(o)}},function(R,b,o){var f=o(206),c=o(381),M=o(157),_=o(89);R.exports=function(x){return M(x)?f(_(x)):c(x)}},function(R,b,o){var f=o(108);R.exports=function(c){return function(M){return f(M,c)}}},function(R,b){var o=Object.prototype.hasOwnProperty;R.exports=function(f,c){return f!=null&&o.call(f,c)}},function(R,b,o){var f=o(149),c=o(73),M=o(86),_=o(31),x=o(52),O=o(72),S=o(105),g=o(88),h=Object.prototype.hasOwnProperty;R.exports=function(y){if(y==null)return!0;if(x(y)&&(_(y)||typeof y=="string"||typeof y.splice=="function"||O(y)||g(y)||M(y)))return!y.length;var E=c(y);if(E=="[object Map]"||E=="[object Set]")return!y.size;if(S(y))return!f(y).length;for(var m in y)if(h.call(y,m))return!1;return!0}},function(R,b){R.exports=function(o,f,c,M){var _=-1,x=o==null?0:o.length;for(M&&x&&(c=o[++_]);++_<x;)c=f(c,o[_],_,o);return c}},function(R,b){R.exports=function(o,f,c,M,_){return _(o,function(x,O,S){c=M?(M=!1,x):f(c,x,O,S)}),c}},function(R,b,o){var f=o(149),c=o(73),M=o(52),_=o(387),x=o(388);R.exports=function(O){if(O==null)return 0;if(M(O))return _(O)?x(O):O.length;var S=c(O);return S=="[object Map]"||S=="[object Set]"?O.size:f(O).length}},function(R,b,o){var f=o(63),c=o(31),M=o(49);R.exports=function(_){return typeof _=="string"||!c(_)&&M(_)&&f(_)=="[object String]"}},function(R,b,o){var f=o(389),c=o(390),M=o(391);R.exports=function(_){return c(_)?M(_):f(_)}},function(R,b,o){var f=o(206)("length");R.exports=f},function(R,b){var o=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");R.exports=function(f){return o.test(f)}},function(R,b){var o="[\\ud800-\\udfff]",f="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",c="\\ud83c[\\udffb-\\udfff]",M="[^\\ud800-\\udfff]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",O="(?:"+f+"|"+c+")?",S="[\\ufe0e\\ufe0f]?"+O+("(?:\\u200d(?:"+[M,_,x].join("|")+")[\\ufe0e\\ufe0f]?"+O+")*"),g="(?:"+[M+f+"?",f,_,x,o].join("|")+")",h=RegExp(c+"(?="+c+")|"+g+S,"g");R.exports=function(y){for(var E=h.lastIndex=0;h.test(y);)++E;return E}},function(R,b,o){var f=o(146),c=o(192),M=o(154),_=o(53),x=o(106),O=o(31),S=o(72),g=o(84),h=o(43),y=o(88);R.exports=function(E,m,p){var A=O(E),C=A||S(E)||y(E);if(m=_(m,4),p==null){var N=E&&E.constructor;p=C?A?new N:[]:h(E)&&g(N)?c(x(E)):{}}return(C?f:M)(E,function(P,L,z){return m(p,P,L,z)}),p}},function(R,b,o){var f=o(158),c=o(111),M=o(398),_=o(215),x=c(function(O){return M(f(O,1,_,!0))});R.exports=x},function(R,b,o){var f=o(71),c=o(86),M=o(31),_=f?f.isConcatSpreadable:void 0;R.exports=function(x){return M(x)||c(x)||!!(_&&x&&x[_])}},function(R,b){R.exports=function(o,f,c){switch(c.length){case 0:return o.call(f);case 1:return o.call(f,c[0]);case 2:return o.call(f,c[0],c[1]);case 3:return o.call(f,c[0],c[1],c[2])}return o.apply(f,c)}},function(R,b,o){var f=o(153),c=o(178),M=o(65),_=c?function(x,O){return c(x,"toString",{configurable:!0,enumerable:!1,value:f(O),writable:!0})}:M;R.exports=_},function(R,b){var o=Date.now;R.exports=function(f){var c=0,M=0;return function(){var _=o(),x=16-(_-M);if(M=_,x>0){if(++c>=800)return arguments[0]}else c=0;return f.apply(void 0,arguments)}}},function(R,b,o){var f=o(199),c=o(399),M=o(403),_=o(200),x=o(404),O=o(156);R.exports=function(S,g,h){var y=-1,E=c,m=S.length,p=!0,A=[],C=A;if(h)p=!1,E=M;else if(m>=200){var N=g?null:x(S);if(N)return O(N);p=!1,E=_,C=new f}else C=g?[]:A;e:for(;++y<m;){var P=S[y],L=g?g(P):P;if(P=h||P!==0?P:0,p&&L==L){for(var z=C.length;z--;)if(C[z]===L)continue e;g&&C.push(L),A.push(P)}else E(C,L,h)||(C!==A&&C.push(L),A.push(P))}return A}},function(R,b,o){var f=o(400);R.exports=function(c,M){return!!(c!=null&&c.length)&&f(c,M,0)>-1}},function(R,b,o){var f=o(214),c=o(401),M=o(402);R.exports=function(_,x,O){return x==x?M(_,x,O):f(_,c,O)}},function(R,b){R.exports=function(o){return o!=o}},function(R,b){R.exports=function(o,f,c){for(var M=c-1,_=o.length;++M<_;)if(o[M]===f)return M;return-1}},function(R,b){R.exports=function(o,f,c){for(var M=-1,_=o==null?0:o.length;++M<_;)if(c(f,o[M]))return!0;return!1}},function(R,b,o){var f=o(188),c=o(405),M=o(156),_=f&&1/M(new f([,-0]))[1]==1/0?function(x){return new f(x)}:c;R.exports=_},function(R,b){R.exports=function(){}},function(R,b,o){var f=o(110);R.exports=function(c,M){return f(M,function(_){return c[_]})}},function(R,b){R.exports="2.1.8"},function(R,b,o){var f=o(42),c=o(143);function M(x){return f.map(x.nodes(),function(O){var S=x.node(O),g=x.parent(O),h={v:O};return f.isUndefined(S)||(h.value=S),f.isUndefined(g)||(h.parent=g),h})}function _(x){return f.map(x.edges(),function(O){var S=x.edge(O),g={v:O.v,w:O.w};return f.isUndefined(O.name)||(g.name=O.name),f.isUndefined(S)||(g.value=S),g})}R.exports={write:function(x){var O={options:{directed:x.isDirected(),multigraph:x.isMultigraph(),compound:x.isCompound()},nodes:M(x),edges:_(x)};return f.isUndefined(x.graph())||(O.value=f.clone(x.graph())),O},read:function(x){var O=new c(x.options).setGraph(x.value);return f.each(x.nodes,function(S){O.setNode(S.v,S.value),S.parent&&O.setParent(S.v,S.parent)}),f.each(x.edges,function(S){O.setEdge({v:S.v,w:S.w,name:S.name},S.value)}),O}}},function(R,b,o){R.exports={components:o(410),dijkstra:o(217),dijkstraAll:o(411),findCycles:o(412),floydWarshall:o(413),isAcyclic:o(414),postorder:o(415),preorder:o(416),prim:o(417),tarjan:o(219),topsort:o(220)}},function(R,b,o){var f=o(42);R.exports=function(c){var M,_={},x=[];function O(S){f.has(_,S)||(_[S]=!0,M.push(S),f.each(c.successors(S),O),f.each(c.predecessors(S),O))}return f.each(c.nodes(),function(S){M=[],O(S),M.length&&x.push(M)}),x}},function(R,b,o){var f=o(217),c=o(42);R.exports=function(M,_,x){return c.transform(M.nodes(),function(O,S){O[S]=f(M,S,_,x)},{})}},function(R,b,o){var f=o(42),c=o(219);R.exports=function(M){return f.filter(c(M),function(_){return _.length>1||_.length===1&&M.hasEdge(_[0],_[0])})}},function(R,b,o){var f=o(42);R.exports=function(M,_,x){return function(O,S,g){var h={},y=O.nodes();return y.forEach(function(E){h[E]={},h[E][E]={distance:0},y.forEach(function(m){E!==m&&(h[E][m]={distance:Number.POSITIVE_INFINITY})}),g(E).forEach(function(m){var p=m.v===E?m.w:m.v,A=S(m);h[E][p]={distance:A,predecessor:E}})}),y.forEach(function(E){var m=h[E];y.forEach(function(p){var A=h[p];y.forEach(function(C){var N=A[E],P=m[C],L=A[C],z=N.distance+P.distance;z<L.distance&&(L.distance=z,L.predecessor=P.predecessor)})})}),h}(M,_||c,x||function(O){return M.outEdges(O)})};var c=f.constant(1)},function(R,b,o){var f=o(220);R.exports=function(c){try{f(c)}catch(M){if(M instanceof f.CycleException)return!1;throw M}return!0}},function(R,b,o){var f=o(221);R.exports=function(c,M){return f(c,M,"post")}},function(R,b,o){var f=o(221);R.exports=function(c,M){return f(c,M,"pre")}},function(R,b,o){var f=o(42),c=o(143),M=o(218);R.exports=function(_,x){var O,S=new c,g={},h=new M;function y(m){var p=m.v===O?m.w:m.v,A=h.priority(p);if(A!==void 0){var C=x(m);C<A&&(g[p]=O,h.decrease(p,C))}}if(_.nodeCount()===0)return S;f.each(_.nodes(),function(m){h.add(m,Number.POSITIVE_INFINITY),S.setNode(m)}),h.decrease(_.nodes()[0],0);for(var E=!1;h.size()>0;){if(O=h.removeMin(),f.has(g,O))S.setEdge(O,g[O]);else{if(E)throw new Error("Input graph is not connected: "+_);E=!0}_.nodeEdges(O).forEach(y)}return S}},function(R,b,o){"use strict";var f=o(28),c=o(458),M=o(461),_=o(462),x=o(36).normalizeRanks,O=o(464),S=o(36).removeEmptyRanks,g=o(465),h=o(466),y=o(467),E=o(468),m=o(477),p=o(36),A=o(46).Graph;R.exports=function(ye,Y){var Ce=Y&&Y.debugTiming?p.time:p.notime;Ce("layout",function(){var ge=Ce("  buildLayoutGraph",function(){return function(he){var Q=new A({multigraph:!0,compound:!0}),W=xe(he.graph());return Q.setGraph(f.merge({},N,ue(W,C),f.pick(W,P))),f.forEach(he.nodes(),function(le){var Oe=xe(he.node(le));Q.setNode(le,f.defaults(ue(Oe,L),z)),Q.setParent(le,he.parent(le))}),f.forEach(he.edges(),function(le){var Oe=xe(he.edge(le));Q.setEdge(le,f.merge({},re,ue(Oe,H),f.pick(Oe,ae)))}),Q}(ye)});Ce("  runLayout",function(){(function(he,Q){Q("    makeSpaceForEdgeLabels",function(){(function(W){var le=W.graph();le.ranksep/=2,f.forEach(W.edges(),function(Oe){var Te=W.edge(Oe);Te.minlen*=2,Te.labelpos.toLowerCase()!=="c"&&(le.rankdir==="TB"||le.rankdir==="BT"?Te.width+=Te.labeloffset:Te.height+=Te.labeloffset)})})(he)}),Q("    removeSelfEdges",function(){(function(W){f.forEach(W.edges(),function(le){if(le.v===le.w){var Oe=W.node(le.v);Oe.selfEdges||(Oe.selfEdges=[]),Oe.selfEdges.push({e:le,label:W.edge(le)}),W.removeEdge(le)}})})(he)}),Q("    acyclic",function(){c.run(he)}),Q("    nestingGraph.run",function(){g.run(he)}),Q("    rank",function(){_(p.asNonCompoundGraph(he))}),Q("    injectEdgeLabelProxies",function(){(function(W){f.forEach(W.edges(),function(le){var Oe=W.edge(le);if(Oe.width&&Oe.height){var Te=W.node(le.v),se={rank:(W.node(le.w).rank-Te.rank)/2+Te.rank,e:le};p.addDummyNode(W,"edge-proxy",se,"_ep")}})})(he)}),Q("    removeEmptyRanks",function(){S(he)}),Q("    nestingGraph.cleanup",function(){g.cleanup(he)}),Q("    normalizeRanks",function(){x(he)}),Q("    assignRankMinMax",function(){(function(W){var le=0;f.forEach(W.nodes(),function(Oe){var Te=W.node(Oe);Te.borderTop&&(Te.minRank=W.node(Te.borderTop).rank,Te.maxRank=W.node(Te.borderBottom).rank,le=f.max(le,Te.maxRank))}),W.graph().maxRank=le})(he)}),Q("    removeEdgeLabelProxies",function(){(function(W){f.forEach(W.nodes(),function(le){var Oe=W.node(le);Oe.dummy==="edge-proxy"&&(W.edge(Oe.e).labelRank=Oe.rank,W.removeNode(le))})})(he)}),Q("    normalize.run",function(){M.run(he)}),Q("    parentDummyChains",function(){O(he)}),Q("    addBorderSegments",function(){h(he)}),Q("    order",function(){E(he)}),Q("    insertSelfEdges",function(){(function(W){var le=p.buildLayerMatrix(W);f.forEach(le,function(Oe){var Te=0;f.forEach(Oe,function(se,ee){var te=W.node(se);te.order=ee+Te,f.forEach(te.selfEdges,function(U){p.addDummyNode(W,"selfedge",{width:U.label.width,height:U.label.height,rank:te.rank,order:ee+ ++Te,e:U.e,label:U.label},"_se")}),delete te.selfEdges})})})(he)}),Q("    adjustCoordinateSystem",function(){y.adjust(he)}),Q("    position",function(){m(he)}),Q("    positionSelfEdges",function(){(function(W){f.forEach(W.nodes(),function(le){var Oe=W.node(le);if(Oe.dummy==="selfedge"){var Te=W.node(Oe.e.v),se=Te.x+Te.width/2,ee=Te.y,te=Oe.x-se,U=Te.height/2;W.setEdge(Oe.e,Oe.label),W.removeNode(le),Oe.label.points=[{x:se+2*te/3,y:ee-U},{x:se+5*te/6,y:ee-U},{x:se+te,y:ee},{x:se+5*te/6,y:ee+U},{x:se+2*te/3,y:ee+U}],Oe.label.x=Oe.x,Oe.label.y=Oe.y}})})(he)}),Q("    removeBorderNodes",function(){(function(W){f.forEach(W.nodes(),function(le){if(W.children(le).length){var Oe=W.node(le),Te=W.node(Oe.borderTop),se=W.node(Oe.borderBottom),ee=W.node(f.last(Oe.borderLeft)),te=W.node(f.last(Oe.borderRight));Oe.width=Math.abs(te.x-ee.x),Oe.height=Math.abs(se.y-Te.y),Oe.x=ee.x+Oe.width/2,Oe.y=Te.y+Oe.height/2}}),f.forEach(W.nodes(),function(le){W.node(le).dummy==="border"&&W.removeNode(le)})})(he)}),Q("    normalize.undo",function(){M.undo(he)}),Q("    fixupEdgeLabelCoords",function(){(function(W){f.forEach(W.edges(),function(le){var Oe=W.edge(le);if(f.has(Oe,"x"))switch(Oe.labelpos!=="l"&&Oe.labelpos!=="r"||(Oe.width-=Oe.labeloffset),Oe.labelpos){case"l":Oe.x-=Oe.width/2+Oe.labeloffset;break;case"r":Oe.x+=Oe.width/2+Oe.labeloffset}})})(he)}),Q("    undoCoordinateSystem",function(){y.undo(he)}),Q("    translateGraph",function(){(function(W){var le=Number.POSITIVE_INFINITY,Oe=0,Te=Number.POSITIVE_INFINITY,se=0,ee=W.graph(),te=ee.marginx||0,U=ee.marginy||0;function X(B){var J=B.x,ne=B.y,ie=B.width,Z=B.height;le=Math.min(le,J-ie/2),Oe=Math.max(Oe,J+ie/2),Te=Math.min(Te,ne-Z/2),se=Math.max(se,ne+Z/2)}f.forEach(W.nodes(),function(B){X(W.node(B))}),f.forEach(W.edges(),function(B){var J=W.edge(B);f.has(J,"x")&&X(J)}),le-=te,Te-=U,f.forEach(W.nodes(),function(B){var J=W.node(B);J.x-=le,J.y-=Te}),f.forEach(W.edges(),function(B){var J=W.edge(B);f.forEach(J.points,function(ne){ne.x-=le,ne.y-=Te}),f.has(J,"x")&&(J.x-=le),f.has(J,"y")&&(J.y-=Te)}),ee.width=Oe-le+te,ee.height=se-Te+U})(he)}),Q("    assignNodeIntersects",function(){(function(W){f.forEach(W.edges(),function(le){var Oe,Te,se=W.edge(le),ee=W.node(le.v),te=W.node(le.w);se.points?(Oe=se.points[0],Te=se.points[se.points.length-1]):(se.points=[],Oe=te,Te=ee),se.points.unshift(p.intersectRect(ee,Oe)),se.points.push(p.intersectRect(te,Te))})})(he)}),Q("    reversePoints",function(){(function(W){f.forEach(W.edges(),function(le){var Oe=W.edge(le);Oe.reversed&&Oe.points.reverse()})})(he)}),Q("    acyclic.undo",function(){c.undo(he)})})(ge,Ce)}),Ce("  updateInputGraph",function(){(function(he,Q){f.forEach(he.nodes(),function(W){var le=he.node(W),Oe=Q.node(W);le&&(le.x=Oe.x,le.y=Oe.y,Q.children(W).length&&(le.width=Oe.width,le.height=Oe.height))}),f.forEach(he.edges(),function(W){var le=he.edge(W),Oe=Q.edge(W);le.points=Oe.points,f.has(Oe,"x")&&(le.x=Oe.x,le.y=Oe.y)}),he.graph().width=Q.graph().width,he.graph().height=Q.graph().height})(ye,ge)})})};var C=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},P=["acyclicer","ranker","rankdir","align"],L=["width","height"],z={width:0,height:0},H=["minlen","weight","width","height","labeloffset"],re={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ae=["labelpos"];function ue(ye,Y){return f.mapValues(f.pick(ye,Y),Number)}function xe(ye){var Y={};return f.forEach(ye,function(Ce,ge){Y[ge.toLowerCase()]=Ce}),Y}},function(R,b,o){var f=o(174);R.exports=function(c){return f(c,5)}},function(R,b,o){var f=o(111),c=o(70),M=o(112),_=o(64),x=Object.prototype,O=x.hasOwnProperty,S=f(function(g,h){g=Object(g);var y=-1,E=h.length,m=E>2?h[2]:void 0;for(m&&M(h[0],h[1],m)&&(E=1);++y<E;)for(var p=h[y],A=_(p),C=-1,N=A.length;++C<N;){var P=A[C],L=g[P];(L===void 0||c(L,x[P])&&!O.call(g,P))&&(g[P]=p[P])}return g});R.exports=S},function(R,b,o){var f=o(422)(o(423));R.exports=f},function(R,b,o){var f=o(53),c=o(52),M=o(57);R.exports=function(_){return function(x,O,S){var g=Object(x);if(!c(x)){var h=f(O,3);x=M(x),O=function(E){return h(g[E],E,g)}}var y=_(x,O,S);return y>-1?g[h?x[y]:y]:void 0}}},function(R,b,o){var f=o(214),c=o(53),M=o(424),_=Math.max;R.exports=function(x,O,S){var g=x==null?0:x.length;if(!g)return-1;var h=S==null?0:M(S);return h<0&&(h=_(g+h,0)),f(x,c(O,3),h)}},function(R,b,o){var f=o(222);R.exports=function(c){var M=f(c),_=M%1;return M==M?_?M-_:M:0}},function(R,b,o){var f=o(426),c=o(43),M=o(74),_=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,O=/^0o[0-7]+$/i,S=parseInt;R.exports=function(g){if(typeof g=="number")return g;if(M(g))return NaN;if(c(g)){var h=typeof g.valueOf=="function"?g.valueOf():g;g=c(h)?h+"":h}if(typeof g!="string")return g===0?g:+g;g=f(g);var y=x.test(g);return y||O.test(g)?S(g.slice(2),y?2:8):_.test(g)?NaN:+g}},function(R,b,o){var f=o(427),c=/^\s+/;R.exports=function(M){return M&&M.slice(0,f(M)+1).replace(c,"")}},function(R,b){var o=/\s/;R.exports=function(f){for(var c=f.length;c--&&o.test(f.charAt(c)););return c}},function(R,b,o){var f=o(155),c=o(195),M=o(64);R.exports=function(_,x){return _==null?_:f(_,c(x),M)}},function(R,b){R.exports=function(o){var f=o==null?0:o.length;return f?o[f-1]:void 0}},function(R,b,o){var f=o(102),c=o(154),M=o(53);R.exports=function(_,x){var O={};return x=M(x,3),c(_,function(S,g,h){f(O,g,x(S,g,h))}),O}},function(R,b,o){var f=o(159),c=o(432),M=o(65);R.exports=function(_){return _&&_.length?f(_,M,c):void 0}},function(R,b){R.exports=function(o,f){return o>f}},function(R,b,o){var f=o(434),c=o(438)(function(M,_,x){f(M,_,x)});R.exports=c},function(R,b,o){var f=o(96),c=o(224),M=o(155),_=o(435),x=o(43),O=o(64),S=o(225);R.exports=function g(h,y,E,m,p){h!==y&&M(y,function(A,C){if(p||(p=new f),x(A))_(h,y,C,E,g,m,p);else{var N=m?m(S(h,C),A,C+"",h,y,p):void 0;N===void 0&&(N=A),c(h,C,N)}},O)}},function(R,b,o){var f=o(224),c=o(181),M=o(190),_=o(182),x=o(191),O=o(86),S=o(31),g=o(215),h=o(72),y=o(84),E=o(43),m=o(436),p=o(88),A=o(225),C=o(437);R.exports=function(N,P,L,z,H,re,ae){var ue=A(N,L),xe=A(P,L),ye=ae.get(xe);if(ye)f(N,L,ye);else{var Y=re?re(ue,xe,L+"",N,P,ae):void 0,Ce=Y===void 0;if(Ce){var ge=S(xe),he=!ge&&h(xe),Q=!ge&&!he&&p(xe);Y=xe,ge||he||Q?S(ue)?Y=ue:g(ue)?Y=_(ue):he?(Ce=!1,Y=c(xe,!0)):Q?(Ce=!1,Y=M(xe,!0)):Y=[]:m(xe)||O(xe)?(Y=ue,O(ue)?Y=C(ue):E(ue)&&!y(ue)||(Y=x(xe))):Ce=!1}Ce&&(ae.set(xe,Y),H(Y,xe,z,re,ae),ae.delete(xe)),f(N,L,Y)}}},function(R,b,o){var f=o(63),c=o(106),M=o(49),_=Function.prototype,x=Object.prototype,O=_.toString,S=x.hasOwnProperty,g=O.call(Object);R.exports=function(h){if(!M(h)||f(h)!="[object Object]")return!1;var y=c(h);if(y===null)return!0;var E=S.call(y,"constructor")&&y.constructor;return typeof E=="function"&&E instanceof E&&O.call(E)==g}},function(R,b,o){var f=o(85),c=o(64);R.exports=function(M){return f(M,c(M))}},function(R,b,o){var f=o(111),c=o(112);R.exports=function(M){return f(function(_,x){var O=-1,S=x.length,g=S>1?x[S-1]:void 0,h=S>2?x[2]:void 0;for(g=M.length>3&&typeof g=="function"?(S--,g):void 0,h&&c(x[0],x[1],h)&&(g=S<3?void 0:g,S=1),_=Object(_);++O<S;){var y=x[O];y&&M(_,y,O,g)}return _})}},function(R,b,o){var f=o(159),c=o(226),M=o(65);R.exports=function(_){return _&&_.length?f(_,M,c):void 0}},function(R,b,o){var f=o(159),c=o(53),M=o(226);R.exports=function(_,x){return _&&_.length?f(_,c(x,2),M):void 0}},function(R,b,o){var f=o(47);R.exports=function(){return f.Date.now()}},function(R,b,o){var f=o(443),c=o(446)(function(M,_){return M==null?{}:f(M,_)});R.exports=c},function(R,b,o){var f=o(444),c=o(204);R.exports=function(M,_){return f(M,_,function(x,O){return c(M,O)})}},function(R,b,o){var f=o(108),c=o(445),M=o(109);R.exports=function(_,x,O){for(var S=-1,g=x.length,h={};++S<g;){var y=x[S],E=f(_,y);O(E,y)&&c(h,M(y,_),E)}return h}},function(R,b,o){var f=o(101),c=o(109),M=o(103),_=o(43),x=o(89);R.exports=function(O,S,g,h){if(!_(O))return O;for(var y=-1,E=(S=c(S,O)).length,m=E-1,p=O;p!=null&&++y<E;){var A=x(S[y]),C=g;if(A==="__proto__"||A==="constructor"||A==="prototype")return O;if(y!=m){var N=p[A];(C=h?h(N,A,p):void 0)===void 0&&(C=_(N)?N:M(S[y+1])?[]:{})}f(p,A,C),p=p[A]}return O}},function(R,b,o){var f=o(223),c=o(212),M=o(213);R.exports=function(_){return M(c(_,void 0,f),_+"")}},function(R,b,o){var f=o(448)();R.exports=f},function(R,b,o){var f=o(449),c=o(112),M=o(222);R.exports=function(_){return function(x,O,S){return S&&typeof S!="number"&&c(x,O,S)&&(O=S=void 0),x=M(x),O===void 0?(O=x,x=0):O=M(O),S=S===void 0?x<O?1:-1:M(S),f(x,O,S,_)}}},function(R,b){var o=Math.ceil,f=Math.max;R.exports=function(c,M,_,x){for(var O=-1,S=f(o((M-c)/(_||1)),0),g=Array(S);S--;)g[x?S:++O]=c,c+=_;return g}},function(R,b,o){var f=o(158),c=o(451),M=o(111),_=o(112),x=M(function(O,S){if(O==null)return[];var g=S.length;return g>1&&_(O,S[0],S[1])?S=[]:g>2&&_(S[0],S[1],S[2])&&(S=[S[0]]),c(O,f(S,1),[])});R.exports=x},function(R,b,o){var f=o(110),c=o(108),M=o(53),_=o(210),x=o(452),O=o(104),S=o(453),g=o(65),h=o(31);R.exports=function(y,E,m){E=E.length?f(E,function(C){return h(C)?function(N){return c(N,C.length===1?C[0]:C)}:C}):[g];var p=-1;E=f(E,O(M));var A=_(y,function(C,N,P){return{criteria:f(E,function(L){return L(C)}),index:++p,value:C}});return x(A,function(C,N){return S(C,N,m)})}},function(R,b){R.exports=function(o,f){var c=o.length;for(o.sort(f);c--;)o[c]=o[c].value;return o}},function(R,b,o){var f=o(454);R.exports=function(c,M,_){for(var x=-1,O=c.criteria,S=M.criteria,g=O.length,h=_.length;++x<g;){var y=f(O[x],S[x]);if(y)return x>=h?y:y*(_[x]=="desc"?-1:1)}return c.index-M.index}},function(R,b,o){var f=o(74);R.exports=function(c,M){if(c!==M){var _=c!==void 0,x=c===null,O=c==c,S=f(c),g=M!==void 0,h=M===null,y=M==M,E=f(M);if(!h&&!E&&!S&&c>M||S&&g&&y&&!h&&!E||x&&g&&y||!_&&y||!O)return 1;if(!x&&!S&&!E&&c<M||E&&_&&O&&!x&&!S||h&&_&&O||!g&&O||!y)return-1}return 0}},function(R,b,o){var f=o(203),c=0;R.exports=function(M){var _=++c;return f(M)+_}},function(R,b,o){var f=o(101),c=o(457);R.exports=function(M,_){return c(M||[],_||[],f)}},function(R,b){R.exports=function(o,f,c){for(var M=-1,_=o.length,x=f.length,O={};++M<_;){var S=M<x?f[M]:void 0;c(O,o[M],S)}return O}},function(R,b,o){"use strict";var f=o(28),c=o(459);R.exports={run:function(M){var _=M.graph().acyclicer==="greedy"?c(M,function(x){return function(O){return x.edge(O).weight}}(M)):function(x){var O=[],S={},g={};function h(y){f.has(g,y)||(g[y]=!0,S[y]=!0,f.forEach(x.outEdges(y),function(E){f.has(S,E.w)?O.push(E):h(E.w)}),delete S[y])}return f.forEach(x.nodes(),h),O}(M);f.forEach(_,function(x){var O=M.edge(x);M.removeEdge(x),O.forwardName=x.name,O.reversed=!0,M.setEdge(x.w,x.v,O,f.uniqueId("rev"))})},undo:function(M){f.forEach(M.edges(),function(_){var x=M.edge(_);if(x.reversed){M.removeEdge(_);var O=x.forwardName;delete x.reversed,delete x.forwardName,M.setEdge(_.w,_.v,x,O)}})}}},function(R,b,o){var f=o(28),c=o(46).Graph,M=o(460);R.exports=function(S,g){if(S.nodeCount()<=1)return[];var h=function(E,m){var p=new c,A=0,C=0;f.forEach(E.nodes(),function(L){p.setNode(L,{v:L,in:0,out:0})}),f.forEach(E.edges(),function(L){var z=p.edge(L.v,L.w)||0,H=m(L),re=z+H;p.setEdge(L.v,L.w,re),C=Math.max(C,p.node(L.v).out+=H),A=Math.max(A,p.node(L.w).in+=H)});var N=f.range(C+A+3).map(function(){return new M}),P=A+1;return f.forEach(p.nodes(),function(L){O(N,P,p.node(L))}),{graph:p,buckets:N,zeroIdx:P}}(S,g||_),y=function(E,m,p){for(var A,C=[],N=m[m.length-1],P=m[0];E.nodeCount();){for(;A=P.dequeue();)x(E,m,p,A);for(;A=N.dequeue();)x(E,m,p,A);if(E.nodeCount()){for(var L=m.length-2;L>0;--L)if(A=m[L].dequeue()){C=C.concat(x(E,m,p,A,!0));break}}}return C}(h.graph,h.buckets,h.zeroIdx);return f.flatten(f.map(y,function(E){return S.outEdges(E.v,E.w)}),!0)};var _=f.constant(1);function x(S,g,h,y,E){var m=E?[]:void 0;return f.forEach(S.inEdges(y.v),function(p){var A=S.edge(p),C=S.node(p.v);E&&m.push({v:p.v,w:p.w}),C.out-=A,O(g,h,C)}),f.forEach(S.outEdges(y.v),function(p){var A=S.edge(p),C=p.w,N=S.node(C);N.in-=A,O(g,h,N)}),S.removeNode(y.v),m}function O(S,g,h){h.out?h.in?S[h.out-h.in+g].enqueue(h):S[S.length-1].enqueue(h):S[0].enqueue(h)}},function(R,b){function o(){var M={};M._next=M._prev=M,this._sentinel=M}function f(M){M._prev._next=M._next,M._next._prev=M._prev,delete M._next,delete M._prev}function c(M,_){if(M!=="_next"&&M!=="_prev")return _}R.exports=o,o.prototype.dequeue=function(){var M=this._sentinel,_=M._prev;if(_!==M)return f(_),_},o.prototype.enqueue=function(M){var _=this._sentinel;M._prev&&M._next&&f(M),M._next=_._next,_._next._prev=M,_._next=M,M._prev=_},o.prototype.toString=function(){for(var M=[],_=this._sentinel,x=_._prev;x!==_;)M.push(JSON.stringify(x,c)),x=x._prev;return"["+M.join(", ")+"]"}},function(R,b,o){"use strict";var f=o(28),c=o(36);R.exports={run:function(M){M.graph().dummyChains=[],f.forEach(M.edges(),function(_){(function(x,O){var S,g,h,y=O.v,E=x.node(y).rank,m=O.w,p=x.node(m).rank,A=O.name,C=x.edge(O),N=C.labelRank;if(p!==E+1){for(x.removeEdge(O),h=0,++E;E<p;++h,++E)C.points=[],g={width:0,height:0,edgeLabel:C,edgeObj:O,rank:E},S=c.addDummyNode(x,"edge",g,"_d"),E===N&&(g.width=C.width,g.height=C.height,g.dummy="edge-label",g.labelpos=C.labelpos),x.setEdge(y,S,{weight:C.weight},A),h===0&&x.graph().dummyChains.push(S),y=S;x.setEdge(y,m,{weight:C.weight},A)}})(M,_)})},undo:function(M){f.forEach(M.graph().dummyChains,function(_){var x,O=M.node(_),S=O.edgeLabel;for(M.setEdge(O.edgeObj,S);O.dummy;)x=M.successors(_)[0],M.removeNode(_),S.points.push({x:O.x,y:O.y}),O.dummy==="edge-label"&&(S.x=O.x,S.y=O.y,S.width=O.width,S.height=O.height),_=x,O=M.node(_)})}}},function(R,b,o){"use strict";var f=o(113).longestPath,c=o(227),M=o(463);R.exports=function(O){switch(O.graph().ranker){case"network-simplex":x(O);break;case"tight-tree":(function(S){f(S),c(S)})(O);break;case"longest-path":_(O);break;default:x(O)}};var _=f;function x(O){M(O)}},function(R,b,o){"use strict";var f=o(28),c=o(227),M=o(113).slack,_=o(113).longestPath,x=o(46).alg.preorder,O=o(46).alg.postorder,S=o(36).simplify;function g(P){P=S(P),_(P);var L,z=c(P);for(E(z),h(z,P);L=p(z);)C(z,P,L,A(z,P,L))}function h(P,L){var z=O(P,P.nodes());z=z.slice(0,z.length-1),f.forEach(z,function(H){(function(re,ae,ue){var xe=re.node(ue).parent;re.edge(ue,xe).cutvalue=y(re,ae,ue)})(P,L,H)})}function y(P,L,z){var H=P.node(z).parent,re=!0,ae=L.edge(z,H),ue=0;return ae||(re=!1,ae=L.edge(H,z)),ue=ae.weight,f.forEach(L.nodeEdges(z),function(xe){var ye,Y,Ce=xe.v===z,ge=Ce?xe.w:xe.v;if(ge!==H){var he=Ce===re,Q=L.edge(xe).weight;if(ue+=he?Q:-Q,ye=z,Y=ge,P.hasEdge(ye,Y)){var W=P.edge(z,ge).cutvalue;ue+=he?-W:W}}}),ue}function E(P,L){arguments.length<2&&(L=P.nodes()[0]),m(P,{},1,L)}function m(P,L,z,H,re){var ae=z,ue=P.node(H);return L[H]=!0,f.forEach(P.neighbors(H),function(xe){f.has(L,xe)||(z=m(P,L,z,xe,H))}),ue.low=ae,ue.lim=z++,re?ue.parent=re:delete ue.parent,z}function p(P){return f.find(P.edges(),function(L){return P.edge(L).cutvalue<0})}function A(P,L,z){var H=z.v,re=z.w;L.hasEdge(H,re)||(H=z.w,re=z.v);var ae=P.node(H),ue=P.node(re),xe=ae,ye=!1;ae.lim>ue.lim&&(xe=ue,ye=!0);var Y=f.filter(L.edges(),function(Ce){return ye===N(P,P.node(Ce.v),xe)&&ye!==N(P,P.node(Ce.w),xe)});return f.minBy(Y,function(Ce){return M(L,Ce)})}function C(P,L,z,H){var re=z.v,ae=z.w;P.removeEdge(re,ae),P.setEdge(H.v,H.w,{}),E(P),h(P,L),function(ue,xe){var ye=f.find(ue.nodes(),function(Ce){return!xe.node(Ce).parent}),Y=x(ue,ye);Y=Y.slice(1),f.forEach(Y,function(Ce){var ge=ue.node(Ce).parent,he=xe.edge(Ce,ge),Q=!1;he||(he=xe.edge(ge,Ce),Q=!0),xe.node(Ce).rank=xe.node(ge).rank+(Q?he.minlen:-he.minlen)})}(P,L)}function N(P,L,z){return z.low<=L.lim&&L.lim<=z.lim}R.exports=g,g.initLowLimValues=E,g.initCutValues=h,g.calcCutValue=y,g.leaveEdge=p,g.enterEdge=A,g.exchangeEdges=C},function(R,b,o){var f=o(28);R.exports=function(c){var M=function(_){var x={},O=0;function S(g){var h=O;f.forEach(_.children(g),S),x[g]={low:h,lim:O++}}return f.forEach(_.children(),S),x}(c);f.forEach(c.graph().dummyChains,function(_){for(var x=c.node(_),O=x.edgeObj,S=function(p,A,C,N){var P,L,z=[],H=[],re=Math.min(A[C].low,A[N].low),ae=Math.max(A[C].lim,A[N].lim);P=C;do P=p.parent(P),z.push(P);while(P&&(A[P].low>re||ae>A[P].lim));for(L=P,P=N;(P=p.parent(P))!==L;)H.push(P);return{path:z.concat(H.reverse()),lca:L}}(c,M,O.v,O.w),g=S.path,h=S.lca,y=0,E=g[y],m=!0;_!==O.w;){if(x=c.node(_),m){for(;(E=g[y])!==h&&c.node(E).maxRank<x.rank;)y++;E===h&&(m=!1)}if(!m){for(;y<g.length-1&&c.node(E=g[y+1]).minRank<=x.rank;)y++;E=g[y]}c.setParent(_,E),_=c.successors(_)[0]}})}},function(R,b,o){var f=o(28),c=o(36);R.exports={run:function(M){var _=c.addDummyNode(M,"root",{},"_root"),x=function(h){var y={};return f.forEach(h.children(),function(E){(function m(p,A){var C=h.children(p);C&&C.length&&f.forEach(C,function(N){m(N,A+1)}),y[p]=A})(E,1)}),y}(M),O=f.max(f.values(x))-1,S=2*O+1;M.graph().nestingRoot=_,f.forEach(M.edges(),function(h){M.edge(h).minlen*=S});var g=function(h){return f.reduce(h.edges(),function(y,E){return y+h.edge(E).weight},0)}(M)+1;f.forEach(M.children(),function(h){(function y(E,m,p,A,C,N,P){var L=E.children(P);if(!L.length)return void(P!==m&&E.setEdge(m,P,{weight:0,minlen:p}));var z=c.addBorderNode(E,"_bt"),H=c.addBorderNode(E,"_bb"),re=E.node(P);E.setParent(z,P),re.borderTop=z,E.setParent(H,P),re.borderBottom=H,f.forEach(L,function(ae){y(E,m,p,A,C,N,ae);var ue=E.node(ae),xe=ue.borderTop?ue.borderTop:ae,ye=ue.borderBottom?ue.borderBottom:ae,Y=ue.borderTop?A:2*A,Ce=xe!==ye?1:C-N[P]+1;E.setEdge(z,xe,{weight:Y,minlen:Ce,nestingEdge:!0}),E.setEdge(ye,H,{weight:Y,minlen:Ce,nestingEdge:!0})}),E.parent(P)||E.setEdge(m,z,{weight:0,minlen:C+N[P]})})(M,_,S,g,O,x,h)}),M.graph().nodeRankFactor=S},cleanup:function(M){var _=M.graph();M.removeNode(_.nestingRoot),delete _.nestingRoot,f.forEach(M.edges(),function(x){M.edge(x).nestingEdge&&M.removeEdge(x)})}}},function(R,b,o){var f=o(28),c=o(36);function M(_,x,O,S,g,h){var y={width:0,height:0,rank:h,borderType:x},E=g[x][h-1],m=c.addDummyNode(_,"border",y,O);g[x][h]=m,_.setParent(m,S),E&&_.setEdge(E,m,{weight:1})}R.exports=function(_){f.forEach(_.children(),function x(O){var S=_.children(O),g=_.node(O);if(S.length&&f.forEach(S,x),f.has(g,"minRank")){g.borderLeft=[],g.borderRight=[];for(var h=g.minRank,y=g.maxRank+1;h<y;++h)M(_,"borderLeft","_bl",O,g,h),M(_,"borderRight","_br",O,g,h)}})}},function(R,b,o){"use strict";var f=o(28);function c(O){f.forEach(O.nodes(),function(S){M(O.node(S))}),f.forEach(O.edges(),function(S){M(O.edge(S))})}function M(O){var S=O.width;O.width=O.height,O.height=S}function _(O){O.y=-O.y}function x(O){var S=O.x;O.x=O.y,O.y=S}R.exports={adjust:function(O){var S=O.graph().rankdir.toLowerCase();S!=="lr"&&S!=="rl"||c(O)},undo:function(O){var S=O.graph().rankdir.toLowerCase();S!=="bt"&&S!=="rl"||function(g){f.forEach(g.nodes(),function(h){_(g.node(h))}),f.forEach(g.edges(),function(h){var y=g.edge(h);f.forEach(y.points,_),f.has(y,"y")&&_(y)})}(O),S!=="lr"&&S!=="rl"||(function(g){f.forEach(g.nodes(),function(h){x(g.node(h))}),f.forEach(g.edges(),function(h){var y=g.edge(h);f.forEach(y.points,x),f.has(y,"x")&&x(y)})}(O),c(O))}}},function(R,b,o){"use strict";var f=o(28),c=o(469),M=o(470),_=o(471),x=o(475),O=o(476),S=o(46).Graph,g=o(36);function h(m,p,A){return f.map(p,function(C){return x(m,C,A)})}function y(m,p){var A=new S;f.forEach(m,function(C){var N=C.graph().root,P=_(C,N,A,p);f.forEach(P.vs,function(L,z){C.node(L).order=z}),O(C,A,P.vs)})}function E(m,p){f.forEach(p,function(A){f.forEach(A,function(C,N){m.node(C).order=N})})}R.exports=function(m){var p=g.maxRank(m),A=h(m,f.range(1,p+1),"inEdges"),C=h(m,f.range(p-1,-1,-1),"outEdges"),N=c(m);E(m,N);for(var P,L=Number.POSITIVE_INFINITY,z=0,H=0;H<4;++z,++H){y(z%2?A:C,z%4>=2),N=g.buildLayerMatrix(m);var re=M(m,N);re<L&&(H=0,P=f.cloneDeep(N),L=re)}E(m,P)}},function(R,b,o){"use strict";var f=o(28);R.exports=function(c){var M={},_=f.filter(c.nodes(),function(g){return!c.children(g).length}),x=f.max(f.map(_,function(g){return c.node(g).rank})),O=f.map(f.range(x+1),function(){return[]}),S=f.sortBy(_,function(g){return c.node(g).rank});return f.forEach(S,function g(h){if(!f.has(M,h)){M[h]=!0;var y=c.node(h);O[y.rank].push(h),f.forEach(c.successors(h),g)}}),O}},function(R,b,o){"use strict";var f=o(28);function c(M,_,x){for(var O=f.zipObject(x,f.map(x,function(m,p){return p})),S=f.flatten(f.map(_,function(m){return f.sortBy(f.map(M.outEdges(m),function(p){return{pos:O[p.w],weight:M.edge(p).weight}}),"pos")}),!0),g=1;g<x.length;)g<<=1;var h=2*g-1;g-=1;var y=f.map(new Array(h),function(){return 0}),E=0;return f.forEach(S.forEach(function(m){var p=m.pos+g;y[p]+=m.weight;for(var A=0;p>0;)p%2&&(A+=y[p+1]),y[p=p-1>>1]+=m.weight;E+=m.weight*A})),E}R.exports=function(M,_){for(var x=0,O=1;O<_.length;++O)x+=c(M,_[O-1],_[O]);return x}},function(R,b,o){var f=o(28),c=o(472),M=o(473),_=o(474);R.exports=function x(O,S,g,h){var y=O.children(S),E=O.node(S),m=E?E.borderLeft:void 0,p=E?E.borderRight:void 0,A={};m&&(y=f.filter(y,function(H){return H!==m&&H!==p}));var C=c(O,y);f.forEach(C,function(H){if(O.children(H.v).length){var re=x(O,H.v,g,h);A[H.v]=re,f.has(re,"barycenter")&&(ae=H,ue=re,f.isUndefined(ae.barycenter)?(ae.barycenter=ue.barycenter,ae.weight=ue.weight):(ae.barycenter=(ae.barycenter*ae.weight+ue.barycenter*ue.weight)/(ae.weight+ue.weight),ae.weight+=ue.weight))}var ae,ue});var N=M(C,g);(function(H,re){f.forEach(H,function(ae){ae.vs=f.flatten(ae.vs.map(function(ue){return re[ue]?re[ue].vs:ue}),!0)})})(N,A);var P=_(N,h);if(m&&(P.vs=f.flatten([m,P.vs,p],!0),O.predecessors(m).length)){var L=O.node(O.predecessors(m)[0]),z=O.node(O.predecessors(p)[0]);f.has(P,"barycenter")||(P.barycenter=0,P.weight=0),P.barycenter=(P.barycenter*P.weight+L.order+z.order)/(P.weight+2),P.weight+=2}return P}},function(R,b,o){var f=o(28);R.exports=function(c,M){return f.map(M,function(_){var x=c.inEdges(_);if(x.length){var O=f.reduce(x,function(S,g){var h=c.edge(g),y=c.node(g.v);return{sum:S.sum+h.weight*y.order,weight:S.weight+h.weight}},{sum:0,weight:0});return{v:_,barycenter:O.sum/O.weight,weight:O.weight}}return{v:_}})}},function(R,b,o){"use strict";var f=o(28);R.exports=function(c,M){var _={};return f.forEach(c,function(x,O){var S=_[x.v]={indegree:0,in:[],out:[],vs:[x.v],i:O};f.isUndefined(x.barycenter)||(S.barycenter=x.barycenter,S.weight=x.weight)}),f.forEach(M.edges(),function(x){var O=_[x.v],S=_[x.w];f.isUndefined(O)||f.isUndefined(S)||(S.indegree++,O.out.push(_[x.w]))}),function(x){var O=[];function S(y){return function(E){E.merged||(f.isUndefined(E.barycenter)||f.isUndefined(y.barycenter)||E.barycenter>=y.barycenter)&&function(m,p){var A=0,C=0;m.weight&&(A+=m.barycenter*m.weight,C+=m.weight),p.weight&&(A+=p.barycenter*p.weight,C+=p.weight),m.vs=p.vs.concat(m.vs),m.barycenter=A/C,m.weight=C,m.i=Math.min(p.i,m.i),p.merged=!0}(y,E)}}function g(y){return function(E){E.in.push(y),--E.indegree==0&&x.push(E)}}for(;x.length;){var h=x.pop();O.push(h),f.forEach(h.in.reverse(),S(h)),f.forEach(h.out,g(h))}return f.map(f.filter(O,function(y){return!y.merged}),function(y){return f.pick(y,["vs","i","barycenter","weight"])})}(f.filter(_,function(x){return!x.indegree}))}},function(R,b,o){var f=o(28),c=o(36);function M(_,x,O){for(var S;x.length&&(S=f.last(x)).i<=O;)x.pop(),_.push(S.vs),O++;return O}R.exports=function(_,x){var O=c.partition(_,function(C){return f.has(C,"barycenter")}),S=O.lhs,g=f.sortBy(O.rhs,function(C){return-C.i}),h=[],y=0,E=0,m=0;S.sort((p=!!x,function(C,N){return C.barycenter<N.barycenter?-1:C.barycenter>N.barycenter?1:p?N.i-C.i:C.i-N.i})),m=M(h,g,m),f.forEach(S,function(C){m+=C.vs.length,h.push(C.vs),y+=C.barycenter*C.weight,E+=C.weight,m=M(h,g,m)});var p,A={vs:f.flatten(h,!0)};return E&&(A.barycenter=y/E,A.weight=E),A}},function(R,b,o){var f=o(28),c=o(46).Graph;R.exports=function(M,_,x){var O=function(g){for(var h;g.hasNode(h=f.uniqueId("_root")););return h}(M),S=new c({compound:!0}).setGraph({root:O}).setDefaultNodeLabel(function(g){return M.node(g)});return f.forEach(M.nodes(),function(g){var h=M.node(g),y=M.parent(g);(h.rank===_||h.minRank<=_&&_<=h.maxRank)&&(S.setNode(g),S.setParent(g,y||O),f.forEach(M[x](g),function(E){var m=E.v===g?E.w:E.v,p=S.edge(m,g),A=f.isUndefined(p)?0:p.weight;S.setEdge(m,g,{weight:M.edge(E).weight+A})}),f.has(h,"minRank")&&S.setNode(g,{borderLeft:h.borderLeft[_],borderRight:h.borderRight[_]}))}),S}},function(R,b,o){var f=o(28);R.exports=function(c,M,_){var x,O={};f.forEach(_,function(S){for(var g,h,y=c.parent(S);y;){if((g=c.parent(y))?(h=O[g],O[g]=y):(h=x,x=y),h&&h!==y)return void M.setEdge(h,y);y=g}})}},function(R,b,o){"use strict";var f=o(28),c=o(36),M=o(478).positionX;R.exports=function(_){(function(x){var O=c.buildLayerMatrix(x),S=x.graph().ranksep,g=0;f.forEach(O,function(h){var y=f.max(f.map(h,function(E){return x.node(E).height}));f.forEach(h,function(E){x.node(E).y=g+y/2}),g+=y+S})})(_=c.asNonCompoundGraph(_)),f.forEach(M(_),function(x,O){_.node(O).x=x})}},function(R,b,o){"use strict";var f=o(28),c=o(46).Graph,M=o(36);function _(p,A){var C={};return f.reduce(A,function(N,P){var L=0,z=0,H=N.length,re=f.last(P);return f.forEach(P,function(ae,ue){var xe=function(Y,Ce){if(Y.node(Ce).dummy)return f.find(Y.predecessors(Ce),function(ge){return Y.node(ge).dummy})}(p,ae),ye=xe?p.node(xe).order:H;(xe||ae===re)&&(f.forEach(P.slice(z,ue+1),function(Y){f.forEach(p.predecessors(Y),function(Ce){var ge=p.node(Ce),he=ge.order;!(he<L||ye<he)||ge.dummy&&p.node(Y).dummy||O(C,Ce,Y)})}),z=ue+1,L=ye)}),P}),C}function x(p,A){var C={};function N(P,L,z,H,re){var ae;f.forEach(f.range(L,z),function(ue){ae=P[ue],p.node(ae).dummy&&f.forEach(p.predecessors(ae),function(xe){var ye=p.node(xe);ye.dummy&&(ye.order<H||ye.order>re)&&O(C,xe,ae)})})}return f.reduce(A,function(P,L){var z,H=-1,re=0;return f.forEach(L,function(ae,ue){if(p.node(ae).dummy==="border"){var xe=p.predecessors(ae);xe.length&&(z=p.node(xe[0]).order,N(L,re,ue,H,z),re=ue,H=z)}N(L,re,L.length,z,P.length)}),L}),C}function O(p,A,C){if(A>C){var N=A;A=C,C=N}var P=p[A];P||(p[A]=P={}),P[C]=!0}function S(p,A,C){if(A>C){var N=A;A=C,C=N}return f.has(p[A],C)}function g(p,A,C,N){var P={},L={},z={};return f.forEach(A,function(H){f.forEach(H,function(re,ae){P[re]=re,L[re]=re,z[re]=ae})}),f.forEach(A,function(H){var re=-1;f.forEach(H,function(ae){var ue=N(ae);if(ue.length)for(var xe=((ue=f.sortBy(ue,function(ge){return z[ge]})).length-1)/2,ye=Math.floor(xe),Y=Math.ceil(xe);ye<=Y;++ye){var Ce=ue[ye];L[ae]===ae&&re<z[Ce]&&!S(C,ae,Ce)&&(L[Ce]=ae,L[ae]=P[ae]=P[Ce],re=z[Ce])}})}),{root:P,align:L}}function h(p,A,C,N,P){var L={},z=function(ae,ue,xe,ye){var Y=new c,Ce=ae.graph(),ge=function(he,Q,W){return function(le,Oe,Te){var se,ee=le.node(Oe),te=le.node(Te),U=0;if(U+=ee.width/2,f.has(ee,"labelpos"))switch(ee.labelpos.toLowerCase()){case"l":se=-ee.width/2;break;case"r":se=ee.width/2}if(se&&(U+=W?se:-se),se=0,U+=(ee.dummy?Q:he)/2,U+=(te.dummy?Q:he)/2,U+=te.width/2,f.has(te,"labelpos"))switch(te.labelpos.toLowerCase()){case"l":se=te.width/2;break;case"r":se=-te.width/2}return se&&(U+=W?se:-se),se=0,U}}(Ce.nodesep,Ce.edgesep,ye);return f.forEach(ue,function(he){var Q;f.forEach(he,function(W){var le=xe[W];if(Y.setNode(le),Q){var Oe=xe[Q],Te=Y.edge(Oe,le);Y.setEdge(Oe,le,Math.max(ge(ae,W,Q),Te||0))}Q=W})}),Y}(p,A,C,P),H=P?"borderLeft":"borderRight";function re(ae,ue){for(var xe=z.nodes(),ye=xe.pop(),Y={};ye;)Y[ye]?ae(ye):(Y[ye]=!0,xe.push(ye),xe=xe.concat(ue(ye))),ye=xe.pop()}return re(function(ae){L[ae]=z.inEdges(ae).reduce(function(ue,xe){return Math.max(ue,L[xe.v]+z.edge(xe))},0)},z.predecessors.bind(z)),re(function(ae){var ue=z.outEdges(ae).reduce(function(ye,Y){return Math.min(ye,L[Y.w]-z.edge(Y))},Number.POSITIVE_INFINITY),xe=p.node(ae);ue!==Number.POSITIVE_INFINITY&&xe.borderType!==H&&(L[ae]=Math.max(L[ae],ue))},z.successors.bind(z)),f.forEach(N,function(ae){L[ae]=L[C[ae]]}),L}function y(p,A){return f.minBy(f.values(A),function(C){var N=Number.NEGATIVE_INFINITY,P=Number.POSITIVE_INFINITY;return f.forIn(C,function(L,z){var H=function(re,ae){return re.node(ae).width}(p,z)/2;N=Math.max(L+H,N),P=Math.min(L-H,P)}),N-P})}function E(p,A){var C=f.values(A),N=f.min(C),P=f.max(C);f.forEach(["u","d"],function(L){f.forEach(["l","r"],function(z){var H,re=L+z,ae=p[re];if(ae!==A){var ue=f.values(ae);(H=z==="l"?N-f.min(ue):P-f.max(ue))&&(p[re]=f.mapValues(ae,function(xe){return xe+H}))}})})}function m(p,A){return f.mapValues(p.ul,function(C,N){if(A)return p[A.toLowerCase()][N];var P=f.sortBy(f.map(p,N));return(P[1]+P[2])/2})}R.exports={positionX:function(p){var A,C=M.buildLayerMatrix(p),N=f.merge(_(p,C),x(p,C)),P={};f.forEach(["u","d"],function(z){A=z==="u"?C:f.values(C).reverse(),f.forEach(["l","r"],function(H){H==="r"&&(A=f.map(A,function(xe){return f.values(xe).reverse()}));var re=(z==="u"?p.predecessors:p.successors).bind(p),ae=g(p,A,N,re),ue=h(p,A,ae.root,ae.align,H==="r");H==="r"&&(ue=f.mapValues(ue,function(xe){return-xe})),P[z+H]=ue})});var L=y(p,P);return E(P,L),m(P,p.graph().align)},findType1Conflicts:_,findType2Conflicts:x,addConflict:O,hasConflict:S,verticalAlignment:g,horizontalCompaction:h,alignCoordinates:E,findSmallestWidthAlignment:y,balance:m}},function(R,b,o){var f=o(28),c=o(36),M=o(46).Graph;R.exports={debugOrdering:function(_){var x=c.buildLayerMatrix(_),O=new M({compound:!0,multigraph:!0}).setGraph({});return f.forEach(_.nodes(),function(S){O.setNode(S,{label:S}),O.setParent(S,"layer"+_.node(S).rank)}),f.forEach(_.edges(),function(S){O.setEdge(S.v,S.w,{},S.name)}),f.forEach(x,function(S,g){var h="layer"+g;O.setNode(h,{rank:"same"}),f.reduce(S,function(y,E){return O.setEdge(y,E,{style:"invis"}),E})}),O}}},function(R,b){R.exports="0.8.5"},function(R,b,o){(function(f){function c(_){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}var M=function(_){"use strict";var x=Object.prototype,O=x.hasOwnProperty,S=typeof Symbol=="function"?Symbol:{},g=S.iterator||"@@iterator",h=S.asyncIterator||"@@asyncIterator",y=S.toStringTag||"@@toStringTag";function E(Q,W,le){return Object.defineProperty(Q,W,{value:le,enumerable:!0,configurable:!0,writable:!0}),Q[W]}try{E({},"")}catch(Q){E=function(W,le,Oe){return W[le]=Oe}}function m(Q,W,le,Oe){var Te=W&&W.prototype instanceof C?W:C,se=Object.create(Te.prototype),ee=new Ce(Oe||[]);return se._invoke=function(te,U,X){var B="suspendedStart";return function(J,ne){if(B==="executing")throw new Error("Generator is already running");if(B==="completed"){if(J==="throw")throw ne;return he()}for(X.method=J,X.arg=ne;;){var ie=X.delegate;if(ie){var Z=xe(ie,X);if(Z){if(Z===A)continue;return Z}}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(B==="suspendedStart")throw B="completed",X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);B="executing";var fe=p(te,U,X);if(fe.type==="normal"){if(B=X.done?"completed":"suspendedYield",fe.arg===A)continue;return{value:fe.arg,done:X.done}}fe.type==="throw"&&(B="completed",X.method="throw",X.arg=fe.arg)}}}(Q,le,ee),se}function p(Q,W,le){try{return{type:"normal",arg:Q.call(W,le)}}catch(Oe){return{type:"throw",arg:Oe}}}_.wrap=m;var A={};function C(){}function N(){}function P(){}var L={};E(L,g,function(){return this});var z=Object.getPrototypeOf,H=z&&z(z(ge([])));H&&H!==x&&O.call(H,g)&&(L=H);var re=P.prototype=C.prototype=Object.create(L);function ae(Q){["next","throw","return"].forEach(function(W){E(Q,W,function(le){return this._invoke(W,le)})})}function ue(Q,W){var le;this._invoke=function(Oe,Te){function se(){return new W(function(ee,te){(function U(X,B,J,ne){var ie=p(Q[X],Q,B);if(ie.type!=="throw"){var Z=ie.arg,fe=Z.value;return fe&&c(fe)==="object"&&O.call(fe,"__await")?W.resolve(fe.__await).then(function(_e){U("next",_e,J,ne)},function(_e){U("throw",_e,J,ne)}):W.resolve(fe).then(function(_e){Z.value=_e,J(Z)},function(_e){return U("throw",_e,J,ne)})}ne(ie.arg)})(Oe,Te,ee,te)})}return le=le?le.then(se,se):se()}}function xe(Q,W){var le=Q.iterator[W.method];if(le===void 0){if(W.delegate=null,W.method==="throw"){if(Q.iterator.return&&(W.method="return",W.arg=void 0,xe(Q,W),W.method==="throw"))return A;W.method="throw",W.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var Oe=p(le,Q.iterator,W.arg);if(Oe.type==="throw")return W.method="throw",W.arg=Oe.arg,W.delegate=null,A;var Te=Oe.arg;return Te?Te.done?(W[Q.resultName]=Te.value,W.next=Q.nextLoc,W.method!=="return"&&(W.method="next",W.arg=void 0),W.delegate=null,A):Te:(W.method="throw",W.arg=new TypeError("iterator result is not an object"),W.delegate=null,A)}function ye(Q){var W={tryLoc:Q[0]};1 in Q&&(W.catchLoc=Q[1]),2 in Q&&(W.finallyLoc=Q[2],W.afterLoc=Q[3]),this.tryEntries.push(W)}function Y(Q){var W=Q.completion||{};W.type="normal",delete W.arg,Q.completion=W}function Ce(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(ye,this),this.reset(!0)}function ge(Q){if(Q){var W=Q[g];if(W)return W.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length)){var le=-1,Oe=function Te(){for(;++le<Q.length;)if(O.call(Q,le))return Te.value=Q[le],Te.done=!1,Te;return Te.value=void 0,Te.done=!0,Te};return Oe.next=Oe}}return{next:he}}function he(){return{value:void 0,done:!0}}return N.prototype=P,E(re,"constructor",P),E(P,"constructor",N),N.displayName=E(P,y,"GeneratorFunction"),_.isGeneratorFunction=function(Q){var W=typeof Q=="function"&&Q.constructor;return!!W&&(W===N||(W.displayName||W.name)==="GeneratorFunction")},_.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,P):(Q.__proto__=P,E(Q,y,"GeneratorFunction")),Q.prototype=Object.create(re),Q},_.awrap=function(Q){return{__await:Q}},ae(ue.prototype),E(ue.prototype,h,function(){return this}),_.AsyncIterator=ue,_.async=function(Q,W,le,Oe,Te){Te===void 0&&(Te=Promise);var se=new ue(m(Q,W,le,Oe),Te);return _.isGeneratorFunction(W)?se:se.next().then(function(ee){return ee.done?ee.value:se.next()})},ae(re),E(re,y,"Generator"),E(re,g,function(){return this}),E(re,"toString",function(){return"[object Generator]"}),_.keys=function(Q){var W=[];for(var le in Q)W.push(le);return W.reverse(),function Oe(){for(;W.length;){var Te=W.pop();if(Te in Q)return Oe.value=Te,Oe.done=!1,Oe}return Oe.done=!0,Oe}},_.values=ge,Ce.prototype={constructor:Ce,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Y),!Q)for(var W in this)W.charAt(0)==="t"&&O.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=void 0)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var W=this;function le(U,X){return se.type="throw",se.arg=Q,W.next=U,X&&(W.method="next",W.arg=void 0),!!X}for(var Oe=this.tryEntries.length-1;Oe>=0;--Oe){var Te=this.tryEntries[Oe],se=Te.completion;if(Te.tryLoc==="root")return le("end");if(Te.tryLoc<=this.prev){var ee=O.call(Te,"catchLoc"),te=O.call(Te,"finallyLoc");if(ee&&te){if(this.prev<Te.catchLoc)return le(Te.catchLoc,!0);if(this.prev<Te.finallyLoc)return le(Te.finallyLoc)}else if(ee){if(this.prev<Te.catchLoc)return le(Te.catchLoc,!0)}else{if(!te)throw new Error("try statement without catch or finally");if(this.prev<Te.finallyLoc)return le(Te.finallyLoc)}}}},abrupt:function(Q,W){for(var le=this.tryEntries.length-1;le>=0;--le){var Oe=this.tryEntries[le];if(Oe.tryLoc<=this.prev&&O.call(Oe,"finallyLoc")&&this.prev<Oe.finallyLoc){var Te=Oe;break}}Te&&(Q==="break"||Q==="continue")&&Te.tryLoc<=W&&W<=Te.finallyLoc&&(Te=null);var se=Te?Te.completion:{};return se.type=Q,se.arg=W,Te?(this.method="next",this.next=Te.finallyLoc,A):this.complete(se)},complete:function(Q,W){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&W&&(this.next=W),A},finish:function(Q){for(var W=this.tryEntries.length-1;W>=0;--W){var le=this.tryEntries[W];if(le.finallyLoc===Q)return this.complete(le.completion,le.afterLoc),Y(le),A}},catch:function(Q){for(var W=this.tryEntries.length-1;W>=0;--W){var le=this.tryEntries[W];if(le.tryLoc===Q){var Oe=le.completion;if(Oe.type==="throw"){var Te=Oe.arg;Y(le)}return Te}}throw new Error("illegal catch attempt")},delegateYield:function(Q,W,le){return this.delegate={iterator:ge(Q),resultName:W,nextLoc:le},this.method==="next"&&(this.arg=void 0),A}},_}(c(f)==="object"?f.exports:{});try{regeneratorRuntime=M}catch(_){(typeof globalThis=="undefined"?"undefined":c(globalThis))==="object"?globalThis.regeneratorRuntime=M:Function("r","regeneratorRuntime = r")(M)}}).call(this,o(87)(R))},function(R,b){R.exports=function(o){if(Array.isArray(o))return o},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b){R.exports=function(o,f){var c=o==null?null:typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(c!=null){var M,_,x=[],O=!0,S=!1;try{for(c=c.call(o);!(O=(M=c.next()).done)&&(x.push(M.value),!f||x.length!==f);O=!0);}catch(g){S=!0,_=g}finally{try{O||c.return==null||c.return()}finally{if(S)throw _}}return x}},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b){R.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";function f(L){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(L)}var c=this&&this.__awaiter||function(L,z,H,re){return new(H||(H=Promise))(function(ae,ue){function xe(Ce){try{Y(re.next(Ce))}catch(ge){ue(ge)}}function ye(Ce){try{Y(re.throw(Ce))}catch(ge){ue(ge)}}function Y(Ce){var ge;Ce.done?ae(Ce.value):(ge=Ce.value,ge instanceof H?ge:new H(function(he){he(ge)})).then(xe,ye)}Y((re=re.apply(L,z||[])).next())})},M=this&&this.__generator||function(L,z){var H,re,ae,ue,xe={label:0,sent:function(){if(1&ae[0])throw ae[1];return ae[1]},trys:[],ops:[]};return ue={next:ye(0),throw:ye(1),return:ye(2)},typeof Symbol=="function"&&(ue[Symbol.iterator]=function(){return this}),ue;function ye(Y){return function(Ce){return function(ge){if(H)throw new TypeError("Generator is already executing.");for(;xe;)try{if(H=1,re&&(ae=2&ge[0]?re.return:ge[0]?re.throw||((ae=re.return)&&ae.call(re),0):re.next)&&!(ae=ae.call(re,ge[1])).done)return ae;switch(re=0,ae&&(ge=[2&ge[0],ae.value]),ge[0]){case 0:case 1:ae=ge;break;case 4:return xe.label++,{value:ge[1],done:!1};case 5:xe.label++,re=ge[1],ge=[0];continue;case 7:ge=xe.ops.pop(),xe.trys.pop();continue;default:if(ae=xe.trys,!((ae=ae.length>0&&ae[ae.length-1])||ge[0]!==6&&ge[0]!==2)){xe=0;continue}if(ge[0]===3&&(!ae||ge[1]>ae[0]&&ge[1]<ae[3])){xe.label=ge[1];break}if(ge[0]===6&&xe.label<ae[1]){xe.label=ae[1],ae=ge;break}if(ae&&xe.label<ae[2]){xe.label=ae[2],xe.ops.push(ge);break}ae[2]&&xe.ops.pop(),xe.trys.pop();continue}ge=z.call(L,xe)}catch(he){ge=[6,he],re=0}finally{H=ae=0}if(5&ge[0])throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}([Y,Ce])}}},_=this&&this.__spreadArray||function(L,z){for(var H=0,re=z.length,ae=L.length;H<re;H++,ae++)L[ae]=z[H];return L};Object.defineProperty(b,"__esModule",{value:!0}),b.Container=void 0;var x=o(486),O=o(40),S=o(54),g=o(32),h=o(231),y=o(487),E=o(494),m=o(496),p=o(66),A=o(90),C=o(499),N=o(500),P=function(){function L(z){this._appliedMiddleware=[];var H=z||{};if(f(H)!=="object")throw new Error(""+O.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(H.defaultScope===void 0)H.defaultScope=S.BindingScopeEnum.Transient;else if(H.defaultScope!==S.BindingScopeEnum.Singleton&&H.defaultScope!==S.BindingScopeEnum.Transient&&H.defaultScope!==S.BindingScopeEnum.Request)throw new Error(""+O.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(H.autoBindInjectable===void 0)H.autoBindInjectable=!1;else if(typeof H.autoBindInjectable!="boolean")throw new Error(""+O.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(H.skipBaseClassChecks===void 0)H.skipBaseClassChecks=!1;else if(typeof H.skipBaseClassChecks!="boolean")throw new Error(""+O.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:H.autoBindInjectable,defaultScope:H.defaultScope,skipBaseClassChecks:H.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new N.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new h.MetadataReader}return L.merge=function(z,H){for(var re=[],ae=2;ae<arguments.length;ae++)re[ae-2]=arguments[ae];var ue=new L,xe=_([z,H],re).map(function(Ce){return y.getBindingDictionary(Ce)}),ye=y.getBindingDictionary(ue);function Y(Ce,ge){Ce.traverse(function(he,Q){Q.forEach(function(W){ge.add(W.serviceIdentifier,W.clone())})})}return xe.forEach(function(Ce){Y(Ce,ye)}),ue},L.prototype.load=function(){for(var z=[],H=0;H<arguments.length;H++)z[H]=arguments[H];for(var re=this._getContainerModuleHelpersFactory(),ae=0,ue=z;ae<ue.length;ae++){var xe=ue[ae],ye=re(xe.id);xe.registry(ye.bindFunction,ye.unbindFunction,ye.isboundFunction,ye.rebindFunction)}},L.prototype.loadAsync=function(){for(var z=[],H=0;H<arguments.length;H++)z[H]=arguments[H];return c(this,void 0,void 0,function(){var re,ae,ue,xe,ye;return M(this,function(Y){switch(Y.label){case 0:re=this._getContainerModuleHelpersFactory(),ae=0,ue=z,Y.label=1;case 1:return ae<ue.length?(xe=ue[ae],ye=re(xe.id),[4,xe.registry(ye.bindFunction,ye.unbindFunction,ye.isboundFunction,ye.rebindFunction)]):[3,4];case 2:Y.sent(),Y.label=3;case 3:return ae++,[3,1];case 4:return[2]}})})},L.prototype.unload=function(){for(var z=this,H=[],re=0;re<arguments.length;re++)H[re]=arguments[re];var ae=function(ue){return function(xe){return xe.moduleId===ue}};H.forEach(function(ue){var xe=ae(ue.id);z._bindingDictionary.removeByCondition(xe)})},L.prototype.bind=function(z){var H=this.options.defaultScope||S.BindingScopeEnum.Transient,re=new x.Binding(z,H);return this._bindingDictionary.add(z,re),new m.BindingToSyntax(re)},L.prototype.rebind=function(z){return this.unbind(z),this.bind(z)},L.prototype.unbind=function(z){try{this._bindingDictionary.remove(z)}catch(H){throw new Error(O.CANNOT_UNBIND+" "+A.getServiceIdentifierAsString(z))}},L.prototype.unbindAll=function(){this._bindingDictionary=new N.Lookup},L.prototype.isBound=function(z){var H=this._bindingDictionary.hasKey(z);return!H&&this.parent&&(H=this.parent.isBound(z)),H},L.prototype.isBoundNamed=function(z,H){return this.isBoundTagged(z,g.NAMED_TAG,H)},L.prototype.isBoundTagged=function(z,H,re){var ae=!1;if(this._bindingDictionary.hasKey(z)){var ue=this._bindingDictionary.get(z),xe=y.createMockRequest(this,z,H,re);ae=ue.some(function(ye){return ye.constraint(xe)})}return!ae&&this.parent&&(ae=this.parent.isBoundTagged(z,H,re)),ae},L.prototype.snapshot=function(){this._snapshots.push(C.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},L.prototype.restore=function(){var z=this._snapshots.pop();if(z===void 0)throw new Error(O.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=z.bindings,this._middleware=z.middleware},L.prototype.createChild=function(z){var H=new L(z||this.options);return H.parent=this,H},L.prototype.applyMiddleware=function(){for(var z=[],H=0;H<arguments.length;H++)z[H]=arguments[H];this._appliedMiddleware=this._appliedMiddleware.concat(z);var re=this._middleware?this._middleware:this._planAndResolve();this._middleware=z.reduce(function(ae,ue){return ue(ae)},re)},L.prototype.applyCustomMetadataReader=function(z){this._metadataReader=z},L.prototype.get=function(z){return this._get(!1,!1,S.TargetTypeEnum.Variable,z)},L.prototype.getTagged=function(z,H,re){return this._get(!1,!1,S.TargetTypeEnum.Variable,z,H,re)},L.prototype.getNamed=function(z,H){return this.getTagged(z,g.NAMED_TAG,H)},L.prototype.getAll=function(z){return this._get(!0,!0,S.TargetTypeEnum.Variable,z)},L.prototype.getAllTagged=function(z,H,re){return this._get(!1,!0,S.TargetTypeEnum.Variable,z,H,re)},L.prototype.getAllNamed=function(z,H){return this.getAllTagged(z,g.NAMED_TAG,H)},L.prototype.resolve=function(z){var H=this.createChild();return H.bind(z).toSelf(),this._appliedMiddleware.forEach(function(re){H.applyMiddleware(re)}),H.get(z)},L.prototype._getContainerModuleHelpersFactory=function(){var z=this,H=function(ae,ue){ae._binding.moduleId=ue},re=function(ae){return function(ue){var xe=z.rebind.bind(z)(ue);return H(xe,ae),xe}};return function(ae){return{bindFunction:(ue=ae,function(xe){var ye=z.bind.bind(z)(xe);return H(ye,ue),ye}),isboundFunction:function(xe){return z.isBound.bind(z)(xe)},rebindFunction:re(ae),unbindFunction:function(xe){z.unbind.bind(z)(xe)}};var ue}},L.prototype._get=function(z,H,re,ae,ue,xe){var ye=null,Y={avoidConstraints:z,contextInterceptor:function(Ce){return Ce},isMultiInject:H,key:ue,serviceIdentifier:ae,targetType:re,value:xe};if(this._middleware){if((ye=this._middleware(Y))==null)throw new Error(O.INVALID_MIDDLEWARE_RETURN)}else ye=this._planAndResolve()(Y);return ye},L.prototype._planAndResolve=function(){var z=this;return function(H){var re=y.plan(z._metadataReader,z,H.isMultiInject,H.targetType,H.serviceIdentifier,H.key,H.value,H.avoidConstraints);return re=H.contextInterceptor(re),E.resolve(re)}},L}();b.Container=P},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Binding=void 0;var f=o(54),c=o(66),M=function(){function _(x,O){this.id=c.id(),this.activated=!1,this.serviceIdentifier=x,this.scope=O,this.type=f.BindingTypeEnum.Invalid,this.constraint=function(S){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return _.prototype.clone=function(){var x=new _(this.serviceIdentifier,this.scope);return x.activated=x.scope===f.BindingScopeEnum.Singleton&&this.activated,x.implementationType=this.implementationType,x.dynamicValue=this.dynamicValue,x.scope=this.scope,x.type=this.type,x.factory=this.factory,x.provider=this.provider,x.constraint=this.constraint,x.onActivation=this.onActivation,x.cache=this.cache,x},_}();b.Binding=M},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.getBindingDictionary=b.createMockRequest=b.plan=void 0;var f=o(488),c=o(40),M=o(54),_=o(32),x=o(232),O=o(90),S=o(489),g=o(48),h=o(490),y=o(491),E=o(493),m=o(234);function p(N){return N._bindingDictionary}function A(N,P,L,z,H){var re=C(L.container,H.serviceIdentifier),ae=[];return re.length===f.BindingCount.NoBindingsAvailable&&L.container.options.autoBindInjectable&&typeof H.serviceIdentifier=="function"&&N.getConstructorMetadata(H.serviceIdentifier).compilerGeneratedMetadata&&(L.container.bind(H.serviceIdentifier).toSelf(),re=C(L.container,H.serviceIdentifier)),ae=P?re:re.filter(function(ue){var xe=new E.Request(ue.serviceIdentifier,L,z,ue,H);return ue.constraint(xe)}),function(ue,xe,ye,Y){switch(xe.length){case f.BindingCount.NoBindingsAvailable:if(ye.isOptional())return xe;var Ce=O.getServiceIdentifierAsString(ue),ge=c.NOT_REGISTERED;throw ge+=O.listMetadataForTarget(Ce,ye),ge+=O.listRegisteredBindingsForServiceIdentifier(Y,Ce,C),new Error(ge);case f.BindingCount.OnlyOneBindingAvailable:if(!ye.isArray())return xe;case f.BindingCount.MultipleBindingsAvailable:default:if(ye.isArray())return xe;throw Ce=O.getServiceIdentifierAsString(ue),ge=c.AMBIGUOUS_MATCH+" "+Ce,ge+=O.listRegisteredBindingsForServiceIdentifier(Y,Ce,C),new Error(ge)}}(H.serviceIdentifier,ae,H,L.container),ae}function C(N,P){var L=[],z=p(N);return z.hasKey(P)?L=z.get(P):N.parent!==null&&(L=C(N.parent,P)),L}b.getBindingDictionary=p,b.plan=function(N,P,L,z,H,re,ae,ue){ue===void 0&&(ue=!1);var xe=new S.Context(P),ye=function(Y,Ce,ge,he,Q,W){var le=Y?_.MULTI_INJECT_TAG:_.INJECT_TAG,Oe=new g.Metadata(le,ge),Te=new m.Target(Ce,he,ge,Oe);if(Q!==void 0){var se=new g.Metadata(Q,W);Te.metadata.push(se)}return Te}(L,z,H,"",re,ae);try{return function Y(Ce,ge,he,Q,W,le){var Oe,Te;if(W===null){Oe=A(Ce,ge,Q,null,le),Te=new E.Request(he,Q,null,Oe,le);var se=new h.Plan(Q,Te);Q.addPlan(se)}else Oe=A(Ce,ge,Q,W,le),Te=W.addChildRequest(le.serviceIdentifier,Oe,le);Oe.forEach(function(ee){var te=null;if(le.isArray())te=Te.addChildRequest(ee.serviceIdentifier,ee,le);else{if(ee.cache)return;te=Te}if(ee.type===M.BindingTypeEnum.Instance&&ee.implementationType!==null){var U=y.getDependencies(Ce,ee.implementationType);if(!Q.container.options.skipBaseClassChecks){var X=y.getBaseClassDependencyCount(Ce,ee.implementationType);if(U.length<X){var B=c.ARGUMENTS_LENGTH_MISMATCH(y.getFunctionName(ee.implementationType));throw new Error(B)}}U.forEach(function(J){Y(Ce,!1,J.serviceIdentifier,Q,te,J)})}})}(N,ue,H,xe,null,ye),xe}catch(Y){throw x.isStackOverflowExeption(Y)&&xe.plan&&O.circularDependencyToException(xe.plan.rootRequest),Y}},b.createMockRequest=function(N,P,L,z){var H=new m.Target(M.TargetTypeEnum.Variable,"",P,new g.Metadata(L,z)),re=new S.Context(N);return new E.Request(P,re,null,[],H)}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BindingCount=void 0,b.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Context=void 0;var f=o(66),c=function(){function M(_){this.id=f.id(),this.container=_}return M.prototype.addPlan=function(_){this.plan=_},M.prototype.setCurrentRequest=function(_){this.currentRequest=_},M}();b.Context=c},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Plan=void 0;var f=function(c,M){this.parentContext=c,this.rootRequest=M};b.Plan=f},function(R,b,o){"use strict";var f=this&&this.__spreadArray||function(E,m){for(var p=0,A=m.length,C=E.length;p<A;p++,C++)E[C]=m[p];return E};Object.defineProperty(b,"__esModule",{value:!0}),b.getFunctionName=b.getBaseClassDependencyCount=b.getDependencies=void 0;var c=o(233),M=o(40),_=o(54),x=o(32),O=o(90);Object.defineProperty(b,"getFunctionName",{enumerable:!0,get:function(){return O.getFunctionName}});var S=o(234);function g(E,m,p,A){var C=E.getConstructorMetadata(p),N=C.compilerGeneratedMetadata;if(N===void 0){var P=M.MISSING_INJECTABLE_ANNOTATION+" "+m+".";throw new Error(P)}var L=C.userGeneratedMetadata,z=Object.keys(L),H=p.length===0&&z.length>0,re=z.length>p.length,ae=function(xe,ye,Y,Ce,ge){for(var he=[],Q=0;Q<ge;Q++){var W=h(Q,xe,ye,Y,Ce);W!==null&&he.push(W)}return he}(A,m,N,L,H||re?z.length:p.length),ue=function xe(ye,Y){for(var Ce=ye.getPropertiesMetadata(Y),ge=[],he=Object.keys(Ce),Q=0,W=he;Q<W.length;Q++){var le=W[Q],Oe=Ce[le],Te=y(Ce[le]),se=Te.targetName||le,ee=Te.inject||Te.multiInject,te=new S.Target(_.TargetTypeEnum.ClassProperty,se,ee);te.metadata=Oe,ge.push(te)}var U=Object.getPrototypeOf(Y.prototype).constructor;if(U!==Object){var X=xe(ye,U);ge=f(f([],ge),X)}return ge}(E,p);return f(f([],ae),ue)}function h(E,m,p,A,C){var N=C[E.toString()]||[],P=y(N),L=P.unmanaged!==!0,z=A[E],H=P.inject||P.multiInject;if((z=H||z)instanceof c.LazyServiceIdentifer&&(z=z.unwrap()),L){if(!m&&(z===Object||z===Function||z===void 0)){var re=M.MISSING_INJECT_ANNOTATION+" argument "+E+" in class "+p+".";throw new Error(re)}var ae=new S.Target(_.TargetTypeEnum.ConstructorArgument,P.targetName,z);return ae.metadata=N,ae}return null}function y(E){var m={};return E.forEach(function(p){m[p.key.toString()]=p.value}),{inject:m[x.INJECT_TAG],multiInject:m[x.MULTI_INJECT_TAG],targetName:m[x.NAME_TAG],unmanaged:m[x.UNMANAGED_TAG]}}b.getDependencies=function(E,m){return g(E,O.getFunctionName(m),m,!1)},b.getBaseClassDependencyCount=function E(m,p){var A=Object.getPrototypeOf(p.prototype).constructor;if(A!==Object){var C=g(m,O.getFunctionName(A),A,!0),N=C.map(function(z){return z.metadata.filter(function(H){return H.key===x.UNMANAGED_TAG})}),P=[].concat.apply([],N).length,L=C.length-P;return L>0?L:E(m,A)}return 0}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.QueryableString=void 0;var f=function(){function c(M){this.str=M}return c.prototype.startsWith=function(M){return this.str.indexOf(M)===0},c.prototype.endsWith=function(M){var _,x=M.split("").reverse().join("");return _=this.str.split("").reverse().join(""),this.startsWith.call({str:_},x)},c.prototype.contains=function(M){return this.str.indexOf(M)!==-1},c.prototype.equals=function(M){return this.str===M},c.prototype.value=function(){return this.str},c}();b.QueryableString=f},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Request=void 0;var f=o(66),c=function(){function M(_,x,O,S,g){this.id=f.id(),this.serviceIdentifier=_,this.parentContext=x,this.parentRequest=O,this.target=g,this.childRequests=[],this.bindings=Array.isArray(S)?S:[S],this.requestScope=O===null?new Map:null}return M.prototype.addChildRequest=function(_,x,O){var S=new M(_,this.parentContext,this,x,O);return this.childRequests.push(S),S},M}();b.Request=c},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.resolve=void 0;var f=o(40),c=o(54),M=o(232),_=o(90),x=o(495),O=function(S,g,h){try{return h()}catch(y){throw M.isStackOverflowExeption(y)?new Error(f.CIRCULAR_DEPENDENCY_IN_FACTORY(S,g.toString())):y}};b.resolve=function(S){return function g(h){return function(y){y.parentContext.setCurrentRequest(y);var E=y.bindings,m=y.childRequests,p=y.target&&y.target.isArray(),A=!(y.parentRequest&&y.parentRequest.target&&y.target&&y.parentRequest.target.matchesArray(y.target.serviceIdentifier));if(p&&A)return m.map(function(H){return g(h)(H)});var C=null;if(!y.target.isOptional()||E.length!==0){var N=E[0],P=N.scope===c.BindingScopeEnum.Singleton,L=N.scope===c.BindingScopeEnum.Request;if(P&&N.activated)return N.cache;if(L&&h!==null&&h.has(N.id))return h.get(N.id);if(N.type===c.BindingTypeEnum.ConstantValue)C=N.cache,N.activated=!0;else if(N.type===c.BindingTypeEnum.Function)C=N.cache,N.activated=!0;else if(N.type===c.BindingTypeEnum.Constructor)C=N.implementationType;else if(N.type===c.BindingTypeEnum.DynamicValue&&N.dynamicValue!==null)C=O("toDynamicValue",N.serviceIdentifier,function(){return N.dynamicValue(y.parentContext)});else if(N.type===c.BindingTypeEnum.Factory&&N.factory!==null)C=O("toFactory",N.serviceIdentifier,function(){return N.factory(y.parentContext)});else if(N.type===c.BindingTypeEnum.Provider&&N.provider!==null)C=O("toProvider",N.serviceIdentifier,function(){return N.provider(y.parentContext)});else{if(N.type!==c.BindingTypeEnum.Instance||N.implementationType===null){var z=_.getServiceIdentifierAsString(y.serviceIdentifier);throw new Error(f.INVALID_BINDING_TYPE+" "+z)}C=x.resolveInstance(N.implementationType,m,g(h))}return typeof N.onActivation=="function"&&(C=N.onActivation(y.parentContext,C)),P&&(N.cache=C,N.activated=!0),L&&h!==null&&!h.has(N.id)&&h.set(N.id,C),C}}}(S.plan.rootRequest.requestScope)(S.plan.rootRequest)}},function(R,b,o){"use strict";var f=this&&this.__spreadArray||function(x,O){for(var S=0,g=O.length,h=x.length;S<g;S++,h++)x[h]=O[S];return x};Object.defineProperty(b,"__esModule",{value:!0}),b.resolveInstance=void 0;var c=o(40),M=o(54),_=o(32);b.resolveInstance=function(x,O,S){var g,h,y=null;if(O.length>0){var E=O.filter(function(m){return m.target!==null&&m.target.type===M.TargetTypeEnum.ConstructorArgument}).map(S);h=E,y=function(m,p,A){var C=p.filter(function(P){return P.target!==null&&P.target.type===M.TargetTypeEnum.ClassProperty}),N=C.map(A);return C.forEach(function(P,L){var z;z=P.target.name.value();var H=N[L];m[z]=H}),m}(y=new((g=x).bind.apply(g,f([void 0],h))),O,S)}else y=new x;return function(m,p){if(Reflect.hasMetadata(_.POST_CONSTRUCT,m)){var A=Reflect.getMetadata(_.POST_CONSTRUCT,m);try{p[A.value]()}catch(C){throw new Error(c.POST_CONSTRUCT_ERROR(m.name,C.message))}}}(x,y),y}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BindingToSyntax=void 0;var f=o(40),c=o(54),M=o(497),_=o(235),x=function(){function O(S){this._binding=S}return O.prototype.to=function(S){return this._binding.type=c.BindingTypeEnum.Instance,this._binding.implementationType=S,new M.BindingInWhenOnSyntax(this._binding)},O.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+f.INVALID_TO_SELF_VALUE);var S=this._binding.serviceIdentifier;return this.to(S)},O.prototype.toConstantValue=function(S){return this._binding.type=c.BindingTypeEnum.ConstantValue,this._binding.cache=S,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toDynamicValue=function(S){return this._binding.type=c.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=S,this._binding.implementationType=null,new M.BindingInWhenOnSyntax(this._binding)},O.prototype.toConstructor=function(S){return this._binding.type=c.BindingTypeEnum.Constructor,this._binding.implementationType=S,this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toFactory=function(S){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=S,this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toFunction=function(S){if(typeof S!="function")throw new Error(f.INVALID_FUNCTION_BINDING);var g=this.toConstantValue(S);return this._binding.type=c.BindingTypeEnum.Function,this._binding.scope=c.BindingScopeEnum.Singleton,g},O.prototype.toAutoFactory=function(S){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=function(g){return function(){return g.container.get(S)}},this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toProvider=function(S){return this._binding.type=c.BindingTypeEnum.Provider,this._binding.provider=S,this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toService=function(S){this.toDynamicValue(function(g){return g.container.get(S)})},O}();b.BindingToSyntax=x},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BindingInWhenOnSyntax=void 0;var f=o(498),c=o(160),M=o(161),_=function(){function x(O){this._binding=O,this._bindingWhenSyntax=new M.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new c.BindingOnSyntax(this._binding),this._bindingInSyntax=new f.BindingInSyntax(O)}return x.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},x.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},x.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},x.prototype.when=function(O){return this._bindingWhenSyntax.when(O)},x.prototype.whenTargetNamed=function(O){return this._bindingWhenSyntax.whenTargetNamed(O)},x.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},x.prototype.whenTargetTagged=function(O,S){return this._bindingWhenSyntax.whenTargetTagged(O,S)},x.prototype.whenInjectedInto=function(O){return this._bindingWhenSyntax.whenInjectedInto(O)},x.prototype.whenParentNamed=function(O){return this._bindingWhenSyntax.whenParentNamed(O)},x.prototype.whenParentTagged=function(O,S){return this._bindingWhenSyntax.whenParentTagged(O,S)},x.prototype.whenAnyAncestorIs=function(O){return this._bindingWhenSyntax.whenAnyAncestorIs(O)},x.prototype.whenNoAncestorIs=function(O){return this._bindingWhenSyntax.whenNoAncestorIs(O)},x.prototype.whenAnyAncestorNamed=function(O){return this._bindingWhenSyntax.whenAnyAncestorNamed(O)},x.prototype.whenAnyAncestorTagged=function(O,S){return this._bindingWhenSyntax.whenAnyAncestorTagged(O,S)},x.prototype.whenNoAncestorNamed=function(O){return this._bindingWhenSyntax.whenNoAncestorNamed(O)},x.prototype.whenNoAncestorTagged=function(O,S){return this._bindingWhenSyntax.whenNoAncestorTagged(O,S)},x.prototype.whenAnyAncestorMatches=function(O){return this._bindingWhenSyntax.whenAnyAncestorMatches(O)},x.prototype.whenNoAncestorMatches=function(O){return this._bindingWhenSyntax.whenNoAncestorMatches(O)},x.prototype.onActivation=function(O){return this._bindingOnSyntax.onActivation(O)},x}();b.BindingInWhenOnSyntax=_},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BindingInSyntax=void 0;var f=o(54),c=o(235),M=function(){function _(x){this._binding=x}return _.prototype.inRequestScope=function(){return this._binding.scope=f.BindingScopeEnum.Request,new c.BindingWhenOnSyntax(this._binding)},_.prototype.inSingletonScope=function(){return this._binding.scope=f.BindingScopeEnum.Singleton,new c.BindingWhenOnSyntax(this._binding)},_.prototype.inTransientScope=function(){return this._binding.scope=f.BindingScopeEnum.Transient,new c.BindingWhenOnSyntax(this._binding)},_}();b.BindingInSyntax=M},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ContainerSnapshot=void 0;var f=function(){function c(){}return c.of=function(M,_){var x=new c;return x.bindings=M,x.middleware=_,x},c}();b.ContainerSnapshot=f},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Lookup=void 0;var f=o(40),c=function(){function M(){this._map=new Map}return M.prototype.getMap=function(){return this._map},M.prototype.add=function(_,x){if(_==null)throw new Error(f.NULL_ARGUMENT);if(x==null)throw new Error(f.NULL_ARGUMENT);var O=this._map.get(_);O!==void 0?(O.push(x),this._map.set(_,O)):this._map.set(_,[x])},M.prototype.get=function(_){if(_==null)throw new Error(f.NULL_ARGUMENT);var x=this._map.get(_);if(x!==void 0)return x;throw new Error(f.KEY_NOT_FOUND)},M.prototype.remove=function(_){if(_==null)throw new Error(f.NULL_ARGUMENT);if(!this._map.delete(_))throw new Error(f.KEY_NOT_FOUND)},M.prototype.removeByCondition=function(_){var x=this;this._map.forEach(function(O,S){var g=O.filter(function(h){return!_(h)});g.length>0?x._map.set(S,g):x._map.delete(S)})},M.prototype.hasKey=function(_){if(_==null)throw new Error(f.NULL_ARGUMENT);return this._map.has(_)},M.prototype.clone=function(){var _=new M;return this._map.forEach(function(x,O){x.forEach(function(S){return _.add(O,S.clone())})}),_},M.prototype.traverse=function(_){this._map.forEach(function(x,O){_(O,x)})},M}();b.Lookup=c},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AsyncContainerModule=b.ContainerModule=void 0;var f=o(66),c=function(_){this.id=f.id(),this.registry=_};b.ContainerModule=c;var M=function(_){this.id=f.id(),this.registry=_};b.AsyncContainerModule=M},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.injectable=void 0;var f=o(40),c=o(32);b.injectable=function(){return function(M){if(Reflect.hasOwnMetadata(c.PARAM_TYPES,M))throw new Error(f.DUPLICATED_INJECTABLE_DECORATOR);var _=Reflect.getMetadata(c.DESIGN_PARAM_TYPES,M)||[];return Reflect.defineMetadata(c.PARAM_TYPES,_,M),M}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.tagged=void 0;var f=o(48),c=o(58);b.tagged=function(M,_){return function(x,O,S){var g=new f.Metadata(M,_);typeof S=="number"?c.tagParameter(x,O,S,g):c.tagProperty(x,O,g)}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.named=void 0;var f=o(32),c=o(48),M=o(58);b.named=function(_){return function(x,O,S){var g=new c.Metadata(f.NAMED_TAG,_);typeof S=="number"?M.tagParameter(x,O,S,g):M.tagProperty(x,O,g)}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.optional=void 0;var f=o(32),c=o(48),M=o(58);b.optional=function(){return function(_,x,O){var S=new c.Metadata(f.OPTIONAL_TAG,!0);typeof O=="number"?M.tagParameter(_,x,O,S):M.tagProperty(_,x,S)}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.unmanaged=void 0;var f=o(32),c=o(48),M=o(58);b.unmanaged=function(){return function(_,x,O){var S=new c.Metadata(f.UNMANAGED_TAG,!0);M.tagParameter(_,x,O,S)}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.multiInject=void 0;var f=o(32),c=o(48),M=o(58);b.multiInject=function(_){return function(x,O,S){var g=new c.Metadata(f.MULTI_INJECT_TAG,_);typeof S=="number"?M.tagParameter(x,O,S,g):M.tagProperty(x,O,g)}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.targetName=void 0;var f=o(32),c=o(48),M=o(58);b.targetName=function(_){return function(x,O,S){var g=new c.Metadata(f.NAME_TAG,_);M.tagParameter(x,O,S,g)}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.postConstruct=void 0;var f=o(40),c=o(32),M=o(48);b.postConstruct=function(){return function(_,x,O){var S=new M.Metadata(c.POST_CONSTRUCT,x);if(Reflect.hasOwnMetadata(c.POST_CONSTRUCT,_.constructor))throw new Error(f.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(c.POST_CONSTRUCT,S,_.constructor)}}},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.multiBindToService=void 0,b.multiBindToService=function(f){return function(c){return function(){for(var M=[],_=0;_<arguments.length;_++)M[_]=arguments[_];return M.forEach(function(x){return f.bind(x).toService(c)})}}}},function(R,b){function o(f,c){return R.exports=o=Object.setPrototypeOf||function(M,_){return M.__proto__=_,M},R.exports.default=R.exports,R.exports.__esModule=!0,o(f,c)}R.exports=o,R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b,o){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var f=Symbol.for("INJECTION");function c(M,_,x,O){Object.defineProperty(M,_,{configurable:!0,enumerable:!0,get:function(){return O&&!Reflect.hasMetadata(f,this,_)&&Reflect.defineMetadata(f,x(),this,_),Reflect.hasMetadata(f,this,_)?Reflect.getMetadata(f,this,_):x()},set:function(S){Reflect.defineMetadata(f,S,this,_)}})}b.makePropertyInjectDecorator=function(M,_){return function(x){return function(O,S){c(O,S,function(){return M.get(x)},_)}}},b.makePropertyInjectNamedDecorator=function(M,_){return function(x,O){return function(S,g){c(S,g,function(){return M.getNamed(x,O)},_)}}},b.makePropertyInjectTaggedDecorator=function(M,_){return function(x,O,S){return function(g,h){c(g,h,function(){return M.getTagged(x,O,S)},_)}}},b.makePropertyMultiInjectDecorator=function(M,_){return function(x){return function(O,S){c(O,S,function(){return M.getAll(x)},_)}}}},function(R,b,o){var f=o(230);R.exports=function(c){if(Array.isArray(c))return f(c)},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b){R.exports=function(o){if(typeof Symbol!="undefined"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b){R.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},R.exports.default=R.exports,R.exports.__esModule=!0},function(R,b){R.exports=function(o){var f=new Float32Array(2);return f[0]=o[0],f[1]=o[1],f}},function(R,b){R.exports=function(o,f){var c=new Float32Array(2);return c[0]=o,c[1]=f,c}},function(R,b){R.exports=function(o,f){return o[0]=f[0],o[1]=f[1],o}},function(R,b,o){R.exports=function(c,M){var _=c[0],x=c[1],O=M[0],S=M[1];return Math.abs(_-O)<=f*Math.max(1,Math.abs(_),Math.abs(O))&&Math.abs(x-S)<=f*Math.max(1,Math.abs(x),Math.abs(S))};var f=o(252)},function(R,b){R.exports=function(o,f){return o[0]===f[0]&&o[1]===f[1]}},function(R,b,o){R.exports=o(162)},function(R,b,o){R.exports=o(256)},function(R,b,o){R.exports=o(257)},function(R,b){R.exports=function(o,f){return o[0]=1/f[0],o[1]=1/f[1],o}},function(R,b){R.exports=function(o,f,c){return o[0]=Math.min(f[0],c[0]),o[1]=Math.min(f[1],c[1]),o}},function(R,b){R.exports=function(o,f,c){return o[0]=Math.max(f[0],c[0]),o[1]=Math.max(f[1],c[1]),o}},function(R,b){R.exports=function(o,f,c){var M=Math.cos(c),_=Math.sin(c),x=f[0],O=f[1];return o[0]=x*M-O*_,o[1]=x*_+O*M,o}},function(R,b){R.exports=function(o,f){return o[0]=Math.floor(f[0]),o[1]=Math.floor(f[1]),o}},function(R,b){R.exports=function(o,f){return o[0]=Math.ceil(f[0]),o[1]=Math.ceil(f[1]),o}},function(R,b){R.exports=function(o,f){return o[0]=Math.round(f[0]),o[1]=Math.round(f[1]),o}},function(R,b){R.exports=function(o,f,c){return o[0]=f[0]*c,o[1]=f[1]*c,o}},function(R,b){R.exports=function(o,f,c,M){return o[0]=f[0]+c[0]*M,o[1]=f[1]+c[1]*M,o}},function(R,b,o){R.exports=o(258)},function(R,b,o){R.exports=o(259)},function(R,b,o){R.exports=o(260)},function(R,b,o){R.exports=o(261)},function(R,b){R.exports=function(o,f){return o[0]=-f[0],o[1]=-f[1],o}},function(R,b){R.exports=function(o,f,c){var M=f[0]*c[1]-f[1]*c[0];return o[0]=o[1]=0,o[2]=M,o}},function(R,b){R.exports=function(o,f,c,M){var _=f[0],x=f[1];return o[0]=_+M*(c[0]-_),o[1]=x+M*(c[1]-x),o}},function(R,b){R.exports=function(o,f){f=f||1;var c=2*Math.random()*Math.PI;return o[0]=Math.cos(c)*f,o[1]=Math.sin(c)*f,o}},function(R,b){R.exports=function(o,f,c){var M=f[0],_=f[1];return o[0]=c[0]*M+c[2]*_,o[1]=c[1]*M+c[3]*_,o}},function(R,b){R.exports=function(o,f,c){var M=f[0],_=f[1];return o[0]=c[0]*M+c[2]*_+c[4],o[1]=c[1]*M+c[3]*_+c[5],o}},function(R,b){R.exports=function(o,f,c){var M=f[0],_=f[1];return o[0]=c[0]*M+c[3]*_+c[6],o[1]=c[1]*M+c[4]*_+c[7],o}},function(R,b){R.exports=function(o,f,c){var M=f[0],_=f[1];return o[0]=c[0]*M+c[4]*_+c[12],o[1]=c[1]*M+c[5]*_+c[13],o}},function(R,b,o){R.exports=function(c,M,_,x,O,S){var g,h;for(M||(M=2),_||(_=0),h=x?Math.min(x*M+_,c.length):c.length,g=_;g<h;g+=M)f[0]=c[g],f[1]=c[g+1],O(f,f,S),c[g]=f[0],c[g+1]=f[1];return c};var f=o(253)()},function(R,b){R.exports=function(o,f,c){var M=f[0]*f[0]+f[1]*f[1];if(M>c*c){var _=Math.sqrt(M);o[0]=f[0]/_*c,o[1]=f[1]/_*c}else o[0]=f[0],o[1]=f[1];return o}},function(R,b,o){"use strict";o.r(b),o.d(b,"G6GraphEvent",function(){return sr}),o.d(b,"G6Event",function(){return zt}),o.d(b,"Node",function(){return Gn}),o.d(b,"Edge",function(){return Ai}),o.d(b,"Combo",function(){return zi}),o.d(b,"Hull",function(){return Xe}),o.d(b,"registerNode",function(){return sn}),o.d(b,"registerCombo",function(){return Wi}),o.d(b,"AbstractGraph",function(){return tt}),o.d(b,"registerEdge",function(){return Ii}),o.d(b,"registerBehavior",function(){return fo}),o.d(b,"AbstractLayout",function(){return ur}),o.d(b,"AbstractEvent",function(){return an}),o.d(b,"BaseGlobal",function(){return or}),o.d(b,"Graph",function(){return Ju}),o.d(b,"TreeGraph",function(){return Pd}),o.d(b,"Util",function(){return No}),o.d(b,"Layout",function(){return Ws}),o.d(b,"TreeLayout",function(){return Md}),o.d(b,"registerLayout",function(){return kd}),o.d(b,"Global",function(){return Xo}),o.d(b,"Minimap",function(){return Ub}),o.d(b,"Grid",function(){return zb}),o.d(b,"Bundling",function(){return Vb}),o.d(b,"Menu",function(){return Wb}),o.d(b,"Fisheye",function(){return Fp}),o.d(b,"Algorithm",function(){return Gp}),o.d(b,"ToolBar",function(){return Xb}),o.d(b,"Tooltip",function(){return Yb}),o.d(b,"TimeBar",function(){return zp}),o.d(b,"ImageMinimap",function(){return Up}),o.d(b,"EdgeFilterLens",function(){return Vp}),o.d(b,"SnapLine",function(){return Wp}),o.d(b,"Legend",function(){return Hb}),o.d(b,"Arrow",function(){return Ut}),o.d(b,"Marker",function(){return Xt}),o.d(b,"Shape",function(){return fr}),o.d(b,"version",function(){return qb});var f={};o.r(f),o.d(f,"getAdjMatrix",function(){return z}),o.d(f,"breadthFirstSearch",function(){return Ce}),o.d(f,"connectedComponent",function(){return he}),o.d(f,"getDegree",function(){return W}),o.d(f,"getInDegree",function(){return le}),o.d(f,"getOutDegree",function(){return Oe}),o.d(f,"detectCycle",function(){return U}),o.d(f,"detectDirectedCycle",function(){return Gr}),o.d(f,"detectAllCycles",function(){return te}),o.d(f,"detectAllDirectedCycle",function(){return ee}),o.d(f,"detectAllUndirectedCycle",function(){return se}),o.d(f,"depthFirstSearch",function(){return Te}),o.d(f,"dijkstra",function(){return X}),o.d(f,"findAllPath",function(){return ne}),o.d(f,"findShortestPath",function(){return J}),o.d(f,"floydWarshall",function(){return ie}),o.d(f,"labelPropagation",function(){return Z}),o.d(f,"louvain",function(){return _e}),o.d(f,"minimumSpanningTree",function(){return Re}),o.d(f,"pageRank",function(){return Ke}),o.d(f,"getNeighbors",function(){return xe}),o.d(f,"Stack",function(){return dr}),o.d(f,"GADDI",function(){return xr}),o.d(f,"default",function(){return Lr});var c={};o.r(c),o.d(c,"compare",function(){return Ur}),o.d(c,"getLineIntersect",function(){return Dr}),o.d(c,"getRectIntersectByPoint",function(){return rn}),o.d(c,"getCircleIntersectByPoint",function(){return Ir}),o.d(c,"getEllipseIntersectByPoint",function(){return On}),o.d(c,"applyMatrix",function(){return In}),o.d(c,"invertMatrix",function(){return Dn}),o.d(c,"getCircleCenterByPoints",function(){return Rn}),o.d(c,"distance",function(){return gn}),o.d(c,"scaleMatrix",function(){return Er}),o.d(c,"floydWarshall",function(){return ln}),o.d(c,"getAdjMatrix",function(){return yn}),o.d(c,"translate",function(){return mn}),o.d(c,"move",function(){return Qn}),o.d(c,"scale",function(){return Un}),o.d(c,"rotate",function(){return ri}),o.d(c,"getDegree",function(){return Oi}),o.d(c,"isPointInPolygon",function(){return Bn}),o.d(c,"intersectBBox",function(){return wi}),o.d(c,"isPolygonsIntersect",function(){return Mi}),o.d(c,"Line",function(){return Wn}),o.d(c,"getBBoxBoundLine",function(){return ii}),o.d(c,"itemIntersectByLine",function(){return hi}),o.d(c,"fractionToLine",function(){return Vn}),o.d(c,"getPointsCenter",function(){return oi}),o.d(c,"squareDist",function(){return di}),o.d(c,"pointLineSquareDist",function(){return _i}),o.d(c,"isPointsOverlap",function(){return Xn}),o.d(c,"pointRectSquareDist",function(){return Yn}),o.d(c,"pointLineDistance",function(){return ki});var M={};o.r(M),o.d(M,"getBBox",function(){return vr}),o.d(M,"getLoopCfgs",function(){return Be}),o.d(M,"getLabelPosition",function(){return ut}),o.d(M,"traverseTree",function(){return Ft}),o.d(M,"traverseTreeUp",function(){return we}),o.d(M,"getLetterWidth",function(){return ze}),o.d(M,"getTextSize",function(){return Qe}),o.d(M,"plainCombosToTrees",function(){return lt}),o.d(M,"reconstructTree",function(){return vt}),o.d(M,"getComboBBox",function(){return wt}),o.d(M,"shouldRefreshEdge",function(){return Lt}),o.d(M,"cloneBesidesImg",function(){return Wt});var _={};o.r(_),o.d(_,"uniqueId",function(){return gr}),o.d(_,"formatPadding",function(){return Vr}),o.d(_,"cloneEvent",function(){return Fr}),o.d(_,"isViewportChanged",function(){return $r}),o.d(_,"isNaN",function(){return Kr}),o.d(_,"calculationItemsBBox",function(){return jn}),o.d(_,"processParallelEdges",function(){return Cn});var x={};o.r(x),o.d(x,"getSpline",function(){return so}),o.d(x,"getControlPoint",function(){return Vi}),o.d(x,"pointsToPolygon",function(){return Ti}),o.d(x,"pathToPoints",function(){return _t}),o.d(x,"getClosedSpline",function(){return $e}),o.d(x,"roundedHull",function(){return ce}),o.d(x,"paddedHull",function(){return K});var O={};o.r(O),o.d(O,"defaultSubjectColors",function(){return Or});var S={};o.r(S),o.d(S,"leftTranslate",function(){return uo}),o.d(S,"leftRotate",function(){return yo}),o.d(S,"leftScale",function(){return co}),o.d(S,"transform",function(){return Da}),o.d(S,"direction",function(){return Ra}),o.d(S,"angleTo",function(){return Hp}),o.d(S,"vertical",function(){return qp});var g={};o.r(g),o.d(g,"mixColor",function(){return gi}),o.d(g,"getColorsWithSubjectColor",function(){return fu}),o.d(g,"getColorSetsBySubjectColors",function(){return Qp});var h={};o.r(h),o.d(h,"proccessToFunc",function(){return vy}),o.d(h,"buildTextureData",function(){return yy}),o.d(h,"buildTextureDataWithOneEdgeAttr",function(){return my}),o.d(h,"buildTextureDataWithTwoEdgeAttr",function(){return by}),o.d(h,"attributesToTextureData",function(){return xy}),o.d(h,"arrayToTextureData",function(){return wy}),o.d(h,"radialLayout",function(){return _y});var y={};o.r(y),o.d(y,"gpuDetector",function(){return Od});var E={};o.r(E),o.d(E,"default",function(){return np}),o.d(E,"assign",function(){return Jo}),o.d(E,"format",function(){return tp}),o.d(E,"parse",function(){return rp}),o.d(E,"defaultI18n",function(){return rc}),o.d(E,"setGlobalDateI18n",function(){return Hd}),o.d(E,"setGlobalDateMasks",function(){return ep});var m=o(1),p=o(0),A={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(n){return Object.assign(this,n),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(n){var t=this,e=this.events;this.graph=n,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||n.get("canvas").set("draggable",!0),Object(p.each)(e,function(r,i){n.on(i,r)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(n){var t=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||n.get("canvas").set("draggable",!1),Object(p.each)(t,function(e,r){n.off(r,e)})},get:function(n){return this[n]},set:function(n,t){return this[n]=t,this}},C=function(){function n(){}return n.registerBehavior=function(t,e){if(!e)throw new Error("please specify handler for this behavior: "+t);var r=Object(p.clone)(A);Object.assign(r,e);var i=function(a){var s=this;Object.assign(this,this.getDefaultCfg(),a);var u=this.getEvents();this.events=null;var l={};u&&(Object(p.each)(u,function(d,v){l[v]=Object(p.wrapBehavior)(s,d)}),this.events=l)};i.prototype=r,n.types[t]=i},n.hasBehavior=function(t){return!!n.types[t]},n.getBehavior=function(t){return n.types[t]},n.types={},n}(),N=C,P=o(135),L=o(17),z=function(n,t){var e=n.nodes,r=n.edges,i=[],a={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,u){a[s.id]=u,i.push([])}),r&&r.forEach(function(s){var u=s.source,l=s.target,d=a[u],v=a[l];!d&&d!==0||!v&&v!==0||(i[d][v]=1,t||(i[v][d]=1))}),i},H=function(n,t){return n===t},re=function(){function n(t,e){e===void 0&&(e=null),this.value=t,this.next=e}return n.prototype.toString=function(t){return t?t(this.value):""+this.value},n}(),ae=function(){function n(t){t===void 0&&(t=H),this.head=null,this.tail=null,this.compare=t}return n.prototype.prepend=function(t){var e=new re(t,this.head);return this.head=e,this.tail||(this.tail=e),this},n.prototype.append=function(t){var e=new re(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},n.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,t)?(e=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,t)&&(this.tail=r),e},n.prototype.find=function(t){var e=t.value,r=e===void 0?void 0:e,i=t.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var s=this.head;s;){if(a&&a(s.value)||r!==void 0&&this.compare(s.value,r))return s;s=s.next}return null},n.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},n.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},n.prototype.fromArray=function(t){var e=this;return t.forEach(function(r){return e.append(r)}),this},n.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},n.prototype.reverse=function(){for(var t=this.head,e=null,r=null;t;)r=t.next,t.next=e,e=t,t=r;this.tail=this.head,this.head=e},n.prototype.toString=function(t){return t===void 0&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},n}(),ue=function(){function n(){this.linkedList=new ae}return n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},n.prototype.enqueue=function(t){this.linkedList.append(t)},n.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},n.prototype.toString=function(t){return this.linkedList.toString(t)},n}(),xe=function(n,t,e){t===void 0&&(t=[]);var r=t.filter(function(i){return i.source===n||i.target===n});return e==="target"?r.filter(function(i){return i.source===n}).map(function(i){return i.target}):e==="source"?r.filter(function(i){return i.target===n}).map(function(i){return i.source}):r.map(function(i){return i.source===n?i.target:i.source})},ye=function(n,t){return t.filter(function(e){return e.source===n||e.target===n})},Y=function(n){return n===void 0&&(n=0),n+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)},Ce=function(n,t,e){var r=function(d){d===void 0&&(d={});var v,k=d,T=function(){},I=(v={},function(j){var F=j.next;return!v[F]&&(v[F]=!0,!0)});return k.allowTraversal=d.allowTraversal||I,k.enter=d.enter||T,k.leave=d.leave||T,k}(e),i=new ue,a=n.edges,s=a===void 0?[]:a;i.enqueue(t);for(var u="",l=function(){var d=i.dequeue();r.enter({current:d,previous:u}),xe(d,s,"target").forEach(function(v){r.allowTraversal({previous:u,current:d,next:v})&&i.enqueue(v)}),r.leave({current:d,previous:u}),u=d};!i.isEmpty();)l()},ge=function(n){for(var t=n.nodes,e=t===void 0?[]:t,r=n.edges,i=r===void 0?[]:r,a=[],s={},u={},l={},d=[],v=0,k=function F(G){u[G.id]=v,l[G.id]=v,v+=1,a.push(G),s[G.id]=!0;for(var V=xe(G.id,i,"target").filter(function(me){return e.map(function(Ie){return Ie.id}).indexOf(me)>-1}),q=function(me){var Ie=V[me];if(u[Ie]||u[Ie]===0)s[Ie]&&(l[G.id]=Math.min(l[G.id],u[Ie]));else{var Ee=e.filter(function(Pe){return Pe.id===Ie});Ee.length>0&&F(Ee[0]),l[G.id]=Math.min(l[G.id],l[Ie])}},$=0;$<V.length;$++)q($);if(l[G.id]===u[G.id]){for(var ve=[];a.length>0;){var de=a.pop();if(s[de.id]=!1,ve.push(de),de===G)break}ve.length>0&&d.push(ve)}},T=0,I=e;T<I.length;T++){var j=I[T];u[j.id]||u[j.id]===0||k(j)}return d};function he(n,t){return t?ge(n):function(e){for(var r=e.nodes,i=r===void 0?[]:r,a=e.edges,s=a===void 0?[]:a,u=[],l={},d=[],v=function j(F){d.push(F),l[F.id]=!0;for(var G=xe(F.id,s),V=function($){var ve=G[$];if(!l[ve]){var de=i.filter(function(me){return me.id===ve});de.length>0&&j(de[0])}},q=0;q<G.length;++q)V(q)},k=0;k<i.length;k++){var T=i[k];if(!l[T.id]){v(T);for(var I=[];d.length>0;)I.push(d.pop());u.push(I)}}return u}(n)}var Q=function(n){var t={},e=n.nodes,r=e===void 0?[]:e,i=n.edges,a=i===void 0?[]:i;return r.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),a.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},W=Q,le=function(n,t){return Q(n)[t]?Q(n)[t].inDegree:0},Oe=function(n,t){return Q(n)[t]?Q(n)[t].outDegree:0};function Te(n,t,e){(function r(i,a,s,u){u.enter({current:a,previous:s});var l=i.edges;xe(a,l===void 0?[]:l,"target").forEach(function(d){u.allowTraversal({previous:s,current:a,next:d})&&r(i,d,a,u)}),u.leave({current:a,previous:s})})(n,t,"",function(r){r===void 0&&(r={});var i,a=r,s=function(){},u=(i={},function(l){var d=l.next;return!i[d]&&(i[d]=!0,!0)});return a.allowTraversal=r.allowTraversal||u,a.enter=r.enter||s,a.leave=r.leave||s,a}(e))}var se=function(n,t,e){var r,i;e===void 0&&(e=!0);for(var a=[],s=0,u=he(n,!1);s<u.length;s++){var l=u[s];if(l.length)for(var d=l[0],v=d.id,k=[d],T=((r={})[v]=d,r),I=((i={})[v]=new Set,i);k.length>0;)for(var j=k.pop(),F=j.id,G=xe(F,n.edges),V=function($){var ve,de=G[$],me=n.nodes.find(function(ct){return ct.id===de});if(de===F)a.push(((ve={})[de]=j,ve));else if(de in I){if(!I[F].has(me)){for(var Ie=!0,Ee=[me,j],Pe=T[F];I[de].size&&!I[de].has(Pe)&&(Ee.push(Pe),Pe!==T[Pe.id]);)Pe=T[Pe.id];if(Ee.push(Pe),t&&e?(Ie=!1,Ee.findIndex(function(ct){return t.indexOf(ct.id)>-1})>-1&&(Ie=!0)):t&&!e&&Ee.findIndex(function(ct){return t.indexOf(ct.id)>-1})>-1&&(Ie=!1),Ie){for(var Ze={},it=1;it<Ee.length;it+=1)Ze[Ee[it-1].id]=Ee[it];Ee.length&&(Ze[Ee[Ee.length-1].id]=Ee[0]),a.push(Ze)}I[de].add(j)}}else T[de]=j,k.push(me),I[de]=new Set([j])},q=0;q<G.length;q+=1)V(q)}return a},ee=function(n,t,e){e===void 0&&(e=!0);for(var r=[],i=new Set,a=[],s=[],u={},l={},d=function Pe(Ze,it,ct){var st=!1;if(t&&e===!1&&t.indexOf(Ze.id)>-1)return st;r.push(Ze),i.add(Ze);for(var jt=ct[Ze.id],gt=0;gt<jt.length;gt+=1)if((Zt=u[jt[gt]])===it){for(var Pt={},Rt=1;Rt<r.length;Rt+=1)Pt[r[Rt-1].id]=r[Rt];r.length&&(Pt[r[r.length-1].id]=r[0]),s.push(Pt),st=!0}else i.has(Zt)||Pe(Zt,it,ct)&&(st=!0);if(st)(function(Ct){for(var Vt=[Ct];Vt.length>0;){var Dt=Vt.pop();i.has(Dt)&&(i.delete(Dt),a[Dt.id].forEach(function(qt){Vt.push(qt)}),a[Dt.id].clear())}})(Ze);else for(gt=0;gt<jt.length;gt+=1){var Zt=u[jt[gt]];a[Zt.id].has(Ze)||a[Zt.id].add(Ze)}return r.pop(),st},v=n.nodes,k=v===void 0?[]:v,T=0;T<k.length;T+=1){var I=k[T],j=I.id;l[j]=T,u[T]=I}if(t&&e){var F=function(Pe){var Ze=t[Pe];l[k[Pe].id]=l[Ze],l[Ze]=0,u[0]=k.find(function(it){return it.id===Ze}),u[l[k[Pe].id]]=k[Pe]};for(T=0;T<t.length;T++)F(T)}for(var G=function(Pe){for(var Ze,it,ct=1/0,st=0;st<Pe.length;st+=1)for(var jt=Pe[st],gt=0;gt<jt.length;gt++){var Pt=l[jt[gt].id];Pt<ct&&(ct=Pt,it=st)}var Rt=Pe[it],Zt=[];for(st=0;st<Rt.length;st+=1){var Ct=Rt[st];Zt[Ct.id]=[];for(var Vt=0,Dt=xe(Ct.id,n.edges,"target").filter(function($t){return Rt.map(function(Gt){return Gt.id}).indexOf($t)>-1});Vt<Dt.length;Vt++){var qt=Dt[Vt];qt!==Ct.id||e===!1&&t.indexOf(Ct.id)>-1?Zt[Ct.id].push(l[qt]):s.push(((Ze={})[Ct.id]=Ct,Ze))}}return{component:Rt,adjList:Zt,minIdx:ct}},V=0;V<k.length;){var q=k.filter(function(Pe){return l[Pe.id]>=V}),$=ge({nodes:q,edges:n.edges}).filter(function(Pe){return Pe.length>1});if($.length===0)break;var ve=G($),de=ve.minIdx,me=ve.adjList,Ie=ve.component;if(!(Ie.length>1))break;Ie.forEach(function(Pe){a[Pe.id]=new Set});var Ee=u[de];if(t&&e&&t.indexOf(Ee.id)===-1)return s;d(Ee,Ee,me),V=de+1}return s},te=function(n,t,e,r){return r===void 0&&(r=!0),t?ee(n,e,r):se(n,e,r)},U=function(n){var t=null,e=n.nodes,r={},i={},a={},s={};(e===void 0?[]:e).forEach(function(l){i[l.id]=l});for(var u={enter:function(l){var d=l.current,v=l.previous;if(a[d]){t={};for(var k=d,T=v;T!==d;)t[k]=T,k=T,T=r[T];t[k]=T}else a[d]=d,delete i[d],r[d]=v},leave:function(l){var d=l.current;s[d]=d,delete a[d]},allowTraversal:function(l){var d=l.next;return!t&&!s[d]}};Object.keys(i).length;)Te(n,Object.keys(i)[0],u);return t},X=function(n,t,e,r){var i=n.nodes,a=i===void 0?[]:i,s=n.edges,u=s===void 0?[]:s,l=[],d={},v={},k={};a.forEach(function(q,$){var ve=q.id;l.push(ve),v[ve]=1/0,ve===t&&(v[ve]=0)});for(var T=a.length,I=function(q){var $=function(de,me,Ie){for(var Ee,Pe=1/0,Ze=0;Ze<me.length;Ze++){var it=me[Ze].id;!Ie[it]&&de[it]<=Pe&&(Pe=de[it],Ee=me[Ze])}return Ee}(v,a,d),ve=$.id;if(d[ve]=!0,v[ve]===1/0)return"continue";(e?function(de,me){return me.filter(function(Ie){return Ie.source===de})}(ve,u):ye(ve,u)).forEach(function(de){var me=de.target,Ie=de.source,Ee=me===ve?Ie:me,Pe=r&&de[r]?de[r]:1;v[Ee]>v[$.id]+Pe?(v[Ee]=v[$.id]+Pe,k[Ee]=[$.id]):v[Ee]===v[$.id]+Pe&&k[Ee].push($.id)})},j=0;j<T;j++)I();k[t]=[t];var F={};for(var G in v)v[G]!==1/0&&B(t,G,k,F);var V={};for(var G in F)V[G]=F[G][0];return{length:v,path:V,allPath:F}};function B(n,t,e,r){if(n===t)return[n];if(r[t])return r[t];for(var i=[],a=0,s=e[t];a<s.length;a++){var u=B(n,s[a],e,r);if(!u)return;for(var l=0,d=u;l<d.length;l++){var v=d[l];Object(p.isArray)(v)?i.push(Object(m.__spreadArray)(Object(m.__spreadArray)([],v),[t])):i.push([v,t])}}return r[t]=i,r[t]}var J=function(n,t,e,r,i){var a=X(n,t,r,i),s=a.length,u=a.path,l=a.allPath;return{length:s[e],path:u[e],allPath:l[e]}},ne=function(n,t,e,r){var i;if(t===e)return[[t]];var a=n.edges,s=a===void 0?[]:a,u=[t],l=((i={})[t]=!0,i),d=[],v=[],k=r?xe(t,s,"target"):xe(t,s);for(d.push(k);u.length>0&&d.length>0;){var T=d[d.length-1];if(T.length){var I=T.shift();if(I&&(u.push(I),l[I]=!0,k=r?xe(I,s,"target"):xe(I,s),d.push(k.filter(function(G){return!l[G]}))),u[u.length-1]===e){var j=u.map(function(G){return G});v.push(j),F=u.pop(),l[F]=!1,d.pop()}}else{var F=u.pop();l[F]=!1,d.pop()}}return v},ie=function(n,t){for(var e=z(n,t),r=[],i=e.length,a=0;a<i;a+=1){r[a]=[];for(var s=0;s<i;s+=1)a===s?r[a][s]=0:e[a][s]!==0&&e[a][s]?r[a][s]=e[a][s]:r[a][s]=1/0}for(var u=0;u<i;u+=1)for(a=0;a<i;a+=1)for(s=0;s<i;s+=1)r[a][s]>r[a][u]+r[u][s]&&(r[a][s]=r[a][u]+r[u][s]);return r},Z=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e="weight"),r===void 0&&(r=1e3);var i=n.nodes,a=i===void 0?[]:i,s=n.edges,u=s===void 0?[]:s,l={},d={};a.forEach(function(q,$){var ve=Y();q.clusterId=ve,l[ve]={id:ve,nodes:[q]},d[q.id]={node:q,idx:$}});var v=z(n,t),k=[],T={};v.forEach(function(q,$){var ve=0,de=a[$].id;T[de]={},q.forEach(function(me,Ie){if(me){ve+=me;var Ee=a[Ie].id;T[de][Ee]=me}}),k.push(ve)});for(var I=0,j=function(){var q=!1;if(a.forEach(function($){var ve={};Object.keys(T[$.id]).forEach(function(ct){var st=T[$.id][ct],jt=d[ct].node.clusterId;ve[jt]||(ve[jt]=0),ve[jt]+=st});var de=-1/0,me=[];if(Object.keys(ve).forEach(function(ct){de<ve[ct]?(de=ve[ct],me=[ct]):de===ve[ct]&&me.push(ct)}),me.length!==1||me[0]!==$.clusterId){var Ie=me.indexOf($.clusterId);if(Ie>=0&&me.splice(Ie,1),me&&me.length){q=!0;var Ee=l[$.clusterId],Pe=Ee.nodes.indexOf($);Ee.nodes.splice(Pe,1);var Ze=Math.floor(Math.random()*me.length),it=l[me[Ze]];it.nodes.push($),$.clusterId=it.id}}}),!q)return"break";I++};I<r&&j()!=="break";);Object.keys(l).forEach(function(q){var $=l[q];$.nodes&&$.nodes.length||delete l[q]});var F=[],G={};u.forEach(function(q){var $=q.source,ve=q.target,de=q[e]||1,me=d[$].node.clusterId,Ie=d[ve].node.clusterId,Ee=me+"---"+Ie;if(G[Ee])G[Ee].weight+=de,G[Ee].count++;else{var Pe={source:me,target:Ie,weight:de,count:1};G[Ee]=Pe,F.push(Pe)}});var V=[];return Object.keys(l).forEach(function(q){V.push(l[q])}),{clusters:V,clusterEdges:F}},fe=function(n,t,e,r){for(var i=t.length,a=2*r,s=0,u=0;u<i;u++)for(var l=n[u].clusterId,d=0;d<i;d++)l===n[d].clusterId&&(s+=(t[u][d]||0)-(e[u]||0)*(e[d]||0)/a);return s*=1/a},_e=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e="weight"),r===void 0&&(r=1e-4);var i=n.nodes,a=i===void 0?[]:i,s=n.edges,u=s===void 0?[]:s,l=1,d={},v={};a.forEach(function(Ie,Ee){var Pe=String(l++);Ie.clusterId=Pe,d[Pe]={id:Pe,nodes:[Ie]},v[Ie.id]={node:Ie,idx:Ee}});var k=z(n,t),T=[],I={},j=0;k.forEach(function(Ie,Ee){var Pe=0,Ze=a[Ee].id;I[Ze]={},Ie.forEach(function(it,ct){if(it){Pe+=it;var st=a[ct].id;I[Ze][st]=it,j+=it}}),T.push(Pe)}),j/=2;for(var F=1/0,G=1/0,V=0;F=fe(a,k,T,j),!(Math.abs(F-G)<r||V>100);)G=F,V++,Object.keys(d).forEach(function(Ie){var Ee=0;u.forEach(function(Pe){var Ze=Pe.source,it=Pe.target,ct=v[Ze].node.clusterId,st=v[it].node.clusterId;(ct===Ie&&st!==Ie||st===Ie&&ct!==Ie)&&(Ee+=Pe[e]||1)}),d[Ie].sumTot=Ee}),a.forEach(function(Ie,Ee){var Pe,Ze=d[Ie.clusterId],it=0,ct=T[Ee]/(2*j),st=0;Ze.nodes.forEach(function(Vt){var Dt=v[Vt.id].idx;st+=k[Ee][Dt]||0});var jt=st-Ze.sumTot*ct,gt=I[Ie.id];if(Object.keys(gt).forEach(function(Vt){var Dt=v[Vt].node.clusterId;if(Dt!==Ie.clusterId){var qt=d[Dt],$t=qt.nodes;if($t&&$t.length){var Gt=0;$t.forEach(function(Br){var wn=v[Br.id].idx;Gt+=k[Ee][wn]||0});var lr=Gt-qt.sumTot*ct-jt;lr>it&&(it=lr,Pe=qt)}}}),it>0){Pe.nodes.push(Ie);var Pt=Ie.clusterId;Ie.clusterId=Pe.id;var Rt=Ze.nodes.indexOf(Ie);Ze.nodes.splice(Rt,1);var Zt=0,Ct=0;u.forEach(function(Vt){var Dt=Vt.source,qt=Vt.target,$t=v[Dt].node.clusterId,Gt=v[qt].node.clusterId;($t===Pe.id&&Gt!==Pe.id||Gt===Pe.id&&$t!==Pe.id)&&(Zt+=Vt[e]||1),($t===Pt&&Gt!==Pt||Gt===Pt&&$t!==Pt)&&(Ct+=Vt[e]||1)}),Pe.sumTot=Zt,Ze.sumTot=Ct}});var q={},$=0;Object.keys(d).forEach(function(Ie){var Ee=d[Ie];if(Ee.nodes&&Ee.nodes.length){var Pe=String($+1);Pe!==Ie&&(Ee.id=Pe,Ee.nodes=Ee.nodes.map(function(Ze){return{id:Ze.id,clusterId:Pe}}),d[Pe]=Ee,q[Ie]=Pe,delete d[Ie],$++)}else delete d[Ie]}),a.forEach(function(Ie){Ie.clusterId&&q[Ie.clusterId]&&(Ie.clusterId=q[Ie.clusterId])});var ve=[],de={};u.forEach(function(Ie){var Ee=Ie.source,Pe=Ie.target,Ze=Ie[e]||1,it=v[Ee].node.clusterId,ct=v[Pe].node.clusterId,st=it+"---"+ct;if(de[st])de[st].weight+=Ze,de[st].count++;else{var jt={source:it,target:ct,weight:Ze,count:1};de[st]=jt,ve.push(jt)}});var me=[];return Object.keys(d).forEach(function(Ie){me.push(d[Ie])}),{clusters:me,clusterEdges:ve}},je=function(){function n(t){this.count=t.length,this.parent={};for(var e=0,r=t;e<r.length;e++){var i=r[e];this.parent[i]=i}}return n.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},n.prototype.union=function(t,e){var r=this.find(t),i=this.find(e);r!==i&&(r<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},n.prototype.connected=function(t,e){return this.find(t)===this.find(e)},n}(),Me=function(n,t){return n-t},Ae=function(){function n(t){t===void 0&&(t=Me),this.compareFn=t,this.list=[]}return n.prototype.getLeft=function(t){return 2*t+1},n.prototype.getRight=function(t){return 2*t+2},n.prototype.getParent=function(t){return t===0?null:Math.floor((t-1)/2)},n.prototype.isEmpty=function(){return this.list.length<=0},n.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},n.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},n.prototype.insert=function(t){if(t!==null){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},n.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var r=this.list[e];this.list[e]=this.list[t],this.list[t]=r,t=e,e=this.getParent(t)}},n.prototype.moveDown=function(t){var e,r=t,i=this.getLeft(t),a=this.getRight(t),s=this.list.length;i!==null&&i<s&&this.compareFn(this.list[r],this.list[i])>0?r=i:a!==null&&a<s&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),t!==r&&(e=[this.list[r],this.list[t]],this.list[t]=e[0],this.list[r]=e[1],this.moveDown(r))},n}(),Le=function(n,t){var e=[],r=n.nodes,i=r===void 0?[]:r,a=n.edges,s=a===void 0?[]:a;if(i.length===0)return e;var u=i[0],l=new Set;l.add(u);var d=new Ae(function(I,j){return t?I.weight-j.weight:0});for(ye(u.id,s).forEach(function(I){d.insert(I)});!d.isEmpty();){var v=d.delMin(),k=v.source,T=v.target;l.has(k)&&l.has(T)||(e.push(v),l.has(k)||(l.add(k),ye(k,s).forEach(function(I){d.insert(I)})),l.has(T)||(l.add(T),ye(T,s).forEach(function(I){d.insert(I)})))}return e},Se=function(n,t){var e=[],r=n.nodes,i=r===void 0?[]:r,a=n.edges,s=a===void 0?[]:a;if(i.length===0)return e;var u=s.map(function(T){return T});t&&u.sort(function(T,I){return T.weight-I.weight});for(var l=new je(i.map(function(T){return T.id}));u.length>0;){var d=u.shift(),v=d.source,k=d.target;l.connected(v,k)||(e.push(d),l.union(v,k))}return e},Re=function(n,t,e){return e?{prim:Le,kruskal:Se}[e](n,t):Se(n,t)},Ke=function(n,t,e){typeof t!="number"&&(t=1e-6),typeof e!="number"&&(e=.85);for(var r,i=1,a=0,s=1e3,u=n.nodes,l=u===void 0?[]:u,d=n.edges,v=d===void 0?[]:d,k=l.length,T={},I={},j=0;j<k;++j)T[G=(de=l[j]).id]=1/k,I[G]=1/k;for(var F=W(n);s>0&&i>t;){for(a=0,j=0;j<k;++j){var G=(de=l[j]).id;if(r=0,F[de.id].inDegree===0)T[G]=0;else{for(var V=xe(G,v,"source"),q=0;q<V.length;++q){var $=V[q],ve=F[$].outDegree;ve>0&&(r+=I[$]/ve)}T[G]=e*r,a+=T[G]}}for(a=(1-a)/k,i=0,j=0;j<k;++j){var de;r=T[G=(de=l[j]).id]+a,i+=Math.abs(r-I[G]),I[G]=r}s-=1}return I},Je=function(n,t,e,r){n===void 0&&(n=-1),t===void 0&&(t=-1),e===void 0&&(e=-1),r===void 0&&(r="-1"),this.id=n,this.from=t,this.to=e,this.label=r},nt=function(){function n(t,e){t===void 0&&(t=-1),e===void 0&&(e="-1"),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return n.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},n}(),dt=function(){function n(t,e,r){t===void 0&&(t=-1),e===void 0&&(e=!0),r===void 0&&(r=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return n.prototype.getNodeNum=function(){return this.nodes.length},n.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var r=new nt(t,e);this.nodes.push(r),this.nodeMap[t]=r,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},n.prototype.addEdge=function(t,e,r,i){if((this.edgeIdAutoIncrease||t===void 0)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[t])){var a=new Je(t,e,r,i);if(this.edges.push(a),this.edgeMap[t]=a,this.nodeMap[e].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var s=new Je(t,r,e,i);this.nodeMap[r].addEdge(s),this.edgeLabelMap[i].push(s)}}},n}(),kt=function(){function n(t,e,r,i,a){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:r||"-1",edgeLabel:i||"-1",nodeLabel2:a||"-1"}}return n.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},n.prototype.notEqualTo=function(t){return!this.equalTo(t)},n}(),At=function(){function n(){this.rmpath=[],this.dfsEdgeList=[]}return n.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var r=0;r<e;r++)if(this.dfsEdgeList[r]!==t[r])return!1;return!0},n.prototype.notEqualTo=function(t){return!this.equalTo(t)},n.prototype.pushBack=function(t,e,r,i,a){return this.dfsEdgeList.push(new kt(t,e,r,i,a)),this.dfsEdgeList},n.prototype.toGraph=function(t,e){t===void 0&&(t=-1),e===void 0&&(e=!1);var r=new dt(t,!0,e);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,s=i.toNode,u=i.nodeEdgeNodeLabel,l=u.nodeLabel1,d=u.edgeLabel,v=u.nodeLabel2;l!=="-1"&&r.addNode(a,l),v!=="-1"&&r.addNode(s,v),r.addEdge(void 0,a,s,d)}),r},n.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var r=this.dfsEdgeList[e],i=r.fromNode,a=r.toNode;i<a&&(t===void 0||a===t)&&(this.rmpath.push(e),t=i)}return this.rmpath},n.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},n}(),It=function(){function n(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return n.prototype.hasNode=function(t){return this.nodesUsed[t.id]===1},n.prototype.hasEdge=function(t){return this.edgesUsed[t.id]===1},n}(),Kt=function(){function n(t){var e=t.graphs,r=t.minSupport,i=r===void 0?2:r,a=t.minNodeNum,s=a===void 0?1:a,u=t.maxNodeNum,l=u===void 0?4:u,d=t.top,v=d===void 0?10:d,k=t.directed,T=k!==void 0&&k,I=t.verbose,j=I!==void 0&&I;this.graphs=e,this.dfsCode=new At,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=v,this.directed=T,this.counter=0,this.maxNodeNum=l,this.minNodeNum=s,this.verbose=j,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return n.prototype.findForwardRootEdges=function(t,e){var r=this,i=[],a=t.nodeMap;return e.edges.forEach(function(s){(r.directed||e.label<=a[s.to].label)&&i.push(s)}),i},n.prototype.findBackwardEdge=function(t,e,r,i){if(!this.directed&&e===r)return null;for(var a=t.nodeMap,s=a[r.to].edges,u=s.length,l=0;l<u;l++){var d=s[l];if(!i.hasEdge(d)&&d.to===e.from){if(this.directed){if(a[e.from].label<a[r.to].label||a[e.from].label===a[r.to].label&&e.label<=d.label)return d}else if(e.label<d.label||e.label===d.label&&a[e.to].label<=a[r.to].label)return d}}return null},n.prototype.findForwardPureEdges=function(t,e,r,i){for(var a=[],s=e.to,u=t.nodeMap[s].edges,l=u.length,d=0;d<l;d++){var v=u[d],k=t.nodeMap[v.to];r<=k.label&&!i.hasNode(k)&&a.push(v)}return a},n.prototype.findForwardRmpathEdges=function(t,e,r,i){for(var a=[],s=t.nodeMap,u=s[e.to].label,l=s[e.from].edges,d=l.length,v=0;v<d;v++){var k=l[v],T=s[k.to].label;e.to===k.to||r>T||i.hasNode(s[k.to])||(e.label<k.label||e.label===k.label&&u<=T)&&a.push(k)}return a},n.prototype.getSupport=function(t){var e={};return t.forEach(function(r){e[r.graphId]||(e[r.graphId]=!0)}),Object.keys(e).length},n.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(r){var i=t[r],a=i.nodeLabel1,s=i.edgeLabel,u=i.nodeLabel2;e?(a<e.nodeLabel1||a===e.nodeLabel1&&s<e.edgeLabel||a===e.nodeLabel1&&s===e.edgeLabel&&u<e.nodeLabel2)&&(e={nodeLabel1:a,edgeLabel:s,nodeLabel2:u}):e={nodeLabel1:a,edgeLabel:s,nodeLabel2:u}}),e},n.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),e.dfsEdgeList.length===1)return!0;var r=this.directed,i=e.toGraph(-1,r),a=i.nodeMap,s=new At,u={};i.nodes.forEach(function(v){t.findForwardRootEdges(i,v).forEach(function(k){var T=a[k.to],I=v.label+"-"+k.label+"-"+T.label;u[I]||(u[I]={projected:[],nodeLabel1:v.label,edgeLabel:k.label,nodeLabel2:T.label});var j={graphId:i.id,edge:k,preNode:null};u[I].projected.push(j)})});var l=this.findMinLabel(u);s.dfsEdgeList.push(new kt(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var d=l.nodeLabel1+"-"+l.edgeLabel+"-"+l.nodeLabel2;return function v(k){for(var T=s.buildRmpath(),I=s.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,j=s.dfsEdgeList[T[0]].toNode,F={},G=!1,V=0,q=r?-1:0,$=function(st){if(G)return"break";k.forEach(function(jt){var gt=new It(jt),Pt=t.findBackwardEdge(i,gt.edges[T[st]],gt.edges[T[0]],gt);Pt&&(F[Pt.label]||(F[Pt.label]={projected:[],edgeLabel:Pt.label}),F[Pt.label].projected.push({graphId:i.id,edge:F,preNode:jt}),V=s.dfsEdgeList[T[st]].fromNode,G=!0)})},ve=T.length-1;ve>q&&$(ve)!=="break";ve--);if(G){var de=t.findMinLabel(F);s.dfsEdgeList.push(new kt(j,V,"-1",de.edgeLabel,"-1"));var me=s.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[me]===s.dfsEdgeList[me]&&v(F[de.edgeLabel].projected)}var Ie={};G=!1;var Ee=0;k.forEach(function(st){var jt=new It(st),gt=t.findForwardPureEdges(i,jt.edges[T[0]],I,jt);gt.length>0&&(G=!0,Ee=j,gt.forEach(function(Pt){var Rt=Pt.label+"-"+a[Pt.to].label;Ie[Rt]||(Ie[Rt]={projected:[],edgeLabel:Pt.label,nodeLabel2:a[Pt.to].label}),Ie[Rt].projected.push({graphId:i.id,edge:Pt,preNode:st})}))});var Pe=T.length,Ze=function(st){if(G)return"break";var jt=T[st];k.forEach(function(gt){var Pt=new It(gt),Rt=t.findForwardRmpathEdges(i,Pt.edges[jt],I,Pt);Rt.length>0&&(G=!0,Ee=s.dfsEdgeList[jt].fromNode,Rt.forEach(function(Zt){var Ct=Zt.label+"-"+a[Zt.to].label;Ie[Ct]||(Ie[Ct]={projected:[],edgeLabel:Zt.label,nodeLabel2:a[Zt.to].label}),Ie[Ct].projected.push({graphId:i.id,edge:Zt,preNode:gt})}))})};for(ve=0;ve<Pe&&Ze(ve)!=="break";ve++);if(!G)return!0;var it=t.findMinLabel(Ie);s.dfsEdgeList.push(new kt(Ee,j+1,"-1",it.edgeLabel,it.nodeLabel2));var ct=s.dfsEdgeList.length-1;return e.dfsEdgeList[ct]===s.dfsEdgeList[ct]&&v(Ie[it.edgeLabel+"-"+it.nodeLabel2].projected)}(u[d].projected)},n.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Object(p.clone)(t))}},n.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[i[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},l={};t.forEach(function(d){for(var v=e.graphs[d.graphId],k=v.nodeMap,T=new It(d),I=i.length-1;I>=0;I--){var j=e.findBackwardEdge(v,T.edges[i[I]],T.edges[i[0]],T);if(j){var F=e.dfsCode.dfsEdgeList[i[I]].fromNode+"-"+j.label;l[F]||(l[F]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[i[I]].fromNode,edgeLabel:j.label}),l[F].projected.push({graphId:d.graphId,edge:j,preNode:d})}}if(!(r>=e.maxNodeNum)){e.findForwardPureEdges(v,T.edges[i[0]],s,T).forEach(function(V){var q=a+"-"+V.label+"-"+k[V.to].label;u[q]||(u[q]={projected:[],fromNodeId:a,edgeLabel:V.label,nodeLabel2:k[V.to].label}),u[q].projected.push({graphId:d.graphId,edge:V,preNode:d})});var G=function(V){e.findForwardRmpathEdges(v,T.edges[i[V]],s,T).forEach(function(q){var $=e.dfsCode.dfsEdgeList[i[V]].fromNode+"-"+q.label+"-"+k[q.to].label;u[$]||(u[$]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[i[V]].fromNode,edgeLabel:q.label,nodeLabel2:k[q.to].label}),u[$].projected.push({graphId:d.graphId,edge:q,preNode:d})})};for(I=0;I<i.length;I++)G(I)}}),Object.keys(l).forEach(function(d){var v=l[d],k=v.toNodeId,T=v.edgeLabel;e.dfsCode.dfsEdgeList.push(new kt(a,k,"-1",T,"-1")),e.subGraphMining(l[d].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(d){var v=u[d],k=v.fromNodeId,T=v.edgeLabel,I=v.nodeLabel2;e.dfsCode.dfsEdgeList.push(new kt(k,a+1,"-1",T,I)),e.subGraphMining(u[d].projected),e.dfsCode.dfsEdgeList.pop()})}},n.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,r=this.minSupport,i=this.frequentSize1Subgraphs,a={},s={},u={},l={};return Object.keys(t).forEach(function(d){var v=t[d],k=v.nodeMap;v.nodes.forEach(function(T,I){var j=T.label,F=d+"-"+j;if(!u[F]){var G=a[j]||0;G++,a[j]=G}u[F]={graphKey:d,label:j},T.edges.forEach(function(V){var q=j,$=k[V.to].label;if(!e&&q>$){var ve=$;$=q,q=ve}var de=V.label,me=d+"-"+q+"-"+de+"-"+$,Ie=q+"-"+de+"-"+$;if(!s[Ie]){var Ee=s[Ie]||0;Ee++,s[Ie]=Ee}l[me]={graphId:d,nodeLabel1:q,edgeLabel:de,nodeLabel2:$}})})}),Object.keys(a).forEach(function(d){if(!(a[d]<r)){var v={nodes:[],edges:[]};v.nodes.push({id:"0",label:d}),i.push(v)}}),i},n.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,r=(this.directed,{});Object.keys(e).forEach(function(i){var a=e[i],s=a.nodeMap;a.nodes.forEach(function(u){t.findForwardRootEdges(a,u).forEach(function(l){var d=s[l.to],v=u.label+"-"+l.label+"-"+d.label;r[v]||(r[v]={projected:[],nodeLabel1:u.label,edgeLabel:l.label,nodeLabel2:d.label});var k={graphId:i,edge:l,preNode:null};r[v].projected.push(k)})})}),Object.keys(r).forEach(function(i){var a=r[i],s=a.projected,u=a.nodeLabel1,l=a.edgeLabel,d=a.nodeLabel2;t.dfsCode.dfsEdgeList.push(new kt(0,1,u,l,d)),t.subGraphMining(s),t.dfsCode.dfsEdgeList.pop()})}},n}(),Qt=function(n){var t=n.graphs,e=n.directed,r=e!==void 0&&e,i=n.nodeLabelProp,a=i===void 0?"cluster":i,s=n.edgeLabelProp,u=s===void 0?"cluster":s,l=function(F,G,V,q){var $={};return Object.keys(F).forEach(function(ve,de){var me=F[ve],Ie=new dt(de,!0,G),Ee={};me.nodes.forEach(function(Pe,Ze){Ie.addNode(Ze,Pe[V]),Ee[Pe.id]=Ze}),me.edges.forEach(function(Pe,Ze){var it=Ee[Pe.source],ct=Ee[Pe.target];Ie.addEdge(-1,it,ct,Pe[q])}),Ie&&Ie.getNodeNum()&&($[Ie.id]=Ie)}),$}(t,r,a,u),d=n.minSupport,v=n.maxNodeNum,k=n.minNodeNum,T=n.verbose,I=n.top,j=new Kt({graphs:l,minSupport:d,maxNodeNum:v,minNodeNum:k,top:I,verbose:T,directed:r});return j.run(),function(F,G,V){var q=[];return F.forEach(function($){var ve={nodes:[],edges:[]};$.nodes.forEach(function(de){var me;ve.nodes.push(((me={id:""+de.id})[G]=de.label,me))}),$.edges.forEach(function(de){var me;ve.edges.push(((me={source:""+de.from,target:""+de.to})[V]=de.label,me))}),q.push(ve)}),q}(j.frequentSubgraphs,a,u)};function tr(n){return(tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var nr=function(n,t,e,r){e===void 0&&(e="cluster"),r===void 0&&(r=2);var i=[],a=n.nodes;return t.forEach(function(s,u){i.push(Mr(a,s,u,e,r))}),i},Mr=function(n,t,e,r,i){var a=[e],s=[],u={};return t.forEach(function(l,d){if(l<=i&&e!==d){a.push(d),s.push(n[d]);var v=n[d][r];u[v]?(u[v].count++,u[v].dists.push(l)):u[v]={count:1,dists:[l]}}}),Object.keys(u).forEach(function(l){u[l].dists=u[l].dists.sort(function(d,v){return d-v})}),{nodeIdx:e,nodeId:n[e].id,nodeIdxs:a,neighbors:s,neighborNum:a.length-1,nodeLabelCountMap:u}},ar=function(n,t,e,r){var i=e.nodes;return r||(r={}),Object.keys(n).forEach(function(a){var s,u;if(!r||!r[a]){r[a]={nodes:[],edges:[]};var l=n[a],d=(s=t[l.start])===null||s===void 0?void 0:s.nodeIdxs,v=(u=t[l.end])===null||u===void 0?void 0:u.nodeIdxs;if(d&&v){var k=new Set(v),T=d.filter(function(V){return k.has(V)});if(T&&T.length){for(var I={},j=T.length,F=0;F<j;F++){var G=i[T[F]];r[a].nodes.push(G),I[G.id]=!0}e.edges.forEach(function(V){I[V.source]&&I[V.target]&&r[a].edges.push(V)})}}}}),r},yr=function(n,t,e,r){var i={};n.nodes.forEach(function(s){i[s.id]=s});var a=0;return n.edges.forEach(function(s){var u=i[s.source][e],l=i[s.target][e],d=t.nodes[0][e],v=t.nodes[1][e],k=t.edges[0][r];s[r]===k&&(u===d&&l===v||u===v&&l===d)&&a++}),a},mr=function(n,t){var e={},r={};return n.forEach(function(i,a){e[i.id]={idx:a,node:i,degree:0};var s=i[t];r[s]||(r[s]=[]),r[s].push(i)}),{nodeMap:e,nodeLabelMap:r}},Rr=function(n,t,e){var r={},i={};return n.forEach(function(a,s){r[""+Y]={idx:s,edge:a};var u=a[t];i[u]||(i[u]=[]),i[u].push(a);var l=e[a.source];l&&l.degree++;var d=e[a.target];d&&d.degree++}),{edgeMap:r,edgeLabelMap:i}},pr=function(n,t,e){var r=t.length,i={};return t.forEach(function(a,s){for(var u=e?0:s+1,l=n[s].id,d=u;d<r;d++)if(s!==d){var v=n[d].id,k=a[d];i[l+"-"+v]=k,e||(i[v+"-"+l]=k)}}),i},xr=function(n,t,e,r,i,a,s){if(e===void 0&&(e=!1),a===void 0&&(a="cluster"),s===void 0&&(s="cluster"),n&&n.nodes){var u=n.nodes.length;if(u){var l=ie(n,e),d=ie(t,e),v=pr(n.nodes,l,e),k=pr(t.nodes,d,e),T=mr(n.nodes,a),I=T.nodeMap,j=T.nodeLabelMap,F=mr(t.nodes,a),G=F.nodeMap,V=F.nodeLabelMap;Rr(n.edges,s,I);var q=Rr(t.edges,s,G).edgeLabelMap;i||(i=Math.max.apply(Math,Object(m.__spreadArray)(Object(m.__spreadArray)([],d[0]),[2]))),r||(r=i);var $=nr(n,l,a,r),ve=nr(t,d,a,r),de=function(Sr,jr,_r,un,hr){var qr=Math.ceil(_r/jr),en={},Yr=0;return un.forEach(function(Cr,Tr){for(var Zr=0,Tn=0,tn=Cr.nodeIdxs,bi=Cr.neighborNum-1;Zr<qr;){for(var cn=tn[1+Math.floor(Math.random()*bi)],Wr=0;(en[Tr+"-"+cn]||en[cn+"-"+Tr])&&(cn=Math.floor(Math.random()*jr),!(++Wr>2*jr)););if(Wr<2*jr&&(en[Tr+"-"+cn]={start:Tr,end:cn,distance:hr[Tr][cn]},Zr++,++Yr>=_r))return en;if(++Tn>2*jr)break}Zr<qr&&(qr=(qr+(qr-Zr))/(jr-Tr-1))}),en}(0,u,Math.min(100,u*(u-1)/2),ve,l),me=ar(de,$,n),Ie=Qt({graphs:me,nodeLabelProp:a,edgeLabelProp:s,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:e}).slice(0,10),Ee=Ie.length,Pe=[];Ie.forEach(function(Sr,jr){Pe[jr]={},Object.keys(me).forEach(function(_r){var un=me[_r],hr=yr(un,Sr,a,s);Pe[jr][_r]=hr})});var Ze=function(Sr,jr,_r){for(var un=1/0,hr=0,qr=function(Yr){var Cr=Sr[Yr],Tr=Object.keys(Cr).sort(function(Wr,An){return Cr[Wr]-Cr[An]}),Zr=[];Tr.forEach(function(Wr,An){Zr[An%10]||(Zr[An%10]={graphs:[],totalCount:0,aveCount:0}),Zr[An%10].graphs.push(Wr),Zr[An%10].totalCount+=Cr[Wr]});var Tn=0,tn=[];Zr.forEach(function(Wr){var An=Wr.totalCount/Wr.graphs.length;Wr.aveCount=An,tn.push(An);var Zn=0,En=Wr.length;Wr.graphs.forEach(function(Si,Wo){var wo=Cr[Si];Wr.graphs.forEach(function(no,wr){Wo!==wr&&(Zn+=Math.abs(wo-Cr[no]))})}),Tn+=Zn/=En*(En-1)/2}),Tn/=Zr.length;var bi=0;tn.forEach(function(Wr,An){tn.forEach(function(Zn,En){An!==En&&(bi+=Math.abs(Wr-Zn))}),bi/=tn.length*(tn.length-1)/2});var cn=bi-Tn;un<cn&&(un=cn,hr=Yr)},en=0;en<jr;en++)qr(en);return{structure:_r[hr],structureCountMap:Sr[hr]}}(Pe,Ee,Ie),it=Ze.structure,ct=Ze.structureCountMap,st=t.nodes[0],jt=st[a],gt=j[jt],Pt={},Rt={},Zt={},Ct={},Vt={};Object.keys(V).forEach(function(Sr,jr){Vt[Sr]=[];var _r=-1/0,un=V[Sr],hr={};un.forEach(function(Cr){var Tr=k[st.id+"-"+Cr.id];Tr&&Vt[Sr].push(Tr),_r<Tr&&(_r=Tr),hr[st.id+"-"+Cr.id]={start:0,end:G[Cr.id].idx,distance:Tr}}),Vt[Sr]=Vt[Sr].sort(function(Cr,Tr){return Cr-Tr}),Rt=ar(hr,ve,t,Rt);var qr=[];if(Object.keys(hr).forEach(function(Cr){if(Zt[Cr])qr.push(Zt[Cr]);else{var Tr=Rt[Cr];Zt[Cr]=yr(Tr,it,a,s),qr.push(Zt[Cr])}}),qr=qr.sort(function(Cr,Tr){return Tr-Cr}),Ct[st.id+"-"+Sr]=qr,Sr!==jt)for(var en=function(Cr){var Tr=gt[Cr],Zr=$[I[Tr.id].idx],Tn=Zr.nodeLabelCountMap[Sr],tn=V[Sr].length;if(!Tn||Tn.count<tn)return gt.splice(Cr,1),"continue";for(var bi=!1,cn=0;cn<tn;cn++)if(Tn.dists[cn]>Vt[Sr][cn]){bi=!0;break}if(bi)return gt.splice(Cr,1),"continue";var Wr={};Zr.neighbors.forEach(function(En){var Si=v[Tr.id+"-"+En.id];Wr[Tr.id+"-"+En.id]={start:I[Tr.id].idx,end:I[En.id].idx,distance:Si}}),me=ar(Wr,$,n,me);var An=[];Object.keys(Wr).forEach(function(En){if(ct[En])An.push(ct[En]);else{var Si=me[En];ct[En]=yr(Si,it,a,s),An.push(ct[En])}}),An=An.sort(function(En,Si){return Si-En});var Zn=!1;for(cn=0;cn<tn;cn++)if(An[cn]<qr[cn]){Zn=!0;break}return Zn?(gt.splice(Cr,1),"continue"):void 0},Yr=gt.length-1;Yr>=0;Yr--)en(Yr)});var Dt=[];gt.forEach(function(Sr){for(var jr=I[Sr.id].idx,_r=Mr(n.nodes,l[jr],jr,a,i).neighbors,un=_r.length,hr=!1,qr=function(Cr){if(_r.length+1<t.nodes.length)return hr=!0,{value:void 0};var Tr=_r[Cr],Zr=Tr[a];if(!V[Zr]||!V[Zr].length)return _r.splice(Cr,1),"continue";var Tn=Sr.id+"-"+Tr.id;if(!Vt[Zr]||!Vt[Zr].length)return _r.splice(Cr,1),"continue";var tn=v[Tn];if(tn>Vt[Zr][Vt[Zr].length-1])return _r.splice(Cr,1),"continue";var bi=ct[Tn]?ct[Tn]:function(An,Zn,En,Si,Wo,wo,no,wr,vn,$n,_n){var Ni,go=Zn.id+"-"+En.id;if($n&&$n[go])return $n[go];var xi=_n?_n[go]:void 0;if(!xi){var _o=((Ni={})[go]={start:Si[Zn.id].idx,end:Si[En.id].idx,distance:Wo},Ni);xi=(_n=ar(_o,wo,An,_n))[go]}return yr(xi,no,wr,vn)}(n,Sr,Tr,I,tn,$,it,a,s,ct,me),cn=st.id+"-"+Zr;if(bi<Ct[cn][Ct[cn].length-1])return _r.splice(Cr,1),"continue";var Wr=Pt[Zr];return Wr===void 0&&(Wr=1/0,V[Zr].forEach(function(An){var Zn=G[An.id].degree;Wr>Zn&&(Wr=Zn)}),Pt[Zr]=Wr),I[Tr.id].degree<Wr?(_r.splice(Cr,1),"continue"):void 0},en=un-1;en>=0;en--){var Yr=qr(en);if(tr(Yr)==="object")return Yr.value}hr||Dt.push({nodes:[Sr].concat(_r)})});var qt=X(t,st.id,!1).length,$t={};e?(Object.keys(qt).forEach(function(Sr){var jr=G[Sr].node[a];$t[jr]?$t[jr].push(qt[Sr]):$t[jr]=[qt[Sr]]}),Object.keys($t).forEach(function(Sr){$t[Sr].sort(function(jr,_r){return jr-_r})})):$t=Vt;for(var Gt=function(Sr){var jr=Dt[Sr],_r=jr.nodes[0],un={},hr={};jr.nodes.forEach(function(vn,$n){hr[vn.id]={idx:$n,node:vn,degree:0};var _n=vn[a];un[_n]?un[_n]++:un[_n]=1});var qr=[],en={};n.edges.forEach(function(vn){hr[vn.source]&&hr[vn.target]&&(qr.push(vn),en[vn[s]]?en[vn[s]]++:en[vn[s]]=1,hr[vn.source].degree++,hr[vn.target].degree++)});for(var Yr=Object.keys(q).length,Cr=!1,Tr=0;Tr<Yr;Tr++){var Zr=Object.keys(q)[Tr];if(!en[Zr]||en[Zr]<q[Zr].length){Cr=!0;break}}if(Cr)return Dt.splice(Sr,1),"continue";var Tn=qr.length;if(Tn<t.edges.length)return Dt.splice(Sr,1),"break";var tn=!1,bi=function(vn){var $n=qr[vn],_n=$n[s],Ni=q[_n];if(!Ni||!Ni.length)return en[_n]--,Ni&&en[_n]<Ni.length?(tn=!0,"break"):(qr.splice(vn,1),hr[$n.source].degree--,hr[$n.target].degree--,"continue");var go=hr[$n.source].node[a],xi=hr[$n.target].node[a],_o=!1;return Ni.forEach(function(Ca){var Ta=G[Ca.source].node,So=G[Ca.target].node;Ta[a]===go&&So[a]===xi&&(_o=!0),e||Ta[a]!==xi||So[a]!==go||(_o=!0)}),_o?void 0:(en[_n]--,Ni&&en[_n]<Ni.length?(tn=!0,"break"):(qr.splice(vn,1),hr[$n.source].degree--,hr[$n.target].degree--,"continue"))};for(Tr=Tn-1;Tr>=0&&bi(Tr)!=="break";Tr--);if(tn)return Dt.splice(Sr,1),"continue";jr.edges=qr;var cn=X(jr,jr.nodes[0].id,!1).length;if(Object.keys(cn).reverse().forEach(function(vn){if(vn!==jr.nodes[0].id&&!tn){if(cn[vn]===1/0){var $n=hr[vn].node[a];if(un[$n]--,un[$n]<V[$n].length)return void(tn=!0);var _n=jr.nodes.indexOf(hr[vn].node);return jr.nodes.splice(_n,1),void(hr[vn]=void 0)}var Ni=I[vn].node[a];if(!$t[Ni]||!$t[Ni].length||cn[vn]>$t[Ni][$t[Ni].length-1]){if($n=hr[vn].node[a],un[$n]--,un[$n]<V[$n].length)return void(tn=!0);_n=jr.nodes.indexOf(hr[vn].node),jr.nodes.splice(_n,1),hr[vn]=void 0}}}),tn)return Dt.splice(Sr,1),"continue";for(var Wr=!0,An=0;Wr&&!tn;){if(Wr=!1,hr[_r.id].degree<G[st.id].degree){tn=!0;break}if(un[_r[a]]<V[_r[a]].length){tn=!0;break}for(var Zn=jr.nodes.length-1;Zn>=0;Zn--){var En=jr.nodes[Zn],Si=hr[En.id].degree,Wo=En[a];if(Si<Pt[Wo]){if(un[En[a]]--,un[En[a]]<V[En[a]].length){tn=!0;break}jr.nodes.splice(Zn,1),hr[En.id]=void 0,Wr=!0}}if(tn||!Wr&&An!==0)break;for(var wo=(Tn=qr.length)-1;wo>=0;wo--){var no=qr[wo];if(!hr[no.source]||!hr[no.target]){qr.splice(wo,1);var wr=no[s];if(en[wr]--,hr[no.source]&&hr[no.source].degree--,hr[no.target]&&hr[no.target].degree--,q[wr]&&en[wr]<q[wr].length){tn=!0;break}Wr=!0}}An++}return tn||tn||jr.nodes.length<t.nodes.length||qr.length<t.edges.length?(Dt.splice(Sr,1),"continue"):void 0},lr=Dt.length-1;lr>=0&&Gt(lr)!=="break";lr--);var Br=Dt.length,wn=function(Sr){var jr=Dt[Sr],_r={};jr.edges.forEach(function(qr){var en=qr.source+"-"+qr.target+"-"+qr.label;_r[en]?_r[en]++:_r[en]=1});for(var un=function(qr){var en=Dt[qr],Yr={};en.edges.forEach(function(Tr){var Zr=Tr.source+"-"+Tr.target+"-"+Tr.label;Yr[Zr]?Yr[Zr]++:Yr[Zr]=1});var Cr=!0;Object.keys(Yr).length!==Object.keys(_r).length?Cr=!1:Object.keys(_r).forEach(function(Tr){Yr[Tr]!==_r[Tr]&&(Cr=!1)}),Cr&&Dt.splice(qr,1)},hr=Br-1;hr>Sr;hr--)un(hr);Br=Dt.length};for(lr=0;lr<=Br-1;lr++)wn(lr);return Dt}}},dr=function(){function n(t){t===void 0&&(t=10),this.linkedList=new ae,this.maxStep=t}return Object.defineProperty(n.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},n.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},n.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},n.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},n.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},n.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},n}(),Gr=U,Lr={getAdjMatrix:z,breadthFirstSearch:Ce,connectedComponent:he,getDegree:W,getInDegree:le,getOutDegree:Oe,detectCycle:U,detectDirectedCycle:Gr,detectAllCycles:te,detectAllDirectedCycle:ee,detectAllUndirectedCycle:se,depthFirstSearch:Te,dijkstra:X,findAllPath:ne,findShortestPath:J,floydWarshall:ie,labelPropagation:Z,louvain:_e,minimumSpanningTree:Re,pageRank:Ke,getNeighbors:xe,Stack:dr,GADDI:xr},pn=L.a.transform,Ur=function(n){return function(t,e){return t[n]-e[n]}},Nr=function(n,t,e){return n>=t&&n<=e},Dr=function(n,t,e,r){var i=e.x-n.x,a=e.y-n.y,s=t.x-n.x,u=t.y-n.y,l=r.x-e.x,d=r.y-e.y,v=s*d-u*l,k=1/v;if(v*v>1e-4*(s*s+u*u)*(l*l+d*d)){var T=(i*d-a*l)*k,I=(i*u-a*s)*k;return Nr(T,0,1)&&Nr(I,0,1)?{x:n.x+T*s,y:n.y+T*u}:null}return null},rn=function(n,t){var e=n.x,r=n.y,i=n.width,a=n.height,s=[],u={x:e+i/2,y:r+a/2};s.push({x:e,y:r}),s.push({x:e+i,y:r}),s.push({x:e+i,y:r+a}),s.push({x:e,y:r+a}),s.push({x:e,y:r});for(var l=null,d=1;d<s.length&&!(l=Dr(s[d-1],s[d],u,t));d++);return l},Ir=function(n,t){var e=n.x,r=n.y,i=n.r,a=t.x-e,s=t.y-r;if(Math.sqrt(a*a+s*s)<i)return null;var u=Math.sign(a),l=Math.sign(s),d=Math.atan(s/a);return{x:e+Math.abs(i*Math.cos(d))*u,y:r+Math.abs(i*Math.sin(d))*l}},On=function(n,t){var e=n.rx,r=n.ry,i=n.x,a=n.y,s=t.x-i,u=t.y-a,l=Math.atan2(u/r,s/e);return l<0&&(l+=2*Math.PI),{x:i+e*Math.cos(l),y:a+r*Math.sin(l)}},In=function(n,t,e){e===void 0&&(e=1);var r=[n.x,n.y,e];return t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]),L.d.transformMat3(r,r,t),{x:r[0],y:r[1]}},Dn=function(n,t,e){e===void 0&&(e=1),t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]);var r=L.b.invert([1,0,0,0,1,0,0,0,1],t);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[n.x,n.y,e];return L.d.transformMat3(i,i,r),{x:i[0],y:i[1]}},Rn=function(n,t,e){var r=n.x-t.x,i=n.y-t.y,a=n.x-e.x,s=n.y-e.y,u=(n.x*n.x-t.x*t.x-t.y*t.y+n.y*n.y)/2,l=(n.x*n.x-e.x*e.x-e.y*e.y+n.y*n.y)/2,d=i*a-r*s;return{x:-(s*u-i*l)/d,y:-(r*l-a*u)/d}},gn=function(n,t){var e=n.x-t.x,r=n.y-t.y;return Math.sqrt(e*e+r*r)},Er=function(n,t){var e=[];return n.forEach(function(r){var i=[];r.forEach(function(a){i.push(a*t)}),e.push(i)}),e},ln=function(n){for(var t=[],e=n.length,r=0;r<e;r+=1){t[r]=[];for(var i=0;i<e;i+=1)r===i?t[r][i]=0:n[r][i]!==0&&n[r][i]?t[r][i]=n[r][i]:t[r][i]=1/0}for(var a=0;a<e;a+=1)for(r=0;r<e;r+=1)for(i=0;i<e;i+=1)t[r][i]>t[r][a]+t[a][i]&&(t[r][i]=t[r][a]+t[a][i]);return t},yn=function(n,t){var e=n.nodes,r=n.edges,i=[],a={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,u){a[s.id]=u,i.push([])}),r&&r.forEach(function(s){var u=s.source,l=s.target,d=a[u],v=a[l];i[d][v]=1,t||(i[v][d]=1)}),i},mn=function(n,t){n.translate(t.x,t.y)},Qn=function(n,t,e,r){r===void 0&&(r={duration:500});var i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=n.getCanvasBBox(),s=t.x-a.minX,u=t.y-a.minY;if(e){var l=s*i[0],d=u*i[4],v=0,k=0,T=0,I=0;n.animate(function(F){return i=pn(i,[["t",(T=l*F)-v,(I=d*F)-k]]),v=T,k=I,{matrix:i}},r)}else{var j=pn(i,[["t",s,u]]);n.setMatrix(j)}},Un=function(n,t){var e=n.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var r=t;Object(p.isArray)(t)||(r=[t,t]),Object(p.isArray)(t)&&t.length===1&&(r=[t[0],t[0]]),e=pn(e,[["s",r[0],r[1]]]),n.setMatrix(e)},ri=function(n,t){var e=n.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]),e=pn(e,[["r",t]]),n.setMatrix(e)},Oi=function(n,t,e){for(var r=[],i=0;i<n;i++)r[i]=0;return e.forEach(function(a){a.source&&(r[t[a.source]]+=1),a.target&&(r[t[a.target]]+=1)}),r};function ni(n,t,e){return(e[0]-n[0])*(t[1]-n[1])==(t[0]-n[0])*(e[1]-n[1])&&Math.min(n[0],t[0])<=e[0]&&e[0]<=Math.max(n[0],t[0])&&Math.min(n[1],t[1])<=e[1]&&e[1]<=Math.max(n[1],t[1])}var Bn=function(n,t,e){var r=!1,i=n.length;function a(d){return Math.abs(d)<1e-6?0:d<0?-1:1}if(i<=2)return!1;for(var s=0;s<i;s++){var u=n[s],l=n[(s+1)%i];if(ni(u,l,[t,e]))return!0;a(u[1]-e)>0!=a(l[1]-e)>0&&a(t-(e-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(r=!r)}return r},wi=function(n,t){return!(t.minX>n.maxX||t.maxX<n.minX||t.minY>n.maxY||t.maxY<n.minY)},Mi=function(n,t){var e=function(v){var k=v.map(function(I){return I[0]}),T=v.map(function(I){return I[1]});return{minX:Math.min.apply(null,k),maxX:Math.max.apply(null,k),minY:Math.min.apply(null,T),maxY:Math.max.apply(null,T)}},r=function(v){for(var k=[],T=v.length,I=0;I<T-1;I++){var j=v[I],F=v[I+1];k.push({from:{x:j[0],y:j[1]},to:{x:F[0],y:F[1]}})}if(k.length>1){var G=v[0],V=v[T-1];k.push({from:{x:V[0],y:V[1]},to:{x:G[0],y:G[1]}})}return k};if(n.length<2||t.length<2)return!1;var i=e(n),a=e(t);if(!wi(i,a))return!1;var s=!1;if(Object(p.each)(t,function(v){if(Bn(n,v[0],v[1]))return s=!0,!1}),s||(Object(p.each)(n,function(v){if(Bn(t,v[0],v[1]))return s=!0,!1}),s))return!0;var u=r(n),l=r(t),d=!1;return Object(p.each)(l,function(v){if(function(k,T){var I=!1;return Object(p.each)(k,function(j){if(Dr(j.from,j.to,T.from,T.to))return I=!0,!1}),I}(u,v))return d=!0,!1}),d},Wn=function(){function n(t,e,r,i){this.x1=t,this.y1=e,this.x2=r,this.y2=i}return n.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:r,maxY:i,width:r-t,height:i-e}},n}(),ii=function(n,t){return{top:[n.minX,n.minY,n.maxX,n.minY],left:[n.minX,n.minY,n.minX,n.maxY],bottom:[n.minX,n.maxY,n.maxX,n.maxY],right:[n.maxX,n.minY,n.maxX,n.maxY]}[t]},Jn=function(n,t){var e=(t.x2-t.x1)*(n.y1-t.y1)-(t.y2-t.y1)*(n.x1-t.x1),r=(n.x2-n.x1)*(n.y1-t.y1)-(n.y2-n.y1)*(n.x1-t.x1),i=(t.y2-t.y1)*(n.x2-n.x1)-(t.x2-t.x1)*(n.y2-n.y1);if(i){var a=e/i,s=r/i;if(a>=0&&a<=1&&s>=0&&s<=1)return a}return Number.POSITIVE_INFINITY},hi=function(n,t){for(var e=["top","left","bottom","right"],r=n.getBBox(),i=0,a=[],s=0;s<4;s++){var u=ii(r,e[s]),l=u[0],d=u[1],v=u[2],k=u[3];a[s]=Dr({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:l,y:d},{x:v,y:k}),a[s]&&(i+=1)}return[a,i]},Vn=function(n,t){for(var e=["top","left","bottom","right"],r=n.getBBox(),i=Number.POSITIVE_INFINITY,a=0,s=0;s<4;s++){var u=ii(r,e[s]),l=u[0],d=u[1],v=u[2],k=u[3],T=Jn(t,new Wn(l,d,v,k));(T=Math.abs(T-.5))>=0&&T<=1&&(a+=1,i=T<i?T:i)}return a===0?-1:i},oi=function(n){var t=0,e=0;if(n.length>0){for(var r=0,i=n;r<i.length;r++){var a=i[r];t+=a.x,e+=a.y}t/=n.length,e/=n.length}return{x:t,y:e}},di=function(n,t){return Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)},_i=function(n,t){var e,r=t.x1,i=t.y1,a=t.x2-r,s=t.y2-i,u=n.x-r,l=n.y-i,d=u*a+l*s;e=d<=0||(d=(u=a-u)*a+(l=s-l)*s)<=0?0:d*d/(a*a+s*s);var v=u*u+l*l-e;return v<0&&(v=0),v},Xn=function(n,t,e){return e===void 0&&(e=.001),Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)<Math.pow(e,2)},Yn=function(n,t){var e=n.x<t.x,r=n.x>t.x+t.width,i=n.y>t.y+t.height,a=n.y<t.y;if(!(e||r||i||a))return 0;if(i&&!e&&!r)return Math.pow(t.y+t.height-n.y,2);if(a&&!e&&!r)return Math.pow(n.y-t.y,2);if(e&&!i&&!a)return Math.pow(t.x-n.x,2);if(r&&!i&&!a)return Math.pow(t.x+t.width-n.x,2);var s=Math.min(Math.abs(t.x-n.x),Math.abs(t.x+t.width-n.x)),u=Math.min(Math.abs(t.y-n.y),Math.abs(t.y+t.height-n.y));return s*s+u*u},ki=function(n,t){var e=n[0],r=n[1],i=n[2],a=n[3],s=t.x,u=t.y,l=[i-e,a-r];if(L.c.exactEquals(l,[0,0]))return NaN;var d=[-l[1],l[0]];L.c.normalize(d,d);var v=[s-e,u-r];return Math.abs(L.c.dot(v,d))},Gi="rgb(253, 253, 253)",Hn="rgb(95, 149, 255)",oo="rgb(95, 149, 255)",ci="rgb(247, 250, 255)",li="rgb(95, 149, 255)",ao="rgb(224, 224, 224)",Zi="rgb(95, 149, 255)",$i="rgb(224, 224, 224)",vo="rgb(95, 149, 255)",ir={version:"0.3.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Hn,fill:"rgb(239, 244, 255)"},size:20,color:Hn,linkPoints:{size:8,lineWidth:1,fill:ci,stroke:oo}},nodeStateStyles:{active:{fill:ci,stroke:oo,lineWidth:2,shadowColor:Hn,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:li,lineWidth:4,shadowColor:li,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ao,lineAppendWidth:2},color:ao},edgeStateStyles:{active:{stroke:"rgb(95, 149, 255)",lineWidth:1},selected:{stroke:Zi,lineWidth:2,shadowColor:Zi,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"rgb(95, 149, 255)",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Gi,lineWidth:1,stroke:$i,r:5,width:20,height:10},size:[20,5],color:$i,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:"rgb(95, 149, 255)",lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:vo,lineWidth:2,fill:Gi,shadowColor:vo,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:Gi,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:Gi,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},We={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ne=Math.PI,He=Math.sin,ft=Math.cos,Tt=He(Ne/8),Ht=ft(Ne/8),vr=function(n,t){var e=n.getBBox(),r={x:e.minX,y:e.minY},i={x:e.maxX,y:e.maxY};if(t){var a=t.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r=In(r,a),i=In(i,a)}var s=r.x,u=r.y,l=i.x,d=i.y;return{x:s,y:u,minX:s,minY:u,maxX:l,maxY:d,width:l-s,height:d-u}},Be=function(n){var t=n.sourceNode||n.targetNode,e=t.get("group").getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var r=t.getKeyShape().getBBox(),i=n.loopCfg||{},a=i.dist||2*Math.max(r.width,r.height),s=i.position||ir.defaultLoopPosition,u=[e[6],e[7]],l=[n.startPoint.x,n.startPoint.y],d=[n.endPoint.x,n.endPoint.y],v=r.height/2,k=r.height/2,T=v*Tt,I=v*Ht,j=k*Tt,F=k*Ht;if(l[0]===d[0]&&l[1]===d[1]){switch(s){case"top":l=[u[0]-T,u[1]-I],d=[u[0]+j,u[1]-F];break;case"top-right":v=r.height/2,k=r.width/2,l=[u[0]+(T=v*Tt),u[1]-(I=v*Ht)],d=[u[0]+(F=k*Ht),u[1]-(j=k*Tt)];break;case"right":v=r.width/2,k=r.width/2,l=[u[0]+(I=v*Ht),u[1]-(T=v*Tt)],d=[u[0]+(F=k*Ht),u[1]+(j=k*Tt)];break;case"bottom-right":v=r.width/2,k=r.height/2,l=[u[0]+(I=v*Ht),u[1]+(T=v*Tt)],d=[u[0]+(j=k*Tt),u[1]+(F=k*Ht)];break;case"bottom":v=r.height/2,k=r.height/2,l=[u[0]+(T=v*Tt),u[1]+(I=v*Ht)],d=[u[0]-(j=k*Tt),u[1]+(F=k*Ht)];break;case"bottom-left":v=r.height/2,k=r.width/2,l=[u[0]-(T=v*Tt),u[1]+(I=v*Ht)],d=[u[0]-(F=k*Ht),u[1]+(j=k*Tt)];break;case"left":v=r.width/2,k=r.width/2,l=[u[0]-(I=v*Ht),u[1]+(T=v*Tt)],d=[u[0]-(F=k*Ht),u[1]-(j=k*Tt)];break;case"top-left":v=r.width/2,k=r.height/2,l=[u[0]-(I=v*Ht),u[1]-(T=v*Tt)],d=[u[0]-(j=k*Tt),u[1]-(F=k*Ht)];break;default:v=r.width/2,k=r.width/2,l=[u[0]-(T=v*Tt),u[1]-(I=v*Ht)],d=[u[0]+(j=k*Tt),u[1]-(F=k*Ht)]}if(i.clockwise===!1){var G=[l[0],l[1]];l=[d[0],d[1]],d=[G[0],G[1]]}}var V=[l[0]-u[0],l[1]-u[1]],q=(v+a)/v,$=(k+a)/k;i.clockwise===!1&&(q=(k+a)/k,$=(v+a)/v);var ve=L.c.scale([0,0],V,q),de=[u[0]+ve[0],u[1]+ve[1]],me=[d[0]-u[0],d[1]-u[1]],Ie=L.c.scale([0,0],me,$),Ee=[u[0]+Ie[0],u[1]+Ie[1]];return n.startPoint={x:l[0],y:l[1]},n.endPoint={x:d[0],y:d[1]},n.controlPoints=[{x:de[0],y:de[1]},{x:Ee[0],y:Ee[1]}],n},ut=function(n,t,e,r,i){var a=[],s=n==null?void 0:n.getPoint(t);if(!s)return{x:0,y:0,angle:0};if(t<1e-4)a=n.getStartTangent().reverse();else if(t>.9999)a=n.getEndTangent();else{var u=n==null?void 0:n.getPoint(t+1e-4);a.push([s.x,s.y]),a.push([u.x,u.y])}var l=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(l<0&&(l+=2*Ne),e&&(s.x+=ft(l)*e,s.y+=He(l)*e),r){var d=l-Ne/2;l>.5*Ne&&l<1.5*Ne&&(d-=Ne),s.x+=ft(d)*r,s.y+=He(d)*r}var v={x:s.x,y:s.y,angle:l};return i?(l>.5*Ne&&l<1.5*Ne&&(l-=Ne),Object(m.__assign)({rotate:l},v)):v},bt=function n(t,e){if(e(t)===!1)return!1;if(t&&t.children){for(var r=t.children.length-1;r>=0;r--)if(!n(t.children[r],e))return!1}return!0},Ft=function(n,t){typeof t=="function"&&bt(n,t)},we=function(n,t){typeof t=="function"&&function e(r,i){if(r&&r.children){for(var a=r.children.length-1;a>=0;a--)if(!e(r.children[a],i))return}return i(r)!==!1}(n,t)},ze=function(n,t){return t*(We[n]||1)},Qe=function(n,t){var e=0,r=new RegExp("[\u4E00-\u9FA5]+");return n.split("").forEach(function(i){r.test(i)?e+=t:e+=ze(i,t)}),[e,t]},lt=function(n,t){var e=[],r={},i={};n.forEach(function(u){i[u.id]=u}),n.forEach(function(u,l){var d=Object(p.clone)(u);d.itemType="combo",d.children=void 0,d.parentId===d.id?(console.warn("The parentId for combo "+d.id+" can not be the same as the combo's id"),delete d.parentId):d.parentId&&!i[d.parentId]&&(console.warn("The parent combo for combo "+d.id+" does not exist!"),delete d.parentId);var v=r[d.id];if(v){if(d.children=v.children,r[d.id]=d,!(v=d).parentId)return void e.push(v);var k=r[v.parentId];if(k)k.children?k.children.push(d):k.children=[d];else{var T={id:v.parentId,children:[v]};r[v.parentId]=T,r[d.id]=d}}else if(Object(p.isString)(u.parentId)){var I=r[u.parentId];if(I)I.children?I.children.push(d):I.children=[d],r[d.id]=d;else{var j={id:u.parentId,children:[d]};r[j.id]=j,r[d.id]=d}}else e.push(d),r[d.id]=d});var a={};(t||[]).forEach(function(u){a[u.id]=u;var l=r[u.comboId];if(l){var d={id:u.id,comboId:u.comboId};l.children?l.children.push(d):l.children=[d],d.itemType="node",r[u.id]=d}});var s=0;return e.forEach(function(u){u.depth=s+10,bt(u,function(l){var d,v=r[l.id].itemType;d=v==="node"?r[l.comboId]:r[l.parentId],l.depth=d&&v==="node"?s+1:s+10,s<l.depth&&(s=l.depth);var k=a[l.id];return k&&(k.depth=l.depth),!0})}),e},vt=function(n,t,e){var r,i=n,a={root:{children:n}},s=!1,u="root";(n||[]).forEach(function(T){if(!s)return T.id===t?(r=T,T.itemType==="combo"?r.parentId=e:r.comboId=e,void(s=!0)):void Ft(T,function(I){return a[I.id]={children:I.children},i=a[I.parentId||I.comboId||"root"].children,!I||!I.removed&&t!==I.id||!i||(u=I.parentId||I.comboId||"root",r=I,I.itemType==="combo"?r.parentId=e:r.comboId=e,s=!0,!1)})});var l=(i=a[u].children)?i.indexOf(r):-1;if(l>-1&&i.splice(l,1),s||(r={id:t,itemType:"node",comboId:e},a[t]={children:void 0}),t){var d=!1;if(e){var v=0;(n||[]).forEach(function(T){d||Ft(T,function(I){return e!==I.id||(d=!0,I.children?I.children.push(r):I.children=[r],v=I.depth,r.itemType==="node"?r.depth=v+2:r.depth=v+1,!1)})})}else e&&d||r.itemType==="node"||n.push(r);var k=r.depth;Ft(r,function(T){return T.itemType==="node"?k+=2:k+=1,T.depth=k,!0})}return n},wt=function(n,t){var e={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return n&&n.length!==0&&(n.forEach(function(r){var i=t.findById(r.id);if(i&&i.isVisible()){i.set("bboxCanvasCache",void 0);var a=i.getCanvasBBox();a.x&&e.minX>a.minX&&(e.minX=a.minX),a.y&&e.minY>a.minY&&(e.minY=a.minY),a.x&&e.maxX<a.maxX&&(e.maxX=a.maxX),a.y&&e.maxY<a.maxY&&(e.maxY=a.maxY)}}),e.x=(e.minX+e.maxX)/2,e.y=(e.minY+e.maxY)/2,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,Object.keys(e).forEach(function(r){e[r]!==1/0&&e[r]!==-1/0||(e[r]=void 0)})),e},Lt=function(n){var t=Object(p.isNumber)(n.x)||Object(p.isNumber)(n.y)||n.type||n.anchorPoints||n.size;return n.style&&(t=t||Object(p.isNumber)(n.style.r)||Object(p.isNumber)(n.style.width)||Object(p.isNumber)(n.style.height)||Object(p.isNumber)(n.style.rx)||Object(p.isNumber)(n.style.ry)),t},Wt=function(n){var t={};return Object.keys(n).forEach(function(e){var r=n[e];if(Object(p.isObject)(r)){var i={};Object.keys(r).forEach(function(a){var s=r[a];(a!=="img"||Object(p.isString)(s))&&(i[a]=Object(p.clone)(s))}),t[e]=i}else t[e]=Object(p.clone)(r)}),t},er=function(n){if(!n)return console.error("G6 Error Tips: the data must be defined"),!1;var t=n.nodes,e=n.edges,r=n.combos,i=r===void 0?[]:r;if(!t&&!e){var a=!0;return Ft(n,function(k){return!!Object(p.isString)(k.id)||(a=!1,!1)}),a}var s=(t||[]).find(function(k){return!Object(p.isString)(k.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+s.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(k){return k.id}),l=i.map(function(k){return k.id}),d=Object(m.__spreadArray)(Object(m.__spreadArray)([],u),l),v=(e||[]).find(function(k){return!d.includes(k.source)||!d.includes(k.target)});return!v||(console.warn("G6 Warning Tips: The source %c"+v.source+"%c or the target %c"+v.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},rr=function(){function n(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return n.prototype.formatModes=function(){var t=this.modes;Object(p.each)(t,function(e){Object(p.each)(e,function(r,i){Object(p.isString)(r)&&(e[i]={type:r})})})},n.prototype.setBehaviors=function(t){var e,r=this.graph,i=this.modes[t],a=[];Object(p.each)(i||[],function(s){var u=C.getBehavior(s.type||s);u&&(e=new u(s))&&(e.bind(r),a.push(e))}),this.currentBehaves=a},n.mergeBehaviors=function(t,e){return Object(p.each)(e,function(r){t.indexOf(r)<0&&(Object(p.isString)(r)&&(r={type:r}),t.push(r))}),t},n.filterBehaviors=function(t,e){var r=[];return t.forEach(function(i){var a="";a=Object(p.isString)(i)?i:i.type,e.indexOf(a)<0&&r.push(i)}),r},n.prototype.setMode=function(t){var e=this.modes,r=this.graph,i=t;e[i]&&(r.emit("beforemodechange",{mode:t}),Object(p.each)(this.currentBehaves,function(a){a.delegate&&a.delegate.remove(),a.unbind(r)}),this.setBehaviors(i),r.emit("aftermodechange",{mode:t}),this.mode=t)},n.prototype.getMode=function(){return this.mode},n.prototype.manipulateBehaviors=function(t,e,r){var i,a=this;if(i=Object(p.isArray)(t)?t:[t],Object(p.isArray)(e))return Object(p.each)(e,function(u){a.modes[u]?a.modes[u]=r?n.mergeBehaviors(a.modes[u]||[],i):n.filterBehaviors(a.modes[u]||[],i):r&&(a.modes[u]=i)}),this;var s=e;return e||(s=this.mode),this.modes[s]||r&&(this.modes[s]=i),this.modes[s]=r?n.mergeBehaviors(this.modes[s]||[],i):n.filterBehaviors(this.modes[s]||[],i),this.setMode(this.mode),this},n.prototype.updateBehavior=function(t,e,r){Object(p.isString)(t)&&(t={type:t});var i=[];if(r&&r!==this.mode&&r!=="default"){if(!(i=this.modes[r])||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var a=i.length;for(u=0;u<a;u++){if((l=i[u]).type===t.type||l===t.type)return l===t.type&&(l={type:l}),Object.assign(l,e),i[u]=l,this;u===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(i=this.currentBehaves)||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var s=i.length,u=0;u<s;u++){var l;if((l=i[u]).type===t.type)return l.updateCfg(e),this;u===s-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},n.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},n}(),sr=function(n){function t(e,r){var i=n.call(this,e,r)||this;return i.item=r.item,i.canvasX=r.canvasX,i.canvasY=r.canvasY,i.wheelDelta=r.wheelDelta,i.detail=r.detail,i}return Object(m.__extends)(t,n),t}(o(21).Event),gr=function(n){return n+"-"+Math.random()+Date.now()},Vr=function(n){var t=0,e=0,r=0,i=0;return Object(p.isNumber)(n)?t=e=r=i=n:Object(p.isString)(n)?t=e=r=i=parseInt(n,10):Object(p.isArray)(n)&&(t=n[0],r=Object(p.isNil)(n[1])?n[0]:n[1],i=Object(p.isNil)(n[2])?n[0]:n[2],e=Object(p.isNil)(n[3])?r:n[3]),[t,r,i,e]},Fr=function(n){var t=new sr(n.type,n);return t.clientX=n.clientX,t.clientY=n.clientY,t.x=n.x,t.y=n.y,t.target=n.target,t.currentTarget=n.currentTarget,t.bubbles=!0,t.item=n.item,t},$r=function(n){if(!n)return!1;for(var t=[1,0,0,0,1,0,0,0,1],e=0;e<9;e++)if(n[e]!==t[e])return!0;return!1},Kr=function(n){return Number.isNaN(Number(n))},jn=function(n){for(var t=1/0,e=-1/0,r=1/0,i=-1/0,a=0;a<n.length;a++){var s=n[a].getBBox(),u=s.minX,l=s.minY,d=s.maxX,v=s.maxY;u<t&&(t=u),l<r&&(r=l),d>e&&(e=d),v>i&&(i=v)}return{x:Math.floor(t),y:Math.floor(r),width:Math.ceil(e)-Math.floor(t),height:Math.ceil(i)-Math.floor(r),minX:t,minY:r,maxX:e,maxY:i}},Cn=function(n,t,e,r,i){t===void 0&&(t=15),e===void 0&&(e="quadratic"),r===void 0&&(r=void 0),i===void 0&&(i=void 0);for(var a=n.length,s=2*t,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},d=[],v={},k=0;k<a;k++){var T=n[k],I=T.source,j=T.target,F=I+"-"+j;if(!d[k]){l[F]||(l[F]=[]),d[k]=!0,l[F].push(T);for(var G=0;G<a;G++)if(k!==G){var V=n[G],q=V.source,$=V.target;d[G]||(I===$&&j===q?(l[F].push(V),d[G]=!0,v[q+"|"+$+"|"+(l[F].length-1)]=!0):I===q&&j===$&&(l[F].push(V),d[G]=!0))}}}for(var ve in l)for(var de=l[ve],me=de.length,Ie=0;Ie<me;Ie++){var Ee=de[Ie];if(Ee.source!==Ee.target)if(me===1&&r&&Ee.source!==Ee.target)Ee.type=r;else{Ee.type=e;var Pe=(Ie%2==0?1:-1)*(v[Ee.source+"|"+Ee.target+"|"+Ie]?-1:1);Ee.curveOffset=me%2==1?Pe*Math.ceil(Ie/2)*s:Pe*(Math.floor(Ie/2)*s+t)}else i&&(Ee.type=i),Ee.loopCfg={position:u[Ie%8],dist:20*Math.floor(Ie/8)+50}}return n},qn=function(){function n(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return n.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,r=this.graph.get("width"),i=e.get("height");return{x:(r-t[1]-t[3])/2+t[3],y:(i-t[0]-t[2])/2+t[0]}},n.prototype.fitCenter=function(){var t=this.graph,e=t.get("group");e.resetMatrix();var r=e.getCanvasBBox();if(r.width!==0&&r.height!==0){var i=this.getViewCenter(),a=r.x+r.width/2,s=r.y+r.height/2;t.translate(i.x-a,i.y-s)}},n.prototype.fitView=function(){var t=this.graph,e=this.getFormatPadding(),r=t.get("width"),i=t.get("height"),a=t.get("group");a.resetMatrix();var s=a.getCanvasBBox();if(s.width!==0&&s.height!==0){var u=this.getViewCenter(),l=s.x+s.width/2,d=s.y+s.height/2;t.translate(u.x-l,u.y-d);var v=(r-e[1]-e[3])/s.width,k=(i-e[0]-e[2])/s.height,T=v;v>k&&(T=k),t.zoom(T,u)}},n.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return Vr(t)},n.prototype.focusPoint=function(t,e,r){var i=this,a=this.getViewCenter(),s=this.getPointByCanvas(a.x,a.y),u=this.graph.get("group").getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),e){var l=(s.x-t.x)*u[0],d=(s.y-t.y)*u[4],v=0,k=0,T=0,I=0;this.graph.get("canvas").animate(function(j){T=l*j,I=d*j,i.graph.translate(T-v,I-k),v=T,k=I},Object(m.__assign)({},r))}else this.graph.translate((s.x-t.x)*u[0],(s.y-t.y)*u[4])},n.prototype.getPointByCanvas=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Dn({x:t,y:e},r)},n.prototype.getPointByClient=function(t,e){var r=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(r.x,r.y)},n.prototype.getClientByPoint=function(t,e){var r=this.graph.get("canvas"),i=this.getCanvasByPoint(t,e),a=r.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},n.prototype.getCanvasByPoint=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),In({x:t,y:e},r)},n.prototype.focus=function(t,e,r){if(Object(p.isString)(t)&&(t=this.graph.findById(t)),t){var i=0,a=0;if(t.getType&&t.getType()==="edge"){var s=t.getSource().get("group").getMatrix(),u=t.getTarget().get("group").getMatrix();s&&u?(i=(s[6]+u[6])/2,a=(s[7]+u[7])/2):(s||u)&&(i=s?s[6]:u[6],a=s?s[7]:u[7])}else{var l=t.get("group").getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),i=l[6],a=l[7]}this.focusPoint({x:i,y:a},e,r)}},n.prototype.changeSize=function(t,e){var r=this.graph;if(!Object(p.isNumber)(t)||!Object(p.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:t,height:e}),r.get("canvas").changeSize(t,e),r.get("plugins").forEach(function(i){i.get("gridContainer")&&i.positionInit()})},n.prototype.destroy=function(){this.graph=null,this.destroyed=!1},n}();function Qr(n){return(Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Mn(n){if(typeof n!="string")return n;var t=function(de){if(typeof de!="string")return de;try{return JSON.parse(de.trim())}catch(me){return de.trim()}},e=t(n);if(typeof e!="string")return e;for(var r=function(de){return de[de.length-1]},i=n.trim(),a=[],s=[],u=function(){for(var de=[],me=0;me<arguments.length;me++)de[me]=arguments[me];return de.some(function(Ie){return r(s)===Ie})},l=null,d=0,v="";d<i.length;){var k=i[d],T=u('"',"'");if(T||k.trim()){var I=i[d-1]==="\\",j=u("}"),F=u("]"),G=u(","),V=r(a);if(T)if(r(s)!==k||I)v+=k;else{s.pop();var q=t(v);V.push(q),l=q,v=""}else if(F&&k===",")v&&(V.push(t(v)),v="");else if(j&&k===":")s.push(","),v&&(V.push(v),v="");else if(G&&k===",")v&&(V.push(t(v)),v=""),s.pop();else if(k==="}"&&(j||G)){v&&(V.push(t(v)),v=""),G&&s.pop();for(var $={},ve=1;ve<V.length;ve+=2)$[V[ve-1]]=V[ve];a.pop(),a.length&&r(a).push($),s.pop(),l=$}else k==="]"&&F?(v&&(V.push(t(v)),v=""),a.pop(),a.length&&r(a).push(V),s.pop(),l=V):k==="{"?(a.push([]),s.push("}")):k==="["?(a.push([]),s.push("]")):k==='"'?s.push('"'):k==="'"?s.push("'"):v+=k;d+=1}else d+=1}return l||v}function ai(n,t){var e;t===void 0&&(t={x:0,y:0});var r=Object(m.__assign)({x:0,y:0,width:0,height:0},t);if(!((e=n.children)===null||e===void 0)&&e.length){var i=n.attrs,a=i===void 0?{}:i,s=a.marginTop,u=Object(m.__assign)({},t);s&&(u.y+=s);for(var l=0;l<n.children.length;l++){n.children[l].attrs.key=(a.key||"root")+" -"+l+" ";var d=ai(n.children[l],u);if(d.bbox){var v=d.bbox;d.attrs.next==="inline"?u.x+=d.bbox.width:u.y+=d.bbox.height,v.width+v.x>r.width&&(r.width=v.width+v.x),v.height+v.y>r.height&&(r.height=v.height+v.y)}}}return n.bbox=function(k,T,I){var j,F,G=k.attrs,V=G===void 0?{}:G,q={x:T.x||0,y:T.y||0,width:I.width||0,height:I.height||0};switch(k.type){case"maker":case"circle":V.r&&(F=2*V.r,j=2*V.r);break;case"text":V.text&&(F=Qe(V.text,V.fontSize||12)[0],j=16,q.y+=j,q.height=j,q.width=F,k.attrs=Object(m.__assign)({fontSize:12,fill:"#000"},V));break;default:V.width&&(F=V.width),V.height&&(j=V.height)}return j>=0&&(q.height=j),F>=0&&(q.width=F),V.marginTop&&(q.y+=V.marginTop),V.marginLeft&&(q.x+=V.marginLeft),q}(n,t,r),n.attrs=Object(m.__assign)(Object(m.__assign)({},n.attrs),n.bbox),n}function Sn(n){var t={},e=function(r){var i=function(u){return function(l){for(var d=u.length,v=[],k=0,T="";k<d;)if(u[k]==="{"&&u[k+1]==="{")v.push(T),T="",k+=2;else if(u[k]==="}"&&u[k+1]==="}"){if(v.length){var I=v.pop();T=Object(p.get)(l,T,I.endsWith("=")?'"{'+T+'}"':T),v.push(I+T)}k+=2,T=""}else T+=u[k],k+=1;return v.push(T),v.map(function(j,F){return v[F-1]&&v[F-1].endsWith("=")?'"{'+j+'}"':j}).join("")}}(typeof n=="function"?n(r):n)(r),a=document.createElement("div");a.innerHTML=i;var s=ai(function u(l,d){var v={},k=l.getAttributeNames&&l.getAttributeNames()||[],T=l.children&&Array.from(l.children).map(function(F){return u(F,d)}),I={},j=l.tagName?l.tagName.toLowerCase():"group";return j==="text"&&(v.text=l.innerText),I.type=j,j==="img"&&(I.type="image"),Array.from(k).forEach(function(F){var G=F.split("-").reduce(function($,ve){return $+ve.charAt(0).toUpperCase()+ve.slice(1)}),V=l.getAttribute(F);try{if(G==="style"||G==="attrs"){var q=Mn(V);v=Object(m.__assign)(Object(m.__assign)({},v),q)}else I[G]=Mn(V)}catch($){if(G==="style")throw $;I[G]=V}}),I.attrs=v,d&&d.style&&I.name&&Qr(d.style[I.name])==="object"&&(I.attrs=Object(m.__assign)(Object(m.__assign)({},I.attrs),d.style[I.name])),d&&d.style&&I.keyshape&&(I.attrs=Object(m.__assign)(Object(m.__assign)({},I.attrs),d.style)),T.length&&(I.children=T),I}(a.children[0],r));return a.remove(),s};return{draw:function(r,i){var a=e(r),s=i;return function u(l){var d=l.attrs,v=d===void 0?{}:d,k=l.bbox,T=l.type,I=l.children,j=Object(m.__rest)(l,["attrs","bbox","type","children"]);if(l.type!=="group"){var F=i.addShape(l.type,Object(m.__assign)({attrs:v,origin:{bbox:k,type:T,children:I}},j));l.keyshape&&(s=F)}l.children&&l.children.forEach(function(G){return u(G)})}(a),t[r.id]=[a],s},update:function(r,i){t[r.id]||(t[r.id]=[]);var a=i.getContainer(),s=a.get("children"),u=e(r),l=function k(T,I){var j,F,G,V,q=(T||{}).type,$=((I==null?void 0:I.attrs)||{}).key;if($&&T&&(T.attrs.key=$),!T&&I)return{action:"delete",val:I,type:q,key:$};if(T&&!I)return{action:"add",val:T,type:q};if(!T&&!I)return{action:"same",type:q};var ve=[];if(((j=T.children)===null||j===void 0?void 0:j.length)>0||((F=I.children)===null||F===void 0?void 0:F.length)>0)for(var de=Math.max((G=T.children)===null||G===void 0?void 0:G.length,(V=I.children)===null||V===void 0?void 0:V.length),me=I.children||[],Ie=T.children||[],Ee=0;Ee<de;Ee+=1)ve.push(k(Ie[Ee],me[Ee]));var Pe=Object.keys(I.attrs),Ze=Object.keys(T.attrs);return I.type!==T.type?{action:"restructure",nowTarget:T,formerTarget:I,key:$,children:ve}:Pe.filter(function(it){return it!=="children"}).some(function(it){return T.attrs[it]!==I.attrs[it]||!Ze.includes(it)})?{action:"change",val:T,children:ve,type:q,key:$}:{action:"same",children:ve,type:q,key:$}}(u,t[r.id].pop()),d=function k(T){var I;T.type!=="group"&&a.addShape(T.type,{attrs:T.attrs}),!((I=T.children)===null||I===void 0)&&I.length&&T.children.map(function(j){return k(j)})},v=function k(T){var I,j=s.find(function(F){return F.attrs.key===T.attrs.key});j&&a.removeChild(j),!((I=T.children)===null||I===void 0)&&I.length&&T.children.map(function(F){return k(F)})};(function k(T){var I=T.key;if(T.type!=="group"){var j=s.find(function(G){return G.attrs.key===I});switch(T.action){case"change":if(j){var F=T.val.keyshape?i.getOriginStyle():{};j.attr(Object(m.__assign)(Object(m.__assign)({},F),T.val.attrs))}break;case"add":d(T.val);break;case"delete":v(T.val);break;case"restructure":v(T.formerTarget),d(T.nowTarget)}}T.children&&T.children.forEach(function(G){return k(G)})})(l),t[r.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var si={};function Jr(n){return si[n]||(si[n]=Object(p.upperFirst)(n)),si[n]}var ko={defaultShapeType:"defaultType",className:null,getShape:function(n){return this[n]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(n,t,e){var r=this.getShape(n),i=r.draw(t,e);return r.afterDraw&&r.afterDraw(t,e,i),i},baseUpdate:function(n,t,e,r){var i=this.getShape(n);i.update&&i.update(t,e,r),i.afterUpdate&&i.afterUpdate(t,e)},setState:function(n,t,e,r){this.getShape(n).setState(t,e,r)},shouldUpdate:function(n){return!!this.getShape(n).update},getControlPoints:function(n,t){return this.getShape(n).getControlPoints(t)},getAnchorPoints:function(n,t){return this.getShape(n).getAnchorPoints(t)}},Fi={options:{},draw:function(n,t){return this.drawShape(n,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(n){return n.controlPoints},getAnchorPoints:function(n){var t=this.options.anchorPoints;return n.anchorPoints||t}},Qi=function(){function n(){}return n.registerFactory=function(t,e){var r=Jr(t),i=ko,a=Object(m.__assign)(Object(m.__assign)({},i),e);return n[r]=a,a.className=r,a},n.getFactory=function(t){return n[Jr(t)]},n.registerNode=function(t,e,r){var i,a=n.Node;if(typeof e=="string"||typeof e=="function"){var s=Sn(e);i=Object(m.__assign)(Object(m.__assign)({},a.getShape("single-node")),s)}else if(e.jsx)s=Sn(e.jsx),i=Object(m.__assign)(Object(m.__assign)(Object(m.__assign)({},a.getShape("single-node")),s),e);else{a.getShape(r);var u=r?a.getShape(r):Fi;i=Object(m.__assign)(Object(m.__assign)({},u),e)}return i.type=t,i.itemType="node",a[t]=i,i},n.registerEdge=function(t,e,r){var i=n.Edge,a=r?i.getShape(r):Fi,s=Object(m.__assign)(Object(m.__assign)({},a),e);return s.type=t,s.itemType="edge",i[t]=s,s},n.registerCombo=function(t,e,r){var i=n.Combo,a=r?i.getShape(r):Fi,s=Object(m.__assign)(Object(m.__assign)({},a),e);return s.type=t,s.itemType="combo",i[t]=s,s},n}(),nn=Qi;Qi.registerFactory("node",{defaultShapeType:"circle"}),Qi.registerFactory("edge",{defaultShapeType:"line"}),Qi.registerFactory("combo",{defaultShapeType:"circle"});var pi=function(){function n(t){this._cfg={},this.destroyed=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var r=this.get("model"),i=r.id,a=this.get("type");i||(i=gr(a),this.get("model").id=i),this.set("id",i);var s=t.group;s&&(s.set("item",this),s.set("id",i)),this.init(),this.draw();var u=r.shape||r.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[u]){var d=l[u].options;if(d&&d.stateStyles){var v=this.get("styles")||r.stateStyles;v=Object(p.deepMix)({},d.stateStyles,v),this.set("styles",v)}}}return n.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=vr(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},n.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=vr(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},n.prototype.drawInner=function(){var t=this.get("shapeFactory"),e=this.get("group"),r=this.get("model");e.clear();var i=r.visible;if(i===void 0||i||this.changeVisibility(i),t){this.updatePosition(r);var a=this.getShapeCfg(r),s=a.type,u=t.draw(s,a,e);u&&(this.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},n.prototype.setOriginStyle=function(){var t=this.get("group").get("children"),e=this.getKeyShape(),r=this,i=e.get("name");if(this.get("originStyle")){var a=this.getOriginStyle();i&&!a[i]&&(a[i]={});var s=this.getCurrentStatesStyle();Object(p.each)(t,function(l){var d=l.get("name"),v=l.attr();if(d&&d!==i){var k=s[d];a[d]||(a[d]={}),k?Object.keys(v).forEach(function(j){var F=v[j];F!==k[j]&&(a[d][j]=F)}):a[d]=l.get("type")!=="image"?Object(p.clone)(v):r.getShapeStyleByName(d)}else{var T=l.attr(),I={};Object.keys(s).forEach(function(j){var F=s[j];Object(p.isPlainObject)(F)&&j!==i||(I[j]=F)}),Object.keys(T).forEach(function(j){var F=T[j];I[j]!==F&&(i?a[i][j]=F:a[j]=F)})}}),a.path&&delete a.path,a.matrix&&delete a.matrix,a.x&&delete a.x,a.y&&delete a.y,a[i]&&a[i].x&&delete a[i].x,a[i]&&a[i].y&&delete a[i].y,r.set("originStyle",a)}else{var u={};Object(p.each)(t,function(l){var d=l.get("type"),v=l.get("name");if(v&&v!==i)u[v]=d!=="image"?Object(p.clone)(l.attr()):r.getShapeStyleByName(v),u[v]&&d==="text"&&(delete u[v].x,delete u[v].y,delete u[v].matrix);else{var k=r.getShapeStyleByName();if(k.path&&delete k.path,k.matrix&&delete k.matrix,i)if(v)u[i]=k;else{var T=gr("shape");l.set("name",T),u[T]=d!=="image"?Object(p.clone)(l.attr()):r.getShapeStyleByName(v)}else Object.assign(u,k)}}),r.set("originStyle",u)}},n.prototype.restoreStates=function(t,e){var r=this,i=r.get("states");Object(p.each)(i,function(a){t.setState(e,a,!0,r)})},n.prototype.init=function(){var t=nn.getFactory(this.get("type"));this.set("shapeFactory",t)},n.prototype.get=function(t){return this._cfg[t]},n.prototype.set=function(t,e){Object(p.isPlainObject)(t)?this._cfg=Object(m.__assign)(Object(m.__assign)({},this._cfg),t):this._cfg[t]=e},n.prototype.getDefaultCfg=function(){return{}},n.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},n.prototype.beforeDraw=function(){},n.prototype.afterDraw=function(){},n.prototype.afterUpdate=function(){},n.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},n.prototype.getShapeStyleByName=function(t){var e,r=this.get("group");if(e=t?r.find(function(a){return a.get("name")===t}):this.getKeyShape()){var i={};return Object(p.each)(e.attr(),function(a,s){(s!=="img"||Object(p.isString)(a))&&(i[s]=a)}),i}return{}},n.prototype.getShapeCfg=function(t,e){var r=this.get("styles");if(r){var i=t;return i.style=Object(m.__assign)(Object(m.__assign)({},r),t.style),i}return t},n.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},n.prototype.getOriginStyle=function(){return this.get("originStyle")},n.prototype.getCurrentStatesStyle=function(){var t=this,e={},r=t.getStates();return r&&r.length?(Object(p.each)(t.getStates(),function(i){e=Object.assign(e,t.getStateStyle(i))}),e):this.getOriginStyle()},n.prototype.setState=function(t,e){var r=this.get("states"),i=this.get("shapeFactory"),a=t,s=t;Object(p.isString)(e)&&(a=t+":"+e,s=t+":");var u=r;if(Object(p.isBoolean)(e)){var l=r.indexOf(s);if(e){if(l>-1)return;r.push(a)}else l>-1&&r.splice(l,1)}else if(Object(p.isString)(e)){var d=r.filter(function(k){return k.includes(s)});d.length>0&&this.clearStates(d),(u=u.filter(function(k){return!k.includes(s)})).push(a),this.set("states",u)}if(i){var v=this.get("model").type;i.setState(v,t,e,this)}},n.prototype.clearStates=function(t){var e=this,r=e.getStates(),i=e.get("shapeFactory"),a=e.get("model").type;t||(t=r),Object(p.isString)(t)&&(t=[t]);var s=r.filter(function(u){return t.indexOf(u)===-1});e.set("states",s),t.forEach(function(u){i.setState(a,u,!1,e)})},n.prototype.getContainer=function(){return this.get("group")},n.prototype.getKeyShape=function(){return this.get("keyShape")},n.prototype.getModel=function(){return this.get("model")},n.prototype.getType=function(){return this.get("type")},n.prototype.getID=function(){return this.get("id")},n.prototype.isItem=function(){return!0},n.prototype.getStates=function(){return this.get("states")},n.prototype.hasState=function(t){return this.getStates().indexOf(t)>=0},n.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},n.prototype.getUpdateType=function(t){},n.prototype.update=function(t,e){e===void 0&&(e=void 0);var r=this.get("model");if(e==="move")this.updatePosition(t);else{var i=r.visible,a=t.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var s={x:r.x,y:r.y};t.x=isNaN(+t.x)?r.x:+t.x,t.y=isNaN(+t.y)?r.y:+t.y;var u=this.get("styles");if(t.stateStyles){var l=t.stateStyles;Object(p.mix)(u,l),delete t.stateStyles}Object.assign(r,t),s.x===t.x&&s.y===t.y||this.updatePosition(t),this.updateShape()}this.afterUpdate(),this.clearCache()},n.prototype.updateShape=function(t){var e=this.get("shapeFactory"),r=this.get("model"),i=r.type;if(e.shouldUpdate(i)&&i===this.get("currentShape")){var a=this.getShapeCfg(r,t);e.baseUpdate(i,a,this,t),t!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(e,i)},n.prototype.updatePosition=function(t){var e=this.get("model"),r=Object(p.isNil)(+t.x)?+e.x:+t.x,i=Object(p.isNil)(+t.y)?+e.y:+t.y,a=this.get("group");if(Object(p.isNil)(r)||Object(p.isNil)(i))return!1;e.x=r,e.y=i;var s=a.getMatrix();return(!s||s[6]!==r||s[7]!==i)&&(a.resetMatrix(),mn(a,{x:r,y:i}),this.clearCache(),!0)},n.prototype.getBBox=function(){var t=this.get("bboxCache");return t||(t=this.calculateBBox(),this.set("bboxCache",t)),t},n.prototype.getCanvasBBox=function(){var t=this.get("bboxCanvasCache");return t||(t=this.calculateCanvasBBox(),this.set("bboxCanvasCache",t)),t},n.prototype.toFront=function(){this.get("group").toFront()},n.prototype.toBack=function(){this.get("group").toBack()},n.prototype.show=function(){this.changeVisibility(!0)},n.prototype.hide=function(){this.changeVisibility(!1)},n.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},n.prototype.isVisible=function(){return this.get("visible")},n.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},n.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},n}(),Ji={source:"start",target:"end"},Ai=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return Object(m.__extends)(t,n),t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,r){var i=Ji[e]+"Point",a=e+"Node",s=this.get(a);s&&!s.destroyed&&s.removeEdge(this),Object(p.isPlainObject)(r)?(this.set(i,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(i,null))},t.prototype.getLinkPoint=function(e,r,i){var a=Ji[e]+"Point",s=e+"Node",u=this.get(a);if(!u){var l=this.get(s),d=e+"Anchor",v=this.getPrePoint(e,i),k=r[d];Object(p.isNil)(k)||(u=l.getLinkPointByAnchor(k)),u=u||l.getLinkPoint(v),Object(p.isNil)(u.index)||this.set(e+"AnchorIndex",u.index)}return u},t.prototype.getPrePoint=function(e,r){if(r&&r.length)return r[e==="source"?0:r.length-1];var i=e==="source"?"target":"source";return this.getEndPoint(i)},t.prototype.getEndPoint=function(e){var r=e+"Node",i=Ji[e]+"Point",a=this.get(r);return a?a.get("model"):this.get(i)},t.prototype.getControlPointsByCenter=function(e){var r=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),s=e.type;return a.getControlPoints(s,{startPoint:r,endPoint:i})},t.prototype.getEndCenter=function(e){var r=e+"Node",i=Ji[e]+"Point",a=this.get(r);if(a){var s=a.getBBox();return{x:s.centerX,y:s.centerY}}return this.get(i)},t.prototype.init=function(){n.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(e,r){var i=this.get("linkCenter"),a=r==="move"?e:n.prototype.getShapeCfg.call(this,e);if(i)a.startPoint=this.getEndCenter("source"),a.endPoint=this.getEndCenter("target");else{var s=a.controlPoints||this.getControlPointsByCenter(a);a.startPoint=this.getLinkPoint("source",e,s),a.endPoint=this.getLinkPoint("target",e,s)}return a.sourceNode=this.get("sourceNode"),a.targetNode=this.get("targetNode"),a},t.prototype.getModel=function(){var e=this.get("model"),r=this.get("sourceNode"),i=this.get("targetNode");return r?delete e.sourceNode:e.source=this.get("startPoint"),i?delete e.targetNode:e.target=this.get("endPoint"),Object(p.isString)(e.source)||Object(p.isPlainObject)(e.source)||(e.source=e.source.getID()),Object(p.isString)(e.target)||Object(p.isPlainObject)(e.target)||(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,r){r===void 0&&(r=void 0);var i=this.get("model"),a=i.visible,s=e.visible;a!==s&&s!==void 0&&this.changeVisibility(s);var u=this.get("styles");if(e.stateStyles){var l=e.stateStyles;Object(p.mix)(u,l),delete e.stateStyles}Object.assign(i,e),this.updateShape(r),this.afterUpdate(),this.clearCache()},t.prototype.destroy=function(){var e=this.get("sourceNode"),r=this.get("targetNode");e&&!e.destroyed&&e.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),n.prototype.destroy.call(this)},t}(pi),Gn=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return Object(m.__extends)(t,n),t.prototype.getNearestPoint=function(e,r){for(var i=0,a=e[0],s=gn(e[0],r),u=0;u<e.length;u++){var l=e[u],d=gn(l,r);d<s&&(a=l,s=d,i=u)}return a.anchorIndex=i,a},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter(function(r){return r.get("target")===e})},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter(function(r){return r.get("source")===e})},t.prototype.getNeighbors=function(e){var r=this,i=this.get("edges");return e==="target"?i.filter(function(a){return a.getSource()===r}).map(function(a){return a.getTarget()}):e==="source"?i.filter(function(a){return a.getTarget()===r}).map(function(a){return a.getSource()}):i.map(function(a){return a.getSource()===r?a.getTarget():a.getSource()})},t.prototype.getLinkPointByAnchor=function(e){return this.getAnchorPoints()[e]},t.prototype.getLinkPoint=function(e){var r,i,a=this.get("keyShape").get("type"),s=this.get("type"),u=this.getBBox();s==="combo"?(r=u.centerX||(u.maxX+u.minX)/2,i=u.centerY||(u.maxY+u.minY)/2):(r=u.centerX,i=u.centerY);var l,d=this.getAnchorPoints();switch(a){case"circle":l=Ir({x:r,y:i,r:u.width/2},e);break;case"ellipse":l=On({x:r,y:i,rx:u.width/2,ry:u.height/2},e);break;default:l=rn(u,e)}var v=l;return d.length&&(v||(v=e),v=this.getNearestPoint(d,v)),v||(v={x:r,y:i}),v},t.prototype.getAnchorPoints=function(){var e=this.get("anchorPointsCache");if(!e){e=[];var r=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),s=this.getShapeCfg(a),u=a.type,l=r.getAnchorPoints(u,s)||[];Object(p.each)(l,function(d,v){var k={x:i.minX+d[0]*i.width,y:i.minY+d[1]*i.height,anchorIndex:v};e.push(k)}),this.set("anchorPointsCache",e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var r=this.getEdges(),i=r.indexOf(e);i>-1&&r.splice(i,1)},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},t.prototype.getUpdateType=function(e){var r,i,a,s,u;if(e){var l=!Object(p.isNil)(e.x),d=!Object(p.isNil)(e.y),v=Object.keys(e);return v.length===1&&(l||d)||v.length===2&&l&&d?"move":Object(p.isNumber)(e.x)||Object(p.isNumber)(e.y)||e.type||e.anchorPoints||e.size||(e==null?void 0:e.style)&&(((r=e==null?void 0:e.style)===null||r===void 0?void 0:r.r)||((i=e==null?void 0:e.style)===null||i===void 0?void 0:i.width)||((a=e==null?void 0:e.style)===null||a===void 0?void 0:a.height)||((s=e==null?void 0:e.style)===null||s===void 0?void 0:s.rx)||((u=e==null?void 0:e.style)===null||u===void 0?void 0:u.ry))?"bbox":"style"}},t}(pi),zi=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return Object(m.__extends)(t,n),t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var r=this.get("styles"),i=this.get("bbox");if(r&&i){var a=e,s={r:Math.hypot(i.height,i.width)/2||ir.defaultCombo.size[0]/2,width:i.width||ir.defaultCombo.size[0],height:i.height||ir.defaultCombo.size[1]};a.style=Object(m.__assign)(Object(m.__assign)(Object(m.__assign)({},r),e.style),s);var u=e.padding||ir.defaultCombo.padding;return Object(p.isNumber)(u)?(s.r+=u,s.width+=2*u,s.height+=2*u):(s.r+=u[0],s.width+=u[1]+u[3]||2*u[1],s.height+=u[0]+u[2]||2*u[0]),this.set("sizeCache",s),a}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),r=this.get("group"),i=vr(e,r);i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;var a=this.get("sizeCache"),s=this.get("bboxCache")||{},u=s.x,l=s.x;return a?(a.width=Math.max(a.width,i.width),a.height=Math.max(a.height,i.height),e.get("type")==="circle"?(i.width=2*a.r,i.height=2*a.r):(i.width=a.width,i.height=a.height),i.minX=i.centerX-i.width/2,i.minY=i.centerY-i.height/2,i.maxX=i.centerX+i.width/2,i.maxY=i.centerY+i.height/2):(i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2),i.x=i.minX,i.y=i.minY,i.x===u&&i.y===l||this.set("anchorPointsCache",null),i}},t.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.addChild=function(e){switch(e.getType()){case"node":this.addNode(e);break;case"combo":this.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.addCombo=function(e){return this.get("combos").push(e),!0},t.prototype.addNode=function(e){return this.get("nodes").push(e),!0},t.prototype.removeChild=function(e){switch(e.getType()){case"node":this.removeNode(e);break;case"combo":this.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.removeCombo=function(e){if(e){var r=this.getCombos(),i=r.indexOf(e);return i>-1&&(r.splice(i,1),!0)}},t.prototype.removeNode=function(e){if(e){var r=this.getNodes(),i=r.indexOf(e);return i>-1&&(r.splice(i,1),!0)}},t.prototype.getUpdateType=function(e){},t.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),r=this.get("group");e&&r.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},t}(Gn),Di=function(){function n(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=Object(p.throttle)(function(r){var i,a=e.graph;if(a&&!a.get("destroyed")){var s=e.edgeToBeUpdateMap;s&&((i=Object.keys(s))===null||i===void 0?void 0:i.length)&&(Object.keys(s).forEach(function(u){var l=s[u].edge;l&&!l.destroyed&&l.refresh(s[u].updateType)}),e.edgeToBeUpdateMap={})}},16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return n.prototype.addItem=function(t,e){var r=this.graph,i=t==="vedge"?"edge":t,a=r.get(i+"Group")||r.get("group"),s=Object(p.upperFirst)(i),u=null,l=r.get(i+Object(p.upperFirst)("stateStyles"))||{},d=r.get("default"+s);e.stateStyles&&(l=e.stateStyles),d&&Object(p.each)(d,function(q,$){Object(p.isObject)(q)&&!Object(p.isArray)(q)?e[$]=Object(p.deepMix)({},q,e[$]):Object(p.isArray)(q)?e[$]=e[$]||Object(p.clone)(d[$]):e[$]=e[$]||d[$]});var v=r.get(i+"Mapper");if(v){var k=v(e);k.stateStyles&&(l=k.stateStyles,delete k.stateStyles),Object(p.each)(k,function(q,$){Object(p.isObject)(q)&&!Object(p.isArray)(q)?e[$]=Object(p.deepMix)({},e[$],q):e[$]=k[$]||e[$]})}if(r.emit("beforeadditem",{type:t,model:e}),t==="edge"||t==="vedge"){var T=void 0,I=void 0;if(T=e.source,I=e.target,T&&Object(p.isString)(T)&&(T=r.findById(T)),I&&Object(p.isString)(I)&&(I=r.findById(I)),!T||!I)return void console.warn("The source or target node of edge "+e.id+" does not exist!");T.getType&&T.getType()==="combo"&&(e.isComboEdge=!0),I.getType&&I.getType()==="combo"&&(e.isComboEdge=!0),u=new Ai({model:e,source:T,target:I,styles:l,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(t==="node")u=new Gn({model:e,styles:l,group:a.addGroup()});else if(t==="combo"){var j=e.children,F=wt(j,r);isNaN(F.x)?isNaN(e.x)&&(e.x=100*Math.random()):e.x=F.x,isNaN(F.y)?isNaN(e.y)&&(e.y=100*Math.random()):e.y=F.y;var G=a.addGroup();G.setZIndex(e.depth);var V=(u=new zi({model:e,styles:l,bbox:e.collapsed?wt([],r):F,group:G})).getModel();(j||[]).forEach(function(q){var $=r.findById(q.id);u.addChild($),q.depth=V.depth+2}),e.collapsed&&setTimeout(function(){r.collapseCombo(u)},0)}if(u)return r.get(t+"s").push(u),r.get("itemMap")[u.get("id")]=u,r.emit("afteradditem",{item:u,model:e}),u},n.prototype.updateItem=function(t,e){var r,i,a=this,s=this.graph;if(Object(p.isString)(t)&&(t=s.findById(t)),t&&!t.destroyed){var u="";t.getType&&(u=t.getType());var l=s.get(u+"Mapper"),d=t.getModel(),v=t.getUpdateType(e);if(l){var k=l(Object(p.deepMix)({},d,e)),T=Object(p.deepMix)({},d,k,e);k.stateStyles&&(t.set("styles",T.stateStyles),delete T.stateStyles),Object(p.each)(T,function($,ve){e[ve]=$})}else Object(p.each)(e,function($,ve){d[ve]&&Object(p.isObject)($)&&!Object(p.isArray)($)&&(e[ve]=Object(m.__assign)(Object(m.__assign)({},d[ve]),e[ve]))});if(s.emit("beforeupdateitem",{item:t,cfg:e}),u==="edge"){if(e.source){var I=e.source;Object(p.isString)(I)&&(I=s.findById(I)),t.setSource(I)}if(e.target){var j=e.target;Object(p.isString)(j)&&(j=s.findById(j)),t.setTarget(j)}t.update(e)}if(u==="node"||u==="combo"){t.update(e,v);var F=t.getEdges(),G=v==="bbox"||v==="move";if(u==="node")v==="move"?Object(p.each)(F,function($){a.edgeToBeUpdateMap[$.getID()]={edge:$,updateType:v},a.throttleRefresh()}):G&&Object(p.each)(F,function($){$.refresh()});else if(G&&u==="combo"){var V=t.get("shapeFactory"),q=d.type||"circle";(d.animate===void 0||e.animate===void 0?(i=(r=V[q])===null||r===void 0?void 0:r.options)===null||i===void 0?void 0:i.animate:d.animate||e.animate)?setTimeout(function(){if(t&&!t.destroyed){var $=t.getKeyShape();$&&!$.destroyed&&Object(p.each)(F,function(ve){ve&&!ve.destroyed&&ve.refresh()})}},201):Object(p.each)(F,function($){$.refresh()})}}s.emit("afterupdateitem",{item:t,cfg:e})}},n.prototype.updateCombo=function(t,e){var r,i,a=this,s=this.graph;if(Object(p.isString)(t)&&(t=s.findById(t)),t&&!t.destroyed){var u=t.getModel(),l=wt(u.collapsed?[]:e,s),d=u.collapsed?wt(e,s):l,v=d.x,k=d.y;t.set("bbox",l),t.update({x:v,y:k});var T=t.get("shapeFactory"),I=u.type||"circle";(u.animate===void 0?(i=(r=T[I])===null||r===void 0?void 0:r.options)===null||i===void 0?void 0:i.animate:u.animate)?setTimeout(function(){if(t&&!t.destroyed){var j=t.getKeyShape();j&&!j.destroyed&&(t.getShapeCfg(u),a.updateComboEdges(t))}},201):this.updateComboEdges(t)}},n.prototype.updateComboEdges=function(t){for(var e=t.getEdges()||[],r=0;r<e.length;r++){var i=e[r];if(i&&!i.destroyed){var a=i.get("shapeFactory"),s=i.getShapeCfg(i.getModel()),u=i.getContainer();u.clear();var l=a.draw(s.type,s,u);i.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0),i.setOriginStyle()}}},n.prototype.collapseCombo=function(t){var e=this.graph;Object(p.isString)(t)&&(t=e.findById(t));var r=t.getChildren();r.nodes.forEach(function(i){e.hideItem(i)}),r.combos.forEach(function(i){e.hideItem(i)})},n.prototype.expandCombo=function(t){var e=this.graph;Object(p.isString)(t)&&(t=e.findById(t));var r=t.getChildren();r.nodes.forEach(function(i){e.showItem(i)}),r.combos.forEach(function(i){i.getModel().collapsed?i.show():e.showItem(i)})},n.prototype.removeItem=function(t){var e=this,r=this.graph;if(Object(p.isString)(t)&&(t=r.findById(t)),t&&!t.destroyed){var i=Object(p.clone)(t.getModel());r.emit("beforeremoveitem",{item:i});var a="";t.getType&&(a=t.getType());var s=r.get(a+"s"),u=s.indexOf(t);if(u>-1&&s.splice(u,1),a==="edge"){var l=r.get("v"+a+"s"),d=l.indexOf(t);d>-1&&l.splice(d,1)}var v=t.get("id");delete r.get("itemMap")[v];var k=r.get("comboTrees"),T=t.get("id");if(a==="node"){var I=t.getModel().comboId;if(k&&I){var j=k,F=!1;k.forEach(function(de){F||Ft(de,function(me){if(me.id===T&&j){var Ie=j.indexOf(me);return j.splice(Ie,1),F=!0,!1}return j=me.children,!0})})}for(var G=(ve=t.getEdges()).length-1;G>=0;G--)r.removeItem(ve[G],!1);I&&r.updateCombo(I)}else if(a==="combo"){var V,q=t.getModel().parentId,$=!1;(k||[]).forEach(function(de){$||Ft(de,function(me){return me.id!==T||(V=me,$=!0,!1)})}),V.removed=!0,V&&V.children&&V.children.forEach(function(de){e.removeItem(de.id)});var ve;for(G=(ve=t.getEdges()).length;G>=0;G--)r.removeItem(ve[G],!1);q&&r.updateCombo(q)}t.destroy(),r.emit("afterremoveitem",{item:i})}},n.prototype.setItemState=function(t,e,r){var i=this.graph,a=e;Object(p.isString)(r)&&(a=e+":"+r),t.hasState(a)===r&&r||Object(p.isString)(r)&&t.hasState(a)||(i.emit("beforeitemstatechange",{item:t,state:a,enabled:r}),t.setState(e,r),i.autoPaint(),i.emit("afteritemstatechange",{item:t,state:a,enabled:r}))},n.prototype.priorityState=function(t,e){var r=this.graph,i=t;Object(p.isString)(t)&&(i=r.findById(t)),this.setItemState(i,e,!1),this.setItemState(i,e,!0)},n.prototype.clearItemStates=function(t,e){var r=this.graph;Object(p.isString)(t)&&(t=r.findById(t)),r.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),r.emit("afteritemstatesclear",{item:t,states:e})},n.prototype.refreshItem=function(t){var e=this.graph;Object(p.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},n.prototype.addCombos=function(t,e){var r=this,i=this.graph;(t||[]).forEach(function(s){we(s,function(u){var l;return e.forEach(function(d){d.id===u.id&&(d.children=u.children,d.depth=u.depth,l=d)}),l&&r.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},n.prototype.changeItemVisibility=function(t,e){var r=this,i=this.graph;if(Object(p.isString)(t)&&(t=i.findById(t)),t){if(i.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()==="node"){var a=t.getEdges();Object(p.each)(a,function(v){(!e||v.get("source").isVisible()&&v.get("target").isVisible())&&r.changeItemVisibility(v,e)})}else if(t.getType&&t.getType()==="combo"){var s=i.get("comboTrees"),u=t.get("id"),l=[],d=!1;(s||[]).forEach(function(v){d||v.children&&v.children.length!==0&&Ft(v,function(k){return k.id!==u||(l=k.children,d=!0,!1)})}),l&&(!e||e&&!t.getModel().collapsed)&&l.forEach(function(v){var k=i.findById(v.id);r.changeItemVisibility(k,e)}),a=t.getEdges(),Object(p.each)(a,function(v){(!e||v.get("source").isVisible()&&v.get("target").isVisible())&&r.changeItemVisibility(v,e)})}return i.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},n.prototype.destroy=function(){this.graph=null,this.destroyed=!0},n}(),fi=null,Ui=function(){function n(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return n.checkCache=function(t,e,r){if(r[e]){var i=r[e].indexOf(t);i>=0&&r[e].splice(i,1)}},n.cacheState=function(t,e,r){r[e]||(r[e]=[]),r[e].push(t)},n.prototype.updateState=function(t,e,r){var i=this,a=n.checkCache,s=n.cacheState;if(!t.destroyed){var u=this.cachedStates,l=u.enabled,d=u.disabled;r?(a(t,e,d),s(t,e,l)):(a(t,e,l),s(t,e,d)),fi&&clearTimeout(fi),fi=setTimeout(function(){fi=null,i.updateGraphStates()},16)}},n.prototype.updateStates=function(t,e,r){var i=this;Object(p.isString)(e)?this.updateState(t,e,r):e.forEach(function(a){i.updateState(t,a,r)})},n.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;Object(p.each)(e.disabled,function(r,i){t[i]&&(t[i]=t[i].filter(function(a){return r.indexOf(a)<0&&!r.destroyed}))}),Object(p.each)(e.enabled,function(r,i){if(t[i]){var a={};t[i].forEach(function(s){s.destroyed||(a[s.get("id")]=!0)}),r.forEach(function(s){if(!s.destroyed){var u=s.get("id");a[u]||(a[u]=!0,t[i].push(s))}})}else t[i]=r}),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},n.prototype.destroy=function(){this.graph=null,this.cachedStates=null,fi&&clearTimeout(fi),fi=null,this.destroyed=!0},n}(),Ci=o(37),eo=function(n,t){return n&&t?n.replace(/\\?\{([^{}]+)\}/g,function(e,r){if(e.charAt(0)==="\\")return e.slice(1);var i=t[r];return i===0&&(i="0"),i||""}):n},so=function(n){var t=[];if(n.length<2)throw new Error("point length must largn than 2, now it's "+n.length);for(var e=0,r=n;e<r.length;e++){var i=r[e],a=i.x,s=i.y;t.push(a),t.push(s)}var u=Object(Ci.a)(t);return u.unshift(["M",n[0].x,n[0].y]),u},Vi=function(n,t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var i={x:(1-e)*n.x+e*t.x,y:(1-e)*n.y+e*t.y},a=[0,0];L.c.normalize(a,[t.x-n.x,t.y-n.y]),a&&(a[0]||a[1])||(a=[0,0]);var s=[-a[1]*r,a[0]*r];return i.x+=s[0],i.y+=s[1],i},Ti=function(n,t){var e=n.length;if(!e)return"";for(var r="",i=0;i<e;i++){var a=n[i];r+=eo(i===0?"M{x} {y}":"L{x} {y}",a)}return t&&(r+="Z"),r},_t=function(n){var t=[];return n.forEach(function(e){if(e[0]!=="A")for(var r=1;r<e.length;r+=2)t.push([e[r],e[r+1]]);else{var i=e.length;t.push([e[i-2],e[i-1]])}}),t},$e=function(n){if(n.length<2)throw new Error("point length must largn than 2, now it's "+n.length);var t=n[0],e=n[1],r=n[n.length-1],i=n[n.length-2];n.unshift(r),n.unshift(i),n.push(t),n.push(e);for(var a=[],s=1;s<n.length-2;s+=1){var u=n[s-1].x,l=n[s-1].y,d=n[s].x,v=n[s].y,k=n[s+1].x,T=n[s+1].y,I=d+(k-u)/6,j=v+(T-l)/6,F=k-((s!==n.length-2?n[s+2].x:k)-d)/6,G=T-((s!==n.length-2?n[s+2].y:T)-v)/6;a.push(["C",I,j,F,G,k,T])}return a.unshift(["M",r.x,r.y]),a},St=function(n,t){return L.c.scale([0,0],L.c.normalize([0,0],n),t)},w=function(n,t){var e=[n[1]-t[1],t[0]-n[0]],r=Math.sqrt(e[0]*e[0]+e[1]*e[1]);if(r===0)throw new Error("p0 should not be equal to p1");return[e[0]/r,e[1]/r]},D=function(n,t){return[t[0]-n[0],t[1]-n[1]]};function ce(n,t){if(!n||n.length<1)return"";if(n.length===1)return function(l){var d=[l[0][0],l[0][1]-t],v=[l[0][0],l[0][1]+t];return"M "+d+" A "+t+","+t+",0,0,0,"+v+" A "+t+","+t+",0,0,0,"+d}(n);if(n.length===2)return function(l){var d=L.c.scale([0,0],w(l[0],l[1]),t),v=L.c.scale([0,0],d,-1),k=L.c.add([0,0],l[0],d),T=L.c.add([0,0],l[1],d),I=L.c.add([0,0],l[1],v),j=L.c.add([0,0],l[0],v);return"M "+k+" L "+T+" A "+[t,t,"0,0,0",I].join(",")+" L "+j+" A "+[t,t,"0,0,0",k].join(",")}(n);for(var e=new Array(n.length),r=0;r<e.length;++r){var i=r===0?n[n.length-1]:n[r-1],a=n[r],s=L.c.scale([0,0],w(i,a),t);e[r]=[L.c.add([0,0],i,s),L.c.add([0,0],a,s)]}var u="A "+[t,t,"0,0,0,"].join(",");return(e=e.map(function(l,d){var v="";return d===0&&(v="M "+e[e.length-1][1]+" "),v+=u+l[0]+" L "+l[1]})).join(" ")}function K(n,t){var e,r,i,a=n.length;if(!n||a<1)return"";if(a===1)return r=[(e=n)[0][0],e[0][1]-t],i=[e[0][0],e[0][1]+t],"M "+r+" A "+[t,t,"0,0,0",i].join(",")+" A "+[t,t,"0,0,0",r].join(",");if(a===2)return function(v){var k=D(v[0],v[1]),T=St(k,t),I=L.c.add([0,0],v[0],L.c.scale([0,0],T,-1)),j=L.c.add([0,0],v[1],T),F=1.2*t,G=St(L.c.normalize([0,0],k),F),V=L.c.scale([0,0],G,-1),q=L.c.add([0,0],I,V),$=L.c.add([0,0],j,V),ve=L.c.add([0,0],I,G);return"M "+I+" C "+[q,$,j].join(",")+" S "+[ve,I].join(",")+" Z"}(n);for(var s=n.map(function(v,k){var T=n[(k+1)%a];return{p:v,v:L.c.normalize([0,0],D(v,T))}}),u=0;u<s.length;++u){var l=u>0?u-1:a-1,d=L.c.normalize([0,0],L.c.add([0,0],s[l].v,L.c.scale([0,0],s[u].v,-1)));s[u].p=L.c.add([0,0],s[u].p,L.c.scale([0,0],d,t))}return s.map(function(v){var k=v.p;return{x:k[0],y:k[1]}})}var oe=function(n,t,e){return(n.y-e.y)*(t.x-e.x)-(n.x-e.x)*(t.y-e.y)},pe=function(n){var t=n.map(function(a){return{x:a.getModel().x,y:a.getModel().y}});if(t.sort(function(a,s){return a.x===s.x?a.y-s.y:a.x-s.x}),t.length===1)return t;for(var e=[],r=0;r<t.length;r++){for(;e.length>=2&&oe(e[e.length-2],e[e.length-1],t[r])<=0;)e.pop();e.push(t[r])}var i=[];for(r=t.length-1;r>=0;r--){for(;i.length>=2&&oe(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)},be={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function De(n,t,e){var r=!1,i=function(u,l){return t.cells[u+l*t.width]},a=function(u,l){var d=0;return i(u-1,l-1)>=e&&(d+=1),i(u,l-1)>e&&(d+=2),i(u-1,l)>e&&(d+=4),i(u,l)>e&&(d+=8),d},s=function(u,l){for(var d,v,k=u,T=l,I=0;I<t.width*t.height;I++){if(d=k,v=T,n.findIndex(function(F){return F.x===k&&F.y===T})>-1){if(n[0].x===k&&n[0].y===T)return!0}else n.push({x:k,y:T});var j=a(k,T);switch(j){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:k++;break;case 12:case 14:case 4:k--;break;case 6:d===0&&(v===-1?k-=1:k+=1);break;case 1:case 13:case 5:T--;break;case 9:d===1&&(v===0?T-=1:T+=1);break;case 10:case 8:case 11:T++;break;default:return console.warn("Marching squares invalid state: "+j),!0}}};this.march=function(){for(var u=0;u<t.width&&!r;u+=1)for(var l=0;l<t.height&&!r;l+=1)i(u,l)>e&&a(u,l)!==15&&(r=s(u,l));return r}}var Ue=function(n,t){var e=Number.POSITIVE_INFINITY,r=null;return n.forEach(function(i){var a=Vn(i,t);a>=0&&a<e&&(r=i,e=a)}),r};function ke(n,t,e,r,i){var a=function(s,u,l){var d=null,v=Number.POSITIVE_INFINITY;return u.forEach(function(k){var T={x:s.getModel().x,y:s.getModel().y},I={x:k.getModel().x,y:k.getModel().y},j=di(T,I),F=new Wn(T.x,T.y,I.x,I.y),G=l.reduce(function(V,q){return Vn(q,F)>0?V+1:V},0);j*Math.pow(G+1,2)<v&&(d=k,v=j*Math.pow(G+1,2))}),d}(n,e,t);return a===null?[]:function(s){for(var u=[];s.length>0;){var l=s.pop();if(s.length===0){u.push(l);break}var d=s.pop(),v=new Wn(l.x1,l.y1,d.x2,d.y2);Ue(t,v)?(u.push(l),s.push(d)):s.push(v)}return u}(function(s,u,l,d){var v=[],k=[];k.push(s);for(var T=!0,I=0,j=function(V,q){var $=!1;return q.forEach(function(ve){$||(Xn(V,{x:ve.x1,y:ve.y1})||Xn(V,{x:ve.x2,y:ve.y2}))&&($=!0)}),$},F=function(V,q){for(var $=0,ve=q;$<ve.length;$++){var de=ve[$].getBBox(),me=[[de.x,de.y],[de.x+de.width,de.y],[de.x,de.y+de.height],[de.x+de.width,de.y+de.height]];if(Bn(me,V.x,V.y))return!0}return!1};T&&I<l;){T=!1;for(var G=function(){var V=k.pop(),q=Ue(u,V);if(q){var $=hi(q,V),ve=$[0];if($[1]===2){var de=function(me){for(var Ie=d,Ee=Ge(q,Ie,ve,me),Pe=j(Ee,k)||j(Ee,v),Ze=F(Ee,u);!Pe&&Ze&&Ie>=1;)Ee=Ge(q,Ie/=1.5,ve,me),Pe=j(Ee,k)||j(Ee,v),Ze=F(Ee,u);!Ee||Pe||me&&Ze||(k.push(new Wn(V.x1,V.y1,Ee.x,Ee.y)),k.push(new Wn(Ee.x,Ee.y,V.x2,V.y2)),T=!0)};de(!0),T||de(!1)}}T||v.push(V),I+=1};!T&&k.length;)G()}for(;k.length;)v.push(k.pop());return v}(new Wn(n.getModel().x,n.getModel().y,a.getModel().x,a.getModel().y),t,r,i))}var Fe=function(n,t,e){var r=Object.assign(be,e),i=oi(n.map(function(de){return{x:de.getModel().x,y:de.getModel().y}}));n=n.sort(function(de,me){return di({x:de.getModel().x,y:de.getModel().y},i)-di({x:me.getModel().x,y:me.getModel().y},i)});var a=[],s=[];n.forEach(function(de){ke(de,t,a,r.maxRoutingIterations,r.morphBuffer).forEach(function(me){s.push(me)}),a.push(de)});for(var u,l,d,v,k,T=function(de,me,Ie){var Ee={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},Pe=[];de.forEach(function(st){Pe.push(st.getBBox())}),me.forEach(function(st){Pe.push(st.getBBox())});for(var Ze=0,it=Pe;Ze<it.length;Ze++){var ct=it[Ze];Ee.minX=(ct.minX<Ee.minX?ct.minX:Ee.minX)-Ie,Ee.minY=(ct.minY<Ee.minY?ct.minY:Ee.minY)-Ie,Ee.maxX=(ct.maxX>Ee.maxX?ct.maxX:Ee.maxX)+Ie,Ee.maxY=(ct.maxY>Ee.maxY?ct.maxY:Ee.maxY)+Ie}return Ee.width=Ee.maxX-Ee.minX,Ee.height=Ee.maxY-Ee.minY,Ee.x=Ee.minX,Ee.y=Ee.minY,Ee}(n,s,r.nodeR0),I=(u=T.width,l=T.height,d=r.pixelGroupSize,v=Math.ceil(u/d),k=Math.ceil(l/d),{cells:new Float32Array(Math.max(0,v*k)).fill(0),width:v,height:k}),j=[],F=[],G=0;G<r.maxMarchingIterations;G++)if(Ye(n,t,s,T,I,r),F=[],new De(j=[],I,r.threshold).march()){var V=j.map(function(de){return{x:Math.round(de.x*r.pixelGroupSize+T.minX),y:Math.round(de.y*r.pixelGroupSize+T.minY)}});if(V){var q=V.length;if(r.skip>1)for(q=Math.floor(V.length/r.skip);q<3&&r.skip>1;)r.skip-=1,q=Math.floor(V.length/r.skip);for(var $=0,ve=0;ve<q;ve+=1,$+=r.skip)F.push({x:V[$].x,y:V[$].y})}if(F&&function(){for(var de=0,me=n;de<me.length;de++){var Ie=me[de],Ee=F.map(function(Pe){return[Pe.x,Pe.y]});if(!Bn(Ee,Ie.getBBox().centerX,Ie.getBBox().centerY))return!1}return!0}())return F;if(r.threshold*=.9,G<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(r.nonMemberInfluenceFactor!==0&&t.length>0))break;r.nonMemberInfluenceFactor*=.8}}return F};function Ye(n,t,e,r,i,a){function s(T,I){var j=Math.floor((T-I)/a.pixelGroupSize);return j<0?0:j}function u(T,I){return T*a.pixelGroupSize+I}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),d=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),v=function(T,I){return[Math.min(s(T.minX,I+r.minX),i.width),Math.min(s(T.minY,I+r.minY),i.height),Math.min(s(T.maxX,-I+r.minX),i.width),Math.min(s(T.maxY,-I+r.minY),i.height)]},k=function(T,I){for(var j=T.getBBox(),F=v(j,a.nodeR1),G=F[0],V=F[1],q=F[2],$=F[3],ve=V;ve<$;ve+=1)for(var de=G;de<q;de+=1)if(!(I<0&&i[de+ve*i.width]<=0)){var me=u(de,r.minX),Ie=u(ve,r.minY),Ee=Yn({x:me,y:Ie},{x:j.minX,y:j.minY,width:j.width,height:j.height});if(Ee<Math.pow(a.nodeR1,2)){var Pe=Math.sqrt(Ee)-a.nodeR1;i.cells[de+ve*i.width]+=I*Pe*Pe}}};a.nodeInfluenceFactor&&n.forEach(function(T){k(T,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&e.forEach(function(T){(function(I,j){for(var F=I.getBBox(),G=v(F,a.edgeR1),V=G[0],q=G[1],$=G[2],ve=G[3],de=q;de<ve;de+=1)for(var me=V;me<$;me+=1)if(!(j<0&&i.cells[me+de*i.width]<=0)){var Ie=u(me,r.minX),Ee=u(de,r.minY),Pe=_i({x:Ie,y:Ee},I);if(Pe<Math.pow(a.edgeR1,2)){var Ze=Math.sqrt(Pe)-a.edgeR1;i.cells[me+de*i.width]+=j*Ze*Ze}}})(T,a.edgeInfluenceFactor/d)}),a.negativeNodeInfluenceFactor&&t.forEach(function(T){k(T,a.negativeNodeInfluenceFactor/l)})}function Ge(n,t,e,r){var i=n.getBBox(),a=e[0],s=e[1],u=e[2],l=e[3],d={topLeft:{x:i.minX-t,y:i.minY-t},topRight:{x:i.maxX+t,y:i.minY-t},bottomLeft:{x:i.minX-t,y:i.maxY+t},bottomRight:{x:i.maxX+t,y:i.maxY+t}},v=i.height*i.width;function k(T,I){return i.width*(.5*(T.y-i.minY+(I.y-i.minY)))}if(s)return a?r?d.topLeft:d.bottomRight:u?r?d.bottomLeft:d.topRight:k(s,l)<.5*v?s.y>l.y?r?d.topLeft:d.bottomRight:r?d.topRight:d.bottomLeft:s.y<l.y?r?d.bottomLeft:d.topRight:r?d.bottomRight:d.topLeft;if(l){if(a)return r?d.topRight:d.bottomLeft;if(u)return r?d.bottomRight:d.topLeft}return k(a,u)<.5*v?a.x>u.x?r?d.topLeft:d.bottomRight:r?d.bottomLeft:d.topRight:a.x<u.x?r?d.topRight:d.bottomLeft:r?d.bottomRight:d.topLeft}var Xe=function(){function n(t,e){this.cfg=Object(p.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return Object(p.isString)(r)?t.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return Object(p.isString)(r)?t.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return n.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},n.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},n.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},n.prototype.calcPath=function(t,e){var r,i,a;switch(this.type){case"round-convex":a=ce((r=pe(t)).map(function(s){return[s.x,s.y]}),this.padding),i=Object(Ci.b)(a);break;case"smooth-convex":(r=pe(t)).length===2?(a=ce(r.map(function(s){return[s.x,s.y]}),this.padding),i=Object(Ci.b)(a)):r.length>2&&(a=K(r.map(function(s){return[s.x,s.y]}),this.padding),i=$e(a));break;case"bubble":i=(r=Fe(t,e,this.cfg.bubbleCfg)).length>=2&&$e(r)}return i},n.prototype.render=function(){this.group.addShape("path",{attrs:Object(m.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},n.prototype.addMember=function(t){if(t){Object(p.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},n.prototype.addNonMember=function(t){if(t){Object(p.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},n.prototype.removeMember=function(t){if(t){Object(p.isString)(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},n.prototype.removeNonMember=function(t){if(t){Object(p.isString)(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},n.prototype.updateData=function(t,e){var r=this;this.group.findById(this.id).remove(),t&&(this.members=t.map(function(i){return Object(p.isString)(i)?r.graph.findById(i):i})),e&&(this.nonMembers=e.map(function(i){return Object(p.isString)(i)?r.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},n.prototype.updateStyle=function(t){this.group.findById(this.id).attr(Object(m.__assign)({},t))},n.prototype.updateCfg=function(t){var e=this;this.cfg=Object(p.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map(function(r){return Object(p.isString)(r)?e.graph.findById(r):r})),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return Object(p.isString)(r)?e.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},n.prototype.contain=function(t){var e,r,i=this,a=(e=Object(p.isString)(t)?this.graph.findById(t):t).getKeyShape();if(e.get("type")==="path")r=_t(a.attr("path"));else{var s=a.getCanvasBBox();r=[[s.minX,s.minY],[s.maxX,s.minY],[s.maxX,s.maxY],[s.minX,s.maxY]]}return r=r.map(function(u){var l=i.graph.getPointByCanvas(u[0],u[1]);return[l.x,l.y]}),Mi(r,_t(this.path))},n.prototype.destroy=function(){this.group.remove(),this.cfg=null},n}(),et=L.a.transform,tt=function(n){function t(e){var r=n.call(this)||this;return r.cfg=Object(p.deepMix)(r.getDefaultCfg(),e),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new dr(r.cfg.maxStep),r.redoStack=new dr(r.cfg.maxStep)),r}return Object(m.__extends)(t,n),t.prototype.init=function(){this.initCanvas();var e=new qn(this),r=new rr(this),i=new Di(this),a=new Ui(this);this.set({viewController:e,modeController:r,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas"),r=this.get("canvas").get("el").id,i=e.addGroup({id:r+"-root",className:ir.rootContainerClassName});if(this.get("groupByTypes")){var a=i.addGroup({id:r+"-edge",className:ir.edgeContainerClassName}),s=i.addGroup({id:r+"-node",className:ir.nodeContainerClassName}),u=i.addGroup({id:r+"-combo",className:ir.comboContainerClassName});u.toBack(),this.set({nodeGroup:s,edgeGroup:a,comboGroup:u})}var l=i.addGroup({id:r+"-delegate",className:ir.delegateContainerClassName});this.set({delegateGroup:l}),this.set("group",i)},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},t.prototype.set=function(e,r){return Object(p.isPlainObject)(e)?this.cfg=Object(m.__assign)(Object(m.__assign)({},this.cfg),e):this.cfg[e]=r,this},t.prototype.get=function(e){var r;return(r=this.cfg)===null||r===void 0?void 0:r[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,r){Object(p.isString)(e)&&(e=this.findById(e));var i=this.get("itemController");r||(r=e.get("states")),i.clearItemStates(e,r),this.get("stateController").updateStates(e,r,!1)},t.prototype.node=function(e){typeof e=="function"&&this.set("nodeMapper",e)},t.prototype.edge=function(e){typeof e=="function"&&this.set("edgeMapper",e)},t.prototype.combo=function(e){typeof e=="function"&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,r){var i,a=this.get(e+"s");return Object(p.each)(a,function(s,u){if(r(s,u))return i=s}),i},t.prototype.findAll=function(e,r){var i=[];return Object(p.each)(this.get(e+"s"),function(a,s){r(a,s)&&i.push(a)}),i},t.prototype.findAllByState=function(e,r){return this.findAll(e,function(i){return i.hasState(r)})},t.prototype.translate=function(e,r){var i=this.get("group"),a=Object(p.clone)(i.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),a=et(a,[["t",e,r]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:i.getMatrix()}),this.autoPaint()},t.prototype.moveTo=function(e,r,i,a){var s=this.get("group");Qn(s,{x:e,y:r},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:s.getMatrix()})},t.prototype.fitView=function(e){e&&this.set("fitViewPadding",e),this.get("viewController").fitView(),this.autoPaint()},t.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},t.prototype.addBehaviors=function(e,r){return this.get("modeController").manipulateBehaviors(e,r,!0),this},t.prototype.removeBehaviors=function(e,r){return this.get("modeController").manipulateBehaviors(e,r,!1),this},t.prototype.updateBehavior=function(e,r,i){return this.get("modeController").updateBehavior(e,r,i),this},t.prototype.zoom=function(e,r){var i=this.get("group"),a=Object(p.clone)(i.getMatrix()),s=this.get("minZoom"),u=this.get("maxZoom");a||(a=[1,0,0,0,1,0,0,0,1]),a=et(a,r?[["t",-r.x,-r.y],["s",e,e],["t",r.x,r.y]]:[["s",e,e]]),s&&a[0]<s||u&&a[0]>u||(i.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint())},t.prototype.zoomTo=function(e,r){var i=e/this.getZoom();this.zoom(i,r)},t.prototype.focusItem=function(e,r,i){var a=this.get("viewController"),s=!1;r?s=!0:r===void 0&&(s=this.get("animate"));var u={};i?u=i:i===void 0&&(u=this.get("animateCfg")),a.focus(e,s,u),this.autoPaint()},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,r){return this.get("viewController").getPointByClient(e,r)},t.prototype.getClientByPoint=function(e,r){return this.get("viewController").getClientByPoint(e,r)},t.prototype.getPointByCanvas=function(e,r){return this.get("viewController").getPointByCanvas(e,r)},t.prototype.getCanvasByPoint=function(e,r){return this.get("viewController").getCanvasByPoint(e,r)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,r){r===void 0&&(r=!0);var i=this.get("itemController").changeItemVisibility(e,!0);if(r&&this.get("enabledStack")){var a=i.getID(),s={},u={};switch(i.getType()){case"node":s.nodes=[{id:a,visible:!1}],u.nodes=[{id:a,visible:!0}];break;case"edge":s.nodes=[{id:a,visible:!1}],u.edges=[{id:a,visible:!0}];break;case"combo":s.nodes=[{id:a,visible:!1}],u.combos=[{id:a,visible:!0}]}this.pushStack("visible",{before:s,after:u})}},t.prototype.hideItem=function(e,r){r===void 0&&(r=!0);var i=this.get("itemController").changeItemVisibility(e,!1);if(r&&this.get("enabledStack")){var a=i.getID(),s={},u={};switch(i.getType()){case"node":s.nodes=[{id:a,visible:!0}],u.nodes=[{id:a,visible:!1}];break;case"edge":s.nodes=[{id:a,visible:!0}],u.edges=[{id:a,visible:!1}];break;case"combo":s.nodes=[{id:a,visible:!0}],u.combos=[{id:a,visible:!1}]}this.pushStack("visible",{before:s,after:u})}},t.prototype.refreshItem=function(e){this.get("itemController").refreshItem(e)},t.prototype.setAutoPaint=function(e){this.set("autoPaint",e),this.get("canvas").set("autoDraw",e)},t.prototype.remove=function(e,r){r===void 0&&(r=!0),this.removeItem(e,r)},t.prototype.removeItem=function(e,r){r===void 0&&(r=!0);var i=e;if(Object(p.isString)(e)&&(i=this.findById(e)),!i&&Object(p.isString)(e))console.warn("The item to be removed does not exist!");else if(i){var a="";if(i.getType&&(a=i.getType()),r&&this.get("enabledStack")){var s=Object(m.__assign)(Object(m.__assign)({},i.getModel()),{itemType:a}),u={};switch(a){case"node":u.nodes=[s],u.edges=[];for(var l=i.getEdges(),d=l.length-1;d>=0;d--)u.edges.push(Object(m.__assign)(Object(m.__assign)({},l[d].getModel()),{itemType:"edge"}));break;case"edge":u.edges=[s];break;case"combo":u.combos=[s]}this.pushStack("delete",{before:u,after:{}})}if(a==="node"&&i.getModel().comboId&&this.updateComboTree(i),this.get("itemController").removeItem(i),a==="combo"){var v=vt(this.get("comboTrees"));this.set("comboTrees",v)}}},t.prototype.addItem=function(e,r,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var s=this.get("comboSorted");this.set("comboSorted",s&&!a);var u=this.get("itemController");if(!function(ve,de){if(ve==="node"||ve==="combo"){if(de.id&&!Object(p.isString)(de.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+de.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(!(ve!=="edge"||de.source&&de.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(e,r))return!1;if(!r.id||!this.findById(r.id)){var l,d=this.get("comboTrees");if(d||(d=[]),e==="combo"){var v=this.get("itemMap"),k=!1;if(d.forEach(function(ve){k||we(ve,function(de){if(r.parentId===de.id){k=!0;var me=Object(m.__assign)({id:r.id,depth:de.depth+2},r);de.children?de.children.push(me):de.children=[me],r.depth=me.depth,l=u.addItem(e,r)}var Ie=v[de.id];return k&&Ie&&Ie.getType&&Ie.getType()==="combo"&&u.updateCombo(Ie,de.children),!0})}),!k){var T=Object(m.__assign)({id:r.id,depth:0},r);r.depth=T.depth,d.push(T),l=u.addItem(e,r)}this.set("comboTrees",d)}else if(e==="node"&&Object(p.isString)(r.comboId)&&d){var I;(I=this.findById(r.comboId))&&I.getType&&I.getType()!=="combo"&&console.warn("'"+r.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),l=u.addItem(e,r);var j=this.get("itemMap"),F=!1,G=!1;(d||[]).forEach(function(ve){G||F||we(ve,function(de){if(de.id===r.id)return G=!0,!1;if(r.comboId===de.id&&!G){F=!0;var me=Object(p.clone)(r);me.itemType="node",de.children?de.children.push(me):de.children=[me],me.depth=de.depth+1}return F&&j[de.id].getType&&j[de.id].getType()==="combo"&&u.updateCombo(j[de.id],de.children),!0})})}else l=u.addItem(e,r);(e==="node"&&r.comboId||e==="combo"&&r.parentId)&&(I=this.findById(r.comboId||r.parentId))&&I.getType&&I.getType()==="combo"&&I.addChild(l);var V=this.get("combos");if(V&&V.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var q=Object(m.__assign)(Object(m.__assign)({},l.getModel()),{itemType:e}),$={};switch(e){case"node":$.nodes=[q];break;case"edge":$.edges=[q];break;case"combo":$.combos=[q]}this.pushStack("add",{before:{},after:$})}return l}console.warn("This item exists already. Be sure the id %c"+r.id+"%c is unique.","font-size: 20px; color: red;","")},t.prototype.add=function(e,r,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(e,r,i,a)},t.prototype.updateItem=function(e,r,i){var a=this;i===void 0&&(i=!0);var s,u=this.get("itemController");s=Object(p.isString)(e)?this.findById(e):e;var l=Object(p.clone)(s.getModel()),d="";s.getType&&(d=s.getType());var v=Object(m.__spreadArray)([],s.getStates());if(d==="combo"&&Object(p.each)(v,function(j){return a.setItemState(s,j,!1)}),u.updateItem(s,r),d==="combo"&&Object(p.each)(v,function(j){return a.setItemState(s,j,!0)}),i&&this.get("enabledStack")){var k={nodes:[],edges:[],combos:[]},T={nodes:[],edges:[],combos:[]},I=Object(m.__assign)({id:l.id},r);switch(d){case"node":k.nodes.push(l),T.nodes.push(I);break;case"edge":k.edges.push(l),T.edges.push(I);break;case"combo":k.combos.push(l),T.combos.push(I)}d==="node"&&k.nodes.push(l),this.pushStack("update",{before:k,after:T})}},t.prototype.update=function(e,r,i){i===void 0&&(i=!0),this.updateItem(e,r,i)},t.prototype.setItemState=function(e,r,i){Object(p.isString)(e)&&(e=this.findById(e)),this.get("itemController").setItemState(e,r,i);var a=this.get("stateController");Object(p.isString)(i)?a.updateState(e,r+":"+i,!0):a.updateState(e,r,i)},t.prototype.priorityState=function(e,r){this.get("itemController").priorityState(e,r)},t.prototype.data=function(e){er(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var i=r.nodes,a=i===void 0?[]:i,s=r.edges,u=s===void 0?[]:s,l=r.combos,d=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),Object(p.each)(a,function(I){e.add("node",I,!1,!1)}),d&&d.length!==0){var v=lt(d,a);this.set("comboTrees",v),e.addCombos(d)}Object(p.each)(u,function(I){e.add("edge",I,!1,!1)});var k=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var T=e.get("layoutController");if(T){if(T.layout(function(){e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter(),e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",k)}),this.destroyed)return}else e.get("fitView")&&e.fitView(),e.get("fitCenter")&&e.fitCenter(),e.emit("afterrender"),e.set("animate",k);this.get("groupByTypes")||(d&&d.length!==0?this.sortCombos():r.nodes&&r.edges&&r.nodes.length<r.edges.length?this.getNodes().forEach(function(I){I.toFront()}):this.getEdges().forEach(function(I){I.toBack()})),this.get("enabledStack")&&this.pushStack("render")},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,r,i){var a,s=this,u=this.get("itemMap");Object(p.each)(i,function(l){if(a=u[l.id]){if(s.get("animate")&&e==="node"){var d=a.getContainer().getMatrix();d||(d=[1,0,0,0,1,0,0,0,1]),a.set("originAttrs",{x:d[6],y:d[7]})}s.updateItem(a,l,!1)}else a=s.addItem(e,l,!1);a&&r[e+"s"].push(a)})},t.prototype.changeData=function(e,r){r===void 0&&(r=!0);var i=this;if(!er(e))return this;r&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:e}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(j){return i.clearItemStates(j)}),this.getEdges().map(function(j){return i.clearItemStates(j)});var a=this.get("canvas"),s=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(e),i.render());var u=this.get("itemMap"),l={nodes:[],edges:[]},d=e.combos;if(d){var v=lt(d,e.nodes);this.set("comboTrees",v)}else this.set("comboTrees",[]);this.diffItems("node",l,e.nodes),Object(p.each)(u,function(j,F){u[F].getModel().depth=0,j.getType&&j.getType()==="edge"||(j.getType&&j.getType()==="combo"?(delete u[F],j.destroy()):l.nodes.indexOf(j)<0&&(delete u[F],i.remove(j,!1)))});for(var k=this.getCombos(),T=k.length-1;T>=0;T--)k[T].destroyed&&k.splice(T,1);d&&(i.addCombos(d),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,e.edges),Object(p.each)(u,function(j,F){(!j.getType||j.getType()!=="node"&&j.getType()!=="combo")&&l.edges.indexOf(j)<0&&(delete u[F],i.remove(j,!1))}),this.set({nodes:l.nodes,edges:l.edges});var I=this.get("layoutController");return I&&(I.changeData(),i.get("animate")&&!I.getLayoutType()?i.positionsAnimate():i.autoPaint()),setTimeout(function(){a.set("localRefresh",s)},16),this},t.prototype.addCombos=function(e){var r=this.get("comboTrees");this.get("itemController").addCombos(r,e)},t.prototype.createCombo=function(e,r){var i=this;this.set("comboSorted",!1);var a,s="";if(e){if(Object(p.isString)(e))s=e,a={id:e};else{if(!(s=e.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");a=e}var u=r.map(function(d){var v=i.findById(d),k=v.getModel(),T="";v.getType&&(T=v.getType());var I={id:v.getID(),itemType:T};return T==="combo"?(I.parentId=s,k.parentId=s):T==="node"&&(I.comboId=s,k.comboId=s),I});a.children=u,this.addItem("combo",a,!1),this.set("comboSorted",!1);var l=this.get("comboTrees");(l||[]).forEach(function(d){we(d,function(v){return v.id!==s||(v.itemType="combo",v.children=u,!1)})}),l&&this.sortCombos()}},t.prototype.uncombo=function(e){var r=this,i=e;if(Object(p.isString)(e)&&(i=this.findById(e)),!i||i.getType&&i.getType()!=="combo")console.warn("The item is not a combo!");else{var a=i.getModel().parentId,s=this.get("comboTrees");s||(s=[]);var u,l=this.get("itemMap"),d=i.get("id"),v=[],k=this.get("combos"),T=this.findById(a);if(s.forEach(function(j){u||we(j,function(F){if(F.id===d){u=F,i.getEdges().forEach(function(V){r.removeItem(V,!1)});var G=k.indexOf(i);k.splice(G,1),delete l[d],i.destroy()}return!a||!u||F.id!==a||(T.removeCombo(i),(G=(v=F.children).indexOf(u))!==-1&&v.splice(G,1),u.children.forEach(function(V){var q=r.findById(V.id),$=q.getModel();q.getType&&q.getType()==="combo"?(V.parentId=a,delete V.comboId,$.parentId=a,delete $.comboId):q.getType&&q.getType()==="node"&&(V.comboId=a,$.comboId=a),T.addChild(q),v.push(V)}),!1)})}),!a&&u){var I=s.indexOf(u);s.splice(I,1),u.children.forEach(function(j){j.parentId=void 0;var F=r.findById(j.id).getModel();delete F.parentId,delete F.comboId,j.itemType!=="node"&&s.push(j)})}}},t.prototype.updateCombos=function(){var e=this,r=this.get("comboTrees"),i=this.get("itemController"),a=this.get("itemMap");(r||[]).forEach(function(s){we(s,function(u){if(!u)return!0;var l=a[u.id];if(l&&l.getType&&l.getType()==="combo"){var d=Object(m.__spreadArray)([],l.getStates());Object(p.each)(d,function(v){return e.setItemState(l,v,!1)}),i.updateCombo(l,u.children),Object(p.each)(d,function(v){return e.setItemState(l,v,!0)})}return!0})}),this.sortCombos()},t.prototype.updateCombo=function(e){var r,i=this,a=e;if(Object(p.isString)(e)&&(a=this.findById(e)),!a||a.getType&&a.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{r=a.get("id");var s=this.get("comboTrees"),u=this.get("itemController"),l=this.get("itemMap");(s||[]).forEach(function(d){we(d,function(v){if(!v)return!0;var k=l[v.id];if(r===v.id&&k&&k.getType&&k.getType()==="combo"){var T=Object(m.__spreadArray)([],k.getStates());Object(p.each)(T,function(I){k.getStateStyle(I)&&i.setItemState(k,I,!1)}),u.updateCombo(k,v.children),Object(p.each)(T,function(I){k.getStateStyle(I)&&i.setItemState(k,I,!0)}),r&&(r=v.parentId)}return!0})})}},t.prototype.updateComboTree=function(e,r,i){i===void 0&&(i=!0);var a;this.set("comboSorted",!1);var s,u=(a=Object(p.isString)(e)?this.findById(e):e).getModel(),l=u.comboId||u.parentId,d="";if(a.getType&&(d=a.getType()),r&&d==="combo"){var v,k=this.get("comboTrees"),T=!0;if((k||[]).forEach(function(V){v||Ft(V,function(q){if(!v)return q.id===a.getID()&&(v=q),!0})}),Ft(v,function(V){return V.id!==r||(T=!1,!1)}),!T)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(i&&this.get("enabledStack")){var I={},j={};d==="combo"?(I.combos=[{id:u.id,parentId:u.parentId}],j.combos=[{id:u.id,parentId:r}]):d==="node"&&(I.nodes=[{id:u.id,parentId:u.comboId}],j.nodes=[{id:u.id,parentId:r}]),this.pushStack("updateComboTree",{before:I,after:j})}if(u.parentId||u.comboId){var F=this.findById(u.parentId||u.comboId);F&&F.removeChild(a)}d==="combo"?u.parentId=r:d==="node"&&(u.comboId=r),r&&(s=this.findById(r))&&s.addChild(a),l&&(s=this.findById(l))&&s.removeChild(a);var G=vt(this.get("comboTrees"),u.id,r);this.set("comboTrees",G),this.updateCombos()},t.prototype.save=function(){var e=[],r=[],i=[];return Object(p.each)(this.get("nodes"),function(a){e.push(a.getModel())}),Object(p.each)(this.get("edges"),function(a){r.push(a.getModel())}),Object(p.each)(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:e,edges:r,combos:i}},t.prototype.changeSize=function(e,r){return this.get("viewController").changeSize(e,r),this},t.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var e=this.get("nodes"),r=this.get("edges"),i=this.get("edges");Object(p.each)(e,function(a){a.refresh()}),Object(p.each)(r,function(a){a.refresh()}),Object(p.each)(i,function(a){a.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if(Object(p.isString)(e)&&(e=this.findById(e)),e&&(!e.getType||e.getType()==="combo"))return e.getChildren();console.warn("The combo does not exist!")},t.prototype.positionsAnimate=function(){var e=this;e.emit("beforeanimate");var r=e.get("animateCfg"),i=r.onFrame,a=e.getNodes(),s=a.map(function(u){var l=u.getModel();return{id:l.id,x:l.x,y:l.y}});e.isAnimating()&&e.stopAnimate(),e.get("canvas").animate(function(u){Object(p.each)(s,function(l){var d=e.findById(l.id);if(d&&!d.destroyed){var v=d.get("originAttrs"),k=d.get("model");if(!v){var T=d.getContainer().getMatrix();T||(T=[1,0,0,0,1,0,0,0,1]),v={x:T[6],y:T[7]},d.set("originAttrs",v)}if(i){var I=i(d,u,l,v);d.set("model",Object.assign(k,I))}else k.x=v.x+(l.x-v.x)*u,k.y=v.y+(l.y-v.y)*u}}),e.refreshPositions()},{duration:r.duration,easing:r.easing,callback:function(){Object(p.each)(a,function(u){u.set("originAttrs",null)}),r.callback&&r.callback(),e.emit("afteranimate"),e.animating=!1}})},t.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var e,r=this.get("nodes"),i=this.get("edges"),a=this.get("vedges"),s=this.get("combos"),u={};Object(p.each)(r,function(l){e=l.getModel();var d=l.get("originAttrs");if(!d||e.x!==d.x||e.y!==d.y){var v=l.updatePosition({x:e.x,y:e.y});u[e.id]=v,e.comboId&&(u[e.comboId]=u[e.comboId]||v)}}),s&&s.length!==0&&this.updateCombos(),Object(p.each)(i,function(l){var d=l.getSource().getModel(),v=l.getTarget();if(!Object(p.isPlainObject)(v)){var k=v.getModel();(u[d.id]||u[k.id]||l.getModel().isComboEdge)&&l.refresh()}}),Object(p.each)(a,function(l){l.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},t.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},t.prototype.setMode=function(e){return this.get("modeController").setMode(e),this},t.prototype.clear=function(e){var r;return e===void 0&&(e=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e,r,i){var a=this,s=this.get("layoutController");if(Object(p.isString)(e)&&(e={type:e}),r){var u=i;u||(u=r==="begin"?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var l=["force","gForce","fruchterman"];l.includes(e.type)||!e.type&&l.includes(s==null?void 0:s.layoutType)?e.center=[u.x,u.y]:this.once("afterlayout",function(k){var T=a.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*T[0]+T[6],u.y=u.y*T[0]+T[7];var I=a.getGroup().getCanvasBBox(),j=I.minX,F=I.maxX,G=I.minY,V={x:(j+F)/2,y:(G+I.maxY)/2};r==="begin"&&(V.x=j,V.y=G),a.translate(u.x-V.x,u.y-V.y)})}var d=this.get("layout"),v={};Object.assign(v,d,e),this.set("layout",v),s.isLayoutTypeSame(v)&&v.gpuEnabled===d.gpuEnabled?s.updateLayoutCfg(v):s.changeLayout(v)},t.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},t.prototype.layout=function(){var e=this.get("layoutController"),r=this.get("layout");r&&e&&(r.workerEnabled?e.layout():e.layoutMethod?e.relayout(!0):e.layout())},t.prototype.collapseCombo=function(e){var r=this;if(Object(p.isString)(e)&&(e=this.findById(e)),e){this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel();this.get("itemController").collapseCombo(e),i.collapsed=!0;var a=this.getEdges().concat(this.get("vedges")),s=[],u=[],l=this.get("comboTrees"),d=!1;(l||[]).forEach(function(T){d||Ft(T,function(I){if(d&&I.depth<=i.depth)return!1;if(i.id===I.id&&(d=!0),d){var j=r.findById(I.id);j&&j.getType&&j.getType()==="combo"&&(s=s.concat(j.getNodes()),u=u.concat(j.getCombos()))}return!0})});var v={},k=[];a.forEach(function(T){if(!T.isVisible()||T.getModel().isVEdge){var I=T.getSource(),j=T.getTarget();if((s.includes(I)||u.includes(I))&&!s.includes(j)&&!u.includes(j)||I.getModel().id===i.id){if((q=T.getModel()).isVEdge)return void r.removeItem(T,!1);for(var F=j.getModel();!j.isVisible();){if(!(j=r.findById(F.parentId||F.comboId))||!F.parentId&&!F.comboId)return;F=j.getModel()}var G=F.id;if(v[i.id+"-"+G])return void(v[i.id+"-"+G]+=q.size||1);var V=r.addItem("vedge",{source:i.id,target:G,isVEdge:!0},!1);v[i.id+"-"+G]=q.size||1,k.push(V)}else if(!s.includes(I)&&!u.includes(I)&&(s.includes(j)||u.includes(j))||j.getModel().id===i.id){var q;if((q=T.getModel()).isVEdge)return void r.removeItem(T,!1);for(var $=I.getModel();!I.isVisible();){if(!(I=r.findById($.parentId||$.comboId))||!$.parentId&&!$.comboId)return;$=I.getModel()}var ve=$.id;if(v[ve+"-"+i.id])return void(v[ve+"-"+i.id]+=q.size||1);V=r.addItem("vedge",{target:i.id,source:ve,isVEdge:!0},!1),v[ve+"-"+i.id]=q.size||1,k.push(V)}}}),k.forEach(function(T){var I=T.getModel();r.updateItem(T,{size:v[I.source+"-"+I.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})}else console.warn("The combo to be collapsed does not exist!")},t.prototype.expandCombo=function(e){var r=this;if(Object(p.isString)(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel();this.get("itemController").expandCombo(e),i.collapsed=!1;var a=this.getEdges().concat(this.get("vedges")),s=[],u=[],l=this.get("comboTrees"),d=!1;(l||[]).forEach(function(T){d||Ft(T,function(I){if(d&&I.depth<=i.depth)return!1;if(i.id===I.id&&(d=!0),d){var j=r.findById(I.id);j&&j.getType&&j.getType()==="combo"&&(s=s.concat(j.getNodes()),u=u.concat(j.getCombos()))}return!0})});var v={},k={};a.forEach(function(T){if(!T.isVisible()||T.getModel().isVEdge){var I=T.getSource(),j=T.getTarget(),F=I.get("id"),G=j.get("id");if((s.includes(I)||u.includes(I))&&!s.includes(j)&&!u.includes(j)||F===i.id){if(T.getModel().isVEdge)return void r.removeItem(T,!1);for(var V=j.getModel();!j.isVisible();){if(!(j=r.findById(V.comboId||V.parentId))||!V.parentId&&!V.comboId)return;V=j.getModel()}G=V.id;for(var q=I.getModel();!I.isVisible();){if(!(I=r.findById(q.comboId||q.parentId))||!q.parentId&&!q.comboId)return;if(q.comboId===i.id||q.parentId===i.id)break;q=I.getModel()}if(F=q.id,G){if(v[ve=F+"-"+G])return v[ve]+=T.getModel().size||1,void r.updateItem(k[ve],{size:v[ve]},!1);var $=r.addItem("vedge",{source:F,target:G,isVEdge:!0},!1);v[ve]=T.getModel().size||1,k[ve]=$}}else if(!s.includes(I)&&!u.includes(I)&&(s.includes(j)||u.includes(j))||G===i.id){if(T.getModel().isVEdge)return void r.removeItem(T,!1);for(q=I.getModel();!I.isVisible();){if(!(I=r.findById(q.comboId||q.parentId))||!q.parentId&&!q.comboId)return;q=I.getModel()}for(F=q.id,V=j.getModel();!j.isVisible();){if(!(j=r.findById(V.comboId||V.parentId))||!V.parentId&&!V.comboId)return;if(V.comboId===i.id||V.parentId===i.id)break;V=j.getModel()}if(G=V.id,F){var ve;if(v[ve=F+"-"+G])return v[ve]+=T.getModel().size||1,void r.updateItem(k[ve],{size:v[ve]},!1);$=r.addItem("vedge",{target:G,source:F,isVEdge:!0},!1),v[ve]=T.getModel().size||1,k[ve]=$}}else(s.includes(I)||u.includes(I))&&(s.includes(j)||u.includes(j))&&I.isVisible()&&j.isVisible()&&T.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})}},t.prototype.collapseExpandCombo=function(e){if(Object(p.isString)(e)&&(e=this.findById(e)),e&&(!e.getType||e.getType()==="combo")){for(var r=e.getModel(),i=this.findById(r.parentId);i;){var a=i.getModel();if(a.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(i=void 0);i=this.findById(a.parentId)}r.collapsed?this.expandCombo(e):this.collapseCombo(e),this.updateCombo(e)}},t.prototype.sortCombos=function(){var e=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var r=[],i={};(this.get("comboTrees")||[]).forEach(function(a){Ft(a,function(s){return r[s.depth]?r[s.depth].push(s.id):r[s.depth]=[s.id],i[s.id]=s.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(a){var s=a.getModel(),u=i[s.source]||0,l=i[s.target]||0,d=Math.max(u,l);r[d]?r[d].push(s.id):r[d]=[s.id]}),r.forEach(function(a){if(a&&a.length)for(var s=a.length-1;s>=0;s--){var u=e.findById(a[s]);u&&u.toFront()}})}},t.prototype.getNeighbors=function(e,r){var i=e;return Object(p.isString)(e)&&(i=this.findById(e)),i.getNeighbors(r)},t.prototype.getNodeDegree=function(e,r,i){r===void 0&&(r=void 0),i===void 0&&(i=!1);var a=e;Object(p.isString)(e)&&(a=this.findById(e));var s=this.get("degrees");s&&!i||(s=W(this.save()),this.set("degrees",s));var u=s[a.getID()],l=0;if(!u)return 0;switch(r){case"in":l=u.inDegree;break;case"out":l=u.outDegree;break;case"all":l=u;break;default:l=u.degree}return l},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},t.prototype.pushStack=function(e,r,i){if(e===void 0&&(e="update"),i===void 0&&(i="undo"),this.get("enabledStack")){var a=r?Object(p.clone)(r):{before:{},after:Object(p.clone)(this.save())};i==="redo"?this.redoStack.push({action:e,data:a}):this.undoStack.push({action:e,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},t.prototype.getAdjMatrix=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix");return i&&e||(i=z(this.save(),r),this.set("adjMatrix",i)),i},t.prototype.getShortestPathMatrix=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return i&&e||(i=z(this.save(),r),this.set("adjMatrix",i)),a&&e||(a=ie(this.save(),r),this.set("shortestPathMatrix",a)),a},t.prototype.on=function(e,r,i){return n.prototype.on.call(this,e,r,i)},t.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},t.prototype.createHull=function(e){if(e.members&&!(e.members.length<1)){var r=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),r&&!r.get("destroyed")||((r=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",r)),i[e.id])return console.warn("Existed hull id."),i[e.id];var a=r.addGroup({id:e.id+"-container"}),s=new Xe(this,Object(m.__assign)(Object(m.__assign)({},e),{group:a}));return i[s.id]=s,s}console.warn("Create hull failed! The members is empty.")},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var r;r=Object(p.isString)(e)?this.getHullById(e):e,delete this.get("hullMap")[r.id],r.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();e&&Object.keys(e).length&&(Object.keys(e).forEach(function(r){e[r].destroy()}),this.set("hullMap",{}))},t}(P.a);function Ve(n){return(Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var ot=L.a.transform,pt=["startArrow","endArrow"],Et={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},mt={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:Et,combo:Et},xt={options:{},itemType:"",type:"",getCustomConfig:function(n){return{}},getOptions:function(n,t){return t==="move"||t==="bbox"?{}:Object(p.deepMix)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(n)||{},n)},draw:function(n,t){var e=this.drawShape(n,t);return e.set("className",this.itemType+"-shape"),n.label&&this.drawLabel(n,t).set("className",this.itemType+"-label"),e},afterDraw:function(n,t,e){},drawShape:function(n,t){return null},drawLabel:function(n,t){var e=this.getOptions(n).labelCfg||{},r=this.getLabelStyle(n,e,t),i=r.rotate;delete r.rotate;var a=t.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape"});if(i){var s=a.getBBox(),u=a.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),r.rotateCenter)switch(r.rotateCenter){case"center":u=ot(u,[["t",-s.width/2,-s.height/2],["r",i],["t",s.width/2,s.height/2]]);break;case"lefttop":u=ot(u,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":u=ot(u,[["t",-r.x,-r.y-s.height/2],["r",i],["t",r.x,r.y+s.height/2]]);break;default:u=ot(u,[["t",-s.width/2,-s.height/2],["r",i],["t",s.width/2,s.height/2]])}else u=ot(u,[["t",-r.x,-r.y-s.height/2],["r",i],["t",r.x,r.y+s.height/2]]);a.setMatrix(u)}if(r.background){var l=this.drawLabelBg(n,t,a),d=this.itemType+"-label-bg";l.set("classname",d),a.toFront()}return a},drawLabelBg:function(n,t,e){var r=this.options.labelCfg,i=Object(p.mix)({},r,n.labelCfg),a=this.getLabelBgStyleByPosition(e,n,i,t);return t.addShape("rect",{name:"text-bg-shape",attrs:a})},getLabelStyleByPosition:function(n,t,e){return{text:n.label}},getLabelBgStyleByPosition:function(n,t,e,r){return{}},getLabelStyle:function(n,t,e){var r=this.getLabelStyleByPosition(n,t,e),i=this.itemType+"Label",a=ir[i]?ir[i].style:null;return Object(m.__assign)(Object(m.__assign)(Object(m.__assign)({},a),r),t.style)},getShapeStyle:function(n){return n.style},update:function(n,t,e){this.updateShapeStyle(n,t,e),this.updateLabel(n,t,e)},updateShapeStyle:function(n,t,e){var r=t.getContainer(),i=t.getKeyShape(),a=Object(p.mix)({},i.attr(),n.style),s=function(l){var d,v=a[l];if(Object(p.isPlainObject)(v)){var k=r.find(function(T){return T.get("name")===l});k&&k.attr(v)}else i.attr(((d={})[l]=v,d))};for(var u in a)s(u)},updateLabel:function(n,t,e){var r=t.getContainer(),i=this.getOptions({},e).labelCfg,a=this.itemType+"-label",s=r.find(function(ve){return ve.get("className")===a}),u=this.itemType+"-label-bg",l=r.find(function(ve){return ve.get("classname")===u});if(n.label||n.label==="")if(s){var d={};t.getModel&&(d=t.getModel().labelCfg);var v=Object(p.deepMix)({},i,d,n.labelCfg),k=this.getLabelStyleByPosition(n,v,r),T=n.labelCfg?n.labelCfg.style:void 0,I=v.style&&v.style.background,j=Object(m.__assign)(Object(m.__assign)(Object(m.__assign)({},s.attr()),k),T),F=j.rotate;if(delete j.rotate,F){var G=[1,0,0,0,1,0,0,0,1];G=ot(G,[["t",-j.x,-j.y],["r",F],["t",j.x,j.y]]),s.resetMatrix(),s.attr(Object(m.__assign)(Object(m.__assign)({},j),{matrix:G}))}else s.resetMatrix(),s.attr(j);if(l)if(j.background){var V=this.getLabelBgStyleByPosition(s,n,v,r),q=Object(m.__assign)(Object(m.__assign)({},V),I);if(l.resetMatrix(),F){var $=[1,0,0,0,1,0,0,0,1];$=ot($,[["t",-q.x,-q.y],["r",F],["t",q.x,q.y]]),q.matrix=$}l.attr(q)}else r.removeChild(l);else j.background&&((l=this.drawLabelBg(n,r,s)).set("classname",u),s.toFront())}else this.drawLabel(n,r).set("className",a)},afterUpdate:function(n,t){},setState:function(n,t,e){var r,i,a=e.get("keyShape");if(a&&!a.destroyed){var s=e.getType(),u=Object(p.isBoolean)(t)?n:n+":"+t,l=this.getStateStyle(u,e),d=e.getStateStyle(u);if(d||l){var v=Object(p.mix)({},d||l),k=e.getContainer(),T={x:1,y:1,cx:1,cy:1};if(s==="combo"&&(T.r=1,T.width=1,T.height=1),t){var I=function(st){var jt,gt=v[st];if(Object(p.isPlainObject)(gt)&&!pt.includes(st)){var Pt=k.find(function(Rt){return Rt.get("name")===st});Pt&&Pt.attr(gt)}else a.attr(((jt={})[st]=gt,jt))};for(var j in v)I(j)}else{var F=Wt(e.getCurrentStatesStyle()),G=e.getModel(),V=Object(p.mix)({},G.style,Wt(e.getOriginStyle())),q=a.get("name"),$=a.attr(),ve={};Object.keys($).forEach(function(st){if(st!=="img"){var jt=$[st];jt&&Ve(jt)==="object"?ve[st]=Object(p.clone)(jt):ve[st]=jt}});var de={},me=function(st){var jt=v[st];if(Object(p.isPlainObject)(jt)&&!pt.includes(st)){var gt=k.find(function(Zt){return Zt.get("name")===st});if(gt){var Pt=Wt(gt.attr());Object(p.each)(jt,function(Zt,Ct){if(st===q&&ve[Ct]&&!T[Ct]){delete ve[Ct];var Vt=V[st][Ct]||mt[s][Ct];a.attr(Ct,Vt)}else if(Pt[Ct]||Pt[Ct]===0){delete Pt[Ct];var Dt=V[st][Ct]||mt[s][Ct];gt.attr(Ct,Dt)}}),de[st]=Pt}}else if(ve[st]&&!T[st]){delete ve[st];var Rt=V[st]||(V[q]?V[q][st]:void 0)||mt[s][st];a.attr(st,Rt)}};for(var Ie in v)me(Ie);for(var j in q?de[q]=ve:Object(p.mix)(de,ve),F)if(!T[j]){var Ee=F[j];Object(p.isPlainObject)(Ee)&&!pt.includes(j)||(q?(Object(p.mix)(V[q],((i={})[j]=Ee,i)),delete V[j]):Object(p.mix)(V,((r={})[j]=Ee,r)),delete F[j])}var Pe={};Object(p.deepMix)(Pe,V,de,F);var Ze=!1,it=function(st){var jt,gt,Pt=Pe[st];if(Object(p.isPlainObject)(Pt)&&!pt.includes(st)){var Rt=k.find(function(Ct){return Ct.get("name")===st});Rt&&(Rt.get("type")==="text"&&(delete Pt.x,delete Pt.y,delete Pt.matrix),st===q&&(s==="combo"&&(delete Pt.r,delete Pt.width,delete Pt.height),Ze=!0),Rt.attr(Pt))}else if(!Ze){var Zt=Pt||mt[s][st];s==="combo"?q||a.attr(((jt={})[st]=Zt,jt)):a.attr(((gt={})[st]=Zt,gt))}};for(var ct in Pe)it(ct)}}}},getStateStyle:function(n,t){var e=t.getModel(),r=t.getType(),i=this.getOptions(e),a=i.stateStyles,s=i.style,u=s===void 0?{}:s,l=e.stateStyles?e.stateStyles[n]:a&&a[n];return r==="combo"?Object(p.clone)(l):Object(p.mix)({},u,l)},getControlPoints:function(n){return n.controlPoints},getAnchorPoints:function(n){var t,e;return(n==null?void 0:n.anchorPoints)||((t=this.getCustomConfig(n))===null||t===void 0?void 0:t.anchorPoints)||((e=this.options)===null||e===void 0?void 0:e.anchorPoints)}},Ot={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:ir.nodeLabel.offset,getSize:function(n){var t=n.size||this.getOptions({}).size||ir.defaultNode.size;return Object(p.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),Object(p.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(n,t){var e=t.position||this.labelPosition;if(e==="center")return{x:0,y:0,text:n.label};var r=t.offset;Object(p.isNil)(r)&&(r=this.offset);var i,a=this.getSize(n),s=a[0],u=a[1];switch(e){case"top":i={x:0,y:0-u/2-r,textBaseline:"bottom"};break;case"bottom":i={x:0,y:u/2+r,textBaseline:"top"};break;case"left":i={x:0-s/2-r,y:0,textAlign:"right"};break;default:i={x:s/2+r,y:0,textAlign:"left"}}return i.text=n.label,i},getLabelBgStyleByPosition:function(n,t,e,r){if(!n)return{};var i=n.getBBox(),a=e.style&&e.style.background;if(!a)return{};var s,u=Vr(a.padding),l=i.width+u[1]+u[3],d=i.height+u[0]+u[2],v=e.offset;return Object(p.isNil)(v)&&(v=this.offset),s={x:i.minX-u[3],y:i.minY-u[0]},s=Object(m.__assign)(Object(m.__assign)(Object(m.__assign)({},s),a),{width:l,height:d})},drawShape:function(n,t){var e=this.shapeType,r=this.getShapeStyle(n);return t.addShape(e,{attrs:r,draggable:!0,name:"node-shape"})},updateLinkPoints:function(n,t){var e,r=this.getOptions(n).linkPoints,i=t.find(function(me){return me.get("className")==="link-point-left"}),a=t.find(function(me){return me.get("className")==="link-point-right"}),s=t.find(function(me){return me.get("className")==="link-point-top"}),u=t.find(function(me){return me.get("className")==="link-point-bottom"});i&&(e=i.attr()),a&&!e&&(e=a.attr()),s&&!e&&(e=s.attr()),u&&!e&&(e=u.attr()),e||(e=r);var l=Object(p.mix)({},e,n.linkPoints),d=l.fill,v=l.stroke,k=l.lineWidth,T=l.size/2;T||(T=l.r);var I=n.linkPoints?n.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},j=I.left,F=I.right,G=I.top,V=I.bottom,q=this.getSize(n),$=q[0],ve=q[1],de={r:T,fill:d,stroke:v,lineWidth:k};i?j||j===void 0?i.attr(Object(m.__assign)(Object(m.__assign)({},de),{x:-$/2,y:0})):i.remove():j&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},de),{x:-$/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a?(F||F===void 0||a.remove(),a.attr(Object(m.__assign)(Object(m.__assign)({},de),{x:$/2,y:0}))):F&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},de),{x:$/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),s?(G||G===void 0||s.remove(),s.attr(Object(m.__assign)(Object(m.__assign)({},de),{x:0,y:-ve/2}))):G&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},de),{x:0,y:-ve/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u?V||V===void 0?u.attr(Object(m.__assign)(Object(m.__assign)({},de),{x:0,y:ve/2})):u.remove():V&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},de),{x:0,y:ve/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(n,t,e,r){t.get("keyShape").attr(Object(m.__assign)({},e)),this.updateLabel(n,t),r&&this.updateIcon(n,t)},updateIcon:function(n,t){var e=this,r=t.getContainer(),i=this.getOptions(n).icon,a=(n.icon?n.icon:{show:void 0}).show,s=r.find(function(k){return k.get("className")===e.type+"-icon"});if(s)if(a||a===void 0){var u=Object(p.mix)({},s.attr(),i),l=u.width,d=u.height;s.attr(Object(m.__assign)(Object(m.__assign)({},u),{x:-l/2,y:-d/2}))}else s.remove();else if(a){l=i.width,d=i.height,r.addShape("image",{attrs:Object(m.__assign)(Object(m.__assign)({},i),{x:-l/2,y:-d/2}),className:this.type+"-icon",name:this.type+"-icon"});var v=r.find(function(k){return k.get("className")==="node-label"});v&&v.toFront()}}},yt=Object(m.__assign)(Object(m.__assign)({},xt),Ot);nn.registerNode("single-node",yt);var qe={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:ir.defaultEdge.size,style:{x:0,y:0,stroke:ir.defaultEdge.style.stroke,lineAppendWidth:ir.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ir.edgeLabel.style.fill,fontSize:ir.edgeLabel.style.fontSize}},stateStyles:Object(m.__assign)({},ir.edgeStateStyles)},getPath:function(n){var t=[];return Object(p.each)(n,function(e,r){r===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t},getShapeStyle:function(n){var t=this.options.style,e={stroke:n.color},r=Object(p.mix)({},t,e,n.style),i=n.size||ir.defaultEdge.size,a=(n=this.getPathPoints(n)).startPoint,s=n.endPoint,u=this.getControlPoints(n),l=[a];u&&(l=l.concat(u)),l.push(s);var d=this.getPath(l);return Object(p.mix)({},ir.defaultEdge.style,{stroke:ir.defaultEdge.color,lineWidth:i,path:d},r)},updateShapeStyle:function(n,t,e){var r,i=t.getContainer(),a={stroke:n.color},s=((r=t.getKeyShape)===null||r===void 0?void 0:r.call(t))||i.find(function($){return $.get("className")==="edge-shape"}),u=n.size,l=(n=this.getPathPoints(n)).startPoint,d=n.endPoint,v=this.getControlPoints(n),k=[l];v&&(k=k.concat(v)),k.push(d);var T=s.attr(),I=Object(p.mix)({},a,T,n.style),j=n.sourceNode,F=n.targetNode,G={radius:I.radius};v||(G={source:j,target:F,offset:I.offset,radius:I.radius});var V=this.getPath(k,G),q={};e==="move"?q={path:V}:(T.endArrow&&I.endArrow===!1&&(n.style.endArrow={path:""}),T.startArrow&&I.startArrow===!1&&(n.style.startArrow={path:""}),q=Object(p.mix)(a,T,{lineWidth:u,path:V},n.style)),s&&s.attr(q)},getLabelStyleByPosition:function(n,t,e){var r,i=t.position||this.labelPosition,a={},s=e&&e.find(function(k){return k.get("className")==="edge-shape"});r=i==="start"?0:i==="end"?1:.5;var u,l=t.refX||this.refX,d=t.refY||this.refY;if(n.startPoint.x===n.endPoint.x&&n.startPoint.y===n.endPoint.y)return a.x=n.startPoint.x+l,a.y=n.startPoint.y+d,a.text=n.label,a;u=Object(p.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate;var v=ut(s,r,l,d,u);return a.x=v.x,a.y=v.y,a.rotate=v.rotate,a.textAlign=this._getTextAlign(i,v.angle),a.text=n.label,a},getLabelBgStyleByPosition:function(n,t,e,r){if(!n)return{};var i=n.getBBox(),a=e.style&&e.style.background;if(!a)return{};var s,u=a.padding,l=i.width+u[1]+u[3],d=i.height+u[0]+u[2],v=e.position||this.labelPosition,k=Object(m.__assign)(Object(m.__assign)({},a),{width:l,height:d,x:i.minX-u[2],y:i.minY-u[0],rotate:0});s=Object(p.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate;var T,I=r&&r.find(function(q){return q.get("className")==="edge-shape"});T=v==="start"?0:v==="end"?1:.5;var j=e.refX||this.refX,F=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return k.x=t.startPoint.x+j-l/2,k.y=t.startPoint.y+F-d/2,k;var G=ut(I,T,j-l/2,F+d/2,s),V=G.angle;return V>.5*Math.PI&&V<1.5*Math.PI&&(G=ut(I,T,j+l/2,F+d/2,s)),s&&(k.x=G.x,k.y=G.y),k.rotate=G.rotate,k},_getTextAlign:function(n,t){var e="center";return t?(t%=2*Math.PI,n!=="center"&&(e=t>=0&&t<=Math.PI/2||t>=1.5*Math.PI&&t<2*Math.PI?n:function(r){var i=r;return r==="start"?i="end":r==="end"&&(i="start"),i}(n)),e):n},getControlPoints:function(n){return n.controlPoints},getPathPoints:function(n){return n},drawShape:function(n,t){var e=this.getShapeStyle(n);return t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e})},drawLabel:function(n,t){var e,r=this.options.labelCfg;e=typeof window!="undefined"&&window.getComputedStyle!==void 0&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";var i=Object(p.deepMix)({fontFamily:e},r,n.labelCfg),a=this.getLabelStyle(n,i,t),s=a.rotate;delete a.rotate;var u=t.addShape("text",{attrs:a,name:"text-shape"});if(s&&u.rotateAtStart(s),a.background){var l=this.drawLabelBg(n,t,u),d=this.itemType+"-label-bg";l.set("classname",d),u.toFront()}return u},drawLabelBg:function(n,t,e){var r=this.options.labelCfg,i=Object(p.deepMix)({},r,n.labelCfg),a=this.getLabelStyle(n,i,t).rotate,s=this.getLabelBgStyleByPosition(e,n,i,t);delete s.rotate;var u=t.addShape("rect",{name:"text-bg-shape",attrs:s});return a&&u.rotateAtStart(a),u}},at=Object(m.__assign)(Object(m.__assign)({},xt),qe);nn.registerEdge("single-edge",at),nn.registerEdge("line",{getControlPoints:function(){}},"single-edge"),nn.registerEdge("spline",{getPath:function(n){return so(n)}},"single-edge"),nn.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(n){var t,e,r=n.startPoint,i=n.endPoint,a=(r.x+i.x)/2,s=(r.y+i.y)/2;if(n.controlPoints!==void 0){if(e=n.controlPoints[0],t=Rn(r,e,i),r.x<=i.x&&r.y>i.y?this.clockwise=t.x>e.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=t.x>e.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=t.y<e.y?0:1:this.clockwise=t.y<e.y?1:0,(e.x-r.x)/(e.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),Object(p.isArray)(n.curveOffset)&&(n.curveOffset=n.curveOffset[0]),n.curveOffset<0?this.clockwise=0:this.clockwise=1;var u={x:i.x-r.x,y:i.y-r.y},l=Math.atan2(u.y,u.x);e={x:n.curveOffset*Math.cos(-Math.PI/2+l)+a,y:n.curveOffset*Math.sin(-Math.PI/2+l)+s},t=Rn(r,e,i)}var d=gn(r,t);return[{x:d,y:d}]},getPath:function(n){var t=[];return t.push(["M",n[0].x,n[0].y]),n.length===2?t.push(["L",n[1].x,n[1].y]):t.push(["A",n[1].x,n[1].y,0,0,this.clockwise,n[2].x,n[2].y]),t}},"single-edge"),nn.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(n){var t=n.controlPoints;if(!t||!t.length){var e=n.startPoint,r=n.endPoint;n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),n.curvePosition===void 0&&(n.curvePosition=this.curvePosition),Object(p.isArray)(this.curveOffset)&&(n.curveOffset=n.curveOffset[0]),Object(p.isArray)(this.curvePosition)&&(n.curvePosition=n.curveOffset[0]),t=[Vi(e,r,n.curvePosition,n.curveOffset)]}return t},getPath:function(n){var t=[];return t.push(["M",n[0].x,n[0].y]),t.push(["Q",n[1].x,n[1].y,n[2].x,n[2].y]),t}},"single-edge"),nn.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(n){var t=n.controlPoints;if(n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),n.curvePosition===void 0&&(n.curvePosition=this.curvePosition),Object(p.isNumber)(n.curveOffset)&&(n.curveOffset=[n.curveOffset,-n.curveOffset]),Object(p.isNumber)(n.curvePosition)&&(n.curvePosition=[n.curvePosition,1-n.curvePosition]),!t||!t.length||t.length<2){var e=n.startPoint,r=n.endPoint;t=[Vi(e,r,n.curvePosition[0],n.curveOffset[0]),Vi(e,r,n.curvePosition[1],n.curveOffset[1])]}return t},getPath:function(n){var t=[];return t.push(["M",n[0].x,n[0].y]),t.push(["C",n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y]),t}},"single-edge"),nn.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(n){var t=n.startPoint,e=n.endPoint;n.curvePosition===void 0&&(n.curvePosition=this.curvePosition),n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),n.minCurveOffset===void 0&&(n.minCurveOffset=this.minCurveOffset),Object(p.isNumber)(n.curveOffset)&&(n.curveOffset=[n.curveOffset,-n.curveOffset]),Object(p.isNumber)(n.minCurveOffset)&&(n.minCurveOffset=[n.minCurveOffset,-n.minCurveOffset]),Object(p.isNumber)(n.curvePosition)&&(n.curvePosition=[n.curvePosition,1-n.curvePosition]);var r=e.y-t.y,i=[0,0];return n.curveOffset?i=n.curveOffset:Math.abs(r)<Math.abs(n.minCurveOffset[0])&&(i=n.minCurveOffset),[{x:t.x,y:t.y+r*this.curvePosition[0]+i[0]},{x:e.x,y:e.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),nn.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(n){var t=n.startPoint,e=n.endPoint;n.curvePosition===void 0&&(n.curvePosition=this.curvePosition),n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),n.minCurveOffset===void 0&&(n.minCurveOffset=this.minCurveOffset),Object(p.isNumber)(n.curveOffset)&&(n.curveOffset=[n.curveOffset,-n.curveOffset]),Object(p.isNumber)(n.minCurveOffset)&&(n.minCurveOffset=[n.minCurveOffset,-n.minCurveOffset]),Object(p.isNumber)(n.curvePosition)&&(n.curvePosition=[n.curvePosition,1-n.curvePosition]);var r=e.x-t.x,i=[0,0];return n.curveOffset?i=n.curveOffset:Math.abs(r)<Math.abs(n.minCurveOffset[0])&&(i=n.minCurveOffset),[{x:t.x+r*this.curvePosition[0]+i[0],y:t.y},{x:e.x-r*this.curvePosition[1]+i[1],y:e.y}]}},"cubic"),nn.registerEdge("loop",{getPathPoints:function(n){return Be(n)},getControlPoints:function(n){return n.controlPoints},afterDraw:function(n){n.controlPoints=void 0},afterUpdate:function(n){n.controlPoints=void 0}},"cubic");var ht={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:ir.comboLabel.refX,refY:ir.comboLabel.refY,options:{style:{stroke:ir.defaultCombo.style.stroke,fill:ir.defaultCombo.style.fill,lineWidth:ir.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ir.comboLabel.style.fill,fontSize:ir.comboLabel.style.fontSize}},stateStyles:Object(m.__assign)({},ir.comboStateStyles)},getSize:function(n){var t=Object(p.clone)(n.size||this.options.size||ir.defaultCombo.size);return Object(p.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),Object(p.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(n,t){var e=t.position||this.labelPosition,r=n.style,i=n.padding||this.options.padding;Object(p.isArray)(i)&&(i=i[0]);var a=t.refX,s=t.refY;Object(p.isNil)(a)&&(a=this.refX),Object(p.isNil)(s)&&(s=this.refY);var u,l=this.getSize(n),d=(Math.max(r.r,l[0]/2)||l[0]/2)+i;switch(e){case"top":u={x:0,y:-d-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:d+s,textBaseline:"bottom",textAlign:"center"};break;case"left":u={x:-d+a,y:0,textAlign:"left"};break;case"center":u={x:0,y:0,text:n.label,textAlign:"center"};break;default:u={x:d+a,y:0,textAlign:"right"}}return u.text=n.label,u},drawShape:function(n,t){var e=this.shapeType,r=this.getShapeStyle(n);return t.addShape(e,{attrs:r,draggable:!0,name:"combo-shape"})},updateShape:function(n,t,e){var r=t.get("keyShape");(n.animate===void 0?this.options.animate:n.animate)&&r.animate?r.animate(e,{duration:200,easing:"easeLinear"}):r.attr(Object(m.__assign)({},e)),this.updateLabel(n,t)}},Mt=Object(m.__assign)(Object(m.__assign)({},xt),ht);nn.registerCombo("single-combo",Mt),nn.registerCombo("circle",{options:{size:[ir.defaultCombo.size[0],ir.defaultCombo.size[0]],padding:ir.defaultCombo.padding[0],animate:!0,style:{stroke:ir.defaultCombo.style.stroke,fill:ir.defaultCombo.style.fill,lineWidth:ir.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ir.comboLabel.style.fill,fontSize:ir.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(m.__assign)({},ir.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(n,t){var e=this.getShapeStyle(n);return delete e.height,delete e.width,t.addShape("circle",{attrs:e,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(n){var t=this.options.style,e=n.padding||this.options.padding;Object(p.isArray)(e)&&(e=e[0]);var r,i={stroke:n.color},a=Object(p.mix)({},t,i,n.style);if(n.fixSize)r=Object(p.isNumber)(n.fixSize)?n.fixSize:n.fixSize[0];else{var s=this.getSize(n);r=!Object(p.isNumber)(a.r)||isNaN(a.r)?s[0]/2||ir.defaultCombo.style.r:Math.max(a.r,s[0]/2)||s[0]/2}a.r=r+e;var u=Object(m.__assign)({x:0,y:0},a);return n.style?n.style.r=r:n.style={r},u},update:function(n,t){var e=this.getSize(n),r=n.padding||this.options.padding;Object(p.isArray)(r)&&(r=r[0]);var i,a=Object(p.clone)(n.style);i=n.fixSize?Object(p.isNumber)(n.fixSize)?n.fixSize:n.fixSize[0]:Math.max(a.r,e[0]/2)||e[0]/2,a.r=i+r;var s=t.get("sizeCache");s&&(s.r=a.r);var u={stroke:n.color},l=t.get("keyShape"),d=Object(p.mix)({},l.attr(),u,a);n.style?n.style.r=i:n.style={r:i},this.updateShape(n,t,d,!0)}},"single-combo"),nn.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:ir.defaultCombo.style.stroke,fill:ir.defaultCombo.style.fill,lineWidth:ir.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ir.comboLabel.style.fill,fontSize:ir.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(m.__assign)({},ir.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(n,t){var e=this.getShapeStyle(n);return t.addShape("rect",{attrs:e,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(n,t){var e=t.position||this.labelPosition,r=n.style,i=n.padding||this.options.padding;Object(p.isNumber)(i)&&(i=[i,i,i,i]);var a=t.refX,s=t.refY;Object(p.isNil)(a)&&(a=this.refX),Object(p.isNil)(s)&&(s=this.refY);var u,l=r.width/2+i[3],d=r.height/2+i[0];switch(e){case"top":u={x:0-l+a,y:0-d+s,textBaseline:"top",textAlign:"left"};break;case"bottom":u={x:0,y:d+s,textBaseline:"bottom",textAlign:"center"};break;case"left":u={x:0-l+s,y:0,textAlign:"left"};break;case"center":u={x:0,y:0,text:n.label,textAlign:"center"};break;default:u={x:l+a,y:0,textAlign:"right"}}return u.text=n.label,u},getShapeStyle:function(n){var t=this.options.style,e=n.padding||this.options.padding;Object(p.isNumber)(e)&&(e=[e,e,e,e]);var r,i,a={stroke:n.color},s=Object(p.mix)({},t,a,n.style),u=this.getSize(n),l=n.collapsed&&n.fixCollapseSize?n.fixCollapseSize:n.fixSize;l?Object(p.isNumber)(l)?(r=l,i=l):(r=l[0],i=l[1]):(r=!Object(p.isNumber)(s.width)||isNaN(s.width)?u[0]||ir.defaultCombo.style.width:Math.max(s.width,u[0])||u[0],i=!Object(p.isNumber)(s.height)||isNaN(s.height)?u[1]||ir.defaultCombo.style.height:Math.max(s.height,u[1])||u[1]);var d=-r/2-e[3],v=-i/2-e[0];s.width=r+e[1]+e[3],s.height=i+e[0]+e[2];var k=Object(m.__assign)({x:d,y:v},s);return n.style?(n.style.width=r,n.style.height=i):n.style={width:r,height:i},k},update:function(n,t){var e=this.getSize(n),r=n.padding||this.options.padding;Object(p.isNumber)(r)&&(r=[r,r,r,r]);var i,a,s=Object(p.clone)(n.style),u=n.collapsed&&n.fixCollapseSize?n.fixCollapseSize:n.fixSize;u?Object(p.isNumber)(u)?(i=u,a=u):(i=u[0],a=u[1]):(i=Math.max(s.width,e[0])||e[0],a=Math.max(s.height,e[1])||e[1]),s.width=i+r[1]+r[3],s.height=a+r[0]+r[2];var l=t.get("sizeCache");l&&(l.width=s.width,l.height=s.height),s.x=-i/2-r[3],s.y=-a/2-r[0];var d={stroke:n.color},v=t.get("keyShape"),k=Object(p.mix)({},v.attr(),d,s);n.style?(n.style.width=i,n.style.height=a):n.style={width:i,height:a},this.updateShape(n,t,k,!1)},updateShape:function(n,t,e){var r=t.get("keyShape");(n.animate===void 0?this.options.animate:n.animate)&&r.animate?r.animate(e,{duration:200,easing:"easeLinear"}):r.attr(Object(m.__assign)({},e)),this.updateLabel(n,t)}},"single-combo"),nn.registerNode("simple-circle",{options:{size:ir.defaultNode.size,style:{x:0,y:0,stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize}},stateStyles:Object(m.__assign)({},ir.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(n,t){var e=this.getShapeStyle(n);return t.addShape("circle",{attrs:e,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.deepMix)({},t,e),i=this.getSize(n)[0]/2;return Object(m.__assign)({x:0,y:0,r:i},r)},update:function(n,t){var e=this.getSize(n),r={stroke:n.color,r:e[0]/2},i=t.get("keyShape"),a=Object(p.deepMix)({},i.attr(),r,n.style);this.updateShape(n,t,a,!0)}},"single-node"),nn.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(m.__assign)({},ir.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(n,t){var e=this.getShapeStyle(n);return t.addShape("rect",{attrs:e,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getSize(n),a=r.width||i[0],s=r.height||i[1];return Object(m.__assign)({x:-a/2,y:-s/2,width:a,height:s},r)},update:function(n,t){t.getContainer();var e=this.getOptions({}).style,r=this.getSize(n),i=t.get("keyShape");n.size||(r[0]=i.attr("width")||e.width,r[1]=i.attr("height")||e.height);var a={stroke:n.color,x:-r[0]/2,y:-r[1]/2,width:r[0],height:r[1]},s=Object(p.mix)({},e,i.attr(),a);s=Object(p.mix)(s,n.style),this.updateShape(n,t,s,!1)}},"single-node"),nn.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(n,t){var e=this.shapeType,r=this.getShapeStyle(n);delete r.fill;var i=t.addShape(e,{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(n,i),i},drawClip:function(n,t){var e=this.getOptions(n).clipCfg;if(e.show){var r=e.type,i=e.x,a=e.y,s=e.style;if(r==="circle"){var u=e.r;t.setClip({type:"circle",attrs:Object(m.__assign)({r:u,x:i,y:a},s)})}else if(r==="rect"){var l=e.width,d=e.height,v=i-l/2,k=a-d/2;t.setClip({type:"rect",attrs:Object(m.__assign)({x:v,y:k,width:l,height:d},s)})}else if(r==="ellipse"){var T=e.rx,I=e.ry;t.setClip({type:"ellipse",attrs:Object(m.__assign)({x:i,y:a,rx:T,ry:I},s)})}else if(r==="polygon"){var j=e.points;t.setClip({type:"polygon",attrs:Object(m.__assign)({points:j},s)})}else if(r==="path"){var F=e.path;t.setClip({type:"path",attrs:Object(m.__assign)({path:F},s)})}}},getShapeStyle:function(n){var t=this.getOptions(n).style,e=this.getSize(n),r=this.getOptions(n).img,i=e[0],a=e[1];return t&&(i=t.width||e[0],a=t.height||e[1]),Object(m.__assign)({x:-i/2,y:-a/2,width:i,height:a,img:r},t)},updateShapeStyle:function(n,t){var e=t.getContainer(),r=this.itemType+"-shape",i=e.find(function(s){return s.get("className")===r})||t.getKeyShape(),a=this.getShapeStyle(n);i&&i.attr(a)}},"single-node");var zt,Ut={triangle:function(n,t,e){n===void 0&&(n=10),t===void 0&&(t=15),e===void 0&&(e=0);var r=2*e;return"M "+r+",0 L "+(r+t)+",-"+n/2+" L "+(r+t)+","+n/2+" Z"},vee:function(n,t,e){n===void 0&&(n=15),t===void 0&&(t=20),e===void 0&&(e=0);var r=2*e;return"M "+r+",0 L "+(r+t)+",-"+n/2+`
        L `+(r+2*t/3)+",0 L "+(r+t)+","+n/2+" Z"},circle:function(n,t){return n===void 0&&(n=5),t===void 0&&(t=0),"M "+2*t+`, 0
            a `+n+","+n+" 0 1,0 "+2*n+`,0
            a `+n+","+n+" 0 1,0 "+2*-n+",0"},rect:function(n,t,e){n===void 0&&(n=10),t===void 0&&(t=10),e===void 0&&(e=0);var r=2*e;return"M "+r+","+-n/2+` 
        L `+(r+t)+","+-n/2+` 
        L `+(r+t)+","+n/2+` 
        L `+r+","+n/2+" Z"},diamond:function(n,t,e){n===void 0&&(n=15),t===void 0&&(t=15),e===void 0&&(e=0);var r=2*e;return"M "+r+`,0 
        L `+(r+t/2)+","+-n/2+` 
        L `+(r+t)+`,0 
        L `+(r+t/2)+","+n/2+" Z"},triangleRect:function(n,t,e,r,i,a){n===void 0&&(n=15),t===void 0&&(t=15),e===void 0&&(e=15),r===void 0&&(r=3),i===void 0&&(i=5),a===void 0&&(a=0);var s=2*a,u=s+t+i;return"M "+s+",0 L "+(s+t)+",-"+n/2+" L "+(s+t)+","+n/2+` Z
            M `+u+", -"+e/2+`
            L `+(u+r)+" -"+e/2+`
            L `+(u+r)+" "+e/2+`
            L `+u+" "+e/2+`
            Z`}},Xt={collapse:function(n,t,e){return[["M",n-e,t],["a",e,e,0,1,0,2*e,0],["a",e,e,0,1,0,2*-e,0],["M",n-e+4,t],["L",n+e-4,t]]},expand:function(n,t,e){return[["M",n-e,t],["a",e,e,0,1,0,2*e,0],["a",e,e,0,1,0,2*-e,0],["M",n-e+4,t],["L",n-e+2*e-4,t],["M",n-e+e,t-e+4],["L",n,t+e-4]]},upTriangle:function(n,t,e){var r=e*Math.cos(Math.PI/6),i=e*Math.sin(Math.PI/6);return[["M",n-r,t+i],["L",n+r,t+i],["L",n,t-e],["Z"]]},downTriangle:function(n,t,e){var r=e*Math.cos(Math.PI/6),i=e*Math.sin(Math.PI/6);return[["M",n-r,t-i],["L",n+r,t-i],["L",n,t+e],["Z"]]}},fr=nn,Or=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],kr=L.a.transform,br=Object(m.__assign)(Object(m.__assign)(Object(m.__assign)(Object(m.__assign)(Object(m.__assign)(Object(m.__assign)({},_),M),x),c),O),{transform:kr,mat3:L.b}),ur=function(){function n(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return n.prototype.initLayout=function(){},n.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},n.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var r=t.pipes;return Array.isArray(r)?r.map(function(i){return(i==null?void 0:i.type)||""}):null},n.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t);return Array.isArray(this.layoutType)?this.layoutType.every(function(r,i){return r===e[i]}):(t==null?void 0:t.type)===this.layoutType},n.prototype.refreshLayout=function(){var t=this.graph;t&&(t.get("animate")?t.positionsAnimate():t.refreshPositions())},n.prototype.changeLayout=function(t){this.layoutCfg=t,this.destoryLayoutMethods(),this.layout()},n.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},n.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods;t==null||t.forEach(function(e){e.destroy()}),this.layoutMethods=[]},n.prototype.destroyLayout=function(){var t=this.graph;this.destoryLayoutMethods(),t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},n.prototype.setDataFromGraph=function(){for(var t=[],e=[],r=[],i=[],a=[],s=[],u=this.graph.getNodes(),l=this.graph.getEdges(),d=this.graph.getCombos(),v=u.length,k=0;k<v;k++){var T=u[k];if(T&&!T.destroyed){var I=T.getModel();T.isVisible()?t.push(I):e.push(I)}}var j=l.length;for(k=0;k<j;k++){var F=l[k];F&&!F.destroyed&&(I=F.getModel(),F.isVisible()?I.isComboEdge?a.push(I):r.push(I):i.push(I))}var G=d.length;for(k=0;k<G;k++){var V=d[k];V.destroyed||(I=V.getModel(),V.isVisible()?s.push(I):i.push(I))}return{nodes:t,hiddenNodes:e,edges:r,hiddenEdges:i,combos:s,hiddenCombos:[],comboEdges:a}},n.prototype.reLayoutMethod=function(t,e){var r=this;return new Promise(function(i,a){var s=r.graph,u=e==null?void 0:e.type;e.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),i()},t.init(r.data),u==="force"&&(t.ticking=!1,t.forceSimulation.stop()),s.emit("beforesublayout",{type:u}),t.execute(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd()})},n.prototype.relayout=function(t){var e=this,r=this.graph,i=this.layoutMethods,a=this.layoutCfg;if(t){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(a.center,s)}r.emit("beforelayout");var u=Promise.resolve();i==null||i.forEach(function(l,d){var v=a[d];u=u.then(function(){return e.reLayoutMethod(l,v)})}),u.then(function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()}).catch(function(l){console.warn("relayout failed",l)})},n.prototype.filterLayoutData=function(t,e){var r,i,a=t.nodes,s=t.edges,u=Object(m.__rest)(t,["nodes","edges"]);if(!a)return t;if(r=Object(p.isFunction)(e==null?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0},Object(p.isFunction)(e==null?void 0:e.edgesFilter))i=e.edgesFilter;else{var l=a.reduce(function(d,v){return d[v.id]=!0,d},{});i=function(d){return l[d.source]&&l[d.target]}}return Object(m.__assign)({nodes:a.filter(r),edges:s.filter(i)},u)},n.prototype.getLayoutBBox=function(t){var e=this.graph,r=Object(p.groupBy)(e.getNodes(),function(a){return a.getModel().layoutOrder}),i=Object.values(r).map(function(a){var s=jn(a);return s.size=[s.width,s.height],s});return{groupNodes:Object.values(Object(p.groupBy)(t,"layoutOrder")),layoutNodes:i}},n.prototype.layoutAnimate=function(){},n.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(t[0].x!==void 0&&t[0].x!==null&&!Kr(t[0].x)){for(var e=[0,0],r=t.length,i=0;i<r;i++){var a=t[i];e[0]+=a.x,e[1]+=a.y}for(e[0]/=t.length,e[1]/=t.length,i=0;i<r;i++)(a=t[i]).x-=e[0],a.y-=e[1]}},n.prototype.initPositions=function(t,e){var r=this.graph;if(!e)return!1;var i=e?e.length:0;if(i){var a=.85*r.get("width"),s=.85*r.get("height"),u=Math.ceil(Math.sqrt(i)*(a/s)),l=a/(u-1),d=s/(Math.ceil(i/u)-1);isFinite(l)&&l||(l=0),isFinite(d)&&l||(d=0);for(var v=t[0]-a/2,k=t[1]-s/2,T=!0,I=0;I<i;I++){var j=e[I];Kr(+j.x)&&(T=!1,j.x=I%u*l+v),Kr(+j.y)&&(T=!1,j.y=Math.floor(I/u)*d+k)}return T}},n.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},n}(),an=function(n){this.graph=n,this.destroyed=!1,this.initEvents()};(function(n){n.CLICK="click",n.DBLCLICK="dblclick",n.MOUSEDOWN="mousedown",n.MOUDEUP="mouseup",n.CONTEXTMENU="contextmenu",n.MOUSEENTER="mouseenter",n.MOUSEOUT="mouseout",n.MOUSEOVER="mouseover",n.MOUSEMOVE="mousemove",n.MOUSELEAVE="mouseleave",n.DRAGSTART="dragstart",n.DRAGEND="dragend",n.DRAG="drag",n.DRAGENTER="dragenter",n.DRAGLEAVE="dragleave",n.DRAGOVER="dragover",n.DRAGOUT="dragout",n.DDROP="drop",n.KEYUP="keyup",n.KEYDOWN="keydown",n.WHEEL="wheel",n.FOCUS="focus",n.BLUR="blur",n.TOUCHSTART="touchstart",n.TOUCHMOVE="touchmove",n.TOUCHEND="touchend",n.CANVAS_TOUCHSTART="canvas:touchstart",n.CANVAS_TOUCHMOVE="canvas:touchmove",n.CANVAS_TOUCHEND="canvas:touchend",n.NODE_TOUCHSTART="node:touchstart",n.NODE_TOUCHMOVE="node:touchmove",n.NODE_TOUCHEND="node:touchend",n.COMBO_TOUCHSTART="combo:touchstart",n.COMBO_TOUCHMOVE="combo:touchmove",n.COMBO_TOUCHEND="combo:touchend",n.EDGE_TOUCHSTART="edge:touchstart",n.EDGE_TOUCHMOVE="edge:touchmove",n.EDGE_TOUCHEND="edge:touchend",n.NODE_CONTEXTMENU="node:contextmenu",n.NODE_CLICK="node:click",n.NODE_DBLCLICK="node:dblclick",n.NODE_MOUSEDOWN="node:mousedown",n.NODE_MOUSEUP="node:mouseup",n.NODE_MOUSEENTER="node:mouseenter",n.NODE_MOUSELEAVE="node:mouseleave",n.NODE_MOUSEMOVE="node:mousemove",n.NODE_MOUSEOUT="node:mouseout",n.NODE_MOUSEOVER="node:mouseover",n.NODE_DROP="node:drop",n.NODE_DRAGOVER="node:dragover",n.NODE_DRAGENTER="node:dragenter",n.NODE_DRAGLEAVE="node:dragleave",n.NODE_DRAGSTART="node:dragstart",n.NODE_DRAG="node:drag",n.NODE_DRAGEND="node:dragend",n.NODE_TAP="node:tap",n.NODE_PANSTART="node:panstart",n.NODE_PANMOVE="node:panmove",n.NODE_PANEND="node:panend",n.COMBO_CONTEXTMENU="combo:contextmenu",n.COMBO_CLICK="combo:click",n.COMBO_DBLCLICK="combo:dblclick",n.COMBO_MOUSEDOWN="combo:mousedown",n.COMBO_MOUSEUP="combo:mouseup",n.COMBO_MOUSEENTER="combo:mouseenter",n.COMBO_MOUSELEAVE="combo:mouseleave",n.COMBO_MOUSEMOVE="combo:mousemove",n.COMBO_MOUSEOUT="combo:mouseout",n.COMBO_MOUSEOVER="combo:mouseover",n.COMBO_DROP="combo:drop",n.COMBO_DRAGOVER="combo:dragover",n.COMBO_DRAGENTER="combo:dragenter",n.COMBO_DRAGLEAVE="combo:dragleave",n.COMBO_DRAGSTART="combo:dragstart",n.COMBO_DRAG="combo:drag",n.COMBO_DRAGEND="combo:dragend",n.COMBO_TAP="combo:tap",n.COMBO_PANSTART="combo:panstart",n.COMBO_PANMOVE="combo:panmove",n.COMBO_PANEND="combo:panend",n.EDGE_CONTEXTMENU="edge:contextmenu",n.EDGE_CLICK="edge:click",n.EDGE_DBLCLICK="edge:dblclick",n.EDGE_MOUSEDOWN="edge:mousedown",n.EDGE_MOUSEUP="edge:mouseup",n.EDGE_MOUSEENTER="edge:mouseenter",n.EDGE_MOUSELEAVE="edge:mouseleave",n.EDGE_MOUSEMOVE="edge:mousemove",n.EDGE_MOUSEOUT="edge:mouseout",n.EDGE_MOUSEOVER="edge:mouseover",n.EDGE_DROP="edge:drop",n.EDGE_DRAGOVER="edge:dragover",n.EDGE_DRAGENTER="edge:dragenter",n.EDGE_DRAGLEAVE="edge:dragleave",n.CANVAS_CONTEXTMENU="canvas:contextmenu",n.CANVAS_CLICK="canvas:click",n.CANVAS_DBLCLICK="canvas:dblclick",n.CANVAS_MOUSEDOWN="canvas:mousedown",n.CANVAS_MOUSEUP="canvas:mouseup",n.CANVAS_MOUSEENTER="canvas:mouseenter",n.CANVAS_MOUSELEAVE="canvas:mouseleave",n.CANVAS_MOUSEMOVE="canvas:mousemove",n.CANVAS_MOUSEOUT="canvas:mouseout",n.CANVAS_MOUSEOVER="canvas:mouseover",n.CANVAS_DROP="canvas:drop",n.CANVAS_DRAGENTER="canvas:dragenter",n.CANVAS_DRAGLEAVE="canvas:dragleave",n.CANVAS_DRAGSTART="canvas:dragstart",n.CANVAS_DRAG="canvas:drag",n.CANVAS_DRAGEND="canvas:dragend",n.CANVAS_TAP="canvas:tap",n.CANVAS_PANSTART="canvas:panstart",n.CANVAS_PANMOVE="canvas:panmove",n.CANVAS_PANEND="canvas:panend",n.BEFORERENDER="beforerender",n.AFTERRENDER="afterrender",n.BEFOREADDITEM="beforeadditem",n.AFTERADDITEM="afteradditem",n.BEFOREREMOVEITEM="beforeremoveitem",n.AFTERREMOVEITEM="afterremoveitem",n.BEFOREUPDATEITEM="beforeupdateitem",n.AFTERUPDATEITEM="afterupdateitem",n.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",n.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",n.BEFOREITEMSTATECHANGE="beforeitemstatechange",n.AFTERITEMSTATECHANGE="afteritemstatechange",n.BEFOREITEMREFRESH="beforeitemrefresh",n.AFTERITEMREFRESH="afteritemrefresh",n.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",n.AFTERITEMSTATESCLEAR="afteritemstatesclear",n.BEFOREMODECHANGE="beforemodechange",n.AFTERMODECHANGE="aftermodechange",n.BEFORELAYOUT="beforelayout",n.AFTERLAYOUT="afterlayout",n.BEFORECREATEEDGE="beforecreateedge",n.AFTERCREATEEDGE="aftercreateedge",n.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",n.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",n.BEFOREGRAPHREFRESH="beforegraphrefresh",n.AFTERGRAPHREFRESH="aftergraphrefresh",n.BEFOREANIMATE="beforeanimate",n.AFTERANIMATE="afteranimate",n.BEFOREPAINT="beforepaint",n.AFTERPAINT="afterpaint",n.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",n.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",n.GRAPHSTATECHANGE="graphstatechange",n.AFTERACTIVATERELATIONS="afteractivaterelations",n.NODESELECTCHANGE="nodeselectchange",n.TOOLTIPCHANGE="tooltipchange",n.WHEELZOOM="wheelzoom",n.VIEWPORTCHANGE="viewportchange",n.DRAGNODEEND="dragnodeend",n.STACKCHANGE="stackchange",n.TAP="tap",n.PINCHSTART="pinchstart",n.PINCHMOVE="pinchmove",n.PANSTART="panstart",n.PANMOVE="panmove",n.PANEND="panend"})(zt||(zt={}));var sn=fr.registerNode,Ii=fr.registerEdge,Wi=fr.registerCombo,fo=N.registerBehavior,or=ir,ga=(fr.registerNode,fr.registerEdge,fr.registerCombo,N.registerBehavior,o(270)),Xr=o(44),Ao=o(60),Nt=o(2);function uo(n,t,e){var r=[0,0,0,0,0,0,0,0,0];return Nt.a.fromTranslation(r,e),Nt.a.multiply(n,r,t)}function yo(n,t,e){var r=[0,0,0,0,0,0,0,0,0];return Nt.a.fromRotation(r,e),Nt.a.multiply(n,r,t)}function co(n,t,e){var r=[0,0,0,0,0,0,0,0,0];return Nt.a.fromScaling(r,e),Nt.a.multiply(n,r,t)}function Da(n,t){for(var e,r,i,a=n?[].concat(n):[1,0,0,0,1,0,0,0,1],s=0,u=t.length;s<u;s++){var l=t[s];switch(l[0]){case"t":uo(a,a,[l[1],l[2]]);break;case"s":co(a,a,[l[1],l[2]]);break;case"r":yo(a,a,l[1]);break;case"m":e=a,r=a,i=l[1],Nt.a.multiply(e,i,r)}}return a}function Ra(n,t){return n[0]*t[1]-t[0]*n[1]}function Hp(n,t,e){var r=Nt.d.angle(n,t),i=Ra(n,t)>=0;return e?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function qp(n,t,e){return e?(n[0]=t[1],n[1]=-1*t[0]):(n[0]=-1*t[1],n[1]=t[0]),n}var Kp=o(83),La=o.n(Kp),Zp=o(93),ys=o.n(Zp),$p=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function yc(n,t,e){var r;return(r=Math.round(n.h)>=60&&Math.round(n.h)<=240?e?Math.round(n.h)-2*t:Math.round(n.h)+2*t:e?Math.round(n.h)+2*t:Math.round(n.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function mc(n,t,e){return n.h===0&&n.s===0?n.s:((r=e?n.s-.16*t:t===4?n.s+.16:n.s+.05*t)>1&&(r=1),e&&t===5&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function bc(n,t,e){var r;return(r=e?n.v+.05*t:n.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function ms(n){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[],r=ys()(n),i=5;i>0;i-=1){var a=r.toHsv(),s=ys()({h:yc(a,i,!0),s:mc(a,i,!0),v:bc(a,i,!0)}).toHexString();e.push(s)}e.push(r.toHexString());for(var u=1;u<=4;u+=1){var l=r.toHsv(),d=ys()({h:yc(l,u),s:mc(l,u),v:bc(l,u)}).toHexString();e.push(d)}return t.theme==="dark"?$p.map(function(v){var k=v.index,T=v.opacity;return ys.a.mix(t.backgroundColor||"#141414",e[k],100*T).toHexString()}):e}var su={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ri={},uu={};Object.keys(su).forEach(function(n){Ri[n]=ms(su[n]),Ri[n].primary=Ri[n][5],uu[n]=ms(su[n],{theme:"dark",backgroundColor:"#141414"}),uu[n].primary=uu[n][5]}),Ri.red,Ri.volcano,Ri.gold,Ri.orange,Ri.yellow,Ri.lime,Ri.green,Ri.cyan,Ri.blue,Ri.geekblue,Ri.purple,Ri.magenta,Ri.grey;var Ba,cu,xc,lu,gi=function(n,t,e){var r=La()(n),i=La()(t);return La()([(1-e)*r.red()+e*i.red(),(1-e)*r.green()+e*i.green(),(1-e)*r.blue()+e*i.blue()]).rgb()},fu=function(n,t,e,r){return t===void 0&&(t="#fff"),e===void 0&&(e="default"),r===void 0&&(r="rgb(150, 150, 150)"),e==="default"?function(i,a,s){a===void 0&&(a="#fff"),s===void 0&&(s="rgb(150, 150, 150)");var u=gi(a,i,.05).rgb().toString(),l=gi(a,i,.1).rgb().toString(),d=gi(a,i,.2).rgb().toString(),v=gi(a,i,.4).rgb().toString(),k=gi(a,s,.02).rgb().toString(),T=gi(a,s,.05).rgb().toString(),I=gi(a,s,.1).rgb().toString(),j=gi(a,s,.2).rgb().toString(),F=gi(a,s,.3).rgb().toString(),G=ms(i,{theme:"default",backgroundColor:a}),V=La()(i).hex().toLowerCase(),q=G.indexOf(V),$=i;return q!==-1&&($=G[q+1]),{mainStroke:i,mainFill:l,activeStroke:i,activeFill:u,inactiveStroke:v,inactiveFill:u,selectedStroke:i,selectedFill:a,highlightStroke:$,highlightFill:d,disableStroke:F,disableFill:T,edgeMainStroke:F,edgeActiveStroke:i,edgeInactiveStroke:j,edgeSelectedStroke:i,edgeHighlightStroke:i,edgeDisableStroke:I,comboMainStroke:F,comboMainFill:k,comboActiveStroke:i,comboActiveFill:u,comboInactiveStroke:F,comboInactiveFill:k,comboSelectedStroke:i,comboSelectedFill:k,comboHighlightStroke:$,comboHighlightFill:k,comboDisableStroke:j,comboDisableFill:T}}(n,t,"rgb(150, 150, 150)"):function(i,a,s){a===void 0&&(a="#fff"),s===void 0&&(s="#777");var u=gi(a,i,.2).rgb().toString(),l=gi(a,i,.3).rgb().toString(),d=gi(a,i,.6).rgb().toString(),v=gi(a,i,.8).rgb().toString(),k=gi(a,s,.2).rgb().toString(),T=gi(a,s,.25).rgb().toString(),I=gi(a,s,.3).rgb().toString(),j=gi(a,s,.4).rgb().toString(),F=gi(a,s,.5).rgb().toString(),G=ms(i,{theme:"dark",backgroundColor:a}),V=La()(i).hex().toLowerCase(),q=G.indexOf(V),$=i;return q!==-1&&($=G[q+1]),{mainStroke:v,mainFill:u,activeStroke:i,activeFill:l,inactiveStroke:v,inactiveFill:u,selectedStroke:i,selectedFill:u,highlightStroke:i,highlightFill:d,disableStroke:F,disableFill:T,edgeMainStroke:s,edgeActiveStroke:i,edgeInactiveStroke:s,edgeSelectedStroke:i,edgeHighlightStroke:i,edgeDisableStroke:I,comboMainStroke:j,comboMainFill:T,comboActiveStroke:i,comboActiveFill:k,comboInactiveStroke:j,comboInactiveFill:T,comboSelectedStroke:i,comboSelectedFill:k,comboHighlightStroke:$,comboHighlightFill:T,comboDisableStroke:j,comboDisableFill:k}}(n,t,"#777")},Qp=function(n,t,e,r){t===void 0&&(t="#fff"),e===void 0&&(e="default"),r===void 0&&(r="rgb(150, 150, 150)");var i=[];return n.forEach(function(a){i.push(fu(a,t,e,r))}),i},on=fu("rgb(95, 149, 255)","rgb(255, 255, 255)"),Xo={version:"0.3.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:on.mainStroke,fill:on.mainFill},size:20,color:on.mainStroke,linkPoints:{size:8,lineWidth:1,fill:on.activeFill,stroke:on.activeStroke}},nodeStateStyles:{active:{fill:on.activeFill,stroke:on.activeStroke,lineWidth:2,shadowColor:on.mainStroke,shadowBlur:10},selected:{fill:on.selectedFill,stroke:on.selectedStroke,lineWidth:4,shadowColor:on.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:on.highlightFill,stroke:on.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:on.inactiveFill,stroke:on.inactiveStroke,lineWidth:1},disable:{fill:on.disableFill,stroke:on.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:on.edgeMainStroke,lineAppendWidth:2},color:on.edgeMainStroke},edgeStateStyles:{active:{stroke:on.edgeActiveStroke,lineWidth:1},selected:{stroke:on.edgeSelectedStroke,lineWidth:2,shadowColor:on.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:on.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:on.edgeInactiveStroke,lineWidth:1},disable:{stroke:on.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:on.comboMainFill,lineWidth:1,stroke:on.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:on.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:on.comboActiveStroke,lineWidth:1,fill:on.comboActiveFill},selected:{stroke:on.comboSelectedStroke,lineWidth:2,fill:on.comboSelectedFill,shadowColor:on.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:on.comboHighlightStroke,lineWidth:2,fill:on.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:on.comboInactiveStroke,fill:on.comboInactiveFill,lineWidth:1},disable:{stroke:on.comboDisableStroke,fill:on.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function Ga(n,t,e){if(n){if(typeof n.addEventListener=="function")return n.addEventListener(t,e,!1),{remove:function(){n.removeEventListener(t,e,!1)}};if(typeof n.attachEvent=="function")return n.attachEvent("on"+t,e),{remove:function(){n.detachEvent("on"+t,e)}}}}function ei(n){Ba||(Ba=document.createElement("table"),cu=document.createElement("tr"),xc=/^\s*<(\w+|!)[^>]*>/,lu={tr:document.createElement("tbody"),tbody:Ba,thead:Ba,tfoot:Ba,td:cu,th:cu,"*":document.createElement("div")});var t=xc.test(n)&&RegExp.$1;t&&t in lu||(t="*");var e=lu[t];n=n.replace(/(^\s*)|(\s*$)/g,""),e.innerHTML=""+n;var r=e.childNodes[0];return e.removeChild(r),r}function xn(n,t){if(n)for(var e in t)t.hasOwnProperty(e)&&(n.style[e]=t[e]);return n}var Jp=br.cloneEvent,eg=br.isViewportChanged,tg=function(n){function t(e){var r=n.call(this,e)||this;return r.extendEvents=[],r.dragging=!1,r.preItem=null,r.graph=e,r.destroyed=!1,r.initEvents(),r}return Object(m.__extends)(t,n),t.prototype.initEvents=function(){var e=this.graph,r=this.extendEvents,i=r===void 0?[]:r,a=e.get("canvas"),s=a.get("el"),u=Object(p.wrapBehavior)(this,"onCanvasEvents"),l=Object(p.wrapBehavior)(this,"onExtendEvents"),d=Object(p.wrapBehavior)(this,"onWheelEvent");a.off("*").on("*",u),this.canvasHandler=u,i.push(Ga(s,"DOMMouseScroll",d)),i.push(Ga(s,"mousewheel",d)),typeof window!="undefined"&&(i.push(Ga(window,"keydown",l)),i.push(Ga(window,"keyup",l)),i.push(Ga(window,"focus",l)))},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var r=this.graph,i=r.get("canvas"),a=e.target,s=e.type;e.canvasX=e.x,e.canvasY=e.y;var u={x:e.canvasX,y:e.canvasY},l=r.get("group").getMatrix();if(l||(l=[1,0,0,0,1,0,0,0,1]),eg(l)&&(u=r.getPointByClient(e.clientX,e.clientY)),e.x=u.x,e.y=u.y,e.currentTarget=r,a===i)return s!=="mousemove"&&s!=="mouseleave"||this.handleMouseMove(e,"canvas"),e.target=i,e.item=null,r.emit(s,e),void r.emit("canvas:"+s,e);var d=t.getItemRoot(a);if(d){var v=d.get("item");if(!v.destroyed){var k=v.getType();if(e.target=a,e.item=v,e.canvasX===e.x&&e.canvasY===e.y){var T=r.getCanvasByPoint(e.x,e.y);e.canvasX=T.x,e.canvasY=T.y}r.emit(s,e),e.name&&!e.name.includes(":")?r.emit(k+":"+s,e):r.emit(e.name,e),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(e,k)}}else r.emit(s,e)},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.onWheelEvent=function(e){Object(p.isNil)(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},t.prototype.handleMouseMove=function(e,r){var i=this.graph,a=this.preItem,s=i.get("canvas"),u=e.target===s?null:e.item;e=Jp(e),a&&a!==u&&!a.destroyed&&(e.item=a,this.emitCustomEvent(a.getType(),"mouseleave",e),this.dragging&&this.emitCustomEvent(a.getType(),"dragleave",e)),u&&a!==u&&(e.item=u,this.emitCustomEvent(r,"mouseenter",e),this.dragging&&this.emitCustomEvent(r,"dragenter",e)),this.preItem=u},t.prototype.emitCustomEvent=function(e,r,i){i.type=r,this.graph.emit(e+":"+r,i)},t.prototype.destroy=function(){var e=this.graph,r=this.canvasHandler,i=this.extendEvents;e.get("canvas").off("*",r),Object(p.each)(i,function(a){a.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},t}(an);function wc(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var rg,ng,Xi=function(){function n(){(function(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")})(this,n),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var t,e,r;return t=n,(e=[{key:"layout",value:function(i){return this.init(i),this.execute(!0)}},{key:"init",value:function(i){this.nodes=i.nodes||[],this.edges=i.edges||[],this.combos=i.combos||[]}},{key:"execute",value:function(i){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(i){i&&Object.assign(this,i)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&wc(t.prototype,e),r&&wc(t,r),n}(),Fa=function(n){return typeof n=="string"},ig=/-(\w)/g,ji=(rg=function(n){return n.replace(ig,function(t,e){return e?e.toUpperCase():""})},ng=Object.create(null),Array.isArray),cr=function(n){return typeof n=="number"},hu=function(n){return Number.isNaN(Number(n))};function du(n){return(du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var Co=function(n){return n!==null&&du(n)==="object"},og=function n(t){if(t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var e=[];return t.forEach(function(i){e.push(i)}),e.map(function(i){return n(i)})}if(du(t)==="object"&&t!=={}){var r=Object.assign({},t);return Object.keys(r).forEach(function(i){r[i]=n(r[i])}),r}return t},fn=function(n,t){var e=n[t];return Co(e)?e.cell:e},za=function(n,t,e){for(var r=[],i=0;i<n;i++)r[i]=0;return e&&e.forEach(function(a){var s=fn(a,"source"),u=fn(a,"target");s&&(r[t[s]]+=1),u&&(r[t[u]]+=1)}),r},_c=function(n){for(var t=[],e=n.length,r=0;r<e;r+=1){t[r]=[];for(var i=0;i<e;i+=1)r===i?t[r][i]=0:n[r][i]!==0&&n[r][i]?t[r][i]=n[r][i]:t[r][i]=1/0}for(var a=0;a<e;a+=1)for(var s=0;s<e;s+=1)for(var u=0;u<e;u+=1)t[s][u]>t[s][a]+t[a][u]&&(t[s][u]=t[s][a]+t[a][u]);return t},Sc=function(n,t){var e=n.nodes,r=n.edges,i=[],a={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,u){a[s.id]=u,i.push([])}),r&&r.forEach(function(s){var u=fn(s,"source"),l=fn(s,"target"),d=a[u],v=a[l];i[d][v]=1,t||(i[v][d]=1)}),i},bs=function(n,t){typeof t=="function"&&function e(r,i){if(r&&r.children){for(var a=r.children.length-1;a>=0;a--)if(!e(r.children[a],i))return}return!!i(r)}(n,t)},Yo=function(n){return typeof n=="function"};function Ec(n){return(Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Oc(n,t){return(Oc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function ag(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=pu(n);if(t){var i=pu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return sg(this,e)}}function sg(n,t){return!t||Ec(t)!=="object"&&typeof t!="function"?Mc(n):t}function Mc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pu(n){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Ua=new Map,Li=function(n,t){if(Ua.get(n)&&console.warn("The layout with the name ".concat(n," exists already, it will be overridden")),Co(t)){var e=function(r){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Oc(s,u)})(a,r);var i=ag(a);function a(s){var u;(function(k,T){if(!(k instanceof T))throw new TypeError("Cannot call a class as a function")})(this,a);var l=Mc(u=i.call(this)),d={},v=l.getDefaultCfg();return Object.assign(d,v,t,s),Object.keys(d).forEach(function(k){var T=d[k];l[k]=T}),u}return a}(Xi);Ua.set(n,e)}else Ua.set(n,t)},ug=function(n){return Ua.has(n)?Ua.get(n):null};function kc(n){return(kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Ac(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Cc(n,t){return(Cc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function cg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=gu(n);if(t){var i=gu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return lg(this,e)}}function lg(n,t){return!t||kc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function gu(n){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var fg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Cc(s,u)})(a,n);var t,e,r,i=cg(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).begin=[0,0],u.preventOverlap=!0,u.preventOverlapPadding=10,u.condense=!1,u.sortBy="degree",u.nodeSize=30,u.nodes=[],u.edges=[],u.width=300,u.height=300,u.row=0,u.col=0,u.cellWidth=0,u.cellHeight=0,u.cellUsed={},u.id2manPos={},u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var s=this,u=s.nodes,l=s.edges,d=u.length,v=s.begin;if(d===0)return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:l};if(d===1)return u[0].x=v[0],u[0].y=v[1],s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:l};var k=[];u.forEach(function(Ee){k.push(Ee)});var T={};if(k.forEach(function(Ee,Pe){T[Ee.id]=Pe}),(s.sortBy==="degree"||!Fa(s.sortBy)||k[0][s.sortBy]===void 0)&&(s.sortBy="degree",hu(u[0].degree))){var I=za(k.length,T,l);k.forEach(function(Ee,Pe){Ee.degree=I[Pe]})}k.sort(function(Ee,Pe){return Pe[s.sortBy]-Ee[s.sortBy]}),s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight);var j=s.rows,F=s.cols!=null?s.cols:s.columns;if(s.cells=d,j!=null&&F!=null?(s.rows=j,s.cols=F):j!=null&&F==null?(s.rows=j,s.cols=Math.ceil(s.cells/s.rows)):j==null&&F!=null?(s.cols=F,s.rows=Math.ceil(s.cells/s.cols)):(s.splits=Math.sqrt(s.cells*s.height/s.width),s.rows=Math.round(s.splits),s.cols=Math.round(s.width/s.height*s.splits)),s.cols*s.rows>s.cells){var G=s.small(),V=s.large();(G-1)*V>=s.cells?s.small(G-1):(V-1)*G>=s.cells&&s.large(V-1)}else for(;s.cols*s.rows<s.cells;){var q=s.small(),$=s.large();($+1)*q>=s.cells?s.large($+1):s.small(q+1)}s.cellWidth=s.width/s.cols,s.cellHeight=s.height/s.rows,s.condense&&(s.cellWidth=0,s.cellHeight=0),s.preventOverlap&&k.forEach(function(Ee){var Pe,Ze;Ee.x&&Ee.y||(Ee.x=0,Ee.y=0),ji(Ee.size)?(Pe=Ee.size[0],Ze=Ee.size[1]):cr(Ee.size)?(Pe=Ee.size,Ze=Ee.size):Co(Ee.size)&&(Pe=Ee.size.width,Ze=Ee.size.height),Pe!==void 0&&Ze!==void 0||(ji(s.nodeSize)?(Pe=s.nodeSize[0],Ze=s.nodeSize[1]):cr(s.nodeSize)?(Pe=s.nodeSize,Ze=s.nodeSize):(Pe=30,Ze=30));var it=s.preventOverlapPadding,ct=Pe+it,st=Ze+it;s.cellWidth=Math.max(s.cellWidth,ct),s.cellHeight=Math.max(s.cellHeight,st)}),s.cellUsed={},s.row=0,s.col=0,s.id2manPos={};for(var ve=0;ve<k.length;ve++){var de=k[ve],me=void 0;if(s.position&&(me=s.position(de)),me&&(me.row!==void 0||me.col!==void 0)){var Ie={row:me.row,col:me.col};if(Ie.col===void 0)for(Ie.col=0;s.used(Ie.row,Ie.col);)Ie.col++;else if(Ie.row===void 0)for(Ie.row=0;s.used(Ie.row,Ie.col);)Ie.row++;s.id2manPos[de.id]=Ie,s.use(Ie.row,Ie.col)}s.getPos(de)}return s.onLayoutEnd&&s.onLayoutEnd(),{edges:l,nodes:k}}},{key:"small",value:function(s){var u,l=this.rows||5,d=this.cols||5;return s==null?u=Math.min(l,d):Math.min(l,d)===this.rows?this.rows=s:this.cols=s,u}},{key:"large",value:function(s){var u,l=this.rows||5,d=this.cols||5;return s==null?u=Math.max(l,d):Math.max(l,d)===this.rows?this.rows=s:this.cols=s,u}},{key:"used",value:function(s,u){return this.cellUsed["c-".concat(s,"-").concat(u)]||!1}},{key:"use",value:function(s,u){this.cellUsed["c-".concat(s,"-").concat(u)]=!0}},{key:"moveToNextCell",value:function(){var s=this.cols||5;this.col++,this.col>=s&&(this.col=0,this.row++)}},{key:"getPos",value:function(s){var u,l,d=this.begin,v=this.cellWidth,k=this.cellHeight,T=this.id2manPos[s.id];if(T)u=T.col*v+v/2+d[0],l=T.row*k+k/2+d[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();u=this.col*v+v/2+d[0],l=this.row*k+k/2+d[1],this.use(this.row,this.col),this.moveToNextCell()}s.x=u,s.y=l}},{key:"getType",value:function(){return"grid"}}])&&Ac(t.prototype,e),r&&Ac(t,r),a}(Xi);function Tc(n){return(Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Ic(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function jc(n,t){return(jc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function hg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=vu(n);if(t){var i=vu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return dg(this,e)}}function dg(n,t){return!t||Tc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function vu(n){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var pg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&jc(s,u)})(a,n);var t,e,r,i=hg(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.width=300,u.height=300,u.nodes=[],u.edges=[],u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var s=this,u=s.nodes,l=s.center;return s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight),u&&u.forEach(function(d){d.x=.9*(Math.random()-.5)*s.width+l[0],d.y=.9*(Math.random()-.5)*s.height+l[1]}),s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&Ic(t.prototype,e),r&&Ic(t,r),a}(Xi);function Pc(n){return(Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Nc(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Dc(n,t){return(Dc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function gg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=yu(n);if(t){var i=yu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return vg(this,e)}}function vg(n,t){return!t||Pc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function yu(n){return(yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var mu=function(n,t){return n?cr(n)?function(e){return n}:n:function(e){return t||1}},yg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Dc(s,u)})(a,n);var t,e,r,i=gg(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.edgeStrength=200,u.nodeStrength=1e3,u.coulombDisScale=.005,u.damping=.9,u.maxSpeed=1e3,u.minMovement=.5,u.interval=.02,u.factor=1,u.linkDistance=1,u.gravity=10,u.preventOverlap=!0,u.tick=function(){},u.nodes=[],u.edges=[],u.width=300,u.height=300,u.nodeMap={},u.nodeIdxMap={},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var s=this,u=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),u&&u.length!==0){s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var l=s.center;if(u.length===1)return u[0].x=l[0],u[0].y=l[1],void(s.onLayoutEnd&&s.onLayoutEnd());var d={},v={};u.forEach(function(G,V){cr(G.x)||(G.x=Math.random()*s.width),cr(G.y)||(G.y=Math.random()*s.height),d[G.id]=G,v[G.id]=V}),s.nodeMap=d,s.nodeIdxMap=v,s.linkDistance=mu(s.linkDistance,1),s.nodeStrength=mu(s.nodeStrength,1),s.edgeStrength=mu(s.edgeStrength,1);var k,T=s.nodeSize;if(s.preventOverlap){var I,j=s.nodeSpacing;I=cr(j)?function(){return j}:Yo(j)?j:function(){return 0},k=T?ji(T)?function(G){return(T[0]>T[1]?T[0]:T[1])+I(G)}:function(G){return T+I(G)}:function(G){return G.size?ji(G.size)?(G.size[0]>G.size[1]?G.size[0]:G.size[1])+I(G):Co(G.size)?(G.size.width>G.size.height?G.size.width:G.size.height)+I(G):G.size+I(G):10+I(G)}}s.nodeSize=k;var F=s.edges;s.degrees=za(u.length,s.nodeIdxMap,F),s.getMass||(s.getMass=function(G){return s.degrees[s.nodeIdxMap[G.id]]||1}),s.run()}else s.onLayoutEnd&&s.onLayoutEnd()}},{key:"run",value:function(){var s=this,u=s.nodes,l=s.edges,d=s.maxIteration;if(typeof window!="undefined"){var v=0;this.timeInterval=window.setInterval(function(){var k=[],T=[];if(u){u.forEach(function(G,V){k[2*V]=0,k[2*V+1]=0,T[2*V]=0,T[2*V+1]=0}),s.calRepulsive(k,u),l&&s.calAttractive(k,l),s.calGravity(k,u);var I=Math.max(.02,s.interval-.002*v);s.updateVelocity(k,T,I,u);var j=[];u.forEach(function(G){j.push({x:G.x,y:G.y})}),s.updatePosition(T,I,u),s.tick&&s.tick();var F=0;u.forEach(function(G,V){var q=G.x-j[V].x,$=G.y-j[V].y;F+=Math.sqrt(q*q+$*$)}),(F/=u.length)<s.minMovement&&(window.clearInterval(s.timeInterval),s.onLayoutEnd&&s.onLayoutEnd()),++v>=d&&(s.onLayoutEnd&&s.onLayoutEnd(),window.clearInterval(s.timeInterval))}},0)}}},{key:"calRepulsive",value:function(s,u){var l=this.getMass,d=this.nodeStrength,v=this.factor,k=this.coulombDisScale,T=this.preventOverlap,I=this.nodeSize;u.forEach(function(j,F){var G=l?l(j):1;u.forEach(function(V,q){if(!(F>=q)){var $=j.x-V.x,ve=j.y-V.y,de=Math.sqrt($*$+ve*ve)+.01,me=(de+.1)*k,Ie=$/de,Ee=ve/de,Pe=(d(j)+d(V))/2*v/(me*me),Ze=l?l(V):1;if(s[2*F]+=Ie*Pe,s[2*F+1]+=Ee*Pe,s[2*q]-=Ie*Pe,s[2*q+1]-=Ee*Pe,T&&de<(I(j)+I(V))/2){var it=(d(j)+d(V))/2/(de*de);s[2*F]+=Ie*it/G,s[2*F+1]+=Ee*it/G,s[2*q]-=Ie*it/Ze,s[2*q+1]-=Ee*it/Ze}}})})}},{key:"calAttractive",value:function(s,u){var l=this.nodeMap,d=this.nodeIdxMap,v=this.linkDistance,k=this.edgeStrength,T=this.getMass;u.forEach(function(I,j){var F=fn(I,"source"),G=fn(I,"target"),V=l[F],q=l[G],$=q.x-V.x,ve=q.y-V.y,de=Math.sqrt($*$+ve*ve)+.01,me=$/de,Ie=ve/de,Ee=((v(I)||1)-de)*k(I),Pe=d[F],Ze=d[G],it=T?T(V):1,ct=T?T(q):1;s[2*Pe]-=me*Ee/it,s[2*Pe+1]-=Ie*Ee/it,s[2*Ze]+=me*Ee/ct,s[2*Ze+1]+=Ie*Ee/ct})}},{key:"calGravity",value:function(s,u){for(var l=this.center,d=this.gravity,v=this.degrees,k=u.length,T=0;T<k;T++){var I=u[T],j=I.x-l[0],F=I.y-l[1],G=d;if(this.getCenter){var V=this.getCenter(I,v[T]);V&&cr(V[0])&&cr(V[1])&&cr(V[2])&&(j=I.x-V[0],F=I.y-V[1],G=V[2])}G&&(s[2*T]-=G*j,s[2*T+1]-=G*F)}}},{key:"updateVelocity",value:function(s,u,l,d){var v=this,k=l*v.damping;d.forEach(function(T,I){var j=s[2*I]*k||.01,F=s[2*I+1]*k||.01,G=Math.sqrt(j*j+F*F);if(G>v.maxSpeed){var V=v.maxSpeed/G;j*=V,F*=V}u[2*I]=j,u[2*I+1]=F})}},{key:"updatePosition",value:function(s,u,l){l.forEach(function(d,v){if(cr(d.fx)&&cr(d.fy))return d.x=d.fx,void(d.y=d.fy);var k=s[2*v]*u,T=s[2*v+1]*u;d.x+=k,d.y+=T})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&Nc(t.prototype,e),r&&Nc(t,r),a}(Xi);function Rc(n,t,e,r){if(isNaN(t)||isNaN(e))return n;var i,a,s,u,l,d,v,k,T,I=n._root,j={data:r},F=n._x0,G=n._y0,V=n._x1,q=n._y1;if(!I)return n._root=j,n;for(;I.length;)if((d=t>=(a=(F+V)/2))?F=a:V=a,(v=e>=(s=(G+q)/2))?G=s:q=s,i=I,!(I=I[k=v<<1|d]))return i[k]=j,n;if(u=+n._x.call(null,I.data),l=+n._y.call(null,I.data),t===u&&e===l)return j.next=I,i?i[k]=j:n._root=j,n;do i=i?i[k]=new Array(4):n._root=new Array(4),(d=t>=(a=(F+V)/2))?F=a:V=a,(v=e>=(s=(G+q)/2))?G=s:q=s;while((k=v<<1|d)==(T=(l>=s)<<1|u>=a));return i[T]=I,i[k]=j,n}var Yi=function(n,t,e,r,i){this.node=n,this.x0=t,this.y0=e,this.x1=r,this.y1=i};function mg(n){return n[0]}function bg(n){return n[1]}function bu(n,t,e){var r=new xu(t==null?mg:t,e==null?bg:e,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function xu(n,t,e,r,i,a){this._x=n,this._y=t,this._x0=e,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Lc(n){for(var t={data:n.data},e=t;n=n.next;)e=e.next={data:n.data};return t}var Hi=bu.prototype=xu.prototype;Hi.copy=function(){var n,t,e=new xu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=Lc(r),e;for(n=[{source:r,target:e._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?n.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=Lc(t));return e},Hi.add=function(n){var t=+this._x.call(null,n),e=+this._y.call(null,n);return Rc(this.cover(t,e),t,e,n)},Hi.addAll=function(n){var t,e,r,i,a=n.length,s=new Array(a),u=new Array(a),l=1/0,d=1/0,v=-1/0,k=-1/0;for(e=0;e<a;++e)isNaN(r=+this._x.call(null,t=n[e]))||isNaN(i=+this._y.call(null,t))||(s[e]=r,u[e]=i,r<l&&(l=r),r>v&&(v=r),i<d&&(d=i),i>k&&(k=i));if(l>v||d>k)return this;for(this.cover(l,d).cover(v,k),e=0;e<a;++e)Rc(this,s[e],u[e],n[e]);return this},Hi.cover=function(n,t){if(isNaN(n=+n)||isNaN(t=+t))return this;var e=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(e))i=(e=Math.floor(n))+1,a=(r=Math.floor(t))+1;else{for(var s,u,l=i-e||1,d=this._root;e>n||n>=i||r>t||t>=a;)switch(u=(t<r)<<1|n<e,(s=new Array(4))[u]=d,d=s,l*=2,u){case 0:i=e+l,a=r+l;break;case 1:e=i-l,a=r+l;break;case 2:i=e+l,r=a-l;break;case 3:e=i-l,r=a-l}this._root&&this._root.length&&(this._root=d)}return this._x0=e,this._y0=r,this._x1=i,this._y1=a,this},Hi.data=function(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n},Hi.extent=function(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Hi.find=function(n,t,e){var r,i,a,s,u,l,d,v=this._x0,k=this._y0,T=this._x1,I=this._y1,j=[],F=this._root;for(F&&j.push(new Yi(F,v,k,T,I)),e==null?e=1/0:(v=n-e,k=t-e,T=n+e,I=t+e,e*=e);l=j.pop();)if(!(!(F=l.node)||(i=l.x0)>T||(a=l.y0)>I||(s=l.x1)<v||(u=l.y1)<k))if(F.length){var G=(i+s)/2,V=(a+u)/2;j.push(new Yi(F[3],G,V,s,u),new Yi(F[2],i,V,G,u),new Yi(F[1],G,a,s,V),new Yi(F[0],i,a,G,V)),(d=(t>=V)<<1|n>=G)&&(l=j[j.length-1],j[j.length-1]=j[j.length-1-d],j[j.length-1-d]=l)}else{var q=n-+this._x.call(null,F.data),$=t-+this._y.call(null,F.data),ve=q*q+$*$;if(ve<e){var de=Math.sqrt(e=ve);v=n-de,k=t-de,T=n+de,I=t+de,r=F.data}}return r},Hi.remove=function(n){if(isNaN(a=+this._x.call(null,n))||isNaN(s=+this._y.call(null,n)))return this;var t,e,r,i,a,s,u,l,d,v,k,T,I=this._root,j=this._x0,F=this._y0,G=this._x1,V=this._y1;if(!I)return this;if(I.length)for(;;){if((d=a>=(u=(j+G)/2))?j=u:G=u,(v=s>=(l=(F+V)/2))?F=l:V=l,t=I,!(I=I[k=v<<1|d]))return this;if(!I.length)break;(t[k+1&3]||t[k+2&3]||t[k+3&3])&&(e=t,T=k)}for(;I.data!==n;)if(r=I,!(I=I.next))return this;return(i=I.next)&&delete I.next,r?(i?r.next=i:delete r.next,this):t?(i?t[k]=i:delete t[k],(I=t[0]||t[1]||t[2]||t[3])&&I===(t[3]||t[2]||t[1]||t[0])&&!I.length&&(e?e[T]=I:this._root=I),this):(this._root=i,this)},Hi.removeAll=function(n){for(var t=0,e=n.length;t<e;++t)this.remove(n[t]);return this},Hi.root=function(){return this._root},Hi.size=function(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n},Hi.visit=function(n){var t,e,r,i,a,s,u=[],l=this._root;for(l&&u.push(new Yi(l,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!n(l=t.node,r=t.x0,i=t.y0,a=t.x1,s=t.y1)&&l.length){var d=(r+a)/2,v=(i+s)/2;(e=l[3])&&u.push(new Yi(e,d,v,a,s)),(e=l[2])&&u.push(new Yi(e,r,v,d,s)),(e=l[1])&&u.push(new Yi(e,d,i,a,v)),(e=l[0])&&u.push(new Yi(e,r,i,d,v))}return this},Hi.visitAfter=function(n){var t,e=[],r=[];for(this._root&&e.push(new Yi(this._root,this._x0,this._y0,this._x1,this._y1));t=e.pop();){var i=t.node;if(i.length){var a,s=t.x0,u=t.y0,l=t.x1,d=t.y1,v=(s+l)/2,k=(u+d)/2;(a=i[0])&&e.push(new Yi(a,s,u,v,k)),(a=i[1])&&e.push(new Yi(a,v,u,l,k)),(a=i[2])&&e.push(new Yi(a,s,k,v,d)),(a=i[3])&&e.push(new Yi(a,v,k,l,d))}r.push(t)}for(;t=r.pop();)n(t.node,t.x0,t.y0,t.x1,t.y1);return this},Hi.x=function(n){return arguments.length?(this._x=n,this):this._x},Hi.y=function(n){return arguments.length?(this._y=n,this):this._y};var qi=function(n){return function(){return n}},Ho=function(n){return 1e-6*(n()-.5)},xg={value:function(){}};function Bc(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new xs(r)}function xs(n){this._=n}function wg(n,t){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function _g(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}function Gc(n,t,e){for(var r=0,i=n.length;r<i;++r)if(n[r].name===t){n[r]=xg,n=n.slice(0,r).concat(n.slice(r+1));break}return e!=null&&n.push({name:t,value:e}),n}xs.prototype=Bc.prototype={constructor:xs,on:function(n,t){var e,r=this._,i=wg(n+"",r),a=-1,s=i.length;if(!(arguments.length<2)){if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(e=(n=i[a]).type)r[e]=Gc(r[e],n.name,t);else if(t==null)for(e in r)r[e]=Gc(r[e],n.name,null);return this}for(;++a<s;)if((e=(n=i[a]).type)&&(e=_g(r[e],n.name)))return e},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new xs(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),a=0;a<e;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=0,e=(r=this._[n]).length;a<e;++a)r[a].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,a=r.length;i<a;++i)r[i].value.apply(t,e)}};var Sg=Bc;function wu(n){return(wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var ws,Va,va=0,Wa=0,Xa=0,_s=0,aa=0,Ss=0,Ya=(typeof performance=="undefined"?"undefined":wu(performance))==="object"&&performance.now?performance:Date,Fc=(typeof window=="undefined"?"undefined":wu(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function zc(){return aa||(Fc(Eg),aa=Ya.now()+Ss)}function Eg(){aa=0}function _u(){this._call=this._time=this._next=null}function Uc(n,t,e){var r=new _u;return r.restart(n,t,e),r}function Vc(){aa=(_s=Ya.now())+Ss,va=Wa=0;try{(function(){zc(),++va;for(var n,t=ws;t;)(n=aa-t._time)>=0&&t._call.call(null,n),t=t._next;--va})()}finally{va=0,function(){for(var n,t,e=ws,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:ws=t);Va=n,Su(r)}(),aa=0}}function Og(){var n=Ya.now(),t=n-_s;t>1e3&&(Ss-=t,_s=n)}function Su(n){va||(Wa&&(Wa=clearTimeout(Wa)),n-aa>24?(n<1/0&&(Wa=setTimeout(Vc,n-Ya.now()-Ss)),Xa&&(Xa=clearInterval(Xa))):(Xa||(_s=Ya.now(),Xa=setInterval(Og,1e3)),va=1,Fc(Vc)))}_u.prototype=Uc.prototype={constructor:_u,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?zc():+e)+(t==null?0:+t),this._next||Va===this||(Va?Va._next=this:ws=this,Va=this),this._call=n,this._time=e,Su()},stop:function(){this._call&&(this._call=null,this._time=1/0,Su())}};function Mg(n){return n.x}function kg(n){return n.y}var Ag=Math.PI*(3-Math.sqrt(5)),Wc=function(n){var t,e,r=1,i=.001,a=1-Math.pow(i,1/300),s=0,u=.6,l=new Map,d=Uc(T),v=Sg("tick","end"),k=(e=1,function(){return(e=(1664525*e+1013904223)%4294967296)/4294967296});function T(){I(),v.call("tick",t),r<i&&(d.stop(),v.call("end",t))}function I(G){var V,q,$=n.length;G===void 0&&(G=1);for(var ve=0;ve<G;++ve)for(r+=(s-r)*a,l.forEach(function(de){de(r)}),V=0;V<$;++V)(q=n[V]).fx==null?q.x+=q.vx*=u:(q.x=q.fx,q.vx=0),q.fy==null?q.y+=q.vy*=u:(q.y=q.fy,q.vy=0);return t}function j(){for(var G,V=0,q=n.length;V<q;++V){if((G=n[V]).index=V,G.fx!=null&&(G.x=G.fx),G.fy!=null&&(G.y=G.fy),isNaN(G.x)||isNaN(G.y)){var $=10*Math.sqrt(.5+V),ve=V*Ag;G.x=$*Math.cos(ve),G.y=$*Math.sin(ve)}(isNaN(G.vx)||isNaN(G.vy))&&(G.vx=G.vy=0)}}function F(G){return G.initialize&&G.initialize(n,k),G}return n==null&&(n=[]),j(),t={tick:I,restart:function(){return d.restart(T),t},stop:function(){return d.stop(),t},nodes:function(G){return arguments.length?(n=G,j(),l.forEach(F),t):n},alpha:function(G){return arguments.length?(r=+G,t):r},alphaMin:function(G){return arguments.length?(i=+G,t):i},alphaDecay:function(G){return arguments.length?(a=+G,t):+a},alphaTarget:function(G){return arguments.length?(s=+G,t):s},velocityDecay:function(G){return arguments.length?(u=1-G,t):1-u},randomSource:function(G){return arguments.length?(k=G,l.forEach(F),t):k},force:function(G,V){return arguments.length>1?(V==null?l.delete(G):l.set(G,F(V)),t):l.get(G)},find:function(G,V,q){var $,ve,de,me,Ie,Ee=0,Pe=n.length;for(q==null?q=1/0:q*=q,Ee=0;Ee<Pe;++Ee)(de=($=G-(me=n[Ee]).x)*$+(ve=V-me.y)*ve)<q&&(Ie=me,q=de);return Ie},on:function(G,V){return arguments.length>1?(v.on(G,V),t):v.on(G)}}},Xc=function(){var n,t,e,r,i,a=qi(-30),s=1,u=1/0,l=.81;function d(I){var j,F=n.length,G=bu(n,Mg,kg).visitAfter(k);for(r=I,j=0;j<F;++j)t=n[j],G.visit(T)}function v(){if(n){var I,j,F=n.length;for(i=new Array(F),I=0;I<F;++I)j=n[I],i[j.index]=+a(j,I,n)}}function k(I){var j,F,G,V,q,$=0,ve=0;if(I.length){for(G=V=q=0;q<4;++q)(j=I[q])&&(F=Math.abs(j.value))&&($+=j.value,ve+=F,G+=F*j.x,V+=F*j.y);I.x=G/ve,I.y=V/ve}else{(j=I).x=j.data.x,j.y=j.data.y;do $+=i[j.data.index];while(j=j.next)}I.value=$}function T(I,j,F,G){if(!I.value)return!0;var V=I.x-t.x,q=I.y-t.y,$=G-j,ve=V*V+q*q;if($*$/l<ve)return ve<u&&(V===0&&(ve+=(V=Ho(e))*V),q===0&&(ve+=(q=Ho(e))*q),ve<s&&(ve=Math.sqrt(s*ve)),t.vx+=V*I.value*r/ve,t.vy+=q*I.value*r/ve),!0;if(!(I.length||ve>=u)){(I.data!==t||I.next)&&(V===0&&(ve+=(V=Ho(e))*V),q===0&&(ve+=(q=Ho(e))*q),ve<s&&(ve=Math.sqrt(s*ve)));do I.data!==t&&($=i[I.data.index]*r/ve,t.vx+=V*$,t.vy+=q*$);while(I=I.next)}}return d.initialize=function(I,j){n=I,e=j,v()},d.strength=function(I){return arguments.length?(a=typeof I=="function"?I:qi(+I),v(),d):a},d.distanceMin=function(I){return arguments.length?(s=I*I,d):Math.sqrt(s)},d.distanceMax=function(I){return arguments.length?(u=I*I,d):Math.sqrt(u)},d.theta=function(I){return arguments.length?(l=I*I,d):Math.sqrt(l)},d};function Eu(n){return(Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Cg(n){return n.index}function Yc(n,t){var e=n.get(t);if(!e)throw new Error("node not found: "+t);return e}var Ou=function(n){var t,e,r,i,a,s,u=Cg,l=function(F){return 1/Math.min(i[F.source.index],i[F.target.index])},d=qi(30),v=1;function k(F){for(var G=0,V=n.length;G<v;++G)for(var q,$,ve,de,me,Ie,Ee,Pe=0;Pe<V;++Pe)$=(q=n[Pe]).source,de=(ve=q.target).x+ve.vx-$.x-$.vx||Ho(s),me=ve.y+ve.vy-$.y-$.vy||Ho(s),de*=Ie=((Ie=Math.sqrt(de*de+me*me))-e[Pe])/Ie*F*t[Pe],me*=Ie,ve.vx-=de*(Ee=a[Pe]),ve.vy-=me*Ee,$.vx+=de*(Ee=1-Ee),$.vy+=me*Ee}function T(){if(r){var F,G,V=r.length,q=n.length,$=new Map(r.map(function(ve,de){return[u(ve,de,r),ve]}));for(F=0,i=new Array(V);F<q;++F)(G=n[F]).index=F,Eu(G.source)!=="object"&&(G.source=Yc($,G.source)),Eu(G.target)!=="object"&&(G.target=Yc($,G.target)),i[G.source.index]=(i[G.source.index]||0)+1,i[G.target.index]=(i[G.target.index]||0)+1;for(F=0,a=new Array(q);F<q;++F)G=n[F],a[F]=i[G.source.index]/(i[G.source.index]+i[G.target.index]);t=new Array(q),I(),e=new Array(q),j()}}function I(){if(r)for(var F=0,G=n.length;F<G;++F)t[F]=+l(n[F],F,n)}function j(){if(r)for(var F=0,G=n.length;F<G;++F)e[F]=+d(n[F],F,n)}return n==null&&(n=[]),k.initialize=function(F,G){r=F,s=G,T()},k.links=function(F){return arguments.length?(n=F,T(),k):n},k.id=function(F){return arguments.length?(u=F,k):u},k.iterations=function(F){return arguments.length?(v=+F,k):v},k.strength=function(F){return arguments.length?(l=typeof F=="function"?F:qi(+F),I(),k):l},k.distance=function(F){return arguments.length?(d=typeof F=="function"?F:qi(+F),j(),k):d},k};function Tg(n){return n.x+n.vx}function Ig(n){return n.y+n.vy}var Hc=function(n){var t,e,r,i=1,a=1;function s(){for(var d,v,k,T,I,j,F,G=t.length,V=0;V<a;++V)for(v=bu(t,Tg,Ig).visitAfter(u),d=0;d<G;++d)k=t[d],j=e[k.index],F=j*j,T=k.x+k.vx,I=k.y+k.vy,v.visit(q);function q($,ve,de,me,Ie){var Ee=$.data,Pe=$.r,Ze=j+Pe;if(!Ee)return ve>T+Ze||me<T-Ze||de>I+Ze||Ie<I-Ze;if(Ee.index>k.index){var it=T-Ee.x-Ee.vx,ct=I-Ee.y-Ee.vy,st=it*it+ct*ct;st<Ze*Ze&&(it===0&&(st+=(it=Ho(r))*it),ct===0&&(st+=(ct=Ho(r))*ct),st=(Ze-(st=Math.sqrt(st)))/st*i,k.vx+=(it*=st)*(Ze=(Pe*=Pe)/(F+Pe)),k.vy+=(ct*=st)*Ze,Ee.vx-=it*(Ze=1-Ze),Ee.vy-=ct*Ze)}}}function u(d){if(d.data)return d.r=e[d.data.index];for(var v=d.r=0;v<4;++v)d[v]&&d[v].r>d.r&&(d.r=d[v].r)}function l(){if(t){var d,v,k=t.length;for(e=new Array(k),d=0;d<k;++d)v=t[d],e[v.index]=+n(v,d,t)}}return typeof n!="function"&&(n=qi(n==null?1:+n)),s.initialize=function(d,v){t=d,r=v,l()},s.iterations=function(d){return arguments.length?(a=+d,s):a},s.strength=function(d){return arguments.length?(i=+d,s):i},s.radius=function(d){return arguments.length?(n=typeof d=="function"?d:qi(+d),l(),s):n},s};function jg(n,t){return function(e){if(Array.isArray(e))return e}(n)||function(e,r){var i=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,s,u=[],l=!0,d=!1;try{for(i=i.call(e);!(l=(a=i.next()).done)&&(u.push(a.value),!r||u.length!==r);l=!0);}catch(v){d=!0,s=v}finally{try{l||i.return==null||i.return()}finally{if(d)throw s}}return u}}(n,t)||function(e,r){if(!!e){if(typeof e=="string")return qc(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qc(e,r)}}(n,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qc(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function Pg(){function n(me){return function(){return me}}var t,e=function(me){return me.cluster},r=n(1),i=n(-1),a=n(100),s=n(.1),u=[0,0],l=[],d={},v=[],k=100,T=100,I={none:{x:0,y:0}},j=[],F="force",G=!0,V=.1;function q(me){if(!G)return q;t.tick(),ve();for(var Ie,Ee=0,Pe=l.length,Ze=me*V;Ee<Pe;++Ee)(Ie=l[Ee]).vx+=(I[e(Ie)].x-Ie.x)*Ze,Ie.vy+=(I[e(Ie)].y-Ie.y)*Ze}function $(){l&&function(){if(!(!l||!l.length)){if(e(l[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var me=(Ee=[],Pe=[],Ze={},it=[],Ie=function(ct){var st={};return ct.forEach(function(jt){var gt=e(jt);st[gt]||(st[gt]={count:0,sumforceNodeSize:0})}),ct.forEach(function(jt){var gt=e(jt),Pt=r(jt),Rt=st[gt];Rt.count=Rt.count+1,Rt.sumforceNodeSize=Rt.sumforceNodeSize+Math.PI*(Pt*Pt)*1.3,st[gt]=Rt}),st}(l),it=function(ct){var st={},jt=[];return ct.forEach(function(gt){var Pt=function(Zt){var Ct=fn(Zt,"source"),Vt=fn(Zt,"target"),Dt=e(d[Ct]),qt=e(d[Vt]);return Dt<=qt?"".concat(Dt,"~").concat(qt):"".concat(qt,"~").concat(Dt)}(gt),Rt=0;st[Pt]!==void 0&&(Rt=st[Pt]),Rt+=1,st[Pt]=Rt}),Object.entries(st).forEach(function(gt){var Pt=jg(gt,2),Rt=Pt[0],Zt=Pt[1],Ct=Rt.split("~")[0],Vt=Rt.split("~")[1];Ct!==void 0&&Vt!==void 0&&jt.push({source:Ct,target:Vt,count:Zt})}),jt}(v),Object.keys(Ie).forEach(function(ct,st){var jt=Ie[ct];Ee.push({id:ct,size:jt.count,r:Math.sqrt(jt.sumforceNodeSize/Math.PI)}),Ze[ct]=st}),it.forEach(function(ct){var st=fn(ct,"source"),jt=fn(ct,"target"),gt=Ze[st],Pt=Ze[jt];gt!==void 0&&Pt!==void 0&&Pe.push({source:gt,target:Pt,count:ct.count})}),{nodes:Ee,links:Pe}),Ie,Ee,Pe,Ze,it;t=Wc(me.nodes).force("x",function(ct){var st,jt,gt,Pt=qi(.1);function Rt(Ct){for(var Vt,Dt=0,qt=st.length;Dt<qt;++Dt)(Vt=st[Dt]).vx+=(gt[Dt]-Vt.x)*jt[Dt]*Ct}function Zt(){if(st){var Ct,Vt=st.length;for(jt=new Array(Vt),gt=new Array(Vt),Ct=0;Ct<Vt;++Ct)jt[Ct]=isNaN(gt[Ct]=+ct(st[Ct],Ct,st))?0:+Pt(st[Ct],Ct,st)}}return typeof ct!="function"&&(ct=qi(ct==null?0:+ct)),Rt.initialize=function(Ct){st=Ct,Zt()},Rt.strength=function(Ct){return arguments.length?(Pt=typeof Ct=="function"?Ct:qi(+Ct),Zt(),Rt):Pt},Rt.x=function(Ct){return arguments.length?(ct=typeof Ct=="function"?Ct:qi(+Ct),Zt(),Rt):ct},Rt}(k).strength(.1)).force("y",function(ct){var st,jt,gt,Pt=qi(.1);function Rt(Ct){for(var Vt,Dt=0,qt=st.length;Dt<qt;++Dt)(Vt=st[Dt]).vy+=(gt[Dt]-Vt.y)*jt[Dt]*Ct}function Zt(){if(st){var Ct,Vt=st.length;for(jt=new Array(Vt),gt=new Array(Vt),Ct=0;Ct<Vt;++Ct)jt[Ct]=isNaN(gt[Ct]=+ct(st[Ct],Ct,st))?0:+Pt(st[Ct],Ct,st)}}return typeof ct!="function"&&(ct=qi(ct==null?0:+ct)),Rt.initialize=function(Ct){st=Ct,Zt()},Rt.strength=function(Ct){return arguments.length?(Pt=typeof Ct=="function"?Ct:qi(+Ct),Zt(),Rt):Pt},Rt.y=function(Ct){return arguments.length?(ct=typeof Ct=="function"?Ct:qi(+Ct),Zt(),Rt):ct},Rt}(T).strength(.1)).force("collide",Hc(function(ct){return ct.r}).iterations(4)).force("charge",Xc().strength(i)).force("links",Ou(me.nodes.length?me.links:[]).distance(a).strength(s)),j=t.nodes(),ve()}}()}function ve(){return I={none:{x:0,y:0}},j.forEach(function(me){I[me.id]={x:me.x-u[0],y:me.y-u[1]}}),I}function de(me){d={},me.forEach(function(Ie){d[Ie.id]=Ie})}return q.initialize=function(me){l=me,$()},q.template=function(me){return arguments.length?(F=me,$(),q):F},q.groupBy=function(me){return arguments.length?typeof me=="string"?(e=function(Ie){return Ie[me]},q):(e=me,q):e},q.enableGrouping=function(me){return arguments.length?(G=me,q):G},q.strength=function(me){return arguments.length?(V=me,q):V},q.centerX=function(me){return arguments.length?(k=me,q):k},q.centerY=function(me){return arguments.length?(T=me,q):T},q.nodes=function(me){return arguments.length?(de(me||[]),l=me||[],q):l},q.links=function(me){return arguments.length?(v=me||[],$(),q):v},q.forceNodeSize=function(me){return arguments.length?(r=typeof me=="function"?me:n(+me),$(),q):r},q.nodeSize=q.forceNodeSize,q.forceCharge=function(me){return arguments.length?(i=typeof me=="function"?me:n(+me),$(),q):i},q.forceLinkDistance=function(me){return arguments.length?(a=typeof me=="function"?me:n(+me),$(),q):a},q.forceLinkStrength=function(me){return arguments.length?(s=typeof me=="function"?me:n(+me),$(),q):s},q.offset=function(me){return arguments.length?(u=me,q):u},q.getFocis=ve,q}var Ng="LAYOUT_TICK",Kc="GPU_LAYOUT_END";function Zc(n){return(Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function $c(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Qc(n,t){return(Qc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Dg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Mu(n);if(t){var i=Mu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Rg(this,e)}}function Rg(n,t){return!t||Zc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Mu(n){return(Mu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Lg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Qc(s,u)})(a,n);var t,e,r,i=Dg(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.nodeStrength=null,u.edgeStrength=null,u.preventOverlap=!1,u.clusterNodeStrength=null,u.clusterEdgeStrength=null,u.clusterEdgeDistance=null,u.clusterNodeSize=null,u.clusterFociStrength=null,u.linkDistance=50,u.alphaDecay=.028,u.alphaMin=.001,u.alpha=.3,u.collideStrength=1,u.workerEnabled=!1,u.tick=function(){},u.onLayoutEnd=function(){},u.ticking=void 0,s&&u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(s){this.nodes=s.nodes||[];var u=s.edges||[];this.edges=u.map(function(l){var d={},v=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(l).forEach(function(k){v.indexOf(k)>-1||(d[k]=l[k])}),d}),this.ticking=!1}},{key:"execute",value:function(s){var u=this,l=u.nodes,d=u.edges;if(!u.ticking){var v=u.forceSimulation,k=u.alphaMin,T=u.alphaDecay,I=u.alpha;if(v){if(s){if(u.clustering&&u.clusterForce&&(u.clusterForce.nodes(l),u.clusterForce.links(d)),v.nodes(l),d&&u.edgeForce)u.edgeForce.links(d);else if(d&&!u.edgeForce){var j=Ou().id(function(ve){return ve.id}).links(d);u.edgeStrength&&j.strength(u.edgeStrength),u.linkDistance&&j.distance(u.linkDistance),u.edgeForce=j,v.force("link",j)}}u.preventOverlap&&u.overlapProcess(v),v.alpha(I).restart(),this.ticking=!0}else try{var F=Xc();if(u.nodeStrength&&F.strength(u.nodeStrength),v=Wc().nodes(l),u.clustering){var G=Pg();G.centerX(u.center[0]).centerY(u.center[1]).template("force").strength(u.clusterFociStrength),d&&G.links(d),l&&G.nodes(l),G.forceLinkDistance(u.clusterEdgeDistance).forceLinkStrength(u.clusterEdgeStrength).forceCharge(u.clusterNodeStrength).forceNodeSize(u.clusterNodeSize),u.clusterForce=G,v.force("group",G)}if(v.force("center",function(ve,de){var me,Ie=1;function Ee(){var Pe,Ze,it=me.length,ct=0,st=0;for(Pe=0;Pe<it;++Pe)ct+=(Ze=me[Pe]).x,st+=Ze.y;for(ct=(ct/it-ve)*Ie,st=(st/it-de)*Ie,Pe=0;Pe<it;++Pe)(Ze=me[Pe]).x-=ct,Ze.y-=st}return ve==null&&(ve=0),de==null&&(de=0),Ee.initialize=function(Pe){me=Pe},Ee.x=function(Pe){return arguments.length?(ve=+Pe,Ee):ve},Ee.y=function(Pe){return arguments.length?(de=+Pe,Ee):de},Ee.strength=function(Pe){return arguments.length?(Ie=+Pe,Ee):Ie},Ee}(u.center[0],u.center[1])).force("charge",F).alpha(I).alphaDecay(T).alphaMin(k),u.preventOverlap&&u.overlapProcess(v),d){var V=Ou().id(function(ve){return ve.id}).links(d);u.edgeStrength&&V.strength(u.edgeStrength),u.linkDistance&&V.distance(u.linkDistance),u.edgeForce=V,v.force("link",V)}if(u.workerEnabled&&!Bg()&&(u.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),u.workerEnabled){v.stop();for(var q=function(ve){var de=ve.alphaMin(),me=ve.alphaTarget(),Ie=ve.alpha(),Ee=Math.log((de-me)/(Ie-me))/Math.log(1-ve.alphaDecay());return Math.ceil(Ee)}(v),$=1;$<=q;$++)v.tick(),postMessage({nodes:l,currentTick:$,totalTicks:q,type:Ng},void 0);u.ticking=!1}else v.on("tick",function(){u.tick()}).on("end",function(){u.ticking=!1,u.onLayoutEnd&&u.onLayoutEnd()}),u.ticking=!0;u.forceSimulation=v,u.ticking=!0}catch(ve){u.ticking=!1,console.warn(ve)}}}},{key:"overlapProcess",value:function(s){var u,l,d=this.nodeSize,v=this.nodeSpacing,k=this.collideStrength;if(l=cr(v)?function(){return v}:Yo(v)?v:function(){return 0},d)if(Yo(d))u=function(j){return d(j)+l(j)};else if(ji(d)){var T=(d[0]>d[1]?d[0]:d[1])/2;u=function(j){return T+l(j)}}else if(cr(d)){var I=d/2;u=function(j){return I+l(j)}}else u=function(){return 10};else u=function(j){return j.size?ji(j.size)?(j.size[0]>j.size[1]?j.size[0]:j.size[1])/2+l(j):Co(j.size)?(j.size.width>j.size.height?j.size.width:j.size.height)/2+l(j):j.size/2+l(j):10+l(j)};s.force("collisionForce",Hc(u).strength(k))}},{key:"updateCfg",value:function(s){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,s)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&$c(t.prototype,e),r&&$c(t,r),a}(Xi);function Bg(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Jc(n){return(Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function el(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function tl(n,t){return(tl=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Gg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=ku(n);if(t){var i=ku(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Fg(this,e)}}function Fg(n,t){return!t||Jc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function ku(n){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function zg(n,t,e,r){n.forEach(function(i,a){n[a].children=[],n[a].parent=[]}),r?t.forEach(function(i){var a=fn(i,"source"),s=fn(i,"target"),u=0;a&&(u=e[a]);var l=0;s&&(l=e[s]);var d=n[u].children,v=n[l].parent;d.push(n[l].id),v.push(n[u].id)}):t.forEach(function(i){var a=fn(i,"source"),s=fn(i,"target"),u=0;a&&(u=e[a]);var l=0;s&&(l=e[s]);var d=n[u].children,v=n[l].children;d.push(n[l].id),v.push(n[u].id)})}function Ug(n,t,e){for(var r=e.length,i=0;i<r;i++){var a=fn(e[i],"source"),s=fn(e[i],"target");if(n.id===a&&t.id===s||t.id===a&&n.id===s)return!0}return!1}function Vg(n,t){var e=n.degree,r=t.degree;return e<r?-1:e>r?1:0}var Wg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&tl(s,u)})(a,n);var t,e,r,i=Gg(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).radius=null,u.startRadius=null,u.endRadius=null,u.startAngle=0,u.endAngle=2*Math.PI,u.clockwise=!0,u.divisions=1,u.ordering=null,u.angleRatio=1,u.nodes=[],u.edges=[],u.nodeMap={},u.degrees=[],u.width=300,u.height=300,u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var s=this.nodes,u=this.edges,l=s.length;if(l!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var d=this.center;if(l===1)return s[0].x=d[0],s[0].y=d[1],void(this.onLayoutEnd&&this.onLayoutEnd());var v=this.radius,k=this.startRadius,T=this.endRadius,I=this.divisions,j=this.startAngle,F=this.endAngle,G=(F-j)/l,V={};s.forEach(function(it,ct){V[it.id]=ct}),this.nodeMap=V;var q=za(s.length,V,u);this.degrees=q,v||k||T?!k&&T?k=T:k&&!T&&(T=k):v=this.height>this.width?this.width/2:this.height/2;var $=G*this.angleRatio,ve=this.ordering,de=[];de=ve==="topology"?this.topologyOrdering():ve==="topology-directed"?this.topologyOrdering(!0):ve==="degree"?this.degreeOrdering():s;for(var me=this.clockwise,Ie=Math.ceil(l/I),Ee=0;Ee<l;++Ee){var Pe=v;Pe||k===null||T===null||(Pe=k+Ee*(T-k)/(l-1)),Pe||(Pe=10+100*Ee/(l-1));var Ze=j+Ee%Ie*$+2*Math.PI/I*Math.floor(Ee/Ie);me||(Ze=F-Ee%Ie*$-2*Math.PI/I*Math.floor(Ee/Ie)),de[Ee].x=d[0]+Math.cos(Ze)*Pe,de[Ee].y=d[1]+Math.sin(Ze)*Pe,de[Ee].weight=q[Ee]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:de,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0],u=this,l=u.degrees,d=u.edges,v=u.nodes,k=og(v),T=u.nodeMap,I=[k[0]],j=[v[0]],F=[],G=v.length;F[0]=!0,zg(k,d,T,s);var V=0;return k.forEach(function(q,$){if($!==0)if($!==G-1&&l[$]===l[$+1]&&!Ug(I[V],q,d)||F[$]){for(var ve=I[V].children,de=!1,me=0;me<ve.length;me++){var Ie=T[ve[me]];if(l[Ie]===l[$]&&!F[Ie]){I.push(k[Ie]),j.push(v[T[k[Ie].id]]),F[Ie]=!0,de=!0;break}}for(var Ee=0;!de&&(F[Ee]||(I.push(k[Ee]),j.push(v[T[k[Ee].id]]),F[Ee]=!0,de=!0),++Ee!==G););}else I.push(q),j.push(v[T[q.id]]),F[$]=!0,V++}),j}},{key:"degreeOrdering",value:function(){var s=this.nodes,u=[],l=this.degrees;return s.forEach(function(d,v){d.degree=l[v],u.push(d)}),u.sort(Vg),u}},{key:"getType",value:function(){return"circular"}}])&&el(t.prototype,e),r&&el(t,r),a}(Xi),Xg=o(163),rl=o.n(Xg);function nl(n){return(nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function il(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ol(n,t){return(ol=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Yg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Au(n);if(t){var i=Au(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Hg(this,e)}}function Hg(n,t){return!t||nl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Au(n){return(Au=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var qg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&ol(s,u)})(a,n);var t,e,r,i=Yg(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).rankdir="TB",u.nodesep=50,u.ranksep=50,u.controlPoints=!1,u.sortByCombo=!1,u.nodes=[],u.edges=[],u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var s=this,u=this,l=u.nodes,d=u.nodeSize,v=u.rankdir,k=u.combos;if(l){var T,I=u.edges||[],j=new rl.a.graphlib.Graph({multigraph:!0,compound:!0});T=d?ji(d)?function(){return d}:function(){return[d,d]}:function($){return $.size?ji($.size)?$.size:Co($.size)?[$.size.width||40,$.size.height||40]:[$.size,$.size]:[40,40]};var F=Es(u.nodesepFunc,u.nodesep,50),G=Es(u.ranksepFunc,u.ranksep,50);v!=="LR"&&v!=="RL"||(F=Es(u.ranksepFunc,u.ranksep,50),G=Es(u.nodesepFunc,u.nodesep,50)),j.setDefaultEdgeLabel(function(){return{}}),j.setGraph(u);var V,q={};return l.filter(function($){return $.layout!==!1}).forEach(function($){var ve=T($),de=G($),me=F($),Ie=ve[0]+2*me,Ee=ve[1]+2*de;j.setNode($.id,{width:Ie,height:Ee}),s.sortByCombo&&$.comboId&&(q[$.comboId]||(q[$.comboId]=!0,j.setNode($.comboId,{})),j.setParent($.id,$.comboId))}),this.sortByCombo&&k&&k.forEach(function($){$.parentId&&(q[$.parentId]||(q[$.parentId]=!0,j.setNode($.parentId,{})),j.setParent($.id,$.parentId))}),I.forEach(function($){var ve=fn($,"source"),de=fn($,"target");j.setEdge(ve,de,{weight:$.weight||1})}),rl.a.layout(j),j.nodes().forEach(function($){V=j.node($);var ve=l.findIndex(function(de){return de.id===$});l[ve]&&(l[ve].x=V.x,l[ve].y=V.y)}),j.edges().forEach(function($){V=j.edge($);var ve=I.findIndex(function(de){var me=fn(de,"source"),Ie=fn(de,"target");return me===$.v&&Ie===$.w});u.controlPoints&&I[ve].type!=="loop"&&(I[ve].controlPoints=V.points.slice(1,V.points.length-1))}),u.onLayoutEnd&&u.onLayoutEnd(),{nodes:l,edges:I}}}},{key:"getType",value:function(){return"dagre"}}])&&il(t.prototype,e),r&&il(t,r),a}(Xi);function Es(n,t,e){return n||(cr(t)?function(){return t}:function(){return e})}var Kg=Object.prototype.toString;function Os(n){return Kg.call(n).endsWith("Array]")}var Zg=function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Os(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,r=e===void 0?0:e,i=t.toIndex,a=i===void 0?n.length:i;if(r<0||r>=n.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=n[r],u=r+1;u<a;u++)n[u]>s&&(s=n[u]);return s},$g=function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Os(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,r=e===void 0?0:e,i=t.toIndex,a=i===void 0?n.length:i;if(r<0||r>=n.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=n[r],u=r+1;u<a;u++)n[u]<s&&(s=n[u]);return s},al=function(n){var t,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Os(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");if(e.output!==void 0){if(!Os(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(n.length);var r=$g(n),i=Zg(n);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,s=a===void 0?e.autoMinMax?r:0:a,u=e.max,l=u===void 0?e.autoMinMax?i:1:u;if(s>=l)throw new RangeError("min option must be smaller than max option");for(var d=(l-s)/(i-r),v=0;v<n.length;v++)t[v]=(n[v]-r)*d+s;return t},Ms=" ".repeat(2),sl=" ".repeat(4);function ul(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.maxRows,r=e===void 0?15:e,i=t.maxColumns,a=i===void 0?10:i,s=t.maxNumSize,u=s===void 0?8:s;return"".concat(n.constructor.name,` {
`).concat(Ms,`[
`).concat(sl).concat(Qg(n,r,a,u),`
`).concat(Ms,`]
`).concat(Ms,"rows: ").concat(n.rows,`
`).concat(Ms,"columns: ").concat(n.columns,`
}`)}function Qg(n,t,e,r){for(var i=n.rows,a=n.columns,s=Math.min(i,t),u=Math.min(a,e),l=[],d=0;d<s;d++){for(var v=[],k=0;k<u;k++)v.push(Jg(n.get(d,k),r));l.push("".concat(v.join(" ")))}return u!==a&&(l[l.length-1]+=" ... ".concat(a-e," more columns")),s!==i&&l.push("... ".concat(i-t," more rows")),l.join(`
`.concat(sl))}function Jg(n,t){var e=String(n);if(e.length<=t)return e.padEnd(t," ");var r=n.toPrecision(t-2);if(r.length<=t)return r;var i=n.toExponential(t-2),a=i.indexOf("e"),s=i.slice(a);return i.slice(0,t-s.length)+s}function Cu(n){return(Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function mo(n,t,e){var r=e?n.rows:n.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function bo(n,t,e){var r=e?n.columns:n.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function ya(n,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function ma(n,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function ev(n,t){if(Cu(t)!=="object")throw new TypeError("unexpected type for row indices");if(t.some(function(e){return e<0||e>=n.rows}))throw new RangeError("row indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function tv(n,t){if(Cu(t)!=="object")throw new TypeError("unexpected type for column indices");if(t.some(function(e){return e<0||e>=n.columns}))throw new RangeError("column indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function cl(n,t,e,r,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(As("startRow",t),As("endRow",e),As("startColumn",r),As("endColumn",i),t>e||r>i||t<0||t>=n.rows||e<0||e>=n.rows||r<0||r>=n.columns||i<0||i>=n.columns)throw new RangeError("Submatrix indices are out of range")}function ks(n){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=[],r=0;r<n;r++)e.push(t);return e}function As(n,t){if(typeof t!="number")throw new TypeError("".concat(n," must be a number"))}function ba(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function rv(n,t,e){for(var r=n.rows,i=n.columns,a=[],s=0;s<r;s++){for(var u=0,l=0,d=0,v=0;v<i;v++)u+=d=n.get(s,v)-e[s],l+=d*d;t?a.push((l-u*u/i)/(i-1)):a.push((l-u*u/i)/i)}return a}function nv(n,t,e){for(var r=n.rows,i=n.columns,a=[],s=0;s<i;s++){for(var u=0,l=0,d=0,v=0;v<r;v++)u+=d=n.get(v,s)-e[s],l+=d*d;t?a.push((l-u*u/r)/(r-1)):a.push((l-u*u/r)/r)}return a}function iv(n,t,e){for(var r=n.rows,i=n.columns,a=r*i,s=0,u=0,l=0,d=0;d<r;d++)for(var v=0;v<i;v++)s+=l=n.get(d,v)-e,u+=l*l;return t?(u-s*s/a)/(a-1):(u-s*s/a)/a}function ov(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)-t[e])}function av(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)-t[r])}function sv(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)-t)}function uv(n){for(var t=[],e=0;e<n.rows;e++){for(var r=0,i=0;i<n.columns;i++)r+=Math.pow(n.get(e,i),2)/(n.columns-1);t.push(Math.sqrt(r))}return t}function cv(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)/t[e])}function lv(n){for(var t=[],e=0;e<n.columns;e++){for(var r=0,i=0;i<n.rows;i++)r+=Math.pow(n.get(i,e),2)/(n.rows-1);t.push(Math.sqrt(r))}return t}function fv(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)/t[r])}function hv(n){for(var t=n.size-1,e=0,r=0;r<n.columns;r++)for(var i=0;i<n.rows;i++)e+=Math.pow(n.get(i,r),2)/t;return Math.sqrt(e)}function dv(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)/t)}function ll(n,t){return(ll=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function pv(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Tu(n);if(t){var i=Tu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return fl(this,e)}}function fl(n,t){return!t||to(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Tu(n){return(Tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function to(n){return(to=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function hl(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function dl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function pl(n,t,e){return t&&dl(n.prototype,t),e&&dl(n,e),n}var vi=function(){function n(){hl(this,n)}return pl(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.call(this,e,r);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.push(this.get(e,r));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,r=-1,i=!0,a=!1;t<this.rows&&i;){for(e=0,a=!1;e<this.columns&&a===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>r?(a=!0,r=e):(i=!1,a=!0);t++}return i}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,r=-1,i=!0,a=!1;t<this.rows&&i;){for(e=0,a=!1;e<this.columns&&a===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>r?(a=!0,r=e):(i=!1,a=!0);for(var s=e+1;s<this.rows;s++)this.get(t,s)!==0&&(i=!1);t++}return i}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,r=0;e<t.rows&&r<t.columns;){for(var i=e,a=e;a<t.rows;a++)t.get(a,r)>t.get(i,r)&&(i=a);if(t.get(i,r)===0)r++;else{t.swapRows(e,i);for(var s=t.get(e,r),u=r;u<t.columns;u++)t.set(e,u,t.get(e,u)/s);for(var l=e+1;l<t.rows;l++){var d=t.get(l,r)/t.get(e,r);t.set(l,r,0);for(var v=r+1;v<t.columns;v++)t.set(l,v,t.get(l,v)-t.get(e,v)*d)}e++,r++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,r=t.rows,i=r-1;i>=0;)if(t.maxRow(i)===0)i--;else{for(var a=0,s=!1;a<r&&s===!1;)t.get(i,a)===1?s=!0:a++;for(var u=0;u<i;u++)for(var l=t.get(u,a),d=a;d<e;d++){var v=t.get(u,d)-l*t.get(i,d);t.set(u,d,v)}i--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(to(t)!=="object")throw new TypeError("options must be an object");var e=t.rows,r=e===void 0?1:e,i=t.columns,a=i===void 0?1:i;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");for(var s=new zr(this.rows*r,this.columns*a),u=0;u<r;u++)for(var l=0;l<a;l++)s.setSubMatrix(this,this.rows*u,this.columns*l);return s}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){mo(this,t);for(var e=[],r=0;r<this.columns;r++)e.push(this.get(t,r));return e}},{key:"getRowVector",value:function(t){return zr.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){mo(this,t),e=ya(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}},{key:"swapRows",value:function(t,e){mo(this,t),mo(this,e);for(var r=0;r<this.columns;r++){var i=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,i)}return this}},{key:"getColumn",value:function(t){bo(this,t);for(var e=[],r=0;r<this.rows;r++)e.push(this.get(r,t));return e}},{key:"getColumnVector",value:function(t){return zr.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){bo(this,t),e=ma(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}},{key:"swapColumns",value:function(t,e){bo(this,t),bo(this,e);for(var r=0;r<this.rows;r++){var i=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,i)}return this}},{key:"addRowVector",value:function(t){t=ya(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}},{key:"subRowVector",value:function(t){t=ya(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}},{key:"mulRowVector",value:function(t){t=ya(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}},{key:"divRowVector",value:function(t){t=ya(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}},{key:"addColumnVector",value:function(t){t=ma(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=ma(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=ma(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=ma(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}},{key:"mulRow",value:function(t,e){mo(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}},{key:"mulColumn",value:function(t,e){bo(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}},{key:"maxIndex",value:function(){ba(this);for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.get(r,i)>t&&(t=this.get(r,i),e[0]=r,e[1]=i);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}},{key:"minIndex",value:function(){ba(this);for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.get(r,i)<t&&(t=this.get(r,i),e[0]=r,e[1]=i);return e}},{key:"maxRow",value:function(t){if(mo(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}},{key:"maxRowIndex",value:function(t){mo(this,t),ba(this);for(var e=this.get(t,0),r=[t,0],i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i),r[1]=i);return r}},{key:"minRow",value:function(t){if(mo(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}},{key:"minRowIndex",value:function(t){mo(this,t),ba(this);for(var e=this.get(t,0),r=[t,0],i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i),r[1]=i);return r}},{key:"maxColumn",value:function(t){if(bo(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}},{key:"maxColumnIndex",value:function(t){bo(this,t),ba(this);for(var e=this.get(0,t),r=[0,t],i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t),r[0]=i);return r}},{key:"minColumn",value:function(t){if(bo(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}},{key:"minColumnIndex",value:function(t){bo(this,t),ba(this);for(var e=this.get(0,t),r=[0,t],i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t),r[0]=i);return r}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],r=0;r<t;r++)e.push(this.get(r,r));return e}},{key:"norm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",e=0;if(t==="max")return this.max();if(t==="frobenius"){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)e+=this.get(r,i)*this.get(r,i);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}},{key:"dot",value:function(t){n.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var r=0,i=0;i<e.length;i++)r+=e[i]*t[i];return r}},{key:"mmul",value:function(t){t=zr.checkMatrix(t);for(var e=this.rows,r=this.columns,i=t.columns,a=new zr(e,i),s=new Float64Array(r),u=0;u<i;u++){for(var l=0;l<r;l++)s[l]=t.get(l,u);for(var d=0;d<e;d++){for(var v=0,k=0;k<r;k++)v+=this.get(d,k)*s[k];a.set(d,u,v)}}return a}},{key:"strassen2x2",value:function(t){t=zr.checkMatrix(t);var e=new zr(2,2),r=this.get(0,0),i=t.get(0,0),a=this.get(0,1),s=t.get(0,1),u=this.get(1,0),l=t.get(1,0),d=this.get(1,1),v=t.get(1,1),k=(r+d)*(i+v),T=(u+d)*i,I=r*(s-v),j=d*(l-i),F=(r+a)*v,G=k+j-F+(a-d)*(l+v),V=I+F,q=T+j,$=k-T+I+(u-r)*(i+s);return e.set(0,0,G),e.set(0,1,V),e.set(1,0,q),e.set(1,1,$),e}},{key:"strassen3x3",value:function(t){t=zr.checkMatrix(t);var e=new zr(3,3),r=this.get(0,0),i=this.get(0,1),a=this.get(0,2),s=this.get(1,0),u=this.get(1,1),l=this.get(1,2),d=this.get(2,0),v=this.get(2,1),k=this.get(2,2),T=t.get(0,0),I=t.get(0,1),j=t.get(0,2),F=t.get(1,0),G=t.get(1,1),V=t.get(1,2),q=t.get(2,0),$=t.get(2,1),ve=t.get(2,2),de=(r-s)*(-I+G),me=(-r+s+u)*(T-I+G),Ie=(s+u)*(-T+I),Ee=r*T,Pe=(-r+d+v)*(T-j+V),Ze=(-r+d)*(j-V),it=(d+v)*(-T+j),ct=(-a+v+k)*(G+q-$),st=(a-k)*(G-$),jt=a*q,gt=(v+k)*(-q+$),Pt=(-a+u+l)*(V+q-ve),Rt=(a-l)*(V-ve),Zt=(u+l)*(-q+ve),Ct=Ee+jt+i*F,Vt=(r+i+a-s-u-v-k)*G+me+Ie+Ee+ct+jt+gt,Dt=Ee+Pe+it+(r+i+a-u-l-d-v)*V+jt+Pt+Zt,qt=de+u*(-T+I+F-G-V-q+ve)+me+Ee+jt+Pt+Rt,$t=de+me+Ie+Ee+l*$,Gt=jt+Pt+Rt+Zt+s*j,lr=Ee+Pe+Ze+v*(-T+j+F-G-V-q+$)+ct+st+jt,Br=ct+st+jt+gt+d*I,wn=Ee+Pe+Ze+it+k*ve;return e.set(0,0,Ct),e.set(0,1,Vt),e.set(0,2,Dt),e.set(1,0,qt),e.set(1,1,$t),e.set(1,2,Gt),e.set(2,0,lr),e.set(2,1,Br),e.set(2,2,wn),e}},{key:"mmulStrassen",value:function(t){t=zr.checkMatrix(t);var e=this.clone(),r=e.rows,i=e.columns,a=t.rows,s=t.columns;function u(v,k,T){var I=v.rows,j=v.columns;if(I===k&&j===T)return v;var F=n.zeros(k,T);return F=F.setSubMatrix(v,0,0)}i!==a&&console.warn("Multiplying ".concat(r," x ").concat(i," and ").concat(a," x ").concat(s," matrix: dimensions do not match."));var l=Math.max(r,a),d=Math.max(i,s);return function v(k,T,I,j){if(I<=512||j<=512)return k.mmul(T);I%2==1&&j%2==1?(k=u(k,I+1,j+1),T=u(T,I+1,j+1)):I%2==1?(k=u(k,I+1,j),T=u(T,I+1,j)):j%2==1&&(k=u(k,I,j+1),T=u(T,I,j+1));var F=parseInt(k.rows/2,10),G=parseInt(k.columns/2,10),V=k.subMatrix(0,F-1,0,G-1),q=T.subMatrix(0,F-1,0,G-1),$=k.subMatrix(0,F-1,G,k.columns-1),ve=T.subMatrix(0,F-1,G,T.columns-1),de=k.subMatrix(F,k.rows-1,0,G-1),me=T.subMatrix(F,T.rows-1,0,G-1),Ie=k.subMatrix(F,k.rows-1,G,k.columns-1),Ee=T.subMatrix(F,T.rows-1,G,T.columns-1),Pe=v(n.add(V,Ie),n.add(q,Ee),F,G),Ze=v(n.add(de,Ie),q,F,G),it=v(V,n.sub(ve,Ee),F,G),ct=v(Ie,n.sub(me,q),F,G),st=v(n.add(V,$),Ee,F,G),jt=v(n.sub(de,V),n.add(q,ve),F,G),gt=v(n.sub($,Ie),n.add(me,Ee),F,G),Pt=n.add(Pe,ct);Pt.sub(st),Pt.add(gt);var Rt=n.add(it,st),Zt=n.add(Ze,ct),Ct=n.sub(Pe,Ze);Ct.add(it),Ct.add(jt);var Vt=n.zeros(2*Pt.rows,2*Pt.columns);return(Vt=(Vt=(Vt=(Vt=Vt.setSubMatrix(Pt,0,0)).setSubMatrix(Rt,Pt.rows,0)).setSubMatrix(Zt,0,Pt.columns)).setSubMatrix(Ct,Pt.rows,Pt.columns)).subMatrix(0,I-1,0,j-1)}(e=u(e,l,d),t=u(t,l,d),l,d)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(to(t)!=="object")throw new TypeError("options must be an object");var e=t.min,r=e===void 0?0:e,i=t.max,a=i===void 0?1:i;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(r>=a)throw new RangeError("min must be smaller than max");for(var s=new zr(this.rows,this.columns),u=0;u<this.rows;u++){var l=this.getRow(u);l.length>0&&al(l,{min:r,max:a,output:l}),s.setRow(u,l)}return s}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(to(t)!=="object")throw new TypeError("options must be an object");var e=t.min,r=e===void 0?0:e,i=t.max,a=i===void 0?1:i;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(r>=a)throw new RangeError("min must be smaller than max");for(var s=new zr(this.rows,this.columns),u=0;u<this.columns;u++){var l=this.getColumn(u);l.length&&al(l,{min:r,max:a,output:l}),s.setColumn(u,l)}return s}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var r=0;r<t;r++){var i=this.get(e,r),a=this.get(e,this.columns-1-r);this.set(e,r,a),this.set(e,this.columns-1-r,i)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var r=0;r<t;r++){var i=this.get(r,e),a=this.get(this.rows-1-r,e);this.set(r,e,a),this.set(this.rows-1-r,e,i)}return this}},{key:"kroneckerProduct",value:function(t){t=zr.checkMatrix(t);for(var e=this.rows,r=this.columns,i=t.rows,a=t.columns,s=new zr(e*i,r*a),u=0;u<e;u++)for(var l=0;l<r;l++)for(var d=0;d<i;d++)for(var v=0;v<a;v++)s.set(i*u+d,a*l+v,this.get(u,l)*t.get(d,v));return s}},{key:"kroneckerSum",value:function(t){if(t=zr.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,r=t.rows,i=this.kroneckerProduct(zr.eye(r,r)),a=zr.eye(e,e).kroneckerProduct(t);return i.add(a)}},{key:"transpose",value:function(){for(var t=new zr(this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gl,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gl,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,r,i){cl(this,t,e,r,i);for(var a=new zr(e-t+1,i-r+1),s=t;s<=e;s++)for(var u=r;u<=i;u++)a.set(s-t,u-r,this.get(s,u));return a}},{key:"subMatrixRow",value:function(t,e,r){if(e===void 0&&(e=0),r===void 0&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var i=new zr(t.length,r-e+1),a=0;a<t.length;a++)for(var s=e;s<=r;s++){if(t[a]<0||t[a]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[a]));i.set(a,s-e,this.get(t[a],s))}return i}},{key:"subMatrixColumn",value:function(t,e,r){if(e===void 0&&(e=0),r===void 0&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var i=new zr(r-e+1,t.length),a=0;a<t.length;a++)for(var s=e;s<=r;s++){if(t[a]<0||t[a]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[a]));i.set(s-e,a,this.get(s,t[a]))}return i}},{key:"setSubMatrix",value:function(t,e,r){if((t=zr.checkMatrix(t)).isEmpty())return this;cl(this,e,e+t.rows-1,r,r+t.columns-1);for(var i=0;i<t.rows;i++)for(var a=0;a<t.columns;a++)this.set(e+i,r+a,t.get(i,a));return this}},{key:"selection",value:function(t,e){for(var r=function(d,v,k){return{row:ev(d,v),column:tv(d,k)}}(this,t,e),i=new zr(t.length,e.length),a=0;a<r.row.length;a++)for(var s=r.row[a],u=0;u<r.column.length;u++){var l=r.column[u];i.set(a,u,this.get(s,l))}return i}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}},{key:"clone",value:function(){for(var t=new zr(this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(e){for(var r=ks(e.rows),i=0;i<e.rows;++i)for(var a=0;a<e.columns;++a)r[i]+=e.get(i,a);return r}(this);case"column":return function(e){for(var r=ks(e.columns),i=0;i<e.rows;++i)for(var a=0;a<e.columns;++a)r[a]+=e.get(i,a);return r}(this);case void 0:return function(e){for(var r=0,i=0;i<e.rows;i++)for(var a=0;a<e.columns;a++)r+=e.get(i,a);return r}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(e){for(var r=ks(e.rows,1),i=0;i<e.rows;++i)for(var a=0;a<e.columns;++a)r[i]*=e.get(i,a);return r}(this);case"column":return function(e){for(var r=ks(e.columns,1),i=0;i<e.rows;++i)for(var a=0;a<e.columns;++a)r[a]*=e.get(i,a);return r}(this);case void 0:return function(e){for(var r=1,i=0;i<e.rows;i++)for(var a=0;a<e.columns;a++)r*=e.get(i,a);return r}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var r=0;r<this.rows;r++)e[r]/=this.columns;return e;case"column":for(var i=0;i<this.columns;i++)e[i]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(to(t)==="object"&&(e=t,t=void 0),to(e)!=="object")throw new TypeError("options must be an object");var r=e,i=r.unbiased,a=i===void 0||i,s=r.mean,u=s===void 0?this.mean(t):s;if(typeof a!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(u))throw new TypeError("mean must be an array");return rv(this,a,u);case"column":if(!Array.isArray(u))throw new TypeError("mean must be an array");return nv(this,a,u);case void 0:if(typeof u!="number")throw new TypeError("mean must be a number");return iv(this,a,u);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){to(t)==="object"&&(e=t,t=void 0);var r=this.variance(t,e);if(t===void 0)return Math.sqrt(r);for(var i=0;i<r.length;i++)r[i]=Math.sqrt(r[i]);return r}},{key:"center",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(to(t)==="object"&&(e=t,t=void 0),to(e)!=="object")throw new TypeError("options must be an object");var r=e,i=r.center,a=i===void 0?this.mean(t):i;switch(t){case"row":if(!Array.isArray(a))throw new TypeError("center must be an array");return ov(this,a),this;case"column":if(!Array.isArray(a))throw new TypeError("center must be an array");return av(this,a),this;case void 0:if(typeof a!="number")throw new TypeError("center must be a number");return sv(this,a),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(to(t)==="object"&&(e=t,t=void 0),to(e)!=="object")throw new TypeError("options must be an object");var r=e.scale;switch(t){case"row":if(r===void 0)r=uv(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return cv(this,r),this;case"column":if(r===void 0)r=lv(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return fv(this,r),this;case void 0:if(r===void 0)r=hv(this);else if(typeof r!="number")throw new TypeError("scale must be a number");return dv(this,r),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return ul(this,t)}}],[{key:"from1DArray",value:function(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");for(var i=new zr(t,e),a=0;a<t;a++)for(var s=0;s<e;s++)i.set(a,s,r[a*e+s]);return i}},{key:"rowVector",value:function(t){for(var e=new zr(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}},{key:"columnVector",value:function(t){for(var e=new zr(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}},{key:"zeros",value:function(t,e){return new zr(t,e)}},{key:"ones",value:function(t,e){return new zr(t,e).fill(1)}},{key:"rand",value:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(to(r)!=="object")throw new TypeError("options must be an object");for(var i=r.random,a=i===void 0?Math.random:i,s=new zr(t,e),u=0;u<t;u++)for(var l=0;l<e;l++)s.set(u,l,a());return s}},{key:"randInt",value:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(to(r)!=="object")throw new TypeError("options must be an object");var i=r.min,a=i===void 0?0:i,s=r.max,u=s===void 0?1e3:s,l=r.random,d=l===void 0?Math.random:l;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(a>=u)throw new RangeError("min must be smaller than max");for(var v=u-a,k=new zr(t,e),T=0;T<t;T++)for(var I=0;I<e;I++){var j=a+Math.round(d()*v);k.set(T,I,j)}return k}},{key:"eye",value:function(t,e,r){e===void 0&&(e=t),r===void 0&&(r=1);for(var i=Math.min(t,e),a=this.zeros(t,e),s=0;s<i;s++)a.set(s,s,r);return a}},{key:"diag",value:function(t,e,r){var i=t.length;e===void 0&&(e=i),r===void 0&&(r=e);for(var a=Math.min(i,e,r),s=this.zeros(e,r),u=0;u<a;u++)s.set(u,u,t[u]);return s}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,i=t.columns,a=new zr(r,i),s=0;s<r;s++)for(var u=0;u<i;u++)a.set(s,u,Math.min(t.get(s,u),e.get(s,u)));return a}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,i=t.columns,a=new this(r,i),s=0;s<r;s++)for(var u=0;u<i;u++)a.set(s,u,Math.max(t.get(s,u),e.get(s,u)));return a}},{key:"checkMatrix",value:function(t){return n.isMatrix(t)?t:new zr(t)}},{key:"isMatrix",value:function(t){return t!=null&&t.klass==="Matrix"}}]),n}();function gl(n,t){return n-t}vi.prototype.klass="Matrix",typeof Symbol!="undefined"&&(vi.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return ul(this)}),vi.random=vi.rand,vi.randomInt=vi.randInt,vi.diagonal=vi.diag,vi.prototype.diagonal=vi.prototype.diag,vi.identity=vi.eye,vi.prototype.negate=vi.prototype.neg,vi.prototype.tensorProduct=vi.prototype.kroneckerProduct;var Bt,Pr,zr=function(n){(function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),i&&ll(r,i)})(e,n);var t=pv(e);function e(r,i){var a;if(hl(this,e),a=t.call(this),e.isMatrix(r))return fl(a,r.clone());if(Number.isInteger(r)&&r>=0){if(a.data=[],!(Number.isInteger(i)&&i>=0))throw new TypeError("nColumns must be a positive integer");for(var s=0;s<r;s++)a.data.push(new Float64Array(i))}else{if(!Array.isArray(r))throw new TypeError("First argument must be a positive number or an array");var u=r;if(typeof(i=(r=u.length)?u[0].length:0)!="number")throw new TypeError("Data must be a 2D array with at least one element");a.data=[];for(var l=0;l<r;l++){if(u[l].length!==i)throw new RangeError("Inconsistent array dimensions");a.data.push(Float64Array.from(u[l]))}}return a.rows=r,a.columns=i,a}return pl(e,[{key:"set",value:function(r,i,a){return this.data[r][i]=a,this}},{key:"get",value:function(r,i){return this.data[r][i]}},{key:"removeRow",value:function(r){return mo(this,r),this.data.splice(r,1),this.rows-=1,this}},{key:"addRow",value:function(r,i){return i===void 0&&(i=r,r=this.rows),mo(this,r,!0),i=Float64Array.from(ya(this,i)),this.data.splice(r,0,i),this.rows+=1,this}},{key:"removeColumn",value:function(r){bo(this,r);for(var i=0;i<this.rows;i++){for(var a=new Float64Array(this.columns-1),s=0;s<r;s++)a[s]=this.data[i][s];for(var u=r+1;u<this.columns;u++)a[u-1]=this.data[i][u];this.data[i]=a}return this.columns-=1,this}},{key:"addColumn",value:function(r,i){i===void 0&&(i=r,r=this.columns),bo(this,r,!0),i=ma(this,i);for(var a=0;a<this.rows;a++){for(var s=new Float64Array(this.columns+1),u=0;u<r;u++)s[u]=this.data[a][u];for(s[u++]=i[a];u<this.columns+1;u++)s[u]=this.data[a][u-1];this.data[a]=s}return this.columns+=1,this}}]),e}(vi);function vl(n){return(vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function yl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ml(n,t){return(ml=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function gv(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Iu(n);if(t){var i=Iu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return vv(this,e)}}function vv(n,t){return!t||vl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Iu(n){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}Pr=zr,(Bt=vi).prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},Bt.prototype.addS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)+n);return this},Bt.prototype.addM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)+n.get(t,e));return this},Bt.add=function(n,t){return new Pr(n).add(t)},Bt.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},Bt.prototype.subS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)-n);return this},Bt.prototype.subM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)-n.get(t,e));return this},Bt.sub=function(n,t){return new Pr(n).sub(t)},Bt.prototype.subtract=Bt.prototype.sub,Bt.prototype.subtractS=Bt.prototype.subS,Bt.prototype.subtractM=Bt.prototype.subM,Bt.subtract=Bt.sub,Bt.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},Bt.prototype.mulS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*n);return this},Bt.prototype.mulM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*n.get(t,e));return this},Bt.mul=function(n,t){return new Pr(n).mul(t)},Bt.prototype.multiply=Bt.prototype.mul,Bt.prototype.multiplyS=Bt.prototype.mulS,Bt.prototype.multiplyM=Bt.prototype.mulM,Bt.multiply=Bt.mul,Bt.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},Bt.prototype.divS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)/n);return this},Bt.prototype.divM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)/n.get(t,e));return this},Bt.div=function(n,t){return new Pr(n).div(t)},Bt.prototype.divide=Bt.prototype.div,Bt.prototype.divideS=Bt.prototype.divS,Bt.prototype.divideM=Bt.prototype.divM,Bt.divide=Bt.div,Bt.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},Bt.prototype.modS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)%n);return this},Bt.prototype.modM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)%n.get(t,e));return this},Bt.mod=function(n,t){return new Pr(n).mod(t)},Bt.prototype.modulus=Bt.prototype.mod,Bt.prototype.modulusS=Bt.prototype.modS,Bt.prototype.modulusM=Bt.prototype.modM,Bt.modulus=Bt.mod,Bt.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},Bt.prototype.andS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)&n);return this},Bt.prototype.andM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)&n.get(t,e));return this},Bt.and=function(n,t){return new Pr(n).and(t)},Bt.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},Bt.prototype.orS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)|n);return this},Bt.prototype.orM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)|n.get(t,e));return this},Bt.or=function(n,t){return new Pr(n).or(t)},Bt.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},Bt.prototype.xorS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)^n);return this},Bt.prototype.xorM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)^n.get(t,e));return this},Bt.xor=function(n,t){return new Pr(n).xor(t)},Bt.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},Bt.prototype.leftShiftS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)<<n);return this},Bt.prototype.leftShiftM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)<<n.get(t,e));return this},Bt.leftShift=function(n,t){return new Pr(n).leftShift(t)},Bt.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},Bt.prototype.signPropagatingRightShiftS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)>>n);return this},Bt.prototype.signPropagatingRightShiftM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)>>n.get(t,e));return this},Bt.signPropagatingRightShift=function(n,t){return new Pr(n).signPropagatingRightShift(t)},Bt.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},Bt.prototype.rightShiftS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)>>>n);return this},Bt.prototype.rightShiftM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)>>>n.get(t,e));return this},Bt.rightShift=function(n,t){return new Pr(n).rightShift(t)},Bt.prototype.zeroFillRightShift=Bt.prototype.rightShift,Bt.prototype.zeroFillRightShiftS=Bt.prototype.rightShiftS,Bt.prototype.zeroFillRightShiftM=Bt.prototype.rightShiftM,Bt.zeroFillRightShift=Bt.rightShift,Bt.prototype.not=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,~this.get(n,t));return this},Bt.not=function(n){return new Pr(n).not()},Bt.prototype.abs=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.abs(this.get(n,t)));return this},Bt.abs=function(n){return new Pr(n).abs()},Bt.prototype.acos=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.acos(this.get(n,t)));return this},Bt.acos=function(n){return new Pr(n).acos()},Bt.prototype.acosh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.acosh(this.get(n,t)));return this},Bt.acosh=function(n){return new Pr(n).acosh()},Bt.prototype.asin=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.asin(this.get(n,t)));return this},Bt.asin=function(n){return new Pr(n).asin()},Bt.prototype.asinh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.asinh(this.get(n,t)));return this},Bt.asinh=function(n){return new Pr(n).asinh()},Bt.prototype.atan=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.atan(this.get(n,t)));return this},Bt.atan=function(n){return new Pr(n).atan()},Bt.prototype.atanh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.atanh(this.get(n,t)));return this},Bt.atanh=function(n){return new Pr(n).atanh()},Bt.prototype.cbrt=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.cbrt(this.get(n,t)));return this},Bt.cbrt=function(n){return new Pr(n).cbrt()},Bt.prototype.ceil=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.ceil(this.get(n,t)));return this},Bt.ceil=function(n){return new Pr(n).ceil()},Bt.prototype.clz32=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.clz32(this.get(n,t)));return this},Bt.clz32=function(n){return new Pr(n).clz32()},Bt.prototype.cos=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.cos(this.get(n,t)));return this},Bt.cos=function(n){return new Pr(n).cos()},Bt.prototype.cosh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.cosh(this.get(n,t)));return this},Bt.cosh=function(n){return new Pr(n).cosh()},Bt.prototype.exp=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.exp(this.get(n,t)));return this},Bt.exp=function(n){return new Pr(n).exp()},Bt.prototype.expm1=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.expm1(this.get(n,t)));return this},Bt.expm1=function(n){return new Pr(n).expm1()},Bt.prototype.floor=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.floor(this.get(n,t)));return this},Bt.floor=function(n){return new Pr(n).floor()},Bt.prototype.fround=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.fround(this.get(n,t)));return this},Bt.fround=function(n){return new Pr(n).fround()},Bt.prototype.log=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.log(this.get(n,t)));return this},Bt.log=function(n){return new Pr(n).log()},Bt.prototype.log1p=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.log1p(this.get(n,t)));return this},Bt.log1p=function(n){return new Pr(n).log1p()},Bt.prototype.log10=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.log10(this.get(n,t)));return this},Bt.log10=function(n){return new Pr(n).log10()},Bt.prototype.log2=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.log2(this.get(n,t)));return this},Bt.log2=function(n){return new Pr(n).log2()},Bt.prototype.round=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.round(this.get(n,t)));return this},Bt.round=function(n){return new Pr(n).round()},Bt.prototype.sign=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.sign(this.get(n,t)));return this},Bt.sign=function(n){return new Pr(n).sign()},Bt.prototype.sin=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.sin(this.get(n,t)));return this},Bt.sin=function(n){return new Pr(n).sin()},Bt.prototype.sinh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.sinh(this.get(n,t)));return this},Bt.sinh=function(n){return new Pr(n).sinh()},Bt.prototype.sqrt=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.sqrt(this.get(n,t)));return this},Bt.sqrt=function(n){return new Pr(n).sqrt()},Bt.prototype.tan=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.tan(this.get(n,t)));return this},Bt.tan=function(n){return new Pr(n).tan()},Bt.prototype.tanh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.tanh(this.get(n,t)));return this},Bt.tanh=function(n){return new Pr(n).tanh()},Bt.prototype.trunc=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.trunc(this.get(n,t)));return this},Bt.trunc=function(n){return new Pr(n).trunc()},Bt.pow=function(n,t){return new Pr(n).pow(t)},Bt.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},Bt.prototype.powS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.pow(this.get(t,e),n));return this},Bt.prototype.powM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.pow(this.get(t,e),n.get(t,e)));return this};var yv=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&ml(s,u)})(a,n);var t,e,r,i=gv(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).data=s,u.rows=s.length,u.columns=s[0].length,u}return t=a,(e=[{key:"set",value:function(s,u,l){return this.data[s][u]=l,this}},{key:"get",value:function(s,u){return this.data[s][u]}}])&&yl(t.prototype,e),r&&yl(t,r),a}(vi);function xa(n,t){var e=0;return Math.abs(n)>Math.abs(t)?(e=t/n,Math.abs(n)*Math.sqrt(1+e*e)):t!==0?(e=n/t,Math.abs(t)*Math.sqrt(1+e*e)):0}function mv(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function bl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var xl=function(){function n(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(mv(this,n),(i=yv.checkMatrix(i)).isEmpty())throw new Error("Matrix must be non-empty");var s,u=i.rows,l=i.columns,d=a.computeLeftSingularVectors,v=d===void 0||d,k=a.computeRightSingularVectors,T=k===void 0||k,I=a.autoTranspose,j=I!==void 0&&I,F=Boolean(v),G=Boolean(T),V=!1;if(u<l)if(j){u=(s=i.transpose()).rows,l=s.columns,V=!0;var q=F;F=G,G=q}else s=i.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=i.clone();for(var $=Math.min(u,l),ve=Math.min(u+1,l),de=new Float64Array(ve),me=new zr(u,$),Ie=new zr(l,l),Ee=new Float64Array(l),Pe=new Float64Array(u),Ze=new Float64Array(ve),it=0;it<ve;it++)Ze[it]=it;for(var ct=Math.min(u-1,l),st=Math.max(0,Math.min(l-2,u)),jt=Math.max(ct,st),gt=0;gt<jt;gt++){if(gt<ct){de[gt]=0;for(var Pt=gt;Pt<u;Pt++)de[gt]=xa(de[gt],s.get(Pt,gt));if(de[gt]!==0){s.get(gt,gt)<0&&(de[gt]=-de[gt]);for(var Rt=gt;Rt<u;Rt++)s.set(Rt,gt,s.get(Rt,gt)/de[gt]);s.set(gt,gt,s.get(gt,gt)+1)}de[gt]=-de[gt]}for(var Zt=gt+1;Zt<l;Zt++){if(gt<ct&&de[gt]!==0){for(var Ct=0,Vt=gt;Vt<u;Vt++)Ct+=s.get(Vt,gt)*s.get(Vt,Zt);Ct=-Ct/s.get(gt,gt);for(var Dt=gt;Dt<u;Dt++)s.set(Dt,Zt,s.get(Dt,Zt)+Ct*s.get(Dt,gt))}Ee[Zt]=s.get(gt,Zt)}if(F&&gt<ct)for(var qt=gt;qt<u;qt++)me.set(qt,gt,s.get(qt,gt));if(gt<st){Ee[gt]=0;for(var $t=gt+1;$t<l;$t++)Ee[gt]=xa(Ee[gt],Ee[$t]);if(Ee[gt]!==0){Ee[gt+1]<0&&(Ee[gt]=0-Ee[gt]);for(var Gt=gt+1;Gt<l;Gt++)Ee[Gt]/=Ee[gt];Ee[gt+1]+=1}if(Ee[gt]=-Ee[gt],gt+1<u&&Ee[gt]!==0){for(var lr=gt+1;lr<u;lr++)Pe[lr]=0;for(var Br=gt+1;Br<u;Br++)for(var wn=gt+1;wn<l;wn++)Pe[Br]+=Ee[wn]*s.get(Br,wn);for(var Sr=gt+1;Sr<l;Sr++)for(var jr=-Ee[Sr]/Ee[gt+1],_r=gt+1;_r<u;_r++)s.set(_r,Sr,s.get(_r,Sr)+jr*Pe[_r])}if(G)for(var un=gt+1;un<l;un++)Ie.set(un,gt,Ee[un])}}var hr=Math.min(l,u+1);if(ct<l&&(de[ct]=s.get(ct,ct)),u<hr&&(de[hr-1]=0),st+1<hr&&(Ee[st]=s.get(st,hr-1)),Ee[hr-1]=0,F){for(var qr=ct;qr<$;qr++){for(var en=0;en<u;en++)me.set(en,qr,0);me.set(qr,qr,1)}for(var Yr=ct-1;Yr>=0;Yr--)if(de[Yr]!==0){for(var Cr=Yr+1;Cr<$;Cr++){for(var Tr=0,Zr=Yr;Zr<u;Zr++)Tr+=me.get(Zr,Yr)*me.get(Zr,Cr);Tr=-Tr/me.get(Yr,Yr);for(var Tn=Yr;Tn<u;Tn++)me.set(Tn,Cr,me.get(Tn,Cr)+Tr*me.get(Tn,Yr))}for(var tn=Yr;tn<u;tn++)me.set(tn,Yr,-me.get(tn,Yr));me.set(Yr,Yr,1+me.get(Yr,Yr));for(var bi=0;bi<Yr-1;bi++)me.set(bi,Yr,0)}else{for(var cn=0;cn<u;cn++)me.set(cn,Yr,0);me.set(Yr,Yr,1)}}if(G)for(var Wr=l-1;Wr>=0;Wr--){if(Wr<st&&Ee[Wr]!==0)for(var An=Wr+1;An<l;An++){for(var Zn=0,En=Wr+1;En<l;En++)Zn+=Ie.get(En,Wr)*Ie.get(En,An);Zn=-Zn/Ie.get(Wr+1,Wr);for(var Si=Wr+1;Si<l;Si++)Ie.set(Si,An,Ie.get(Si,An)+Zn*Ie.get(Si,Wr))}for(var Wo=0;Wo<l;Wo++)Ie.set(Wo,Wr,0);Ie.set(Wr,Wr,1)}for(var wo=hr-1,no=Number.EPSILON;hr>0;){var wr=void 0,vn=void 0;for(wr=hr-2;wr>=-1&&wr!==-1;wr--){var $n=Number.MIN_VALUE+no*Math.abs(de[wr]+Math.abs(de[wr+1]));if(Math.abs(Ee[wr])<=$n||Number.isNaN(Ee[wr])){Ee[wr]=0;break}}if(wr===hr-2)vn=4;else{var _n=void 0;for(_n=hr-1;_n>=wr&&_n!==wr;_n--){var Ni=(_n!==hr?Math.abs(Ee[_n]):0)+(_n!==wr+1?Math.abs(Ee[_n-1]):0);if(Math.abs(de[_n])<=no*Ni){de[_n]=0;break}}_n===wr?vn=3:_n===hr-1?vn=1:(vn=2,wr=_n)}switch(wr++,vn){case 1:var go=Ee[hr-2];Ee[hr-2]=0;for(var xi=hr-2;xi>=wr;xi--){var _o=xa(de[xi],go),Ca=de[xi]/_o,Ta=go/_o;if(de[xi]=_o,xi!==wr&&(go=-Ta*Ee[xi-1],Ee[xi-1]=Ca*Ee[xi-1]),G)for(var So=0;So<l;So++)_o=Ca*Ie.get(So,xi)+Ta*Ie.get(So,hr-1),Ie.set(So,hr-1,-Ta*Ie.get(So,xi)+Ca*Ie.get(So,hr-1)),Ie.set(So,xi,_o)}break;case 2:var hc=Ee[wr-1];Ee[wr-1]=0;for(var Eo=wr;Eo<hr;Eo++){var ps=xa(de[Eo],hc),dc=de[Eo]/ps,pc=hc/ps;if(de[Eo]=ps,hc=-pc*Ee[Eo],Ee[Eo]=dc*Ee[Eo],F)for(var na=0;na<u;na++)ps=dc*me.get(na,Eo)+pc*me.get(na,wr-1),me.set(na,wr-1,-pc*me.get(na,Eo)+dc*me.get(na,wr-1)),me.set(na,Eo,ps)}break;case 3:var gs=Math.max(Math.abs(de[hr-1]),Math.abs(de[hr-2]),Math.abs(Ee[hr-2]),Math.abs(de[wr]),Math.abs(Ee[wr])),Ia=de[hr-1]/gs,Yp=de[hr-2]/gs,iu=Ee[hr-2]/gs,gc=de[wr]/gs,Kb=Ee[wr]/gs,da=((Yp+Ia)*(Yp-Ia)+iu*iu)/2,ou=Ia*iu*(Ia*iu),vc=0;da===0&&ou===0||(vc=ou/(da+(vc=da<0?0-Math.sqrt(da*da+ou):Math.sqrt(da*da+ou))));for(var pa=(gc+Ia)*(gc-Ia)+vc,ja=gc*Kb,bn=wr;bn<hr-1;bn++){var io=xa(pa,ja);io===0&&(io=Number.MIN_VALUE);var Oo=pa/io,Mo=ja/io;if(bn!==wr&&(Ee[bn-1]=io),pa=Oo*de[bn]+Mo*Ee[bn],Ee[bn]=Oo*Ee[bn]-Mo*de[bn],ja=Mo*de[bn+1],de[bn+1]=Oo*de[bn+1],G)for(var ia=0;ia<l;ia++)io=Oo*Ie.get(ia,bn)+Mo*Ie.get(ia,bn+1),Ie.set(ia,bn+1,-Mo*Ie.get(ia,bn)+Oo*Ie.get(ia,bn+1)),Ie.set(ia,bn,io);if((io=xa(pa,ja))===0&&(io=Number.MIN_VALUE),Oo=pa/io,Mo=ja/io,de[bn]=io,pa=Oo*Ee[bn]+Mo*de[bn+1],de[bn+1]=-Mo*Ee[bn]+Oo*de[bn+1],ja=Mo*Ee[bn+1],Ee[bn+1]=Oo*Ee[bn+1],F&&bn<u-1)for(var oa=0;oa<u;oa++)io=Oo*me.get(oa,bn)+Mo*me.get(oa,bn+1),me.set(oa,bn+1,-Mo*me.get(oa,bn)+Oo*me.get(oa,bn+1)),me.set(oa,bn,io)}Ee[hr-2]=pa;break;case 4:if(de[wr]<=0&&(de[wr]=de[wr]<0?-de[wr]:0,G))for(var au=0;au<=wo;au++)Ie.set(au,wr,-Ie.get(au,wr));for(;wr<wo&&!(de[wr]>=de[wr+1]);){var vs=de[wr];if(de[wr]=de[wr+1],de[wr+1]=vs,G&&wr<l-1)for(var Pa=0;Pa<l;Pa++)vs=Ie.get(Pa,wr+1),Ie.set(Pa,wr+1,Ie.get(Pa,wr)),Ie.set(Pa,wr,vs);if(F&&wr<u-1)for(var Na=0;Na<u;Na++)vs=me.get(Na,wr+1),me.set(Na,wr+1,me.get(Na,wr)),me.set(Na,wr,vs);wr++}hr--}}if(V){var Zb=Ie;Ie=me,me=Zb}this.m=u,this.n=l,this.s=de,this.U=me,this.V=Ie}var t,e,r;return t=n,(e=[{key:"solve",value:function(i){for(var a=i,s=this.threshold,u=this.s.length,l=zr.zeros(u,u),d=0;d<u;d++)Math.abs(this.s[d])<=s?l.set(d,d,0):l.set(d,d,1/this.s[d]);for(var v=this.U,k=this.rightSingularVectors,T=k.mmul(l),I=k.rows,j=v.rows,F=zr.zeros(I,j),G=0;G<I;G++)for(var V=0;V<j;V++){for(var q=0,$=0;$<u;$++)q+=T.get(G,$)*v.get(V,$);F.set(G,V,q)}return F.mmul(a)}},{key:"solveForDiagonal",value:function(i){return this.solve(zr.diag(i))}},{key:"inverse",value:function(){for(var i=this.V,a=this.threshold,s=i.rows,u=i.columns,l=new zr(s,this.s.length),d=0;d<s;d++)for(var v=0;v<u;v++)Math.abs(this.s[v])>a&&l.set(d,v,i.get(d,v)/this.s[v]);for(var k=this.U,T=k.rows,I=k.columns,j=new zr(s,T),F=0;F<s;F++)for(var G=0;G<T;G++){for(var V=0,q=0;q<I;q++)V+=l.get(F,q)*k.get(G,q);j.set(F,G,V)}return j}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var i=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,a=0,s=this.s,u=0,l=s.length;u<l;u++)s[u]>i&&a++;return a}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return zr.diag(this.s)}}])&&bl(t.prototype,e),r&&bl(t,r),n}();function wl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var bv=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.distances=i.distances,this.dimension=i.dimension||2,this.linkDistance=i.linkDistance}var t,e,r;return t=n,(e=[{key:"layout",value:function(){var i=this.dimension,a=this.distances,s=this.linkDistance;try{var u=zr.mul(zr.pow(a,2),-.5),l=u.mean("row"),d=u.mean("column"),v=u.mean();u.add(v).subRowVector(l).subColumnVector(d);var k=new xl(u),T=zr.sqrt(k.diagonalMatrix).diagonal();return k.leftSingularVectors.toJSON().map(function(V){return zr.mul([V],[T]).toJSON()[0].splice(0,i)})}catch(V){for(var I=[],j=0;j<a.length;j++){var F=Math.random()*s,G=Math.random()*s;I.push([F,G])}return I}}}])&&wl(t.prototype,e),r&&wl(t,r),n}();function _l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var xv=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.disp=[],this.positions=i.positions,this.adjMatrix=i.adjMatrix,this.focusID=i.focusID,this.radii=i.radii,this.iterations=i.iterations||10,this.height=i.height||10,this.width=i.width||10,this.speed=i.speed||100,this.gravity=i.gravity||10,this.nodeSizeFunc=i.nodeSizeFunc,this.k=i.k||5,this.strictRadial=i.strictRadial,this.nodes=i.nodes}var t,e,r;return t=n,(e=[{key:"layout",value:function(){var i=this.positions,a=[],s=this.iterations,u=this.width/10;this.maxDisplace=u,this.disp=a;for(var l=0;l<s;l++)i.forEach(function(d,v){a[v]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return i}},{key:"getRepulsion",value:function(){var i=this,a=i.positions,s=i.nodes,u=i.disp,l=i.k,d=i.radii||[];a.forEach(function(v,k){u[k]={x:0,y:0},a.forEach(function(T,I){if(k!==I&&d[k]===d[I]){var j=v[0]-T[0],F=v[1]-T[1],G=Math.sqrt(j*j+F*F);if(G===0){G=1;var V=k>I?1:-1;j=.01*V,F=.01*V}if(G<i.nodeSizeFunc(s[k])/2+i.nodeSizeFunc(s[I])/2){var q=l*l/G;u[k].x+=j/G*q,u[k].y+=F/G*q}}})})}},{key:"updatePositions",value:function(){var i=this.positions,a=this.disp,s=this.speed,u=this.strictRadial,l=this.focusID,d=this.maxDisplace||this.width/10;u&&a.forEach(function(k,T){var I=i[T][0]-i[l][0],j=i[T][1]-i[l][1],F=Math.sqrt(I*I+j*j),G=j/F,V=-I/F,q=Math.sqrt(k.x*k.x+k.y*k.y),$=Math.acos((G*k.x+V*k.y)/q);$>Math.PI/2&&($-=Math.PI/2,G*=-1,V*=-1);var ve=Math.cos($)*q;k.x=G*ve,k.y=V*ve});var v=this.radii;i.forEach(function(k,T){if(T!==l){var I=Math.sqrt(a[T].x*a[T].x+a[T].y*a[T].y);if(I>0&&T!==l){var j=Math.min(d*(s/800),I);if(k[0]+=a[T].x/I*j,k[1]+=a[T].y/I*j,u){var F=k[0]-i[l][0],G=k[1]-i[l][1],V=Math.sqrt(F*F+G*G);F=F/V*v[T],G=G/V*v[T],k[0]=i[l][0]+F,k[1]=i[l][1]+G}}}})}}])&&_l(t.prototype,e),r&&_l(t,r),n}();function Sl(n){return(Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function wv(n){return function(t){if(Array.isArray(t))return ju(t)}(n)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(n)||function(t,e){if(!!t){if(typeof t=="string")return ju(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ju(t,e)}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ju(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function El(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Ol(n,t){return(Ol=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function _v(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Pu(n);if(t){var i=Pu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Sv(this,e)}}function Sv(n,t){return!t||Sl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Pu(n){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function Ml(n,t){return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))}var Ev=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Ol(s,u)})(a,n);var t,e,r,i=_v(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.focusNode=null,u.unitRadius=null,u.linkDistance=50,u.preventOverlap=!1,u.strictRadial=!0,u.maxPreventOverlapIteration=200,u.sortStrength=10,u.nodes=[],u.edges=[],u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var s=this,u=s.nodes,l=s.edges||[];if(u&&u.length!==0){s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var d=s.center;if(u.length===1)return u[0].x=d[0],u[0].y=d[1],void(s.onLayoutEnd&&s.onLayoutEnd());var v=s.linkDistance,k=null;if(Fa(s.focusNode)){for(var T=!1,I=0;I<u.length;I++)u[I].id===s.focusNode&&(k=u[I],s.focusNode=k,T=!0,I=u.length);T||(k=null)}else k=s.focusNode;k||(k=u[0],s.focusNode=k);var j,F,G,V=(j=u,F=k.id,G=-1,j.forEach(function(Gt,lr){Gt.id===F&&(G=lr)}),G);s.focusIndex=V;var q=Sc({nodes:u,edges:l},!1),$=_c(q),ve=s.maxToFocus($,V);s.handleInfinity($,V,ve+1),s.distances=$;var de=$[V],me=s.width||500,Ie=s.height||500,Ee=me-d[0]>d[0]?d[0]:me-d[0],Pe=Ie-d[1]>d[1]?d[1]:Ie-d[1];Ee===0&&(Ee=me/2),Pe===0&&(Pe=Ie/2);var Ze=Pe>Ee?Ee:Pe,it=Math.max.apply(Math,wv(de)),ct=[];de.forEach(function(Gt,lr){s.unitRadius||(s.unitRadius=Ze/it),ct[lr]=Gt*s.unitRadius}),s.radii=ct;var st=s.eIdealDisMatrix();s.eIdealDistances=st;var jt=function(Gt){for(var lr=Gt.length,Br=Gt[0].length,wn=[],Sr=0;Sr<lr;Sr++){for(var jr=[],_r=0;_r<Br;_r++)Gt[Sr][_r]!==0?jr.push(1/(Gt[Sr][_r]*Gt[Sr][_r])):jr.push(0);wn.push(jr)}return wn}(st);s.weights=jt;var gt=new bv({linkDistance:v,distances:st}).layout();gt.forEach(function(Gt){hu(Gt[0])&&(Gt[0]=Math.random()*v),hu(Gt[1])&&(Gt[1]=Math.random()*v)}),s.positions=gt,gt.forEach(function(Gt,lr){u[lr].x=Gt[0]+d[0],u[lr].y=Gt[1]+d[1]}),gt.forEach(function(Gt){Gt[0]-=gt[V][0],Gt[1]-=gt[V][1]}),s.run();var Pt,Rt=s.preventOverlap,Zt=s.nodeSize,Ct=s.strictRadial;if(Rt){var Vt,Dt=s.nodeSpacing;Vt=cr(Dt)?function(){return Dt}:Yo(Dt)?Dt:function(){return 0},Pt=Zt?ji(Zt)?function(Gt){return(Zt[0]>Zt[1]?Zt[0]:Zt[1])+Vt(Gt)}:function(Gt){return Zt+Vt(Gt)}:function(Gt){return Gt.size?ji(Gt.size)?(Gt.size[0]>Gt.size[1]?Gt.size[0]:Gt.size[1])+Vt(Gt):Co(Gt.size)?(Gt.size.width>Gt.size.height?Gt.size.width:Gt.size.height)+Vt(Gt):Gt.size+Vt(Gt):10+Vt(Gt)};var qt={nodes:u,nodeSizeFunc:Pt,adjMatrix:q,positions:gt,radii:ct,height:Ie,width:me,strictRadial:Ct,focusID:V,iterations:s.maxPreventOverlapIteration||200,k:gt.length/4.5},$t=new xv(qt);gt=$t.layout()}return gt.forEach(function(Gt,lr){u[lr].x=Gt[0]+d[0],u[lr].y=Gt[1]+d[1]}),s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:l}}s.onLayoutEnd&&s.onLayoutEnd()}},{key:"run",value:function(){for(var s=this.maxIteration,u=this.positions||[],l=this.weights||[],d=this.eIdealDistances||[],v=this.radii||[],k=0;k<=s;k++){var T=k/s;this.oneIteration(T,u,v,d,l)}}},{key:"oneIteration",value:function(s,u,l,d,v){var k=1-s,T=this.focusIndex;u.forEach(function(I,j){var F=Ml(I,[0,0]),G=F===0?0:1/F;if(j!==T){var V=0,q=0,$=0;u.forEach(function(de,me){if(j!==me){var Ie=Ml(I,de),Ee=Ie===0?0:1/Ie,Pe=d[me][j];$+=v[j][me],V+=v[j][me]*(de[0]+Pe*(I[0]-de[0])*Ee),q+=v[j][me]*(de[1]+Pe*(I[1]-de[1])*Ee)}});var ve=l[j]===0?0:1/l[j];$*=k,$+=s*ve*ve,V*=k,V+=s*ve*I[0]*G,I[0]=V/$,q*=k,q+=s*ve*I[1]*G,I[1]=q/$}})}},{key:"eIdealDisMatrix",value:function(){var s=this,u=s.nodes;if(!u)return[];var l=s.distances,d=s.linkDistance,v=s.radii||[],k=s.unitRadius||50,T=[];return l&&l.forEach(function(I,j){var F=[];I.forEach(function(G,V){if(j===V)F.push(0);else if(v[j]===v[V])if(s.sortBy==="data")F.push(G*(Math.abs(j-V)*s.sortStrength)/(v[j]/k));else if(s.sortBy){var q=u[j][s.sortBy]||0,$=u[V][s.sortBy]||0;Fa(q)&&(q=q.charCodeAt(0)),Fa($)&&($=$.charCodeAt(0)),F.push(G*(Math.abs(q-$)*s.sortStrength)/(v[j]/k))}else F.push(G*d/(v[j]/k));else{var ve=(d+k)/2;F.push(G*ve)}}),T.push(F)}),T}},{key:"handleInfinity",value:function(s,u,l){for(var d=s.length,v=0;v<d;v++)if(s[u][v]===1/0){s[u][v]=l,s[v][u]=l;for(var k=0;k<d;k++)s[v][k]!==1/0&&s[u][k]===1/0&&(s[u][k]=l+s[v][k],s[k][u]=l+s[v][k])}for(var T=0;T<d;T++)if(T!==u){for(var I=0;I<d;I++)if(s[T][I]===1/0){var j=Math.abs(s[u][T]-s[u][I]);j=j===0?1:j,s[T][I]=j}}}},{key:"maxToFocus",value:function(s,u){for(var l=0,d=0;d<s[u].length;d++)s[u][d]!==1/0&&(l=s[u][d]>l?s[u][d]:l);return l}},{key:"getType",value:function(){return"radial"}}])&&El(t.prototype,e),r&&El(t,r),a}(Xi);function kl(n){return(kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Al(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Cl(n,t){return(Cl=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Ov(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Nu(n);if(t){var i=Nu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Mv(this,e)}}function Mv(n,t){return!t||kl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Nu(n){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var kv=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Cl(s,u)})(a,n);var t,e,r,i=Ov(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).nodeSize=30,u.minNodeSpacing=10,u.preventOverlap=!1,u.equidistant=!1,u.startAngle=1.5*Math.PI,u.clockwise=!0,u.sortBy="degree",u.nodes=[],u.edges=[],u.width=300,u.height=300,u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var s=this,u=s.nodes,l=s.edges,d=u.length;if(d!==0){s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var v=s.center;if(d===1)return u[0].x=v[0],u[0].y=v[1],void(s.onLayoutEnd&&s.onLayoutEnd());var k,T=[];k=ji(s.nodeSize)?Math.max(s.nodeSize[0],s.nodeSize[1]):s.nodeSize,u.forEach(function(Ze){T.push(Ze);var it=k;ji(Ze.size)?it=Math.max(Ze.size[0],Ze.size[1]):cr(Ze.size)?it=Ze.size:Co(Ze.size)&&(it=Math.max(Ze.size.width,Ze.size.height)),k=Math.max(k,it)}),s.clockwise=s.counterclockwise!==void 0?!s.counterclockwise:s.clockwise;var I={},j={};if(T.forEach(function(Ze,it){I[Ze.id]=Ze,j[Ze.id]=it}),!(s.sortBy!=="degree"&&Fa(s.sortBy)&&T[0][s.sortBy]!==void 0||(s.sortBy="degree",cr(u[0].degree)))){var F=za(u.length,j,l);T.forEach(function(Ze,it){Ze.degree=F[it]})}T.sort(function(Ze,it){return it[s.sortBy]-Ze[s.sortBy]}),s.maxValueNode=T[0],s.maxLevelDiff=s.maxLevelDiff||s.maxValueNode[s.sortBy]/4;var G=[[]],V=G[0];T.forEach(function(Ze){if(V.length>0){var it=Math.abs(V[0][s.sortBy]-Ze[s.sortBy]);s.maxLevelDiff&&it>=s.maxLevelDiff&&(V=[],G.push(V))}V.push(Ze)});var q=k+s.minNodeSpacing;if(!s.preventOverlap){var $=G.length>0&&G[0].length>1,ve=(Math.min(s.width,s.height)/2-q)/(G.length+($?1:0));q=Math.min(q,ve)}var de=0;if(G.forEach(function(Ze){var it=s.sweep;it===void 0&&(it=2*Math.PI-2*Math.PI/Ze.length);var ct=Ze.dTheta=it/Math.max(1,Ze.length-1);if(Ze.length>1&&s.preventOverlap){var st=Math.cos(ct)-Math.cos(0),jt=Math.sin(ct)-Math.sin(0),gt=Math.sqrt(q*q/(st*st+jt*jt));de=Math.max(gt,de)}Ze.r=de,de+=q}),s.equidistant){for(var me=0,Ie=0,Ee=0;Ee<G.length;Ee++){var Pe=G[Ee].r-Ie;me=Math.max(me,Pe)}Ie=0,G.forEach(function(Ze,it){it===0&&(Ie=Ze.r),Ze.r=Ie,Ie+=me})}return G.forEach(function(Ze){var it=Ze.dTheta,ct=Ze.r;Ze.forEach(function(st,jt){var gt=s.startAngle+(s.clockwise?1:-1)*it*jt;st.x=v[0]+ct*Math.cos(gt),st.y=v[1]+ct*Math.sin(gt)})}),s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:l}}s.onLayoutEnd&&s.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&Al(t.prototype,e),r&&Al(t,r),a}(Xi);function Tl(n){return(Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Il(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function jl(n,t){return(jl=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Av(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Du(n);if(t){var i=Du(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Cv(this,e)}}function Cv(n,t){return!t||Tl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Du(n){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Tv=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&jl(s,u)})(a,n);var t,e,r,i=Av(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.linkDistance=50,u.nodes=[],u.edges=[],u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var s=this.nodes,u=this.edges,l=u===void 0?[]:u,d=this.center;if(s&&s.length!==0){if(s.length===1)return s[0].x=d[0],s[0].y=d[1],void(this.onLayoutEnd&&this.onLayoutEnd());var v=this.linkDistance,k=Sc({nodes:s,edges:l},!1),T=_c(k);this.handleInfinity(T);var I,j,F=(I=v,j=[],T.forEach(function(V){var q=[];V.forEach(function($){q.push($*I)}),j.push(q)}),j);this.scaledDistances=F;var G=this.runMDS();return this.positions=G,G.forEach(function(V,q){s[q].x=V[0]+d[0],s[q].y=V[1]+d[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:s,edges:l}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var s=this.scaledDistances,u=zr.mul(zr.pow(s,2),-.5),l=u.mean("row"),d=u.mean("column"),v=u.mean();u.add(v).subRowVector(l).subColumnVector(d);var k=new xl(u),T=zr.sqrt(k.diagonalMatrix).diagonal();return k.leftSingularVectors.toJSON().map(function(I){return zr.mul([I],[T]).toJSON()[0].splice(0,2)})}},{key:"handleInfinity",value:function(s){var u=-999999;s.forEach(function(l){l.forEach(function(d){d!==1/0&&u<d&&(u=d)})}),s.forEach(function(l,d){l.forEach(function(v,k){v===1/0&&(s[d][k]=u)})})}},{key:"getType",value:function(){return"mds"}}])&&Il(t.prototype,e),r&&Il(t,r),a}(Xi);function Pl(n){return(Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Nl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Dl(n,t){return(Dl=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Iv(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Ru(n);if(t){var i=Ru(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return jv(this,e)}}function jv(n,t){return!t||Pl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Ru(n){return(Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Pv=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Dl(s,u)})(a,n);var t,e,r,i=Iv(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.gravity=10,u.speed=5,u.clustering=!1,u.clusterGravity=10,u.nodes=[],u.edges=[],u.width=300,u.height=300,u.nodeMap={},u.nodeIdxMap={},u.onLayoutEnd=function(){},u.tick=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var s=this,u=this.nodes;if(this.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(this.timeInterval),u&&u.length!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var l=this.center;if(u.length===1)return u[0].x=l[0],u[0].y=l[1],void(this.onLayoutEnd&&this.onLayoutEnd());var d={},v={};return u.forEach(function(k,T){cr(k.x)||(k.x=Math.random()*s.width),cr(k.y)||(k.y=Math.random()*s.height),d[k.id]=k,v[k.id]=T}),this.nodeMap=d,this.nodeIdxMap=v,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var s=this,u=s.nodes;if(u){var l=s.edges,d=s.maxIteration,v=s.center,k=s.height*s.width,T=Math.sqrt(k)/10,I=k/(u.length+1),j=Math.sqrt(I),F=s.gravity,G=s.speed,V=s.clustering,q={};if(V)for(var $ in u.forEach(function(de){if(q[de.cluster]===void 0){var me={name:de.cluster,cx:0,cy:0,count:0};q[de.cluster]=me}var Ie=q[de.cluster];cr(de.x)&&(Ie.cx+=de.x),cr(de.y)&&(Ie.cy+=de.y),Ie.count++}),q)q[$].cx/=q[$].count,q[$].cy/=q[$].count;if(typeof window!="undefined"){var ve=0;return this.timeInterval=window.setInterval(function(){if(u){var de=[];if(u.forEach(function(Pe,Ze){de[Ze]={x:0,y:0}}),s.applyCalculate(u,l,de,j,I),V){var me=s.clusterGravity||F;for(var Ie in u.forEach(function(Pe,Ze){if(cr(Pe.x)&&cr(Pe.y)){var it=q[Pe.cluster],ct=Math.sqrt((Pe.x-it.cx)*(Pe.x-it.cx)+(Pe.y-it.cy)*(Pe.y-it.cy)),st=j*me;de[Ze].x-=st*(Pe.x-it.cx)/ct,de[Ze].y-=st*(Pe.y-it.cy)/ct}}),q)q[Ie].cx=0,q[Ie].cy=0,q[Ie].count=0;for(var Ee in u.forEach(function(Pe){var Ze=q[Pe.cluster];cr(Pe.x)&&(Ze.cx+=Pe.x),cr(Pe.y)&&(Ze.cy+=Pe.y),Ze.count++}),q)q[Ee].cx/=q[Ee].count,q[Ee].cy/=q[Ee].count}u.forEach(function(Pe,Ze){if(cr(Pe.x)&&cr(Pe.y)){var it=.01*j*F;de[Ze].x-=it*(Pe.x-v[0]),de[Ze].y-=it*(Pe.y-v[1])}}),u.forEach(function(Pe,Ze){if(cr(Pe.fx)&&cr(Pe.fy))return Pe.x=Pe.fx,void(Pe.y=Pe.fy);if(cr(Pe.x)&&cr(Pe.y)){var it=Math.sqrt(de[Ze].x*de[Ze].x+de[Ze].y*de[Ze].y);if(it>0){var ct=Math.min(T*(G/800),it);Pe.x+=de[Ze].x/it*ct,Pe.y+=de[Ze].y/it*ct}}}),s.tick&&s.tick(),++ve>=d&&(s.onLayoutEnd&&s.onLayoutEnd(),window.clearInterval(s.timeInterval))}},0),{nodes:u,edges:l}}}}},{key:"applyCalculate",value:function(s,u,l,d,v){this.calRepulsive(s,l,v),u&&this.calAttractive(u,l,d)}},{key:"calRepulsive",value:function(s,u,l){s.forEach(function(d,v){u[v]={x:0,y:0},s.forEach(function(k,T){if(v!==T&&cr(d.x)&&cr(k.x)&&cr(d.y)&&cr(k.y)){var I=d.x-k.x,j=d.y-k.y,F=I*I+j*j;if(F===0){F=1;var G=v>T?1:-1;I=.01*G,j=.01*G}var V=l/F;u[v].x+=I*V,u[v].y+=j*V}})})}},{key:"calAttractive",value:function(s,u,l){var d=this;s.forEach(function(v){var k=fn(v,"source"),T=fn(v,"target");if(k&&T){var I=d.nodeIdxMap[k],j=d.nodeIdxMap[T];if(I!==j){var F=d.nodeMap[k],G=d.nodeMap[T];if(cr(G.x)&&cr(F.x)&&cr(G.y)&&cr(F.y)){var V=G.x-F.x,q=G.y-F.y,$=Math.sqrt(V*V+q*q),ve=$*$/l;u[j].x-=V/$*ve,u[j].y-=q/$*ve,u[I].x+=V/$*ve,u[I].y+=q/$*ve}}}})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"fruchterman"}}])&&Nl(t.prototype,e),r&&Nl(t,r),a}(Xi),Nv=o(10),Pn=o.n(Nv),Dv=o(6),hn=o.n(Dv),Rv=o(7),dn=o.n(Rv),Lv=o(11),Nn=o.n(Lv),rt=(o(29),o(3)),Ar=o(5);function Lu(n){return typeof n=="number"}function Bo(n){return n===void 0?0:n>360||n<-360?n%360:n}function sa(n,t,e){return Lu(n)?Nt.e.fromValues(n,t,e):n.length===3?Nt.e.clone(n):Nt.e.fromValues(n[0],n[1],n[2])}var Rl,Ll,Bl,Bu,Gl,Fl,zl,kn,Cs,ua,Ul=function(){function n(t,e){hn()(this,n),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=t,this.matrix=Nt.b.clone(e.matrix),this.right=Nt.e.clone(e.right),this.up=Nt.e.clone(e.up),this.forward=Nt.e.clone(e.forward),this.position=Nt.e.clone(e.position),this.focalPoint=Nt.e.clone(e.focalPoint),this.distanceVector=Nt.e.clone(e.distanceVector),this.azimuth=e.azimuth,this.elevation=e.elevation,this.roll=e.roll,this.relAzimuth=e.relAzimuth,this.relElevation=e.relElevation,this.relRoll=e.relRoll,this.dollyingStep=e.dollyingStep,this.distance=e.distance}return dn()(n,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=Nt.b.copy(t.matrix,this.matrix),t.right=Nt.e.copy(t.right,this.right),t.up=Nt.e.copy(t.up,this.up),t.forward=Nt.e.copy(t.forward,this.forward),t.position=Nt.e.copy(t.position,this.position),t.focalPoint=Nt.e.copy(t.focalPoint,this.focalPoint),t.distanceVector=Nt.e.copy(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),n}();(function(n){n.ORBITING="ORBITING",n.EXPLORING="EXPLORING",n.TRACKING="TRACKING"})(kn||(kn={})),function(n){n.DEFAULT="DEFAULT",n.ROTATIONAL="ROTATIONAL",n.TRANSLATIONAL="TRANSLATIONAL",n.CINEMATIC="CINEMATIC"}(Cs||(Cs={})),function(n){n.ORTHOGRAPHIC="ORTHOGRAPHIC",n.PERSPECTIVE="PERSPECTIVE"}(ua||(ua={}));var Vl,Wl,Xl,Gu,Yl,Ha,Hl,Go=Math.PI/180,wa=180/Math.PI,ql=(Rl=Object(Ar.injectable)(),Ll=Object(Ar.inject)(rt.IDENTIFIER.InteractorService),Rl((zl=Fl=function(){function n(){hn()(this,n),this.matrix=Nt.b.create(),this.right=Nt.e.fromValues(1,0,0),this.up=Nt.e.fromValues(0,1,0),this.forward=Nt.e.fromValues(0,0,1),this.position=Nt.e.fromValues(0,0,1),this.focalPoint=Nt.e.fromValues(0,0,0),this.distanceVector=Nt.e.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,Pn()(this,"interactor",Gl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Nt.b.create(),this.view=void 0,this.following=void 0,this.type=kn.EXPLORING,this.trackingMode=Cs.DEFAULT,this.projectionMode=ua.PERSPECTIVE,this.frustum=new rt.Frustum,this.landmarks=[],this.landmarkAnimationID=void 0}return dn()(n,[{key:"clone",value:function(){var t=new n;return t.setType(this.type,void 0),t.interactor=this.interactor,t}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===kn.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===kn.TRACKING&&e!==void 0&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==kn.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return Nt.b.invert(Nt.b.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,r,i,a,s){return this.aspect=t/e,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.projectionMode===ua.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===ua.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,r,i){return this.projectionMode=ua.PERSPECTIVE,this.fov=r,this.near=t,this.far=e,this.aspect=i,Nt.b.perspective(this.perspective,this.fov*Go,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,r,i,a,s){this.projectionMode=ua.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=r,this.bottom=i,this.near=a,this.far=s;var u=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),d=(this.rright+this.left)/2,v=(this.top+this.bottom)/2,k=d-u,T=d+u,I=v+l,j=v-l;if(this.view!==void 0&&this.view.enabled){var F=(this.rright-this.left)/this.view.fullWidth/this.zoom,G=(this.top-this.bottom)/this.view.fullHeight/this.zoom;T=(k+=F*this.view.offsetX)+F*this.view.width,j=(I-=G*this.view.offsetY)-G*this.view.height}return Nt.b.ortho(this.perspective,k,T,I,j,a,s),this}},{key:"setPosition",value:function(t,e,r){return this._setPosition(t,e,r),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,r){var i=Nt.e.fromValues(0,1,0);if(this.focalPoint=sa(t,e,r),this.trackingMode===Cs.CINEMATIC){var a=Nt.e.subtract(Nt.e.create(),this.focalPoint,this.position);t=a[0],e=a[1],r=a[2];var s=Nt.e.length(a),u=Math.asin(e/s)*wa,l=90+Math.atan2(r,t)*wa,d=Nt.b.create();Nt.b.rotateY(d,d,l*Go),Nt.b.rotateX(d,d,u*Go),i=Nt.e.transformMat4(Nt.e.create(),[0,1,0],d)}return Nt.b.invert(this.matrix,Nt.b.lookAt(Nt.b.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=Nt.e.create();t=this.distance;var r=this.forward,i=this.focalPoint;return e[0]=t*r[0]+i[0],e[1]=t*r[1]+i[1],e[2]=t*r[2]+i[2],this._setPosition(e),this}}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=Bo(t),this.computeMatrix(),this._getAxes(),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getPosition():this.type===kn.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=Bo(t),this.computeMatrix(),this._getAxes(),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getPosition():this.type===kn.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=Bo(t),this.computeMatrix(),this._getAxes(),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getPosition():this.type===kn.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,r){if(this.type===kn.EXPLORING){t=Bo(t),e=Bo(e),r=Bo(r);var i=Nt.c.setAxisAngle(Nt.c.create(),[1,0,0],(this.rotateWorld?1:-1)*e*Go),a=Nt.c.setAxisAngle(Nt.c.create(),[0,1,0],(this.rotateWorld?1:-1)*t*Go),s=Nt.c.setAxisAngle(Nt.c.create(),[0,0,1],r*Go),u=Nt.c.multiply(Nt.c.create(),a,i);u=Nt.c.multiply(Nt.c.create(),u,s);var l=Nt.b.fromQuat(Nt.b.create(),u);Nt.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),Nt.b.multiply(this.matrix,this.matrix,l),Nt.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=Bo(e),this.relAzimuth=Bo(t),this.relRoll=Bo(r),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getPosition():this.type===kn.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var r=sa(t,e,0),i=Nt.e.clone(this.position);return Nt.e.add(i,i,Nt.e.scale(Nt.e.create(),this.right,r[0])),Nt.e.add(i,i,Nt.e.scale(Nt.e.create(),this.up,r[1])),this._setPosition(i),this}},{key:"dolly",value:function(t){var e=this.forward,r=Nt.e.clone(this.position),i=this.dollyingStep,a=this.distance+t*this.dollyingStep;return i=Math.max(Math.min(a,this.maxDistance),this.minDistance)-this.distance,r[0]+=i*e[0],r[1]+=i*e[1],r[2]+=i*e[2],this._setPosition(r),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getDistance():this.type===kn.TRACKING&&Nt.e.add(this.focalPoint,r,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var r=this.clone();r.setPosition(e.position),r.setFocalPoint(e.focalPoint),e.roll!==void 0&&r.setRoll(e.roll);var i=new Ul(t,r);return this.landmarks.push(i),i}},{key:"setLandmark",value:function(t){var e=new Ul(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,i=this.landmarks.find(function(v){return v.name===t});if(i){if(r===0)return void i.retrieve(this);this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var a,s=i.getPosition(),u=i.getFocalPoint(),l=i.getRoll(),d=function v(k){a===void 0&&(a=k);var T,I=k-a,j=(1-Math.cos(I/r*Math.PI))/2,F=Nt.e.create(),G=Nt.e.create();if(Nt.e.lerp(F,e.focalPoint,u,j),Nt.e.lerp(G,e.position,s,j),T=e.roll*(1-j)+l*j,e.setFocalPoint(F),e.setPosition(G),e.setRoll(T),e.computeMatrix(),!(Nt.e.dist(F,u)+Nt.e.dist(G,s)>.01))return e.setFocalPoint(F),e.setPosition(G),e.setRoll(T),e.computeMatrix(),void e.interactor.connect();I<r&&(e.landmarkAnimationID=window.requestAnimationFrame(v))};window.requestAnimationFrame(d)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,r=Nt.c.setAxisAngle(Nt.c.create(),[0,0,1],this.roll*Go);Nt.b.identity(this.matrix),t=Nt.c.setAxisAngle(Nt.c.create(),[1,0,0],(this.rotateWorld&&this.type!==kn.TRACKING||this.type===kn.TRACKING?1:-1)*this.elevation*Go),e=Nt.c.setAxisAngle(Nt.c.create(),[0,1,0],(this.rotateWorld&&this.type!==kn.TRACKING||this.type===kn.TRACKING?1:-1)*this.azimuth*Go);var i=Nt.c.multiply(Nt.c.create(),e,t);i=Nt.c.multiply(Nt.c.create(),i,r);var a=Nt.b.fromQuat(Nt.b.create(),i);this.type===kn.ORBITING||this.type===kn.EXPLORING?(Nt.b.translate(this.matrix,this.matrix,this.focalPoint),Nt.b.multiply(this.matrix,this.matrix,a),Nt.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===kn.TRACKING&&(Nt.b.translate(this.matrix,this.matrix,this.position),Nt.b.multiply(this.matrix,this.matrix,a))}},{key:"_setPosition",value:function(t,e,r){this.position=sa(t,e,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1}},{key:"_getAxes",value:function(){Nt.e.copy(this.right,sa(Nt.f.transformMat4(Nt.f.create(),[1,0,0,0],this.matrix))),Nt.e.copy(this.up,sa(Nt.f.transformMat4(Nt.f.create(),[0,1,0,0],this.matrix))),Nt.e.copy(this.forward,sa(Nt.f.transformMat4(Nt.f.create(),[0,0,1,0],this.matrix))),Nt.e.normalize(this.right,this.right),Nt.e.normalize(this.up,this.up),Nt.e.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],r=this.distanceVector[2],i=Nt.e.length(this.distanceVector);if(i===0)return this.elevation=0,void(this.azimuth=0);this.type===kn.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/i)*wa,this.azimuth=Math.atan2(-t,-r)*wa):(this.elevation=-Math.asin(e/i)*wa,this.azimuth=-Math.atan2(-t,-r)*wa)}},{key:"_getPosition",value:function(){Nt.e.copy(this.position,sa(Nt.f.transformMat4(Nt.f.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Nt.e.transformMat3(this.distanceVector,[0,0,-this.distance],Nt.a.fromMat4(Nt.a.create(),this.matrix)),Nt.e.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Nt.e.subtract(Nt.e.create(),this.focalPoint,this.position),this.distance=Nt.e.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),n}(),Fl.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},Bu=zl,Gl=Nn()(Bu.prototype,"interactor",[Ll],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bl=Bu))||Bl),qo=(Vl=Object(Ar.injectable)(),Wl=Object(Ar.inject)(rt.IDENTIFIER.GeometryComponentManager),Vl((Hl=Ha=function(){function n(){hn()(this,n),this.config=void 0,Pn()(this,"geometry",Yl,this),this.entity=void 0,this.component=void 0}return dn()(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.component=this.geometry.create(t),this.component.entity=t,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),Ha.BOX="box",Ha.SPHERE="sphere",Ha.PLANE="plane",Ha.MERGED="merged",Gu=Hl,Yl=Nn()(Gu.prototype,"geometry",[Wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xl=Gu))||Xl),Bv=o(9),Hr=o.n(Bv),Gv=o(14),ti=o.n(Gv),Fv=o(4),Yt=o.n(Fv),Jt=o(8);function Kl(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var zv={}.toString,Uv=function(n,t){return zv.call(n)==="[object "+t+"]"},Vv=o(41),qa=o.n(Vv),Fn={};Fn["[object Float32Array]"]=Fn["[object Float64Array]"]=Fn["[object Int8Array]"]=Fn["[object Int16Array]"]=Fn["[object Int32Array]"]=Fn["[object Uint8Array]"]=Fn["[object Uint8ClampedArray]"]=Fn["[object Uint16Array]"]=Fn["[object Uint32Array]"]=!0,Fn["[object Arguments]"]=Fn["[object Array]"]=Fn["[object ArrayBuffer]"]=Fn["[object Boolean]"]=Fn["[object DataView]"]=Fn["[object Date]"]=Fn["[object Error]"]=Fn["[object Function]"]=Fn["[object Map]"]=Fn["[object Number]"]=Fn["[object Object]"]=Fn["[object RegExp]"]=Fn["[object Set]"]=Fn["[object String]"]=Fn["[object WeakMap]"]=!1;var Wv=Object.prototype.toString,Zl,$l,Ql,Jl,Ts,ef,tf,rf=function(n){return function(t){return!!t&&qa()(t)==="object"}(n)&&function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991}(n.length)&&!!Fn[Wv.call(n)]};function nf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function of(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?nf(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):nf(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var af,sf,uf,Fu,cf,lf,ff,hf,df,pf,gf,vf,yf,mf,_a,bf,xf,wf,_f,Is,Sf,Fo,Ka,zo,ho,Za,Ko,$a,js,To,ca,Pi,Io,jo,Ps,Ef=(Zl=Object(Ar.injectable)(),$l=Object(Ar.inject)(rt.IDENTIFIER.RenderEngine),Ql=Object(Ar.inject)(rt.IDENTIFIER.ConfigService),Zl((Ts=function(){function n(){hn()(this,n),Pn()(this,"engine",ef,this),Pn()(this,"configService",tf,this),this.entity=Object(rt.createEntity)(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var t,e,r;return dn()(n,[{key:"init",value:function(){var i=this.configService.get(),a=i.canvas,s=i.engineOptions;this.initPromise=this.engine.init(of({canvas:a||Kl(),swapChainFormat:Jt.TextureFormat.BGRA8Unorm,antialiasing:!1},s))}},{key:"setBundle",value:function(i){this.compiledBundle=JSON.parse(JSON.stringify(i))}},{key:"setDispatch",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=i),this}},{key:"setMaxIteration",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=i),this}},{key:"setBinding",value:function(i,a){var s,u=this;if(typeof i=="string"){var l=Lu(a)||rf(a)||(s=a,Array.isArray?Array.isArray(s):Uv(s,"Array"));if(this.compiledBundle&&this.compiledBundle.context){var d=this.compiledBundle.context.defines.find(function(k){return k.name===i});if(d)return d.value=a,this;var v=this.compiledBundle.context.uniforms.find(function(k){return k.name===i});v&&(l?(v.data=a,v.isReferer=!1,v.storageClass===rt.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(i,a):this.model&&this.model.updateBuffer(i,a)):(v.isReferer=!0,v.data=a))}}else Object.keys(i).forEach(function(k){u.setBinding(k,i[k])});return this}},{key:"execute",value:(r=ti()(Hr.a.mark(function i(){var a,s,u=this,l=arguments;return Hr.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=l.length>0&&l[0]!==void 0?l[0]:1,!this.dirty){d.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),d.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(v){return v.isReferer}).forEach(function(v){var k=v.data,T=v.name;u.model.confirmInput(k.model,T)}),s=0;s<a;s++)this.model.run();return this.engine.endFrame(),d.abrupt("return",this);case 12:case"end":return d.stop()}},i,this)})),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(e=ti()(Hr.a.mark(function i(){return Hr.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},i,this)})),function(){return e.apply(this,arguments)})},{key:"compile",value:(t=ti()(Hr.a.mark(function i(){var a,s,u;return Hr.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return a=of({},this.compiledBundle.context),s=this.engine.supportWebGPU?this.engine.useWGSL?rt.Target.WGSL:rt.Target.GLSL450:rt.Target.GLSL100,u=this.compiledBundle.shaders[s],a.defines.filter(function(d){return d.runtime}).forEach(function(d){var v="".concat(rt.DefineValuePlaceholder).concat(d.name);u=u.replace(v,"".concat(d.value))}),a.shader=u,a.uniforms.forEach(function(d){if(!d.data&&d.storageClass===rt.STORAGE_CLASS.StorageBuffer){var v=1;d.type===rt.AST_TOKEN_TYPES.FloatArray?v=1:d.type===rt.AST_TOKEN_TYPES.Vector4FloatArray&&(v=4),d.data=new Float32Array(a.output.length*v).fill(0)}}),this.compiledBundle.context=a,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},i,this)})),function(){return t.apply(this,arguments)})}]),n}(),ef=Nn()(Ts.prototype,"engine",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf=Nn()(Ts.prototype,"configService",[Ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jl=Ts))||Jl),Of=(af=Object(Ar.injectable)(),sf=Object(Ar.inject)(rt.IDENTIFIER.MaterialComponentManager),af((ff=lf=function(){function n(){hn()(this,n),this.config=void 0,Pn()(this,"material",cf,this),this.entity=void 0,this.component=void 0}return dn()(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t,e){this.entity=t,this.component=this.material.create(t),this.component.entity=t,this.component.type=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),lf.BASIC="basic",Fu=ff,cf=Nn()(Fu.prototype,"material",[sf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uf=Fu))||uf),Zo=(hf=Object(Ar.injectable)(),df=Object(Ar.inject)(rt.IDENTIFIER.MeshComponentManager),pf=Object(Ar.inject)(rt.IDENTIFIER.CullableComponentManager),gf=Object(Ar.inject)(rt.IDENTIFIER.TransformComponentManager),vf=Object(Ar.inject)(rt.IDENTIFIER.Systems),yf=Object(Ar.named)(rt.IDENTIFIER.SceneGraphSystem),hf((Sf=Is=function(){function n(){hn()(this,n),this.attributes={},this.config=void 0,Pn()(this,"mesh",bf,this),Pn()(this,"cullable",xf,this),Pn()(this,"transform",wf,this),Pn()(this,"sceneGraphSystem",_f,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return dn()(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach(function(r){t[r]!==void 0&&t[r]!==e.attributes[r]&&(e.onAttributeChanged({name:r,data:t[r]}),e.attributes[r]=t[r])})}},{key:"setVisible",value:function(t){var e=this;return this.meshComponent.visible=t,this.meshComponent.children.forEach(function(r){var i=e.mesh.getComponentByEntity(r);i&&(i.visible=t)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,r=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),r)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),n}(),Is.POINT="point",Is.LINE="line",Is.GRID="grid",_a=Sf,bf=Nn()(_a.prototype,"mesh",[df],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xf=Nn()(_a.prototype,"cullable",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wf=Nn()(_a.prototype,"transform",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_f=Nn()(_a.prototype,"sceneGraphSystem",[vf,yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mf=_a))||mf),Xv=o(272),Yv=o.n(Xv),Hv=function(){function n(t,e){hn()(this,n),this.attribute=void 0,this.buffer=void 0;var r=e.buffer,i=e.offset,a=e.stride,s=e.normalized,u=e.size,l=e.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:a||0,normalized:s||!1,divisor:l||0},u&&(this.attribute.size=u)}return dn()(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),qv=(Fo={},Yt()(Fo,rt.gl.POINTS,"points"),Yt()(Fo,rt.gl.LINES,"lines"),Yt()(Fo,rt.gl.LINE_LOOP,"line loop"),Yt()(Fo,rt.gl.LINE_STRIP,"line strip"),Yt()(Fo,rt.gl.TRIANGLES,"triangles"),Yt()(Fo,rt.gl.TRIANGLE_FAN,"triangle fan"),Yt()(Fo,rt.gl.TRIANGLE_STRIP,"triangle strip"),Fo),Mf=(Ka={},Yt()(Ka,rt.gl.STATIC_DRAW,"static"),Yt()(Ka,rt.gl.DYNAMIC_DRAW,"dynamic"),Yt()(Ka,rt.gl.STREAM_DRAW,"stream"),Ka),zu=(zo={},Yt()(zo,rt.gl.BYTE,"int8"),Yt()(zo,rt.gl.UNSIGNED_INT,"int16"),Yt()(zo,rt.gl.INT,"int32"),Yt()(zo,rt.gl.UNSIGNED_BYTE,"uint8"),Yt()(zo,rt.gl.UNSIGNED_SHORT,"uint16"),Yt()(zo,rt.gl.UNSIGNED_INT,"uint32"),Yt()(zo,rt.gl.FLOAT,"float"),zo),Kv=(ho={},Yt()(ho,rt.gl.ALPHA,"alpha"),Yt()(ho,rt.gl.LUMINANCE,"luminance"),Yt()(ho,rt.gl.LUMINANCE_ALPHA,"luminance alpha"),Yt()(ho,rt.gl.RGB,"rgb"),Yt()(ho,rt.gl.RGBA,"rgba"),Yt()(ho,rt.gl.RGBA4,"rgba4"),Yt()(ho,rt.gl.RGB5_A1,"rgb5 a1"),Yt()(ho,rt.gl.RGB565,"rgb565"),Yt()(ho,rt.gl.DEPTH_COMPONENT,"depth"),Yt()(ho,rt.gl.DEPTH_STENCIL,"depth stencil"),ho),Zv=(Za={},Yt()(Za,rt.gl.DONT_CARE,"dont care"),Yt()(Za,rt.gl.NICEST,"nice"),Yt()(Za,rt.gl.FASTEST,"fast"),Za),kf=(Ko={},Yt()(Ko,rt.gl.NEAREST,"nearest"),Yt()(Ko,rt.gl.LINEAR,"linear"),Yt()(Ko,rt.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),Yt()(Ko,rt.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Yt()(Ko,rt.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Yt()(Ko,rt.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ko),Af=($a={},Yt()($a,rt.gl.REPEAT,"repeat"),Yt()($a,rt.gl.CLAMP_TO_EDGE,"clamp"),Yt()($a,rt.gl.MIRRORED_REPEAT,"mirror"),$a),$v=(js={},Yt()(js,rt.gl.NONE,"none"),Yt()(js,rt.gl.BROWSER_DEFAULT_WEBGL,"browser"),js),Qv=(To={},Yt()(To,rt.gl.NEVER,"never"),Yt()(To,rt.gl.ALWAYS,"always"),Yt()(To,rt.gl.LESS,"less"),Yt()(To,rt.gl.LEQUAL,"lequal"),Yt()(To,rt.gl.GREATER,"greater"),Yt()(To,rt.gl.GEQUAL,"gequal"),Yt()(To,rt.gl.EQUAL,"equal"),Yt()(To,rt.gl.NOTEQUAL,"notequal"),To),Cf=(ca={},Yt()(ca,rt.gl.FUNC_ADD,"add"),Yt()(ca,rt.gl.MIN_EXT,"min"),Yt()(ca,rt.gl.MAX_EXT,"max"),Yt()(ca,rt.gl.FUNC_SUBTRACT,"subtract"),Yt()(ca,rt.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),ca),Ns=(Pi={},Yt()(Pi,rt.gl.ZERO,"zero"),Yt()(Pi,rt.gl.ONE,"one"),Yt()(Pi,rt.gl.SRC_COLOR,"src color"),Yt()(Pi,rt.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),Yt()(Pi,rt.gl.SRC_ALPHA,"src alpha"),Yt()(Pi,rt.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Yt()(Pi,rt.gl.DST_COLOR,"dst color"),Yt()(Pi,rt.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),Yt()(Pi,rt.gl.DST_ALPHA,"dst alpha"),Yt()(Pi,rt.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Yt()(Pi,rt.gl.CONSTANT_COLOR,"constant color"),Yt()(Pi,rt.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Yt()(Pi,rt.gl.CONSTANT_ALPHA,"constant alpha"),Yt()(Pi,rt.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Yt()(Pi,rt.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),Pi),Jv=(Io={},Yt()(Io,rt.gl.NEVER,"never"),Yt()(Io,rt.gl.ALWAYS,"always"),Yt()(Io,rt.gl.LESS,"less"),Yt()(Io,rt.gl.LEQUAL,"lequal"),Yt()(Io,rt.gl.GREATER,"greater"),Yt()(Io,rt.gl.GEQUAL,"gequal"),Yt()(Io,rt.gl.EQUAL,"equal"),Yt()(Io,rt.gl.NOTEQUAL,"notequal"),Io),Sa=(jo={},Yt()(jo,rt.gl.ZERO,"zero"),Yt()(jo,rt.gl.KEEP,"keep"),Yt()(jo,rt.gl.REPLACE,"replace"),Yt()(jo,rt.gl.INVERT,"invert"),Yt()(jo,rt.gl.INCR,"increment"),Yt()(jo,rt.gl.DECR,"decrement"),Yt()(jo,rt.gl.INCR_WRAP,"increment wrap"),Yt()(jo,rt.gl.DECR_WRAP,"decrement wrap"),jo),e0=(Ps={},Yt()(Ps,rt.gl.FRONT,"front"),Yt()(Ps,rt.gl.BACK,"back"),Ps),t0=function(){function n(t,e){hn()(this,n),this.buffer=void 0;var r=e.data,i=e.usage,a=e.type;this.buffer=t.buffer({data:r,usage:Mf[i||rt.gl.STATIC_DRAW],type:zu[a||rt.gl.UNSIGNED_BYTE]})}return dn()(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data,r=t.offset;this.buffer.subdata(e,r)}}]),n}(),r0=o(27),ui=o.n(r0),zn={};zn["[object Float32Array]"]=zn["[object Float64Array]"]=zn["[object Int8Array]"]=zn["[object Int16Array]"]=zn["[object Int32Array]"]=zn["[object Uint8Array]"]=zn["[object Uint8ClampedArray]"]=zn["[object Uint16Array]"]=zn["[object Uint32Array]"]=!0,zn["[object Arguments]"]=zn["[object Array]"]=zn["[object ArrayBuffer]"]=zn["[object Boolean]"]=zn["[object DataView]"]=zn["[object Date]"]=zn["[object Error]"]=zn["[object Function]"]=zn["[object Map]"]=zn["[object Number]"]=zn["[object Object]"]=zn["[object RegExp]"]=zn["[object Set]"]=zn["[object String]"]=zn["[object WeakMap]"]=!1;var n0=Object.prototype.toString,Uu=function(n){return function(t){return!!t&&qa()(t)==="object"}(n)&&function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991}(n.length)&&!!zn[n0.call(n)]};function Tf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function If(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Tf(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Tf(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var jf=0,i0=function(){function n(e,r){var i=this;hn()(this,n),this.reGl=e,this.context=r,this.entity=Object(rt.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var a={};this.context.uniforms.forEach(function(v){var k=v.name,T=v.type,I=v.data,j=v.isReferer,F=v.storageClass;if(F===rt.STORAGE_CLASS.StorageBuffer){if(j)i.textureCache[k]={data:void 0},a["".concat(k,"Size")]=function(){return I.compiledBundle.context.output.textureSize};else{i.textureCache[k]=i.calcDataTexture(k,T,I);var G=i.textureCache[k],V=G.textureWidth,q=G.isOutput;a["".concat(k,"Size")]=[V,V],q&&(i.outputTextureName=k,i.context.needPingpong&&(i.outputTextureName="".concat(k,"Output"),i.textureCache[i.outputTextureName]=i.calcDataTexture(k,T,I)))}a[k]=function(){return i.textureCache[k].texture}}else if(F===rt.STORAGE_CLASS.Uniform){if(I&&(Array.isArray(I)||Uu(I))&&I.length>16)throw new Error("invalid data type ".concat(T));a[k]=function(){return v.data}}});var s=this.getOuputDataTexture(),u=s.textureWidth,l=s.texelCount;a.u_OutputTextureSize=[u,u],a.u_OutputTexelCount=l,this.context.output.textureSize=[u,u];var d={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:a,vert:`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(d)}var t;return dn()(n,[{key:"run",value:function(){var e=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){e.computeCommand()})}},{key:"readData",value:(t=ti()(Hr.a.mark(function e(){var r,i,a,s,u,l,d,v,k=this;return Hr.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){r=k.reGl.read()}),!r){T.next=6;break}if(i=this.getOuputDataTexture(),a=i.originalDataLength,s=i.elementsPerTexel,u=i.typedArrayConstructor,l=u===void 0?Float32Array:u,d=[],s!==4)for(v=0;v<r.length;v+=4)s===1?d.push(r[v]):s===2?d.push(r[v],r[v+1]):d.push(r[v],r[v+1],r[v+2]);else d=r;return T.abrupt("return",new l(d.slice(0,a)));case 6:return T.abrupt("return",new Float32Array);case 7:case"end":return T.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"confirmInput",value:function(e,r){var i;this.entity===e.entity?(this.dynamicPingpong=!0,i=this):i=e,this.textureCache[r].id=i.getOuputDataTexture().id,this.textureCache[r].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,r){var i=this.context.uniforms.find(function(l){return l.name===e});if(i){var a=this.calcDataTexture(e,i.type,r),s=a.texture,u=a.data;this.textureCache[e].data=u,this.textureCache[e].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var e=this.context.output.name;this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture}var r=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=r}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var r=e.data,i=e.textureWidth;return If(If({},e),{},{id:jf++,texture:this.reGl.texture({width:i,height:i,data:r,type:"float"})})}},{key:"calcDataTexture",value:function(e,r,i){var a=1;r===rt.AST_TOKEN_TYPES.Vector4FloatArray&&(a=4);for(var s=[],u=0;u<i.length;u+=a)a===1?s.push(i[u],0,0,0):a===2?s.push(i[u],i[u+1],0,0):a===3?s.push(i[u],i[u+1],i[u+2],0):a===4&&s.push(i[u],i[u+1],i[u+2],i[u+3]);var l=i.length,d=Math.ceil(l/a),v=Math.ceil(Math.sqrt(d)),k=v*v;d<k&&s.push.apply(s,ui()(new Array(4*(k-d)).fill(0)));var T=this.reGl.texture({width:v,height:v,data:s,type:"float"});return{id:jf++,data:s,originalDataLength:l,typedArrayConstructor:Uu(i)?i.constructor:void 0,textureWidth:v,texture:T,texelCount:d,elementsPerTexel:a,isOutput:e===this.context.output.name}}}]),n}(),o0=function(){function n(t,e){hn()(this,n),this.elements=void 0;var r=e.data,i=e.usage,a=e.type,s=e.count;this.elements=t.elements({data:r,usage:Mf[i||rt.gl.STATIC_DRAW],type:zu[a||rt.gl.UNSIGNED_BYTE],count:s})}return dn()(n,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),n}(),a0=function(){function n(t,e){hn()(this,n),this.framebuffer=void 0;var r=e.width,i=e.height,a=e.color,s=e.colors,u=(e.depth,e.stencil,{width:r,height:i});Array.isArray(s)&&(u.colors=s.map(function(l){return l.get()})),a&&typeof a!="boolean"&&(u.color=a.get()),this.framebuffer=t.framebuffer(u)}return dn()(n,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,r=t.height;this.framebuffer.resize(e,r)}}]),n}();function Qa(n){var t={};return Object.keys(n).forEach(function(e){(function r(i,a,s,u){if(a===null||typeof a=="number"||typeof a=="boolean"||Array.isArray(a)&&typeof a[0]=="number"||Uu(a)||a===""||a.resize!==void 0)return void(s["".concat(u&&u+".").concat(i)]=a);l=a,d=qa()(l),l==null||d!=="object"&&d!=="function"||Object.keys(a).forEach(function(v){r(v,a[v],s,"".concat(u&&u+".").concat(i))});var l,d;Array.isArray(a)&&a.forEach(function(v,k){Object.keys(v).forEach(function(T){r(T,v[T],s,"".concat(u&&u+".").concat(i,"[").concat(k,"]"))})})})(e,n[e],t,"")}),t}function Pf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Ea(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Pf(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Pf(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var Nf,Ds,s0=function(){function n(t,e){hn()(this,n),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var r=e.vs,i=e.fs,a=e.defines,s=e.attributes,u=e.uniforms,l=e.primitive,d=e.count,v=e.elements,k=e.depth,T=e.blend,I=e.stencil,j=e.cull,F=e.instances,G=e.scissor,V=e.viewport,q={};u&&(this.uniforms=Qa(u),Object.keys(u).forEach(function(me){q[me]=t.prop(me)}));var $={};Object.keys(s).forEach(function(me){$[me]=s[me].get()});var ve=a&&this.generateDefines(a)||"",de={attributes:$,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(ve,`
`).concat(i),uniforms:q,vert:`
`.concat(ve,`
`).concat(r),primitive:qv[l===void 0?rt.gl.TRIANGLES:l]};F&&(de.instances=F),d&&(de.count=d),v&&(de.elements=v.get()),G&&(de.scissor=G),V&&(de.viewport=V),this.initDepthDrawParams({depth:k},de),this.initBlendDrawParams({blend:T},de),this.initStencilDrawParams({stencil:I},de),this.initCullDrawParams({cull:j},de),this.drawCommand=t(de)}return dn()(n,[{key:"addUniforms",value:function(t){this.uniforms=Ea(Ea({},this.uniforms),Qa(t))}},{key:"draw",value:function(t){var e=Ea(Ea({},this.uniforms),Qa(t.uniforms||{})),r={};Object.keys(e).forEach(function(i){var a=qa()(e[i]);a==="boolean"||a==="number"||Array.isArray(e[i])||e[i].BYTES_PER_ELEMENT?r[i]=e[i]:a==="string"||(r[i]=e[i].get())}),this.drawCommand(r)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var r=t.depth;r&&(e.depth={enable:r.enable===void 0||!!r.enable,mask:r.mask===void 0||!!r.mask,func:Qv[r.func||rt.gl.LESS],range:r.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var r=t.blend;if(r){var i=r.enable,a=r.func,s=r.equation,u=r.color,l=u===void 0?[0,0,0,0]:u;e.blend={enable:!!i,func:{srcRGB:Ns[a&&a.srcRGB||rt.gl.SRC_ALPHA],srcAlpha:Ns[a&&a.srcAlpha||rt.gl.SRC_ALPHA],dstRGB:Ns[a&&a.dstRGB||rt.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:Ns[a&&a.dstAlpha||rt.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Cf[s&&s.rgb||rt.gl.FUNC_ADD],alpha:Cf[s&&s.alpha||rt.gl.FUNC_ADD]},color:l}}}},{key:"initStencilDrawParams",value:function(t,e){var r=t.stencil;if(r){var i=r.enable,a=r.mask,s=a===void 0?-1:a,u=r.func,l=u===void 0?{cmp:rt.gl.ALWAYS,ref:0,mask:-1}:u,d=r.opFront,v=d===void 0?{fail:rt.gl.KEEP,zfail:rt.gl.KEEP,zpass:rt.gl.KEEP}:d,k=r.opBack,T=k===void 0?{fail:rt.gl.KEEP,zfail:rt.gl.KEEP,zpass:rt.gl.KEEP}:k;e.stencil={enable:!!i,mask:s,func:Ea(Ea({},l),{},{cmp:Jv[l.cmp]}),opFront:{fail:Sa[v.fail],zfail:Sa[v.zfail],zpass:Sa[v.zpass]},opBack:{fail:Sa[T.fail],zfail:Sa[T.zfail],zpass:Sa[T.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var r=t.cull;if(r){var i=r.enable,a=r.face,s=a===void 0?rt.gl.BACK:a;e.cull={enable:!!i,face:e0[s]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map(function(e){return"#define ".concat(e," ").concat(Number(t[e]))}).join(`
`)}}]),n}(),u0=function(){function n(t,e){hn()(this,n),this.texture=void 0,this.width=void 0,this.height=void 0;var r=e.data,i=e.type,a=i===void 0?rt.gl.UNSIGNED_BYTE:i,s=e.width,u=e.height,l=e.flipY,d=l!==void 0&&l,v=e.format,k=v===void 0?rt.gl.RGBA:v,T=e.mipmap,I=T!==void 0&&T,j=e.wrapS,F=j===void 0?rt.gl.CLAMP_TO_EDGE:j,G=e.wrapT,V=G===void 0?rt.gl.CLAMP_TO_EDGE:G,q=e.aniso,$=q===void 0?0:q,ve=e.alignment,de=ve===void 0?1:ve,me=e.premultiplyAlpha,Ie=me!==void 0&&me,Ee=e.mag,Pe=Ee===void 0?rt.gl.NEAREST:Ee,Ze=e.min,it=Ze===void 0?rt.gl.NEAREST:Ze,ct=e.colorSpace,st=ct===void 0?rt.gl.BROWSER_DEFAULT_WEBGL:ct;this.width=s,this.height=u;var jt={width:s,height:u,type:zu[a],format:Kv[k],wrapS:Af[F],wrapT:Af[V],mag:kf[Pe],min:kf[it],alignment:de,flipY:d,colorSpace:$v[st],premultiplyAlpha:Ie,aniso:$};r&&(jt.data=r),typeof I=="number"?jt.mipmap=Zv[I]:typeof I=="boolean"&&(jt.mipmap=I),this.texture=t.texture(jt)}return dn()(n,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,r=t.height;this.texture.resize(e,r),this.width=e,this.height=r}},{key:"destroy",value:function(){this.texture.destroy()}}]),n}(),c0=Object(Ar.injectable)()(Nf=function(){function n(){var e=this;hn()(this,n),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var r=ti()(Hr.a.mark(function i(a){return Hr.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!a.uniforms){s.next=3;break}return s.next=3,Promise.all(Object.keys(a.uniforms).map(function(){var u=ti()(Hr.a.mark(function l(d){var v;return Hr.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!a.uniforms[d]||a.uniforms[d].load===void 0){k.next=5;break}return k.next=3,a.uniforms[d].load();case 3:v=k.sent,a.uniforms[d]=v;case 5:case"end":return k.stop()}},l)}));return function(l){return u.apply(this,arguments)}}()));case 3:return s.abrupt("return",new s0(e.gl,a));case 4:case"end":return s.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new Hv(e.gl,r)},this.createBuffer=function(r){return new t0(e.gl,r)},this.createElements=function(r){return new o0(e.gl,r)},this.createTexture2D=function(r){return new u0(e.gl,r)},this.createFramebuffer=function(r){return new a0(e.gl,r)},this.useFramebuffer=function(r,i){e.gl({framebuffer:r?r.get():null})(i)},this.createComputeModel=function(){var r=ti()(Hr.a.mark(function i(a){return Hr.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new i0(e.gl,a));case 1:case"end":return s.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),this.clear=function(r){var i=r.color,a=r.depth,s=r.stencil,u=r.framebuffer,l=u===void 0?null:u,d={color:i,depth:a,stencil:s};d.framebuffer=l===null?l:l.get(),e.gl.clear(d)},this.setScissor=function(r){e.gl&&e.gl._gl&&(r.enable&&r.box?(e.gl._gl.enable(rt.gl.SCISSOR_TEST),e.gl._gl.scissor(r.box.x,r.box.y,r.box.width,r.box.height)):e.gl._gl.disable(rt.gl.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(r){var i=r.x,a=r.y,s=r.width,u=r.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(i,a,s,u),e.gl._refresh())},this.readPixels=function(r){var i=r.framebuffer,a={x:r.x,y:r.y,width:r.width,height:r.height};return i&&(a.framebuffer=i.get()),e.gl.read(a)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var t;return dn()(n,[{key:"init",value:(t=ti()(Hr.a.mark(function e(r){return Hr.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.inited){i.next=2;break}return i.abrupt("return");case 2:return this.$canvas=r.canvas,i.next=5,new Promise(function(a,s){Yv()({canvas:r.canvas,attributes:{alpha:!0,antialias:r.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(u,l){!u&&l||s(u),a(l)}})});case 5:this.gl=i.sent,this.inited=!0;case 7:case"end":return i.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),n}())||Nf;function l0(n,t,e,r){if(typeof window!="undefined"){var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",n),r&&(a.id=r),a.onload=function(){t&&t()},a.onerror=function(s){e&&e("Unable to load script '".concat(n,"'"),s)},i.appendChild(a)}}function f0(n,t){return new Promise(function(e,r){l0(n,function(){e()},function(i,a){r(a)})})}var h0=function(){return Df.apply(this,arguments)};function Df(){return(Df=ti()(Hr.a.mark(function n(){return Hr.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ds){t.next=2;break}return t.abrupt("return",Ds);case 2:return t.next=4,f0("https://preview.babylonjs.com/glslang/glslang.js");case 4:return Ds=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",Ds);case 6:case"end":return t.stop()}},n)}))).apply(this,arguments)}var d0=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.attribute=void 0,this.buffer=void 0;var r=e,i=r.buffer,a=r.offset,s=r.stride,u=r.normalized,l=r.size,d=r.divisor,v=r.arrayStride,k=r.attributes,T=r.stepMode;this.buffer=i,this.attribute={buffer:i.get(),offset:a||0,stride:s||0,normalized:u||!1,divisor:d||0,arrayStride:v||0,attributes:k,stepMode:T||"vertex"},l&&(this.attribute.size=l)}return dn()(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Oa=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.buffer=void 0;var r=e,i=r.data,a=r.usage;r.type,this.buffer=this.createBuffer(i instanceof Array?new Float32Array(i):i,a||Jt.BufferUsage.Vertex|Jt.BufferUsage.CopyDst)}return dn()(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,r=t.offset;this.setSubData(this.buffer,r,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var r=t.byteLength%4,i={size:t.byteLength+r,usage:e},a=this.engine.device.createBuffer(i);return this.setSubData(a,0,t),a}},{key:"setSubData",value:function(t,e,r){(rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,r)}}]),n}(),Uo,Po,la,Ki,Ma,Rs,Ja,p0=function(){function n(i,a){hn()(this,n),this.engine=i,this.context=a,this.entity=Object(rt.createEntity)(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var t,e,r;return dn()(n,[{key:"init",value:(r=ti()(Hr.a.mark(function i(){var a,s,u,l,d,v,k,T=this;return Hr.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:a=I.sent,s=a.computeStage,u=this.context.uniforms.filter(function(j){return j.storageClass===rt.STORAGE_CLASS.StorageBuffer}),l=this.context.uniforms.filter(function(j){return j.storageClass===rt.STORAGE_CLASS.Uniform}),d=l.length?1:0,this.bindGroupEntries=[],d&&(v=0,k=[],l.forEach(function(j){if(typeof j.data=="number")T.uniformGPUBufferLayout.push({name:j.name,offset:v}),v+=4,k.push(j.data);else{var F,G=((F=j.data)===null||F===void 0?void 0:F.length)||1;G===3&&(G=4,j.data.push(0));var V=v/4%4;if(V>0){var q=4-V;if(G>1&&G<=q)G===2&&(q===3&&(v+=4,k.push(0)),k.push.apply(k,ui()(j.data)),T.uniformGPUBufferLayout.push({name:j.name,offset:v}));else{for(var $=0;$<q;$++)v+=4,k.push(0);k.push.apply(k,ui()(j.data)),T.uniformGPUBufferLayout.push({name:j.name,offset:v})}}v+=4*G}}),this.uniformBuffer=new Oa(this.engine,{data:k instanceof Array?new Float32Array(k):k,usage:Jt.BufferUsage.Uniform|Jt.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),u.forEach(function(j){var F;j.data!==null&&(j.type!==rt.AST_TOKEN_TYPES.Vector4FloatArray&&j.type!==rt.AST_TOKEN_TYPES.FloatArray||(j.name===T.context.output.name?(F=new Oa(T.engine,{data:isFinite(Number(j.data))?[j.data]:j.data,usage:Jt.BufferUsage.Storage|Jt.BufferUsage.CopyDst|Jt.BufferUsage.CopySrc}),T.outputBuffer=F,T.context.output={name:j.name,length:isFinite(Number(j.data))?1:j.data.length,typedArrayConstructor:Float32Array,gpuBuffer:F.get()}):j.isReferer?j.data.model&&j.data.model.outputBuffer&&(F=j.data.model.outputBuffer):F=new Oa(T.engine,{data:isFinite(Number(j.data))?[j.data]:j.data,usage:Jt.BufferUsage.Storage|Jt.BufferUsage.CopyDst|Jt.BufferUsage.CopySrc}),T.vertexBuffers[j.name]=F,T.bindGroupEntries.push({binding:d,resource:{name:j.name,refer:F?void 0:j.data,buffer:F?F.get():void 0}}),d++))}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:s}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return I.stop()}},i,this)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var i=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(a){return i.vertexBuffers[a].destroy()})}},{key:"readData",value:(e=ti()(Hr.a.mark(function i(){var a,s,u,l,d,v,k,T,I;return Hr.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(a=this.context.output)){j.next=16;break}if(s=a.length,u=a.typedArrayConstructor,!(l=a.gpuBuffer)){j.next=16;break}return d=s*u.BYTES_PER_ELEMENT,v=this.engine.device.createBuffer({size:d,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(k=this.engine.device.createCommandEncoder()).copyBufferToBuffer(l,0,v,0,d),(rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([k.finish()]),j.next=12,v.mapAsync(Jt.MapMode.Read);case 12:return T=v.getMappedRange(),I=new u(T.slice(0)),v.unmap(),j.abrupt("return",I);case 16:return j.abrupt("return",new Float32Array);case 17:case"end":return j.stop()}},i,this)})),function(){return e.apply(this,arguments)})},{key:"run",value:function(){var i;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(i=this.engine.currentComputePass).dispatch.apply(i,ui()(this.context.dispatch)))}},{key:"updateBuffer",value:function(i,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.vertexBuffers[i];u&&u.subData({data:a,offset:s})}},{key:"updateUniform",value:function(i,a){var s=this.uniformGPUBufferLayout.find(function(u){return u.name===i});s&&this.uniformBuffer.subData({data:Number.isFinite(a)?new Float32Array([a]):new Float32Array(a),offset:s.offset})}},{key:"confirmInput",value:function(i,a){var s=this.vertexBuffers[a],u=i.outputBuffer;if(s&&u&&s!==u){var l=this.engine.device.createCommandEncoder(),d=i.context.output,v=d.length*d.typedArrayConstructor.BYTES_PER_ELEMENT;l.copyBufferToBuffer(u.get(),0,s.get(),0,v),(rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([l.finish()])}}},{key:"compileShaderToSpirV",value:function(i,a,s){return this.compileRawShaderToSpirV(s+i,a)}},{key:"compileRawShaderToSpirV",value:function(i,a){return this.engine.glslang.compileGLSL(i,a)}},{key:"compileComputePipelineStageDescriptor",value:(t=ti()(Hr.a.mark(function i(a){var s;return Hr.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=a,this.engine.options.useWGSL){u.next=6;break}return u.next=5,this.compileShaderToSpirV(a,"compute",`#version 450
`);case 5:s=u.sent;case 6:return u.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:s,isWHLSL:rt.isSafari}),entryPoint:"main"}});case 7:case"end":return u.stop()}},i,this)})),function(i){return t.apply(this,arguments)})}]),n}(),g0=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.indexCount=void 0,this.buffer=void 0;var r=e,i=r.data,a=(r.usage,r.type,r.count);this.indexCount=a||0,this.buffer=new Oa(t,{data:i instanceof Array?new Uint16Array(i):i,usage:Jt.BufferUsage.Index|Jt.BufferUsage.CopyDst})}return dn()(n,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),v0=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=e,i=(r.width,r.height,r.color),a=(r.colors,r.depth);r.stencil,i&&(this.colorTexture=i),a&&(this.depthTexture=a)}return dn()(n,[{key:"get",value:function(){var t,e;return{color:(t=this.colorTexture)===null||t===void 0?void 0:t.get(),depth:(e=this.depthTexture)===null||e===void 0?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;(t=this.colorTexture)===null||t===void 0||t.destroy(),(e=this.depthTexture)===null||e===void 0||e.destroy()}},{key:"resize",value:function(t){var e,r,i=t.width,a=t.height;i===this.width&&a===this.height||((e=this.colorTexture)===null||e===void 0||e.resize({width:i,height:a}),(r=this.depthTexture)===null||r===void 0||r.resize({width:i,height:a})),this.width=i,this.height=a}}]),n}(),y0=(Uo={},Yt()(Uo,rt.gl.POINTS,Jt.PrimitiveTopology.PointList),Yt()(Uo,rt.gl.LINES,Jt.PrimitiveTopology.LineList),Yt()(Uo,rt.gl.LINE_LOOP,Jt.PrimitiveTopology.LineList),Yt()(Uo,rt.gl.LINE_STRIP,Jt.PrimitiveTopology.LineStrip),Yt()(Uo,rt.gl.TRIANGLES,Jt.PrimitiveTopology.TriangleList),Yt()(Uo,rt.gl.TRIANGLE_FAN,Jt.PrimitiveTopology.TriangleList),Yt()(Uo,rt.gl.TRIANGLE_STRIP,Jt.PrimitiveTopology.TriangleStrip),Uo),m0=(Po={},Yt()(Po,rt.gl.NEVER,Jt.CompareFunction.Never),Yt()(Po,rt.gl.ALWAYS,Jt.CompareFunction.Always),Yt()(Po,rt.gl.LESS,Jt.CompareFunction.Less),Yt()(Po,rt.gl.LEQUAL,Jt.CompareFunction.LessEqual),Yt()(Po,rt.gl.GREATER,Jt.CompareFunction.Greater),Yt()(Po,rt.gl.GEQUAL,Jt.CompareFunction.GreaterEqual),Yt()(Po,rt.gl.EQUAL,Jt.CompareFunction.Equal),Yt()(Po,rt.gl.NOTEQUAL,Jt.CompareFunction.NotEqual),Po),Rf=(la={},Yt()(la,rt.gl.FUNC_ADD,Jt.BlendOperation.Add),Yt()(la,rt.gl.MIN_EXT,Jt.BlendOperation.Min),Yt()(la,rt.gl.MAX_EXT,Jt.BlendOperation.Max),Yt()(la,rt.gl.FUNC_SUBTRACT,Jt.BlendOperation.Subtract),Yt()(la,rt.gl.FUNC_REVERSE_SUBTRACT,Jt.BlendOperation.ReverseSubtract),la),Ls=(Ki={},Yt()(Ki,rt.gl.ZERO,Jt.BlendFactor.Zero),Yt()(Ki,rt.gl.ONE,Jt.BlendFactor.One),Yt()(Ki,rt.gl.SRC_COLOR,Jt.BlendFactor.SrcColor),Yt()(Ki,rt.gl.ONE_MINUS_SRC_COLOR,Jt.BlendFactor.OneMinusSrcColor),Yt()(Ki,rt.gl.SRC_ALPHA,Jt.BlendFactor.SrcAlpha),Yt()(Ki,rt.gl.ONE_MINUS_SRC_ALPHA,Jt.BlendFactor.OneMinusSrcAlpha),Yt()(Ki,rt.gl.DST_COLOR,Jt.BlendFactor.DstColor),Yt()(Ki,rt.gl.ONE_MINUS_DST_COLOR,Jt.BlendFactor.OneMinusDstColor),Yt()(Ki,rt.gl.DST_ALPHA,Jt.BlendFactor.DstAlpha),Yt()(Ki,rt.gl.ONE_MINUS_DST_ALPHA,Jt.BlendFactor.OneMinusDstAlpha),Yt()(Ki,rt.gl.CONSTANT_COLOR,Jt.BlendFactor.BlendColor),Yt()(Ki,rt.gl.ONE_MINUS_CONSTANT_COLOR,Jt.BlendFactor.OneMinusBlendColor),Yt()(Ki,rt.gl.SRC_ALPHA_SATURATE,Jt.BlendFactor.SrcAlphaSaturated),Ki),b0=(Ma={},Yt()(Ma,rt.gl.ALPHA,"r8unorm"),Yt()(Ma,rt.gl.RGBA,"rgba8unorm"),Yt()(Ma,rt.gl.DEPTH_COMPONENT,"depth32float"),Yt()(Ma,rt.gl.DEPTH_STENCIL,"depth24plus-stencil8"),Ma),Lf=(Rs={},Yt()(Rs,rt.gl.NEAREST,"nearest"),Yt()(Rs,rt.gl.LINEAR,"linear"),Rs),Vu=(Ja={},Yt()(Ja,rt.gl.REPEAT,"repeat"),Yt()(Ja,rt.gl.CLAMP_TO_EDGE,"clamp-to-edge"),Yt()(Ja,rt.gl.MIRRORED_REPEAT,"mirror-repeat"),Ja);function x0(n){var t=n.cull;return t&&t.enable?t.face?t.face===rt.gl.FRONT?Jt.CullMode.Front:Jt.CullMode.Back:void 0:Jt.CullMode.None}function w0(n){var t=n.depth,e=(n.stencil,{compare:Jt.CompareFunction.Always,depthFailOp:Jt.StencilOperation.Keep,failOp:Jt.StencilOperation.Keep,passOp:Jt.StencilOperation.Keep});return{depthWriteEnabled:t&&t.enable,depthCompare:m0[(t==null?void 0:t.func)||rt.gl.ALWAYS],format:Jt.TextureFormat.Depth24PlusStencil8,stencilFront:e,stencilBack:e,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function _0(n,t){var e=n.blend;return[{format:t,alphaBlend:{srcFactor:Ls[e&&e.func&&e.func.srcAlpha||rt.gl.ONE],dstFactor:Ls[e&&e.func&&e.func.dstAlpha||rt.gl.ZERO],operation:Rf[e&&e.equation&&e.equation.alpha||rt.gl.FUNC_ADD]},colorBlend:{srcFactor:Ls[e&&e.func&&e.func.srcRGB||rt.gl.ONE],dstFactor:Ls[e&&e.func&&e.func.dstRGB||rt.gl.ZERO],operation:Rf[e&&e.equation&&e.equation.rgb||rt.gl.FUNC_ADD]},writeMask:Jt.ColorWrite.All}]}function Bf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function ka(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Bf(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Bf(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function S0(n){for(var t=0,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var a=0,s=r;a<s.length;a++){var u=s[a];t+=u.length}for(var l=new n(t),d=0,v=0,k=r;v<k.length;v++){var T=k[v];l.set(T,d),d+=T.length}return l}var Gf,Ff,E0=function(){function n(r,i){hn()(this,n),this.engine=r,this.options=i,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var t,e;return dn()(n,[{key:"init",value:(e=ti()(Hr.a.mark(function r(){var i,a,s,u,l,d,v,k,T,I,j,F,G,V,q,$,ve=this;return Hr.a.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return i=this.options,a=i.vs,s=i.fs,u=i.attributes,l=i.uniforms,d=i.primitive,i.count,v=i.elements,k=i.depth,T=i.blend,I=i.stencil,j=i.cull,i.instances,de.next=3,this.compilePipelineStageDescriptor(a,s,null);case 3:F=de.sent,G=F.vertexStage,V=F.fragmentStage,l&&this.buildUniformBindGroup(l),v&&(this.indexBuffer=v.get(),this.indexCount=v.indexCount),q={vertexBuffers:Object.keys(u).map(function(me,Ie){var Ee=u[me],Pe=Ee.get(),Ze=Pe.arrayStride,it=Pe.stepMode,ct=Pe.attributes;return ve.attributeCache[me]=Ee,{arrayStride:Ze,stepMode:it,attributes:ct}})},$={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:y0[d||rt.gl.TRIANGLES],rasterizationState:ka(ka({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:x0({cull:j})}),depthStencilState:w0({depth:k,stencil:I}),colorStates:_0({blend:T},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:G,fragmentStage:V,vertexState:q},this.renderPipeline=this.engine.device.createRenderPipeline($);case 11:case"end":return de.stop()}},r,this)})),function(){return e.apply(this,arguments)})},{key:"addUniforms",value:function(r){this.uniforms=ka(ka({},this.uniforms),Qa(r))}},{key:"draw",value:function(r){var i=this,a=this.engine.getCurrentRenderPass(),s=ka(ka({},this.uniforms),Qa(r.uniforms||{})),u=[];Object.keys(s).forEach(function(l){var d=qa()(s[l]);if(d==="boolean"||d==="number"||Array.isArray(s[l])||s[l].BYTES_PER_ELEMENT){var v,k=(v=i.uniformGPUBufferLayout.find(function(q){return q.name===l}))===null||v===void 0?void 0:v.offset;k!==null&&i.uniformBuffer.subData({data:s[l],offset:k})}else{var T,I=(T=i.uniformGPUBufferLayout.find(function(q){return q.name===l}))===null||T===void 0?void 0:T.offset;if(I!==null){var j=s[l].get(),F=j.color||j,G=F.texture,V=F.sampler;V&&(u.push({binding:I,resource:V}),I++),u.push({binding:I,resource:G.createView()})}}}),this.uniformBuffer&&(u[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:u}),this.renderPipeline&&a.setPipeline(this.renderPipeline),a.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&a.setIndexBuffer(this.indexBuffer.get(),Jt.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(l,d){a.setVertexBuffer(0+d,i.attributeCache[l].get().buffer,0)}),this.indexBuffer?a.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):a.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(t=ti()(Hr.a.mark(function r(i,a,s){var u,l,d;return Hr.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(u=`#version 450
`,l=i,d=a,this.engine.options.useWGSL){v.next=10;break}return v.next=6,this.compileShaderToSpirV(i,"vertex",u);case 6:return l=v.sent,v.next=9,this.compileShaderToSpirV(a,"fragment",u);case 9:d=v.sent;case 10:return v.abrupt("return",this.createPipelineStageDescriptor(l,d));case 11:case"end":return v.stop()}},r,this)})),function(r,i,a){return t.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(r,i,a){return this.compileRawShaderToSpirV(a+r,i)}},{key:"compileRawShaderToSpirV",value:function(r,i){return this.engine.glslang.compileGLSL(r,i)}},{key:"createPipelineStageDescriptor",value:function(r,i){return{vertexStage:{module:this.engine.device.createShaderModule({code:r,isWHLSL:rt.isSafari}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:i,isWHLSL:rt.isSafari}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Jt.FrontFace.CCW,cullMode:Jt.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(r){var i=this,a=0,s=S0.apply(void 0,[Float32Array].concat(ui()(Object.keys(r).map(function(d){return r[d]?(i.uniformGPUBufferLayout.push({name:d,offset:a}),a+=4*(r[d].length||1),r[d]):[]})))),u=[],l=!1;s.length&&(l=!0,u.push({binding:0,visibility:Jt.ShaderStage.Fragment|Jt.ShaderStage.Vertex,type:Jt.BindingType.UniformBuffer})),Object.keys(r).filter(function(d){return r[d]===null}).forEach(function(d,v){i.uniformGPUBufferLayout.push({name:d,offset:2*v+(l?1:0)}),u.push({binding:2*v+(l?1:0),visibility:Jt.ShaderStage.Fragment,type:Jt.BindingType.Sampler},{binding:2*v+(l?1:0)+1,visibility:Jt.ShaderStage.Fragment,type:Jt.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:u}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),l&&(this.uniformBuffer=new Oa(this.engine,{data:s instanceof Array?new Float32Array(s):s,usage:Jt.BufferUsage.Uniform|Jt.BufferUsage.CopyDst}))}}]),n}(),O0=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return dn()(n,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,r=t.height;e===this.width&&r===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=r}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),r=(e===void 0&&rt.gl.UNSIGNED_BYTE,t.width),i=t.height,a=(t.flipY,t.format),s=a===void 0?rt.gl.RGBA:a,u=(t.mipmap,t.wrapS),l=u===void 0?rt.gl.CLAMP_TO_EDGE:u,d=t.wrapT,v=d===void 0?rt.gl.CLAMP_TO_EDGE:d,k=t.aniso,T=k===void 0?0:k,I=(t.alignment,t.premultiplyAlpha,t.mag),j=I===void 0?rt.gl.NEAREST:I,F=t.min,G=F===void 0?rt.gl.NEAREST:F,V=t.colorSpace,q=(V===void 0&&rt.gl.BROWSER_DEFAULT_WEBGL,t.usage);this.width=r,this.height=i,this.texture=this.engine.device.createTexture({size:[r,i,1],mipLevelCount:1,sampleCount:1,dimension:Jt.TextureDimension.E2d,format:b0[s],usage:q||Jt.TextureUsage.Sampled|Jt.TextureUsage.CopyDst}),(!q||q&Jt.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Vu[l],addressModeV:Vu[v],addressModeW:Vu[l],magFilter:Lf[j],minFilter:Lf[G],maxAnisotropy:T}))}}]),n}(),M0=Object(Ar.injectable)()(Gf=function(){function n(){var r=this;hn()(this,n),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(i){i.framebuffer;var a=i.color,s=i.depth,u=i.stencil;r.options.supportCompute&&r.startComputePass(),r.currentRenderTarget?(r.currentRenderPass&&r.endRenderTargetRenderPass(),r.startRenderTargetRenderPass(r.currentRenderTarget,a||null,!!s,!!u)):(r.mainColorAttachments[0].loadValue=a||Jt.LoadOp.Load,r.mainDepthAttachment.depthLoadValue=s||Jt.LoadOp.Load,r.mainDepthAttachment.stencilLoadValue=u?r.clearStencilValue:Jt.LoadOp.Load,r.mainRenderPass&&r.endMainRenderPass(),r.startMainRenderPass())},this.createModel=function(){var i=ti()(Hr.a.mark(function a(s){var u;return Hr.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=new E0(r,s),l.next=3,u.init();case 3:return l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(a){return i.apply(this,arguments)}}(),this.createAttribute=function(i){return new d0(r,i)},this.createBuffer=function(i){return new Oa(r,i)},this.createElements=function(i){return new g0(r,i)},this.createTexture2D=function(i){return new O0(r,i)},this.createFramebuffer=function(i){return new v0(r,i)},this.useFramebuffer=function(i,a){r.currentRenderTarget&&r.unbindFramebuffer(r.currentRenderTarget),r.currentRenderTarget=i,r.currentRenderTargetViewDescriptor={dimension:Jt.TextureViewDimension.E2d,arrayLayerCount:1,aspect:Jt.TextureAspect.All},r.currentRenderPass=null,a()},this.createComputeModel=function(){var i=ti()(Hr.a.mark(function a(s){var u;return Hr.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=new p0(r,s),l.next=3,u.init();case 3:return l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(a){return i.apply(this,arguments)}}(),this.getCanvas=function(){return r.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(i){var a=i.x,s=i.y,u=i.width,l=i.height;r.currentRenderPass?r.transientViewport.x!==1/0?r.getCurrentRenderPass().setViewport(r.transientViewport.x,r.transientViewport.y,r.transientViewport.width,r.transientViewport.height,0,1):(a!==r.cachedViewport.x||s!==r.cachedViewport.y||u!==r.cachedViewport.width||l!==r.cachedViewport.height)&&(r.cachedViewport={x:a,y:s,width:u,height:l},r.getCurrentRenderPass().setViewport(a,s,u,l,0,1)):r.transientViewport={x:a,y:s,width:u,height:l}},this.readPixels=function(i){throw new Error("Method not implemented.")}}var t,e;return dn()(n,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(e=ti()(Hr.a.mark(function r(i){return Hr.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.canvas=i.canvas,this.options=i,this.useWGSL=!!i.useWGSL,this.mainPassSampleCount=i.antialiasing?this.defaultSampleCount:1,a.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return a.stop()}},r,this)})),function(r){return e.apply(this,arguments)})},{key:"setScissor",value:function(r){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(r){return r.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),rt.isSafari?this.device.getQueue().submit(this.commandBuffers.filter(function(r){return r})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(r){return r}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(t=ti()(Hr.a.mark(function r(){var i,a;return Hr.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h0();case 2:return this.glslang=s.sent,s.next=5,(i=navigator)===null||i===void 0||(a=i.gpu)===null||a===void 0?void 0:a.requestAdapter();case 5:return this.adapter=s.sent,s.next=8,this.adapter.requestDevice();case 8:this.device=s.sent;case 9:case"end":return s.stop()}},r,this)})),function(){return t.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(rt.isSafari?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Jt.TextureUsage.OutputAttachment|Jt.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var r={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Jt.TextureDimension.E2d,format:Jt.TextureFormat.BGRA8Unorm,usage:Jt.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(r),this.mainColorAttachments=[{attachment:rt.isSafari?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Jt.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Jt.StoreOp.Store}];var i={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Jt.TextureDimension.E2d,format:rt.isSafari?"depth32float-stencil8":Jt.TextureFormat.Depth24PlusStencil8,usage:Jt.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(i),this.mainDepthAttachment={attachment:rt.isSafari?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Jt.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Jt.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(r,i,a){var s,u,l,d=arguments.length>3&&arguments[3]!==void 0&&arguments[3],v=(s=r.get().color)===null||s===void 0?void 0:s.texture;v&&(l=v.createView(this.currentRenderTargetViewDescriptor));var k,T=(u=r.get().depth)===null||u===void 0?void 0:u.texture;T&&(k=T.createView());var I=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:l,loadValue:i!==null?i:Jt.LoadOp.Load,storeOp:Jt.StoreOp.Store}],depthStencilAttachment:T&&k?{attachment:k,depthLoadValue:a?this.clearDepthValue:Jt.LoadOp.Load,depthStoreOp:Jt.StoreOp.Store,stencilLoadValue:d?this.clearStencilValue:Jt.LoadOp.Load,stencilStoreOp:Jt.StoreOp.Store}:void 0});this.currentRenderPass=I,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(r){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),n}())||Gf,k0=o(59),A0=o.n(k0),C0=o(23),$o=o.n(C0),T0=o(24),Qo=o.n(T0),I0=o(18),Bi=o.n(I0);function j0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Bi()(n);if(t){var i=Bi()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var zf,P0=Object(Ar.injectable)()(Ff=function(n){$o()(e,n);var t=j0(e);function e(){return hn()(this,e),t.apply(this,arguments)}return dn()(e,[{key:"onEntityCreated",value:function(){var r=this.config,i=r.widthSegments,a=i===void 0?1:i,s=r.heightSegments,u=s===void 0?1:s,l=r.depthSegments,d=l===void 0?1:l,v=r.halfExtents,k=v===void 0?Nt.e.fromValues(.5,.5,.5):v,T=a,I=u,j=d,F=A0()(k,3),G=F[0],V=F[1],q=F[2],$=[Nt.e.fromValues(-G,-V,q),Nt.e.fromValues(G,-V,q),Nt.e.fromValues(G,V,q),Nt.e.fromValues(-G,V,q),Nt.e.fromValues(G,-V,-q),Nt.e.fromValues(-G,-V,-q),Nt.e.fromValues(-G,V,-q),Nt.e.fromValues(G,V,-q)],ve=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],de=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],me=1,Ie=2,Ee=3,Pe=4,Ze=5,it=[],ct=[],st=[],jt=[],gt=[],Pt=0,Rt=function(Vt,Dt,qt){var $t,Gt,lr,Br;for(lr=0;lr<=Dt;lr++)for(Br=0;Br<=qt;Br++){var wn=Nt.e.create(),Sr=Nt.e.create(),jr=Nt.e.create(),_r=Nt.e.create();Nt.e.lerp(wn,$[ve[Vt][0]],$[ve[Vt][1]],lr/Dt),Nt.e.lerp(Sr,$[ve[Vt][0]],$[ve[Vt][2]],Br/qt),Nt.e.sub(jr,Sr,$[ve[Vt][0]]),Nt.e.add(_r,wn,jr),$t=lr/Dt,Gt=Br/qt,it.push(_r[0],_r[1],_r[2]),ct.push(de[Vt][0],de[Vt][1],de[Vt][2]),st.push($t,Gt),$t=.875*($t/=3)+4/64,Gt=.875*(Gt/=3)+4/64,$t+=Vt%3/3,Gt+=Math.floor(Vt/3)/3,jt.push($t,Gt),lr<Dt&&Br<qt&&(gt.push(Pt+qt+1,Pt+1,Pt),gt.push(Pt+qt+1,Pt+qt+2,Pt+1)),Pt++}};Rt(0,T,I),Rt(me,T,I),Rt(Ie,T,j),Rt(Ee,T,j),Rt(Pe,j,I),Rt(Ze,j,I);var Zt=Object(rt.generateAABBFromVertices)(it),Ct=this.getComponent();Ct.indices=Uint32Array.from(gt),Ct.aabb=Zt,Ct.vertexCount=Pt,Ct.attributes=[{dirty:!0,name:"position",data:Float32Array.from(it),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(ct),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(st),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(qo))||Ff;function N0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Bi()(n);if(t){var i=Bi()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var Uf,D0=Object(Ar.injectable)()(zf=function(n){$o()(e,n);var t=N0(e);function e(){return hn()(this,e),t.apply(this,arguments)}return dn()(e,[{key:"onEntityCreated",value:function(){var r=this.config.geometries,i=r===void 0?[]:r,a=this.getComponent();a.aabb=new rt.AABB;var s=[],u=[],l=0;i.forEach(function(d){var v=d.aabb,k=d.indices,T=d.vertexCount,I=d.attributes;a.aabb.add(v),a.vertexCount+=T,k&&u.push.apply(u,ui()(k.map(function(j){return j+l}))),l+=T,I.forEach(function(j,F){s[F]?j.data&&(Lu(j.data)?s[F].push(j.data):rf(j.data)?s[F].data=function(G,V){if(!G&&!V)throw new Error("Please specify valid arguments for parameters a and b.");if(!V||V.length===0)return G;if(!G||G.length===0)return V;if(Object.prototype.toString.call(G)!==Object.prototype.toString.call(V))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var q=new G.constructor(G.length+V.length);return q.set(G),q.set(V,G.length),q}(s[F].data,j.data):s[F].data=s[F].data.concat(j.data)):(s[F]=j,s[F].dirty=!0)})}),a.attributes=s,a.indices=Uint32Array.from(u),a.dirty=!0}}]),e}(qo))||zf;function R0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Bi()(n);if(t){var i=Bi()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var Vf,L0=Object(Ar.injectable)()(Uf=function(n){$o()(e,n);var t=R0(e);function e(){return hn()(this,e),t.apply(this,arguments)}return dn()(e,[{key:"onEntityCreated",value:function(){for(var r=this.config,i=r.halfExtents,a=i===void 0?[.5,.5]:i,s=r.widthSegments,u=s===void 0?5:s,l=r.lengthSegments,d=l===void 0?5:l,v=[],k=[],T=[],I=[],j=0,F=0;F<=u;F++)for(var G=0;G<=d;G++){var V=-a[0]+2*a[0]*F/u,q=-(-a[1]+2*a[1]*G/d),$=F/u,ve=G/d;v.push(V,0,q),k.push(0,1,0),T.push($,ve),F<u&&G<d&&(I.push(j+d+1,j+1,j),I.push(j+d+1,j+d+2,j+1)),j++}var de=Object(rt.generateAABBFromVertices)(v),me=this.getComponent();me.indices=Uint32Array.from(I),me.aabb=de,me.vertexCount=j,me.attributes=[{dirty:!0,name:"position",data:Float32Array.from(v),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(k),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(T),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(qo))||Uf;function B0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Bi()(n);if(t){var i=Bi()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var Wf,Xf,Yf,Hf,Bs,qf,Kf,G0=Object(Ar.injectable)()(Vf=function(n){$o()(e,n);var t=B0(e);function e(){return hn()(this,e),t.apply(this,arguments)}return dn()(e,[{key:"onEntityCreated",value:function(){for(var r=this.config,i=r.radius,a=i===void 0?.5:i,s=r.latitudeBands,u=s===void 0?16:s,l=r.longitudeBands,d=l===void 0?16:l,v=[],k=[],T=[],I=[],j=0;j<=u;j++)for(var F=j*Math.PI/u,G=Math.sin(F),V=Math.cos(F),q=0;q<=d;q++){var $=2*q*Math.PI/d-Math.PI/2,ve=Math.sin($),de=Math.cos($)*G,me=V,Ie=ve*G,Ee=1-q/d,Pe=1-j/u;v.push(de*a,me*a,Ie*a),k.push(de,me,Ie),T.push(Ee,Pe)}for(var Ze=0;Ze<u;++Ze)for(var it=0;it<d;++it){var ct=Ze*(d+1)+it,st=ct+d+1;I.push(ct+1,st,ct),I.push(ct+1,st+1,st)}var jt=Object(rt.generateAABBFromVertices)(v),gt=this.getComponent();gt.indices=Uint32Array.from(I),gt.aabb=jt,gt.vertexCount=v.length/3,gt.attributes=[{dirty:!0,name:"position",data:Float32Array.from(v),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(k),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(T),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(qo))||Vf,F0=o(22),xo=o.n(F0);function z0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Bi()(n);if(t){var i=Bi()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var Zf,$f,Qf,Jf,eh,th,rh,es,nh,ih,oh,U0=(Wf=Object(Ar.injectable)(),Xf=Object(Ar.inject)(rt.IDENTIFIER.RenderEngine),Yf=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),Wf((Bs=function(n){$o()(e,n);var t=z0(e);function e(){var r;hn()(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),Pn()(r,"engine",qf,xo()(r)),Pn()(r,"shaderModuleService",Kf,xo()(r)),r}return dn()(e,[{key:"onEntityCreated",value:function(){var r=this.getComponent(),i=this.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`:`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,a=this.engine.supportWebGPU?`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`:`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`;this.shaderModuleService.registerModule("material-basic",{vs:i,fs:a});var s=this.shaderModuleService.getModule("material-basic"),u=s.vs,l=s.fs,d=s.uniforms;r.vertexShaderGLSL=u,r.fragmentShaderGLSL=l,r.setUniform(d),this.config.map&&(r.setDefines({USE_UV:1,USE_MAP:1}),r.setUniform({map:this.config.map,uvTransform:Nt.a.create()}))}}]),e}(Of),qf=Nn()(Bs.prototype,"engine",[Xf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kf=Nn()(Bs.prototype,"shaderModuleService",[Yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hf=Bs))||Hf);function V0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Bi()(n);if(t){var i=Bi()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var W0=(Zf=Object(Ar.injectable)(),$f=Object(Ar.inject)(rt.IDENTIFIER.Systems),Qf=Object(Ar.named)(rt.IDENTIFIER.MaterialSystem),Jf=Object(Ar.inject)(rt.IDENTIFIER.Systems),eh=Object(Ar.named)(rt.IDENTIFIER.GeometrySystem),th=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),Zf((es=function(n){$o()(e,n);var t=V0(e);function e(){var r;hn()(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),Pn()(r,"materialSystem",nh,xo()(r)),Pn()(r,"geometrySystem",ih,xo()(r)),Pn()(r,"shaderModuleService",oh,xo()(r)),r}return dn()(e,[{key:"onAttributeChanged",value:function(r){var i=r.name,a=r.data,s=this.getMeshComponent();s&&s.material&&(i==="gridColor"?(s.material.setUniform("u_GridColor",a),s.material.setUniform("u_GridColor2",a)):i==="gridSize"&&(s.material.setUniform("u_GridSize",a),s.material.setUniform("u_GridSize2",a)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,fs:`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`});var r=this.shaderModuleService.getModule("grid"),i=r.vs,a=r.fs,s=r.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:i,fragmentShader:a});this.setMaterial(u);var l=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(l),u.setCull({enable:!1,face:rt.gl.BACK}).setDepth({enable:!0,func:rt.gl.LESS}),u.setUniform(s),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),l.setIndex([0,3,2,2,1,0]),l.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),e}(Zo),nh=Nn()(es.prototype,"materialSystem",[$f,Qf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ih=Nn()(es.prototype,"geometrySystem",[Jf,eh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oh=Nn()(es.prototype,"shaderModuleService",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=es))||rh),Gs=o(94),fa=o(61);function Fs(n,t,e,r,i){ts(t,r,-i),ts(t,r,i),n.push(e),n.push(e)}function ts(n,t,e){n.push([[t[0],t[1]],e])}var ah,sh,uh,ch,lh,fh,hh,rs,dh,ph,gh;function X0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Bi()(n);if(t){var i=Bi()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var vh,yh,mh,bh,xh,wh,_h,ns,Sh,Eh,Oh,Y0=(ah=Object(Ar.injectable)(),sh=Object(Ar.inject)(rt.IDENTIFIER.Systems),uh=Object(Ar.named)(rt.IDENTIFIER.MaterialSystem),ch=Object(Ar.inject)(rt.IDENTIFIER.Systems),lh=Object(Ar.named)(rt.IDENTIFIER.GeometrySystem),fh=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),ah((rs=function(n){$o()(e,n);var t=X0(e);function e(){var r;hn()(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),Pn()(r,"materialSystem",dh,xo()(r)),Pn()(r,"geometrySystem",ph,xo()(r)),Pn()(r,"shaderModuleService",gh,xo()(r)),r.vertexCount=void 0,r}return dn()(e,[{key:"onAttributeChanged",value:function(r){var i=r.name,a=r.data,s=this.getMeshComponent();if(s&&s.material)switch(i){case"dashArray":s.material.setUniform("u_dash_array",a);break;case"dashOffset":s.material.setUniform("u_dash_offset",a);break;case"dashRatio":s.material.setUniform("u_dash_ratio",a);break;case"thickness":s.material.setUniform("u_thickness",a);break;case"color":var u=new Array(this.vertexCount).fill(void 0).map(function(){return a}).reduce(function(l,d){return[].concat(ui()(l),ui()(d))},[]);s.geometry.setAttribute("a_color",Float32Array.from(u),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var r=this;this.shaderModuleService.registerModule("line",{vs:`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,fs:`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`});var i=this.shaderModuleService.getModule("line"),a=i.vs,s=i.fs,u=i.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:s}),d=function($,ve,de){var me=[0,0],Ie=[0,0],Ee=[0,0],Pe=[0,0],Ze=-1,it=!1,ct=null,st=Object(Gs.create)(),jt=de||0,gt=[],Pt=[],Rt=[],Zt=[0,0];ve&&($=$.slice()).push($[0]);for(var Ct=$.length,Vt=1;Vt<Ct;Vt++){var Dt=jt,qt=$[Vt-1],$t=$[Vt],Gt=Vt<$.length-1?$[Vt+1]:null;if(Zt.push(Vt/Ct,Vt/Ct),Object(fa.direction)(me,$t,qt),ct||(ct=[0,0],Object(fa.normal)(ct,me)),it||(it=!0,Fs(Pt,gt,qt,ct,1)),Rt.push([Dt+0,Dt+1,Dt+2]),Gt){Object(fa.direction)(Ie,Gt,$t);var lr=Object(fa.computeMiter)(Ee,Pe,me,Ie,1),Br=Object(Gs.dot)(Ee,ct)<0?-1:1,wn=lr>3;if(!isFinite(lr)){Object(fa.normal)(ct,me),Fs(Pt,gt,$t,ct,1),Rt.push(Ze===1?[Dt,Dt+2,Dt+3]:[Dt+2,Dt+1,Dt+3]),jt+=2,Ze=Br;continue}wn?(lr=3,Zt.push(Vt/Ct),ts(gt,ct,-Br),Pt.push($t),ts(gt,Pe,lr*Br),Pt.push($t),Rt.push(Ze!==-Br?[Dt,Dt+2,Dt+3]:[Dt+2,Dt+1,Dt+3]),Rt.push([Dt+2,Dt+3,Dt+4]),Object(fa.normal)(st,Ie),Object(Gs.copy)(ct,st),ts(gt,ct,-Br),Pt.push($t),jt+=3):(Fs(Pt,gt,$t,Pe,lr),Rt.push(Ze===1?[Dt,Dt+2,Dt+3]:[Dt+2,Dt+1,Dt+3]),Br=-1,Object(Gs.copy)(ct,Pe),jt+=2),Ze=Br}else Object(fa.normal)(ct,me),Fs(Pt,gt,$t,ct,1),Rt.push(Ze===1?[Dt,Dt+2,Dt+3]:[Dt+2,Dt+1,Dt+3]),jt+=2}return{normals:gt,attrIndex:Rt,attrPos:Pt,attrCounters:Zt}}(this.config.points,!1),v=d.normals,k=d.attrIndex,T=d.attrPos,I=d.attrCounters,j=T.length;this.vertexCount=j;var F=this.geometrySystem.createBufferGeometry({vertexCount:j});this.setMaterial(l),this.setGeometry(F),l.setCull({enable:!1,face:rt.gl.BACK}).setUniform(u),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var G=[],V=[];v.forEach(function($){var ve=$[0],de=$[1];G.push([ve[0],ve[1]]),V.push(de)}),F.setIndex(k.reduce(function($,ve){return[].concat(ui()($),ui()(ve))},[])),F.setAttribute("a_pos",Float32Array.from(T.reduce(function($,ve){return[].concat(ui()($),ui()(ve))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var q=new Array(j).fill(void 0).map(function(){return ui()(r.config.color)}).reduce(function($,ve){return[].concat(ui()($),ui()(ve))},[]);F.setAttribute("a_color",Float32Array.from(q),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),F.setAttribute("a_line_miter",Float32Array.from(V),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),F.setAttribute("a_line_normal",Float32Array.from(G.reduce(function($,ve){return[].concat(ui()($),ui()(ve))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),F.setAttribute("a_counters",Float32Array.from(I),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),e}(Zo),dh=Nn()(rs.prototype,"materialSystem",[sh,uh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ph=Nn()(rs.prototype,"geometrySystem",[ch,lh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gh=Nn()(rs.prototype,"shaderModuleService",[fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hh=rs))||hh);function Mh(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function H0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Bi()(n);if(t){var i=Bi()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var kh,Ah,Ch,Th,Ih,is,jh,Ph,Nh,q0=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],K0=(vh=Object(Ar.injectable)(),yh=Object(Ar.inject)(rt.IDENTIFIER.Systems),mh=Object(Ar.named)(rt.IDENTIFIER.MaterialSystem),bh=Object(Ar.inject)(rt.IDENTIFIER.Systems),xh=Object(Ar.named)(rt.IDENTIFIER.GeometrySystem),wh=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),vh((ns=function(n){$o()(e,n);var t=H0(e);function e(){var r;hn()(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),Pn()(r,"materialSystem",Sh,xo()(r)),Pn()(r,"geometrySystem",Eh,xo()(r)),Pn()(r,"shaderModuleService",Oh,xo()(r)),r}return dn()(e,[{key:"onAttributeChanged",value:function(r){var i=r.name,a=r.data,s=this.getMeshComponent();s&&s.material&&(i==="strokeWidth"?s.material.setUniform("u_stroke_width",a):i==="strokeColor"?s.material.setUniform("u_stroke_color",a):i==="strokeOpacity"?s.material.setUniform("u_stroke_opacity",a):i==="opacity"?s.material.setUniform("u_opacity",a):i==="blur"&&s.material.setUniform("u_blur",a))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,fs:`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`});var r=this.shaderModuleService.getModule("grid"),i=r.vs,a=r.fs,s=r.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:i,fragmentShader:a,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:rt.gl.SRC_ALPHA,dstRGB:rt.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});u.setUniform(function(v){for(var k=1;k<arguments.length;k++){var T=arguments[k]!=null?arguments[k]:{};k%2?Mh(Object(T),!0).forEach(function(I){Yt()(v,I,T[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(T)):Mh(Object(T)).forEach(function(I){Object.defineProperty(v,I,Object.getOwnPropertyDescriptor(T,I))})}return v}({u_device_pixel_ratio:window.devicePixelRatio},s));var l=this.buildAttributes(),d=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:l.instancedOffsets.length/2,vertexCount:6});d.setIndex([0,2,1,0,3,2]),d.setAttribute("position",Float32Array.from(l.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),d.setAttribute("offset",Float32Array.from(l.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),d.setAttribute("color",Float32Array.from(l.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),d.setAttribute("size",Float32Array.from(l.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),d.setAttribute("shape",Float32Array.from(l.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),d.setAttribute("a_PickingColor",Float32Array.from(l.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(u),this.setGeometry(d)}},{key:"buildAttribute",value:function(r,i,a){var s,u,l,d,v;(s=i.instancedPickingColors).push.apply(s,ui()([(v=r.id||a)+1&255,v+1>>8&255,v+1>>8>>8&255])),i.instancedShapes.push(q0.indexOf(r.shape||"circle")),(u=i.instancedColors).push.apply(u,ui()(r.color||[1,0,0,1])),(l=i.instancedOffsets).push.apply(l,ui()(r.position||[0,0])),(d=i.instancedSizes).push.apply(d,ui()(r.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var r=this,i={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(a,s){r.buildAttribute(a,i,s)}):this.buildAttribute(this.config,i,0),i}}]),e}(Zo),Sh=Nn()(ns.prototype,"materialSystem",[yh,mh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eh=Nn()(ns.prototype,"geometrySystem",[bh,xh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oh=Nn()(ns.prototype,"shaderModuleService",[wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_h=ns))||_h);function Dh(n,t){var e;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(e=function(l,d){if(!!l){if(typeof l=="string")return Rh(l,d);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return Rh(l,d)}}(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,u=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var l=e.next();return s=l.done,l},e:function(l){u=!0,a=l},f:function(){try{s||e.return==null||e.return()}finally{if(u)throw a}}}}function Rh(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var Lh,Bh,Gh,Fh,zh,Uh,zs,Vh,Wh,Xh=(kh=Object(Ar.injectable)(),Ah=Object(Ar.inject)(rt.IDENTIFIER.RenderEngine),Ch=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),Th=Object(Ar.inject)(rt.IDENTIFIER.ConfigService),kh((is=function(){function n(){hn()(this,n),this.container=void 0,Pn()(this,"engine",jh,this),Pn()(this,"shaderModule",Ph,this),Pn()(this,"configService",Nh,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}var t,e;return dn()(n,[{key:"init",value:(e=ti()(Hr.a.mark(function r(){var i,a,s,u,l;return Hr.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`}),this.shaderModule.registerModule("uv.vert.main",{vs:`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`}),this.shaderModule.registerModule("uv.frag.declaration",{fs:`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`}),this.shaderModule.registerModule("map.frag.declaration",{fs:`#ifdef USE_MAP
  uniform sampler2D map;
#endif`}),this.shaderModule.registerModule("map.frag.main",{fs:`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`}),i=this.container.getAll(rt.IDENTIFIER.Systems),!(a=this.configService.get()).canvas){d.next=30;break}return d.next=11,this.engine.init({canvas:a.canvas,swapChainFormat:Jt.TextureFormat.BGRA8Unorm,antialiasing:!1});case 11:s=Dh(i),d.prev=12,s.s();case 14:if((u=s.n()).done){d.next=21;break}if(!(l=u.value).initialize){d.next=19;break}return d.next=19,l.initialize();case 19:d.next=14;break;case 21:d.next=26;break;case 23:d.prev=23,d.t0=d.catch(12),s.e(d.t0);case 26:return d.prev=26,s.f(),d.finish(26);case 29:this.inited=!0;case 30:case"end":return d.stop()}},r,this,[[12,23,26,29]])})),function(){return e.apply(this,arguments)})},{key:"render",value:(t=ti()(Hr.a.mark(function r(){var i,a,s,u,l,d,v,k=arguments;return Hr.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.inited&&!this.rendering){T.next=2;break}return T.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(I){I()}),this.rendering=!0,this.engine.beginFrame(),i=this.container.getAll(rt.IDENTIFIER.Systems),a=k.length,s=new Array(a),u=0;u<a;u++)s[u]=k[u];l=Dh(i),T.prev=8,l.s();case 10:if((d=l.n()).done){T.next=17;break}if(!(v=d.value).execute){T.next=15;break}return T.next=15,v.execute(s);case 15:T.next=10;break;case 17:T.next=22;break;case 19:T.prev=19,T.t0=T.catch(8),l.e(T.t0);case 22:return T.prev=22,l.f(),T.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return T.stop()}},r,this,[[8,19,22,25]])})),function(){return t.apply(this,arguments)})},{key:"clear",value:function(r){var i=this;return this.inited?this.engine.clear(r):this.pendings.unshift(function(){i.engine.clear(r),i.pendings.shift()}),this}},{key:"setSize",value:function(r){var i=r.width,a=r.height,s=this.engine.getCanvas();return this.size={width:i,height:a},s.width=i,s.height=a,this}},{key:"getSize",value:function(){return this.size}}]),n}(),jh=Nn()(is.prototype,"engine",[Ah],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ph=Nn()(is.prototype,"shaderModule",[Ch],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nh=Nn()(is.prototype,"configService",[Th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ih=is))||Ih),Yh=Object(Ar.injectable)()(Lh=function(){function n(){hn()(this,n),this.entities=[]}return dn()(n,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(t){return this.addEntity(t.getEntity()),this}},{key:"removeRenderable",value:function(t){return this.removeEntity(t.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(t){return this.entities.indexOf(t)===-1&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),n}())||Lh,Hh=Object(Ar.injectable)()(Bh=function(){function n(){hn()(this,n),this.cache={}}return dn()(n,[{key:"get",value:function(t){return this.cache[t]}},{key:"set",value:function(t,e){this.cache[t]=e}}]),n}())||Bh;function qh(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Kh(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qh(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):qh(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var Zh,$h,Qh,Jh,Wu,ed,td,rd,nd,Xu,id,od=(Gh=Object(Ar.injectable)(),Fh=Object(Ar.inject)(Hh),zh=Object(Ar.inject)(rt.IDENTIFIER.RenderEngine),Gh((zs=function(){function n(){hn()(this,n),Pn()(this,"textureCache",Vh,this),Pn()(this,"engine",Wh,this),this.config=void 0,this.loaded=!1,this.texture=void 0}var t;return dn()(n,[{key:"setConfig",value:function(e){this.config=e}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:(t=ti()(Hr.a.mark(function e(){var r=this;return Hr.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.config.url){i.next=4;break}return i.abrupt("return",new Promise(function(a,s){var u=r.textureCache.get(r.config.url);if(u)a(u);else{var l=new Image;l.crossOrigin="Anonymous",l.src=r.config.url,l.onload=function(){var d=r.engine.createTexture2D(Kh(Kh({},r.config),{},{data:l,width:l.width,height:l.height,flipY:!0}));r.textureCache.set(r.config.url,d),r.texture=d,r.loaded=!0,a(d)},l.onerror=function(){s()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),i.abrupt("return",this.texture);case 7:case"end":return i.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),n}(),Vh=Nn()(zs.prototype,"textureCache",[Fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wh=Nn()(zs.prototype,"engine",[zh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uh=zs))||Uh),ad=(Zh=Object(Ar.injectable)(),$h=Object(Ar.inject)(rt.IDENTIFIER.Systems),Qh=Object(Ar.named)(rt.IDENTIFIER.RendererSystem),Zh((Wu=function(){function n(){hn()(this,n),Pn()(this,"rendererSystem",ed,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return dn()(n,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),n}(),ed=Nn()(Wu.prototype,"rendererSystem",[$h,Qh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jh=Wu))||Jh);function sd(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Z0(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?sd(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):sd(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var Us=(td=Object(Ar.injectable)(),rd=Object(Ar.inject)(rt.IDENTIFIER.ConfigService),td((Xu=function(){function n(){hn()(this,n),Pn()(this,"configService",id,this),this.container=void 0}var t;return dn()(n,[{key:"getEngine",value:(t=ti()(Hr.a.mark(function e(){var r,i,a,s;return Hr.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=this.container.get(rt.IDENTIFIER.RenderEngine),i=this.configService.get(),a=i.canvas,s=i.engineOptions,u.next=4,r.init(Z0({canvas:a||Kl(),swapChainFormat:Jt.TextureFormat.BGRA8Unorm,antialiasing:!1},s));case 4:return u.abrupt("return",r);case 5:case"end":return u.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"getTransformComponent",value:function(e){return this.container.get(rt.IDENTIFIER.TransformComponentManager).getComponentByEntity(e)}},{key:"getMeshComponent",value:function(e){return this.container.get(rt.IDENTIFIER.MeshComponentManager).getComponentByEntity(e)}},{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setContainer",value:function(e){this.container=e}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Object(rt.createEntity)()}},{key:"createScene",value:function(){return this.container.get(Yh)}},{key:"createCamera",value:function(){return this.container.get(ql)}},{key:"createView",value:function(){return this.container.get(ad)}},{key:"createRenderable",value:function(e,r){var i=e?this.container.getNamed(rt.IDENTIFIER.Renderable,e):this.container.get(Zo),a=Object(rt.createEntity)();return i.setConfig(r||{}),i.setEntity(a),i}},{key:"createGeometry",value:function(e,r){var i=this.container.getNamed(rt.IDENTIFIER.Geometry,e),a=Object(rt.createEntity)();return i.setConfig(r||{}),i.setEntity(a),i.getComponent()}},{key:"createMaterial",value:function(e,r){var i=this.container.getNamed(rt.IDENTIFIER.Material,e),a=Object(rt.createEntity)();return i.setConfig(r||{}),i.setEntity(a,e),i.getComponent()}},{key:"createTexture2D",value:function(e){var r=this.container.get(od);return r.setConfig(e),r}},{key:"createBufferGeometry",value:function(e){return this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.GeometrySystem).createBufferGeometry(e)}},{key:"createInstancedBufferGeometry",value:function(e){return this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.GeometrySystem).createInstancedBufferGeometry(e)}},{key:"createShaderMaterial",value:function(e){return this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.MaterialSystem).createShaderMaterial(e)}},{key:"createKernel",value:function(e){var r=this.container.get(Ef);return typeof e=="string"?r.setBundle(JSON.parse(e)):r.setBundle(e),r.init(),r}},{key:"createRenderer",value:function(){var e=this.container.get(Xh);return e.container=this.container,e.init(),e}},{key:"destroy",value:function(){this.container.getAll(rt.IDENTIFIER.Systems).forEach(function(e){e.tearDown&&e.tearDown()}),this.container.get(rt.IDENTIFIER.RenderEngine).destroy(),this.container.get(rt.IDENTIFIER.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Object(rt.createWorldContainer)(),i=navigator.gpu?M0:c0;r.isBound(rt.IDENTIFIER.RenderEngine)||r.bind(rt.IDENTIFIER.RenderEngine).to(i).inSingletonScope(),r.bind(Xh).toSelf(),r.bind(Ef).toSelf(),r.bind(Zo).toSelf(),r.bind(ad).toSelf(),r.bind(ql).toSelf(),r.bind(Yh).toSelf(),r.bind(n).toSelf(),r.bind(Hh).toSelf(),r.bind(od).toSelf(),r.bind(rt.IDENTIFIER.Geometry).to(P0).whenTargetNamed(qo.BOX),r.bind(rt.IDENTIFIER.Geometry).to(G0).whenTargetNamed(qo.SPHERE),r.bind(rt.IDENTIFIER.Geometry).to(L0).whenTargetNamed(qo.PLANE),r.bind(rt.IDENTIFIER.Geometry).to(D0).whenTargetNamed(qo.MERGED),r.bind(rt.IDENTIFIER.Material).to(U0).whenTargetNamed(Of.BASIC),r.bind(rt.IDENTIFIER.Renderable).to(K0).whenTargetNamed(Zo.POINT),r.bind(rt.IDENTIFIER.Renderable).to(Y0).whenTargetNamed(Zo.LINE),r.bind(rt.IDENTIFIER.Renderable).to(W0).whenTargetNamed(Zo.GRID);var a=r.get(n);return a.setContainer(r),a.setConfig(e),a}}]),n}(),id=Nn()(Xu.prototype,"configService",[rd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nd=Xu))||nd),Aa=function(n,t){return n?cr(n)?function(){return n}:n:function(){return t||1}},$0=function(n,t){var e=[],r=[],i={},a=0;for(a=0;a<n.length;a++){var s=n[a];i[s.id]=a,e.push(s.x),e.push(s.y),e.push(0),e.push(0),r.push([])}for(a=0;a<t.length;a++){var u=t[a],l=fn(u,"source"),d=fn(u,"target");r[i[l]].push(i[d]),r[i[d]].push(i[l])}var v=0;for(a=0;a<n.length;a++){var k=e.length,T=r[a],I=T.length;e[4*a+2]=k,e[4*a+3]=T.length,v=Math.max(v,T.length);for(var j=0;j<I;++j){var F=T[j];e.push(+F)}}for(;e.length%4!=0;)e.push(0);return{maxEdgePerVetex:v,array:new Float32Array(e)}},Q0=function(n,t,e,r){var i=[],a=[],s={},u=0;for(u=0;u<n.length;u++){var l=n[u];s[l.id]=u,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(u=0;u<t.length;u++){var d=t[u],v=fn(d,"source"),k=fn(d,"target");a[s[v]].push(s[k]),a[s[v]].push(e(d)),a[s[v]].push(r(d)),a[s[v]].push(0),a[s[k]].push(s[v]),a[s[k]].push(e(d)),a[s[k]].push(r(d)),a[s[k]].push(0)}var T=0;for(u=0;u<n.length;u++){var I=i.length,j=a[u],F=j.length;i[4*u+2]=I+1048576*F/4,i[4*u+3]=0,T=Math.max(T,F/4);for(var G=0;G<F;++G){var V=j[G];i.push(+V)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:T,array:new Float32Array(i)}},J0=function(n,t){var e=[],r=n.length,i={};return t.forEach(function(a){n.forEach(function(s,u){if(i[a[s]]===void 0&&(i[a[s]]=Object.keys(i).length),e.push(i[a[s]]),u===r-1)for(;e.length%4!=0;)e.push(0)})}),{array:new Float32Array(e),count:Object.keys(i).length}},ud=function(n){for(var t=[],e=n.length,r=n[0].length,i=function(s){n.forEach(function(u,l){if(t.push(u[s]),l===e-1)for(;t.length%4!=0;)t.push(0)})},a=0;a<r;a++)i(a);return new Float32Array(t)};function cd(n){return(cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function ld(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function fd(n,t){return(fd=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function ey(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Yu(n);if(t){var i=Yu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return ty(this,e)}}function ty(n,t){return!t||cd(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Yu(n){return(Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Vs=function(n,t,e,r){return new(e||(e=Promise))(function(i,a){function s(d){try{l(r.next(d))}catch(v){a(v)}}function u(d){try{l(r.throw(d))}catch(v){a(v)}}function l(d){var v;d.done?i(d.value):(v=d.value,v instanceof e?v:new e(function(k){k(v)})).then(s,u)}l((r=r.apply(n,t||[])).next())})},ry=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&fd(s,u)})(a,n);var t,e,r,i=ey(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.gravity=10,u.speed=1,u.clustering=!1,u.clusterField="cluster",u.clusterGravity=10,u.workerEnabled=!1,u.nodes=[],u.edges=[],u.width=300,u.height=300,u.nodeMap={},u.nodeIdxMap={},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Vs(this,void 0,void 0,regeneratorRuntime.mark(function s(){var u,l,d,v,k,T=this;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if((l=(u=this).nodes)&&l.length!==0){I.next=5;break}return u.onLayoutEnd&&u.onLayoutEnd(),I.abrupt("return");case 5:if(u.width||typeof window=="undefined"||(u.width=window.innerWidth),u.height||typeof window=="undefined"||(u.height=window.innerHeight),u.center||(u.center=[u.width/2,u.height/2]),d=u.center,l.length!==1){I.next=14;break}return l[0].x=d[0],l[0].y=d[1],u.onLayoutEnd&&u.onLayoutEnd(),I.abrupt("return");case 14:return v={},k={},l.forEach(function(j,F){cr(j.x)||(j.x=Math.random()*T.width),cr(j.y)||(j.y=Math.random()*T.height),v[j.id]=j,k[j.id]=F}),u.nodeMap=v,u.nodeIdxMap=k,I.next=21,u.run();case 21:case"end":return I.stop()}},s,this)}))}},{key:"executeWithWorker",value:function(s,u){return Vs(this,void 0,void 0,regeneratorRuntime.mark(function l(){var d,v,k,T,I,j=this;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(v=(d=this).nodes,k=d.center,v&&v.length!==0){F.next=5;break}return F.abrupt("return");case 5:if(v.length!==1){F.next=9;break}return v[0].x=k[0],v[0].y=k[1],F.abrupt("return");case 9:return T={},I={},v.forEach(function(G,V){cr(G.x)||(G.x=Math.random()*j.width),cr(G.y)||(G.y=Math.random()*j.height),T[G.id]=G,I[G.id]=V}),d.nodeMap=T,d.nodeIdxMap=I,F.next=16,d.run(s,u);case 16:case"end":return F.stop()}},l,this)}))}},{key:"run",value:function(s,u){return Vs(this,void 0,void 0,regeneratorRuntime.mark(function l(){var d,v,k,T,I,j,F,G,V,q,$,ve,de,me,Ie,Ee,Pe,Ze,it,ct,st,jt,gt,Pt,Rt,Zt,Ct=this;return regeneratorRuntime.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:for(v=(d=this).nodes,k=d.edges,T=d.maxIteration,I=d.center,j=d.height*d.width,F=Math.sqrt(j)/10,G=j/(v.length+1),V=Math.sqrt(G),q=d.speed,$=d.clustering,ve=J0([d.clusterField],v),de=ve.array,me=ve.count,v.forEach(function(Dt,qt){var $t=0,Gt=0;cr(Dt.fx)&&cr(Dt.fy)&&($t=Dt.fx||.001,Gt=Dt.fy||.001),de[4*qt+1]=$t,de[4*qt+2]=Gt}),Ie=v.length,Ee=$0(v,k),Pe=Ee.maxEdgePerVetex,Ze=Ee.array,it=d.workerEnabled,ct=it?Us.create({canvas:s,engineOptions:{supportCompute:!0}}):Us.create({engineOptions:{supportCompute:!0}}),st=d.onLayoutEnd,jt=[],gt=0;gt<me;gt++)jt.push(0,0,0,0);return Pt=ct.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Ie,1,1]).setBinding({u_Data:Ze,u_K:V,u_K2:G,u_Gravity:d.gravity,u_ClusterGravity:d.clusterGravity||d.gravity||1,u_Speed:q,u_MaxDisplace:F,u_Clustering:$?1:0,u_Center:I,u_AttributeArray:de,u_ClusterCenters:jt,MAX_EDGE_PER_VERTEX:Pe,VERTEX_COUNT:Ie}),$&&(Rt=ct.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([me,1,1]).setBinding({u_Data:Ze,u_NodeAttributes:de,u_ClusterCenters:jt,VERTEX_COUNT:Ie,CLUSTER_COUNT:me})),Zt=function(){return Vs(Ct,void 0,void 0,regeneratorRuntime.mark(function Dt(){var qt,$t;return regeneratorRuntime.wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:qt=0;case 1:if(!(qt<T)){Gt.next=13;break}return Gt.next=4,Pt.execute();case 4:if(!$){Gt.next=9;break}return Rt.setBinding({u_Data:Pt}),Gt.next=8,Rt.execute();case 8:Pt.setBinding({u_ClusterCenters:Rt});case 9:Pt.setBinding({u_MaxDisplace:F*=.99});case 10:qt++,Gt.next=1;break;case 13:return Gt.next=15,Pt.getOutput();case 15:$t=Gt.sent,s?u.postMessage({type:Kc,vertexEdgeData:$t}):v.forEach(function(lr,Br){var wn=$t[4*Br],Sr=$t[4*Br+1];lr.x=wn,lr.y=Sr}),st&&st();case 18:case"end":return Gt.stop()}},Dt)}))},Vt.next=25,Zt();case 25:case"end":return Vt.stop()}},l,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&ld(t.prototype,e),r&&ld(t,r),a}(Xi);function hd(n){return(hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function dd(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function pd(n,t){return(pd=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function ny(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Hu(n);if(t){var i=Hu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return iy(this,e)}}function iy(n,t){return!t||hd(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Hu(n){return(Hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var qu=function(n,t,e,r){return new(e||(e=Promise))(function(i,a){function s(d){try{l(r.next(d))}catch(v){a(v)}}function u(d){try{l(r.throw(d))}catch(v){a(v)}}function l(d){var v;d.done?i(d.value):(v=d.value,v instanceof e?v:new e(function(k){k(v)})).then(s,u)}l((r=r.apply(n,t||[])).next())})},oy=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&pd(s,u)})(a,n);var t,e,r,i=ny(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.edgeStrength=200,u.nodeStrength=1e3,u.coulombDisScale=.005,u.damping=.9,u.maxSpeed=1e3,u.minMovement=.5,u.interval=.02,u.factor=1,u.linkDistance=1,u.gravity=10,u.workerEnabled=!1,u.nodes=[],u.edges=[],u.width=300,u.height=300,u.nodeMap={},u.nodeIdxMap={},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return qu(this,void 0,void 0,regeneratorRuntime.mark(function s(){var u,l,d,v,k;return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if((l=(u=this).nodes)&&l.length!==0){T.next=5;break}return u.onLayoutEnd&&u.onLayoutEnd(),T.abrupt("return");case 5:if(u.width||typeof window=="undefined"||(u.width=window.innerWidth),u.height||typeof window=="undefined"||(u.height=window.innerHeight),u.center||(u.center=[u.width/2,u.height/2]),d=u.center,l.length!==1){T.next=14;break}return l[0].x=d[0],l[0].y=d[1],u.onLayoutEnd&&u.onLayoutEnd(),T.abrupt("return");case 14:return v={},k={},l.forEach(function(I,j){cr(I.x)||(I.x=Math.random()*u.width),cr(I.y)||(I.y=Math.random()*u.height),v[I.id]=I,k[I.id]=j}),u.nodeMap=v,u.nodeIdxMap=k,u.nodeStrength=Aa(u.nodeStrength,1),u.edgeStrength=Aa(u.edgeStrength,1),T.next=23,u.run();case 23:case"end":return T.stop()}},s,this)}))}},{key:"executeWithWorker",value:function(s,u){var l=this,d=l.nodes,v=l.center;if(d&&d.length!==0){if(d.length===1)return d[0].x=v[0],void(d[0].y=v[1]);var k={},T={};d.forEach(function(I,j){cr(I.x)||(I.x=Math.random()*l.width),cr(I.y)||(I.y=Math.random()*l.height),k[I.id]=I,T[I.id]=j}),l.nodeMap=k,l.nodeIdxMap=T,l.nodeStrength=Aa(l.nodeStrength,1),l.edgeStrength=Aa(l.edgeStrength,1),l.run(s,u)}}},{key:"run",value:function(s,u){return qu(this,void 0,void 0,regeneratorRuntime.mark(function l(){var d,v,k,T,I,j,F,G,V,q,$,ve,de,me,Ie,Ee,Pe,Ze,it,ct,st,jt,gt,Pt,Rt,Zt,Ct,Vt=this;return regeneratorRuntime.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:for(v=(d=this).nodes,k=d.edges,T=d.maxIteration,d.width||typeof window=="undefined"||(d.width=window.innerWidth),d.height||typeof window=="undefined"||(d.height=window.innerHeight),I=v.length,d.linkDistance=Aa(d.linkDistance),d.edgeStrength=Aa(d.edgeStrength),j=Q0(v,k,d.linkDistance,d.edgeStrength),F=j.maxEdgePerVetex,G=j.array,d.degrees=za(v.length,d.nodeIdxMap,k),V=[],q=[],$=[],ve=[],de=[],me=[],Ie=[],d.getMass||(d.getMass=function(qt){return d.degrees[d.nodeIdxMap[qt.id]]||1}),Ee=d.gravity,Pe=d.center,v.forEach(function(qt,$t){V.push(d.getMass(qt)),q.push(d.nodeStrength(qt)),d.degrees[$t]||(d.degrees[$t]=0);var Gt=[Pe[0],Pe[1],Ee];if(d.getCenter){var lr=d.getCenter(qt,d.degrees[$t]);lr&&cr(lr[0])&&cr(lr[1])&&cr(lr[2])&&(Gt=lr)}$.push(Gt[0]),ve.push(Gt[1]),de.push(Gt[2]),cr(qt.fx)&&cr(qt.fy)?(me.push(qt.fx||.001),Ie.push(qt.fy||.001)):(me.push(0),Ie.push(0))}),Ze=ud([V,d.degrees,q,me]),it=ud([$,ve,de,Ie]),ct=d.workerEnabled,st=ct?Us.create({canvas:s,engineOptions:{supportCompute:!0}}):Us.create({engineOptions:{supportCompute:!0}}),jt=d.onLayoutEnd,gt=[],G.forEach(function(qt){gt.push(qt)}),Pt=0;Pt<4;Pt++)gt.push(0);return Rt=st.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([I,1,1]).setBinding({u_Data:G,u_damping:d.damping,u_maxSpeed:d.maxSpeed,u_minMovement:d.minMovement,u_coulombDisScale:d.coulombDisScale,u_factor:d.factor,u_NodeAttributeArray1:Ze,u_NodeAttributeArray2:it,MAX_EDGE_PER_VERTEX:F,VERTEX_COUNT:I,u_AveMovement:gt,u_interval:d.interval}),Zt=st.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:G,VERTEX_COUNT:I,u_AveMovement:[0,0,0,0]}),Ct=function(){return qu(Vt,void 0,void 0,regeneratorRuntime.mark(function qt(){var $t,Gt,lr;return regeneratorRuntime.wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:$t=0;case 1:if(!($t<T)){Br.next=12;break}return Br.next=4,Rt.execute();case 4:return Zt.setBinding({u_Data:Rt}),Br.next=7,Zt.execute();case 7:Gt=Math.max(.02,d.interval-.002*$t),Rt.setBinding({u_interval:Gt,u_AveMovement:Zt});case 9:$t++,Br.next=1;break;case 12:return Br.next=14,Rt.getOutput();case 14:lr=Br.sent,s?u.postMessage({type:Kc,vertexEdgeData:lr}):v.forEach(function(wn,Sr){var jr=lr[4*Sr],_r=lr[4*Sr+1];wn.x=jr,wn.y=_r}),jt&&jt();case 17:case"end":return Br.stop()}},qt)}))},Dt.next=35,Ct();case 35:case"end":return Dt.stop()}},l,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&dd(t.prototype,e),r&&dd(t,r),a}(Xi);function gd(n){return(gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function vd(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function yd(n,t){return(yd=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function ay(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Ku(n);if(t){var i=Ku(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return sy(this,e)}}function sy(n,t){return!t||gd(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Ku(n){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var uy=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&yd(s,u)})(a,n);var t,e,r,i=ay(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.maxIteration=100,u.gravity=10,u.comboGravity=10,u.linkDistance=10,u.alpha=1,u.alphaMin=.001,u.alphaDecay=1-Math.pow(u.alphaMin,1/300),u.alphaTarget=0,u.velocityDecay=.6,u.edgeStrength=.6,u.nodeStrength=30,u.preventOverlap=!1,u.preventNodeOverlap=!1,u.preventComboOverlap=!1,u.collideStrength=void 0,u.nodeCollideStrength=.5,u.comboCollideStrength=.5,u.comboSpacing=20,u.comboPadding=10,u.optimizeRangeFactor=1,u.onTick=function(){},u.onLayoutEnd=function(){},u.depthAttractiveForceScale=1,u.depthRepulsiveForceScale=2,u.nodes=[],u.edges=[],u.combos=[],u.comboTrees=[],u.width=300,u.height=300,u.bias=[],u.nodeMap={},u.oriComboMap={},u.indexMap={},u.comboMap={},u.previousLayouted=!1,u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var s=this.nodes,u=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},s&&s.length!==0){if(s.length===1)return s[0].x=u[0],s[0].y=u[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var s=this,u=s.nodes,l=s.previousLayouted?s.maxIteration/5:s.maxIteration;s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight);var d=s.center,v=s.velocityDecay,k=s.comboMap;s.previousLayouted||s.initPos(k);for(var T=function(G){var V=[];u.forEach(function(q,$){V[$]={x:0,y:0}}),s.applyCalculate(V),s.applyComboCenterForce(V),u.forEach(function(q,$){cr(q.x)&&cr(q.y)&&(q.x+=V[$].x*v,q.y+=V[$].y*v)}),s.alpha+=(s.alphaTarget-s.alpha)*s.alphaDecay,s.onTick()},I=0;I<l;I++)T();var j=[0,0];u.forEach(function(G){cr(G.x)&&cr(G.y)&&(j[0]+=G.x,j[1]+=G.y)}),j[0]/=u.length,j[1]/=u.length;var F=[d[0]-j[0],d[1]-j[1]];u.forEach(function(G,V){cr(G.x)&&cr(G.y)&&(G.x+=F[0],G.y+=F[1])}),s.combos.forEach(function(G){var V=k[G.id];V&&V.empty&&(G.x=V.cx||G.x,G.y=V.cy||G.y)}),s.previousLayouted=!0}},{key:"initVals",value:function(){var s=this.edges,u=this.nodes,l=this.combos,d={},v={},k={};u.forEach(function(qt,$t){v[qt.id]=qt,k[qt.id]=$t}),this.nodeMap=v,this.indexMap=k;var T={};l.forEach(function(qt){T[qt.id]=qt}),this.oriComboMap=T,this.comboMap=this.getComboMap();var I=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||I,this.preventNodeOverlap=this.preventNodeOverlap||I;var j=this.collideStrength;j&&(this.comboCollideStrength=j,this.nodeCollideStrength=j),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var F=0;F<s.length;++F){var G=fn(s[F],"source"),V=fn(s[F],"target");d[G]?d[G]++:d[G]=1,d[V]?d[V]++:d[V]=1}for(var q=[],$=0;$<s.length;++$){var ve=fn(s[$],"source"),de=fn(s[$],"target");q[$]=d[ve]/(d[ve]+d[de])}this.bias=q;var me,Ie,Ee=this.nodeSize,Pe=this.nodeSpacing;if(Ie=cr(Pe)?function(){return Pe}:Yo(Pe)?Pe:function(){return 0},this.nodeSpacing=Ie,Ee)if(Yo(Ee))me=function(qt){return Ee(qt)};else if(ji(Ee)){var Ze=(Ee[0]>Ee[1]?Ee[0]:Ee[1])/2;me=function(qt){return Ze}}else{var it=Ee/2;me=function(qt){return it}}else me=function(qt){return qt.size?ji(qt.size)?(qt.size[0]>qt.size[1]?qt.size[0]:qt.size[1])/2:Co(qt.size)?(qt.size.width>qt.size.height?qt.size.width:qt.size.height)/2:qt.size/2:10};this.nodeSize=me;var ct,st=this.comboSpacing;ct=cr(st)?function(){return st}:Yo(st)?st:function(){return 0},this.comboSpacing=ct;var jt,gt=this.comboPadding;jt=cr(gt)?function(){return gt}:ji(gt)?function(){return Math.max.apply(null,gt)}:Yo(gt)?gt:function(){return 0},this.comboPadding=jt;var Pt,Rt=this.linkDistance;Rt||(Rt=10),Pt=cr(Rt)?function(qt){return Rt}:Rt,this.linkDistance=Pt;var Zt,Ct=this.edgeStrength;Ct||(Ct=1),Zt=cr(Ct)?function(qt){return Ct}:Ct,this.edgeStrength=Zt;var Vt,Dt=this.nodeStrength;Dt||(Dt=30),Vt=cr(Dt)?function(qt){return Dt}:Dt,this.nodeStrength=Vt}},{key:"initPos",value:function(s){this.nodes.forEach(function(u,l){var d=u.comboId,v=s[d];d&&v?(u.x=v.cx+100/(l+1),u.y=v.cy+100/(l+1)):(u.x=100/(l+1),u.y=100/(l+1))})}},{key:"getComboMap",value:function(){var s=this,u=s.nodeMap,l=s.indexMap,d=s.comboTrees,v=s.oriComboMap,k={};return(d||[]).forEach(function(T){var I=[];bs(T,function(j){if(j.itemType==="node"||!v[j.id])return!0;if(k[j.id]===void 0){var F={id:j.id,name:j.id,cx:0,cy:0,count:0,depth:s.oriComboMap[j.id].depth||0,children:[]};k[j.id]=F}var G=j.children;G&&G.forEach(function(me){if(!k[me.id]&&!u[me.id])return!0;I.push(me)});var V=k[j.id];if(V.cx=0,V.cy=0,I.length===0){V.empty=!0;var q=v[j.id],$=Object.keys(u).length,ve="".concat(j.id,"-visual-child-").concat($),de={id:ve,x:q.x,y:q.y,depth:V.depth+1,itemType:"node"};s.nodes.push(de),u[ve]=de,l[ve]=$,V.cx=q.x,V.cy=q.y,I.push(de)}return I.forEach(function(me){if(V.count++,me.itemType!=="node"){var Ie=k[me.id];return cr(Ie.cx)&&(V.cx+=Ie.cx),void(cr(Ie.cy)&&(V.cy+=Ie.cy))}var Ee=u[me.id];Ee&&(cr(Ee.x)&&(V.cx+=Ee.x),cr(Ee.y)&&(V.cy+=Ee.y))}),V.cx/=V.count,V.cy/=V.count,V.children=I,!0})}),k}},{key:"applyComboCenterForce",value:function(s){var u=this.gravity,l=this.comboGravity||u,d=this.alpha,v=this.comboTrees,k=this.indexMap,T=this.nodeMap,I=this.comboMap;(v||[]).forEach(function(j){bs(j,function(F){if(F.itemType==="node"||!I[F.id])return!0;var G=I[F.id],V=(G.depth+1)/10*.5,q=G.cx,$=G.cy;return G.cx=0,G.cy=0,G.children.forEach(function(ve){if(ve.itemType!=="node"){var de=I[ve.id];return de&&cr(de.cx)&&(G.cx+=de.cx),void(de&&cr(de.cy)&&(G.cy+=de.cy))}var me=T[ve.id],Ie=me.x-q||.005,Ee=me.y-$||.005,Pe=Math.sqrt(Ie*Ie+Ee*Ee),Ze=k[me.id],it=l*d/Pe*V;s[Ze].x-=Ie*it,s[Ze].y-=Ee*it,cr(me.x)&&(G.cx+=me.x),cr(me.y)&&(G.cy+=me.y)}),G.cx/=G.count,G.cy/=G.count,!0})})}},{key:"applyCalculate",value:function(s){var u=this.comboMap,l=this.nodes,d={};l.forEach(function(v,k){l.forEach(function(T,I){if(!(k<I)){var j=v.x-T.x||.005,F=v.y-T.y||.005,G=j*j+F*F,V=Math.sqrt(G);G<1&&(G=V),d["".concat(v.id,"-").concat(T.id)]={vx:j,vy:F,vl2:G,vl:V},d["".concat(T.id,"-").concat(v.id)]={vl2:G,vl:V,vx:-j,vy:-F}}})}),this.updateComboSizes(u),this.calRepulsive(s,d),this.calAttractive(s,d),this.preventComboOverlap&&this.comboNonOverlapping(s,u)}},{key:"updateComboSizes",value:function(s){var u=this,l=u.comboTrees,d=u.nodeMap,v=u.nodeSize,k=u.comboSpacing,T=u.comboPadding;(l||[]).forEach(function(I){var j=[];bs(I,function(F){if(F.itemType==="node")return!0;var G=s[F.id];if(!G)return!1;var V=F.children;V&&V.forEach(function(ve){(s[ve.id]||d[ve.id])&&j.push(ve)}),G.minX=1/0,G.minY=1/0,G.maxX=-1/0,G.maxY=-1/0,j.forEach(function(ve){if(ve.itemType!=="node")return!0;var de=d[ve.id];if(!de)return!0;var me=v(de),Ie=de.x-me,Ee=de.y-me,Pe=de.x+me,Ze=de.y+me;G.minX>Ie&&(G.minX=Ie),G.minY>Ee&&(G.minY=Ee),G.maxX<Pe&&(G.maxX=Pe),G.maxY<Ze&&(G.maxY=Ze)});var q=u.oriComboMap[F.id].size||10;ji(q)&&(q=q[0]);var $=Math.max(G.maxX-G.minX,G.maxY-G.minY,q);return G.r=$/2+k(G)/2+T(G),!0})})}},{key:"comboNonOverlapping",value:function(s,u){var l=this.comboTree,d=this.comboCollideStrength,v=this.indexMap,k=this.nodeMap;bs(l,function(T){if(!u[T.id]&&!k[T.id]&&T.id!=="comboTreeRoot")return!1;var I=T.children;return I&&I.length>1&&I.forEach(function(j,F){if(j.itemType==="node")return!1;var G=u[j.id];G&&I.forEach(function(V,q){if(F<=q||V.itemType==="node")return!1;var $=u[V.id];if(!$)return!1;var ve=G.cx-$.cx||.005,de=G.cy-$.cy||.005,me=ve*ve+de*de,Ie=G.r||1,Ee=$.r||1,Pe=Ie+Ee,Ze=Ee*Ee,it=Ie*Ie;if(me<Pe*Pe){var ct=j.children;if(!ct||ct.length===0)return!1;var st=V.children;if(!st||st.length===0)return!1;var jt=Math.sqrt(me),gt=(Pe-jt)/jt*d,Pt=ve*gt,Rt=de*gt,Zt=Ze/(it+Ze),Ct=1-Zt;ct.forEach(function(Vt){if(Vt.itemType!=="node")return!1;if(k[Vt.id]){var Dt=v[Vt.id];st.forEach(function(qt){if(qt.itemType!=="node"||!k[qt.id])return!1;var $t=v[qt.id];s[Dt].x+=Pt*Zt,s[Dt].y+=Rt*Zt,s[$t].x-=Pt*Ct,s[$t].y-=Rt*Ct})}})}})}),!0})}},{key:"calRepulsive",value:function(s,u){var l=this,d=l.nodes,v=l.width*l.optimizeRangeFactor,k=l.nodeStrength,T=l.alpha,I=l.nodeCollideStrength,j=l.preventNodeOverlap,F=l.nodeSize,G=l.nodeSpacing,V=l.depthRepulsiveForceScale,q=l.center;d.forEach(function($,ve){if($.x&&$.y){if(q){var de=l.gravity,me=$.x-q[0]||.005,Ie=$.y-q[1]||.005,Ee=Math.sqrt(me*me+Ie*Ie);s[ve].x-=me*de*T/Ee,s[ve].y-=Ie*de*T/Ee}d.forEach(function(Pe,Ze){if(ve!==Ze&&Pe.x&&Pe.y){var it=u["".concat($.id,"-").concat(Pe.id)],ct=it.vl2,st=it.vl;if(!(st>v)){var jt=u["".concat($.id,"-").concat(Pe.id)],gt=jt.vx,Pt=jt.vy,Rt=Math.log(Math.abs(Pe.depth-$.depth)/10)+1||1;Rt=Rt<1?1:Rt,Pe.comboId!==$.comboId&&(Rt+=1);var Zt=Rt?Math.pow(V,Rt):1,Ct=k(Pe)*T/ct*Zt;if(s[ve].x+=gt*Ct,s[ve].y+=Pt*Ct,ve<Ze&&j){var Vt=F($)+G($)||1,Dt=F(Pe)+G(Pe)||1,qt=Vt+Dt;if(ct<qt*qt){var $t=(qt-st)/st*I,Gt=Dt*Dt,lr=Gt/(Vt*Vt+Gt),Br=gt*$t,wn=Pt*$t;s[ve].x+=Br*lr,s[ve].y+=wn*lr,lr=1-lr,s[Ze].x-=Br*lr,s[Ze].y-=wn*lr}}}}})}})}},{key:"calAttractive",value:function(s,u){var l=this,d=l.edges,v=l.linkDistance,k=l.alpha,T=l.edgeStrength,I=l.bias,j=l.depthAttractiveForceScale;d.forEach(function(F,G){var V=fn(F,"source"),q=fn(F,"target");if(V&&q&&V!==q){var $=l.indexMap[V],ve=l.indexMap[q],de=l.nodeMap[V],me=l.nodeMap[q];if(de&&me){var Ie=de.depth===me.depth?0:Math.log(Math.abs(de.depth-me.depth)/10);de.comboId===me.comboId&&(Ie/=2);var Ee=Ie?Math.pow(j,Ie):1;if(de.comboId!==me.comboId&&Ee===1?Ee=j/2:de.comboId===me.comboId&&(Ee=2),cr(me.x)&&cr(de.x)&&cr(me.y)&&cr(de.y)){var Pe=u["".concat(q,"-").concat(V)],Ze=Pe.vl,it=Pe.vx,ct=Pe.vy,st=(Ze-v(F))/Ze*k*T(F)*Ee,jt=it*st,gt=ct*st,Pt=I[G];s[ve].x-=jt*Pt,s[ve].y-=gt*Pt,s[$].x+=jt*(1-Pt),s[$].y+=gt*(1-Pt)}}}})}},{key:"getType",value:function(){return"comboForce"}}])&&vd(t.prototype,e),r&&vd(t,r),a}(Xi);function md(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var cy=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.id=i.id||0,this.rx=i.rx,this.ry=i.ry,this.fx=0,this.fy=0,this.mass=i.mass,this.degree=i.degree,this.g=i.g||0}var t,e,r;return t=n,(e=[{key:"distanceTo",value:function(i){var a=this.rx-i.rx,s=this.ry-i.ry;return Math.hypot(a,s)}},{key:"setPos",value:function(i,a){this.rx=i,this.ry=a}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(i){var a=i.rx-this.rx,s=i.ry-this.ry,u=Math.hypot(a,s);u=u<1e-4?1e-4:u;var l=this.g*(this.degree+1)*(i.degree+1)/u;this.fx+=l*a/u,this.fy+=l*s/u}},{key:"in",value:function(i){return i.contains(this.rx,this.ry)}},{key:"add",value:function(i){var a=this.mass+i.mass;return new n({rx:(this.rx*this.mass+i.rx*i.mass)/a,ry:(this.ry*this.mass+i.ry*i.mass)/a,mass:a,degree:this.degree+i.degree})}}])&&md(t.prototype,e),r&&md(t,r),n}();function bd(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var ly=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.xmid=i.xmid,this.ymid=i.ymid,this.length=i.length,this.massCenter=i.massCenter||[0,0],this.mass=i.mass||1}var t,e,r;return t=n,(e=[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(i,a){var s=this.length/2;return i<=this.xmid+s&&i>=this.xmid-s&&a<=this.ymid+s&&a>=this.ymid-s}},{key:"NW",value:function(){var i=new n({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2});return i}},{key:"NE",value:function(){var i=new n({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2});return i}},{key:"SW",value:function(){var i=new n({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2});return i}},{key:"SE",value:function(){var i=new n({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2});return i}}])&&bd(t.prototype,e),r&&bd(t,r),n}();function xd(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var fy=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,i!=null&&(this.quad=i)}var t,e,r;return t=n,(e=[{key:"insert",value:function(i){this.body!=null?this._isExternal()?(this.quad&&(this.NW=new n(this.quad.NW()),this.NE=new n(this.quad.NE()),this.SW=new n(this.quad.SW()),this.SE=new n(this.quad.SE())),this._putBody(this.body),this._putBody(i),this.body=this.body.add(i)):(this.body=this.body.add(i),this._putBody(i)):this.body=i}},{key:"_putBody",value:function(i){this.quad&&(i.in(this.quad.NW())&&this.NW?this.NW.insert(i):i.in(this.quad.NE())&&this.NE?this.NE.insert(i):i.in(this.quad.SW())&&this.SW?this.SW.insert(i):i.in(this.quad.SE())&&this.SE&&this.SE.insert(i))}},{key:"_isExternal",value:function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}},{key:"updateForce",value:function(i){this.body!=null&&i!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(i)<this.theta?i.addForce(this.body):(this.NW&&this.NW.updateForce(i),this.NE&&this.NE.updateForce(i),this.SW&&this.SW.updateForce(i),this.SE&&this.SE.updateForce(i)))}}])&&xd(t.prototype,e),r&&xd(t,r),n}();function wd(n){return(wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function _d(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Sd(n,t){return(Sd=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function hy(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Zu(n);if(t){var i=Zu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return dy(this,e)}}function dy(n,t){return!t||wd(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Zu(n){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var py=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Sd(s,u)})(a,n);var t,e,r,i=hy(a);function a(s){var u;return function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.width=300,u.height=300,u.nodes=[],u.edges=[],u.kr=5,u.kg=1,u.mode="normal",u.preventOverlap=!1,u.dissuadeHubs=!1,u.barnesHut=void 0,u.maxIteration=0,u.ks=.1,u.ksmax=10,u.tao=.1,u.onLayoutEnd=function(){},u.prune=void 0,u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{}}},{key:"execute",value:function(){var s=this.nodes,u=this.onLayoutEnd,l=this.prune,d=this.maxIteration;this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight);for(var v=[],k=s.length,T=0;T<k;T+=1){var I=s[T],j=10,F=10;cr(I.size)&&(j=I.size,F=I.size),ji(I.size)?(isNaN(I.size[0])||(j=I.size[0]),isNaN(I.size[1])||(F=I.size[1])):Co(I.size)&&(j=I.size.width,F=I.size.height),this.getWidth&&!isNaN(this.getWidth(I))&&(F=this.getWidth(I)),this.getHeight&&!isNaN(this.getHeight(I))&&(j=this.getHeight(I));var G=Math.max(j,F);v.push(G)}this.barnesHut===void 0&&k>250&&(this.barnesHut=!0),this.prune===void 0&&k>100&&(this.prune=!0),this.maxIteration!==0||this.prune?this.maxIteration===0&&l&&(d=100,k<=200&&k>100?d=500:k>200&&(d=950),this.maxIteration=d):(d=250,k<=200&&k>100?d=1e3:k>200&&(d=1200),this.maxIteration=d),this.kr||(this.kr=50,k>100&&k<=500?this.kr=20:k>500&&(this.kr=1)),this.kg||(this.kg=20,k>100&&k<=500?this.kg=10:k>500&&(this.kg=1)),this.nodes=this.updateNodesByForces(v),u()}},{key:"updateNodesByForces",value:function(s){for(var u=this.edges,l=this.maxIteration,d=this.nodes,v=u.filter(function(ct){return fn(ct,"source")!==fn(ct,"target")}),k=d.length,T=v.length,I=[],j={},F={},G=[],V=0;V<k;V+=1)j[d[V].id]=V,I[V]=0,(d[V].x===void 0||isNaN(d[V].x))&&(d[V].x=1e3*Math.random()),(d[V].y===void 0||isNaN(d[V].y))&&(d[V].y=1e3*Math.random()),G.push({x:d[V].x,y:d[V].y});for(var q=0;q<T;q+=1){for(var $=void 0,ve=void 0,de=0,me=0,Ie=0;Ie<k;Ie+=1){var Ee=fn(v[q],"source"),Pe=fn(v[q],"target");d[Ie].id===Ee?($=d[Ie],de=Ie):d[Ie].id===Pe&&(ve=d[Ie],me=Ie),F[q]={sourceIdx:de,targetIdx:me}}$&&(I[j[$.id]]+=1),ve&&(I[j[ve.id]]+=1)}var Ze=l;if(d=this.iterate(Ze,j,F,T,I,s),this.prune){for(var it=0;it<T;it+=1)I[F[it].sourceIdx]<=1?(d[F[it].sourceIdx].x=d[F[it].targetIdx].x,d[F[it].sourceIdx].y=d[F[it].targetIdx].y):I[F[it].targetIdx]<=1&&(d[F[it].targetIdx].x=d[F[it].sourceIdx].x,d[F[it].targetIdx].y=d[F[it].sourceIdx].y);this.prune=!1,this.barnesHut=!1,Ze=100,d=this.iterate(Ze,j,F,T,I,s)}return d}},{key:"iterate",value:function(s,u,l,d,v,k){for(var T=this.nodes,I=this.kr,j=this.preventOverlap,F=this.barnesHut,G=T.length,V=0,q=s,$=[],ve=[],de=[],me=0;me<G;me+=1)if($[2*me]=0,$[2*me+1]=0,F){var Ie={id:me,rx:T[me].x,ry:T[me].y,mass:1,g:I,degree:v[me]};de[me]=new cy(Ie)}for(;q>0;){for(var Ee=0;Ee<G;Ee+=1)ve[2*Ee]=$[2*Ee],ve[2*Ee+1]=$[2*Ee+1],$[2*Ee]=0,$[2*Ee+1]=0;$=this.getAttrForces(q,50,d,u,l,v,k,$),$=F&&(j&&q>50||!j)?this.getOptRepGraForces($,de,v):this.getRepGraForces(q,50,$,100,k,v);var Pe=this.updatePos($,ve,V,v);T=Pe.nodes,V=Pe.sg,q--,this.tick&&this.tick()}return T}},{key:"getAttrForces",value:function(s,u,l,d,v,k,T,I){for(var j=this.nodes,F=this.preventOverlap,G=this.dissuadeHubs,V=this.mode,q=this.prune,$=0;$<l;$+=1){var ve=j[v[$].sourceIdx],de=v[$].sourceIdx,me=j[v[$].targetIdx],Ie=v[$].targetIdx;if(!q||!(k[de]<=1||k[Ie]<=1)){var Ee=[me.x-ve.x,me.y-ve.y],Pe=Math.hypot(Ee[0],Ee[1]);Pe=Pe<1e-4?1e-4:Pe,Ee[0]=Ee[0]/Pe,Ee[1]=Ee[1]/Pe,F&&s<u&&(Pe=Pe-T[de]-T[Ie]);var Ze=Pe,it=Ze;V==="linlog"&&(it=Ze=Math.log(1+Pe)),G&&(Ze=Pe/k[de],it=Pe/k[Ie]),F&&s<u&&Pe<=0?(Ze=0,it=0):F&&s<u&&Pe>0&&(Ze=Pe,it=Pe),I[2*d[ve.id]]+=Ze*Ee[0],I[2*d[me.id]]-=it*Ee[0],I[2*d[ve.id]+1]+=Ze*Ee[1],I[2*d[me.id]+1]-=it*Ee[1]}}return I}},{key:"getRepGraForces",value:function(s,u,l,d,v,k){for(var T=this.nodes,I=this.preventOverlap,j=this.kr,F=this.kg,G=this.center,V=this.prune,q=T.length,$=0;$<q;$+=1){for(var ve=$+1;ve<q;ve+=1)if(!V||!(k[$]<=1||k[ve]<=1)){var de=[T[ve].x-T[$].x,T[ve].y-T[$].y],me=Math.hypot(de[0],de[1]);me=me<1e-4?1e-4:me,de[0]=de[0]/me,de[1]=de[1]/me,I&&s<u&&(me=me-v[$]-v[ve]);var Ie=j*(k[$]+1)*(k[ve]+1)/me;I&&s<u&&me<0?Ie=d*(k[$]+1)*(k[ve]+1):I&&s<u&&me===0?Ie=0:I&&s<u&&me>0&&(Ie=j*(k[$]+1)*(k[ve]+1)/me),l[2*$]-=Ie*de[0],l[2*ve]+=Ie*de[0],l[2*$+1]-=Ie*de[1],l[2*ve+1]+=Ie*de[1]}var Ee=[T[$].x-G[0],T[$].y-G[1]],Pe=Math.hypot(Ee[0],Ee[1]);Ee[0]=Ee[0]/Pe,Ee[1]=Ee[1]/Pe;var Ze=F*(k[$]+1);l[2*$]-=Ze*Ee[0],l[2*$+1]-=Ze*Ee[1]}return l}},{key:"getOptRepGraForces",value:function(s,u,l){for(var d=this.nodes,v=this.kg,k=this.center,T=this.prune,I=d.length,j=9e10,F=-9e10,G=9e10,V=-9e10,q=0;q<I;q+=1)T&&l[q]<=1||(u[q].setPos(d[q].x,d[q].y),d[q].x>=F&&(F=d[q].x),d[q].x<=j&&(j=d[q].x),d[q].y>=V&&(V=d[q].y),d[q].y<=G&&(G=d[q].y));for(var $=Math.max(F-j,V-G),ve=new ly({xmid:(F+j)/2,ymid:(V+G)/2,length:$,massCenter:k,mass:I}),de=new fy(ve),me=0;me<I;me+=1)T&&l[me]<=1||u[me].in(ve)&&de.insert(u[me]);for(var Ie=0;Ie<I;Ie+=1)if(!(T&&l[Ie]<=1)){u[Ie].resetForce(),de.updateForce(u[Ie]),s[2*Ie]-=u[Ie].fx,s[2*Ie+1]-=u[Ie].fy;var Ee=[d[Ie].x-k[0],d[Ie].y-k[1]],Pe=Math.hypot(Ee[0],Ee[1]);Pe=Pe<1e-4?1e-4:Pe,Ee[0]=Ee[0]/Pe,Ee[1]=Ee[1]/Pe;var Ze=v*(l[Ie]+1);s[2*Ie]-=Ze*Ee[0],s[2*Ie+1]-=Ze*Ee[1]}return s}},{key:"updatePos",value:function(s,u,l,d){for(var v=this.nodes,k=this.ks,T=this.tao,I=this.prune,j=this.ksmax,F=v.length,G=[],V=[],q=0,$=0,ve=0;ve<F;ve+=1)if(!(I&&d[ve]<=1)){var de=[s[2*ve]-u[2*ve],s[2*ve+1]-u[2*ve+1]],me=Math.hypot(de[0],de[1]),Ie=[s[2*ve]+u[2*ve],s[2*ve+1]+u[2*ve+1]],Ee=Math.hypot(Ie[0],Ie[1]);G[ve]=me,V[ve]=Ee/2,q+=(d[ve]+1)*G[ve],$+=(d[ve]+1)*V[ve]}var Pe=l;l=T*$/q,Pe!==0&&(l=l>1.5*Pe?1.5*Pe:l);for(var Ze=0;Ze<F;Ze+=1)if(!(I&&d[Ze]<=1)){var it=k*l/(1+l*Math.sqrt(G[Ze])),ct=Math.hypot(s[2*Ze],s[2*Ze+1]),st=j/(ct=ct<1e-4?1e-4:ct),jt=(it=it>st?st:it)*s[2*Ze],gt=it*s[2*Ze+1];v[Ze].x+=jt,v[Ze].y+=gt}return{nodes:v,sg:l}}}])&&_d(t.prototype,e),r&&_d(t,r),a}(Xi),Ws=new Proxy({},{get:function(n,t){return ug(t)},set:function(n,t,e){return Li(t,e),!0}}),gy=o(82),Xs=o.n(gy),Ed=br.traverseTree,vy=function(n,t){return n?Object(p.isNumber)(n)?function(e){return n}:n:function(e){return t||1}},yy=function(n,t){var e=[],r=[],i={},a=0;for(a=0;a<n.length;a++){var s=n[a];i[s.id]=a,e.push(s.x),e.push(s.y),e.push(0),e.push(0),r.push([])}for(a=0;a<t.length;a++){var u=t[a];r[i[u.source]].push(i[u.target]),r[i[u.target]].push(i[u.source])}var l=0;for(a=0;a<n.length;a++){var d=e.length,v=r[a],k=v.length;e[4*a+2]=d,e[4*a+3]=v.length,l=Math.max(l,v.length);for(var T=0;T<k;++T){var I=v[T];e.push(+I)}}for(;e.length%4!=0;)e.push(0);return{array:new Float32Array(e),maxEdgePerVetex:l}},my=function(n,t,e){var r=[],i=[],a={},s=0;for(s=0;s<n.length;s++){var u=n[s];a[u.id]=s,r.push(u.x),r.push(u.y),r.push(0),r.push(0),i.push([])}for(s=0;s<t.length;s++){var l=t[s];i[a[l.source]].push(a[l.target]),i[a[l.source]].push(e(l)),i[a[l.target]].push(a[l.source]),i[a[l.target]].push(e(l))}var d=0;for(s=0;s<n.length;s++){var v=r.length,k=i[s],T=k.length;r[4*s+2]=v,r[4*s+3]=T/2,d=Math.max(d,T/2);for(var I=0;I<T;++I){var j=k[I];r.push(+j)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:d}},by=function(n,t,e,r){var i=[],a=[],s={},u=0;for(u=0;u<n.length;u++){var l=n[u];s[l.id]=u,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(u=0;u<t.length;u++){var d=t[u];a[s[d.source]].push(s[d.target]),a[s[d.source]].push(e(d)),a[s[d.source]].push(r(d)),a[s[d.source]].push(0),a[s[d.target]].push(s[d.source]),a[s[d.target]].push(e(d)),a[s[d.target]].push(r(d)),a[s[d.target]].push(0)}var v=0;for(u=0;u<n.length;u++){var k=i.length,T=a[u],I=T.length;i[4*u+2]=k+1048576*I/4,i[4*u+3]=0,v=Math.max(v,I/4);for(var j=0;j<I;++j){var F=T[j];i.push(+F)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:v}},xy=function(n,t){var e=[],r=n.length,i={};return t.forEach(function(a){n.forEach(function(s,u){if(i[a[s]]===void 0&&(i[a[s]]=Object.keys(i).length),e.push(i[a[s]]),u===r-1)for(;e.length%4!=0;)e.push(0)})}),{array:new Float32Array(e),count:Object.keys(i).length}},wy=function(n){for(var t=[],e=n.length,r=n[0].length,i=function(s){n.forEach(function(u,l){if(t.push(u[s]),l===e-1)for(;t.length%4!=0;)t.push(0)})},a=0;a<r;a++)i(a);return new Float32Array(t)},_y=function(n,t){var e={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",a="y";t&&["V","TB","BT"].indexOf(t)>=0&&(a="x",i="y");var s=0;Ed(n,function(d){return s++,d.x>r.x&&(r.x=d.x),d.x<e.x&&(e.x=d.x),d.y>r.y&&(r.y=d.y),d.y<e.y&&(e.y=d.y),!0});var u=2*Math.PI/s,l=r[a]-e[a];return l===0||Ed(n,function(d){var v=(d[a]-e[a])/l*(2*Math.PI-u)+u,k=Math.abs(i==="x"?d.x-n.x:d.y-n.y);return d.x=k*Math.cos(v),d.y=k*Math.sin(v),!0}),n},Od=function n(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){var e=(t=t||{}).parent!==void 0?t.parent:document.body,r=t.id!==void 0?t.id:"oldie",i=n().getWebGLErrorMessage();i.id=r,e.appendChild(i)}}},No=Object(m.__assign)(Object(m.__assign)(Object(m.__assign)(Object(m.__assign)({},br),g),h),y),Sy=No.radialLayout,Md=function(){function n(t){this.type=t.type,this.radial=t.radial,this.config=t}return n.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(r){var i=Xs.a[e.type](r,e.config);return Sy(i),i}:this.layoutMethod=function(r){return Xs.a[e.type](r,e.config)}},n.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},n.prototype.layout=function(t){return this.init(t),this.execute()},n}();Li("grid",fg),Li("random",pg),Li("force",Lg),Li("circular",Wg),Li("dagre",qg),Li("radial",Ev),Li("concentric",kv),Li("mds",Tv),Li("fruchterman",Pv),Li("fruchterman-gpu",ry),Li("gForce",yg),Li("gForce-gpu",oy),Li("comboForce",uy),Li("forceAtlas2",py);var kd=function(n,t){t.isCustomLayout=!0,Li(n,t)},Ey=function(n,t){var e=n.toString(),r=new Blob(["importScripts('"+t+"');("+e+")()"],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))},Oy=function(n){return n===void 0&&(n="https://unpkg.com/@antv/layout@latest/dist/layout.min.js"),new Ey(function(){var t="LAYOUT_RUN",e="LAYOUT_END",r="LAYOUT_ERROR",i="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(a){(function(s){var u=s.data.type;return u===t||u===i})(a)&&function(s){var u=this;switch(s.data.type){case t:var l,d=s.data,v=d.nodes,k=d.edges,T=d.layoutCfg,I=(q=T===void 0?{}:T).type;if(!(j=layout.getLayoutByName(I))){this.postMessage({type:r,message:"layout "+I+" not found"});break}q.onLayoutEnd=function(){u.postMessage({type:e,nodes:v}),l==null||l.destroy()},(l=new j(q)).init({nodes:v,edges:k}),l.execute();break;case i:var j,F=s.data,G=F.nodes,V=(k=F.edges,F.layoutCfg),q=V===void 0?{}:V,$=F.canvas;if(I=q.type,!(j=layout.getLayoutByName(I))){this.postMessage({type:r,message:"layout "+I+" not found"});break}if(I.split("-")[1]!=="gpu"){this.postMessage({type:r,message:"layout "+I+" does not support GPU"});break}var ve=new j(q);ve.init({nodes:G,edges:k}),ve.executeWithWorker($,this)}}(a)}},n)},My="LAYOUT_RUN",ky="LAYOUT_END",Ay="LAYOUT_ERROR",Cy="LAYOUT_TICK",Ty="GPU_LAYOUT_RUN",Iy="GPU_LAYOUT_END";function Ad(n){return(Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var jy=function(n){return setTimeout(n,16)},Py=function(n){return clearTimeout(n)},Cd=function(n){return(typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||jy)(n)},Td=function(n){return(typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Py)(n)},Id=["fruchterman","gForce"],Ny=["force","grid","circular"],Dy=function(n){function t(e){var r=n.call(this,e)||this;return r.graph=e,r.layoutCfg=e.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return Object(m.__extends)(t,n),t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker||(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=Oy(this.layoutCfg.workerScriptURL)),this.worker},t.prototype.stopWorker=function(){var e=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,e.requestId&&(Td(e.requestId),e.requestId=null),e.requestId2&&(Td(e.requestId2),e.requestId2=null))},t.prototype.execLayoutMethod=function(e,r){var i=this;return new Promise(function(a,s){return Object(m.__awaiter)(i,void 0,void 0,function(){var u,l,d,v,k,T,I;return Object(m.__generator)(this,function(j){switch(j.label){case 0:u=this.graph,l=e.type,e.onLayoutEnd=function(){u.emit("aftersublayout",{type:l}),a()},l&&this.isGPU&&(this.hasGPUVersion(l)?l+="-gpu":console.warn("The '"+l+"' layout does not support GPU calculation for now, it will run in CPU.")),l==="force"||l==="g6force"||l==="gForce"?(d=e.onTick,T=function(){d&&d(),u.refreshPositions()},e.tick=T):e.type==="comboForce"&&(e.comboTrees=u.get("comboTrees"));try{v=new Ws[l](e)}catch(F){console.warn("The layout method: '"+l+"' does not exist! Please specify it first."),s()}return v.enableTick&&(k=e.onTick,T=function(){k&&k(),u.refreshPositions()},v.tick=T),function(F,G){var V;!(!((V=F==null?void 0:F.nodes)===null||V===void 0)&&V.length)||F.nodes.forEach(function(q){q.layoutOrder=G})}(I=this.filterLayoutData(this.data,e),r),v.init(I),u.emit("beforesublayout",{type:l}),[4,v.execute()];case 1:return j.sent(),v.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),this.layoutMethods[r]=v,[2]}})})})},t.prototype.updateLayoutMethod=function(e,r){var i=this;return new Promise(function(a,s){return Object(m.__awaiter)(i,void 0,void 0,function(){var u,l,d;return Object(m.__generator)(this,function(v){switch(v.label){case 0:return u=this.graph,l=r==null?void 0:r.type,r.onLayoutEnd=function(){u.emit("aftersublayout",{type:l}),a()},d=this.filterLayoutData(this.data,r),e.init(d),e.updateCfg(r),u.emit("beforesublayout",{type:l}),[4,e.execute()];case 1:return v.sent(),e.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},t.prototype.layout=function(e){var r=this,i=this.graph;this.data=this.setDataFromGraph();var a=this.data,s=a.nodes,u=a.hiddenNodes;if(!s)return!1;var l=i.get("width"),d=i.get("height"),v={};Object.assign(v,{width:l,height:d,center:[l/2,d/2]},this.layoutCfg),this.layoutCfg=v,this.destoryLayoutMethods(),i.emit("beforelayout"),this.initPositions(v.center,s),this.initPositions(v.center,u);var k=v.type;k&&k.split("-")[1]==="gpu"&&(k=k.split("-")[0],v.gpuEnabled=!0);var T=!1;v.gpuEnabled&&(T=!0,Od().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),T=!1)),this.isGPU=T;var I=v.onLayoutEnd,j=v.layoutEndFormatted,F=v.adjust;if(j||(v.layoutEndFormatted=!0,v.onAllLayoutEnd=function(){return Object(m.__awaiter)(r,void 0,void 0,function(){return Object(m.__generator)(this,function(V){switch(V.label){case 0:return I&&I(),this.refreshLayout(),F&&v.pipes?[4,this.adjustPipesBox(this.data,F)]:[3,2];case 1:V.sent(),this.refreshLayout(),V.label=2;case 2:return i.emit("afterlayout"),[2]}})})}),this.stopWorker(),v.workerEnabled&&this.layoutWithWorker(this.data))return!0;var G=Promise.resolve();return v.type?G=G.then(function(){return Object(m.__awaiter)(r,void 0,void 0,function(){return Object(m.__generator)(this,function(V){switch(V.label){case 0:return[4,this.execLayoutMethod(v,0)];case 1:return[2,V.sent()]}})})}):v.pipes&&v.pipes.forEach(function(V,q){G=G.then(function(){return Object(m.__awaiter)(r,void 0,void 0,function(){return Object(m.__generator)(this,function($){switch($.label){case 0:return[4,this.execLayoutMethod(V,q)];case 1:return[2,$.sent()]}})})})}),G.then(function(){v.onAllLayoutEnd&&v.onAllLayoutEnd(),e&&e()}).catch(function(V){console.warn("graph layout failed,",V)}),!1},t.prototype.layoutWithWorker=function(e){var r=this,i=this.layoutCfg,a=this.graph,s=this.getWorker(),u=this.workerData;if(!s)return!1;u.requestId=null,u.requestId2=null,u.currentTick=null,u.currentTickData=null,a.emit("beforelayout");var l=Promise.resolve();if(i.type)l=l.then(function(){return r.runWebworker(s,e,i)});else if(i.pipes)for(var d=function(T){l=l.then(function(){return r.runWebworker(s,e,T)})},v=0,k=i.pipes;v<k.length;v++)d(k[v]);return l.then(function(){i.onAllLayoutEnd&&i.onAllLayoutEnd()}).catch(function(T){console.error("layout failed",T)}),!0},t.prototype.runWebworker=function(e,r,i){var a=this,s=this.isGPU,u=this.filterLayoutData(r,i),l=u.nodes,d=u.edges,v=document.createElement("canvas"),k=s&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in v,T=function(j,F){var G={};return j&&Ad(j)==="object"?(Object.keys(j).forEach(function(V){j.hasOwnProperty(V)&&F(j[V])&&(G[V]=j[V])}),G):j}(i,function(j){return typeof j!="function"});if(k){var I=v.transferControlToOffscreen();T.type=T.type+"-gpu",e.postMessage({type:Ty,nodes:l,edges:d,layoutCfg:T,canvas:I},[I])}else e.postMessage({type:My,nodes:l,edges:d,layoutCfg:T});return new Promise(function(j,F){e.onmessage=function(G){a.handleWorkerMessage(j,F,G,u,i)}})},t.prototype.handleWorkerMessage=function(e,r,i,a,s){var u=this.graph,l=this.workerData,d=i.data,v=d.type,k=function(){s.onTick&&s.onTick()};switch(v){case Cy:l.currentTick=d.currentTick,l.currentTickData=d,l.requestId||(l.requestId=Cd(function(){$u(a,d),u.refreshPositions(),k(),d.currentTick===d.totalTicks?e():l.currentTick===d.totalTicks&&(l.requestId2=Cd(function(){$u(a,l.currentTickData),u.refreshPositions(),l.requestId2=null,k(),e()})),l.requestId=null}));break;case ky:l.currentTick==null&&($u(a,d),e());break;case Iy:l.currentTick==null&&(function(T,I){for(var j=T.nodes,F=I.vertexEdgeData,G=j.length,V=0;V<G;V++){var q=j[V],$=F[4*V],ve=F[4*V+1];q.x=$,q.y=ve}}(a,d),e());break;case Ay:console.warn("Web-Worker layout error!",d.message),r();break;default:r()}},t.prototype.updateLayoutCfg=function(e){var r=this,i=this.graph,a=this.layoutMethods,s=Object(p.mix)({},this.layoutCfg,e);if(this.layoutCfg=s,a==null?void 0:a.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!e.workerEnabled||!this.layoutWithWorker(this.data)){i.emit("beforelayout");var u=Promise.resolve();a.length===1?u=u.then(function(){return Object(m.__awaiter)(r,void 0,void 0,function(){return Object(m.__generator)(this,function(l){switch(l.label){case 0:return[4,this.updateLayoutMethod(a[0],s)];case 1:return[2,l.sent()]}})})}):a==null||a.forEach(function(l,d){var v=s.pipes[d];u=u.then(function(){return Object(m.__awaiter)(r,void 0,void 0,function(){return Object(m.__generator)(this,function(k){switch(k.label){case 0:return[4,this.updateLayoutMethod(l,v)];case 1:return[2,k.sent()]}})})})}),u.then(function(){s.onAllLayoutEnd&&s.onAllLayoutEnd()}).catch(function(l){console.warn("layout failed",l)})}}else this.layout()},t.prototype.adjustPipesBox=function(e,r){var i=this;return new Promise(function(a){var s=e.nodes;s!=null&&s.length||a(),Ny.includes(r)||(console.warn("The adjust type "+r+" is not supported yet, please assign it with 'force', 'grid', or 'circular'."),a());var u={center:i.layoutCfg.center,nodeSize:function(T){return Math.max(T.height,T.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(s),d=l.groupNodes,v=l.layoutNodes,k=Object(p.clone)(v);u.onLayoutEnd=function(){v==null||v.forEach(function(T,I){var j,F,G,V=T.x-((j=k[I])===null||j===void 0?void 0:j.x),q=T.y-((F=k[I])===null||F===void 0?void 0:F.y);(G=d[I])===null||G===void 0||G.forEach(function($){$.x+=V,$.y+=q})}),a()},new Ws[r](u).layout({nodes:v})})},t.prototype.hasGPUVersion=function(e){for(var r=Id.length,i=0;i<r;i++)if(Id[i]===e)return!0;return!1},t.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t}(ur);function $u(n,t){for(var e=n.nodes,r=t.nodes,i=e.length,a=0;a<i;a++){var s=e[a];s.x=r[a].x,s.y=r[a].y}}var Qu,jd=S.transform,Ju=function(n){function t(e){var r=n.call(this,e)||this,i=r.get("defaultNode");return i||r.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",r.set("defaultNode",i)),r.destroyed=!1,r}return Object(m.__extends)(t,n),t.prototype.initLayoutController=function(){var e=new Dy(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new tg(this);this.set({eventController:e})},t.prototype.initCanvas=function(){var e=this.get("container");if(typeof e=="string"&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var r,i=e.clientWidth,a=e.clientHeight,s=this.get("width")||i,u=this.get("height")||a;if(this.get("width")||this.get("height")||(this.set("width",i),this.set("height",a)),this.get("renderer")==="svg")r=new Ao.Canvas({container:e,width:s,height:u});else{var l={container:e,width:s,height:u},d=this.get("pixelRatio");d&&(l.pixelRatio=d),r=new Xr.Canvas(l)}this.set("canvas",r)},t.prototype.initPlugins=function(){var e=this;Object(p.each)(e.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(e)})},t.prototype.downloadImageWatermark=function(e,r,i,a){return Object(m.__awaiter)(this,void 0,void 0,function(){var s,u,l;return Object(m.__generator)(this,function(d){switch(d.label){case 0:return s=e.style.backgroundImage,u=s.slice(5,s.length-2),(l=new Image).src=u,[4,new Promise(function(v){l.onload=function(){var k=r.createPattern(l,"repeat");r.rect(0,0,i,a),r.fillStyle=k,r.fill(),v("")}})];case 1:return d.sent(),[2]}})})},t.prototype.asyncToDataUrl=function(e,r,i,a,s,u){var l=this,d=document.querySelector(".g6-graph-watermarker"),v=this.get("canvas"),k=v.getRenderer(),T=u||v.get("el"),I="";e||(e="image/png"),setTimeout(function(){return Object(m.__awaiter)(l,void 0,void 0,function(){var j,F,G,V,q,$,ve,de,me,Ie;return Object(m.__generator)(this,function(Ee){switch(Ee.label){case 0:return k!=="svg"?[3,1]:(j=T.cloneNode(!0),F=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(G=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",F)).replaceChild(j,G.documentElement),V=new XMLSerializer().serializeToString(G),I="data:image/svg+xml;charset=utf8,"+encodeURIComponent(V),[3,4]);case 1:return q=void 0,$=T.getContext("2d"),ve=a||this.get("width"),de=s||this.get("height"),me=void 0,d?[4,this.downloadImageWatermark(d,$,ve,de)]:[3,3];case 2:Ee.sent(),Ee.label=3;case 3:r&&(Ie=typeof window!="undefined"?window.devicePixelRatio:1,q=$.getImageData(0,0,ve*Ie,de*Ie),me=$.globalCompositeOperation,$.globalCompositeOperation="destination-over",$.fillStyle=r,$.fillRect(0,0,ve,de)),I=T.toDataURL(e),r&&($.clearRect(0,0,ve,de),$.putImageData(q,0,0),$.globalCompositeOperation=me),Ee.label=4;case 4:return i&&i(I),[2]}})})},16)},t.prototype.toDataURL=function(e,r){var i=this.get("canvas"),a=i.getRenderer(),s=i.get("el");e||(e="image/png");var u="";if(a==="svg"){var l=s.cloneNode(!0),d=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),v=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",d);v.replaceChild(l,v.documentElement);var k=new XMLSerializer().serializeToString(v);u="data:image/svg+xml;charset=utf8,"+encodeURIComponent(k)}else{var T=void 0,I=s.getContext("2d"),j=this.get("width"),F=this.get("height"),G=void 0;if(r){var V=typeof window!="undefined"?window.devicePixelRatio:1;T=I.getImageData(0,0,j*V,F*V),G=I.globalCompositeOperation,I.globalCompositeOperation="destination-over",I.fillStyle=r,I.fillRect(0,0,j,F)}u=s.toDataURL(e),r&&(I.clearRect(0,0,j,F),I.putImageData(T,0,0),I.globalCompositeOperation=G)}return u},t.prototype.toFullDataURL=function(e,r,i){var a=this.get("group").getCanvasBBox(),s=a.height,u=a.width,l=this.get("renderer"),d=ei('<id="virtual-image"></div>'),v=i?i.backgroundColor:void 0,k=i?i.padding:void 0;k?Object(p.isNumber)(k)&&(k=[k,k,k,k]):k=[0,0,0,0];var T=s+k[0]+k[2],I=u+k[1]+k[3],j={container:d,height:T,width:I,quickHit:!0},F=l==="svg"?new Ao.Canvas(j):new Xr.Canvas(j),G=this.get("group").clone(),V=Object(p.clone)(G.getMatrix());V||(V=[1,0,0,0,1,0,0,0,1]);var q=(a.maxX+a.minX)/2,$=(a.maxY+a.minY)/2;V=jd(V,[["t",-q,-$],["t",u/2+k[3],s/2+k[0]]]),G.resetMatrix(),G.setMatrix(V),F.add(G);var ve=F.get("el"),de="";r||(r="image/png"),setTimeout(function(){if(l==="svg"){var me=ve.cloneNode(!0),Ie=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ee=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ie);Ee.replaceChild(me,Ee.documentElement);var Pe=new XMLSerializer().serializeToString(Ee);de="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Pe)}else{var Ze=void 0,it=ve.getContext("2d"),ct=void 0;if(v){var st=typeof window!="undefined"?window.devicePixelRatio:1;Ze=it.getImageData(0,0,I*st,T*st),ct=it.globalCompositeOperation,it.globalCompositeOperation="destination-over",it.fillStyle=v,it.fillRect(0,0,I,T)}de=ve.toDataURL(r),v&&(it.clearRect(0,0,I,T),it.putImageData(Ze,0,0),it.globalCompositeOperation=ct)}e&&e(de)},16)},t.prototype.downloadFullImage=function(e,r,i){var a=this,s=this.get("group").getCanvasBBox(),u=s.height,l=s.width,d=this.get("renderer"),v=ei('<id="virtual-image"></div>'),k=document.querySelector(".g6-graph-watermarker"),T=i?i.backgroundColor:void 0,I=i?i.padding:void 0;I?Object(p.isNumber)(I)&&(I=[I,I,I,I]):I=[0,0,0,0];var j=u+I[0]+I[2],F=l+I[1]+I[3];if(k){var G=this.get("graphWaterMarker").cfg||{},V=G.width,q=G.height;j=Math.ceil(j/q)*q,F=Math.ceil(F/V)*V}var $={container:v,height:j,width:F},ve=d==="svg"?new Ao.Canvas($):new Xr.Canvas($),de=this.get("group").clone(),me=Object(p.clone)(de.getMatrix());me||(me=[1,0,0,0,1,0,0,0,1]);var Ie=(s.maxX+s.minX)/2,Ee=(s.maxY+s.minY)/2;me=jd(me,[["t",-Ie,-Ee],["t",l/2+I[3],u/2+I[0]]]),de.resetMatrix(),de.setMatrix(me),ve.add(de);var Pe=ve.get("el");r||(r="image/png"),this.asyncToDataUrl(r,T,function(Ze){var it=document.createElement("a"),ct=(e||"graph")+(d==="svg"?".svg":"."+r.split("/")[1]);a.dataURLToImage(Ze,d,it,ct);var st=document.createEvent("MouseEvents");st.initEvent("click",!1,!1),it.dispatchEvent(st)},F,j,Pe)},t.prototype.downloadImage=function(e,r,i){var a=this;this.isAnimating()&&this.stopAnimate();var s=this.get("canvas").getRenderer();r||(r="image/png");var u=(e||"graph")+(s==="svg"?".svg":r.split("/")[1]),l=document.createElement("a");this.asyncToDataUrl(r,i,function(d){a.dataURLToImage(d,s,l,u);var v=document.createEvent("MouseEvents");v.initEvent("click",!1,!1),l.dispatchEvent(v)})},t.prototype.dataURLToImage=function(e,r,i,a){if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var s=e.split(","),u="";if(s&&s.length>0){var l=s[0].match(/:(.*?);/);l&&l.length>=2&&(u=l[1])}for(var d=atob(s[1]),v=d.length,k=new Uint8Array(v);v--;)k[v]=d.charCodeAt(v);var T=new Blob([k],{type:u});window.navigator.msSaveBlob?window.navigator.msSaveBlob(T,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(T)})}else i.addEventListener("click",function(){i.download=a,i.href=e})},t.prototype.addPlugin=function(e){e.destroyed||(this.get("plugins").push(e),e.initPlugin(this))},t.prototype.removePlugin=function(e){var r=this.get("plugins"),i=r.indexOf(e);i>=0&&(e.destroyPlugin(),r.splice(i,1))},t.prototype.setImageWaterMarker=function(e,r){e===void 0&&(e=Xo.waterMarkerImage);var i=this.get("container");Object(p.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),s=Object(p.deepMix)({},Xo.imageWaterMarkerConfig,r),u=s.width,l=s.height,d=s.compatible,v=s.image;if(!a){var k={container:i,width:u,height:l,capture:!1},T=this.get("pixelRatio");T&&(k.pixelRatio=T),a=new Xr.Canvas(k),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var I=a.get("context"),j=v.rotate,F=v.x,G=v.y;I.rotate(-j*Math.PI/180);var V=new Image;V.crossOrigin="anonymous",V.src=e,V.onload=function(){if(I.drawImage(V,F,G,v.width,v.height),I.rotate(j*Math.PI/180),d)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var q=document.querySelector(".g6-graph-watermarker");q||((q=document.createElement("div")).className="g6-graph-watermarker"),q.className="g6-graph-watermarker",a.destroyed||(q.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",i.appendChild(q))}}},t.prototype.setTextWaterMarker=function(e,r){var i=this.get("container");Object(p.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),s=Object(p.deepMix)({},Xo.textWaterMarkerConfig,r),u=s.width,l=s.height,d=s.compatible,v=s.text;if(!a){var k={container:i,width:u,height:l,capture:!1},T=this.get("pixelRatio");T&&(k.pixelRatio=T),a=new Xr.Canvas(k),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var I=a.get("context"),j=v.rotate,F=v.fill,G=v.fontFamily,V=v.fontSize,q=v.baseline,$=v.x,ve=v.y,de=v.lineHeight;I.rotate(-j*Math.PI/180),I.font=V+"px "+G,I.fillStyle=F,I.textBaseline=q;for(var me=e.length-1;me>=0;me--)I.fillText(e[me],$,ve+me*de);if(I.rotate(j*Math.PI/180),d)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Ie=document.querySelector(".g6-graph-watermarker");Ie||((Ie=document.createElement("div")).className="g6-graph-watermarker"),Ie.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",i.appendChild(Ie)}},t.prototype.destroy=function(){var e,r,i,a;Object(p.each)(this.get("plugins"),function(v){v.destroyPlugin()});var s=this.get("tooltips");if(s)for(var u=0;u<s.length;u++){var l=s[u];if(l){var d=l.parentElement;d&&d.removeChild(l)}}(e=this.get("eventController"))===null||e===void 0||e.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),n.prototype.destroy.call(this)},t}(tt),Ry=No.radialLayout,Ly=No.traverseTree,Pd=function(n){function t(e){var r=n.call(this,e)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return Object(m.__extends)(t,n),t.prototype.getLayout=function(){var e=this.get("layout");return e?typeof e=="function"?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction="TB"),e.radial?function(r){var i=Xs.a[e.type](r,e);return Ry(i),i}:function(r){return Xs.a[e.type](r,e)}):null},t.indexOfChild=function(e,r){var i=-1;return Object(p.each)(e,function(a,s){if(r===a.id)return i=s,!1}),i},t.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return e.animate=!0,e},t.prototype.innerAddChild=function(e,r,i){var a=this,s=e.data;s&&(s.x=e.x,s.y=e.y,s.depth=e.depth);var u=a.addItem("node",s,!1);if(r){if(u.set("parent",r),i){var l=r.get("originAttrs");if(l)u.set("originAttrs",l);else{var d=r.getModel();u.set("originAttrs",{x:d.x,y:d.y})}}var v=r.get("children");v?v.push(u):r.set("children",[u]),a.addItem("edge",{source:r.get("id"),target:u.get("id"),id:r.get("id")+":"+u.get("id")},!1)}return Object(p.each)(e.children||[],function(k){a.innerAddChild(k,u,i)}),a.emit("afteraddchild",{item:u,parent:r}),u},t.prototype.innerUpdateChild=function(e,r,i){var a=this,s=a.findById(e.id);if(s){Object(p.each)(e.children||[],function(I){a.innerUpdateChild(I,s,i)});var u,l,d=s.get("children");if(d&&d.length>0)for(var v=d.length-1;v>=0;v--){var k=d[v].getModel();t.indexOfChild(e.children||[],k.id)===-1&&(a.innerRemoveChild(k.id,{x:e.x,y:e.y},i),d.splice(v,1))}s.get("originAttrs")&&(u=s.get("originAttrs").x,l=s.get("originAttrs").y);var T=s.getModel();i&&s.set("originAttrs",{x:T.x,y:T.y}),s.set("model",e.data),u===e.x&&l===e.y||s.updatePosition({x:e.x,y:e.y})}else a.innerAddChild(e,r,i)},t.prototype.innerRemoveChild=function(e,r,i){var a=this,s=a.findById(e);if(s)if(Object(p.each)(s.get("children"),function(l){a.innerRemoveChild(l.getModel().id,r,i)}),i){var u=s.getModel();s.set("to",r),s.set("originAttrs",{x:u.x,y:u.y}),a.get("removeList").push(s)}else a.removeItem(s,!1)},t.prototype.changeData=function(e){var r=this;this.getNodes().map(function(i){return r.clearItemStates(i)}),this.getEdges().map(function(i){return r.clearItemStates(i)}),e?(r.data(e),r.render()):r.layout(this.get("fitView"))},t.prototype.changeLayout=function(e){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(e)},t.prototype.updateLayout=function(e){e?(this.set("layout",e),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},t.prototype.refreshLayout=function(e){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(e)},t.prototype.layout=function(e){var r=this.get("data"),i=this.get("layoutMethod"),a=i?i(r,this.get("layout")):r,s=this.get("animate");this.emit("beforerefreshlayout",{data:r,layoutData:a}),this.emit("beforelayout"),this.innerUpdateChild(a,void 0,s),e&&this.get("viewController").fitView(),s?this.layoutAnimate(a):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:r,layoutData:a}),this.emit("afterlayout")},t.prototype.addChild=function(e,r){this.emit("beforeaddchild",{model:e,parent:r}),Object(p.isString)(r)||(r=r.get("id"));var i=this.findDataById(r);i&&(i.children||(i.children=[]),i.children.push(e),this.changeData())},t.prototype.updateChildren=function(e,r){r&&this.findById(r)?(this.findDataById(r).children=e,this.changeData()):console.warn("Update children failed! There is no node with id '"+r+"'")},t.prototype.updateChild=function(e,r){if(r&&this.findById(r)){var i=this.findDataById(r),a=this.findById(e.id);if(i.children||(i.children=[]),a){var s=t.indexOfChild(i.children,e.id);i.children[s]=e}else i.children.push(e);this.changeData()}else this.changeData(e)},t.prototype.removeChild=function(e){var r=this.findById(e);if(r){var i=r.get("parent");if(i&&!i.destroyed){var a=this.findDataById(i.get("id")),s=a&&a.children||[],u=r.getModel(),l=t.indexOfChild(s,u.id);s.splice(l,1)}this.changeData()}},t.prototype.findDataById=function(e,r){var i=this;if(r||(r=i.get("data")),e===r.id)return r;var a=null;return Object(p.each)(r.children||[],function(s){return s.id===e?(a=s,!1):!(a=i.findDataById(e,s))&&void 0}),a},t.prototype.layoutAnimate=function(e,r){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:e}),i.getEdges().forEach(function(s){var u=s.get("model");u.sourceAnchor||(u.sourceAnchor=s.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(s){Ly(e,function(u){var l=i.findById(u.id);if(l){var d=l.get("originAttrs"),v=l.get("model");if(d||(d={x:v.x,y:v.y},l.set("originAttrs",d)),r){var k=r(l,s,d,e);l.set("model",Object.assign(v,k))}else v.x=d.x+(u.x-d.x)*s,v.y=d.y+(u.y-d.y)*s}return!0}),Object(p.each)(i.get("removeList"),function(u){var l=u.getModel(),d=u.get("originAttrs"),v=u.get("to");l.x=d.x+(v.x-d.x)*s,l.y=d.y+(v.y-d.y)*s}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){Object(p.each)(i.getNodes(),function(s){s.set("originAttrs",null)}),Object(p.each)(i.get("removeList"),function(s){i.removeItem(s)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:e})},delay:a.delay})},t.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},t.prototype.isLayoutAnimating=function(){return this.layoutAnimating},t.prototype.render=function(){var e=this.get("data");if(!e||!Object(p.isObject)(e)||!Object.keys(e).length)throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},t.prototype.save=function(){return this.get("data")},t}(Ju),lo=function(){function n(t){this._cfgs=Object(p.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return n.prototype.getDefaultCfgs=function(){return{}},n.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var r=e.getEvents(),i={};Object(p.each)(r,function(a,s){var u=Object(p.wrapBehavior)(e,a);i[s]=u,t.on(s,u)}),this._events=i,this.init()},n.prototype.getEvents=function(){return{}},n.prototype.get=function(t){return this._cfgs[t]},n.prototype.set=function(t,e){this._cfgs[t]=e},n.prototype.destroy=function(){},n.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;Object(p.each)(e,function(r,i){t.off(i,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},n}(),By=(Qu=function(n,t){return(Qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}Qu(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),Nd="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Gy=function(n){function t(e){return n.call(this,e)||this}return By(t,n),t.prototype.getDefaultCfgs=function(){return{img:Nd,follow:!0}},t.prototype.init=function(){var e=this.get("graph"),r=e.get("container"),i=e.get("canvas").get("el"),a=this.get("img")||Nd,s=ei(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),u=ei(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `+a+`;
        user-select: none
        '></div>`);this.set("container",s),this.set("gridContainer",u),this.positionInit(),s.appendChild(u),r.insertBefore(s,i)},t.prototype.positionInit=function(){var e=this.get("graph"),r=e.get("minZoom"),i=e.get("width"),a=e.get("height");xn(this.get("container"),{width:i+"px",height:a+"px"});var s=80*i/r,u=80*a/r;xn(this.get("gridContainer"),{width:s+"px",height:u+"px",left:"-"+s/2+"px",top:"-"+u/2+"px"})},t.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},t.prototype.updateGrid=function(e){var r=this.get("gridContainer"),i=e.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow");xn(r,{transform:"matrix("+i[0]+", "+i[1]+", "+i[3]+", "+i[4]+", "+(a?i[6]:"0")+", "+(a?i[7]:"0")+")"})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e=this.get("graph").get("container"),r=this.get("container");e.removeChild(r)},t}(lo),Fy=o(80),ec=o.n(Fy),zy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();typeof document!="undefined"&&ec()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Uy=function(n){function t(e){return n.call(this,e)||this}return zy(t,n),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow"}:{contextmenu:"onMenuShow"}},t.prototype.init=function(){var e=ei("<div class="+(this.get("className")||"g6-component-contextmenu")+"></div>");xn(e,{top:"0px",position:"absolute",visibility:"hidden"});var r=this.get("container");r||(r=this.get("graph").get("container")),Object(p.isString)(r)&&(r=document.getElementById(r)),r.appendChild(e),this.set("menu",e)},t.prototype.onMenuShow=function(e){var r=this;e.preventDefault(),e.stopPropagation();var i=this.get("itemTypes");if(e.item){if(e.item&&e.item.getType&&i.indexOf(e.item.getType())===-1)return void r.onMenuHide()}else if(i.indexOf("canvas")===-1)return void r.onMenuHide();if(this.get("shouldBegin")(e)){var a=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),l=s(e,u);Object(p.isString)(l)?a.innerHTML=l:a.innerHTML=l.outerHTML,this.removeMenuEventListener();var d=this.get("handleMenuClick");if(d){var v=function(me){d(me.target,e.item,u)};this.set("handleMenuClickWrapper",v),a.addEventListener("click",v)}var k=u.get("width"),T=u.get("height"),I=a.getBoundingClientRect(),j=this.get("offsetX")||0,F=this.get("offsetY")||0,G=u.getContainer().offsetTop,V=u.getContainer().offsetLeft,q=e.canvasX+V+j,$=e.canvasY+G+F;q+I.width>k&&(q=e.canvasX-I.width-j+V),$+I.height>T&&($=e.canvasY-I.height-F+G),xn(a,{top:$+"px",left:q+"px",visibility:"visible"});var ve=this.get("trigger")==="click",de=function(me){ve?ve=!1:r.onMenuHide()};document.body.addEventListener("click",de),this.set("handler",de)}},t.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),r=this.get("handler");e&&(this.get("menu").removeEventListener("click",e),this.set("handleMenuClickWrapper",null)),r&&document.body.removeEventListener("click",r)},t.prototype.onMenuHide=function(){var e=this.get("menu");e&&xn(e,{visibility:"hidden"}),this.removeMenuEventListener()},t.prototype.destroy=function(){var e=this.get("menu");if(this.removeMenuEventListener(),e){var r=this.get("container");r||(r=this.get("graph").get("container")),Object(p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}},t}(lo),Vy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dd=function(){return(Dd=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Rd=Math.max,Wy=S.transform,Xy=function(n){function t(e){var r=n.call(this,e)||this;return r.handleUpdateCanvas=Object(p.debounce)(function(i){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return Vy(t,n),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,r=this._cfgs,i=r.size,a=r.graph;if(!this.destroyed){var s=this.get("canvas").get("container"),u=ei(`
      <div
        class=`+r.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,d=0,v=0,k=!1,T=0,I=0,j=0,F=0,G=0,V=0;u.addEventListener("dragstart",function(q){var $,ve;if(q.dataTransfer){var de=new Image;de.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(ve=($=q.dataTransfer).setDragImage)===null||ve===void 0||ve.call($,de,0,0);try{q.dataTransfer.setData("text/html","view-port-minimap")}catch(Ie){q.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,q.target===u){var me=u.style;T=parseInt(me.left,10),I=parseInt(me.top,10),j=parseInt(me.width,10),F=parseInt(me.height,10),j>i[0]||F>i[1]||(V=a.getZoom(),G=e.get("ratio"),k=!0,d=q.clientX,v=q.clientY)}},!1),u.addEventListener(l?"dragover":"drag",function(q){if(k&&!Object(p.isNil)(q.clientX)&&!Object(p.isNil)(q.clientY)){var $=d-q.clientX,ve=v-q.clientY;(T-$<0||T-$+j>=i[0])&&($=0),(I-ve<0||I-ve+F>=i[1])&&(ve=0),xn(u,{left:(T-=$)+"px",top:(I-=ve)+"px"}),a.translate($*V/G,ve*V/G),d=q.clientX,v=q.clientY}},!1),u.addEventListener("dragend",function(){k=!1,r.refresh=!0},!1),this.set("viewport",u),s.appendChild(u)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),r=(this.get("dx"),this.get("dy"),this.get("totaldx")),i=this.get("totaldy"),a=this.get("graph"),s=this.get("size"),u=a.get("width"),l=a.get("height"),d=a.getPointByCanvas(0,0),v=a.getPointByCanvas(u,l),k=this.get("viewport");k||this.initViewport();var T=(v.x-d.x)*e,I=(v.y-d.y)*e,j=d.x*e+r,F=d.y*e+i,G=j+T,V=F+I;j<0&&(T+=j,j=0),G>s[0]&&(T-=G-s[0]),F<0&&(I+=F,F=0),V>s[1]&&(I-=V-s[1]),this.set("ratio",e),xn(k,{left:j+"px",top:F+"px",width:T+"px",height:I+"px"})}},t.prototype.updateGraphShapes=function(){var e=this._cfgs.graph,r=this.get("canvas"),i=e.get("group");if(!i.destroyed){var a=i.clone();a.resetMatrix(),r.clear(),r.add(a),e.get("renderer")==="svg"&&this.updateVisible(a)}},t.prototype.updateVisible=function(e){var r=this;if(e.isGroup()||e.get("visible")){var i=e.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}else e.hide()},t.prototype.updateKeyShapes=function(){var e=this,r=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();Object(p.each)(r.getEdges(),function(l){e.updateOneEdgeKeyShape(l,a)}),Object(p.each)(r.getNodes(),function(l){e.updateOneNodeKeyShape(l,a)});var s=r.getCombos();if(s&&s.length){var u=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){Object(p.each)(s,function(l){e.updateOneComboKeyShape(l,u)}),u.sort(),u.toBack(),e.updateCanvas()},250)}this.clearDestroyedShapes()},t.prototype.updateOneComboKeyShape=function(e,r){var i=this.get("itemMap")||{},a=i[e.get("id")],s=e.getBBox(),u=e.get("keyShape").clone(),l=u.attr(),d={x:s.centerX,y:s.centerY};a?d=Object.assign(l,d):(a=u,r.add(a));var v=a.get("type");v!=="rect"&&v!=="image"||(d.x=s.minX,d.y=s.minY),a.attr(d),e.isVisible()?a.show():a.hide(),a.exist=!0;var k=e.getModel().depth;isNaN(k)||a.set("zIndex",k),i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateOneNodeKeyShape=function(e,r){var i=this.get("itemMap")||{},a=i[e.get("id")],s=e.getBBox(),u=e.get("keyShape").clone(),l=u.attr(),d={x:s.centerX,y:s.centerY};a?d=Object.assign(l,d):(a=u,r.add(a));var v=a.get("type");v!=="rect"&&v!=="image"||(d.x=s.minX,d.y=s.minY),a.attr(d),e.isVisible()?a.show():a.hide(),a.exist=!0;var k=e.getModel().depth;isNaN(k)||a.set("zIndex",k),i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateDelegateShapes=function(){var e=this,r=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();Object(p.each)(r.getEdges(),function(l){e.updateOneEdgeKeyShape(l,a)}),Object(p.each)(r.getNodes(),function(l){e.updateOneNodeDelegateShape(l,a)});var s=r.getCombos();if(s&&s.length){var u=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){Object(p.each)(s,function(l){e.updateOneComboKeyShape(l,u)}),u.sort(),u.toBack(),e.updateCanvas()},250)}this.clearDestroyedShapes()},t.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},r=Object.keys(e);if(r&&r.length!==0)for(var i=r.length-1;i>=0;i--){var a=e[r[i]],s=a.exist;a.exist=!1,s||(a.remove(),delete e[r[i]])}},t.prototype.updateOneEdgeKeyShape=function(e,r){var i=this.get("itemMap")||{},a=i[e.get("id")];if(a){var s=e.get("keyShape").attr("path");a.attr("path",s)}else a=e.get("keyShape").clone(),r.add(a);e.isVisible()?a.show():a.hide(),a.exist=!0,i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateOneNodeDelegateShape=function(e,r){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},s=a[e.get("id")],u=e.getBBox();if(s){var l={x:u.minX,y:u.minY,width:u.width,height:u.height};s.attr(l)}else s=r.addShape("rect",{attrs:Dd({x:u.minX,y:u.minY,width:u.width,height:u.height},i),name:"minimap-node-shape"});e.isVisible()?s.show():s.hide(),s.exist=!0,a[e.get("id")]=s,this.set("itemMap",a)},t.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},t.prototype.initContainer=function(){var e=this.get("graph"),r=this.get("size"),i=this.get("className"),a=this.get("container"),s=ei("<div class='"+i+"' style='width: "+r[0]+"px; height: "+r[1]+"px; overflow: hidden'></div>");Object(p.isString)(a)&&(a=document.getElementById(a)),a?a.appendChild(s):e.get("container").appendChild(s),this.set("container",s);var u,l=ei('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(d){d.preventDefault()}),l.addEventListener("dragover",function(d){d.preventDefault()}),u=e.get("renderer")==="svg"?new Ao.Canvas({container:l,width:r[0],height:r[1]}):new Xr.Canvas({container:l,width:r[0],height:r[1]}),this.set("canvas",u),this.updateCanvas()},t.prototype.updateCanvas=function(){if(this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var r=this.get("size"),i=this.get("canvas"),a=this.get("type"),s=this.get("padding");if(!i.destroyed){switch(a){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var u=i.get("children")[0];if(u){u.resetMatrix();var l=u.getCanvasBBox(),d=e.get("canvas").getCanvasBBox(),v=e.getZoom()||1,k=d.width/v,T=d.height/v;Number.isFinite(l.width)&&(k=Rd(l.width,k),T=Rd(l.height,T)),k+=2*s,T+=2*s;var I=Math.min(r[0]/k,r[1]/T),j=[1,0,0,0,1,0,0,0,1],F=0,G=0;Number.isFinite(l.minX)&&(F=-l.minX),Number.isFinite(l.minY)&&(G=-l.minY);var V=(r[0]-(k-2*s)*I)/2,q=(r[1]-(T-2*s)*I)/2;j=Wy(j,[["t",F,G],["s",I,I],["t",V,q]]),u.setMatrix(j),this.set("ratio",I),this.set("totaldx",V+F*I),this.set("totaldy",q+G*I),this.set("dx",V),this.set("dy",q),this.updateViewport()}}}}},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)},t}(lo),Yy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function Do(n,t,e){var r=n.x-t.x,i=n.y-t.y;return!e||Math.abs(r)>e||Math.abs(i)>e?Math.sqrt(r*r+i*i):e}function Ld(n,t){var e=(t.source.y-t.target.y)/(t.source.x-t.target.x),r=(e*e*t.source.x+e*(n.y-t.source.y)+n.x)/(e*e+1);return{x:r,y:e*(r-t.source.x)+t.source.y}}var Hy=function(n){function t(e){return n.call(this,e)||this}return Yy(t,n),t.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},t.prototype.init=function(){var e=this.get("graph"),r=this.get("onTick");this.set("tick",function(){r&&r(),e.refreshPositions()})},t.prototype.bundling=function(e){var r=this;if(r.set("data",e),!r.isTicking()){var i=e.edges||[],a=e.nodes||[],s={},u=!1;if(a.forEach(function($){$.x!==null&&!$.y!==null&&$.x!==void 0&&!$.y!==void 0||(u=!0),s[$.id]=$}),u)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",s);var l=r.get("divisions"),d=r.get("divRate"),v=r.divideEdges(l);r.set("edgePoints",v);var k=r.getEdgeBundles();r.set("edgeBundles",k);for(var T=r.get("cycles"),I=r.get("iterations"),j=r.get("iterRate"),F=r.get("lambda"),G=0;G<T;G++){for(var V=function($){var ve=[];i.forEach(function(de,me){if(de.source!==de.target){var Ie=s[de.source],Ee=s[de.target];ve[me]=r.getEdgeForces({source:Ie,target:Ee},me,l,F);for(var Pe=0;Pe<l+1;Pe++)v[me][Pe].x+=ve[me][Pe].x,v[me][Pe].y+=ve[me][Pe].y}})},q=0;q<I;q++)V();F/=2,l*=d,I*=j,v=r.divideEdges(l),r.set("edgePoints",v)}i.forEach(function($,ve){$.source!==$.target&&($.type="polyline",$.controlPoints=v[ve].slice(1,v[ve].length-1))}),r.get("graph").refresh()}},t.prototype.updateBundling=function(e){var r=this,i=e.data;if(i&&r.set("data",i),r.get("ticking")&&r.set("ticking",!1),Object.keys(e).forEach(function(s){r.set(s,e[s])}),e.onTick){var a=this.get("graph");r.set("tick",function(){e.onTick(),a.refresh()})}r.bundling(i)},t.prototype.divideEdges=function(e){var r=this,i=r.get("data").edges,a=r.get("nodeIdMap"),s=r.get("edgePoints");return s&&s!==void 0||(s=[]),i.forEach(function(u,l){s[l]&&s[l]!==void 0||(s[l]=[]);var d=a[u.source],v=a[u.target];if(e===1)s[l].push({x:d.x,y:d.y}),s[l].push({x:.5*(d.x+v.x),y:.5*(d.y+v.y)}),s[l].push({x:v.x,y:v.y});else{var k=(s[l]&&s[l]!==[]?r.getEdgeLength(s[l]):Do({x:d.x,y:d.y},{x:v.x,y:v.y}))/(e+1),T=k,I=[{x:d.x,y:d.y}];s[l].forEach(function(j,F){if(F!==0){for(var G=Do(j,s[l][F-1]);G>T;){var V=T/G,q={x:s[l][F-1].x,y:s[l][F-1].y};q.x+=V*(j.x-s[l][F-1].x),q.y+=V*(j.y-s[l][F-1].y),I.push(q),G-=T,T=k}T-=G}}),I.push({x:v.x,y:v.y}),s[l]=I}}),s},t.prototype.getEdgeLength=function(e){var r=0;return e.forEach(function(i,a){a!==0&&(r+=Do(i,e[a-1]))}),r},t.prototype.getEdgeBundles=function(){var e=this,r=e.get("data").edges||[],i=e.get("bundleThreshold"),a=e.get("nodeIdMap"),s=e.get("edgeBundles");return s||(s=[]),r.forEach(function(u,l){s[l]&&s[l]!==void 0||(s[l]=[])}),r.forEach(function(u,l){var d=a[u.source],v=a[u.target];r.forEach(function(k,T){if(!(T<=l)){var I=a[k.source],j=a[k.target];e.getBundleScore({source:d,target:v},{source:I,target:j})>=i&&(s[l].push(T),s[T].push(l))}})}),s},t.prototype.getBundleScore=function(e,r){return e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,e.length=Do({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),r.length=Do({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y}),this.getAngleScore(e,r)*this.getScaleScore(e,r)*this.getPositionScore(e,r)*this.getVisibilityScore(e,r)},t.prototype.getAngleScore=function(e,r){return function(i,a){return i.x*a.x+i.y*a.y}({x:e.vx,y:e.vy},{x:r.vx,y:r.vy})/(e.length*r.length)},t.prototype.getScaleScore=function(e,r){var i=(e.length+r.length)/2;return 2/(i/Math.min(e.length,r.length)+Math.max(e.length,r.length)/i)},t.prototype.getPositionScore=function(e,r){var i=(e.length+r.length)/2;return i/(i+Do({x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},{x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2}))},t.prototype.getVisibilityScore=function(e,r){var i=this.getEdgeVisibility(e,r),a=this.getEdgeVisibility(r,e);return i<a?i:a},t.prototype.getEdgeVisibility=function(e,r){var i=Ld(r.source,e),a=Ld(r.target,e),s={x:(i.x+a.x)/2,y:(i.y+a.y)/2},u={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*Do(s,u)/Do(i,a))},t.prototype.getEdgeForces=function(e,r,i,a){for(var s=this.get("edgePoints"),u=this.get("K")/(Do(e.source,e.target)*(i+1)),l=[{x:0,y:0}],d=1;d<i;d++){var v={x:0,y:0},k=this.getSpringForce({pre:s[r][d-1],cur:s[r][d],next:s[r][d+1]},u),T=this.getElectrostaticForce(d,r);v.x=a*(k.x+T.x),v.y=a*(k.y+T.y),l.push(v)}return l.push({x:0,y:0}),l},t.prototype.getSpringForce=function(e,r){var i=e.pre.x+e.next.x-2*e.cur.x,a=e.pre.y+e.next.y-2*e.cur.y;return{x:i*=r,y:a*=r}},t.prototype.getElectrostaticForce=function(e,r){var i=this.get("eps"),a=this.get("edgeBundles"),s=this.get("edgePoints"),u=a[r],l={x:0,y:0};return u.forEach(function(d){var v={x:s[d][e].x-s[r][e].x,y:s[d][e].y-s[r][e].y};if(Math.abs(v.x)>i||Math.abs(v.y)>i){var k=1/Do(s[d][e],s[r][e]);l.x+=v.x*k,l.y+=v.y*k}}),l},t.prototype.isTicking=function(){return this.get("ticking")},t.prototype.getSimulation=function(){return this.get("forceSimulation")},t.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),n.prototype.destroy.call(this)},t}(lo),qy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bd=function(){return(Bd=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Gd={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Ky=function(n){function t(e){return n.call(this,e)||this}return qy(t,n),t.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(p.clone)(Gd),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"}}return e},t.prototype.init=function(){var e=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",e*e);var r=this.get("d");this.set("molecularParam",(r+1)*e)},t.prototype.createDelegate=function(e){var r=this,i=this,a=i.get("delegate");a&&!a.destroyed||(i.magnify(e),(a=i.get("delegate")).on("dragstart",function(s){i.set("delegateCenterDiff",{x:a.attr("x")-s.x,y:a.attr("y")-s.y})}),a.on("drag",function(s){i.magnify(s)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(s){r.scaleDByWheel(s)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(s){i.scaleRByWheel(s)}))},t.prototype.scaleRByWheel=function(e){if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var r,i=this.get("graph"),a=this.get("delegate"),s=(a?{x:a.attr("x"),y:a.attr("y")}:void 0)||i.getPointByClient(e.clientX,e.clientY);r=e.originalEvent.wheelDelta<0?.95:1/.95;var u=this.get("maxR"),l=this.get("minR"),d=this.get("r");(d>(u||i.get("height"))&&r>1||d<(l||.05*i.get("height"))&&r<1)&&(r=1),d*=r,this.set("r",d),this.set("r2",d*d);var v=this.get("d");this.set("molecularParam",(v+1)*d),this.set("delegateCenterDiff",void 0),this.magnify(e,s)}},t.prototype.scaleRByDrag=function(e){if(e){var r,i=this.get("dragPrePos"),a=this.get("graph"),s=a.getPointByClient(e.clientX,e.clientY);r=e.x-i.x<0?.95:1/.95;var u=this.get("maxR"),l=this.get("minR"),d=this.get("r");(d>(u||a.get("height"))&&r>1||d<(l||.05*a.get("height"))&&r<1)&&(r=1),d*=r,this.set("r",d),this.set("r2",d*d);var v=this.get("d");this.set("molecularParam",(v+1)*d),this.magnify(e,s),this.set("dragPrePos",{x:e.x,y:e.y})}},t.prototype.scaleDByWheel=function(e){if(e||e.originalEvent){e.preventDefault&&e.preventDefault();var r=0;r=e.originalEvent.wheelDelta<0?-.1:.1;var i=this.get("d")+r,a=this.get("maxD"),s=this.get("minD");if(i<a&&i>s){this.set("d",i);var u=this.get("r");this.set("molecularParam",(i+1)*u);var l=this.get("delegate"),d=l?{x:l.attr("x"),y:l.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(e,d)}}},t.prototype.scaleDByDrag=function(e){var r=this.get("dragPrePos"),i=e.x-r.x>0?.1:-.1,a=this.get("d")+i,s=this.get("maxD"),u=this.get("minD");if(a<s&&a>u){this.set("d",a);var l=this.get("r");this.set("molecularParam",(a+1)*l),this.magnify(e)}this.set("dragPrePos",{x:e.x,y:e.y})},t.prototype.magnify=function(e,r){this.restoreCache();var i=this.get("graph"),a=this.get("cachedMagnifiedModels"),s=this.get("cachedOriginPositions"),u=this.get("showLabel"),l=this.get("r"),d=this.get("r2"),v=this.get("d"),k=this.get("molecularParam"),T=i.getNodes(),I=T.length,j=r?{x:r.x,y:r.y}:{x:e.x,y:e.y};!this.get("dragging")||this.get("trigger")!=="mousemove"&&this.get("trigger")!=="click"||(j=this.get("cacheCenter"));var F=this.get("delegateCenterDiff");F&&(j.x+=F.x,j.y+=F.y),this.updateDelegate(j,l);for(var G=0;G<I;G++){var V=T[G].getModel(),q=V.x,$=V.y;if(!isNaN(q)&&!isNaN($)){var ve=(q-j.x)*(q-j.x)+($-j.y)*($-j.y);if(!isNaN(ve)&&ve<d&&ve!==0){var de=Math.sqrt(ve),me=k*de/(v*de+l),Ie=(q-j.x)/de,Ee=($-j.y)/de;if(V.x=Ie*me+j.x,V.y=Ee*me+j.y,s[V.id]||(s[V.id]={x:q,y:$,texts:[]}),a.push(V),u&&2*de<l)for(var Pe=T[G].getContainer().getChildren(),Ze=Pe.length,it=0;it<Ze;it++){var ct=Pe[it];ct.get("type")==="text"&&(s[V.id].texts.push({visible:ct.get("visible"),shape:ct}),ct.set("visible",!0))}}}}i.refreshPositions()},t.prototype.restoreCache=function(){for(var e=this.get("cachedMagnifiedModels"),r=this.get("cachedOriginPositions"),i=e.length,a=0;a<i;a++){var s=e[a],u=r[s.id];s.x=u.x,s.y=u.y;for(var l=u.texts.length,d=0;d<l;d++){var v=u.texts[d];v.shape.set("visible",v.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},t.prototype.updateParams=function(e){var r=e.r,i=e.d,a=e.trigger,s=e.minD,u=e.maxD,l=e.minR,d=e.maxR,v=e.scaleDBy,k=e.scaleRBy;isNaN(e.r)||(this.set("r",r),this.set("r2",r*r)),isNaN(i)||this.set("d",i),isNaN(u)||this.set("maxD",u),isNaN(s)||this.set("minD",s),isNaN(d)||this.set("maxR",d),isNaN(l)||this.set("minR",l);var T,I=this.get("d"),j=this.get("r");this.set("molecularParam",(I+1)*j),a!=="mousemove"&&a!=="click"&&a!=="drag"||this.set("trigger",a),(v==="drag"||v==="wheel"||v==="unset")&&(this.set("scaleDBy",v),this.get("delegate").remove(),this.get("delegate").destroy(),(T=this.get("dPercentText"))&&(T.remove(),T.destroy())),k!=="drag"&&k!=="wheel"&&k!=="unset"||(this.set("scaleRBy",k),this.get("delegate").remove(),this.get("delegate").destroy(),(T=this.get("dPercentText"))&&(T.remove(),T.destroy()))},t.prototype.updateDelegate=function(e,r){var i=this,a=this,s=a.get("graph"),u=a.get("delegate");if(!u||u.destroyed){var l=s.get("group"),d=a.get("delegateStyle")||Gd;u=l.addShape("circle",{attrs:Bd({r:r/1.5,x:e.x,y:e.y},d),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?u.on("mousewheel",function(I){a.scaleRByWheel(I)}):this.get("scaleRBy")==="drag"&&(u.on("dragstart",function(I){a.set("dragging",!0),a.set("cacheCenter",{x:I.x,y:I.y}),a.set("dragPrePos",{x:I.x,y:I.y})}),u.on("drag",function(I){a.scaleRByDrag(I)}),u.on("dragend",function(I){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?u.on("mousewheel",function(I){i.scaleDByWheel(I)}):this.get("scaleDBy")==="drag"&&(u.on("dragstart",function(I){a.set("dragging",!0),a.set("cacheCenter",{x:I.x,y:I.y}),a.set("dragPrePos",{x:I.x,y:I.y})}),u.on("drag",function(I){i.scaleDByDrag(I)}),u.on("dragend",function(I){a.set("dragging",!1)})))}else u.attr({x:e.x,y:e.y,r:r/1.5});if(a.get("showDPercent")){var v=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),k=a.get("dPercentText"),T=e.y+r/1.5+16;!k||k.destroyed?(k=s.get("group").addShape("text",{attrs:{text:v+"%",x:e.x,y:T,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",k)):k.attr({text:v+"%",x:e.x,y:T})}a.set("delegate",u)},t.prototype.clear=function(){var e=this.get("graph");this.restoreCache(),e.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},t.prototype.destroy=function(){this.clear()},t}(lo),Zy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();typeof document!="undefined"&&ec()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var $y=function(n){function t(e){return n.call(this,e)||this}return Zy(t,n),t.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},t.prototype.init=function(){var e=this,r=this.get("graph"),i=this.get("getContent")(r),a=i;Object(p.isString)(i)&&(a=ei(i));var s=this.get("className");a.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),Object(p.isString)(u)&&(u=document.getElementById(u)),u.appendChild(a),this.set("toolBar",a);var l=this.get("handleClick");a.addEventListener("click",function(v){var k=function(I){if(!I)return[];if(I.composedPath)return I.composedPath();for(var j=[],F=I.target;F;){if(j.push(F),F.tagName==="HTML")return j.push(document,window),j;F=F.parentElement}return j}(v).filter(function(I){return I.nodeName==="LI"});if(k.length!==0){var T=k[0].getAttribute("code");T&&(l?l(T,r):e.handleDefaultOperator(T,r))}});var d=this.get("position");d&&xn(a,{top:d.y+"px",left:d.x+"px"}),this.bindUndoRedo()},t.prototype.bindUndoRedo=function(){var e=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),s=document.querySelector('.g6-component-toolbar li[code="redo"] svg');r&&i&&a&&s&&e.on("stackchange",function(u){var l=u.undoStack,d=u.redoStack,v=l.length,k=d.length;v===1?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style")),k===0?(a.setAttribute("style","cursor: not-allowed"),s.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),s.removeAttribute("style"))})},t.prototype.undo=function(){var e=this.get("graph"),r=e.getUndoStack();if(r&&r.length!==1){var i=r.pop();if(i){var a=i.action;e.pushStack(a,Object(p.clone)(i.data),"redo");var s=i.data.before;if(a==="add"&&(s=i.data.after),!s)return;switch(a){case"visible":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){var v=e.findById(d.id);d.visible?e.showItem(v,!1):e.hideItem(v,!1)})});break;case"render":case"update":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){e.updateItem(d.id,d,!1)})});break;case"changedata":e.changeData(s,!1);break;case"delete":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){var v=d.itemType;delete d.itemType,e.addItem(v,d,!1)})});break;case"add":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){e.removeItem(d.id,!1)})});break;case"updateComboTree":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){e.updateComboTree(d.id,d.parentId,!1)})})}}}},t.prototype.redo=function(){var e=this.get("graph"),r=e.getRedoStack();if(r&&r.length!==0){var i=r.pop();if(i){var a=i.action,s=i.data.after;if(e.pushStack(a,Object(p.clone)(i.data)),a==="delete"&&(s=i.data.before),!s)return;switch(a){case"visible":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){var v=e.findById(d.id);d.visible?e.showItem(v,!1):e.hideItem(v,!1)})});break;case"render":case"update":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){e.updateItem(d.id,d,!1)})});break;case"changedata":e.changeData(s,!1);break;case"delete":s.edges&&s.edges.forEach(function(u){e.removeItem(u.id,!1)}),s.nodes&&s.nodes.forEach(function(u){e.removeItem(u.id,!1)}),s.combos&&s.combos.forEach(function(u){e.removeItem(u.id,!1)});break;case"add":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){var v=d.itemType;delete d.itemType,e.addItem(v,d,!1)})});break;case"updateComboTree":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(d){e.updateComboTree(d.id,d.parentId,!1)})})}}}},t.prototype.handleDefaultOperator=function(e,r){var i=r.getZoom();switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var a=1/(1-.05*this.get("zoomSensitivity"));if(a*i>(this.get("maxZoom")||r.get("maxZoom")))return;r.zoomTo(i*a);break;case"zoomIn":var s=1-.05*this.get("zoomSensitivity");if(s*i<(this.get("minZoom")||r.get("minZoom")))return;r.zoomTo(i*s);break;case"realZoom":r.zoomTo(1);break;case"autoZoom":r.fitView([20,20])}},t.prototype.destroy=function(){var e=this.get("toolBar");if(e){var r=this.get("container");r||(r=this.get("graph").get("container")),Object(p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}var i=this.get("handleClick");i&&e.removeEventListener("click",i)},t}(lo),Qy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();typeof document!="undefined"&&ec()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Jy=function(n){function t(e){return n.call(this,e)||this}return Qy(t,n),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+e.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+e.item.getID()+`</span>
        `},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},t.prototype.init=function(){var e=this,r=ei("<div class="+(e.get("className")||"g6-component-tooltip")+"></div>"),i=e.get("container");i||(i=e.get("graph").get("container")),Object(p.isString)(i)&&(i=document.getElementById(i)),xn(r,{position:"absolute",visibility:"hidden",display:"none"}),i.appendChild(r),e.get("trigger")!=="click"&&(r.addEventListener("mouseenter",function(a){xn(r,{visibility:"visible",display:"unset"})}),r.addEventListener("mouseleave",function(a){e.hideTooltip()})),e.set("tooltip",r)},t.prototype.onClick=function(e){var r=this.get("itemTypes");if(!e.item||!e.item.getType||r.indexOf(e.item.getType())!==-1){var i=e.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"}))}},t.prototype.onMouseEnter=function(e){var r=this.get("itemTypes");if(!e.item||!e.item.getType||r.indexOf(e.item.getType())!==-1){var i=e.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"})}},t.prototype.onMouseMove=function(e){var r=this.get("itemTypes");e.item&&e.item.getType&&r.indexOf(e.item.getType())===-1||this.currentTarget&&e.item===this.currentTarget&&this.showTooltip(e)},t.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},t.prototype.showTooltip=function(e){if(e.item){var r=this.get("itemTypes");if(!e.item.getType||r.indexOf(e.item.getType())!==-1){var i=this.get("tooltip"),a=this.get("getContent")(e);Object(p.isString)(a)?i.innerHTML=a:i.innerHTML=a.outerHTML,this.updatePosition(e)}}},t.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&xn(e,{visibility:"hidden",display:"none"})},t.prototype.updatePosition=function(e){var r=this.get("shouldBegin"),i=this.get("tooltip");if(r(e)){var a=this.get("graph"),s=a.get("width"),u=a.get("height"),l=this.get("offsetX")||0,d=this.get("offsetY")||0,v=a.getPointByClient(e.clientX,e.clientY),k=this.get("fixToNode"),T=e.item;if(T.getType&&T.getType()==="node"&&k&&Object(p.isArray)(k)&&k.length>=2){var I=T.getBBox();v={x:I.minX+I.width*k[0],y:I.minY+I.height*k[1]}}var j=a.getCanvasByPoint(v.x,v.y),F=j.x,G=j.y,V=a.getContainer(),q={x:F+V.offsetLeft+l,y:G+V.offsetTop+d};xn(i,{visibility:"visible",display:"unset"});var $=i.getBoundingClientRect();F+$.width+l>s&&(q.x-=$.width+l),G+$.height+d>u&&(q.y-=$.height+d),xn(i,{left:q.x+"px",top:q.y+"px"})}else xn(i,{visibility:"hidden",display:"none"})},t.prototype.hide=function(){this.onMouseLeave()},t.prototype.destroy=function(){var e=this.get("tooltip");if(e){var r=this.get("container");r||(r=this.get("graph").get("container")),Object(p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}},t}(lo),Fd={};function Ro(n,t){Fd[n]=t}var tc=function(){function n(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return n.prototype.translate=function(t){return t},n.prototype.change=function(t){Object(p.assign)(this.__cfg__,t),this.init()},n.prototype.clone=function(){return this.constructor(this.__cfg__)},n.prototype.getTicks=function(){var t=this;return Object(p.map)(this.ticks,function(e,r){return Object(p.isObject)(e)?e:{text:t.getText(e,r),tickValue:e,value:t.scale(e)}})},n.prototype.getText=function(t,e){var r=this.formatter,i=r?r(t,e):t;return Object(p.isNil)(i)||!Object(p.isFunction)(i.toString)?"":i.toString()},n.prototype.getConfig=function(t){return this.__cfg__[t]},n.prototype.init=function(){Object(p.assign)(this,this.__cfg__),this.setDomain(),Object(p.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},n.prototype.initCfg=function(){},n.prototype.setDomain=function(){},n.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(Object(p.isString)(t)){var r=Fd[t];if(!r)throw new Error("There is no method to to calculate ticks!");e=r(this)}else Object(p.isFunction)(t)&&(e=t(this));return e},n.prototype.rangeMin=function(){return this.range[0]},n.prototype.rangeMax=function(){return this.range[1]},n.prototype.calcPercent=function(t,e,r){return Object(p.isNumber)(t)?(t-e)/(r-e):NaN},n.prototype.calcValue=function(t,e,r){return e+t*(r-e)},n}(),os=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return Object(m.__extends)(t,n),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var r=this.translateIndexMap.get(e);return r===void 0&&(r=Object(p.isNumber)(e)?e:NaN),r},t.prototype.scale=function(e){var r=this.translate(e),i=this.calcPercent(r,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var r=this.max-this.min,i=this.calcPercent(e,this.rangeMin(),this.rangeMax()),a=Math.round(r*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},t.prototype.getText=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=e;return Object(p.isNumber)(e)&&!this.values.includes(e)&&(a=this.values[a]),n.prototype.getText.apply(this,Object(m.__spreadArrays)([a],r))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(Object(p.isNil)(this.getConfig("min"))&&(this.min=0),Object(p.isNil)(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(tc),zd=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,as="[^\\s]+",Ud=/\[([^]*?)\]/gm;function Vd(n,t){for(var e=[],r=0,i=n.length;r<i;r++)e.push(n[r].substr(0,t));return e}var Wd=function(n){return function(t,e){var r=e[n].map(function(i){return i.toLowerCase()}).indexOf(t.toLowerCase());return r>-1?r:null}};function Jo(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var r=0,i=t;r<i.length;r++){var a=i[r];for(var s in a)n[s]=a[s]}return n}var Xd=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Yd=["January","February","March","April","May","June","July","August","September","October","November","December"],em=Vd(Yd,3),rc={dayNamesShort:Vd(Xd,3),dayNames:Xd,monthNamesShort:em,monthNames:Yd,amPm:["am","pm"],DoFn:function(n){return n+["th","st","nd","rd"][n%10>3?0:(n-n%10!=10?1:0)*n%10]}},Ys=Jo({},rc),Hd=function(n){return Ys=Jo(Ys,n)},qd=function(n){return n.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},ro=function(n,t){for(t===void 0&&(t=2),n=String(n);n.length<t;)n="0"+n;return n},tm={D:function(n){return String(n.getDate())},DD:function(n){return ro(n.getDate())},Do:function(n,t){return t.DoFn(n.getDate())},d:function(n){return String(n.getDay())},dd:function(n){return ro(n.getDay())},ddd:function(n,t){return t.dayNamesShort[n.getDay()]},dddd:function(n,t){return t.dayNames[n.getDay()]},M:function(n){return String(n.getMonth()+1)},MM:function(n){return ro(n.getMonth()+1)},MMM:function(n,t){return t.monthNamesShort[n.getMonth()]},MMMM:function(n,t){return t.monthNames[n.getMonth()]},YY:function(n){return ro(String(n.getFullYear()),4).substr(2)},YYYY:function(n){return ro(n.getFullYear(),4)},h:function(n){return String(n.getHours()%12||12)},hh:function(n){return ro(n.getHours()%12||12)},H:function(n){return String(n.getHours())},HH:function(n){return ro(n.getHours())},m:function(n){return String(n.getMinutes())},mm:function(n){return ro(n.getMinutes())},s:function(n){return String(n.getSeconds())},ss:function(n){return ro(n.getSeconds())},S:function(n){return String(Math.round(n.getMilliseconds()/100))},SS:function(n){return ro(Math.round(n.getMilliseconds()/10),2)},SSS:function(n){return ro(n.getMilliseconds(),3)},a:function(n,t){return n.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(n,t){return n.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(n){var t=n.getTimezoneOffset();return(t>0?"-":"+")+ro(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(n){var t=n.getTimezoneOffset();return(t>0?"-":"+")+ro(Math.floor(Math.abs(t)/60),2)+":"+ro(Math.abs(t)%60,2)}},Kd=function(n){return+n-1},Zd=[null,"[1-9]\\d?"],$d=[null,as],Qd=["isPm",as,function(n,t){var e=n.toLowerCase();return e===t.amPm[0]?0:e===t.amPm[1]?1:null}],Jd=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(n){var t=(n+"").match(/([+-]|\d\d)/gi);if(t){var e=60*+t[1]+parseInt(t[2],10);return t[0]==="+"?e:-e}return 0}],rm={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+as,function(n){return parseInt(n,10)}],M:["month","[1-9]\\d?",Kd],MM:["month","\\d\\d",Kd],YY:["year","\\d\\d",function(n){var t=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+n>68?t-1:t)+n)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(n){return 100*+n}],SS:["millisecond","\\d\\d",function(n){return 10*+n}],SSS:["millisecond","\\d{3}"],d:Zd,dd:Zd,ddd:$d,dddd:$d,MMM:["month",as,Wd("monthNamesShort")],MMMM:["month",as,Wd("monthNames")],a:Qd,A:Qd,ZZ:Jd,Z:Jd},Hs={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ep=function(n){return Jo(Hs,n)},tp=function(n,t,e){if(t===void 0&&(t=Hs.default),e===void 0&&(e={}),typeof n=="number"&&(n=new Date(n)),Object.prototype.toString.call(n)!=="[object Date]"||isNaN(n.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=Hs[t]||t).replace(Ud,function(a,s){return r.push(s),"@@@"});var i=Jo(Jo({},Ys),e);return(t=t.replace(zd,function(a){return tm[a](n,i)})).replace(/@@@/g,function(){return r.shift()})};function rp(n,t,e){if(e===void 0&&(e={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=Hs[t]||t,n.length>1e3)return null;var r={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],s=t.replace(Ud,function($,ve){return a.push(qd(ve)),"@@@"}),u={},l={};s=qd(s).replace(zd,function($){var ve=rm[$],de=ve[0],me=ve[1],Ie=ve[3];if(u[de])throw new Error("Invalid format. "+de+" specified twice in format");return u[de]=!0,Ie&&(l[Ie]=!0),i.push(ve),"("+me+")"}),Object.keys(l).forEach(function($){if(!u[$])throw new Error("Invalid format. "+$+" is required in specified format")}),s=s.replace(/@@@/g,function(){return a.shift()});var d=n.match(new RegExp(s,"i"));if(!d)return null;for(var v=Jo(Jo({},Ys),e),k=1;k<d.length;k++){var T=i[k-1],I=T[0],j=T[2],F=j?j(d[k],v):+d[k];if(F==null)return null;r[I]=F}r.isPm===1&&r.hour!=null&&+r.hour!=12?r.hour=+r.hour+12:r.isPm===0&&+r.hour==12&&(r.hour=0);for(var G=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),V=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],q=(k=0,V.length);k<q;k++)if(u[V[k][0]]&&r[V[k][0]]!==G[V[k][1]]())return null;return r.timezoneOffset==null?G:new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond))}var np={format:tp,parse:rp,defaultI18n:rc,setGlobalDateI18n:Hd,setGlobalDateMasks:ep};function ip(n,t){return(E.format||np.format)(n,t)}function qs(n){return Object(p.isString)(n)&&(n=n.indexOf("T")>0?new Date(n).getTime():new Date(n.replace(/-/gi,"/")).getTime()),Object(p.isDate)(n)&&(n=n.getTime()),n}var ha=36e5,ea=24*ha,ss=31*ea,us=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",ha],["HH",6*ha],["HH",12*ha],["YYYY-MM-DD",ea],["YYYY-MM-DD",4*ea],["YYYY-WW",7*ea],["YYYY-MM",ss],["YYYY-MM",4*ss],["YYYY-MM",6*ss],["YYYY",380*ea]];function nm(n,t,e){var r,i=(r=function(s){return s[1]},function(s,u,l,d){for(var v=Object(p.isNil)(l)?0:l,k=Object(p.isNil)(d)?s.length:d;v<k;){var T=v+k>>>1;r(s[T])>u?k=T:v=T+1}return v})(us,(t-n)/e)-1,a=us[i];return i<0?a=us[0]:i>=us.length&&(a=Object(p.last)(us)),a}var im=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="timeCat",e}return Object(m.__extends)(t,n),t.prototype.translate=function(e){e=qs(e);var r=this.values.indexOf(e);return r===-1&&(r=Object(p.isNumber)(e)&&e<this.values.length?e:NaN),r},t.prototype.getText=function(e,r){var i=this.translate(e);if(i>-1){var a=this.values[i],s=this.formatter;return a=s?s(a,r):ip(a,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var e=this.values;Object(p.each)(e,function(r,i){e[i]=qs(r)}),e.sort(function(r,i){return r-i}),n.prototype.setDomain.call(this)},t}(os),Ks=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.isContinuous=!0,e}return Object(m.__extends)(t,n),t.prototype.scale=function(e){if(Object(p.isNil)(e))return NaN;var r=this.rangeMin(),i=this.rangeMax();return this.max===this.min?r:r+this.getScalePercent(e)*(i-r)},t.prototype.init=function(){n.prototype.init.call(this);var e=this.ticks,r=Object(p.head)(e),i=Object(p.last)(e);r<this.min&&(this.min=r),i>this.max&&(this.max=i),Object(p.isNil)(this.minLimit)||(this.min=r),Object(p.isNil)(this.maxLimit)||(this.max=i)},t.prototype.setDomain=function(){var e=Object(p.getRange)(this.values),r=e.min,i=e.max;Object(p.isNil)(this.min)&&(this.min=r),Object(p.isNil)(this.max)&&(this.max=i),this.min>this.max&&(this.min=r,this.max=i)},t.prototype.calculateTicks=function(){var e=this,r=n.prototype.calculateTicks.call(this);return this.nice||(r=Object(p.filter)(r,function(i){return i>=e.min&&i<=e.max})),r},t.prototype.getScalePercent=function(e){var r=this.max,i=this.min;return(e-i)/(r-i)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(tc),cs=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return Object(m.__extends)(t,n),t.prototype.invert=function(e){var r=this.getInvertPercent(e);return this.min+r*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(Ks);function ta(n,t){var e=Math.E;return t>=0?Math.pow(e,Math.log(t)/n):-1*Math.pow(e,Math.log(-t)/n)}function po(n,t){return n===1?1:Math.log(t)/Math.log(n)}function op(n,t,e){Object(p.isNil)(e)&&(e=Math.max.apply(null,n));var r=e;return Object(p.each)(n,function(i){i>0&&i<r&&(r=i)}),r===e&&(r=e/t),r>1&&(r=1),r}var om=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="log",e}return Object(m.__extends)(t,n),t.prototype.invert=function(e){var r,i=this.base,a=po(i,this.max),s=this.rangeMin(),u=this.rangeMax()-s,l=this.positiveMin;if(l){if(e===0)return 0;var d=1/(a-(r=po(i,l/i)))*u;if(e<d)return e/d*l}else r=po(i,this.min);var v=(e-s)/u*(a-r)+r;return Math.pow(i,v)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){n.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");e===0&&(this.positiveMin=op(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var r=this.max,i=this.min;if(r===i||e<=0)return 0;var a=this.base,s=this.positiveMin;return s&&(i=1*s/a),e<s?e/s/(po(a,r)-po(a,i)):(po(a,e)-po(a,i))/(po(a,r)-po(a,i))},t}(Ks),am=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="pow",e}return Object(m.__extends)(t,n),t.prototype.invert=function(e){var r=this.getInvertPercent(e),i=this.exponent,a=ta(i,this.max),s=ta(i,this.min),u=r*(a-s)+s,l=u>=0?1:-1;return Math.pow(u,i)*l},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var r=this.max,i=this.min;if(r===i)return 0;var a=this.exponent;return(ta(a,e)-ta(a,i))/(ta(a,r)-ta(a,i))},t}(Ks),sm=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="time",e}return Object(m.__extends)(t,n),t.prototype.getText=function(e,r){var i=this.translate(e),a=this.formatter;return a?a(i,r):ip(i,this.mask)},t.prototype.scale=function(e){var r=e;return(Object(p.isString)(r)||Object(p.isDate)(r))&&(r=this.translate(r)),n.prototype.scale.call(this,r)},t.prototype.translate=function(e){return qs(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,r=this.getConfig("min"),i=this.getConfig("max");if(Object(p.isNil)(r)&&Object(p.isNumber)(r)||(this.min=this.translate(this.min)),Object(p.isNil)(i)&&Object(p.isNumber)(i)||(this.max=this.translate(this.max)),e&&e.length){var a=[],s=1/0,u=s,l=0;Object(p.each)(e,function(d){var v=qs(d);if(isNaN(v))throw new TypeError("Invalid Time: "+d+" in time scale!");s>v?(u=s,s=v):u>v&&(u=v),l<v&&(l=v),a.push(v)}),e.length>1&&(this.minTickInterval=u-s),Object(p.isNil)(r)&&(this.min=s),Object(p.isNil)(i)&&(this.max=l)}},t}(cs),ap=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="quantize",e}return Object(m.__extends)(t,n),t.prototype.invert=function(e){var r=this.ticks,i=r.length,a=this.getInvertPercent(e),s=Math.floor(a*(i-1));if(s>=i-1)return Object(p.last)(r);if(s<0)return Object(p.head)(r);var u=r[s],l=s/(i-1);return u+(a-l)/((s+1)/(i-1)-l)*(r[s+1]-u)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var e=n.prototype.calculateTicks.call(this);return this.nice||(Object(p.last)(e)!==this.max&&e.push(this.max),Object(p.head)(e)!==this.min&&e.unshift(this.min)),e},t.prototype.getScalePercent=function(e){var r=this.ticks;if(e<Object(p.head)(r))return 0;if(e>Object(p.last)(r))return 1;var i=0;return Object(p.each)(r,function(a,s){if(!(e>=a))return!1;i=s}),i/(r.length-1)},t}(Ks),um=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="quantile",e}return Object(m.__extends)(t,n),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(ap),sp={};function Lo(n,t){if(function(e){return sp[e]}(n))throw new Error("type '"+n+"' existed.");sp[n]=t}var cm=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return Object(m.__extends)(t,n),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&Object(p.isNumber)(e)?e:this.range[0]},t.prototype.invert=function(e){var r=this.range;return e<r[0]||e>r[1]?NaN:this.values[0]},t}(tc),lm=[1,5,2,2.5,4,3],up=100*Number.EPSILON;function fm(n,t,e,r,i,a){var s=Object(p.size)(t),u=Object(p.indexOf)(t,n),l=0,d=function(v,k){return(v%k+k)%k}(r,a);return(d<up||a-d<up)&&r<=0&&i>=0&&(l=1),1-u/(s-1)-e+l}function hm(n,t,e){var r=Object(p.size)(t);return 1-Object(p.indexOf)(t,n)/(r-1)-e+1}function dm(n,t,e,r,i,a){var s=(n-1)/(a-i),u=(t-1)/(Math.max(a,r)-Math.min(e,i));return 2-Math.max(s/u,u/s)}function pm(n,t){return n>=t?2-(n-1)/(t-1):1}function gm(n,t,e,r){var i=t-n;return 1-.5*(Math.pow(t-r,2)+Math.pow(n-e,2))/Math.pow(.1*i,2)}function vm(n,t,e){var r=t-n;if(e>r){var i=(e-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function cp(n,t,e,r,i,a){if(e===void 0&&(e=5),r===void 0&&(r=!0),i===void 0&&(i=lm),a===void 0&&(a=[.25,.2,.5,.05]),Number.isNaN(n)||Number.isNaN(t)||typeof n!="number"||typeof t!="number"||!e)return{min:0,max:0,ticks:[]};if(t-n<1e-15||e===1)return{min:n,max:t,ticks:[n]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var l=0;l<i.length;l+=1){var d=i[l],v=hm(d,i,u);if(a[0]*v+a[1]+a[2]+a[3]<s.score){u=1/0;break}for(var k=2;k<1/0;){var T=pm(k,e);if(a[0]*v+a[1]+a[2]*T+a[3]<s.score)break;for(var I=(t-n)/(k+1)/u/d,j=Math.ceil(Math.log10(I));j<1/0;){var F=u*d*Math.pow(10,j),G=vm(n,t,F*(k-1));if(a[0]*v+a[1]*G+a[2]*T+a[3]<s.score)break;var V=Math.floor(t/F)*u-(k-1)*u,q=Math.ceil(n/F)*u;if(V<=q)for(var $=q-V,ve=0;ve<=$;ve+=1){var de=(V+ve)*(F/u),me=de+F*(k-1),Ie=F,Ee=fm(d,i,u,de,me,Ie),Pe=gm(n,t,de,me),Ze=dm(k,e,n,t,de,me),it=a[0]*Ee+a[1]*Pe+a[2]*Ze+1*a[3];it>s.score&&(!r||de<=n&&me>=t)&&(s.lmin=de,s.lmax=me,s.lstep=Ie,s.score=it)}j+=1}k+=1}}u+=1}var ct,st=s.lmax,jt=s.lmin,gt=s.lstep,Pt=Math.floor((st-jt)/gt)+1,Rt=new Array(Pt);for(l=0;l<Pt;l++)Rt[l]=(ct=jt+l*gt)<1e-15?ct:parseFloat(ct.toFixed(15));return{min:Math.min(n,Object(p.head)(Rt)),max:Math.max(t,Object(p.last)(Rt)),ticks:Rt}}function lp(n){var t=n.values,e=n.tickInterval,r=n.tickCount,i=t;if(Object(p.isNumber)(e))return Object(p.filter)(i,function(l,d){return d%e==0});var a=n.min,s=n.max;if(Object(p.isNil)(a)&&(a=0),Object(p.isNil)(s)&&(s=t.length-1),Object(p.isNumber)(r)&&r<s-a){var u=cp(a,s,r,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Object(p.filter)(u,function(l){return l>=a&&l<=s}).map(function(l){return t[l]})}return t.slice(a,s+1)}var fp=Math.sqrt(50),hp=Math.sqrt(10),dp=Math.sqrt(2),ym=function(){function n(){this._domain=[0,1]}return n.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},n.prototype.nice=function(t){var e,r;t===void 0&&(t=5);var i,a=this._domain.slice(),s=0,u=this._domain.length-1,l=this._domain[s],d=this._domain[u];return d<l&&(l=(e=[d,l])[0],d=e[1],s=(r=[u,s])[0],u=r[1]),(i=Zs(l,d,t))>0?i=Zs(l=Math.floor(l/i)*i,d=Math.ceil(d/i)*i,t):i<0&&(i=Zs(l=Math.ceil(l*i)/i,d=Math.floor(d*i)/i,t)),i>0?(a[s]=Math.floor(l/i)*i,a[u]=Math.ceil(d/i)*i,this.domain(a)):i<0&&(a[s]=Math.ceil(l*i)/i,a[u]=Math.floor(d*i)/i,this.domain(a)),this},n.prototype.ticks=function(t){return t===void 0&&(t=5),function(e,r,i){var a,s,u,l,d=-1;if(i=+i,(e=+e)==(r=+r)&&i>0)return[e];if((a=r<e)&&(s=e,e=r,r=s),(l=Zs(e,r,i))===0||!isFinite(l))return[];if(l>0)for(e=Math.ceil(e/l),r=Math.floor(r/l),u=new Array(s=Math.ceil(r-e+1));++d<s;)u[d]=(e+d)*l;else for(e=Math.floor(e*l),r=Math.ceil(r*l),u=new Array(s=Math.ceil(e-r+1));++d<s;)u[d]=(e-d)/l;return a&&u.reverse(),u}(this._domain[0],this._domain[this._domain.length-1],t||5)},n}();function Zs(n,t,e){var r=(t-n)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=fp?10:a>=hp?5:a>=dp?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=fp?10:a>=hp?5:a>=dp?2:1)}function pp(n,t,e){return(e==="ceil"?Math.ceil(n/t):e==="floor"?Math.floor(n/t):Math.round(n/t))*t}function nc(n,t,e){var r=pp(n,e,"floor"),i=pp(t,e,"ceil");r=Object(p.fixedBase)(r,e),i=Object(p.fixedBase)(i,e);for(var a=[],s=r;s<=i;s+=e){var u=Object(p.fixedBase)(s,e);a.push(u)}return{min:r,max:i,ticks:a}}function ic(n,t,e){var r,i=n.minLimit,a=n.maxLimit,s=n.min,u=n.max,l=n.tickCount,d=l===void 0?5:l,v=Object(p.isNil)(i)?Object(p.isNil)(t)?s:t:i,k=Object(p.isNil)(a)?Object(p.isNil)(e)?u:e:a;if(v>k&&(k=(r=[v,k])[0],v=r[1]),d<=2)return[v,k];for(var T=(k-v)/(d-1),I=[],j=0;j<d;j++)I.push(v+T*j);return I}function mm(n){return n<1e-15?n:parseFloat(n.toFixed(15))}function gp(n,t,e){if(e===void 0&&(e=5),n===t)return{max:t,min:n,ticks:[n]};var r=(t-n)/e,i=Math.pow(10,Math.floor(Math.log10(r))),a=i;2*i-r<1.5*(r-a)&&5*i-r<2.75*(r-(a=2*i))&&10*i-r<1.5*(r-(a=5*i))&&(a=10*i);for(var s=Math.ceil(t/a),u=Math.floor(n/a),l=Math.max(s*a,t),d=Math.min(u*a,n),v=Math.floor((l-d)/a)+1,k=new Array(v),T=0;T<v;T++)k[T]=mm(d+T*a);return{min:d,max:l,ticks:k}}function bm(n,t){var e=n.length*t;return t===1?n[n.length-1]:t===0?n[0]:e%1!=0?n[Math.ceil(e)-1]:n.length%2==0?(n[e-1]+n[e])/2:n[e]}function $s(n){return new Date(n).getFullYear()}function xm(n){return new Date(n,0,1).getTime()}function oc(n){return new Date(n).getMonth()}function wm(n,t){return new Date(n,t,1).getTime()}Ro("cat",lp),Ro("time-cat",function(n){var t=lp(n),e=Object(p.last)(n.values);return e!==Object(p.last)(t)&&t.push(e),t}),Ro("wilkinson-extended",function(n){var t=n.min,e=n.max,r=n.tickCount,i=n.nice,a=n.tickInterval,s=n.minLimit,u=n.maxLimit,l=cp(t,e,r,i).ticks;return Object(p.isNil)(s)&&Object(p.isNil)(u)?a?nc(t,e,a).ticks:l:ic(n,Object(p.head)(l),Object(p.last)(l))}),Ro("r-pretty",function(n){var t=n.min,e=n.max,r=n.tickCount,i=n.tickInterval,a=n.minLimit,s=n.maxLimit,u=gp(t,e,r).ticks;return Object(p.isNil)(a)&&Object(p.isNil)(s)?i?nc(t,e,i).ticks:u:ic(n,Object(p.head)(u),Object(p.last)(u))}),Ro("time",function(n){var t=n.min,e=n.max,r=n.minTickInterval,i=n.tickInterval,a=n.tickCount;if(i)a=Math.ceil((e-t)/i);else{var s=(e-t)/(i=nm(t,e,a)[1])/a;s>1&&(i*=Math.ceil(s)),r&&i<r&&(i=r)}for(var u=[],l=t;l<e+i;l+=i)u.push(l);return u}),Ro("time-pretty",function(n){var t=n.min,e=n.max,r=n.minTickInterval,i=n.tickCount,a=n.tickInterval,s=[];a||(a=(e-t)/i,r&&a<r&&(a=r));var u=$s(t);if(a>31536e6)for(var l=$s(e),d=Math.ceil(a/31536e6),v=u;v<=l+d;v+=d)s.push(xm(v));else if(a>ss){var k=Math.ceil(a/ss),T=oc(t),I=function(st,jt){var gt=$s(st),Pt=$s(jt),Rt=oc(st);return 12*(Pt-gt)+(oc(jt)-Rt)%12}(t,e);for(v=0;v<=I+k;v+=k)s.push(wm(u,v+T))}else if(a>ea){var j=($=new Date(t)).getFullYear(),F=$.getMonth(),G=$.getDate(),V=Math.ceil(a/ea),q=function(st,jt){return Math.ceil((jt-st)/ea)}(t,e);for(v=0;v<q+V;v+=V)s.push(new Date(j,F,G+v).getTime())}else if(a>ha){j=($=new Date(t)).getFullYear(),F=$.getMonth(),V=$.getDate();var $,ve=$.getHours(),de=Math.ceil(a/ha),me=function(st,jt){return Math.ceil((jt-st)/ha)}(t,e);for(v=0;v<=me+de;v+=de)s.push(new Date(j,F,V,ve+v).getTime())}else if(a>6e4){var Ie=function(st,jt){return Math.ceil((jt-st)/6e4)}(t,e),Ee=Math.ceil(a/6e4);for(v=0;v<=Ie+Ee;v+=Ee)s.push(t+6e4*v)}else{var Pe=a;Pe<1e3&&(Pe=1e3);var Ze=1e3*Math.floor(t/1e3),it=Math.ceil((e-t)/1e3),ct=Math.ceil(Pe/1e3);for(v=0;v<it+ct;v+=ct)s.push(Ze+1e3*v)}return s.length>=512&&console.warn("Notice: current ticks length("+s.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),s}),Ro("log",function(n){var t,e=n.base,r=n.tickCount,i=n.min,a=n.max,s=n.values,u=po(e,a);if(i>0)t=Math.floor(po(e,i));else{var l=op(s,e,a);t=Math.floor(po(e,l))}for(var d=u-t,v=Math.ceil(d/r),k=[],T=t;T<u+v;T+=v)k.push(Math.pow(e,T));return i<=0&&k.unshift(0),k}),Ro("pow",function(n){var t=n.exponent,e=n.tickCount,r=Math.ceil(ta(t,n.max));return gp(Math.floor(ta(t,n.min)),r,e).ticks.map(function(i){var a=i>=0?1:-1;return Math.pow(i,t)*a})}),Ro("quantile",function(n){var t=n.tickCount,e=n.values;if(!e||!e.length)return[];for(var r=e.slice().sort(function(u,l){return u-l}),i=[],a=0;a<t;a++){var s=a/(t-1);i.push(bm(r,s))}return i}),Ro("d3-linear",function(n){var t=n.min,e=n.max,r=n.tickInterval,i=n.minLimit,a=n.maxLimit,s=function(u){var l=u.min,d=u.max,v=u.nice,k=u.tickCount,T=new ym;return T.domain([l,d]),v&&T.nice(k),T.ticks(k)}(n);return Object(p.isNil)(i)&&Object(p.isNil)(a)?r?nc(t,e,r).ticks:s:ic(n,Object(p.head)(s),Object(p.last)(s))}),Lo("cat",os),Lo("category",os),Lo("identity",cm),Lo("linear",cs),Lo("log",om),Lo("pow",am),Lo("time",sm),Lo("timeCat",im),Lo("quantize",ap),Lo("quantile",um);var _m=function(n,t){for(var e=0,r=t.length,i=n.length;e<r;e++,i++)n[i]=t[e];return n};function vp(n){return function(t){return Object(p.map)(t,function(e,r){return[r===0?"M":"L",e[0],e[1]]})}(n)}function Sm(n,t,e,r){r===void 0&&(r=!0);var i=new cs({values:n}),a=new os({values:Object(p.map)(n,function(u,l){return l})}),s=Object(p.map)(n,function(u,l){return[a.scale(l)*t,e-i.scale(u)*e]});return r?function(u){if(u.length<=2)return vp(u);var l=[];Object(p.each)(u,function(I){Object(p.isEqual)(I,l.slice(l.length-2))||l.push(I[0],I[1])});var d=Ci.a(l,!1),v=Object(p.head)(u),k=v[0],T=v[1];return d.unshift(["M",k,T]),d}(s):vp(s)}function Em(n,t,e,r){r===void 0&&(r=5);for(var i=new cs({values:n}),a=new os({values:Object(p.map)(n,function(k,T){return T})}),s=Object(p.map)(n,function(k,T){return[a.scale(T)*t,e-i.scale(k)*e]}),u=[],l=0;l<s.length;l++){var d=s[l],v=Mm({x:d[0],y:d[1],y0:e,size:r});u.push.apply(u,v)}return function(k,T){T===void 0&&(T=!0);var I=[],j=k[0];I.push(["M",j.x,j.y]);for(var F=1,G=k.length;F<G;F++)I.push(["L",k[F].x,k[F].y]);return T&&(I.push(["L",j.x,j.y]),I.push(["z"])),I}(u)}function Om(n,t,e,r){var i=_m([],n),a=function(s,u){var l=new cs({values:s}),d=Math.max(0,l.min);return u-l.scale(d)*u}(r,e);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}function Mm(n){var t,e,r,i,a=n.x,s=n.y,u=n.y0,l=n.size;Object(p.isArray)(s)?(t=s[0],e=s[1]):(t=u,e=s),Object(p.isArray)(a)?(r=a[0],i=a[1]):(r=a-l/2,i=a+l/2);var d=[{x:r,y:t},{x:r,y:e}];return d.push({x:i,y:e},{x:i,y:t}),d}var Qs=function(){return(Qs=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},km={stroke:"#C5C5C5",strokeOpacity:.85},Am={fill:"#CACED4",opacity:.85},Cm=function(){function n(t){var e=t.x,r=e===void 0?0:e,i=t.y,a=i===void 0?0:i,s=t.width,u=s===void 0?200:s,l=t.height,d=l===void 0?26:l,v=t.smooth,k=v===void 0||v,T=t.isArea,I=T!==void 0&&T,j=t.data,F=j===void 0?[]:j,G=t.lineStyle,V=t.areaStyle,q=t.group,$=t.interval,ve=$===void 0?null:$;this.group=q,this.x=r,this.y=a,this.width=u,this.height=d,this.data=F,this.smooth=k,this.isArea=I,this.lineStyle=Object.assign({},km,G),this.areaStyle=Object.assign({},Am,V),this.intervalConfig=ve,this.renderLine()}return n.prototype.renderLine=function(){var t=this,e=t.x,r=t.y,i=t.width,a=t.height,s=(t.barWidth,t.data),u=t.smooth,l=t.isArea,d=t.lineStyle,v=t.areaStyle,k=this.group.addGroup({name:"trend-group"});if(s){var T=Sm(s,i,a,u);if(k.addShape("path",{attrs:Qs({path:T},d)}),l){var I=Om(T,i,a,s);k.addShape("path",{attrs:Qs({path:I},v)})}}this.intervalConfig&&k.addShape("path",{attrs:Qs({path:Em(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style)}),k.move(e,r)},n.prototype.destory=function(){this.group.destroy()},n}(),ls=function(){return(ls=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Tm={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Im={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},yp=function(){function n(t){var e=t.group,r=t.name,i=t.type,a=t.x,s=a===void 0?0:a,u=t.y,l=u===void 0?0:u,d=t.width,v=d===void 0?2:d,k=t.height,T=k===void 0?24:k,I=t.style,j=I===void 0?{}:I;this.group=e,this.name=r,this.handleType=i,this.x=s,this.y=l,this.width=v,this.height=T,i==="trend"?this.style=ls(ls({},Tm),j):i==="simple"&&(this.style=ls(ls({},Im),j)),this.renderHandle()}return n.prototype.setX=function(t){this.setXY(t,void 0)},n.prototype.setY=function(t){this.setXY(void 0,t)},n.prototype.setXY=function(t,e){Object(p.isNumber)(t)&&(this.x=t),Object(p.isNumber)(e)&&(this.y=e),this.updateXY()},n.prototype.renderHandle=function(){var t=this.width,e=this.height,r=this.style,i=this.name,a=r.fill,s=r.stroke,u=r.radius,l=r.opacity,d=r.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:a,stroke:s,radius:u,opacity:l,cursor:d},name:i+"-handler"}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:d},name:i+"-handler"}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:d},name:i+"-handler"})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:d,lineWidth:2},name:i+"-handler"})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},n.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",function(){var r=t.style.highLightFill;t.topCircle.attr("fill",r)}),this.handleGroup.on(e+"-handler:mouseleave",function(){var r=t.style.fill;t.topCircle.attr("fill",r)})},n.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",function(){var r=t.style.highLightFill;t.verticalLine.attr("fill",r),t.topCircle.attr("fill",r),t.bottomCircle.attr("fill",r)}),this.handleGroup.on(e+"-handler:mouseleave",function(){var r=t.style.fill;t.verticalLine.attr("fill",r),t.topCircle.attr("fill",r),t.bottomCircle.attr("fill",r)})},n.prototype.show=function(){this.handleGroup.show()},n.prototype.hide=function(){this.handleGroup.hide()},n.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},n}(),mp=function(){return(mp=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},jm=function(){function n(t){this.config=Object(p.deepMix)({},t),this.init()}return n.prototype.update=function(t){this.config=Object(p.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},n.prototype.init=function(){this.initElement(),this.renderMarker()},n.prototype.initElement=function(){var t=this.config,e=t.group,r=t.style,i=r.scale,a=i===void 0?1:i,s=r.offsetX,u=s===void 0?0:s,l=r.offsetY,d=l===void 0?0:l,v=this.config.x+u,k=this.config.y+d,T=e.addGroup({name:"playPauseBtn"});this.startMarkerGroup=T.addGroup({name:"playPauseBtn"}),this.circle=e.addShape("circle",{attrs:mp({x:v,y:k,r:this.config.r*a},r),name:"playPauseBtn"}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(v,k,a),fill:r.stroke||"#aaa"}}),this.pauseMarkerGroup=T.addGroup({name:"playPauseBtn"});var I=.25*this.config.r*a,j=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:v-.375*this.config.r*a,y:k-j/2,width:I,height:j,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:v+1/8*this.config.r*a,y:k-j/2,width:I,height:j,fill:r.stroke||"#aaa",lineWidth:0}})},n.prototype.updateElement=function(){var t=this.config.style,e=t.scale,r=e===void 0?1:e,i=t.offsetX,a=i===void 0?0:i,s=t.offsetY,u=s===void 0?0:s,l=this.config.x+a,d=this.config.y+u;this.circle.attr("x",l),this.circle.attr("y",d),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(l,d,r));var v=.25*this.config.r*r,k=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",l-.375*this.config.r*r),this.pauseLeftMarker.attr("y",d-k/2),this.pauseLeftMarker.attr("width",v),this.pauseLeftMarker.attr("height",k),this.pauseRightMarker.attr("x",l+1/8*this.config.r*r),this.pauseRightMarker.attr("y",d-k/2),this.pauseRightMarker.attr("width",v),this.pauseRightMarker.attr("height",k)},n.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},n.prototype.getStartMarkerPath=function(t,e,r){var i=.5*this.config.r*Math.sqrt(3)*r;return[["M",t-i/Math.sqrt(3)/2,e-i/2],["L",t+i/Math.sqrt(3),e],["L",t-i/Math.sqrt(3)/2,e+i/2]]},n}(),yi=function(){return(yi=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},fs=S.transform,Pm={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Nm={fill:"#fff"},Dm={fill:"green"},bp={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},xp={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Rm={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:bp,timeTypeControllerStyle:xp},wp=function(){function n(t){this.controllerCfg=Object(p.deepMix)({},Rm,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return n.prototype.init=function(){this.renderPlayButton()},n.prototype.getNextMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t+r,e],["L",t,e+r],["Z",t,e-r],["M",t,e],["L",t-r,e-r],["L",t-r,e+r],["Z"]]},n.prototype.getPreMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t-r,e],["L",t,e+r],["L",t,e-r],["M",t,e],["L",t+r,e-r],["L",t+r,e+r],["Z"]]},n.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,r=t.height,i=t.x,a=t.y,s=t.hideTimeTypeController,u=t.fill,l=u===void 0?"#aaa":u,d=t.stroke,v=d===void 0?"green":d,k=yi(yi({},Pm),t.playBtnStyle||{}),T=yi(yi({},Nm),t.preBtnStyle||{}),I=yi(yi({},Dm),t.nextBtnStyle||{}),j=r/2-5,F=a+10,G=this.controllerGroup.addShape("rect",{attrs:{x:i,y:F,width:e,height:r,stroke:v,fill:l},name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:F,r:j}):this.playButton=new jm({group:this.controllerGroup,x:e/2,y:F+j+5,r:j,isPlay:this.isPlay,style:k});var V=T.offsetX||0,q=T.offsetY||0,$=(T.scale||1)*j;this.controllerGroup.addShape("path",{attrs:yi({path:this.getPreMarkerPath(e/2-5*j+V,F+j+5+q,.5*$)},T),name:"preStepBtn"});var ve=I.offsetX||0,de=I.offsetY||0,me=(I.scale||1)*j;this.controllerGroup.addShape("path",{attrs:yi({path:this.getNextMarkerPath(e/2+5*j+ve,F+j+5+de,.5*me)},I),name:"nextStepBtn"}),G.toBack(),this.renderSpeedBtn(),s||this.renderToggleTime(),this.bindEvent();var Ie=this.controllerCfg.scale,Ee=Ie===void 0?1:Ie,Pe=this.controllerGroup.getCanvasBBox(),Ze=(Pe.maxX+Pe.minX)/2,it=(Pe.maxY+Pe.minY)/2,ct=fs([1,0,0,0,1,0,0,0,1],[["t",-Ze,-it],["s",Ee,Ee],["t",Ze,it]]);this.controllerGroup.setMatrix(ct)},n.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,r=t.width,i=t.hideTimeTypeController,a=yi(yi({},bp),this.controllerCfg.speedControllerStyle||{}),s=a.scroller,u=s===void 0?{}:s,l=a.text,d=l===void 0?{}:l,v=a.pointer,k=v===void 0?{}:v,T=a.scale,I=T===void 0?1:T,j=a.offsetX,F=j===void 0?0:j,G=a.offsetY,V=G===void 0?0:G,q=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=q;var $=[],ve=5;this.speedAxisY=[19,22,26,32,39];for(var de=0;de<5;de++){var me=e+this.speedAxisY[de],Ie=r-(i?50:110);q.addShape("line",{attrs:yi({x1:Ie,x2:Ie+15,y1:me,y2:me},u),speed:ve,name:"speed-rect"}),this.speedAxisY[de]=me,$.push(ve),ve-=1}this.speedText=q.addShape("text",{attrs:yi({x:r-(i?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},d)}),this.speedPoint=q.addShape("path",{attrs:yi({path:this.getPointerPath(r-(i?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},k)});var Ee=this.speedGroup.getCanvasBBox(),Pe=(Ee.maxX+Ee.minX)/2,Ze=(Ee.maxY+Ee.minY)/2,it=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];it=fs(it,[["t",-Pe,-Ze],["s",I,I],["t",Pe+F*I,Ze+V*I]]),this.speedGroup.setMatrix(it)},n.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},n.prototype.renderToggleTime=function(){var t,e=this.controllerCfg.width,r=yi(yi({},xp),this.controllerCfg.timeTypeControllerStyle||{}),i=r.scale,a=i===void 0?1:i,s=r.offsetX,u=s===void 0?0:s,l=r.offsetY,d=l===void 0?0:l,v=r.box,k=v===void 0?{}:v,T=r.check,I=T===void 0?{}:T,j=r.text,F=j===void 0?{}:j;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:yi({x:e-50,y:this.speedAxisY[0]+3.5},k),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:yi({path:[["M",e-50+3,this.speedAxisY[1]+6],["L",e-50+7,this.speedAxisY[1]+10],["L",e-50+12,this.speedAxisY[1]+4]]},I),capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:yi({text:((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:e-50+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},F)});var G=this.toggleGroup.getCanvasBBox(),V=(G.maxX+G.minX)/2,q=(G.maxY+G.minY)/2,$=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];$=fs($,[["t",-V,-q],["s",a,a],["t",V+u*a,q+d*a]]),this.toggleGroup.setMatrix($)},n.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",function(e){var r=e.target.attr("y1"),i=t.speedPoint.attr("matrix"),a=t.speedAxisY.indexOf(i[7]||0),s=t.speedAxisY.indexOf(r),u=t.speedAxisY[s]-t.speedAxisY[a];i=fs(i,[["t",0,u]]),t.speedPoint.setMatrix(i),t.currentSpeed=t.speedAxisY.length-s,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})}),this.speedGroup.on("mousewheel",function(e){e.preventDefault();var r=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=r[7],a=t.speedAxisY.indexOf(i);if(a===-1){var s=1/0;t.speedAxisY.forEach(function(l,d){var v=Math.abs(l-i);s>v&&(s=v,a=d)})}a=e.originalEvent.deltaY>0?Math.max(0,a-1):Math.min(t.speedAxisY.length-1,a+1);var u=t.speedAxisY[a]-i;r=fs(r,[["t",0,u]]),t.speedPoint.setMatrix(r),t.currentSpeed=t.speedAxisY.length-a,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(e){var r,i,a=e.target.get("isChecked");a?(t.checkedIcon.hide(),t.checkedText.attr("text",((i=t.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),t.currentType="range"):(t.checkedIcon.show(),t.checkedText.attr("text",((r=t.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),t.currentType="single"),e.target.set("isChecked",!a),t.group.emit("timebarConfigChanged",{type:t.currentType,speed:t.currentSpeed})})},n.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},n}(),Ln=function(){return(Ln=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Lm={fill:"#416180",opacity:.05},Bm={fill:"#416180",opacity:.15,radius:5},Gm={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Fm={width:2,height:24},zm={textBaseline:"middle",fill:"#000",opacity:.45},Um={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Vm={lineWidth:1,stroke:"#ccc"},Wm=function(){function n(t){var e=this;this.prevX=0,this.onMouseDown=function(Dt){return function(qt){e.currentHandler=Dt;var $t=qt.originalEvent;$t.stopPropagation(),$t.preventDefault(),e.prevX=Object(p.get)($t,"touches.0.pageX",$t.pageX);var Gt=e.canvas.get("container");Gt.addEventListener("mousemove",e.onMouseMove),Gt.addEventListener("mouseup",e.onMouseUp),Gt.addEventListener("mouseleave",e.onMouseUp),Gt.addEventListener("touchmove",e.onMouseMove),Gt.addEventListener("touchend",e.onMouseUp),Gt.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(Dt){Dt.stopPropagation(),Dt.preventDefault();var qt=Object(p.get)(Dt,"touches.0.pageX",Dt.pageX),$t=qt-e.prevX,Gt=e.adjustOffsetRange($t/e.width);e.updateStartEnd(Gt),e.updateUI(),e.prevX=qt},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var Dt=e.canvas.get("container");Dt&&(Dt.removeEventListener("mousemove",e.onMouseMove),Dt.removeEventListener("mouseup",e.onMouseUp),Dt.removeEventListener("mouseleave",e.onMouseUp),Dt.removeEventListener("touchmove",e.onMouseMove),Dt.removeEventListener("touchend",e.onMouseUp),Dt.removeEventListener("touchcancel",e.onMouseUp))};var r=t.x,i=r===void 0?0:r,a=t.y,s=a===void 0?0:a,u=t.width,l=u===void 0?100:u,d=t.height,v=t.padding,k=v===void 0?10:v,T=t.trendCfg,I=t.controllerCfg,j=I===void 0?{speed:1}:I,F=t.backgroundStyle,G=F===void 0?{}:F,V=t.foregroundStyle,q=V===void 0?{}:V,$=t.handlerStyle,ve=$===void 0?{}:$,de=t.textStyle,me=de===void 0?{}:de,Ie=t.start,Ee=Ie===void 0?0:Ie,Pe=t.end,Ze=Pe===void 0?1:Pe,it=t.minText,ct=it===void 0?"":it,st=t.maxText,jt=st===void 0?"":st,gt=t.group,Pt=t.graph,Rt=t.canvas,Zt=t.tick,Ct=Zt===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Dt){return Dt},ticks:[]}:Zt,Vt=t.type;this.graph=Pt,this.canvas=Rt,this.group=gt,this.timeBarType=Vt,this.x=i,this.y=s,this.width=l,this.height=d,this.padding=k,this.ticks=Ct.ticks,this.trendCfg=T,this.controllerCfg=j,this.currentSpeed=j.speed||1,this.tickLabelFormatter=Ct.tickLabelFormatter,Vt==="trend"?this.backgroundStyle=Ln(Ln({},Lm),G):Vt==="simple"&&(this.backgroundStyle=Ln(Ln({},Bm),G)),this.foregroundStyle=Ln(Ln({},Gm),q),this.handlerStyle=Ln(Ln({},Fm),ve),this.textStyle=Ln(Ln({},zm),me),this.tickLabelStyle=Ln(Ln({},Um),Ct.tickLabelStyle),this.tickLineStyle=Ln(Ln({},Vm),Ct.tickLineStyle),this.currentMode="range",this.start=Ee,this.end=Ze,this.minText=ct,this.maxText=jt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return n.prototype.update=function(t){var e=t.x,r=t.y,i=t.width,a=t.height,s=t.minText,u=t.maxText,l=t.start,d=t.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(d,0)),Object(p.assign)(this,{x:e,y:r,width:i,height:a,minText:s,maxText:u}),this.updateUI()},n.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},n.prototype.renderSlider=function(){var t=this,e=this.width,r=this.height,i=this.timeBarType;if(i==="trend"&&Object(p.size)(Object(p.get)(this.trendCfg,"data"))){var a=new Cm(Ln(Ln({x:this.x,y:this.y,width:e,height:r},this.trendCfg),{group:this.group}));this.trendComponent=a}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Ln({x:0,y:0,width:e,height:r},this.backgroundStyle)});var u=this.group.addGroup();i==="trend"?(this.minTextShape=u.addShape("text",{attrs:Ln({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=u.addShape("text",{attrs:Ln({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=u.addShape("text",{attrs:Ln({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=u.addShape("text",{attrs:Ln({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Ln({x:0,y:this.y,height:r},this.foregroundStyle)}),this.foregroundShape.on("mousedown",function(F){F.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(F){F.target.attr("cursor",t.foregroundStyle.cursor||"grab")});var l=Object(p.get)(this.handlerStyle,"width",2),d=Object(p.get)(this.handlerStyle,"height",24),v=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new yp({name:"minHandlerShape",group:v,type:i,x:this.x,y:this.y,width:l,height:d,style:this.handlerStyle});var k=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new yp({name:"maxHandlerShape",group:k,type:i,x:this.x,y:this.y,width:l,height:d,style:this.handlerStyle});var T=this.ticks,I=e/(T.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(F){F.destroy()});var j=-1/0;this.textList=T.map(function(F,G){var V;t.tickPosList.push(t.x+G*I),t.tickLabelFormatter?(V=t.tickLabelFormatter(F),!Object(p.isString)(V)&&V&&(V=F.date)):V=F.date;var q=t.group.addShape("text",{attrs:Ln({x:t.x+G*I,y:t.y+r+5,text:V,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle)}),$=t.group.addShape("line",{attrs:Ln({x1:t.x+G*I,y1:t.y+r+2,x2:t.x+G*I,y2:t.y+r+6},t.tickLineStyle)});$.toBack();var ve=q.getBBox();return ve.minX>j?(q.show(),$.show(),j=ve.minX+ve.width+10):(q.hide(),$.hide()),q}),this.controllerBtnGroup=new wp(Ln({group:this.group,x:this.x,y:this.y+r+25,width:e,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents()},n.prototype.bindEvents=function(){var t=this,e=this.group.find(function(i){return i.get("name")==="minHandlerShape"});e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()}),this.group.on("nextStepBtn:click",function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()}),this.group.on("preStepBtn:click",function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()}),this.group.on("timebarConfigChanged",function(i){var a=i.type,s=i.speed;t.currentSpeed=s,t.currentMode=a,a==="single"?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):a==="range"&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())})},n.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},n.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,r=1-this.start;return Math.min(r,Math.max(e,t));case this.maxHandlerShape:return e=0-this.end,r=1-this.end,Math.min(r,Math.max(e,t));case this.foregroundShape:return e=0-this.start,r=1-this.end,Math.min(r,Math.max(e,t));default:return 0}},n.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date}},n.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var e=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",r-e);var i=Object(p.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var a=this.dodgeText([e,r]),s=a[0],u=a[1];this.minHandlerShape.setX(e-i/2),Object(p.each)(s,function(l,d){return t.minTextShape.attr(d,l)}),this.maxHandlerShape.setX(r-i/2),Object(p.each)(u,function(l,d){return t.maxTextShape.attr(d,l)}),this.currentMode==="range"?this.graph.emit("valuechange",{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit("valuechange",{value:[this.end,this.end]})},n.prototype.dodgeText=function(t){var e,r,i=Object(p.get)(this.handlerStyle,"width",2),a=this.minTextShape,s=this.maxTextShape,u=t[0],l=t[1],d=!1;u>l&&(u=(e=[l,u])[0],l=e[1],a=(r=[s,a])[0],s=r[1],d=!0);var v=a.getBBox(),k=s.getBBox(),T=null,I=null;return this.timeBarType==="trend"?(T=u-v.width<this.x+2?{x:u+i/2+2,textAlign:"left"}:{x:u-i/2-2,textAlign:"right"},I=l+k.width>this.x+this.width?{x:l-i/2-2,textAlign:"right"}:{x:l+i/2+2,textAlign:"left"}):this.timeBarType==="simple"&&(T=v.width>u-2?{x:u+i/2+2,textAlign:"center"}:{x:u-i/2-2,textAlign:"center"},I=k.width>this.width-l-2?{x:l-i/2-2,textAlign:"center"}:{x:l+i/2+2,textAlign:"center"}),d?[I,T]:[T,I]},n.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t,r=e.ticks,i=e.width,a=t.currentSpeed,s=i/r.length/(1e3*(10-a)/60),u=t.adjustOffsetRange(s/t.width);t.updateStartEnd(u),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())}):void 0},n.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timebarendplay",null))},n.prototype.destory=function(){this.graph.off("valuechange");var t=this.group,e=t.find(function(i){return i.get("name")==="minHandlerShape"});e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var r=t.find(function(i){return i.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off("timebarConfigChanged"),t.destroy(),this.trendComponent&&this.trendComponent.destory()},n}(),Xm=function(){function n(t){var e=t.x,r=e===void 0?0:e,i=t.y,a=i===void 0?0:i,s=t.container,u=t.text,l=t.padding,d=l===void 0?[4,4,4,4]:l,v=t.className,k=v===void 0?"g6-component-timebar-tooltip":v,T=t.backgroundColor,I=T===void 0?"#000":T,j=t.textColor,F=j===void 0?"#fff":j,G=t.opacity,V=G===void 0?.8:G,q=t.fontSize,$=q===void 0?12:q;this.container=s,this.className=k,this.backgroundColor=I,this.textColor=F,this.x=r,this.y=a,this.text=u,this.padding=d,this.opacity=V,this.fontSize=$,this.render()}return n.prototype.render=function(){var t=this.className,e=(this.x,this.y,this.backgroundColor),r=this.textColor,i=this.text,a=this.padding,s=this.opacity,u=this.fontSize,l=this.container,d=ei("<div class='"+t+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+s+'"></div>');Object(p.isString)(l)&&(l=document.getElementById(l)),l.appendChild(d),this.parentHeight=l.offsetHeight,this.parentWidth=l.offsetWidth,xn(d,{visibility:"hidden",top:0,left:0});var v=ei(`
      <div style='position: absolute; white-space:nowrap; background-color: `+e+"; font-size: "+u+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+r+"; padding: "+a[0]+"px "+a[1]+"px "+a[2]+"px "+a[3]+"px'></div>");v.innerHTML=i,d.appendChild(v),this.backgroundDOM=v;var k=ei("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+e+"'></div>");d.appendChild(k),this.arrowDOM=k,this.container=d},n.prototype.show=function(t){var e=t.text,r=t.x;t.y,t.clientX,t.clientY,this.backgroundDOM.innerHTML=e;var i=this.backgroundDOM.offsetWidth,a=this.backgroundDOM.offsetHeight,s=this.arrowDOM.offsetWidth,u=this.arrowDOM.offsetHeight;xn(this.container,{top:-a-u+"px",left:r+"px",visibility:"visible"}),xn(this.backgroundDOM,{marginLeft:-i/2+"px"}),xn(this.arrowDOM,{marginLeft:-s/2+"px",top:a+"px"});var l=r-i/2,d=r+i/2;l<0?xn(this.backgroundDOM,{marginLeft:-i/2-l+"px"}):d>this.parentWidth&&xn(this.backgroundDOM,{marginLeft:-i/2-d+this.parentWidth+12+"px"})},n.prototype.hide=function(){xn(this.container,{top:0,left:0,visibility:"hidden"})},n}(),_p=function(){return(_p=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Ym={fill:"#5B8FF9"},Hm={fill:"#e6e8e9"},qm=function(){function n(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,r=t.canvas,i=t.group,a=t.width,s=t.height,u=t.padding,l=t.data,d=t.start,v=t.end,k=t.x,T=k===void 0?0:k,I=t.y,j=I===void 0?0:I,F=t.tickLabelFormatter,G=t.selectedTickStyle,V=G===void 0?Ym:G,q=t.unselectedTickStyle,$=q===void 0?Hm:q,ve=t.tooltipBackgroundColor,de=t.tooltipFomatter;this.graph=e,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=s,this.padding=u,this.data=l,this.start=d,this.end=v,this.tickLabelFormatter=F,this.selectedTickStyle=V,this.unselectedTickStyle=$,this.x=T,this.y=j,this.tooltipBackgroundColor=ve,this.tooltipFomatter=de,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return n.prototype.renderSlices=function(){var t=this,e=this,r=e.width,i=e.height,a=e.padding,s=e.data,u=e.start,l=e.end,d=e.tickLabelFormatter,v=e.selectedTickStyle,k=e.unselectedTickStyle,T=r-2*a,I=i-(3*a+4+10)-2*a,j=s.length,F=(T-2*(j-1))/j;this.tickWidth=F;var G=this.sliceGroup,V=[],q=[],$=Math.round(j*u),ve=Math.round(j*l);this.startTickRectId=$,this.endTickRectId=ve,s.forEach(function(me,Ie){var Ee=Ie>=$&&Ie<=ve?v:k,Pe=G.addShape("rect",{attrs:_p({x:a+Ie*(F+2),y:a,width:F,height:I},Ee),draggable:!0,name:"tick-rect-"+Ie}),Ze=G.addShape("rect",{attrs:{x:a+Ie*F+2*(2*Ie-1)/2,y:a,width:Ie===0||Ie===j-1?F+1:F+2,height:I,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+Ie});Ze.toFront();var it,ct=Pe.getBBox(),st=(ct.minX+ct.maxX)/2;if(V.push({rect:Pe,pickRect:Ze,value:me.date,x:st,y:ct.minY}),d?(it=d(me),!Object(p.isString)(it)&&it&&(it=me.date)):Ie%Math.round(j/10)==0&&(it=me.date),it){q.push(it);var jt=ct.maxY+2*a;G.addShape("line",{attrs:{stroke:"#BFBFBF",x1:st,y1:jt,x2:st,y2:jt+4}});var gt=jt+4+a,Pt=G.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:st,y:gt,textAlign:"center",text:it,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},capture:!1}),Rt=Pt.getBBox();Rt.maxX>r?Pt.attr("textAlign","right"):Rt.minX<0&&Pt.attr("textAlign","left")}}),this.tickRects=V;var de=this.group;this.currentSpeed=1,this.controllerBtnGroup=new wp({group:de,x:this.x,y:this.y+i+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},n.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",function(d){var v=d.target;if(v.get("type")==="rect"&&v.get("name")){var k=parseInt(v.get("name").split("-")[2],10);if(!isNaN(k)){var T=t.tickRects,I=t.unselectedTickStyle;T.forEach(function(G){G.rect.attr(I)});var j=t.selectedTickStyle;T[k].rect.attr(j),t.startTickRectId=k,t.endTickRectId=k;var F=k/T.length;t.graph.emit("valuechange",{value:[F,F]})}}}),e.on("dragstart",function(d){var v=t.tickRects,k=t.unselectedTickStyle;v.forEach(function(G){G.rect.attr(k)});var T=d.target,I=parseInt(T.get("name").split("-")[2],10),j=t.selectedTickStyle;v[I].rect.attr(j),t.startTickRectId=I;var F=I/v.length;t.graph.emit("valuechange",{value:[F,F]}),t.dragging=!0}),e.on("dragover",function(d){if(t.dragging&&d.target.get("type")==="rect"){for(var v=parseInt(d.target.get("name").split("-")[2],10),k=t.startTickRectId,T=t.tickRects,I=t.selectedTickStyle,j=t.unselectedTickStyle,F=0;F<T.length;F++){var G=F>=k&&F<=v?I:j;T[F].rect.attr(G)}var V=T.length;t.endTickRectId=v;var q=k/V,$=v/V;t.graph.emit("valuechange",{value:[q,$]})}}),e.on("drop",function(d){if(t.dragging&&(t.dragging=!1,d.target.get("type")==="rect")){var v=t.startTickRectId,k=parseInt(d.target.get("name").split("-")[2],10);if(!(k<v)){var T=t.selectedTickStyle,I=t.tickRects;I[k].rect.attr(T),t.endTickRectId=k;var j=I.length,F=v/j,G=k/j;t.graph.emit("valuechange",{value:[F,G]})}}});var r=this.tooltipBackgroundColor,i=this.tooltipFomatter,a=this.canvas,s=new Xm({container:a.get("container"),backgroundColor:r}),u=this.tickRects;u.forEach(function(d){var v=d.pickRect;v.on("mouseenter",function(k){var T=k.target;if(T.get("type")==="rect"){var I=parseInt(T.get("name").split("-")[2],10),j=a.getClientByPoint(u[I].x,u[I].y);s.show({x:u[I].x,y:u[I].y,clientX:j.x,clientY:j.y,text:i?i(u[I].value):u[I].value})}}),v.on("mouseleave",function(k){s.hide()})});var l=this.group;l.on("playPauseBtn:click",function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),l.on("nextStepBtn:click",function(){t.updateStartEnd(1)}),l.on("preStepBtn:click",function(){t.updateStartEnd(-1)}),l.on("timebarConfigChanged",function(d){d.type;var v=d.speed;t.currentSpeed=v})},n.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timebarendplay",null))},n.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())}):void 0},n.prototype.updateStartEnd=function(t){var e=this.tickRects,r=e.length,i=this.unselectedTickStyle,a=this.selectedTickStyle,s=this.endTickRectId;if(t>0?this.endTickRectId++:(e[this.endTickRectId].rect.attr(i),this.endTickRectId--),s!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var u=this.startTickRectId;u<=this.endTickRectId-1;u++)e[u].rect.attr(i);this.startTickRectId=this.endTickRectId}if(e[this.endTickRectId]){e[this.endTickRectId].rect.attr(a);var l=this.startTickRectId/r,d=this.endTickRectId/r;this.graph.emit("valuechange",{value:[l,d]})}},n.prototype.destory=function(){this.graph.off("valuechange");var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach(function(e){var r=e.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off("timebarConfigChanged"),this.sliceGroup.destroy()},n}(),Km=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ra=function(){return(ra=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Zm=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]])}return e},$m=function(n){function t(e){return n.call(this,e)||this}return Km(t,n),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1}},t.prototype.initContainer=function(){var e,r,i=this.get("graph"),a=this._cfgs,s=a.width,u=a.height,l=this.get("className")||"g6-component-timebar",d=this.get("container"),v=this.get("graph").get("container");d?(Object(p.isString)(d)&&(d=document.getElementById(d)),e=d):xn(e=ei("<div class='"+l+"'></div>"),{position:"relative"}),v.appendChild(e),this.set("timeBarContainer",e),r=i.get("renderer")==="SVG"?new Ao.Canvas({container:e,width:s,height:u}):new Xr.Canvas({container:e,width:s,height:u}),this.set("canvas",r)},t.prototype.init=function(){this.initContainer();var e=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent();var r=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",r)},t.prototype.renderTrend=function(){var e=this._cfgs,r=e.width,i=e.x,a=e.y,s=e.padding,u=e.type,l=e.trend,d=e.slider,v=e.controllerCfg,k=e.textStyle,T=e.tick,I=e.backgroundStyle,j=e.foregroundStyle,F=l.data,G=Zm(l,["data"]),V=r-2*s,q=u==="trend"?26:4,$=this.get("graph"),ve=this.get("timeBarGroup"),de=this.get("canvas"),me=null;u==="trend"||u==="simple"?me=new Wm(ra(ra({graph:$,canvas:de,group:ve,type:u,x:i+s,y:u==="trend"?a+s:a+s+15,width:V,height:q,padding:s,backgroundStyle:I,foregroundStyle:j,trendCfg:ra(ra({},G),{data:F.map(function(Ie){return Ie.value})})},d),{tick:{ticks:F,tickLabelFormatter:T.tickLabelFormatter,tickLabelStyle:T.tickLabelStyle,tickLineStyle:T.tickLineStyle},handlerStyle:ra(ra({},d.handlerStyle),{height:d.height||q}),controllerCfg:v,textStyle:k})):u==="tick"&&(me=new qm(ra({graph:$,canvas:de,group:ve,x:i+s,y:a+s},T))),this.set("timebar",me)},t.prototype.filterData=function(e){var r,i=e.value,a=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?a=this._cfgs.trend.data:s==="tick"&&(a=this._cfgs.tick.data),a&&a.length!==0){var u=this.get("rangeChange"),l=this.get("graph"),d=Math.round(a.length*i[0]),v=Math.round(a.length*i[1]);v=v>=a.length?a.length-1:v,d=d>=a.length?a.length-1:d;var k=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,T=k?k(a[d]):a[d].date,I=k?k(a[v]):a[v].date;if(s!=="tick"&&this.get("timebar").setText(T,I),u)u(l,T,I);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=l.get("data"));var j=this.cacheGraphData.nodes.filter(function(V){return V.date>=a[d].date&&V.date<=a[v].date}),F=j.map(function(V){return V.id}),G=[];this.cacheGraphData.edges&&(G=this.cacheGraphData.edges.filter(function(V){return F.includes(V.source)&&F.includes(V.target)}),this.get("filterEdge")&&(G=G.filter(function(V){return V.date>=a[d].date&&V.date<=a[v].date}))),l.changeData({nodes:j,edges:G})}}else console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E")},t.prototype.initEvent=function(){var e=this,r=0,i=0,a=this._cfgs.type;a&&a!=="trend"&&a!=="simple"?a==="tick"&&(r=this._cfgs.tick.start,i=this._cfgs.tick.end):(r=this._cfgs.slider.start,i=this._cfgs.slider.end);var s=this.get("graph");s.on("afterrender",function(u){e.filterData({value:[r,i]})}),s.on("valuechange",Object(p.throttle)(function(u){e.filterData(u)},200,{trailing:!0,leading:!0}))},t.prototype.destroy=function(){var e=this.get("timebar");e&&e.destory&&e.destory(),n.prototype.destroy.call(this);var r=this.get("timeBarContainer");if(r){var i=this.get("container");i||(i=this.get("graph").get("container")),Object(p.isString)(i)&&(i=document.getElementById(i)),i.removeChild(r)}},t}(lo),Qm=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jm=br.applyMatrix,eb=function(n){function t(e){return n.call(this,e)||this}return Qm(t,n),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,r=this._cfgs,i=r.graph;if(!this.destroyed){var a=this.get("container");Object(p.isString)(a)&&(a=document.getElementById(a));var s=ei("<div class="+r.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),u=0,l=0,d=!1,v=0,k=0,T=0,I=0,j=0,F=0;a.addEventListener("mousedown",function(G){if(r.refresh=!1,G.target===s){var V=s.style;T=parseInt(V.width,10),I=parseInt(V.height,10);var q=e.get("width"),$=e.get("height");T>q||I>$||(F=i.getZoom(),j=e.get("ratio"),d=!0,u=G.clientX,l=G.clientY)}},!1),a.addEventListener("mousemove",function(G){if(d&&!Object(p.isNil)(G.clientX)&&!Object(p.isNil)(G.clientY)){var V=e.get("width"),q=e.get("height"),$=s.style;v=parseInt($.left,10),k=parseInt($.top,10),T=parseInt($.width,10),I=parseInt($.height,10);var ve=u-G.clientX,de=l-G.clientY;v-ve<0?ve=v:v-ve+T>=V&&(ve=0),k-de<0?de=k:k-de+I>=q&&(de=0),xn(s,{left:(v-=ve)+"px",top:(k-=de)+"px"}),i.translate(ve*F/j,de*F/j),u=G.clientX,l=G.clientY}},!1),a.addEventListener("mouseleave",function(){d=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){d=!1,r.refresh=!0},!1),this.set("viewport",s),a.appendChild(s)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),r=this.get("width"),i=this.get("height"),a=this.get("graph"),s=a.get("width"),u=s/a.get("height"),l=a.getGroup(),d=l.getCanvasBBox(),v=[(d.minX+d.maxX)/2,(d.minY+d.maxY)/2],k=[d.maxX-d.minX,d.maxY-d.minY],T={centerX:v[0],centerY:v[1],width:0,height:0,minX:0,minY:0};d[0]/d[1]>u?(T.width=k[0],T.height=T.width/u):(T.height=k[1],T.width=T.height*u),T.minX=v[0]-T.width/2,T.minY=v[1]-T.height/2;var I=l.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var j=Nt.a.invert([1,0,0,0,1,0,0,0,1],I),F=Jm({x:T.minX,y:T.minY},j),G=a.getCanvasByPoint(F.x,F.y),V=this.get("viewport");V||this.initViewport();var q=s/T.width,$=q*r,ve=q*i,de=r*-G.x/T.width,me=i*-G.y/T.height,Ie=de+$,Ee=me+ve;de<0&&($+=de,de=0),Ie>r&&($-=Ie-r),me<0&&(ve+=me,me=0),Ee>i&&(ve-=Ee-i),this.set("ratio",e),xn(V,{left:de+"px",top:me+"px",width:$+"px",height:ve+"px"})}},t.prototype.init=function(){this.initContainer()},t.prototype.initContainer=function(){var e=this.get("graph"),r=e.get("width"),i=e.get("height")/r,a=this.get("className"),s=this.get("container"),u=this.get("width"),l=this.get("height");u||l||(u=200),u?(l=i*u,this.set("height",l)):(u=1/i*l,this.set("width",u));var d=ei("<div class='"+a+"' style='width: "+u+"px; height: "+l+"px; overflow: hidden; position: relative;'></div>");Object(p.isString)(s)&&(s=document.getElementById(s)),s?s.appendChild(d):e.get("container").appendChild(d),this.set("container",d);var v=ei('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');d.appendChild(v);var k=ei('<span style="display: table-cell; vertical-align: middle; "></span>');v.appendChild(k),this.set("containerDOM",v),this.set("containerSpan",k);var T=ei('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block; user-select: none;" draggable="false" />');this.set("imgDOM",T),this.updateImgSize(),k.appendChild(T),this.updateCanvas()},t.prototype.updateImgSize=function(){var e=this.get("imgDOM"),r=this.get("width"),i=this.get("height");e.onload=function(){var a=function(s,u){var l,d;if(s.naturalWidth)l=s.naturalWidth,d=s.naturalHeight;else{var v=new Image;v.src=s.src,v.onload=function(){u&&u(v.width,v.height)}}return[l,d]}(e);a[0]>a[1]?e.width=r:e.height=i}},t.prototype.updateCanvas=function(){if(this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var r=this.get("width")/e.get("canvas").getCanvasBBox().width;this.set("ratio",r),this.updateViewport()}}},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateGraphImg=function(e){this.get("imgDOM").remove(),this.set("graphImg",e);var r=ei('<img alt="" src="'+e+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",r),r.src=e,this.updateImgSize(),this.get("containerSpan").appendChild(r),this.updateCanvas()},t.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},t}(lo),tb=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sp=function(){return(Sp=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},rb=br.distance,Ep={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},nb=function(n){function t(e){return n.call(this,e)||this}return tb(t,n),t.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(p.clone)(Ep),showLabel:"edge",scaleRBy:"wheel"}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"}}return e},t.prototype.init=function(){var e=this.get("showLabel"),r=e==="node"||e==="both",i=e==="edge"||e==="both";this.set("showNodeLabel",r),this.set("showEdgeLabel",i),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},t.prototype.createDelegate=function(e){var r=this,i=r.get("delegate");i&&!i.destroyed||(r.filter(e),(i=r.get("delegate")).on("dragstart",function(a){}),i.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){r.scaleRByWheel(a)}))},t.prototype.scaleRByWheel=function(e){if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var r,i=this.get("graph"),a=this.get("delegate");a&&{x:a.attr("x"),y:a.attr("y")}||i.getPointByClient(e.clientX,e.clientY),r=e.originalEvent.wheelDelta<0?.95:1/.95;var s=this.get("maxR"),u=this.get("minR"),l=this.get("r");(l>(s||i.get("height"))&&r>1||l<(u||.05*i.get("height"))&&r<1)&&(r=1),l*=r,this.set("r",l),this.filter(e)}},t.prototype.filter=function(e){var r=this.get("graph"),i=r.getNodes(),a={},s=this.get("r"),u=this.get("type"),l={x:e.x,y:e.y};this.updateDelegate(l,s);var d=this.get("shouldShow"),v=this.get("vShapes");v&&v.forEach(function(G){G.remove(),G.destroy()}),v=[],i.forEach(function(G){var V=G.getModel(),q=V.x,$=V.y;rb({x:q,y:$},l)<s&&(a[V.id]=G)});var k=r.getEdges(),T=[];k.forEach(function(G){var V=G.getModel(),q=V.source,$=V.target;d(V)&&(u==="only-source"||u==="one"?a[q]&&!a[$]&&T.push(G):u==="only-target"||u==="one"?a[$]&&!a[q]&&T.push(G):u==="both"&&a[q]&&a[$]&&T.push(G))});var I=this.get("showNodeLabel"),j=this.get("showEdgelabel"),F=r.get("group");T.forEach(function(G){G.get("group").get("children").forEach(function(V){var q=V.get("type"),$=F.addShape(q,{attrs:V.attr()});v.push($),I&&q==="text"&&$.set("visible",!0)})}),Object.keys(a).forEach(function(G){var V=a[G].get("group").clone();if(F.add(V),v.push(V),j)for(var q=V.get("children"),$=0;$<q.length;$++){var ve=q[$];ve.get("type")==="text"&&ve.set("visible",!0)}}),this.set("vShapes",v)},t.prototype.updateParams=function(e){var r=e.r,i=e.trigger,a=e.minR,s=e.maxR,u=e.scaleRBy,l=e.showLabel,d=e.shouldShow;if(isNaN(e.r)||this.set("r",r),isNaN(s)||this.set("maxR",s),isNaN(a)||this.set("minR",a),i!=="mousemove"&&i!=="click"||this.set("trigger",i),u==="wheel"||u==="unset"){this.set("scaleRBy",u),this.get("delegate").remove(),this.get("delegate").destroy();var v=this.get("dPercentText");v&&(v.remove(),v.destroy())}l!=="node"&&l!=="both"||this.set("showNodeLabel",!0),l!=="edge"&&l!=="both"||this.set("showEdgeLabel",!0),d&&this.set("shouldShow",d)},t.prototype.updateDelegate=function(e,r){var i=this,a=i.get("graph"),s=i.get("delegate");if(!s||s.destroyed){var u=a.get("group"),l=i.get("delegateStyle")||Ep;s=u.addShape("circle",{attrs:Sp({r,x:e.x,y:e.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&s.on("mousewheel",function(d){i.scaleRByWheel(d)})}else s.attr({x:e.x,y:e.y,r});i.set("delegate",s)},t.prototype.clear=function(){var e=this.get("vShapes");e&&e.forEach(function(i){i.remove(),i.destroy()}),e=[],this.set("vShapes",e);var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy())},t.prototype.destroy=function(){this.clear()},t}(lo),ib=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ob=br.pointLineDistance,ab={stroke:"#FA8C16",lineWidth:1},sb=function(n){function t(e){return n.call(this,e)||this}return ib(t,n),t.prototype.getDefaultCfgs=function(){return{line:ab,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},t.prototype.init=function(){},t.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},t.prototype.onDragStart=function(){this.initBoxLine()},t.prototype.onDrag=function(e){var r=e.item,i=(r.get("delegateShape")||r).getBBox(),a=r.getModel(),s=a.x-i.x,u=a.y-i.y;this.show({x:i.minX+s,y:i.minY+u},{width:i.width,height:i.height})},t.prototype.onDragEnd=function(){this.destory()},t.prototype.initBoxLine=function(){var e=this._cfgs,r=e.horizontalLines,i=e.verticalLines,a=e.itemAlignType;this.get("graph").getNodes().forEach(function(s){var u=s.getBBox(),l=s.get("id");a===!0||a==="horizontal"?(r[l+"tltr"]=[u.minX,u.minY,u.maxX,u.minY,s],r[l+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,s],r[l+"blbr"]=[u.minX,u.maxY,u.maxX,u.maxY,s]):a==="center"&&(r[l+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,s]),a===!0||a==="vertical"?(i[l+"tlbl"]=[u.minX,u.minY,u.minX,u.maxY,s],i[l+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,s],i[l+"trbr"]=[u.maxX,u.minY,u.maxX,u.maxY,s]):a==="center"&&(i[l+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,s])})},t.prototype.show=function(e,r){var i=Object(p.mix)({},e);return this.itemAlign(e,r,i),e},t.prototype.itemAlign=function(e,r,i){var a=this,s=this._cfgs,u=s.horizontalLines,l=s.verticalLines,d=s.tolerance,v={x:i.x+r.width/2,y:i.y},k={x:i.x+r.width/2,y:i.y+r.height/2},T={x:i.x+r.width/2,y:i.y+r.height},I={x:i.x,y:i.y+r.height/2},j={x:i.x+r.width,y:i.y+r.height/2},F=[],G=[],V=null;if(this.clearAlignLine(),Object(p.each)(u,function($){$[4].isVisible&&(F.push(a.getLineDisObject($,v)),F.push(a.getLineDisObject($,k)),F.push(a.getLineDisObject($,T)))}),Object(p.each)(l,function($){$[4].isVisible&&(G.push(a.getLineDisObject($,I)),G.push(a.getLineDisObject($,k)),G.push(a.getLineDisObject($,j)))}),F.sort(function($,ve){return $.dis-ve.dis}),G.sort(function($,ve){return $.dis-ve.dis}),F.length!==0&&F[0].dis<d){e.y=F[0].line[1]-F[0].point.y+i.y,V={type:"item",horizontals:[F[0]]};for(var q=1;q<3;q++)F[0].dis===F[q].dis&&V.horizontals.push(F[q])}if(G.length!==0&&G[0].dis<d)for(e.x=G[0].line[0]-G[0].point.x+i.x,V?V.verticals=[G[0]]:V={type:"item",verticals:[G[0]]},q=1;q<3;q++)G[0].dis===G[q].dis&&V.verticals.push(G[q]);V&&(V.bbox=r,this.addAlignLine(V))},t.prototype.addAlignLine=function(e){var r=e.bbox,i=e.type,a=e.horizontals,s=e.verticals,u=this._cfgs,l=u.line,d=u.alignLines,v=this.get("graph").get("group");i==="item"&&(a&&Object(p.each)(a,function(k){var T,I,j=k.line,F=k.point,G=(j[0]+j[2])/2;F.x<G?(T=F.x-r.width/2,I=Math.max(j[0],j[2])):(T=F.x+r.width/2,I=Math.min(j[0],j[2]));var V=Object(p.mix)({x1:T,y1:j[1],x2:I,y2:j[1]},l),q=v.addShape("line",{attrs:V,capture:!1});d.push(q)}),s&&Object(p.each)(s,function(k){var T,I,j=k.line,F=k.point,G=(j[1]+j[3])/2;F.y<G?(T=F.y-r.height/2,I=Math.max(j[1],j[3])):(T=F.y+r.height/2,I=Math.min(j[1],j[3]));var V=Object(p.mix)({x1:j[0],y1:T,x2:j[0],y2:I},l),q=v.addShape("line",{attrs:V,capture:!1});d.push(q)}))},t.prototype.getLineDisObject=function(e,r){return{line:e,point:r,dis:ob(e,r)}},t.prototype.getContainer=function(){return this.get("container")},t.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;Object(p.each)(e,function(r){r.remove()}),e.length=0},t.prototype.destory=function(){var e=this._cfgs,r=e.horizontalLines,i=e.verticalLines;this.get("graph").getNodes().forEach(function(a){var s=a.get("id");delete r[s+"tltr"],delete r[s+"lcrc"],delete r[s+"blbr"],delete i[s+"tlbl"],delete i[s+"tcbc"],delete i[s+"trbr"]}),this.clearAlignLine()},t}(lo),ub=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kn=function(){return(Kn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},cb=["click","mouseenter"],mi={PluginBase:lo,Menu:Uy,Grid:Gy,Minimap:Xy,Bundling:Hy,ToolBar:$y,Tooltip:Jy,Fisheye:Ky,TimeBar:$m,ImageMinimap:eb,EdgeFilterLens:nb,SnapLine:sb,Legend:function(n){function t(e){return n.call(this,e)||this}return ub(t,n),t.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},t.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{};e.multiple&&e.trigger==="mouseenter"&&this.set("multiple",!1);var r=this.get("align");if(!r){var i=this.get("position").split("-");i.includes("left")&&(r="left"),r=i.includes("right")?"right":"center",this.set("align",r)}var a=this.get("graph").get("container"),s=ei(`<div class='g6-legend-container' style="position: absolute;"></div>`);a.appendChild(s),this.set("container",s);var u=this.render();xn(s,this.getContainerPos(u)),this.bindEvents()},t.prototype.getContainerPos=function(e){e===void 0&&(e=[0,0]);var r=this.get("graph"),i=this.get("offsetX"),a=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),l={top:0,right:1,bottom:2,left:3},d={left:(r.getWidth()-e[0])/2+0,top:(r.getHeight()-e[1])/2+0};return u.forEach(function(v){var k=s[l[v]],T=v;switch(v){case"top":case"left":k+=0;break;case"bottom":k=r.getHeight()-e[1]-k+0,T="top";break;default:k=r.getWidth()-e[0]-k+0,T="left"}d[T]=k}),d.top+=a+r.getContainer().offsetTop,d.left+=i+r.getContainer().offsetLeft,Object.keys(d).forEach(function(v){d[v]=d[v]+"px"}),d},t.prototype.bindEvents=function(){var e=this,r=e.get("filter");if(r&&r.enable){var i=r.trigger||"click";cb.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=e.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(s){return e.filterData(s)}),a.on("node-container:mouseleave",function(s){e.clearFilter(),e.clearActiveLegend()})):(a.on("node-container:click",function(s){return e.filterData(s)}),a.on("click",function(s){s.target&&s.target.isCanvas&&s.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())}))}},t.prototype.changeData=function(e){this.set("data",e);var r=this.render();xn(this.get("container"),this.getContainerPos(r))},t.prototype.activateLegend=function(e){var r=this.get("filter");r!=null&&r.multiple||this.clearActiveLegend();var i=e.get("parent");i.get("active")?(i.set("active",!1),this.findLegendItemsByState("active").length&&i.set("inactive",!0)):(i.set("inactive",!1),i.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(v){v.set("inactive",!0)}):this.clearActiveLegend();var a=(r==null?void 0:r.lengedStateStyles)||{},s=(a==null?void 0:a.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(v){var k=v.get("children"),T=k[0],I=k[1];T.attr(Kn(Kn({},T.get("oriAttrs")),s)),I.attr(Kn(Kn({},I.get("oriAttrs")),u))});var l=(a==null?void 0:a.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},d=l["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(v){var k=v.get("children"),T=k[0],I=k[1];T.attr(Kn(Kn({},T.get("oriAttrs")),l)),I.attr(Kn(Kn({},I.get("oriAttrs")),d))})},t.prototype.findLegendItemsByState=function(e,r,i){r===void 0&&(r="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),s=a.find(function(l){return l.get("name")==="node-group"}),u=a.find(function(l){return l.get("name")==="edge-group"});return r==="node"?s.get("children").filter(function(l){return!!l.get(e)===i}):r==="edge"?u.get("children").filter(function(l){return!!l.get(e)===i}):s.get("children").filter(function(l){return!!l.get(e)===i}).concat(u.get("children").filter(function(l){return!!l.get(e)===i}))},t.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas").find(function(r){return r.get("name")==="root"});[e.find(function(r){return r.get("name")==="node-group"}),e.find(function(r){return r.get("name")==="edge-group"})].forEach(function(r){r.get("children").forEach(function(i){i.set("active",!1),i.set("inactive",!1);var a=i.get("children"),s=a[0],u=a[1];s.attr(s.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},t.prototype.filterData=function(e){var r=this.get("filter"),i=r==null?void 0:r.filterFunctions;if(r&&i){var a=this.get("legendCanvas"),s=this.get("graph"),u=r.graphActiveState||"active",l=r.graphInactiveState||"inactive",d=r.multiple;this.clearFilter(),d||this.clearActiveLegend(),this.activateLegend(e.target);var v=a.find(function(V){return V.get("name")==="root"}),k=v.find(function(V){return V.get("name")==="node-group"}),T=v.find(function(V){return V.get("name")==="edge-group"}),I=k.get("children").filter(function(V){return V.get("active")}),j=T.get("children").filter(function(V){return V.get("active")}),F=0,G=["getNodes","getEdges"];G.forEach(function(V){s[V]().forEach(function(q){var $=!1;(V==="getNodes"?I:j).forEach(function(ve){var de=i[ve.get("id")];$=$||de(q.getModel())}),$?(s.setItemState(q,l,!1),s.setItemState(q,u,!0),F++):(s.setItemState(q,u,!1),s.setItemState(q,l,!0))})}),F||G.forEach(function(V){s[V]().forEach(function(q){s.clearItemStates(q,[l])})})}},t.prototype.clearFilter=function(){var e=this.get("graph"),r=this.get("filter");if(r){var i=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";e.getNodes().forEach(function(s){e.clearItemStates(s,[i,a])}),e.getEdges().forEach(function(s){e.clearItemStates(s,[i,a])})}},t.prototype.render=function(){var e=this;this.processData();var r=this.get("legendCanvas");if(!r){var i=(r=new Xr.Canvas({container:this.get("container"),width:200,height:200})).addGroup({name:"root"});i.addGroup({name:"node-group"}),i.addGroup({name:"edge-group"}),this.set("legendCanvas",r)}var a=r.find(function(gt){return gt.get("name")==="root"}),s=a.find(function(gt){return gt.get("name")==="node-group"}),u=a.find(function(gt){return gt.get("name")==="edge-group"}),l=this.get("itemsData"),d=[s,u];["nodes","edges"].forEach(function(gt,Pt){l[gt].forEach(function(Rt){var Zt,Ct,Vt=d[Pt].addGroup({id:Rt.id,name:"node-container"}),Dt=Rt.type,qt=e.getShapeSize(Rt),$t=qt.width,Gt=qt.height,lr=qt.r,Br=e.getStyle(gt.substr(0,4),Rt);switch(Rt.type){case"circle":Ct={r:lr,x:0,y:0};break;case"rect":Ct={width:$t,height:Gt,x:-$t/2,y:-Gt/2};break;case"ellipse":Ct={r1:$t,r2:Gt,x:0,y:0};break;case"line":Ct={x1:-$t/2,y1:0,x2:$t/2,y2:0},Dt="line";break;case"quadratic":Ct={path:[["M",-$t/2,0],["Q",0,$t/2,$t/2,0]]},Dt="path";break;case"cubic":Ct={path:[["M",-$t/2,0],["C",-$t/6,$t/2,$t/6,-$t/2,$t/2,0]]},Dt="path";break;default:Ct={r:lr,x:0,y:0}}var wn=Vt.addShape(Dt,{attrs:Kn(Kn({},Ct),Br),name:Rt.type+"-node-keyShape",oriAttrs:Kn({opacity:1},Br)});if(Rt.label){var Sr=wn.getBBox(),jr=((Zt=Rt.labelCfg)===null||Zt===void 0?void 0:Zt.style)||{},_r=Kn({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},jr);Vt.addShape("text",{attrs:Kn({x:Sr.maxX+4,y:0,text:Rt.label},_r),className:"legend-label",name:Rt.type+"-node-text",oriAttrs:_r})}})});var v,k=this.get("padding"),T=a.find(function(gt){return gt.get("name")==="title-container"}),I={height:0,maxY:0,width:0};if(this.get("title")){T||(T=a.addGroup({name:"title-container"}));var j={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:k[0]},F=this.get("titleConfig")||{},G=Object.assign(j,F.style||{});v=T.addShape("text",{attrs:Kn({text:this.get("title")},G)}),I=T.getCanvasBBox(),T.setMatrix([1,0,0,0,1,0,F.offsetX,F.offsetY,1])}this.layoutItems();var V=a.getCanvasBBox(),q=s.getCanvasBBox(),$=q.minX<0?Math.abs(q.minX)+k[3]:k[3],ve=I.maxY<q.minY?Math.abs(I.maxY-q.minY)+k[0]:I.maxY+k[0],de=[1,0,0,0,1,0,$,ve,1];s.setMatrix(de);var me=[(V=a.getCanvasBBox()).minX+V.width+k[1],V.minY+V.height+k[2]];if(v){F=Kn({position:"center",offsetX:0,offsetY:0},this.get("titleConfig")),I=T.getCanvasBBox();var Ie=T.getMatrix()||[1,0,0,0,1,0,0,0,1];F.position==="center"?Ie[6]=me[0]/2+F.offsetX:F.position==="right"?(Ie[6]=me[0]-k[3]+F.offsetX,v.attr({textAlign:"right"})):(Ie[6]=k[3]+F.offsetX,v.attr({textAlign:"left"})),T.setMatrix(Ie),I=T.getCanvasBBox(),de=[1,0,0,0,1,0,$=q.minX<0?Math.abs(q.minX)+k[3]:k[3],ve=q.minY<I.maxY?Math.abs(I.maxY-q.minY)+k[0]:I.maxY+k[0],1],s.setMatrix(de);var Ee=[1,0,0,0,1,0,$,ve,1];this.get("layout")==="vertical"?Ee[6]+=q.maxX+this.get("horiSep"):Ee[7]+=q.maxY+this.get("vertiSep"),u.setMatrix(Ee)}else{q=s.getCanvasBBox();var Pe=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?Pe[6]+=de[6]+q.maxX+this.get("horiSep"):Pe[7]+=de[7]+q.maxY+this.get("vertiSep"),u.setMatrix(Pe)}V=a.getCanvasBBox(),q=s.getCanvasBBox(),de=s.getMatrix()||[1,0,0,0,1,0,0,0,1];var Ze=u.getMatrix()||[1,0,0,0,1,0,0,0,1],it=u.getCanvasBBox();me=[Math.max(q.width+de[6],it.width+Ze[6])+k[1],Math.max(q.height+de[7],it.height+Ze[7])+k[2]],r.changeSize(me[0],me[1]);var ct=this.get("containerStyle"),st=a.getMatrix()||[1,0,0,0,1,0,0,0,1],jt=br.invertMatrix({x:0,y:0},st);return a.addShape("rect",{attrs:Kn({x:jt.x+(ct.lineWidth||1),y:jt.y+(ct.lineWidth||1),width:me[0]-2*(ct.lineWidth||1),height:me[1]-2*(ct.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},ct),name:"legend-back-rect",capture:!1}).toBack(),me},t.prototype.layoutItems=function(){var e=this.get("legendCanvas"),r=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),s=this.get("align"),u=[0,0],l=e.find(function($){return $.get("name")==="root"}),d=l.find(function($){return $.get("name")==="node-group"}),v=l.find(function($){return $.get("name")==="edge-group"}),k={min:0,max:-1/0},T=-1/0;d.get("children").forEach(function($,ve){ve===0&&(k.min=u[0]);var de=$.get("children")[0],me=$.getCanvasBBox(),Ie=de.getBBox(),Ee=Ie.width,Pe=Ie.height,Ze=0,it=0,ct=0;a==="vertical"?(it=u[1],ct=u[0]+Ee/2,u[0]=ct+me.height+i,Ze=me.maxX+it+Ee/2):(it=u[0]+Ee/2,ct=u[1],u[0]=it+me.width+r,Ze=me.maxY+ct+Pe/2),u[0]>k.max&&(k.max=u[0]),Ze>T&&(T=Ze),$.setMatrix([1,0,0,0,1,0,it,ct,1])});var I=k.max-k.min,j={min:0,max:-1/0},F=d.getCanvasBBox();u[0]=0,u[1]=a==="vertical"?F.maxX+r:F.maxY+i,v.get("children").forEach(function($,ve){ve===0&&(j.min=u[0]);var de=$.get("children")[0],me=$.getCanvasBBox(),Ie=de.getBBox(),Ee=Ie.width,Pe=Ie.height,Ze=0,it=0;a==="vertical"?(Ze=u[1],it=u[0],u[0]=it+me.height+i,$.setMatrix([1,0,0,0,1,0,0,it+Pe/2,1])):(Ze=u[0],it=u[1],u[0]=Ze+me.width+r,$.setMatrix([1,0,0,0,1,0,Ze+Ee/2,0,1])),u[0]>j.max&&(j.max=u[0])});var G=j.max-j.min;if(s&&s!==""&&s!=="left"){var V=I-G,q=s==="center"?Math.abs(V)/2:Math.abs(V);(V<0?d:v).get("children").forEach(function($){var ve=$.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?ve[7]+=q:ve[6]+=q,$.setMatrix(ve)})}},t.prototype.processData=function(){var e=this.get("data"),r={nodes:[],edges:[]};e.nodes&&(e.nodes.sort(function(i,a){return i.order-a.order}),e.nodes.forEach(function(i){var a,s,u,l,d,v=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((s=i.style)===null||s===void 0?void 0:s.r)||8,((u=i.style)===null||u===void 0?void 0:u.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],k=((d=i.labelCfg)===null||d===void 0?void 0:d.style)||{};r.nodes.push({id:i.id||Object(p.uniqueId)(),type:i.type||"circle",style:Kn({},i.style),order:i.order,label:i.label,itemType:"node",size:v,labelCfg:{position:"right",style:Kn({fontFamily:"Arial"},k)}})})),e.edges&&(e.edges.sort(function(i,a){return i.order-a.order}),e.edges.forEach(function(i){var a,s,u=i.type||"line";i.type==="cubic-horizontal"&&(u="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},d=i.size||[((s=i.style)===null||s===void 0?void 0:s.width)||8,1];r.edges.push({id:i.id||Object(p.uniqueId)(),type:u,size:d,style:Kn({lineWidth:Object(p.isArray)(d)?d[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:Kn({fontFamily:"Arial"},l)}})})),this.set("itemsData",r)},t.prototype.getContainer=function(){return this.get("container")},t.prototype.formatArray=function(e){var r=this.get(e);if(Object(p.isNumber)(r))this.set(e,[r,r,r,r]);else if(Object(p.isArray)(r))switch(r.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(e,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(e,[r[0],r[1],r[2],r[1]])}return this.get(e)},t.prototype.getShapeSize=function(e){var r,i,a;return e.size&&(Object(p.isArray)(e.size)?(r=e.size[0],i=e.size[1]||e.size[0],a=e.size[0]/2):Object(p.isNumber)(e.size)&&(r=e.size,i=e.size,a=e.size/2)),e.style&&(e.style.width&&(r=e.style.width),e.style.height&&(i=e.style.height),e.style.r&&(a=e.style.r)),a||(a=5),r||(r=a),i||(i=a),{width:r,height:i,r:a}},t.prototype.getStyle=function(e,r){return Kn(Kn({},e==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),r.style||{})},t.prototype.destroy=function(){var e=this.get("graph").get("container"),r=this.get("container");e.removeChild(r)},t}(lo)};sn("circle",{options:{size:or.defaultNode.size,style:{x:0,y:0,stroke:or.defaultNode.style.stroke,fill:or.defaultNode.style.fill,lineWidth:or.defaultNode.style.lineWidth},labelCfg:{style:{fill:or.nodeLabel.style.fill,fontSize:or.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:or.defaultNode.linkPoints.size,lineWidth:or.defaultNode.linkPoints.lineWidth,fill:or.defaultNode.linkPoints.fill,stroke:or.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(m.__assign)({},or.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=Object(p.deepMix)({},r,n.icon),s=t.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0}),u=a.width,l=a.height,d=a.show,v=a.text;return d&&(v?t.addShape("text",{attrs:Object(m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(m.__assign)({x:-u/2,y:-l/2},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(n,t),s},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,d=r.r,v=Object(m.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n)[0]/2;a&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:-k,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:k,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:-k,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:k,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.deepMix)({},t,e),i=this.getSize(n)[0]/2;return Object(m.__assign)({x:0,y:0,r:i},r)},update:function(n,t){var e=t.getContainer(),r=this.getSize(n),i={stroke:n.color,r:r[0]/2},a=t.get("keyShape"),s=Object(p.deepMix)({},a.attr(),i,n.style);this.updateShape(n,t,s,!0),this.updateLinkPoints(n,e)}},"single-node"),sn("rect",{options:{size:[100,30],style:{radius:0,stroke:or.defaultNode.style.stroke,fill:or.defaultNode.style.fill,lineWidth:or.defaultNode.style.lineWidth},labelCfg:{style:{fill:or.nodeLabel.style.fill,fontSize:or.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:or.defaultNode.linkPoints.size,lineWidth:or.defaultNode.linkPoints.lineWidth,fill:or.defaultNode.linkPoints.fill,stroke:or.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(m.__assign)({},or.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(n,t){var e=this.getShapeStyle(n),r=t.addShape("rect",{attrs:e,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(n,t),r},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,d=r.r,v=Object(m.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n),T=k[0],I=k[1];a&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:-T/2,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:T/2,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:-I/2,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:I/2,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getSize(n),a=r.width||i[0],s=r.height||i[1];return Object(m.__assign)({x:-a/2,y:-s/2,width:a,height:s},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getSize(n),a=t.get("keyShape");n.size||(i[0]=a.attr("width")||r.width,i[1]=a.attr("height")||r.height);var s={stroke:n.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},u=Object(p.mix)({},r,a.attr(),s);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!1),this.updateLinkPoints(n,e)}},"single-node"),sn("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:or.defaultNode.style.stroke,fill:or.defaultNode.style.fill,lineWidth:or.defaultNode.style.lineWidth},labelCfg:{style:{fill:or.nodeLabel.style.fill,fontSize:or.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:or.defaultNode.linkPoints.size,lineWidth:or.defaultNode.linkPoints.lineWidth,fill:or.defaultNode.linkPoints.fill,stroke:or.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(m.__assign)({},or.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=t.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),s=r.width,u=r.height,l=r.show,d=r.text;return l&&(d?t.addShape("text",{attrs:Object(m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(m.__assign)({x:-s/2,y:-u/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(n,t),a},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,d=r.r,v=Object(m.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n),T=k[0]/2,I=k[1]/2;a&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:-T,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:T,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:-I,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:I,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getSize(n),a=i[0]/2,s=i[1]/2;return Object(m.__assign)({x:0,y:0,rx:a,ry:s},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getSize(n),a={stroke:n.color,rx:i[0]/2,ry:i[1]/2},s=t.get("keyShape"),u=Object(p.mix)({},r,s.attr(),a);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!0),this.updateLinkPoints(n,e)}},"single-node"),sn("diamond",{options:{size:[80,80],style:{stroke:or.defaultNode.style.stroke,fill:or.defaultNode.style.fill,lineWidth:or.defaultNode.style.lineWidth},labelCfg:{style:{fill:or.nodeLabel.style.fill,fontSize:or.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:or.defaultNode.linkPoints.size,lineWidth:or.defaultNode.linkPoints.lineWidth,fill:or.defaultNode.linkPoints.fill,stroke:or.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(m.__assign)({},or.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=t.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=r.width,u=r.height,l=r.show,d=r.text;return l&&(d?t.addShape("text",{attrs:Object(m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(m.__assign)({x:-s/2,y:-u/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(n,t),a},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,d=r.r,v=Object(m.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n),T=k[0],I=k[1];a&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:-T/2,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:T/2,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:-I/2,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:I/2,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(n){var t=this.getSize(n),e=t[0],r=t[1];return[["M",0,-r/2],["L",e/2,0],["L",0,r/2],["L",-e/2,0],["Z"]]},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getPath(n);return Object(m.__assign)({path:i},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(n),a={stroke:n.color,path:i},s=t.get("keyShape"),u=Object(p.mix)({},r,s.attr(),a);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!0),this.updateLinkPoints(n,e)}},"single-node"),sn("triangle",{options:{size:40,direction:"up",style:{stroke:or.defaultNode.style.stroke,fill:or.defaultNode.style.fill,lineWidth:or.defaultNode.style.lineWidth},labelCfg:{style:{fill:or.nodeLabel.style.fill,fontSize:or.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:or.defaultNode.linkPoints.size,lineWidth:or.defaultNode.linkPoints.lineWidth,fill:or.defaultNode.linkPoints.fill,stroke:or.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(m.__assign)({},or.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(n,t){var e=this.getOptions(n),r=e.icon,i=r===void 0?{}:r,a=e.direction,s=this.getShapeStyle(n),u=n.direction||a,l=t.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),d=i.width,v=i.height,k=i.show,T=i.offset,I=i.text;if(k)if(I)t.addShape("text",{attrs:Object(m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var j=-d/2,F=-v/2;u!=="up"&&u!=="down"||(F+=T),u!=="left"&&u!=="right"||(j+=T),t.addShape("image",{attrs:Object(m.__assign)({x:j,y:F},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(n,t),l},drawLinkPoints:function(n,t){var e=this.getOptions(n),r=e.linkPoints,i=r===void 0?{}:r,a=e.direction,s=n.direction||a,u=i.top,l=i.left,d=i.right,v=i.bottom,k=i.size,T=i.r,I=Object(m.__rest)(i,["top","left","right","bottom","size","r"]),j=this.getSize(n)[0];if(l){var F=null,G=j*Math.sin(1/3*Math.PI),V=j*Math.sin(1/3*Math.PI);s==="up"?F=[-V,G]:s==="down"?F=[-V,-G]:s==="left"&&(F=[-V,V-G]),F&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},I),{x:F[0],y:F[1],r:k/2||T||5}),className:"link-point-left",name:"link-point-left"})}if(d){var q=null;G=j*Math.sin(1/3*Math.PI),V=j*Math.sin(1/3*Math.PI),s==="up"?q=[V,G]:s==="down"?q=[V,-G]:s==="right"&&(q=[V,V-G]),q&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},I),{x:q[0],y:q[1],r:k/2||T||5}),className:"link-point-right",name:"link-point-right"})}if(u){var $=null;G=j*Math.sin(1/3*Math.PI),V=j*Math.sin(1/3*Math.PI),s==="up"?$=[V-G,-G]:s==="left"?$=[V,-G]:s==="right"&&($=[-V,-G]),$&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},I),{x:$[0],y:$[1],r:k/2||T||5}),className:"link-point-top",name:"link-point-top"})}if(v){var ve=null;G=j*Math.sin(1/3*Math.PI),V=j*Math.sin(1/3*Math.PI),s==="down"?ve=[-V+G,G]:s==="left"?ve=[V,G]:s==="right"&&(ve=[-V,G]),ve&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},I),{x:ve[0],y:ve[1],r:k/2||T||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(n){var t=this.getOptions(n).direction,e=n.direction||t,r=this.getSize(n)[0],i=r*Math.sin(1/3*Math.PI),a=r*Math.sin(1/3*Math.PI),s=[["M",-a,i],["L",0,-i],["L",a,i],["Z"]];return e==="down"?s=[["M",-a,-i],["L",a,-i],["L",0,i],["Z"]]:e==="left"?s=[["M",-a,a-i],["L",a,-a],["L",a,a],["Z"]]:e==="right"&&(s=[["M",a,a-i],["L",-a,a],["L",-a,-a],["Z"]]),s},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getPath(n);return Object(m.__assign)({path:i},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(n),a={stroke:n.color,path:i},s=t.get("keyShape"),u=Object(p.mix)({},r,s.attr(),a);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!0),this.updateLinkPoints(n,e)},updateLinkPoints:function(n,t){var e=this.getOptions({}),r=e.linkPoints,i=e.direction,a=n.direction||i,s=t.find(function(jt){return jt.get("className")==="link-point-left"}),u=t.find(function(jt){return jt.get("className")==="link-point-right"}),l=t.find(function(jt){return jt.get("className")==="link-point-top"}),d=t.find(function(jt){return jt.get("className")==="link-point-bottom"}),v=r,k=s||u||l||d;k&&(v=k.attr());var T=Object(p.mix)({},v,n.linkPoints),I=T.fill,j=T.stroke,F=T.lineWidth,G=T.size/2;G||(G=T.r);var V=n.linkPoints?n.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},q=V.left,$=V.right,ve=V.top,de=V.bottom,me=this.getSize(n)[0],Ie={r:G,fill:I,stroke:j,lineWidth:F},Ee=null,Pe=me*Math.sin(1/3*Math.PI),Ze=me*Math.sin(1/3*Math.PI);a==="up"?Ee=[-Ze,Pe]:a==="down"?Ee=[-Ze,-Pe]:a==="left"&&(Ee=[-Ze,Ze-Pe]),Ee&&(s?q||q===void 0?s.attr(Object(m.__assign)(Object(m.__assign)({},Ie),{x:Ee[0],y:Ee[1]})):s.remove():q&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},Ie),{x:Ee[0],y:Ee[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var it=null;a==="up"?it=[Ze,Pe]:a==="down"?it=[Ze,-Pe]:a==="right"&&(it=[Ze,Ze-Pe]),it&&(u?$||$===void 0?u.attr(Object(m.__assign)(Object(m.__assign)({},Ie),{x:it[0],y:it[1]})):u.remove():$&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},Ie),{x:it[0],y:it[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var ct=null;a==="up"?ct=[Ze-Pe,-Pe]:a==="left"?ct=[Ze,-Pe]:a==="right"&&(ct=[-Ze,-Pe]),ct&&(l?ve||ve===void 0?l.attr(Object(m.__assign)(Object(m.__assign)({},Ie),{x:ct[0],y:ct[1]})):l.remove():ve&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},Ie),{x:ct[0],y:ct[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var st=null;a==="down"?st=[-Ze+Pe,Pe]:a==="left"?st=[Ze,Pe]:a==="right"&&(st=[-Ze,Pe]),st&&(d?de||de===void 0?d.attr(Object(m.__assign)(Object(m.__assign)({},Ie),{x:st[0],y:st[1]})):d.remove():de&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},Ie),{x:st[0],y:st[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),sn("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:or.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(n,t){var e=this.getOptions(n).preRect,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=this.getSize(n),s=a[0],u=a[1],l=t.addShape("rect",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),d=r.show,v=Object(m.__rest)(r,["show"]);return d&&t.addShape("rect",{attrs:Object(m.__assign)({x:-s/2,y:-u/2,height:u},v),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(n,t),this.drawStateIcon(n,t),this.drawLinkPoints(n,t),l},drawLogoIcon:function(n,t){var e=this.getOptions(n).logoIcon,r=e===void 0?{}:e,i=this.getSize(n)[0];if(r.show){var a=r.width,s=r.height,u=r.x,l=r.y,d=r.offset,v=r.text,k=Object(m.__rest)(r,["width","height","x","y","offset","text"]);v?t.addShape("text",{attrs:Object(m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},k),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.addShape("image",{attrs:Object(m.__assign)(Object(m.__assign)({},k),{x:u||-i/2+a+d,y:l||-s/2,width:a,height:s}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(n,t){var e=this.getOptions(n).stateIcon,r=e===void 0?{}:e,i=this.getSize(n)[0];if(r.show){var a=r.width,s=r.height,u=r.x,l=r.y,d=r.offset,v=r.text,k=Object(m.__rest)(r,["width","height","x","y","offset","text"]);v?t.addShape("text",{attrs:Object(m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},k),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.addShape("image",{attrs:Object(m.__assign)(Object(m.__assign)({},k),{x:u||i/2-a+d,y:l||-s/2,width:a,height:s}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,d=r.r,v=Object(m.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n),T=k[0],I=k[1];a&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:-T/2,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:T/2,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:-I/2,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},v),{x:0,y:I/2,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(n,t){var e=this.getOptions(n),r=e.labelCfg,i=r===void 0?{}:r,a=e.logoIcon,s=a===void 0?{}:a,u=e.descriptionCfg,l=u===void 0?{}:u,d=this.getSize(n)[0],v=null,k=s.show,T=s.width,I=-d/2+i.offset;k&&(I=-d/2+T+i.offset);var j=i.style,F=l.style,G=l.paddingTop;return Object(p.isString)(n.description)?(v=t.addShape("text",{attrs:Object(m.__assign)(Object(m.__assign)({},j),{x:I,y:-5,text:n.label}),className:"text-shape",name:"text-shape",draggable:!0}),t.addShape("text",{attrs:Object(m.__assign)(Object(m.__assign)({},F),{x:I,y:17+(G||0),text:n.description}),className:"rect-description",name:"rect-description",draggable:!0})):v=t.addShape("text",{attrs:Object(m.__assign)(Object(m.__assign)({},j),{x:I,y:7,text:n.label}),className:"text-shape",name:"text-shape",draggable:!0}),v},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getSize(n),a=r.width||i[0],s=r.height||i[1];return Object(m.__assign)({x:-a/2,y:-s/2,width:a,height:s},r)},update:function(n,t){var e=this.getOptions(n),r=e.style,i=r===void 0?{}:r,a=e.labelCfg,s=a===void 0?{}:a,u=e.descriptionCfg,l=u===void 0?{}:u,d=this.getSize(n),v=d[0],k=d[1];t.get("keyShape").attr(Object(m.__assign)(Object(m.__assign)({},i),{x:-v/2,y:-k/2,width:v,height:k}));var T=t.getContainer(),I=T.find(function(Gt){return Gt.get("className")==="rect-logo-icon"}),j=I?I.attr():{},F=Object(p.mix)({},j,n.logoIcon),G=F.width;G===void 0&&(G=this.options.logoIcon.width);var V=n.logoIcon?n.logoIcon.show:void 0,q=s.offset,$=-v/2+G+q;V||V===void 0||($=-v/2+q);var ve=T.find(function(Gt){return Gt.get("className")==="node-label"}),de=T.find(function(Gt){return Gt.get("className")==="rect-description"});if(n.label)if(ve){var me=n.labelCfg?n.labelCfg.style:{},Ie=Object(p.mix)({},ve.attr(),me);n.label&&(Ie.text=n.label),Ie.x=$,Object(p.isString)(n.description)&&(Ie.y=-5),de&&(de.resetMatrix(),de.attr({x:$})),ve.resetMatrix(),ve.attr(Ie)}else T.addShape("text",{attrs:Object(m.__assign)(Object(m.__assign)({},s.style),{x:$,y:n.description?-5:7,text:n.label}),className:"node-label",name:"node-label",draggable:!0});if(Object(p.isString)(n.description)){var Ee=l.paddingTop;if(de){me=n.descriptionCfg?n.descriptionCfg.style:{};var Pe=Object(p.mix)({},de.attr(),me);Object(p.isString)(n.description)&&(Pe.text=n.description),Pe.x=$,de.resetMatrix(),de.attr(Object(m.__assign)(Object(m.__assign)({},Pe),{y:17+(Ee||0)}))}else T.addShape("text",{attrs:Object(m.__assign)(Object(m.__assign)({},l.style),{x:$,y:17+(Ee||0),text:n.description}),className:"rect-description",name:"rect-description",draggable:!0})}var Ze=T.find(function(Gt){return Gt.get("className")==="pre-rect"});if(Ze){var it=Object(p.mix)({},Ze.attr(),n.preRect);Ze.attr(Object(m.__assign)(Object(m.__assign)({},it),{x:-v/2,y:-k/2,height:k}))}if(I)if(V||V===void 0){var ct=F.width,st=F.height,jt=F.x,gt=F.y,Pt=F.offset,Rt=Object(m.__rest)(F,["width","height","x","y","offset"]);I.attr(Object(m.__assign)(Object(m.__assign)({},Rt),{x:jt||-v/2+ct+Pt,y:gt||-st/2,width:ct,height:st}))}else I.remove();else V&&this.drawLogoIcon(n,T);var Zt=T.find(function(Gt){return Gt.get("className")==="rect-state-icon"}),Ct=Zt?Zt.attr():{},Vt=Object(p.mix)({},Ct,n.stateIcon);if(Zt){Vt.show||Vt.show===void 0||Zt.remove();var Dt=Vt.width,qt=(st=Vt.height,jt=Vt.x,gt=Vt.y,Vt.offset),$t=Object(m.__rest)(Vt,["width","height","x","y","offset"]);Zt.attr(Object(m.__assign)(Object(m.__assign)({},$t),{x:jt||v/2-Dt+qt,y:gt||-st/2,width:Dt,height:st}))}else Vt.show&&this.drawStateIcon(n,T);this.updateLinkPoints(n,T)}},"single-node"),sn("star",{options:{size:60,style:{stroke:or.defaultNode.style.stroke,fill:or.defaultNode.style.fill,lineWidth:or.defaultNode.style.lineWidth},labelCfg:{style:{fill:or.nodeLabel.style.fill,fontSize:or.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:or.defaultNode.linkPoints.size,lineWidth:or.defaultNode.linkPoints.lineWidth,fill:or.defaultNode.linkPoints.fill,stroke:or.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(m.__assign)({},or.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=t.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=r.width,u=r.height,l=r.show,d=r.text;return l&&(d?t.addShape("text",{attrs:Object(m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(m.__assign)({x:-s/2,y:-u/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(n,t),a},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.leftBottom,l=r.rightBottom,d=r.size,v=r.r,k=Object(m.__rest)(r,["top","left","right","leftBottom","rightBottom","size","r"]),T=this.getSize(n)[0];if(s){var I=Math.cos(.1*Math.PI)*T,j=Math.sin(.1*Math.PI)*T;t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},k),{x:I,y:-j,r:d/2||v||5}),className:"link-point-right",name:"link-point-right"})}i&&(I=Math.cos(.5*Math.PI)*T,j=Math.sin(.5*Math.PI)*T,t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},k),{x:I,y:-j,r:d/2||v||5}),className:"link-point-top",name:"link-point-top"})),a&&(I=Math.cos(.9*Math.PI)*T,j=Math.sin(.9*Math.PI)*T,t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},k),{x:I,y:-j,r:d/2||v||5}),className:"link-point-left",name:"link-point-left"})),u&&(I=Math.cos(1.3*Math.PI)*T,j=Math.sin(1.3*Math.PI)*T,t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},k),{x:I,y:-j,r:d/2||v||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),l&&(I=Math.cos(1.7*Math.PI)*T,j=Math.sin(1.7*Math.PI)*T,t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},k),{x:I,y:-j,r:d/2||v||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(n){for(var t=this.getSize(n)[0],e=3*t/8,r=n.innerR||e,i=[],a=0;a<5;a++){var s=Math.cos((18+72*a)/180*Math.PI)*t,u=Math.sin((18+72*a)/180*Math.PI)*t,l=Math.cos((54+72*a)/180*Math.PI)*r,d=Math.sin((54+72*a)/180*Math.PI)*r;a===0?i.push(["M",s,-u]):i.push(["L",s,-u]),i.push(["L",l,-d])}return i.push(["Z"]),i},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getPath(n);return Object(m.__assign)({path:i},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(n),a={stroke:n.color,path:i},s=t.get("keyShape"),u=Object(p.mix)({},r,s.attr(),a);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!0),this.updateLinkPoints(n,e)},updateLinkPoints:function(n,t){var e=this.getOptions({}).linkPoints,r=t.find(function(Pe){return Pe.get("className")==="link-point-left"}),i=t.find(function(Pe){return Pe.get("className")==="link-point-right"}),a=t.find(function(Pe){return Pe.get("className")==="link-point-top"}),s=t.find(function(Pe){return Pe.get("className")==="link-point-left-bottom"}),u=t.find(function(Pe){return Pe.get("className")==="link-point-right-bottom"}),l=e,d=r||i||a||s||u;d&&(l=d.attr());var v=Object(p.mix)({},l,n.linkPoints),k=v.fill,T=v.stroke,I=v.lineWidth,j=v.size/2;j||(j=v.r);var F=n.linkPoints?n.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},G=F.left,V=F.right,q=F.top,$=F.leftBottom,ve=F.rightBottom,de=this.getSize(n)[0],me={r:j,fill:k,stroke:T,lineWidth:I},Ie=Math.cos(.1*Math.PI)*de,Ee=Math.sin(.1*Math.PI)*de;i?V||V===void 0?i.attr(Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee})):i.remove():V&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Ie=Math.cos(.5*Math.PI)*de,Ee=Math.sin(.5*Math.PI)*de,a?q||q===void 0?a.attr(Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee})):a.remove():q&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Ie=Math.cos(.9*Math.PI)*de,Ee=Math.sin(.9*Math.PI)*de,r?G||G===void 0?r.attr(Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee})):r.remove():G&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Ie=Math.cos(1.3*Math.PI)*de,Ee=Math.sin(1.3*Math.PI)*de,s?$||$===void 0?s.attr(Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee})):s.remove():$&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),Ie=Math.cos(1.7*Math.PI)*de,Ee=Math.sin(1.7*Math.PI)*de,u?ve||ve===void 0?u.attr(Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee})):s.remove():ve&&t.addShape("circle",{attrs:Object(m.__assign)(Object(m.__assign)({},me),{x:Ie,y:-Ee}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var hs=br.defaultSubjectColors;sn("donut",{options:{size:or.defaultNode.size,style:{x:0,y:0,stroke:or.defaultNode.style.stroke,fill:or.defaultNode.style.fill,lineWidth:or.defaultNode.style.lineWidth},labelCfg:{style:{fill:or.nodeLabel.style.fill,fontSize:or.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:or.defaultNode.linkPoints.size,lineWidth:or.defaultNode.linkPoints.lineWidth,fill:or.defaultNode.linkPoints.fill,stroke:or.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(m.__assign)({},or.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=Object(p.deepMix)({},r,n.icon),s=t.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"}),u=a.width,l=a.height,d=a.show,v=a.text;d&&(v?t.addShape("text",{attrs:Object(m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(m.__assign)({x:-u/2,y:-l/2},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var k=s.attr("r"),T=.6*k,I=(k+T)/2,j=n,F=j.donutAttrs,G=F===void 0?{}:F,V=j.donutColorMap,q=V===void 0?{}:V,$=Object.keys(G).length;if(G&&$>1){var ve=[],de=0;if(Object.keys(G).forEach(function(Pe){var Ze=G[Pe]||0;Object(p.isNumber)(Ze)&&(ve.push({key:Pe,value:Ze,color:q[Pe]}),de+=Ze)}),de){var me=k-T;if($===1)return void t.addShape("circle",{attrs:{r:I,x:0,y:0,stroke:ve[0].color||hs[0],lineWidth:me},name:"fan-shape-0"});var Ie=[I,0],Ee=0;ve.forEach(function(Pe,Ze){var it=Pe.value/de;if(!(it<.001))if(it>.999&&(it=1),it!==1){Pe.percent=it,Pe.angle=it*Math.PI*2,Pe.beginAgnle=Ee,Ee+=Pe.angle,Pe.endAngle=Ee,Pe.arcBegin=Ie,Pe.arcEnd=[I*Math.cos(Pe.endAngle),-I*Math.sin(Pe.endAngle)];var ct=Pe.angle>Math.PI?1:0,st=[["M",Pe.arcBegin[0],Pe.arcBegin[1]],["A",I,I,0,ct,0,Pe.arcEnd[0],Pe.arcEnd[1]],["L",Pe.arcEnd[0],Pe.arcEnd[1]]];t.addShape("path",{attrs:{path:st,lineWidth:me,stroke:Pe.color||hs[Ze%hs.length]},name:"fan-shape-"+Ze}),Ie=Pe.arcEnd}else t.addShape("circle",{attrs:{r:I,x:0,y:0,stroke:Pe.color||hs[Ze%hs.length],lineWidth:me},name:"fan-shape-"+Ze})})}}return this.drawLinkPoints(n,t),s},update:void 0},"circle");var Js=function(n){var t=n.x,e=n.y;return{x:t,y:e,centerX:t,centerY:e,minX:t,minY:e,maxX:t,maxY:e,height:0,width:0}},ac=function(n){for(var t=[],e={},r=n.length-1;r>=0;r--){var i=n[r];i.id=i.x+"|||"+i.y,e[i.id]=i,t.push(i)}return t},Op=function(n){return ac(n)},eu=function(n,t){return n.width||n.height?{centerX:n.centerX,centerY:n.centerY,minX:n.minX-t,minY:n.minY-t,maxX:n.maxX+t,maxY:n.maxY+t,height:n.height+2*t,width:n.width+2*t}:n},sc=function(n,t,e){var r=function(s,u){var l=Math.abs(s.x-u.centerX),d=Math.abs(s.y-u.centerY);return l===0&&d===0?0:l/u.width>d/u.height}(t,n);if(r===0){var i=n.centerX,a=n.centerY;return e.y<t.y?a=n.minY:e.x>t.x?i=n.maxX:e.x<t.x?i=n.minX:e.x===t.x&&(a=n.maxY),{x:i,y:a}}return r?{x:t.x>n.centerX?n.maxX:n.minX,y:t.y}:{x:t.x,y:t.y>n.centerY?n.maxY:n.minY}},Mp=function(n,t){var e=Math.min(n.minX,t.minX),r=Math.min(n.minY,t.minY),i=Math.max(n.maxX,t.maxX),a=Math.max(n.maxY,t.maxY);return{centerX:(e+i)/2,centerY:(r+a)/2,minX:e,minY:r,maxX:i,maxY:a,height:a-r,width:i-e}},uc=function(n){return[{x:n.minX,y:n.minY},{x:n.maxX,y:n.minY},{x:n.maxX,y:n.maxY},{x:n.minX,y:n.maxY}]},tu=function(n,t){var e=n.x,r=n.y;return e<t.minX||e>t.maxX||r<t.minY||r>t.maxY},ds=function(n,t){return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)},kp=function(n,t,e,r,i){return ds(n,t)+ds(n,e)+function(a,s){var u=0;return s.forEach(function(l){l&&(a.x===l.x&&(u+=-2),a.y===l.y&&(u+=-2))}),u}(n,[t,e,r,i])},lb=function n(t,e,r,i,a){a===void 0&&(a=0),t.unshift(e[i]),r[i]&&r[i]!==i&&a<=100&&n(t,e,r,r[i],a+1)},ru=function(n,t,e,r){var i=e.x-n.x,a=e.y-n.y,s=r.x-n.x,u=r.y-n.y,l=e.x-t.x,d=e.y-t.y,v=r.x-t.x,k=r.y-t.y;return(i*u-a*s)*(l*k-d*v)<=0&&(i*d-a*l)*(s*k-u*v)<=0},cc=function(n,t,e){if(e.width||e.height){var r=uc(e),i=r[0],a=r[1],s=r[2],u=r[3];return ru(n,t,i,a)||ru(n,t,i,u)||ru(n,t,a,s)||ru(n,t,s,u)}return!1},fb=function(n,t,e,r){var i=[];return n.forEach(function(a){if(a!==t&&(a.x===t.x||a.y===t.y)){if(cc(a,t,e)||cc(a,t,r))return;i.push(a)}}),ac(i)},Ap=function(n,t){var e=[],r=n[0];return e.push("M"+r.x+" "+r.y),n.forEach(function(i,a){var s=n[a+1],u=n[a+2];if(s&&u)if(function(k,T,I){return!(k.x===T.x&&T.x===I.x||k.y===T.y&&T.y===I.y)}(i,s,u)){var l=function(k,T,I,j){var F=ds(k,T),G=ds(I,T);return F<j&&(j=F),G<j&&(j=G),[{x:T.x-j/F*(T.x-k.x),y:T.y-j/F*(T.y-k.y)},{x:T.x-j/G*(T.x-I.x),y:T.y-j/G*(T.y-I.y)}]}(i,s,u,t),d=l[0],v=l[1];e.push("L"+d.x+" "+d.y),e.push("Q"+s.x+" "+s.y+" "+v.x+" "+v.y),e.push("L"+v.x+" "+v.y)}else e.push("L"+s.x+" "+s.y);else s&&e.push("L"+s.x+" "+s.y)}),e.join("")},Cp=function(n,t,e,r,i){var a,s;if(e&&e.getType()?e.getType()==="combo"?((a=e.getKeyShape().getCanvasBBox()||Js(n)).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2):a=e.getBBox():a=Js(n),r&&r.getType())if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var l=r.getModel(),d=l.x,v=l.y;(s={x:d,y:v,width:u.width,height:u.height,minX:u.minX+d,maxX:u.maxX+d,minY:u.minY+v,maxY:u.maxY+v}).centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Js(t)}else s=r&&r.getBBox();else s=Js(t);var k=eu(a,i),T=eu(s,i),I=sc(k,n,t),j=sc(T,t,n),F=function(de){de===void 0&&(de=[]);var me=[],Ie=[];de.forEach(function(ct){me.push(ct.x),Ie.push(ct.y)});var Ee=Math.min.apply(Math,me),Pe=Math.max.apply(Math,me),Ze=Math.min.apply(Math,Ie),it=Math.max.apply(Math,Ie);return{centerX:(Ee+Pe)/2,centerY:(Ze+it)/2,maxX:Pe,maxY:it,minX:Ee,minY:Ze,height:it-Ze,width:Pe-Ee}}([I,j]),G=Mp(k,F),V=Mp(T,F),q=[];q=q.concat(uc(G)).concat(uc(V));var $={x:(n.x+t.x)/2,y:(n.y+t.y)/2};[F,G,V].forEach(function(de){q=q.concat(function(me,Ie){return function(Ee,Pe){return Pe<Ee.minX||Pe>Ee.maxX?[]:[{x:Pe,y:Ee.minY},{x:Pe,y:Ee.maxY}]}(me,Ie.x).concat(function(Ee,Pe){return Pe<Ee.minY||Pe>Ee.maxY?[]:[{x:Ee.minX,y:Pe},{x:Ee.maxX,y:Pe}]}(me,Ie.y))}(de,$).filter(function(me){return tu(me,k)&&tu(me,T)}))}),[{x:I.x,y:j.y},{x:j.x,y:I.y}].forEach(function(de){tu(de,k)&&tu(de,T)&&q.push(de)}),q.unshift(I),q.push(j);var ve=function(de,me,Ie,Ee,Pe,Ze,it){var ct=[],st=[me],jt={},gt={},Pt={};gt[me.id]=0,Pt[me.id]=kp(me,Ie,me);var Rt,Zt,Ct,Vt,Dt,qt={};for(de.forEach(function(Gt){qt[Gt.id]=Gt});st.length;){if(Rt=void 0,Zt=1/0,st.forEach(function(Gt){Pt[Gt.id]<=Zt&&(Zt=Pt[Gt.id],Rt=Gt)}),Rt===Ie){var $t=[];return lb($t,qt,jt,Ie.id),$t}Vt=Rt,Dt=void 0,(Dt=(Ct=st).indexOf(Vt))>-1&&Ct.splice(Dt,1),ct.push(Rt),fb(de,Rt,Ee,Pe).forEach(function(Gt){if(ct.indexOf(Gt)===-1){st.indexOf(Gt)===-1&&st.push(Gt);var lr=Pt[Rt.id]+ds(Rt,Gt);gt[Gt.id]&&lr>=gt[Gt.id]||(jt[Gt.id]=Rt.id,gt[Gt.id]=lr,Pt[Gt.id]=gt[Gt.id]+kp(Gt,Ie,me,Ze,it))}})}return[me,Ie]}(q=ac(q),I,j,a,s,n,t);return ve.unshift(n),ve.push(t),Op(ve)},hb={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(n,t){return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)},fallbackRoute:function(n,t,e,r,i){return Op(Cp(n,t,e,r,i.offset))}},Vo=function(n,t){var e=Math.round(Math.abs(n/t));return e<0?0:(n<0?-1:1)*e},lc=function(n,t){var e=t.x-n.x,r=t.y-n.y;return e||r?Math.atan2(r,e):0},Tp=function(n,t){var e=Math.abs(n-t);return e>Math.PI?2*Math.PI-e:e},Ip=function(n,t,e){for(var r=1/0,i=0,a=t.length;i<a;i++){var s=e(n,t[i]);s<r&&(r=s)}return r},jp=function(n,t,e,r,i){var a=[];if(!e)return[n];var s=i.directions,u=i.offset,l=e.getBBox(),d=t.x>l.minX&&t.x<l.maxX&&t.y>l.minY&&t.y<l.maxY,v=eu(l,u);for(var k in v)v[k]=Vo(v[k],i.gridSize);if(d){for(var T=0,I=s;T<I.length;T++){var j=I[T],F=[[{x:v.minX,y:v.minY},{x:v.maxX,y:v.minY}],[{x:v.minX,y:v.minY},{x:v.minX,y:v.maxY}],[{x:v.maxX,y:v.minY},{x:v.maxX,y:v.maxY}],[{x:v.minX,y:v.maxY},{x:v.maxX,y:v.maxY}]];for(k=0;k<4;k++){var G=F[k],V=br.getLineIntersect(n,{x:n.x+j.stepX*v.width,y:n.y+j.stepY*v.height},G[0],G[1]);V&&!cc(n,V,l)&&(V.id=V.x+"|||"+V.y,a.push(V))}}return a}var q=sc(v,n,r);return q.id=q.x+"|||"+q.y,[q]},fc=function(n,t,e,r){var i=lc(n,t);if(!e[n.id]){var a=lc(r,n);return Tp(a,i)}var s=lc({x:e[n.id].x,y:e[n.id].y},n);return Tp(s,i)},db=function(n,t,e,r,i,a,s){var u=[r],l=n.id,d=n.x,v=n.y,k={x:d,y:v,id:l};for(fc(k,a,t,e)&&u.unshift({x:a.x===r.x?r.x:k.x*s,y:a.y===r.y?r.y:k.y*s});t[l]&&t[l].id!==l;){var T={x:d,y:v,id:l},I=t[l].id,j=t[l].x,F=t[l].y,G={x:j,y:F,id:I};fc(G,T,t,e)&&u.unshift({x:G.x===T.x?u[0].x:G.x*s,y:G.y===T.y?u[0].y:G.y*s}),l=I,d=j,v=F}var V=d,q=v;return u[0].x=V===e.x?i.x:u[0].x,u[0].y=q===e.y?i.y:u[0].y,u.unshift(i),u},pb=function(n,t,e,r,i){if(isNaN(n.x)||isNaN(t.x))return[];var a=Object(p.deepMix)(hb,i);a.obstacles=a.obstacles||[];var s=a.gridSize,u=function(ct,st,jt){var gt={};return ct.forEach(function(Pt){if(Pt)for(var Rt=eu(Pt.getBBox(),jt),Zt=Vo(Rt.minX,st);Zt<=Vo(Rt.maxX,st);Zt+=1)for(var Ct=Vo(Rt.minY,st);Ct<=Vo(Rt.maxY,st);Ct+=1)gt[Zt+"|||"+Ct]=!0}),gt}(a.obstacles.concat([e,r]),s,a.offset),l={x:Vo(n.x,s),y:Vo(n.y,s)},d={x:Vo(t.x,s),y:Vo(t.y,s)};n.id=l.x+"|||"+l.y,t.id=d.x+"|||"+d.y;var v=jp(l,n,e,d,a),k=jp(d,t,r,l,a);v.forEach(function(ct){delete u[ct.id]}),k.forEach(function(ct){delete u[ct.id]});for(var T={},I={},j={},F={},G={},V=0;V<v.length;V++){var q=v[V];T[q.id]=q,F[q.id]=0,G[q.id]=Ip(q,k,a.distFunc)}for(var $,ve,de,me,Ie,Ee,Pe,Ze=a.maximumLoops,it=a.penalties;Object.keys(T).length>0&&Ze>0&&($=void 0,ve=1/0,Object.keys(T).forEach(function(ct){var st=T[ct].id;G[st]<=ve&&(ve=G[st],$=T[st])}),$);){if(k.findIndex(function(ct){return ct.x===$.x&&ct.y===$.y})>-1)return db($,j,l,t,n,d,s);for(delete T[$.id],I[$.id]=!0,V=0;V<a.directions.length;V++)de=a.directions[V],I[(me={x:$.x+de.stepX,y:$.y+de.stepY,id:Math.round($.x)+de.stepX+"|||"+(Math.round($.y)+de.stepY)}).id]||(Pe=fc($,me,j,l))>a.maxAllowedDirectionChange||u[me.id]||(T[me.id]||(T[me.id]=me),Ie=a.distFunc($,me)+(isNaN(it[Pe])?s:it[Pe]),Ee=F[$.id]+Ie,F[me.id]&&Ee>=F[me.id]||(j[me.id]=$,F[me.id]=Ee,G[me.id]=Ee+Ip(me,k,a.distFunc)));Ze-=1}return a.fallbackRoute(n,t,e,r,a)};Ii("polyline",{options:{color:or.defaultEdge.color,size:or.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:or.defaultEdge.style.stroke,lineAppendWidth:or.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:or.edgeLabel.style.fill,fontSize:or.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:Object(m.__assign)({},or.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(n,t){var e=this.getShapeStyle(n);return e.radius===0&&delete e.radius,t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e})},getShapeStyle:function(n){var t=this.options.style,e={stroke:n.color},r=Object(p.mix)({},t,e,n.style);n=this.getPathPoints(n),this.radius=r.radius,this.offset=r.offset;var i=n.startPoint,a=n.endPoint,s=this.getControlPoints(n),u=[i];s&&(u=u.concat(s)),u.push(a);var l=n.sourceNode,d=n.targetNode,v=r.radius,k=this.options.routeCfg,T=Object(p.mix)({},k,n.routeCfg);T.offset=r.offset;var I=this.getPath(u,l,d,v,T);return(Object(p.isArray)(I)&&I.length<=1||Object(p.isString)(I)&&I.indexOf("L")===-1)&&(I="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(a.x)||isNaN(a.y))&&(I="M0 0, L0 0"),Object(p.mix)({},or.defaultEdge.style,r,{lineWidth:n.size,path:I})},updateShapeStyle:function(n,t){var e=t.getContainer();if(t.isVisible()){var r={stroke:n.color},i=e.find(function($){return $.get("className")==="edge-shape"})||t.getKeyShape(),a=n.size,s=(n=this.getPathPoints(n)).startPoint,u=n.endPoint,l=this.getControlPoints(n),d=[s];l&&(d=d.concat(l)),d.push(u);var v=i.attr(),k=Object(p.mix)({},r,v,n.style),T=n.sourceNode,I=n.targetNode,j=k.radius,F=this.options.routeCfg,G=Object(p.mix)({},F,n.routeCfg);G.offset=k.offset;var V=this.getPath(d,T,I,j,G);(Object(p.isArray)(V)&&V.length<=1||Object(p.isString)(V)&&V.indexOf("L")===-1)&&(V="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(V="M0 0, L0 0"),v.endArrow&&k.endArrow===!1&&(n.style.endArrow={path:""}),v.startArrow&&k.startArrow===!1&&(n.style.startArrow={path:""});var q=Object(p.mix)(r,i.attr(),{lineWidth:a,path:V},n.style);i&&i.attr(q)}},getPath:function(n,t,e,r,i){var a=i.offset,s=i.simple;if(!a||n.length>2){if(r)return Ap(n,r);var u=[];return Object(p.each)(n,function(d,v){v===0?u.push(["M",d.x,d.y]):u.push(["L",d.x,d.y])}),u}var l=s?Cp(n[n.length-1],n[0],e,t,a):pb(n[0],n[n.length-1],t,e,i);return l&&l.length?r?Ap(l,r):br.pointsToPolygon(l):"M0 0, L0 0"}},"single-edge");var Pp=No.cloneEvent,Np=No.isNaN,Dp=Math.abs,gb=["shift","ctrl","alt","control"],vb={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(n){var t=this.origin,e=+n.clientX,r=+n.clientY;if(!Np(e)&&!Np(r)){var i=e-t.x,a=r-t.y;this.get("direction")==="x"?a=0:this.get("direction")==="y"&&(i=0),this.origin={x:e,y:r};var s=this.graph.get("width"),u=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),d=this.scalableRange,v=this.scalableRange;d<1&&d>-1&&(d*=s,v*=u),(l.minX<=s+d&&l.minX+i>s+d||l.maxX+d>=0&&l.maxX+d+i<0)&&(i=0),(l.minY<=u+v&&l.minY+a>u+v||l.maxY+v>=0&&l.maxY+v+a<0)&&(a=0),this.graph.translate(i,a)}},onTouchStart:function(n){var t=n.originalEvent.touches,e=t[0],r=t[1];e&&r||(n.preventDefault(),this.onMouseDown(n))},onMouseDown:function(n){var t=n.originalEvent;if((!t||n.name===zt.TOUCHSTART||t.button===0)&&(n.name===zt.TOUCHSTART||typeof window=="undefined"||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,n)&&!this.keydown){var e=n.target,r=e&&e.isCanvas&&e.isCanvas();if((this.allowDragOnItem||r)&&(this.origin={x:n.clientX,y:n.clientY},this.dragging=!1,this.enableOptimize)){for(var i=this.graph,a=i.getEdges(),s=0,u=a.length;s<u;s++){var l=a[s].get("group").get("children");l&&l.forEach(function(F){F.set("ori-visibility",F.get("ori-visibility")||F.get("visible")),F.hide()})}for(var d=i.getNodes(),v=0,k=d.length;v<k;v++)for(var T=0,I=d[v].getContainer().get("children");T<I.length;T++){var j=I[T];j.get("isKeyShape")||(j.set("ori-visibility",j.get("ori-visibility")||j.get("visible")),j.hide())}}}},onTouchMove:function(n){var t=n.originalEvent.touches,e=t[0],r=t[1];e&&r?this.onMouseUp(n):(n.preventDefault(),this.onMouseMove(n))},onMouseMove:function(n){var t=this.graph;if(!this.keydown){var e=n.target,r=e&&e.isCanvas&&e.isCanvas();if((this.allowDragOnItem||r)&&(n=Pp(n),this.origin)){if(this.dragging)n.type="drag",t.emit("canvas:drag",n);else{if(Dp(this.origin.x-n.clientX)+Dp(this.origin.y-n.clientY)<10)return;this.shouldBegin.call(this,n)&&(n.type="dragstart",t.emit("canvas:dragstart",n),this.dragging=!0)}this.shouldUpdate.call(this,n)&&this.updateViewport(n)}}},onMouseUp:function(n){var t,e,r=this.graph;if(!this.keydown){var i=r.getZoom(),a=r.get("modeController"),s=(e=(t=a==null?void 0:a.modes[a.mode])===null||t===void 0?void 0:t.filter(function(q){return q.type==="zoom-canvas"}))===null||e===void 0?void 0:e[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=r.getEdges(),d=0,v=l.length;d<v;d++){var k=l[d].get("group").get("children");k&&k.forEach(function(q){q.get("ori-visibility")&&q.show()})}if(i>u)for(var T=r.getNodes(),I=0,j=T.length;I<j;I++)for(var F=0,G=T[I].getContainer().get("children");F<G.length;F++){var V=G[F];V.get("isKeyShape")||V.get("ori-visibility")&&V.show()}}this.dragging?(n=Pp(n),this.shouldEnd.call(this,n)&&this.updateViewport(n),n.type="dragend",r.emit("canvas:dragend",n),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(n){var t=n.key;t&&(gb.indexOf(t.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},yb={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas","node:touchstart":"onTouchStart","node:touchmove":"onTouchMove","node:touchend":"onDragEnd"}},validationCombo:function(n){return!(!this.origin||!n||n.destroyed)&&n.getType()==="combo"},onTouchStart:function(n){try{var t=n.originalEvent.touches,e=t[0],r=t[1];if(e&&r)return;n.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.onDragStart(n)},onTouchMove:function(n){try{var t=n.originalEvent.touches,e=t[0],r=t[1];if(e&&r)return void this.onDragEnd(n);n.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.onDrag(n)},onDragStart:function(n){var t=this;if(this.shouldBegin.call(this,n)){var e=n.item;if(e&&!e.destroyed&&!e.hasLocked()){e.getContainer().set("capture",!1);var r=n.target;if(r&&r.get("isAnchorPoint"))return;var i=this.graph;this.targets=[],this.targetCombo=null;var a=i.findAllByState("node",this.selectedState),s=e.get("id");a.filter(function(l){var d=l.get("id");return s===d}).length===0?this.targets.push(e):a.length>1?a.forEach(function(l){l.hasLocked()||t.targets.push(l)}):this.targets.push(e);var u=[];this.targets.forEach(function(l){u.push(Object(p.clone)(l.getModel()))}),this.set("beforeDragNodes",u),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(l){l.getEdges().forEach(function(d){d.isVisible()&&(t.hidenEdge[d.getID()]=!0,d.hide())})}),this.origin={x:n.x,y:n.y},this.point={},this.originPoint={}}}},onDrag:function(n){var t=this;this.origin&&this.shouldUpdate(this,n)&&(this.get("enableDelegate")?this.updateDelegate(n):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:n,updateEdge:this.get("updateEdge")}):this.targets.map(function(e){t.update(e,n)}))},onDragEnd:function(n){var t=this;if(this.origin&&this.shouldEnd.call(this,n)){var e=n.item;e&&e.getContainer().set("capture",!0),this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(n),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(a){a.getEdges().forEach(function(s){t.hidenEdge[s.getID()]&&s.show(),s.refresh()})}),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(a){i.before.nodes.push({id:a.id,x:a.x,y:a.y})}),this.targets.forEach(function(a){var s=a.getModel();i.after.nodes.push({id:s.id,x:s.x,y:s.y})}),r.pushStack("update",Object(p.clone)(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(n){var t=n.item;if(this.validationCombo(t)){this.updatePositions(n);var e=this.graph;if(this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)e.updateCombos();else{var r=t.getModel();this.targets.map(function(i){i.getModel().comboId!==r.id&&e.updateComboTree(i,r.id)}),e.updateCombo(t)}e.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(n){var t=this.graph;this.targets&&this.targets.length!==0&&(this.updatePositions(n),this.onlyChangeComboSize?t.updateCombos():this.targets.map(function(e){e.getModel().comboId&&t.updateComboTree(e)}))},onDropNode:function(n){if(this.targets&&this.targets.length!==0){var t=n.item;this.updatePositions(n);var e=this.graph,r=t.getModel().comboId;if(this.onlyChangeComboSize)e.updateCombos();else if(r){var i=e.findById(r);this.comboActiveState&&e.setItemState(i,this.comboActiveState,!1),this.targets.map(function(a){var s=a.getModel();r!==s.comboId&&e.updateComboTree(a,r)}),e.updateCombo(i)}else this.targets.map(function(a){a.getModel().comboId&&e.updateComboTree(a)});e.emit("dragnodeend",{items:this.targets,targetItem:t})}},onDragEnter:function(n){var t=n.item;if(this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(n){var t=n.item;if(this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(n){var t=this;this.targets&&this.targets.length!==0&&this.get("enableDelegate")&&(this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:n,updateEdge:this.get("updateEdge"),updateFunc:this.update}):this.targets.map(function(e){return t.update(e,n)}))},update:function(n,t){var e=this.origin,r=n.get("model"),i=n.get("id");this.point[i]||(this.point[i]={x:r.x||0,y:r.y||0});var a={x:t.x-e.x+this.point[i].x,y:t.y-e.y+this.point[i].y};this.get("updateEdge")?this.graph.updateItem(n,a,!1):n.updatePosition(a)},debounceUpdate:Object(p.debounce)(function(n){var t=n.targets,e=n.graph,r=n.point,i=n.origin,a=n.evt,s=n.updateEdge;n.updateFunc,t.map(function(u){var l=u.get("model"),d=u.get("id");r[d]||(r[d]={x:l.x||0,y:l.y||0});var v={x:a.x-i.x+r[d].x,y:a.y-i.y+r[d].y};s?e.updateItem(u,v,!1):u.updatePosition(v)})},50,!0),updateDelegate:function(n){var t=this.graph;if(this.delegateRect){var e=n.x-this.origin.x+this.originPoint.minX,r=n.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:e,y:r})}else{var i=t.get("group"),a=Object(p.deepMix)({},Xo.delegateStyle,this.delegateStyle),s=this.calculationGroupPosition(n),u=s.x,l=s.y,d=s.width,v=s.height,k=s.minX,T=s.minY;this.originPoint={x:u,y:l,width:d,height:v,minX:k,minY:T},this.delegateRect=i.addShape("rect",{attrs:Object(m.__assign)({width:d,height:v,x:u,y:l},a),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(n){var t=this.targets;t.length===0&&t.push(n.item);for(var e=1/0,r=-1/0,i=1/0,a=-1/0,s=0;s<t.length;s++){var u=t[s].getBBox(),l=u.minX,d=u.minY,v=u.maxX,k=u.maxY;l<e&&(e=l),d<i&&(i=d),v>r&&(r=v),k>a&&(a=k)}return{x:Math.floor(e),y:Math.floor(i),width:Math.ceil(r)-Math.floor(e),height:Math.ceil(a)-Math.floor(i),minX:e,minY:i}}},mb={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(n){try{var t=n.originalEvent.touches,e=t[0],r=t[1];if(e&&r)return;n.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.setAllItemStates(n)},clearOnTouchStart:function(n){try{var t=n.originalEvent.touches,e=t[0],r=t[1];if(e&&r)return;n.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.clearActiveState(n)},setAllItemStates:function(n){var t=n.item,e=this.graph;if(this.item=t,this.shouldUpdate(n.item,{event:n,action:"activate"})){for(var r=this.activeState,i=this.inactiveState,a=e.getNodes(),s=e.getCombos(),u=e.getEdges(),l=e.get("vedges"),d=a.length,v=s.length,k=u.length,T=l.length,I=0;I<d;I++){var j=a[I],F=j.hasState("selected");this.resetSelected&&F&&e.setItemState(j,"selected",!1),e.setItemState(j,r,!1),i&&e.setItemState(j,i,!0)}for(I=0;I<v;I++){var G=s[I];F=G.hasState("selected"),this.resetSelected&&F&&e.setItemState(G,"selected",!1),e.setItemState(G,r,!1),i&&e.setItemState(G,i,!0)}for(I=0;I<k;I++){var V=u[I];e.setItemState(V,r,!1),i&&e.setItemState(V,i,!0)}for(I=0;I<T;I++){var q=l[I];e.setItemState(q,r,!1),i&&e.setItemState(q,i,!0)}i&&e.setItemState(t,i,!1),e.setItemState(t,r,!0);var $=t.getEdges(),ve=$.length;for(I=0;I<ve;I++){var de=void 0;de=(V=$[I]).getSource()===t?V.getTarget():V.getSource(),i&&e.setItemState(de,i,!1),e.setItemState(de,r,!0),e.setItemState(V,i,!1),e.setItemState(V,r,!0),V.toFront()}e.emit("afteractivaterelations",{item:n.item,action:"activate"})}},clearActiveState:function(n){var t=this.get("graph");if(this.shouldUpdate(n.item,{event:n,action:"deactivate"})){var e=this.activeState,r=this.inactiveState,i=t.get("autoPaint");t.setAutoPaint(!1);for(var a=t.getNodes()||[],s=t.getCombos()||[],u=t.getEdges()||[],l=t.get("vedges")||[],d=a.length,v=s.length,k=u.length,T=l.length,I=0;I<d;I++){var j=a[I];t.clearItemStates(j,[e,r])}for(I=0;I<v;I++){var F=s[I];t.clearItemStates(F,[e,r])}for(I=0;I<k;I++){var G=u[I];t.clearItemStates(G,[e,r,"deactivate"])}for(I=0;I<T;I++){var V=l[I];t.clearItemStates(V,[e,r,"deactivate"])}t.paint(),t.setAutoPaint(i),t.emit("afteractivaterelations",{item:n.item||this.get("item"),action:"deactivate"})}}},nu=Math.min,Rp=Math.max,Lp=Math.abs,bb=["drag","shift","ctrl","alt","control"],xb={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return bb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(n){var t=n.item,e=this.brush;t||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),e||(e=this.createBrush()),this.originPoint={x:n.canvasX,y:n.canvasY},e.attr({width:0,height:0}),e.show(),this.dragging=!0)},onMouseMove:function(n){this.dragging&&(this.trigger==="drag"||this.keydown)&&this.updateBrush(n)},onMouseUp:function(n){this.graph,(this.brush||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(n),this.dragging=!1)},clearStates:function(){var n=this.graph,t=this.selectedState,e=n.findAllByState("node",t),r=n.findAllByState("edge",t);e.forEach(function(i){return n.setItemState(i,t,!1)}),r.forEach(function(i){return n.setItemState(i,t,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(n){var t=this,e=this.graph,r=this.originPoint,i=this.shouldUpdate,a=this.selectedState,s={x:n.x,y:n.y},u=e.getPointByCanvas(r.x,r.y),l=nu(s.x,u.x),d=Rp(s.x,u.x),v=nu(s.y,u.y),k=Rp(s.y,u.y),T=[],I=[];e.getNodes().forEach(function(F){if(F.isVisible()){var G=F.getBBox();if(G.centerX>=l&&G.centerX<=d&&G.centerY>=v&&G.centerY<=k&&i(F,"select")){T.push(F);var V=F.getModel();I.push(V.id),e.setItemState(F,a,!0)}}});var j=[];this.includeEdges&&T.forEach(function(F){F.getOutEdges().forEach(function(G){if(G.isVisible()){var V=G.getModel(),q=V.source,$=V.target;I.includes(q)&&I.includes($)&&i(G,"select")&&(j.push(G),e.setItemState(G,t.selectedState,!0))}})}),this.selectedEdges=j,this.selectedNodes=T,this.onSelect&&this.onSelect(T,j),e.emit("nodeselectchange",{selectedItems:{nodes:T,edges:j},select:!0})},createBrush:function(){var n=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=n,this.delegate=n,n},updateBrush:function(n){var t=this.originPoint;this.brush.attr({width:Lp(n.canvasX-t.x),height:Lp(n.canvasY-t.y),x:nu(n.canvasX,t.x),y:nu(n.canvasY,t.y)})},onKeyDown:function(n){var t=n.key;if(t){var e=this.trigger.toLowerCase(),r=t.toLowerCase();this.keydown=r===e||r==="control"&&e==="ctrl"||r==="ctrl"&&e==="control"}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},wb=["shift","ctrl","alt","control"],_b={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){return wb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(n){var t=this,e=n.item;if(e&&!e.destroyed){e.getType();var r=t.graph,i=t.keydown,a=t.multiple,s=t.shouldUpdate;if(t.shouldBegin.call(t,n)){if(!i||!a){var u=r.findAllByState("node",t.selectedState).concat(r.findAllByState("combo",t.selectedState));Object(p.each)(u,function(v){v!==e&&r.setItemState(v,t.selectedState,!1)})}if(e.hasState(t.selectedState)){s.call(t,n)&&r.setItemState(e,t.selectedState,!1);var l=r.findAllByState("node",t.selectedState),d=r.findAllByState("combo",t.selectedState);r.emit("nodeselectchange",{target:e,selectedItems:{nodes:l,combos:d},select:!1})}else s.call(t,n)&&r.setItemState(e,t.selectedState,!0),l=r.findAllByState("node",t.selectedState),d=r.findAllByState("combo",t.selectedState),r.emit("nodeselectchange",{target:e,selectedItems:{nodes:l,combos:d},select:!0})}}},onCanvasClick:function(){var n=this,t=this.graph,e=t.findAllByState("node",this.selectedState);Object(p.each)(e,function(i){t.setItemState(i,n.selectedState,!1)});var r=t.findAllByState("combo",this.selectedState);Object(p.each)(r,function(i){t.setItemState(i,n.selectedState,!1)}),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(n){var t=n.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()||t.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},Sb=S.transform,Eb={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var n=this.fixSelectedItems;return n.fixState||(n.fixState="selected"),n.fixAll&&(n.fixLineWidth=!0,n.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(n){var t=n.originalEvent.touches,e=t[0],r=t[1];n.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin.call(this,n)||(this.startPoint={pageX:e.pageX,pageY:e.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(n){if(this.moveable){n.preventDefault();var t=n.originalEvent.touches,e=t[0],r=t[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(d,v){return Math.hypot(v.x-d.x,v.y-d.y)},a=i({x:e.pageX,y:e.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*a;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom");if(!(s>(this.get("maxZoom")||this.graph.get("maxZoom"))||s<u)){var l=this.graph.get("canvas").getPointByClient(n.clientX,n.clientY);this.graph.zoomTo(s,{x:l.x,y:l.y}),this.graph.emit("wheelzoom",n)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(n){var t=this,e=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin.call(this,n))&&this.shouldUpdate.call(this,n)){n.preventDefault();var i,a=e.get("canvas").getPointByClient(n.clientX,n.clientY),s=this.get("sensitivity"),u=e.getZoom();i=u*(n.wheelDelta<0?1-.05*s:1/(1-.05*s));var l=this.get("minZoom")||e.get("minZoom");if(!(i>(this.get("maxZoom")||e.get("maxZoom"))||i<l)){if(this.get("enableOptimize")){var d=this.get("optimizeZoom"),v=this.get("optimized"),k=e.getNodes(),T=e.getEdges(),I=k.length,j=T.length;if(!v){for(var F=0;F<I;F++)if(!(Pe=k[F]).destroyed)for(var G=(un=Pe.get("group").get("children")).length,V=0;V<G;V++)(Ct=un[V]).destoryed||Ct.get("isKeyShape")||(Ct.set("ori-visibility",Ct.get("ori-visibility")||Ct.get("visible")),Ct.hide());for(var q=0;q<j;q++)for(G=(un=(_r=T[q]).get("group").get("children")).length,V=0;V<G;V++)(Ct=un[V]).set("ori-visibility",Ct.get("ori-visibility")||Ct.get("visible")),Ct.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var $=setTimeout(function(){var hr=e.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var qr=0;qr<I;qr++){var en=k[qr],Yr=(Tn=en.get("group").get("children")).length;if(hr<d)(Tr=(tn=en.getKeyShape()).get("ori-visibility"))&&tn.show();else for(var Cr=0;Cr<Yr;Cr++){var Tr=(cn=Tn[Cr]).get("ori-visibility");!cn.get("visible")&&Tr&&Tr&&cn.show()}}for(var Zr=0;Zr<j;Zr++){var Tn,tn,bi=T[Zr];if(Yr=(Tn=bi.get("group").get("children")).length,hr<d)(Tr=(tn=bi.getKeyShape()).get("ori-visibility"))&&tn.show();else for(Cr=0;Cr<Yr;Cr++){var cn;(cn=Tn[Cr]).get("visible")||(Tr=cn.get("ori-visibility"))&&cn.show()}}}},100);this.set("timeout",$)}if(u<=1){var ve=void 0,de=void 0;if(r.fixAll||r.fixLineWidth||r.fixLabel){ve=e.findAllByState("node",r.fixState),de=e.findAllByState("edge",r.fixState);for(var me=u/i,Ie=ve.length,Ee=0;Ee<Ie;Ee++){var Pe,Ze=(Pe=ve[Ee]).getContainer(),it=Pe.getModel(),ct=Pe.getOriginStyle(),st=Pe.getStateStyle(r.fixState),jt=Pe.get("shapeFactory").getShape(it.type).getStateStyle(r.fixState,Pe)[r.fixState];if(r.fixAll){if(i<=1){var gt=Object(p.clone)(Ze.getMatrix());gt||(gt=[1,0,0,0,1,0,0,0,1]);var Pt=Pe.getModel(),Rt=Pt.x,Zt=Pt.y;gt=Sb(gt,[["t",-Rt,-Zt],["s",me,me],["t",Rt,Zt]]),Ze.setMatrix(gt)}}else for(G=(un=Ze.get("children")).length,V=0;V<G;V++){var Ct=un[V],Vt=void 0,Dt=void 0;if(r.fixLabel&&Ct.get("type")==="text"){Vt=Ct.attr("fontSize")||12;var qt=st[Ct.get("name")],$t=jt[Ct.get("name")],Gt=qt?qt.fontSize:12,lr=$t?$t.fontSize:12,Br=Gt||lr||12;if(i<=1&&Ct.attr("fontSize",Br/i),Dt)break}if(r.fixLineWidth&&Ct.get("isKeyShape")){Dt=Ct.attr("lineWidth")||0;var wn=st.lineWidth||jt.lineWidth||ct.lineWidth||0;if(i<=1&&Ct.attr("lineWidth",wn/i),Vt)break}}}for(var Sr=de.length,jr=0;jr<Sr;jr++){var _r,un=(Ze=(_r=de[jr]).getContainer()).get("children");for(it=_r.getModel(),st=_r.getStateStyle(r.fixState),jt=_r.get("shapeFactory").getShape(it.type).getStateStyle(r.fixState,_r)[r.fixState],G=un.length,V=0;V<G&&(Ct=un[V],Vt=void 0,Dt=void 0,!((r.fixLabel||r.fixAll)&&Ct.get("type")==="text"&&(Vt=Ct.attr("fontSize")||12,qt=st[Ct.get("name")],$t=jt[Ct.get("name")],Gt=qt?qt.fontSize:12,lr=$t?$t.fontSize:12,Br=Gt||lr||12,i<=1&&Ct.attr("fontSize",Br/i),Dt)||(r.fixLineWidth||r.fixAll)&&Ct.get("isKeyShape")&&(Dt=Ct.attr("lineWidth")||0,wn=st.lineWidth||jt.lineWidth||1,i<=1&&Ct.attr("lineWidth",wn/i),Vt)));V++);}}}e.zoomTo(i,{x:a.x,y:a.y}),e.emit("wheelzoom",n)}}}},Bp={onMouseEnter:function(n){var t=n.item;this.currentTarget=t,this.showTooltip(n),this.graph.emit("tooltipchange",{item:n.item,action:"show"})},onMouseMove:function(n){this.shouldUpdate(n)?this.currentTarget&&n.item===this.currentTarget&&this.updatePosition(n):this.hideTooltip()},onMouseLeave:function(n){this.shouldEnd(n)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(n){var t=this.container;if(n.item&&!n.item.destroyed){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var e=this.formatText(n.item.get("model"),n);t.innerHTML=e,xn(this.container,{visibility:"visible"}),this.updatePosition(n)}},hideTooltip:function(){xn(this.container,{visibility:"hidden"})},updatePosition:function(n){var t=this.get("shouldBegin"),e=this.width,r=this.height,i=this.container,a=this.graph;if(t(n)){var s=a.getPointByClient(n.clientX,n.clientY),u=a.getCanvasByPoint(s.x,s.y),l=u.x,d=u.y,v=i.getBoundingClientRect();l>e/2?l-=v.width:l+=this.offset,d>r/2?d-=v.height:d+=this.offset;var k=l+"px",T=d+"px";xn(this.container,{left:k,top:T,visibility:"visible"})}else xn(i,{visibility:"hidden"})},createTooltip:function(n){var t=n.get("el");t.style.position="relative";var e=ei('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return t.parentNode.appendChild(e),xn(e,{position:"absolute",visibility:"visible"}),this.width=n.get("width"),this.height=n.get("height"),this.container=e,this.graph.get("tooltips").push(e),e}},Ob=Object(m.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(n){return n.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Bp),Mb=Object(m.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(n){return"source: "+n.source+" target: "+n.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Bp),kb=["click","dblclick"],Ab={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var n,t;return kb.includes(this.trigger)?t=this.trigger:(t="click",console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(n={})["node:"+t]="onNodeClick",n.touchstart="onNodeClick",n},onNodeClick:function(n){var t=n.item;if(t){var e=this.graph.findDataById(t.get("id"));if(e){var r=e.children;if(r&&r.length!==0){var i=!e.collapsed;this.shouldBegin(n,i)&&(e.collapsed=i,t.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:n.item,collapsed:i}),this.shouldUpdate(n,i)&&(this.onChange(t,i),this.graph.layout()))}}}}},Cb=No.calculationItemsBBox,Tb={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(n){var t=n.item;return!(!t||t.destroyed)&&!!this.shouldUpdate(this,n)&&t.getType()==="combo"},onDragStart:function(n){var t=this,e=this.graph,r=n.item;if(this.validationCombo(n)){this.targets=[];var i=e.findAllByState("combo",this.selectedState),a=r.get("id");i.filter(function(s){var u=s.get("id");return a===u}).length===0?this.targets.push(r):this.targets=i,this.activeState&&this.targets.map(function(s){var u=s.getModel();if(u.parentId){var l=e.findById(u.parentId);l&&e.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:n.x,y:n.y},this.currentItemChildCombos=[],function s(u,l){if(l(u)!==!1&&u){var d=u.get("combos");if(d.length===0)return!1;Object(p.each)(d,function(v){s(v,l)})}}(r,function(s){if(s.destroyed)return!1;var u=s.getModel();return t.currentItemChildCombos.push(u.id),!0})}},onDrag:function(n){var t=this;if(this.origin&&this.validationCombo(n))if(this.enableDelegate)this.updateDelegate(n);else{if(this.activeState){var e=this.graph,r=n.item,i=r.getModel(),a=e.getCombos(),s=r.getBBox(),u=s.centerX,l=s.centerY,d=s.width;a.filter(function(v){var k=v.getModel();return i.parentId,k.id!==i.id&&!t.currentItemChildCombos.includes(k.id)}).map(function(v){var k=v.getBBox(),T=k.centerX,I=k.centerY,j=k.width,F=u-T,G=l-I,V=2*Math.sqrt(F*F+G*G);d+j-V>.8*d?e.setItemState(v,t.activeState,!0):e.setItemState(v,t.activeState,!1)})}Object(p.each)(this.targets,function(v){t.updateCombo(v,n)})}},updatePositions:function(n){var t=this;this.enableDelegate&&Object(p.each)(this.targets,function(e){t.updateCombo(e,n)})},onDrop:function(n){var t=this,e=n.item;if(e&&this.targets&&!e.destroyed){this.updatePositions(n);var r=this.graph,i=e.getModel();this.targets.map(function(a){a.getModel().parentId!==i.id?(t.activeState&&r.setItemState(e,t.activeState,!1),t.onlyChangeComboSize?r.updateCombo(a):r.updateComboTree(a,i.id)):r.updateCombo(e)}),this.end(e,n),this.endComparison=!0}},onNodeDrop:function(n){var t=this;if(this.targets&&this.targets.length!==0){this.updatePositions(n);var e,r=this.graph,i=n.item.getModel().comboId;if(i){if(this.activeState){var a=r.findById(i);r.setItemState(a,this.activeState,!1)}this.targets.map(function(s){t.onlyChangeComboSize?r.updateCombo(s):i!==s.getID()&&(e=r.findById(i),i!==s.getModel().parentId&&r.updateComboTree(s,i))})}else this.targets.map(function(s){t.onlyChangeComboSize?r.updateCombo(s):s.getModel().comboId&&r.updateComboTree(s)});this.endComparison=!0,this.end(e,n)}},onDragEnter:function(n){if(this.origin&&this.validationCombo(n)){var t=n.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!0)}},onDragLeave:function(n){if(this.origin&&this.validationCombo(n)){var t=n.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!1)}},onDragEnd:function(n){if(this.targets&&this.targets.length!==0){var t=n.item;this.updatePositions(n);var e=this.getParentCombo(t.getModel().parentId),r=this.graph;e&&this.activeState&&r.setItemState(e,this.activeState,!1),this.end(void 0,n)}},end:function(n,t){var e=this;if(this.origin){var r=this.graph;this.delegateShape&&(r.get("delegateGroup").clear(),this.delegateShape=null),n&&this.activeState&&r.setItemState(n,this.activeState,!1),n||this.targets.map(function(i){e.onlyChangeComboSize?r.updateCombo(i):r.updateComboTree(i)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(n,t){var e=this;if(t(n)!==!1&&n){var r=n.get("combos");Object(p.each)(r,function(a){e.traverse(a,t)});var i=n.get("nodes");Object(p.each)(i,function(a){e.traverse(a,t)})}},updateCombo:function(n,t){var e=this;this.traverse(n,function(r){return!r.destroyed&&(e.updateSignleItem(r,t),!0)})},updateSignleItem:function(n,t){var e=this.origin,r=this.graph,i=n.getModel(),a=n.get("id");this.point[a]||(this.point[a]={x:i.x,y:i.y});var s=t.x-e.x+this.point[a].x,u=t.y-e.y+this.point[a].y;r.updateItem(n,{x:s,y:u})},getParentCombo:function(n){var t=this.graph;if(n){var e=t.findById(n);if(e)return e}},updateDelegate:function(n){var t=this.graph;if(this.delegateShape){var e=n.x-this.origin.x+this.originPoint.minX,r=n.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:e,y:r})}else{var i=t.get("delegateGroup"),a=null,s=(a=this.targets.length>1?Cb(this.targets):this.targets[0].getBBox()).x,u=a.y,l=a.width,d=a.height,v=a.minX,k=a.minY;this.originPoint={x:s,y:u,width:l,height:d,minX:v,minY:k};var T=Object(m.__assign)(Object(m.__assign)({},Xo.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:Object(m.__assign)({width:a.width,height:a.height,x:a.x,y:a.y},T),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},Ib=["click","dblclick"],jb={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var n,t;return Ib.includes(this.trigger)?t=this.trigger:(t="dblclick",console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(n={})["combo:"+t]="onComboClick",n},onComboClick:function(n){var t=n.item,e=this.graph,r=this.relayout;if(t&&!t.destroyed&&t.getType()==="combo"){var i=t.getModel().id;i&&(e.collapseExpandCombo(i),r&&e.get("layout")?e.layout():e.refreshPositions())}}},Pb=No.isPolygonsIntersect,Nb=No.pathToPoints,Db=["drag","shift","ctrl","alt","control"],Rb=["click","drag"],Lb=["shift","ctrl","control","alt","meta",void 0],Bb=["shift","ctrl","alt","control"],Gb=["shift","ctrl","alt","control"],Fb={"drag-canvas":vb,"zoom-canvas":Eb,"drag-node":yb,"activate-relations":mb,"brush-select":xb,"click-select":_b,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return Db.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(n){var t=this.lasso;n.item||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:n.x,y:n.y},this.points.push(this.originPoint),t.show())},onDragMove:function(n){this.dragging&&(this.trigger==="drag"||this.keydown)&&(this.points.push({x:n.x,y:n.y}),this.updateLasso(n))},onDragEnd:function(n){(this.lasso||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var n=this.points,t=[];return n.length&&(n.forEach(function(e,r){r===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t.push(["L",n[0].x,n[0].y])),t},clearStates:function(){var n=this.graph,t=this.selectedState,e=n.findAllByState("node",t),r=n.findAllByState("edge",t);e.forEach(function(i){return n.setItemState(i,t,!1)}),r.forEach(function(i){return n.setItemState(i,t,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var n=this,t=this.graph,e=this.shouldUpdate,r=this.points.map(function(l){return[t.getCanvasByPoint(l.x,l.y).x,t.getCanvasByPoint(l.x,l.y).y]}),i=this.selectedState,a=[],s=[];t.getNodes().forEach(function(l){if(l.isVisible()&&function(v,k){var T,I=v.getKeyShape();if(v.get("type")==="path")T=Nb(I.attr("path"));else{var j=I.getCanvasBBox();T=[[j.minX,j.minY],[j.maxX,j.minY],[j.maxX,j.maxY],[j.minX,j.maxY]]}return Pb(k,T)}(l,r)&&e(l,"select")){a.push(l);var d=l.getModel();s.push(d.id),t.setItemState(l,i,!0)}});var u=[];this.includeEdges&&a.forEach(function(l){l.getOutEdges().forEach(function(d){if(d.isVisible()){var v=d.getModel(),k=v.source,T=v.target;s.includes(k)&&s.includes(T)&&e(d,"select")&&(u.push(d),t.setItemState(d,n.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=a,this.onSelect&&this.onSelect(a,u),t.emit("nodeselectchange",{selectedItems:{nodes:a,edges:u},select:!0})},createLasso:function(){var n=this.graph.get("delegateGroup").addShape("path",{attrs:Object(m.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=n,this.delegate=n,this.points=[],n},updateLasso:function(n){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(n){var t=n.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:Ob,"edge-tooltip":Mb,"collapse-expand":Ab,"drag-combo":Tb,"collapse-expand-combo":jb,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var n;return Rb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),this.key&&Lb.indexOf(this.key.toLowerCase())===-1&&(this.trigger=void 0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined")),this.trigger==="drag"?n={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:this.trigger==="click"&&(n={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(n.keydown="onKeyDown",n.keyup="onKeyUp"),n},onDragEnd:function(n){if(!this.key||this.keydown){var t=n.item;t&&t.getID()!==this.source&&t.getType()==="node"||this.cancelCreating({item:this.edge,x:n.x,y:n.y})}},onClick:function(n){if(!this.key||this.keydown){var t=n.item,e=this.graph,r=t.getModel(),i=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd.call(this,n))return;var a=void 0;a=i&&Object(p.isFunction)(i)?i({source:this.source,target:r.id}):this.edgeConfig;var s=Object(m.__assign)({target:r.id},a);if(this.source===r.id&&(s.type="loop"),e.emit("beforecreateedge",{}),e.updateItem(this.edge,s,!1),e.get("enabledStack")){var u=Object(m.__assign)(Object(m.__assign)({},this.edge.getModel()),{itemType:"edge"}),l={};l.edges=[u],e.pushStack("add",{before:{},after:l})}e.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin.call(this,n))return;a=void 0,a=i&&Object(p.isFunction)(i)?i({source:r.id,target:r.id}):this.edgeConfig,this.edge=e.addItem("edge",Object(m.__assign)({source:r.id,target:r.id},a),!1),this.source=r.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(n){if(!this.key||this.keydown){var t={x:n.x,y:n.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:t},!1):this.addingEdge=!1}},cancelCreating:function(n){if(!this.key||this.keydown){var t=this.graph,e=n.item;if(this.addingEdge&&n.target&&n.target.isCanvas&&n.target.isCanvas())return t.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1);this.addingEdge&&this.edge===e&&(t.removeItem(this.edge,!1),this.edge=null,this.addingEdge=!1)}},onKeyDown:function(n){var t=n.key;t&&(t.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return Bb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(n){var t=n.key;if(t){var e=this.trigger.toLowerCase(),r=t.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===e||r==="control"&&e==="ctrl"||r==="ctrl"&&e==="control");var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(!this.triggerKeydown||this.combinedKey){var a=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===a||r==="control"&&a==="ctrl"||r==="ctrl"&&a==="control")&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},"scroll-canvas":{getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return this.zoomKey&&Gb.indexOf(this.zoomKey)!==-1||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(n){var t=this,e=this.graph,r=n[this.zoomKey+"Key"];if(this.zoomKey==="control"&&(r=n.ctrlKey),r){var i=e.get("canvas").getPointByClient(n.clientX,n.clientY),a=e.getZoom();n.wheelDelta>0?a+=.05*a:a-=.05*a,e.zoomTo(a,{x:i.x,y:i.y})}else{var s=n.deltaX||n.movementX,u=n.deltaY||n.movementY;!u&&navigator.userAgent.indexOf("Firefox")>-1&&(u=125*-n.wheelDelta/3);var l=this.graph.get("width"),d=this.graph.get("height"),v=this.graph.get("canvas").getCanvasBBox(),k=this.scalableRange,T=this.scalableRange;k<1&&k>-1&&(k*=l,T*=d);var I=v.minX,j=v.maxX,F=v.minY,G=v.maxY;s>0?j<-k?s=0:j-s<-k&&(s=j+k):s<0&&(I>l+k?s=0:I-s>l+k&&(s=I-(l+k))),u>0?G<-T?u=0:G-u<-T&&(u=G+T):u<0&&(F>d+T?u=0:F-u>d+T&&(u=F-(d+T))),this.get("direction")==="x"?u=0:this.get("direction")==="y"&&(s=0),e.translate(-s,-u)}if(n.preventDefault(),this.get("enableOptimize")){var V=this.get("optimizeZoom"),q=this.get("optimized"),$=e.getNodes(),ve=e.getEdges(),de=$.length,me=ve.length;if(!q){for(var Ie=0;Ie<de;Ie++){var Ee=$[Ie];if(!Ee.destroyed)for(var Pe=(ct=Ee.get("group").get("children")).length,Ze=0;Ze<Pe;Ze++)(st=ct[Ze]).destoryed||st.get("isKeyShape")||(st.set("ori-visibility",st.get("ori-visibility")||st.get("visible")),st.hide())}for(var it=0;it<me;it++){var ct;for(Pe=(ct=ve[it].get("group").get("children")).length,Ze=0;Ze<Pe;Ze++){var st;(st=ct[Ze]).set("ori-visibility",st.get("ori-visibility")||st.get("visible")),st.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var jt=setTimeout(function(){var gt=e.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var Pt=0;Pt<de;Pt++){var Rt=$[Pt],Zt=(qt=Rt.get("group").get("children")).length;if(gt<V)(Vt=($t=Rt.getKeyShape()).get("ori-visibility"))&&$t.show();else for(var Ct=0;Ct<Zt;Ct++){var Vt=(lr=qt[Ct]).get("ori-visibility");!lr.get("visible")&&Vt&&Vt&&lr.show()}}for(var Dt=0;Dt<me;Dt++){var qt,$t,Gt=ve[Dt];if(Zt=(qt=Gt.get("group").get("children")).length,gt<V)(Vt=($t=Gt.getKeyShape()).get("ori-visibility"))&&$t.show();else for(Ct=0;Ct<Zt;Ct++){var lr;(lr=qt[Ct]).get("visible")||(Vt=lr.get("ori-visibility"))&&lr.show()}}}},100);this.set("timeout",jt)}}}};Object(p.each)(Fb,function(n,t){fo(t,n)});var Gp=Object(m.__assign)(Object(m.__assign)({},f),ga),zb=mi.Grid,Ub=mi.Minimap,Vb=mi.Bundling,Wb=mi.Menu,Fp=mi.Fisheye,Xb=mi.ToolBar,Yb=mi.Tooltip,zp=mi.TimeBar,Up=mi.ImageMinimap,Vp=mi.EdgeFilterLens,Wp=mi.SnapLine,Hb=mi.Legend,Xp={version:Xo.version,Graph:Ju,TreeGraph:Pd,Util:No,Layout:Ws,TreeLayout:Md,registerLayout:kd,Global:Xo,registerBehavior:fo,registerCombo:Wi,registerEdge:Ii,registerNode:sn,Minimap:mi.Minimap,Grid:mi.Grid,Bundling:mi.Bundling,Menu:mi.Menu,ToolBar:mi.ToolBar,Tooltip:mi.Tooltip,Legend:mi.Legend,TimeBar:zp,SnapLine:Wp,Fisheye:Fp,ImageMinimap:Up,EdgeFilterLens:Vp,Algorithm:Gp,Arrow:Ut,Marker:Xt,Shape:fr};Xp.version="4.3.5",b.default=Xp;var qb="4.3.5"}]).default})},5619:function(Ei,R,b){Ei=b.nmd(Ei),ace.define("ace/ext/spellcheck",["require","exports","module","ace/lib/event","ace/editor","ace/config"],function(o,f,c){"use strict";var M=o("../lib/event");f.contextMenuHandler=function(x){var O=x.target,S=O.textInput.getElement();if(!!O.selection.isEmpty()){var g=O.getCursorPosition(),h=O.session.getWordRange(g.row,g.column),y=O.session.getTextRange(h);if(O.session.tokenRe.lastIndex=0,!!O.session.tokenRe.test(y)){var E="",m=y+" "+E;S.value=m,S.setSelectionRange(y.length,y.length+1),S.setSelectionRange(0,0),S.setSelectionRange(0,y.length);var p=!1;M.addListener(S,"keydown",function A(){M.removeListener(S,"keydown",A),p=!0}),O.textInput.setInputHandler(function(A){if(A==m)return"";if(A.lastIndexOf(m,0)===0)return A.slice(m.length);if(A.substr(S.selectionEnd)==m)return A.slice(0,-m.length);if(A.slice(-2)==E){var C=A.slice(0,-2);if(C.slice(-1)==" ")return p?C.substring(0,S.selectionEnd):(C=C.slice(0,-1),O.session.replace(h,C),"")}return A})}}};var _=o("../editor").Editor;o("../config").defineOptions(_.prototype,"editor",{spellcheck:{set:function(x){var O=this.textInput.getElement();O.spellcheck=!!x,x?this.on("nativecontextmenu",f.contextMenuHandler):this.removeListener("nativecontextmenu",f.contextMenuHandler)},value:!0}})}),function(){ace.require(["ace/ext/spellcheck"],function(o){Ei&&(Ei.exports=o)})}()},79253:function(Ei,R,b){Ei=b.nmd(Ei),function(){ace.require(["ace/mode/text"],function(o){Ei&&(Ei.exports=o)})}()},12477:function(Ei,R,b){Ei=b.nmd(Ei),ace.define("ace/mode/yaml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(o,f,c){"use strict";var M=o("../lib/oop"),_=o("./text_highlight_rules").TextHighlightRules,x=function(){this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"list.markup",regex:/^(?:-{3}|\.{3})\s*(?=#|$)/},{token:"list.markup",regex:/^\s*[\-?](?:$|\s)/},{token:"constant",regex:"!![\\w//]+"},{token:"constant.language",regex:"[&\\*][a-zA-Z0-9-_]+"},{token:["meta.tag","keyword"],regex:/^(\s*\w[^\s:]*?)(:(?=\s|$))/},{token:["meta.tag","keyword"],regex:/(\w[^\s:]*?)(\s*:(?=\s|$))/},{token:"keyword.operator",regex:"<<\\w*:\\w*"},{token:"keyword.operator",regex:"-\\s*(?=[{])"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:/[|>][-+\d]*(?:$|\s+(?:$|#))/,onMatch:function(O,S,g,h){h=h.replace(/ #.*/,"");var y=/^ *((:\s*)?-(\s*[^|>])?)?/.exec(h)[0].replace(/\S\s*$/,"").length,E=parseInt(/\d+[\s+-]*$/.exec(h));return E?(y+=E-1,this.next="mlString"):this.next="mlStringPre",g.length?(g[0]=this.next,g[1]=y):(g.push(this.next),g.push(y)),this.token},next:"mlString"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:/(\b|[+\-\.])[\d_]+(?:(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)(?=[^\d-\w]|$)$/},{token:"constant.numeric",regex:/[+\-]?\.inf\b|NaN\b|0x[\dA-Fa-f_]+|0b[10_]+/},{token:"constant.language.boolean",regex:"\\b(?:true|false|TRUE|FALSE|True|False|yes|no)\\b"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:/[^\s,:\[\]\{\}]+/}],mlStringPre:[{token:"indent",regex:/^ *$/},{token:"indent",regex:/^ */,onMatch:function(O,S,g){var h=g[1];return h>=O.length?(this.next="start",g.shift(),g.shift()):(g[1]=O.length-1,this.next=g[0]="mlString"),this.token},next:"mlString"},{defaultToken:"string"}],mlString:[{token:"indent",regex:/^ *$/},{token:"indent",regex:/^ */,onMatch:function(O,S,g){var h=g[1];return h>=O.length?(this.next="start",g.splice(0)):this.next="mlString",this.token},next:"mlString"},{token:"string",regex:".+"}]},this.normalizeRules()};M.inherits(x,_),f.YamlHighlightRules=x}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(o,f,c){"use strict";var M=o("../range").Range,_=function(){};(function(){this.checkOutdent=function(x,O){return/^\s+$/.test(x)?/^\s*\}/.test(O):!1},this.autoOutdent=function(x,O){var S=x.getLine(O),g=S.match(/^(\s*\})/);if(!g)return 0;var h=g[1].length,y=x.findMatchingBracket({row:O,column:h});if(!y||y.row==O)return 0;var E=this.$getIndent(x.getLine(y.row));x.replace(new M(O,0,O,h-1),E)},this.$getIndent=function(x){return x.match(/^\s*/)[0]}}).call(_.prototype),f.MatchingBraceOutdent=_}),ace.define("ace/mode/folding/coffee",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],function(o,f,c){"use strict";var M=o("../../lib/oop"),_=o("./fold_mode").FoldMode,x=o("../../range").Range,O=f.FoldMode=function(){};M.inherits(O,_),function(){this.commentBlock=function(S,g){var h=/\S/,y=S.getLine(g),E=y.search(h);if(!(E==-1||y[E]!="#")){for(var m=y.length,p=S.getLength(),A=g,C=g;++g<p;){y=S.getLine(g);var N=y.search(h);if(N!=-1){if(y[N]!="#")break;C=g}}if(C>A){var P=S.getLine(C).length;return new x(A,m,C,P)}}},this.getFoldWidgetRange=function(S,g,h){var y=this.indentationBlock(S,h);if(y||(y=this.commentBlock(S,h),y))return y},this.getFoldWidget=function(S,g,h){var y=S.getLine(h),E=y.search(/\S/),m=S.getLine(h+1),p=S.getLine(h-1),A=p.search(/\S/),C=m.search(/\S/);if(E==-1)return S.foldWidgets[h-1]=A!=-1&&A<C?"start":"","";if(A==-1){if(E==C&&y[E]=="#"&&m[E]=="#")return S.foldWidgets[h-1]="",S.foldWidgets[h+1]="","start"}else if(A==E&&y[E]=="#"&&p[E]=="#"&&S.getLine(h-2).search(/\S/)==-1)return S.foldWidgets[h-1]="start",S.foldWidgets[h+1]="","";return A!=-1&&A<E?S.foldWidgets[h-1]="start":S.foldWidgets[h-1]="",E<C?"start":""}}.call(O.prototype)}),ace.define("ace/mode/folding/yaml",["require","exports","module","ace/lib/oop","ace/mode/folding/coffee","ace/range"],function(o,f,c){"use strict";var M=o("../../lib/oop"),_=o("./coffee").FoldMode,x=o("../../range").Range,O=f.FoldMode=function(){};M.inherits(O,_),function(){this.getFoldWidgetRange=function(S,g,h){var y=/\S/,E=S.getLine(h),m=E.search(y),p=E[m]==="#",A=E[m]==="-";if(m!=-1){var C=E.length,N=S.getLength(),P=h,L=h;if(p){var z=this.commentBlock(S,h);if(z)return z}else if(A){var z=this.indentationBlock(S,h);if(z)return z}else for(;++h<N;){var E=S.getLine(h),H=E.search(y);if(H!=-1){if(H<=m&&E[m]!=="-"){var re=S.getTokenAt(h,0);if(!re||re.type!=="string")break}L=h}}if(L>P){var ae=S.getLine(L).length;return new x(P,C,L,ae)}}},this.getFoldWidget=function(S,g,h){var y=S.getLine(h),E=y.search(/\S/),m=S.getLine(h+1),p=S.getLine(h-1),A=p.search(/\S/),C=m.search(/\S/),N=y[E]==="-";if(E==-1)return S.foldWidgets[h-1]=A!=-1&&A<C?"start":"","";if(A==-1){if(E==C&&y[E]=="#"&&m[E]=="#")return S.foldWidgets[h-1]="",S.foldWidgets[h+1]="","start"}else if(A==E&&y[E]=="#"&&p[E]=="#"&&S.getLine(h-2).search(/\S/)==-1)return S.foldWidgets[h-1]="start",S.foldWidgets[h+1]="","";return A!=-1&&A<E||A!=-1&&A==E&&N?S.foldWidgets[h-1]="start":S.foldWidgets[h-1]="",E<C?"start":""}}.call(O.prototype)}),ace.define("ace/mode/yaml",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/yaml_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/yaml","ace/worker/worker_client"],function(o,f,c){"use strict";var M=o("../lib/oop"),_=o("./text").Mode,x=o("./yaml_highlight_rules").YamlHighlightRules,O=o("./matching_brace_outdent").MatchingBraceOutdent,S=o("./folding/yaml").FoldMode,g=o("../worker/worker_client").WorkerClient,h=function(){this.HighlightRules=x,this.$outdent=new O,this.foldingRules=new S,this.$behaviour=this.$defaultBehaviour};M.inherits(h,_),function(){this.lineCommentStart=["#"],this.getNextLineIndent=function(y,E,m){var p=this.$getIndent(E);if(y=="start"){var A=E.match(/^.*[\{\(\[]\s*$/);A&&(p+=m)}return p},this.checkOutdent=function(y,E,m){return this.$outdent.checkOutdent(E,m)},this.autoOutdent=function(y,E,m){this.$outdent.autoOutdent(E,m)},this.createWorker=function(y){var E=new g(["ace"],"ace/mode/yaml_worker","YamlWorker");return E.attachToDocument(y.getDocument()),E.on("annotate",function(m){y.setAnnotations(m.data)}),E.on("terminate",function(){y.clearAnnotations()}),E},this.$id="ace/mode/yaml"}.call(h.prototype),f.Mode=h}),function(){ace.require(["ace/mode/yaml"],function(o){Ei&&(Ei.exports=o)})}()},26412:function(Ei,R,b){"use strict";b.d(R,{Z:function(){return te}});var o=b(67294),f=b(93967),c=b.n(f),M=b(74443),_=b(53124),x=b(98675),O=b(25378),g={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},y=o.createContext({}),E=b(50344),m=function(U,X){var B={};for(var J in U)Object.prototype.hasOwnProperty.call(U,J)&&X.indexOf(J)<0&&(B[J]=U[J]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ne=0,J=Object.getOwnPropertySymbols(U);ne<J.length;ne++)X.indexOf(J[ne])<0&&Object.prototype.propertyIsEnumerable.call(U,J[ne])&&(B[J[ne]]=U[J[ne]]);return B};const p=U=>(0,E.Z)(U).map(X=>Object.assign(Object.assign({},X==null?void 0:X.props),{key:X.key}));function A(U,X,B){const J=o.useMemo(()=>X||p(B),[X,B]);return o.useMemo(()=>J.map(ie=>{var{span:Z}=ie,fe=m(ie,["span"]);return Object.assign(Object.assign({},fe),{span:typeof Z=="number"?Z:(0,M.m9)(U,Z)})}),[J,U])}function C(U,X,B){let J=U,ne=!1;return(B===void 0||B>X)&&(J=Object.assign(Object.assign({},U),{span:X}),ne=B!==void 0),[J,ne]}function N(U,X){const B=[];let J=[],ne=X,ie=!1;return U.filter(Z=>Z).forEach((Z,fe)=>{const _e=Z==null?void 0:Z.span,je=_e||1;if(fe===U.length-1){const[Me,Ae]=C(Z,ne,_e);ie=ie||Ae,J.push(Me),B.push(J);return}if(je<ne)ne-=je,J.push(Z);else{const[Me,Ae]=C(Z,ne,je);ie=ie||Ae,J.push(Me),B.push(J),ne=X,J=[]}}),[B,ie]}var L=(U,X)=>{const[B,J]=(0,o.useMemo)(()=>N(X,U),[X,U]);return B},H=U=>{let{children:X}=U;return X};function re(U){return U!=null}var ue=U=>{const{itemPrefixCls:X,component:B,span:J,className:ne,style:ie,labelStyle:Z,contentStyle:fe,bordered:_e,label:je,content:Me,colon:Ae,type:Le}=U,Se=B;return _e?o.createElement(Se,{className:c()({[`${X}-item-label`]:Le==="label",[`${X}-item-content`]:Le==="content"},ne),style:ie,colSpan:J},re(je)&&o.createElement("span",{style:Z},je),re(Me)&&o.createElement("span",{style:fe},Me)):o.createElement(Se,{className:c()(`${X}-item`,ne),style:ie,colSpan:J},o.createElement("div",{className:`${X}-item-container`},(je||je===0)&&o.createElement("span",{className:c()(`${X}-item-label`,{[`${X}-item-no-colon`]:!Ae}),style:Z},je),(Me||Me===0)&&o.createElement("span",{className:c()(`${X}-item-content`),style:fe},Me)))};function xe(U,X,B){let{colon:J,prefixCls:ne,bordered:ie}=X,{component:Z,type:fe,showLabel:_e,showContent:je,labelStyle:Me,contentStyle:Ae}=B;return U.map((Le,Se)=>{let{label:Re,children:Ke,prefixCls:Je=ne,className:nt,style:dt,labelStyle:kt,contentStyle:At,span:It=1,key:Kt}=Le;return typeof Z=="string"?o.createElement(ue,{key:`${fe}-${Kt||Se}`,className:nt,style:dt,labelStyle:Object.assign(Object.assign({},Me),kt),contentStyle:Object.assign(Object.assign({},Ae),At),span:It,colon:J,component:Z,itemPrefixCls:Je,bordered:ie,label:_e?Re:null,content:je?Ke:null,type:fe}):[o.createElement(ue,{key:`label-${Kt||Se}`,className:nt,style:Object.assign(Object.assign(Object.assign({},Me),dt),kt),span:1,colon:J,component:Z[0],itemPrefixCls:Je,bordered:ie,label:Re,type:"label"}),o.createElement(ue,{key:`content-${Kt||Se}`,className:nt,style:Object.assign(Object.assign(Object.assign({},Ae),dt),At),span:It*2-1,component:Z[1],itemPrefixCls:Je,bordered:ie,content:Ke,type:"content"})]})}var Y=U=>{const X=o.useContext(y),{prefixCls:B,vertical:J,row:ne,index:ie,bordered:Z}=U;return J?o.createElement(o.Fragment,null,o.createElement("tr",{key:`label-${ie}`,className:`${B}-row`},xe(ne,U,Object.assign({component:"th",type:"label",showLabel:!0},X))),o.createElement("tr",{key:`content-${ie}`,className:`${B}-row`},xe(ne,U,Object.assign({component:"td",type:"content",showContent:!0},X)))):o.createElement("tr",{key:ie,className:`${B}-row`},xe(ne,U,Object.assign({component:Z?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},X)))},Ce=b(54548),ge=b(14747),he=b(91945),Q=b(45503);const W=U=>{const{componentCls:X,labelBg:B}=U;return{[`&${X}-bordered`]:{[`> ${X}-view`]:{border:`${(0,Ce.bf)(U.lineWidth)} ${U.lineType} ${U.colorSplit}`,"> table":{tableLayout:"auto"},[`${X}-row`]:{borderBottom:`${(0,Ce.bf)(U.lineWidth)} ${U.lineType} ${U.colorSplit}`,"&:last-child":{borderBottom:"none"},[`> ${X}-item-label, > ${X}-item-content`]:{padding:`${(0,Ce.bf)(U.padding)} ${(0,Ce.bf)(U.paddingLG)}`,borderInlineEnd:`${(0,Ce.bf)(U.lineWidth)} ${U.lineType} ${U.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${X}-item-label`]:{color:U.colorTextSecondary,backgroundColor:B,"&::after":{display:"none"}}}},[`&${X}-middle`]:{[`${X}-row`]:{[`> ${X}-item-label, > ${X}-item-content`]:{padding:`${(0,Ce.bf)(U.paddingSM)} ${(0,Ce.bf)(U.paddingLG)}`}}},[`&${X}-small`]:{[`${X}-row`]:{[`> ${X}-item-label, > ${X}-item-content`]:{padding:`${(0,Ce.bf)(U.paddingXS)} ${(0,Ce.bf)(U.padding)}`}}}}}},le=U=>{const{componentCls:X,extraColor:B,itemPaddingBottom:J,colonMarginRight:ne,colonMarginLeft:ie,titleMarginBottom:Z}=U;return{[X]:Object.assign(Object.assign(Object.assign({},(0,ge.Wf)(U)),W(U)),{["&-rtl"]:{direction:"rtl"},[`${X}-header`]:{display:"flex",alignItems:"center",marginBottom:Z},[`${X}-title`]:Object.assign(Object.assign({},ge.vS),{flex:"auto",color:U.titleColor,fontWeight:U.fontWeightStrong,fontSize:U.fontSizeLG,lineHeight:U.lineHeightLG}),[`${X}-extra`]:{marginInlineStart:"auto",color:B,fontSize:U.fontSize},[`${X}-view`]:{width:"100%",borderRadius:U.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${X}-row`]:{"> th, > td":{paddingBottom:J},"&:last-child":{borderBottom:"none"}},[`${X}-item-label`]:{color:U.colorTextTertiary,fontWeight:"normal",fontSize:U.fontSize,lineHeight:U.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${(0,Ce.bf)(ie)} ${(0,Ce.bf)(ne)}`},[`&${X}-item-no-colon::after`]:{content:'""'}},[`${X}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${X}-item-content`]:{display:"table-cell",flex:1,color:U.contentColor,fontSize:U.fontSize,lineHeight:U.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${X}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${X}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${X}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${X}-row`]:{"> th, > td":{paddingBottom:U.paddingSM}}},"&-small":{[`${X}-row`]:{"> th, > td":{paddingBottom:U.paddingXS}}}})}},Oe=U=>({labelBg:U.colorFillAlter,titleColor:U.colorText,titleMarginBottom:U.fontSizeSM*U.lineHeightSM,itemPaddingBottom:U.padding,colonMarginRight:U.marginXS,colonMarginLeft:U.marginXXS/2,contentColor:U.colorText,extraColor:U.colorText});var Te=(0,he.I$)("Descriptions",U=>{const X=(0,Q.TS)(U,{});return le(X)},Oe),se=function(U,X){var B={};for(var J in U)Object.prototype.hasOwnProperty.call(U,J)&&X.indexOf(J)<0&&(B[J]=U[J]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ne=0,J=Object.getOwnPropertySymbols(U);ne<J.length;ne++)X.indexOf(J[ne])<0&&Object.prototype.propertyIsEnumerable.call(U,J[ne])&&(B[J[ne]]=U[J[ne]]);return B};const ee=U=>{const{prefixCls:X,title:B,extra:J,column:ne,colon:ie=!0,bordered:Z,layout:fe,children:_e,className:je,rootClassName:Me,style:Ae,size:Le,labelStyle:Se,contentStyle:Re,items:Ke}=U,Je=se(U,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","items"]),{getPrefixCls:nt,direction:dt,descriptions:kt}=o.useContext(_.E_),At=nt("descriptions",X),It=(0,O.Z)(),Kt=o.useMemo(()=>{var Rr;return typeof ne=="number"?ne:(Rr=(0,M.m9)(It,Object.assign(Object.assign({},g),ne)))!==null&&Rr!==void 0?Rr:3},[It,ne]),Qt=A(It,Ke,_e),tr=(0,x.Z)(Le),nr=L(Kt,Qt),[Mr,ar,yr]=Te(At),mr=o.useMemo(()=>({labelStyle:Se,contentStyle:Re}),[Se,Re]);return Mr(o.createElement(y.Provider,{value:mr},o.createElement("div",Object.assign({className:c()(At,kt==null?void 0:kt.className,{[`${At}-${tr}`]:tr&&tr!=="default",[`${At}-bordered`]:!!Z,[`${At}-rtl`]:dt==="rtl"},je,Me,ar,yr),style:Object.assign(Object.assign({},kt==null?void 0:kt.style),Ae)},Je),(B||J)&&o.createElement("div",{className:`${At}-header`},B&&o.createElement("div",{className:`${At}-title`},B),J&&o.createElement("div",{className:`${At}-extra`},J)),o.createElement("div",{className:`${At}-view`},o.createElement("table",null,o.createElement("tbody",null,nr.map((Rr,pr)=>o.createElement(Y,{key:pr,index:pr,colon:ie,prefixCls:At,vertical:fe==="vertical",bordered:Z,row:Rr}))))))))};ee.Item=H;var te=ee}}]);
