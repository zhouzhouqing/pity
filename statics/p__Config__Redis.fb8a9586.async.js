"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[4401],{51042:function(I,c,n){var m=n(1413),_=n(67294),o=n(42110),l=n(84089),D=function(E,B){return _.createElement(l.Z,(0,m.Z)((0,m.Z)({},E),{},{ref:B,icon:o.Z}))},i=_.forwardRef(D);c.Z=i},646:function(I,c,n){var m=n(86738),_=n(85893);c.Z=function(o){var l=o.title,D=o.text,i=o.onConfirm;return(0,_.jsx)(m.Z,{title:l,onConfirm:i,children:(0,_.jsx)("a",{children:D})})}},77619:function(I,c,n){n.r(c);var m=n(97857),_=n.n(m),o=n(15009),l=n.n(o),D=n(99289),i=n.n(D),Z=n(5574),E=n.n(Z),B=n(58841),v=n(34041),R=n(66309),z=n(96074),u=n(8232),S=n(4393),$=n(71230),j=n(15746),h=n(55102),V=n(14726),G=n(17788),Y=n(37804),k=n(72051),H=n(90596),M=n(67294),W=n(19478),J=n(51042),N=n(646),e=n(85893),f=v.Z.Option,Q=function(O){var C=O.gconfig,X=O.loading,p=O.dispatch,U=C.envList,w=C.redisConfig,q=C.envMap,ee=(0,M.useState)(!1),y=E()(ee,2),ne=y[0],g=y[1],se=(0,M.useState)({}),b=E()(se,2),P=b[0],T=b[1],F=function(){var a=L.getFieldsValue();p({type:"gconfig/fetchRedisConfig",payload:a})},re=function(){p({type:"gconfig/fetchEnvList",payload:{page:1,size:1e3,exactly:!0}})},ue=function(){var r=i()(l()().mark(function a(t){var d;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,p({type:"gconfig/deleteRedisConfig",payload:{id:t}});case 2:d=s.sent,d&&F();case 4:case"end":return s.stop()}},a)}));return function(t){return r.apply(this,arguments)}}();(0,M.useEffect)(function(){F(),re()},[]),(0,M.useEffect)(function(){x.resetFields(),x.setFieldsValue(P)},[P]);var ae=[{title:"\u73AF\u5883",key:"env",dataIndex:"env",render:function(a){return q[a]}},{title:"\u540D\u79F0",key:"name",dataIndex:"name"},{title:"\u5730\u5740",key:"addr",dataIndex:"addr"},{title:"\u7528\u6237\u540D",key:"username",dataIndex:"username"},{title:"\u5BC6\u7801",key:"password",dataIndex:"password"},{title:"\u7C7B\u578B",key:"cluster",dataIndex:"cluster",render:function(a){return a?(0,e.jsx)(R.Z,{color:"blue",children:"\u96C6\u7FA4"}):(0,e.jsx)(R.Z,{color:"green",children:"\u5B9E\u4F8B"})}},{title:"\u64CD\u4F5C",key:"ops",render:function(a,t){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){T(t),g(!0)},children:"\u7F16\u8F91"}),(0,e.jsx)(z.Z,{type:"vertical"}),(0,e.jsx)(N.Z,{text:"\u5220\u9664",title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5redis\u914D\u7F6E\u5417?",onConfirm:i()(l()().mark(function d(){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ue(t.id);case 2:case"end":return s.stop()}},d)}))})]})}}],_e=u.Z.useForm(),le=E()(_e,1),L=le[0],te=u.Z.useForm(),de=E()(te,1),x=de[0],oe=function(){var r=i()(l()().mark(function a(){var t,d;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,x.validateFields();case 2:if(t=s.sent,P.id){s.next=9;break}return s.next=6,p({type:"gconfig/insertRedisConfig",payload:t});case 6:d=s.sent,s.next=12;break;case 9:return s.next=11,p({type:"gconfig/updateRedisConfig",payload:_()(_()({},t),{},{id:P.id})});case 11:d=s.sent;case 12:d&&(g(!1),F());case 13:case"end":return s.stop()}},a)}));return function(){return r.apply(this,arguments)}}();return(0,e.jsx)(B._z,{title:"Redis\u914D\u7F6E",breadcrumb:null,children:(0,e.jsxs)(S.Z,{children:[(0,e.jsx)(u.Z,_()(_()({form:L},W.Z.LAYOUT),{},{onValuesChange:function(){F()},children:(0,e.jsxs)($.Z,{gutter:[8,8],children:[(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(u.Z.Item,{label:"\u73AF\u5883",name:"env",children:(0,e.jsx)(v.Z,{placeholder:"\u9009\u62E9\u73AF\u5883",allowClear:!0,children:U.map(function(r){return(0,e.jsx)(f,{value:r.id,children:r.name},r.id)})})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(u.Z.Item,{label:"\u540D\u79F0",name:"name",children:(0,e.jsx)(h.Z,{placeholder:"\u8F93\u5165redis\u540D\u79F0"})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(u.Z.Item,{label:"\u5730\u5740",name:"addr",children:(0,e.jsx)(h.Z,{placeholder:"\u8F93\u5165redis\u5730\u5740"})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(u.Z.Item,{label:"\u7C7B\u578B",name:"cluster",children:(0,e.jsxs)(v.Z,{placeholder:"\u9009\u62E9redis\u7C7B\u578B",allowClear:!0,children:[(0,e.jsx)(f,{value:!0,children:"\u96C6\u7FA4"}),(0,e.jsx)(f,{value:!1,children:"\u5B9E\u4F8B"})]})})})]})})),(0,e.jsxs)(V.ZP,{type:"primary",style:{marginBottom:8},onClick:function(){g(!0),T({})},children:[(0,e.jsx)(J.Z,{}),"\u6DFB\u52A0\u914D\u7F6E"]}),(0,e.jsx)(G.Z,{title:"Redis\u914D\u7F6E",width:500,open:ne,onCancel:function(){return g(!1)},onOk:oe,children:(0,e.jsxs)(u.Z,_()(_()({form:x,initialValues:P},W.Z.LAYOUT),{},{children:[(0,e.jsx)(u.Z.Item,{label:"\u73AF\u5883",name:"env",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BF9\u5E94\u73AF\u5883"}],children:(0,e.jsx)(v.Z,{placeholder:"\u9009\u62E9\u73AF\u5883",allowClear:!0,children:U.map(function(r){return(0,e.jsx)(f,{value:r.id,children:r.name},r.id)})})}),(0,e.jsx)(u.Z.Item,{label:"redis\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BF9\u5E94redis\u540D\u79F0"}],children:(0,e.jsx)(h.Z,{placeholder:"\u8F93\u5165redis\u540D\u79F0"})}),(0,e.jsx)(u.Z.Item,{label:"\u5730\u5740",name:"addr",rules:[{required:!0,message:"\u8F93\u5165redis\u8FDE\u63A5\u5730\u5740\uFF0C\u96C6\u7FA4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00"}],children:(0,e.jsx)(h.Z,{placeholder:"\u8F93\u5165redis\u8FDE\u63A5\u5730\u5740, \u96C6\u7FA4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00"})}),(0,e.jsx)(u.Z.Item,{label:"\u7528\u6237\u540D",name:"username",rules:[{required:!1,message:"\u8F93\u5165redis\u7528\u6237\u540D"}],children:(0,e.jsx)(h.Z,{placeholder:"\u8F93\u5165redis\u7528\u6237\u540D"})}),(0,e.jsx)(u.Z.Item,{label:"\u5BC6\u7801",name:"password",rules:[{required:!1,message:"\u8F93\u5165redis\u5BC6\u7801"}],children:(0,e.jsx)(h.Z,{placeholder:"\u8F93\u5165redis\u5BC6\u7801"})}),(0,e.jsx)(u.Z.Item,{label:"db",name:"db",rules:[{required:!1,message:"\u8F93\u5165redis\u5BC6\u7801"}],children:(0,e.jsx)(Y.Z,{placeholder:"\u8F93\u5165db\uFF0C\u9ED8\u8BA4\u4E3A0(\u96C6\u7FA4\u4E0D\u9700\u8981db)",style:{width:"100%"}})}),(0,e.jsx)(u.Z.Item,{label:"\u7C7B\u578B",name:"cluster",rules:[{required:!0,message:"\u9009\u62E9redis\u7C7B\u578B"}],children:(0,e.jsxs)(v.Z,{placeholder:"\u9009\u62E9redis\u7C7B\u578B",children:[(0,e.jsx)(f,{value:!0,children:"\u96C6\u7FA4"}),(0,e.jsx)(f,{value:!1,children:"\u5B9E\u4F8B"})]})})]}))}),(0,e.jsx)(k.Z,{columns:ae,dataSource:w,rowKey:function(a){return a.id},loading:X.effects["gconfig/listRedisConfig"]})]})})};c.default=(0,H.connect)(function(A){var O=A.gconfig,C=A.loading;return{gconfig:O,loading:C}})(Q)}}]);
