"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[8928],{20659:function(Ft,De,e){var me=e(97857),o=e.n(me),ae=e(19478),y=e(34041),A=e(55102),z=e(49288),ye=e(40411),s=e(99612),W=e(85893),v=y.Z.Option,R=A.Z.TextArea,E=[{label:"${response}",value:"${response}"},{label:"${status_code}",value:"${status_code}"}];De.Z={CaseAsserts:[{name:"name",label:"\u9A8C\u8BC1\u70B9",required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u70B9",type:"input",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u70B9",component:null,span:24},{name:"assert_type",label:"\u6821\u9A8C\u65B9\u5F0F",required:!0,component:(0,W.jsx)(y.Z,{placeholder:"\u9009\u62E9\u6821\u9A8C\u65B9\u5F0F\uFF0C\u652F\u6301JSON\u6DF1\u5C42\u6B21\u5224\u65AD",children:Object.keys(ae.Z.ASSERT_TYPE).map(function(S){return(0,W.jsx)(v,{value:S,children:ae.Z.ASSERT_TYPE[S]},S)})}),type:"select",span:24},{name:"expected",label:"\u9884\u671F\u7ED3\u679C",required:!0,message:"\u8BF7\u8F93\u5165\u9884\u671F\u7ED3\u679C",component:(0,W.jsx)(z.Z,{options:[],children:(0,W.jsx)(R,{placeholder:"\u8BF7\u8F93\u5165\u9884\u671F\u7ED3\u679C\uFF0C\u652F\u6301\u53D8\u91CF\u54E6"})}),span:24},{name:"actually",label:"\u5B9E\u9645\u7ED3\u679C",required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C",component:(0,W.jsx)(z.Z,{options:E,children:(0,W.jsx)(R,{placeholder:"\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C\uFF0C\u652F\u6301\u53D8\u91CF\u54E6"})}),span:24}],CaseDetail:[{name:"name",label:"\u573A\u666F\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",component:null,span:8},{name:"priority",label:"\u4F18\u5148\u7EA7",required:!0,component:(0,W.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7",children:ae.Z.PRIORITY.map(function(S){return(0,W.jsx)(v,{value:S,children:S},S)})}),type:"select",span:8},{name:"status",label:"\u72B6\u6001",required:!0,component:(0,W.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u5F53\u524D\u573A\u666F\u72B6\u6001",children:Object.keys(ae.Z.CASE_STATUS).map(function(S){return(0,W.jsx)(v,{value:S,children:(0,W.jsx)(ye.Z,o()({},ae.Z.CASE_BADGE[S]))},S)})}),type:"select",span:8},{name:"request_type",label:"\u8BF7\u6C42\u7C7B\u578B",required:!0,component:(0,W.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u534F\u8BAE",children:Object.keys(s.XN).map(function(S){return(0,W.jsx)(v,{value:S,disabled:S!=="1",children:s.XN[S]},S)})}),type:"select",span:8},{name:"tag",label:"\u573A\u666F\u6807\u7B7E",required:!1,component:(0,W.jsx)(y.Z,{mode:"tags",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u6807\u7B7E"}),type:"select",span:8},{name:"case_type",label:"\u573A\u666F\u7C7B\u578B",required:!0,component:(0,W.jsxs)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u573A\u666F\u7C7B\u578B",children:[(0,W.jsx)(v,{value:0,children:"\u666E\u901A\u573A\u666F"}),(0,W.jsx)(v,{value:1,children:"\u524D\u7F6E\u573A\u666F"}),(0,W.jsx)(v,{value:2,children:"\u6570\u636E\u5DE5\u5382"})]}),type:"select",span:8}],Environment:[{name:"name",label:"\u73AF\u5883\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u73AF\u5883\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u73AF\u5883\u540D\u79F0",component:null,span:24},{name:"remarks",label:"\u5907\u6CE8",required:!1,message:"\u8BF7\u8F93\u5165\u5907\u6CE8",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",component:(0,W.jsx)(A.Z.TextArea,{maxLength:200}),span:24}]}},26194:function(Ft,De,e){e.d(De,{Z:function(){return V}});var me=e(12444),o=e.n(me),ae=e(72004),y=e.n(ae),A=e(31996),z=e.n(A),ye=e(26037),s=e.n(ye),W=e(67294),v=e(53239),R=e.n(v),E=e(74981),S=e(82679),g=e.n(S),i=e(5619),Ue=e.n(i),O=e(41612),N=e.n(O),q=e(90252),a=e.n(q),n=e(85893),V=function(I){z()(F,I);var rt=s()(F);function F(){return o()(this,F),rt.apply(this,arguments)}return y()(F,[{key:"componentDidMount",value:function(){var t=this;this.props.setEditor(this.refs),(0,S.addCompleter)({getCompletions:function(Ae,Z,Ze,de,We){We(null,(t.props.tables||[]).map(function(xe){return{name:xe,value:xe}}))}})}},{key:"render",value:function(){var t=this.props,je=t.value,Ae=t.onChange,Z=t.height,Ze=t.readOnly,de=t.theme;return(0,n.jsx)(E.ZP,{ref:"aceEditor",mode:"json",theme:de||"material-one-dark",fontSize:14,showGutter:!0,showPrintMargin:!1,onChange:Ae,value:je,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:Z||300},setOptions:{readOnly:Ze||!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:4,useWorker:!0}})}}]),F}(W.Component)},99612:function(Ft,De,e){e.d(De,{e5:function(){return S},mi:function(){return E},dh:function(){return R},XN:function(){return W}});var me=e(63100),o=e(97857),ae=e.n(o),y=e(37594),A=e(85893),z=function(g){var i=g.icon,Ue=g.text,O=g.font,N=O===void 0?13:O,q=g.style,a=g.onClick,n=g.back,V=n===void 0?!0:n;return V?(0,A.jsxs)("span",{onClick:a,style:ae()({},q),children:[(0,A.jsx)(y.B,{type:i,style:{fontSize:N}})," ",Ue]}):(0,A.jsxs)("span",{onClick:a,style:ae()({},q),children:[Ue," ",(0,A.jsx)(y.B,{style:{fontSize:N},type:i})]})},ye=e(67294),s=e(66309),W={1:(0,A.jsxs)("span",{children:[(0,A.jsx)(me.Z,{theme:"outline",size:"14",fill:"#7ed321"})," HTTP"]}),2:(0,A.jsx)(z,{font:14,icon:"icon-GRPC",text:"GRPC"}),3:(0,A.jsx)(z,{font:14,icon:"icon-a-dubbo1",text:"Dubbo"})},v={1:(0,A.jsx)(s.Z,{color:"success",children:"HTTP"}),2:(0,A.jsx)(s.Z,{color:"orange",children:"GRPC"}),3:(0,A.jsx)(s.Z,{color:"blue",children:"DUBBO"})},R={GET:(0,A.jsx)(s.Z,{color:"success",children:"GET"}),POST:(0,A.jsx)(s.Z,{color:"blue",children:"POST"}),PUT:(0,A.jsx)(s.Z,{color:"cyan",children:"PUT"}),DELETE:(0,A.jsx)(s.Z,{color:"error",children:"DELETE"})},E={0:(0,A.jsx)(s.Z,{children:"\u666E\u901A"}),1:(0,A.jsx)(s.Z,{color:"blue",children:"\u6D4B\u8BD5\u8BA1\u5212"}),2:(0,A.jsx)(s.Z,{color:"success",children:"CI"}),3:(0,A.jsx)(s.Z,{children:"\u5176\u4ED6"})},S={0:(0,A.jsx)(s.Z,{color:"success",style:{marginLeft:8},children:"\u666E\u901A"}),1:(0,A.jsx)(s.Z,{color:"blue",style:{marginLeft:8},children:"\u524D\u7F6E"}),2:(0,A.jsx)(s.Z,{color:"warning",style:{marginLeft:8},children:"\u6570\u636E\u5DE5\u5382"})}},22763:function(Ft,De,e){var me=e(32983),o=e(82759),ae=e(85893);De.Z=function(y){var A=y.desc,z=y.height,ye=z===void 0?180:z,s=y.image,W=s===void 0?o.Z:s;return(0,ae.jsx)(me.Z,{image:W,imageStyle:{height:ye},description:A||"\u6682\u65E0\u6570\u636E"})}},7624:function(Ft,De,e){var me=e(20873),o=e(32983),ae=e(85893);De.Z=function(y){var A=y.desc,z=y.height,ye=z===void 0?180:z;return(0,ae.jsx)(o.Z,{image:me.Z,imageStyle:{height:ye},description:A||"\u6682\u65E0\u6570\u636E"})}},84298:function(Ft,De,e){var me=e(97857),o=e.n(me),ae=e(5574),y=e.n(ae),A=e(67294),z=e(8232),ye=e(17788),s=e(15746),W=e(76081),v=e(85893),R=z.Z.Item,E=function(g){var i=g.title,Ue=g.width,O=g.left,N=g.right,q=g.formName,a=g.record,n=g.onFinish,V=g.loading,I=g.fields,rt=g.open,F=g.onCancel,He=g.offset,t=He===void 0?0:He,je=g.children,Ae=g.Footer,Z=g.onTest,Ze=z.Z.useForm(),de=y()(Ze,1),We=de[0],xe=function(){We.validateFields().then(function(ee){n(ee)})};(0,A.useEffect)(function(){We.resetFields(),We.setFieldsValue(a)},[a]);var oe={labelCol:{span:O},wrapperCol:{span:N}};return(0,v.jsxs)(ye.Z,{style:{marginTop:t},confirmLoading:V,footer:Ae!==void 0?(0,v.jsx)(Ae,{onOk:xe,onCancel:F,onTest:function(){We.validateFields().then(function(ee){Z(ee)})}}):void 0,title:i,width:Ue,open:rt,onOk:xe,onCancel:F,children:[je||null,(0,v.jsx)(z.Z,o()(o()({form:We},oe),{},{name:q,initialValues:a,onFinish:n,children:I.map(function(r,ee){return(0,v.jsx)(s.Z,{span:r.span||24,children:(0,v.jsx)(R,{label:r.label,colon:r.colon||!0,initialValue:r.initialValue,rules:[{required:r.required,message:r.message}],name:r.name,valuePropName:r.valuePropName||"value",children:(0,W.Z)(r.type,r.placeholder,r.component)})},ee)})}))]})};De.Z=E},76081:function(Ft,De,e){var me=e(55102),o=e(72269),ae=e(67294),y=e(85893),A=me.Z.TextArea,z=function(s,W){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return v||(s==="input"?(0,y.jsx)(me.Z,{placeholder:W}):s==="textarea"?(0,y.jsx)(A,{placeholder:W}):s==="switch"?(0,y.jsx)(o.Z,{}):null)};De.Z=z},56262:function(Ft,De,e){e.d(De,{Z:function(){return xe}});var me=e(67294),o=e(34041),ae=e(55102),y=e(71230),A=e(15746),z=e(15009),ye=e.n(z),s=e(19632),W=e.n(s),v=e(99289),R=e.n(v),E=e(5574),S=e.n(E),g=e(97857),i=e.n(g),Ue=e(13769),O=e.n(Ue),N=e(8232),q=e(2453),a=e(86738),n=e(96746),V=e(96074),I=e(14726),rt=e(72051),F=e(51042),He=e(19478),t=e(85893),je=["editing","dataIndex","title","type","setType","record","index","key","children"],Ae=o.Z.Option,Z=function(r){var ee=r.editing,u=r.dataIndex,w=r.title,ge=r.type,te=r.setType,Ke=r.record,ut=r.index,Qe=r.key,B=r.children,J=O()(r,je);return(0,t.jsx)("td",i()(i()({},J),{},{children:ee?(0,t.jsx)(N.Z.Item,{name:u,style:{margin:0},initialValue:Ke.dataIndex,rules:[{required:!0,message:"Please Input ".concat(w,"!")}],children:(0,t.jsx)(ae.Z,{placeholder:"please input ".concat(w)})}):B}))},Ze=function(r){var ee=r.data,u=r.setData,w=r.ossFileList,ge=N.Z.useForm(),te=S()(ge,1),Ke=te[0],ut=(0,me.useState)(""),Qe=S()(ut,2),B=Qe[0],J=Qe[1],Xe=(0,me.useState)("FILE"),ke=S()(Xe,2),Pe=ke[0],qe=ke[1],ot=(0,me.useState)(null),we=S()(ot,2),$e=we[0],mt=we[1],dt=function(b){return b.key===B},ct=function(b){Ke.setFieldsValue(i()({},b)),J(b.key)},At=function(){J("")},Dt=function(){var Be=R()(ye()().mark(function b(T){var L,H,Ce,lt,ce;return ye()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.prev=0,ne.next=3,Ke.validateFields();case 3:if(L=ne.sent,!(Pe==="FILE"&&!$e)){ne.next=7;break}return q.ZP.info("\u8BF7\u9009\u62E9\u6587\u4EF6"),ne.abrupt("return");case 7:if(H=W()(ee),Ce=H.findIndex(function(D){return T===D.key}),!(Ce>-1)){ne.next=20;break}if(lt=H[Ce],ce=H.findIndex(function(D){return L.key===D.key}),!(ce>-1)){ne.next=15;break}return q.ZP.info("\u8BE5key\u5DF2\u5B58\u5728"),ne.abrupt("return");case 15:H.splice(Ce,1,i()(i()(i()({},lt),L),{},{type:Pe,value:$e})),u(H),J(""),ne.next=23;break;case 20:H.push(i()(i()({},L),{},{type:Pe,value:$e})),u(H),J("");case 23:ne.next=28;break;case 25:ne.prev=25,ne.t0=ne.catch(0),console.log("Validate Failed:",ne.t0);case 28:case"end":return ne.stop()}},b,null,[[0,25]])}));return function(T){return Be.apply(this,arguments)}}(),St=function(b){var T=W()(ee);T.splice(T.findIndex(function(L){return b===L.key}),1),u(T)},Zt=[{title:"KEY",dataIndex:"key",width:"30%",editable:!0},{title:"TYPE",dataIndex:"type",type:"select",width:"10%",render:function(b,T){return T.key===B?(0,t.jsxs)(o.Z,{style:{width:"100%"},value:Pe,onChange:function(H){qe(H)},children:[(0,t.jsx)(Ae,{value:"FILE",children:"FILE"}),(0,t.jsx)(Ae,{value:"TEXT",children:"TEXT"})]}):T.type}},{title:"VALUE",dataIndex:"value",width:"40%",render:function(b,T){return T.key===B?Pe==="FILE"?(0,t.jsx)(o.Z,{style:{width:"100%"},placeholder:"please select oss file",showSearch:!0,value:$e,onChange:function(H){return mt(H)},children:w.map(function(L){return(0,t.jsx)(Ae,{value:L.file_path,children:L.file_path},L.file_path)})}):(0,t.jsx)(ae.Z,{placeholder:"please input VALUE",value:$e,onChange:function(H){mt(H.target.value)}}):Pe==="FILE"?(0,t.jsx)("a",{href:"".concat(He.Z.URL,"/oss/download?filepath=").concat(T.value),children:T.value}):T.value}},{title:"OPERATION",dataIndex:"operation",render:function(b,T){var L=dt(T);return L?(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{onClick:function(){return Dt(T.key)},style:{marginRight:8},children:"Save"}),(0,t.jsx)(a.Z,{title:"Sure to cancel?",onConfirm:At,children:(0,t.jsx)("a",{children:"Cancel"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z.Link,{disabled:B!=="",onClick:function(){return ct(T)},children:"Edit"}),(0,t.jsx)(V.Z,{type:"vertical"}),(0,t.jsx)(n.Z.Link,{disabled:B!=="",onClick:function(){return St(T.key)},children:"Remove"})]})}}],Ie=function(){var b=[].concat(W()(ee),[{key:"",type:"TEXT",value:null}]);u(b),qe("FILE")},xt=Zt.map(function(Be){return Be.editable?i()(i()({},Be),{},{onCell:function(T,L){return{record:T,index:L,type:Pe,setType:qe,dataIndex:Be.dataIndex,title:Be.title,editing:dt(T)}}}):Be});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z,{style:{marginBottom:12},children:(0,t.jsx)(A.Z,{span:6,children:(0,t.jsx)(I.ZP,{type:"primary",onClick:Ie,icon:(0,t.jsx)(F.Z,{}),children:"Add"})})}),(0,t.jsx)(N.Z,{form:Ke,component:!1,children:(0,t.jsx)(rt.Z,{components:{body:{cell:Z}},dataSource:ee,columns:xt,rowClassName:"editable-row",pagination:{onChange:At}})})]})},de=Ze,We=o.Z.Option,xe=function(oe){var r=oe.ossFileList,ee=oe.dataSource,u=oe.setDataSource,w=[{title:"KEY",dataIndex:"key",render:function(){return(0,t.jsx)(ae.Z,{})}},{title:"VALUE",dataIndex:"value",render:function(){return(0,t.jsx)(o.Z,{children:r.map(function(te){return(0,t.jsx)(We,{value:te.key,children:te.key},te.key)})})}}];return(0,t.jsx)(y.Z,{gutter:8,style:{marginTop:16},children:(0,t.jsx)(A.Z,{span:24,children:(0,t.jsx)(de,{bordered:!0,columns:w,data:ee,setData:u,ossFileList:r})})})}},15106:function(Ft,De,e){var me=e(9783),o=e.n(me),ae=e(15009),y=e.n(ae),A=e(99289),z=e.n(A),ye=e(52677),s=e.n(ye),W=e(5574),v=e.n(W),R=e(67294),E=e(34041),S=e(11941),g=e(16568),i=e(50136),Ue=e(71230),O=e(15746),N=e(4393),q=e(8232),a=e(83062),n=e(55102),V=e(14726),I=e(78045),rt=e(85418),F=e(72051),He=e(65987),t=e(31484),je=e(63783),Ae=e(34804),Z=e(53677),Ze=e(12414),de=e(10981),We=e(89609),xe=e(56262),oe=e(90596),r=e(26194),ee=e(37594),u=e(85893),w=E.Z.Option,ge=S.Z.TabPane,te={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},Ke=function(B){return B&&B.response?(0,u.jsx)("div",{style:{marginRight:16},children:(0,u.jsxs)("span",{children:["Status:",(0,u.jsxs)("span",{style:{color:te[B.status_code]?te[B.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[B.status_code," ",te[B.status_code]?te[B.status_code].text:""]}),(0,u.jsxs)("span",{style:{marginLeft:8,marginRight:8},children:["Time: ",(0,u.jsx)("span",{style:{color:"#67C23A"},children:B.cost})]})]})}):null},ut=function(B){var J=B.form,Xe=B.gconfig,ke=B.dispatch,Pe=B.body,qe=B.setBody,ot=B.headers,we=B.setHeaders,$e=B.formData,mt=B.setFormData,dt=B.caseInfo,ct=B.bodyType,At=B.setBodyType,Dt=B.save,St=Dt===void 0?null:Dt,Zt=(0,R.useState)("JSON"),Ie=v()(Zt,2),xt=Ie[0],Be=Ie[1],b=(0,R.useState)("GET"),T=v()(b,2),L=T[0],H=T[1],Ce=(0,R.useState)([]),lt=v()(Ce,2),ce=lt[0],Bt=lt[1],ne=(0,R.useState)(function(){return ce.map(function(f){return f.id})}),D=v()(ne,2),p=D[0],M=D[1],_=(0,R.useState)(function(){return ot.map(function(f){return f.id})}),Se=v()(_,2),ze=Se[0],Ne=Se[1],le=(0,R.useState)(!1),Te=v()(le,2),et=Te[0],P=Te[1],h=(0,R.useState)({}),d=v()(h,2),x=d[0],se=d[1],G=(0,R.useState)(""),k=v()(G,2),_e=k[0],re=k[1],Q=(0,R.useState)(null),ie=v()(Q,2),Ge=ie[0],he=ie[1],Fe=(0,R.useState)(!1),$=v()(Fe,2),pe=$[0],tt=$[1],it=Xe.ossFileList,gt=Xe.envMap,Ve=Xe.addressList,Y=function(){if(Pe){var c=JSON.parse(Pe);s()(c)==="object"&&c[0]!==void 0&&mt(c)}};(0,R.useEffect)(function(){dt&&H(dt.request_method)},[dt.request_method]),(0,R.useEffect)(function(){if(ct===2){ke({type:"gconfig/listOssFile"});try{Y()}catch(f){}}},[ct]),(0,R.useEffect)(function(){ke({type:"gconfig/fetchAddress"})},[]);var fe=function(){var f=z()(y()().mark(function c(){return y()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:re(J.getFieldValue("url")),Re(J.getFieldValue("url"));case 2:case"end":return C.stop()}},c)}));return function(){return f.apply(this,arguments)}}();(0,R.useEffect)(function(){fe()},[Pe]);var Me=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],nt=function(c){if(!x[c])return[];var l=JSON.parse(x[c]);return Object.keys(l).map(function(C){return{key:C,value:l[C]}})},be=function(c){var l=J.getFieldValue("url"),C;l===void 0?C="":C=l.split("?")[0],c.forEach(function(X,ue){X.key&&(ue===0?C="".concat(C,"?").concat(X.key,"=").concat(X.value||""):C="".concat(C,"&").concat(X.key,"=").concat(X.value||""))}),J.setFieldsValue({url:C})},Re=function(c){if(!!c){var l=c.split("?");if(l.length<2)Bt([]);else{var C=l[1].split("&"),X=[],ue=[];C.forEach(function(Ye,yt){var Ot=Ye.split("="),bt=v()(Ot,2),Lt=bt[0],Ut=bt[1],It=Date.now();ue.push(It+yt+10),X.push({key:Lt,value:Ut,id:It+yt+10,description:""})}),Bt(X),M(ue)}}},ht=function(c){Be(c)},Je=function(){var c={};return ot.forEach(function(l){l.key!==""&&(c[l.key]=l.value)}),c},jt=function(){var f=z()(y()().mark(function c(){var l,C,X;return y()().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(l=J.getFieldValue("url"),l!==""){Ye.next=4;break}return g.ZP.error({message:"\u8BF7\u6C42Url\u4E0D\u80FD\u4E3A\u7A7A"}),Ye.abrupt("return");case 4:return P(!0),C={method:L||"GET",url:l,body:Pe,body_type:ct,headers:Je()},ct===0&&(C.body=null),Ye.next=9,(0,Ze.c3)(C);case 9:X=Ye.sent,P(!1),de.Z.response(X,!0)&&se(X.data);case 12:case"end":return Ye.stop()}},c)}));return function(){return f.apply(this,arguments)}}(),Oe=function(c,l){if(c==="params"){var C=ce.filter(function(ue){return ue.id!==l});Bt(C),be(C)}else{var X=ot.filter(function(ue){return ue.id!==l});we(X)}},ft=(0,u.jsxs)(i.Z,{children:[(0,u.jsx)(i.Z.Item,{children:(0,u.jsx)("a",{onClick:function(){ht("Text")},children:"Text"})},"Text"),(0,u.jsx)(i.Z.Item,{children:(0,u.jsx)("a",{onClick:function(){ht("JavaScript")},children:"JavaScript"})},"JavaScript"),(0,u.jsx)(i.Z.Item,{children:(0,u.jsx)("a",{onClick:function(){ht("JSON")},children:"JSON"})},"JSON"),(0,u.jsx)(i.Z.Item,{children:(0,u.jsx)("a",{onClick:function(){ht("HTML")},children:"HTML"})},"HTML"),(0,u.jsx)(i.Z.Item,{children:(0,u.jsx)("a",{onClick:function(){ht("XML")},children:"XML"})},"XML")]}),ve=function(c){return[{title:"KEY",key:"key",dataIndex:"key"},{title:"VALUE",key:"value",dataIndex:"value"},{title:"DESCRIPTION",key:"description",dataIndex:"description"},{title:"\u64CD\u4F5C",valueType:"option",render:function(C,X){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(He.Z,{style:{cursor:"pointer"},onClick:function(){M([X.id])}}),(0,u.jsx)(t.Z,{style:{cursor:"pointer",marginLeft:8},onClick:function(){Oe(c,X.id)},twoToneColor:"#eb2f96"})]})}}]},Tt=function(c){return c===0?(0,u.jsx)("div",{style:{height:"20vh",lineHeight:"20vh",textAlign:"center"},children:"This request does not have a body"}):c===2?(0,u.jsx)(xe.Z,{ossFileList:it,dataSource:$e,setDataSource:mt}):(0,u.jsx)(Ue.Z,{style:{marginTop:12},children:(0,u.jsx)(O.Z,{span:24,children:(0,u.jsx)(N.Z,{bodyStyle:{padding:0},children:(0,u.jsx)(r.Z,{value:Pe,onChange:function(C){return qe(C)},height:"20vh",setEditor:he})})})})},Et=function(){var c={};return Ve.forEach(function(l){c[l.name]===void 0?c[l.name]=o()({},l.env,l.gateway):c[l.name][l.env]=l.gateway}),c},Ct=Et(),at=(0,u.jsx)(q.Z.Item,{name:"base_path",noStyle:!0,children:(0,u.jsxs)(E.Z,{style:{width:130},placeholder:"\u9009\u62E9BasePath",showSearch:!0,allowClear:!0,optionLabelProp:"label",filterOption:function(c,l){return l.children.length>1?!1:l.children.props.children.indexOf(c.toLowerCase())>=0},children:[(0,u.jsxs)(w,{value:null,label:"\u65E0",children:["\u65E0",(0,u.jsx)("a",{style:{float:"right",fontSize:12},href:"/#/config/address",children:"\u53BB\u914D\u7F6E"})]}),Object.keys(Ct).map(function(f){return(0,u.jsx)(w,{value:f,label:f,children:(0,u.jsx)(a.Z,{title:(0,u.jsx)("div",{children:Object.keys(Ct[f]).map(function(c){return(0,u.jsxs)("p",{children:[gt[c],": ",Ct[f][c]]})})}),children:f})},f)})]})});return(0,u.jsxs)(q.Z,{form:J,children:[(0,u.jsxs)(Ue.Z,{gutter:[8,8],children:[(0,u.jsx)(O.Z,{span:20,children:(0,u.jsxs)(q.Z,{layout:"inline",form:J,children:[(0,u.jsx)(O.Z,{span:8,children:(0,u.jsx)(q.Z.Item,{colon:!1,name:"request_method",label:"\u8BF7\u6C42\u65B9\u5F0F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5"}],initialValue:L,children:(0,u.jsxs)(E.Z,{placeholder:"\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F",onChange:function(c){return H(c)},style:{width:120,textAlign:"left"},children:[(0,u.jsx)(w,{value:"GET",children:"GET"},"GET"),(0,u.jsx)(w,{value:"POST",children:"POST"},"POST"),(0,u.jsx)(w,{value:"PUT",children:"PUT"},"PUT"),(0,u.jsx)(w,{value:"DELETE",children:"DELETE"},"DELETE")]})})}),(0,u.jsx)(O.Z,{span:16,children:(0,u.jsx)(q.Z.Item,{name:"url",colon:!1,label:(0,u.jsxs)(a.Z,{title:"\u70B9\u51FB\u53EF\u5C55\u5F00\u5168\u5C40\u53D8\u91CF\u63D0\u793A",children:["\u8BF7\u6C42\u5730\u5740",(0,u.jsx)(je.Z,{style:{marginLeft:4},onClick:function(){return tt(!0)}})]}),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42url"}],children:(0,u.jsx)(n.Z,{addonBefore:at,style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u8981\u8BF7\u6C42\u7684url",onChange:function(c){Re(c.target.value),J.setFieldsValue({url:c.target.value}),re(c.target.value)}})})})]})}),(0,u.jsx)(O.Z,{span:4,children:(0,u.jsx)("div",{style:{float:"right"},children:St?null:(0,u.jsxs)(V.ZP,{onClick:jt,loading:et,type:"primary",children:[(0,u.jsx)(ee.B,{type:"icon-fasong1"}),"Send"," "]})})})]}),(0,u.jsx)(Ue.Z,{style:{marginTop:8},children:(0,u.jsxs)(S.Z,{defaultActiveKey:"1",style:{width:"100%"},children:[(0,u.jsx)(ge,{tab:"Params",children:(0,u.jsx)(Z.Z,{columns:ve("params"),title:"Query Params",dataSource:ce,setDataSource:Bt,extra:be,editableKeys:p,setEditableRowKeys:M})},"1"),(0,u.jsx)(ge,{tab:"Headers",children:(0,u.jsx)(Z.Z,{columns:ve("headers"),title:"Headers",dataSource:ot,setDataSource:we,editableKeys:ze,setEditableRowKeys:Ne})},"2"),(0,u.jsxs)(ge,{tab:"Body",children:[(0,u.jsxs)(Ue.Z,{children:[(0,u.jsxs)(I.ZP.Group,{defaultValue:0,value:ct,onChange:function(c){At(c.target.value),c.target.value==="form-data"&&ke({type:"gconfig/listOssFile"})},children:[(0,u.jsx)(I.ZP,{value:0,children:"none"}),(0,u.jsx)(I.ZP,{value:2,children:"form-data"}),(0,u.jsx)(I.ZP,{value:3,children:"x-www-form-urlencoded"}),(0,u.jsx)(I.ZP,{value:1,children:"raw"}),(0,u.jsx)(I.ZP,{value:4,children:"binary"}),(0,u.jsx)(I.ZP,{value:5,children:"GraphQL"})]}),ct===1?(0,u.jsx)(rt.Z,{style:{marginLeft:8},overlay:ft,trigger:["click"],children:(0,u.jsxs)("a",{onClick:function(c){return c.preventDefault()},children:[xt," ",(0,u.jsx)(Ae.Z,{})]})}):null]}),Tt(ct)]},"3")]})}),(0,u.jsx)(Ue.Z,{gutter:[8,8],children:Object.keys(x).length===0?null:(0,u.jsxs)(S.Z,{style:{width:"100%"},tabBarExtraContent:Ke(x),children:[(0,u.jsx)(ge,{tab:"Body",children:(0,u.jsx)(r.Z,{value:s()(x==null?void 0:x.response)==="object"?JSON.stringify(x.response,null,2):x.response,readOnly:!0,height:"30vh",setEditor:he})},"1"),(0,u.jsx)(ge,{tab:"Cookie",children:(0,u.jsx)(F.Z,{columns:Me,dataSource:nt("cookies"),size:"small",pagination:!1})},"2"),(0,u.jsx)(ge,{tab:"Headers",children:(0,u.jsx)(F.Z,{columns:Me,dataSource:nt("response_headers"),size:"small",pagination:!1})},"3")]})})]})};De.Z=(0,oe.connect)(function(Qe){var B=Qe.gconfig;return{gconfig:B}})(ut)},53677:function(Ft,De,e){var me=e(67294),o=e(69935),ae=e(85893);De.Z=function(y){var A=y.columns,z=y.dataSource,ye=y.title,s=y.setDataSource,W=y.editableKeys,v=y.setEditableRowKeys,R=y.extra;return(0,me.useEffect)(function(){v(z.map(function(E){return E.id}))},[z]),(0,ae.jsx)(o.Z,{headerTitle:ye,columns:A,rowKey:"id",value:z,onChange:s,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{id:Date.now()}}},editable:{type:"multiple",editableKeys:W,actionRender:function(S,g,i){return[i.delete]},onValuesChange:function(S,g){R&&R(g),s(g)},onChange:v}})}},65245:function(Ft,De,e){e.d(De,{Z:function(){return n}});var me=e(19632),o=e.n(me),ae=e(13769),y=e.n(ae),A=e(15009),z=e.n(A),ye=e(99289),s=e.n(ye),W=e(97857),v=e.n(W),R=e(72051),E=e(95742),S=e(53682),g=e(62748),i=e(85893),Ue=["className","style"],O=(0,E.JV)(function(){return(0,i.jsx)(S.Z,{style:{cursor:"grab",color:"#999"}})}),N=[{title:"\u6392\u5E8F",dataIndex:"sort",width:65,className:"drag-visible",render:function(){return(0,i.jsx)(O,{})}}],q=(0,E.gU)(function(V){return(0,i.jsx)("tr",v()({},V))}),a=(0,E.hv)(function(V){return(0,i.jsx)("tbody",v()({},V))}),n=function(V){var I=V.dataSource,rt=V.columns,F=V.setDataSource,He=V.dragCallback,t=V.loading,je=function(){var Ze=s()(z()().mark(function de(We){var xe,oe,r,ee;return z()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(xe=We.oldIndex,oe=We.newIndex,xe===oe){w.next=11;break}if(r=(0,g.q)([].concat(I),xe,oe).filter(function(ge){return!!ge}),!He){w.next=10;break}return w.next=6,He(r);case 6:ee=w.sent,(ee||ee===void 0)&&F(r),w.next=11;break;case 10:F(r);case 11:case"end":return w.stop()}},de)}));return function(We){return Ze.apply(this,arguments)}}(),Ae=function(de){return(0,i.jsx)(a,v()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:je},de))},Z=function(de){var We=de.className,xe=de.style,oe=y()(de,Ue),r=I.findIndex(function(ee){return ee.index===oe["data-row-key"]});return(0,i.jsx)(q,v()({index:r},oe))};return(0,i.jsx)(R.Z,{pagination:!1,dataSource:I,loading:t,columns:[].concat(N,o()(rt)),rowKey:"index",components:{body:{wrapper:Ae,row:Z}}})}},80242:function(Ft,De,e){e.d(De,{Z:function(){return ne}});var me=e(15009),o=e.n(me),ae=e(9783),y=e.n(ae),A=e(19632),z=e.n(A),ye=e(97857),s=e.n(ye),W=e(99289),v=e.n(W),R=e(5574),E=e.n(R),S=e(42119),g=e(71230),i=e(15746),Ue=e(85265),O=e(14726),N=e(90596),q=e(37594),a=e(67294),n=e(34041),V=e(83062),I=e(72269),rt=e(16165),F=e(8232),He=e(76081),t=e(85893),je=F.Z.Item,Ae=function(D){var p=D.left,M=D.right,_=D.formName,Se=D.record,ze=D.onFinish,Ne=D.fields,le=D.pForm,Te=le;if(le===void 0){var et=F.Z.useForm(),P=E()(et,1),h=P[0];Te=h}var d={labelCol:{span:p},wrapperCol:{span:M}};return(0,a.useEffect)(function(){Te.setFieldsValue(Se)},[Se]),(0,t.jsx)(F.Z,s()(s()({form:Te},d),{},{name:_,initialValues:Se,onFinish:ze,children:(0,t.jsx)(g.Z,{gutter:8,children:Ne.map(function(x){return(0,t.jsx)(i.Z,{span:x.span||24,children:(0,t.jsx)(je,s()(s()({label:x.label,colon:x.colon||!0,rules:[{required:x.required,message:x.message}],name:x.name,valuePropName:x.valuePropName||"value"},x.layout||d),{},{children:(0,He.Z)(x.type,x.placeholder,x.component)}))})})})}))},Z=e(19478),Ze=e(26194),de=n.Z.Option,We=function(D){var p=D.data,M=D.form,_=D.dispatch,Se=D.testcaseData,ze=D.constructorType,Ne=(0,a.useState)(null),le=E()(Ne,2),Te=le[0],et=le[1];(0,a.useEffect)(function(){_({type:"construct/getTestCaseListTree"})},[]);var P=[{name:"name",label:"\u540D\u79F0",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u6B65\u9AA4\u540D\u79F0",initialValue:p.name,span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"constructor_case_id",label:"\u6D4B\u8BD5\u573A\u666F",required:!0,initialValue:p.constructor_case_id,placeholder:"\u8BF7\u9009\u62E9\u6D4B\u8BD5\u573A\u666F",component:(0,t.jsx)(n.Z,{placeholder:"\u8BF7\u9009\u62E9\u573A\u666F",children:Se.map(function(h){return(0,t.jsx)(de,{value:h.id,children:h.name},h.id)})}),span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"value",label:"\u8FD4\u56DE\u503C",placeholder:"\u8BF7\u586B\u5199\u8FD4\u56DE\u53D8\u91CF\u540D\u79F0\uFF0C\u4E0D\u9700\u8981\u53EF\u4E0D\u586B",required:!1,type:"input",initialValue:p.value,span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"public",label:(0,t.jsx)(V.Z,{title:"\u5F00\u542F\u5171\u4EAB\u540E, \u5176\u4ED6\u4EBA\u53EF\u4F7F\u7528\u4F60\u7684\u6570\u636E\u6784\u9020\u5668",children:(0,t.jsxs)("span",{children:["\u5171\u4EAB",(0,t.jsx)(rt.Z,{})]})}),required:!0,component:(0,t.jsx)(I.Z,{}),valuePropName:"checked",initialValue:p.public,span:6,layout:{labelCol:{span:16},wrapperCol:{span:8}}},{name:"enable",label:"\u542F\u7528",required:!0,component:(0,t.jsx)(I.Z,{}),valuePropName:"checked",initialValue:p.enable,span:6,layout:{labelCol:{span:16},wrapperCol:{span:8}}},{name:"params",label:"\u52A8\u6001\u53C2\u6570",required:!1,component:(0,t.jsx)(Ze.Z,{height:150,setEditor:et})}];return(0,t.jsx)(Ae,{fields:P,left:4,right:20,record:p,pForm:M})},xe=e(59847),oe=n.Z.Option,r=function(p){var M=p.construct,_=p.dispatch,Se=p.suffix,ze=Se===void 0?!0:Se,Ne=M.constructorData,le=M.searchConstructor,Te=M.constructorType,et=function(d){_({type:"construct/save",payload:d})},P=function(){_({type:"construct/getConstructorTree",payload:{constructor_type:Te,suffix:ze}})};return(0,a.useEffect)(function(){P()},[Te]),(0,t.jsx)(g.Z,{style:{marginTop:24},children:(0,t.jsx)(i.Z,{span:24,children:(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({label:"\u6570\u636E\u7C7B\u578B",name:"type"},Z.Z.SUB_LAYOUT),{},{children:(0,t.jsx)(n.Z,{disabled:!0,defaultValue:Te,children:Object.keys(Z.Z.CONSTRUCTOR_TYPE).map(function(h){return(0,t.jsx)(oe,{value:parseInt(h,10),children:Z.Z.CONSTRUCTOR_TYPE[h]},h)})})}))}),(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({label:"\u590D\u5236\u6784\u9020\u6761\u4EF6"},Z.Z.SUB_LAYOUT),{},{children:(0,t.jsx)(xe.Z,{allowClear:!0,showSearch:!0,style:{width:"100%"},value:le,filterTreeNode:function(d,x){return x.title.toLowerCase().indexOf(d.toLowerCase())>-1},dropdownStyle:{maxHeight:600,overflow:"auto"},treeData:Ne,placeholder:"\u901A\u8FC7\u641C\u7D22\u6784\u9020\u6761\u4EF6\uFF0C\u53EF\u4EE5\u5FEB\u901F\u590D\u5236\u53C2\u6570\u54E6\uFF01",treeDefaultExpandAll:!0,onChange:function(d){et({searchConstructor:d}),_(d!==void 0?{type:"construct/getConstructorData",payload:{id:d.split("_")[1]}}:{type:"construct/save",payload:{testCaseConstructorData:{type:Te,public:!0,enable:!0}}})}})}))})]})})})},ee=(0,N.connect)(function(D){var p=D.loading,M=D.construct;return{loading:p,construct:M}})(r),u=function(p){var M=p.caseId,_=p.construct,Se=p.dispatch,ze=p.form,Ne=p.onFinish,le=p.suffix,Te=_.testcaseData,et=_.testCaseConstructorData,P=_.constructorType;return(0,t.jsx)(g.Z,{style:{marginTop:24},gutter:[8,8],children:(0,t.jsxs)(i.Z,{span:24,children:[(0,t.jsx)(ee,{suffix:le}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(i.Z,{span:24,children:(0,t.jsx)(We,{data:et,dispatch:Se,testcaseData:Te,constructorType:P,form:ze})})})]})})},w=(0,N.connect)(function(D){var p=D.construct,M=D.loading;return{construct:p,loading:M}})(u),ge=e(60219),te=e(50136),Ke=e(55102),ut=e(26838),Qe=e(1633),B=e(63783),J=function(){return(0,t.jsx)(V.Z,{title:"\u5F00\u542F\u5171\u4EAB\u540E, \u5176\u4ED6\u4EBA\u53EF\u4F7F\u7528\u4F60\u7684\u6570\u636E\u6784\u9020\u5668",children:(0,t.jsxs)("span",{children:["\u5171\u4EAB ",(0,t.jsx)(B.Z,{})]})})},Xe=n.Z.Option,ke=function(p){var M=p.form,_=p.dispatch,Se=p.construct,ze=p.gconfig,Ne=p.suffix,le=(0,a.useState)("1"),Te=E()(le,2),et=Te[0],P=Te[1],h=(0,a.useState)(null),d=E()(h,2),x=d[0],se=d[1],G=Se.testCaseConstructorData,k=Se.constructorType,_e=ze.dbConfigData,re=function(){var Ge=_e.map(function(he){return he.name});return Array.from(new Set(Ge))},Q=function(Ge){P(Ge.key)};return(0,a.useEffect)(function(){_({type:"gconfig/fetchDbConfig"})},[]),(0,a.useEffect)(function(){M.resetFields(),M.setFieldsValue(G)},[G]),(0,t.jsx)(g.Z,{gutter:8,style:{marginTop:24},children:(0,t.jsx)(i.Z,{span:24,children:(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:3,children:(0,t.jsxs)(te.Z,{onClick:Q,style:{width:128},defaultSelectedKeys:["1"],defaultOpenKeys:["1"],mode:"inline",children:[(0,t.jsx)(te.Z.Item,{children:"\u7F16\u8F91SQL"},"1"),(0,t.jsx)(te.Z.Item,{children:"\u8C03\u8BD5SQL"},"2")]})}),et!=="1"?(0,t.jsx)(i.Z,{span:21,children:(0,t.jsx)(ut.Z,{leftHeight:420,cardHeight:130,tableHeight:272,editorHeight:130,imageHeight:60})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(i.Z,{span:21,children:[(0,t.jsx)(ee,{suffix:Ne}),(0,t.jsxs)(F.Z,s()(s()({},Z.Z.SUB_LAYOUT),{},{form:M,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165SQL\u8BED\u53E5\u540D\u79F0"}],initialValue:G.name,children:(0,t.jsx)(Ke.Z,{placeholder:"\u8BF7\u8F93\u5165SQL\u8BED\u53E5\u540D\u79F0"})})}),(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u6570\u636E\u5E93",name:"database",initialValue:G.database,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u8FDE\u63A5\u540D\u79F0, \u5982\u679C\u6CA1\u6709\u8BF7\u53BB\u3010\u6570\u636E\u5E93\u914D\u7F6E\u3011\u9875\u9762\u6DFB\u52A0"}],children:(0,t.jsx)(n.Z,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u8FDE\u63A5\u540D\u79F0, \u4F1A\u6839\u636E\u73AF\u5883\u81EA\u52A8\u5BFB\u627E\u5BF9\u5E94\u7684\u6570\u636E\u5E93",children:re().map(function(ie){return(0,t.jsx)(Xe,{value:ie,children:ie},ie)})})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ke.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})}),(0,t.jsx)(i.Z,{span:6,children:(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SWITCH_LAYOUT),{},{label:(0,t.jsx)(J,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:G.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(I.Z,{})}))}),(0,t.jsx)(i.Z,{span:6,children:(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SWITCH_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:G.enable||!0,valuePropName:"checked",children:(0,t.jsx)(I.Z,{})}))})]}),(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SQL_LAYOUT),{},{label:(0,t.jsxs)(V.Z,{title:"\u5207\u6362\u5DE6\u4FA7\u83DC\u5355\u53EF\u8FDB\u5165SQL\u7F16\u8F91\u5668",children:["SQL\u8BED\u53E5 ",(0,t.jsx)(B.Z,{})]}),name:"sql",rules:[{required:!0,message:"\u8BF7\u586B\u5199SQL\u8BED\u53E5"}],initialValue:G.sql,children:(0,t.jsx)(Qe.Z,{language:"mysql",height:150,setEditor:se})}))]}))]})})]})})})},Pe=(0,N.connect)(function(D){var p=D.construct,M=D.gconfig,_=D.loading;return{construct:p,gconfig:M,loading:_}})(ke),qe=e(97321),ot=e(11941),we=e(2453),$e=e(16568),mt=e(24315),dt=e(73505),ct=ot.Z.TabPane,At=n.Z.Option,Dt=function(p){var M=p.form,_=p.dispatch,Se=p.construct,ze=p.gconfig,Ne=p.suffix,le=(0,a.useState)(null),Te=E()(le,2),et=Te[0],P=Te[1],h=(0,a.useState)(null),d=E()(h,2),x=d[0],se=d[1],G=Se.testCaseConstructorData,k=Se.constructorType,_e=ze.redisConfig,re=ze.envMap;(0,a.useEffect)(function(){_({type:"gconfig/fetchRedisConfig"})},[]),(0,a.useEffect)(function(){M.resetFields(),M.setFieldsValue(G)},[G]);var Q=function(){var ie=v()(o()().mark(function Ge(he){var Fe;return o()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(!(!x||!he)){pe.next=3;break}return we.ZP.info("\u8BF7\u9009\u62E9redis\u6216\u5B8C\u5584Redis\u547D\u4EE4"),pe.abrupt("return");case 3:return pe.next=5,_({type:"gconfig/onlineRedisCommand",payload:{id:x,command:he}});case 5:Fe=pe.sent,$e.ZP.success({message:"\u6267\u884C\u5B8C\u6210",description:Fe});case 7:case"end":return pe.stop()}},Ge)}));return function(he){return ie.apply(this,arguments)}}();return(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(i.Z,{span:24,children:[(0,t.jsx)(ee,{suffix:Ne}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(i.Z,{span:24,children:(0,t.jsxs)(F.Z,s()(s()({},Z.Z.SUB_LAYOUT),{},{form:M,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Redis\u8BED\u53E5\u540D\u79F0"}],initialValue:G.name,children:(0,t.jsx)(Ke.Z,{placeholder:"\u8BF7\u8F93\u5165Redis\u8BED\u53E5\u540D\u79F0"})})}),(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:(0,t.jsxs)(V.Z,{title:"\u6D4B\u8BD5\u7684\u65F6\u5019\u53EF\u4EE5\u9009\u4E2D\u5BF9\u5E94\u73AF\u5883\u7684redis\uFF0C\u5426\u5219\u53EF\u4EE5\u968F\u4FBF\u9009\u4E00\u4E2A\u540D\u79F0\u7B26\u5408\u7684redis",children:["Redis ",(0,t.jsx)(B.Z,{})]}),name:"redis",initialValue:G.redis,rules:[{required:!0,message:"\u8BF7\u9009\u62E9Redis\u8FDE\u63A5\u540D\u79F0, \u5982\u679C\u6CA1\u6709\u8BF7\u53BB\u3010Redis\u914D\u7F6E\u3011\u9875\u9762\u6DFB\u52A0"}],children:(0,t.jsx)(n.Z,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Redis\u8FDE\u63A5\u540D\u79F0",onSelect:function(Ge,he){se(he.key)},children:_e.map(function(ie){return(0,t.jsxs)(At,{value:ie.name,children:[ie.name,"(",re[ie.env],")"]},ie.id)})})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ke.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})}),(0,t.jsx)(i.Z,{span:6,children:(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SWITCH_LAYOUT),{},{label:(0,t.jsx)(J,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:G.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(I.Z,{})}))}),(0,t.jsx)(i.Z,{span:6,children:(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SWITCH_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:G.enable||!0,valuePropName:"checked",children:(0,t.jsx)(I.Z,{})}))})]}),(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SQL_LAYOUT),{},{label:(0,t.jsxs)(V.Z,{title:"\u70B9\u51FB\u53EF\u6267\u884CRedis\u547D\u4EE4",children:["Redis\u547D\u4EE4",(0,t.jsx)(dt.Z,{twoToneColor:"#67C23A",onClick:v()(o()().mark(function ie(){return o()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,Q(M.getFieldValue("command"));case 2:case"end":return he.stop()}},ie)})),style:{margin:"0 4px",fontSize:16,cursor:"pointer"}})]}),name:"command",colon:!1,rules:[{required:!0,message:"\u8BF7\u586B\u5199redis\u6267\u884C\u8BED\u53E5"}],initialValue:G.command,children:(0,t.jsx)(mt.Z,{language:"text",height:150,setEditor:P})}))]}))})})]})})},St=(0,N.connect)(function(D){var p=D.construct,M=D.gconfig,_=D.loading;return{construct:p,gconfig:M,loading:_}})(Dt),Zt=e(53239),Ie=e(4007);function xt(D){return(0,t.jsx)(mt.Z,s()(s()({},D),{},{langugae:"python"}))}var Be=function(p){var M=p.form,_=p.dispatch,Se=p.construct,ze=p.suffix,Ne=(0,a.useState)(null),le=E()(Ne,2),Te=le[0],et=le[1],P=Se.testCaseConstructorData;(0,a.useEffect)(function(){M.resetFields(),M.setFieldsValue(P)},[P]);var h=function(){var d=v()(o()().mark(function x(){var se,G,k;return o()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(se=M.getFieldValue("command"),G=M.getFieldValue("value"),se){re.next=5;break}return we.ZP.info("\u811A\u672C\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),re.abrupt("return");case 5:return re.next=7,_({type:"testcase/onlinePyScript",payload:{value:G,command:se}});case 7:k=re.sent,$e.ZP.success({message:"\u6267\u884C\u5B8C\u6210",description:k});case 9:case"end":return re.stop()}},x)}));return function(){return d.apply(this,arguments)}}();return(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(i.Z,{span:24,children:[(0,t.jsx)(ee,{suffix:ze}),(0,t.jsxs)(F.Z,s()(s()({},Z.Z.SUB_LAYOUT),{},{form:M,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Python\u811A\u672C\u540D\u79F0"}],initialValue:P.name,children:(0,t.jsx)(Ke.Z,{placeholder:"\u8BF7\u8F93\u5165Python\u811A\u672C\u540D\u79F0"})})}),(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ke.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SUB_LAYOUT),{},{label:(0,t.jsx)(J,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:P.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(I.Z,{})}))}),(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SUB_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:P.enable||!0,valuePropName:"checked",children:(0,t.jsx)(I.Z,{})}))})]}),(0,t.jsx)(F.Z.Item,s()(s()({label:(0,t.jsxs)(V.Z,{title:"\u70B9\u51FB\u53EF\u6D4B\u8BD5Python\u811A\u672C",children:["Python\u811A\u672C",(0,t.jsx)(dt.Z,{twoToneColor:"#67C23A",onClick:v()(o()().mark(function d(){return o()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,h(M.getFieldValue("command"));case 2:case"end":return se.stop()}},d)})),style:{margin:"0 4px",fontSize:16,cursor:"pointer"}})]}),name:"command",colon:!1},Z.Z.SQL_LAYOUT),{},{initialValue:P.command,rules:[{required:!0,message:"\u8BF7\u8F93\u5165python\u4EE3\u7801"}],children:(0,t.jsx)(xt,{language:"python",height:180,setEditor:et})}))]}))]})})},b=(0,N.connect)(function(D){var p=D.construct,M=D.loading;return{construct:p,loading:M}})(Be),T=e(4393),L=e(15106),H=function(p){var M=p.form,_=p.dispatch,Se=p.construct,ze=p.suffix,Ne=p.headers,le=p.setHeaders,Te=p.body,et=p.setBody,P=p.bodyType,h=p.setBodyType,d=Se.testCaseConstructorData;return(0,a.useEffect)(function(){M.resetFields(),M.setFieldsValue(d),d.body_type&&h(d.body_type),d.headers&&le(d.headers||[]),et(d.body)},[d]),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(i.Z,{span:24,children:[(0,t.jsx)(ee,{suffix:ze}),(0,t.jsxs)(F.Z,s()(s()({},Z.Z.SUB_LAYOUT),{},{form:M,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165http\u8BF7\u6C42\u540D\u79F0"}],initialValue:d.name,children:(0,t.jsx)(Ke.Z,{placeholder:"\u8BF7\u8F93\u5165http\u8BF7\u6C42\u540D\u79F0"})})}),(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ke.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SUB_LAYOUT),{},{label:(0,t.jsx)(J,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:d.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(I.Z,{})}))}),(0,t.jsx)(i.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({},Z.Z.SUB_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:d.enable||!0,valuePropName:"checked",children:(0,t.jsx)(I.Z,{})}))})]}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(i.Z,{span:24,children:(0,t.jsx)(T.Z,{bordered:!0,children:(0,t.jsx)(L.Z,{bodyType:P,setBodyType:h,form:M,caseInfo:{},body:Te,setBody:et,headers:Ne,setHeaders:le,save:!1})})})})]}))]})})},Ce=(0,N.connect)(function(D){var p=D.construct,M=D.loading;return{construct:p,loading:M}})(H),lt=e(59697),ce=S.Z.Step,Bt=function(p){var M=p.modal,_=p.form,Se=p.setModal,ze=p.caseId,Ne=p.dispatch,le=p.construct,Te=p.testcase,et=p.width,P=p.fetchData,h=p.record,d=p.suffix,x=d===void 0?!1:d,se=p.createMode,G=se===void 0?!1:se,k=le.currentStep,_e=le.totalStep,re=le.constructorType,Q=le.testCaseConstructorData,ie=Te.preConstructor,Ge=Te.postConstructor,he=(0,a.useState)([]),Fe=E()(he,2),$=Fe[0],pe=Fe[1],tt=(0,a.useState)(""),it=E()(tt,2),gt=it[0],Ve=it[1],Y=(0,a.useState)(0),fe=E()(Y,2),Me=fe[0],nt=fe[1],be=function(ve){Ne({type:"construct/save",payload:ve})},Re=function(ve){switch(Q.type){case 0:return JSON.stringify({constructor_case_id:ve.constructor_case_id,params:ve.params});case 1:return JSON.stringify({database:ve.database,sql:ve.sql});case 2:return JSON.stringify({redis:ve.redis,command:ve.command});case 3:return JSON.stringify({command:ve.command});case 4:return JSON.stringify({body:gt,headers:lt.Z.translateHeaders($),base_path:ve.base_path,url:ve.url,request_method:ve.request_method,body_type:Me})}},ht=function(){var ft=v()(o()().mark(function ve(){var Tt,Et,Ct,at,f;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,_.validateFields();case 2:if(Tt=l.sent,Et={value:Tt.value,type:Q.type,name:Tt.name,constructor_json:Re(Tt),enable:Tt.enable,case_id:ze,public:Tt.public},G){l.next=17;break}if(!h.id){l.next=11;break}return l.next=8,Ne({type:"construct/update",payload:s()(s()({},Et),{},{id:h.id,suffix:x})});case 8:Ct=l.sent,l.next=14;break;case 11:return l.next=13,Ne({type:"construct/insert",payload:s()(s()({},Et),{},{suffix:x})});case 13:Ct=l.sent;case 14:Ct&&P(),l.next=20;break;case 17:f=z()(x?Ge:ie),h.tempIndex===void 0?f.push(s()(s()({},Et),{},{suffix:x,index:f.length})):f.splice(h.tempIndex,1,s()(s()({},Et),{},{suffix:x})),Ne({type:"testcase/save",payload:(at={},y()(at,x?"postConstructor":"preConstructor",f),y()(at,"constructorModal",!1),at)});case 20:case"end":return l.stop()}},ve)}));return function(){return ft.apply(this,arguments)}}(),Je=function(ve){be({constructorType:ve,testCaseConstructorData:{type:ve,public:!0,enable:!0},currentStep:k+1})},jt=function(){if(k===0)return(0,t.jsxs)(g.Z,{gutter:[12,12],style:{marginTop:36},children:[(0,t.jsx)(i.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(q.B,{type:"icon-yongliliebiao",style:{fontSize:32}}),title:"\u6D4B\u8BD5\u573A\u666F",description:"\u6D4B\u8BD5\u573A\u666F\u53EF\u4EE5\u590D\u7528, \u5E76\u4F20\u9012\u7528\u4F8B\u7684\u6570\u636E\u7ED9\u4E0B\u4E00\u4E2A\u573A\u666F",onClick:function(){return Je(0)}})}),(0,t.jsx)(i.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(q.B,{type:"icon-mysql11",style:{fontSize:32}}),title:"SQL\u8BED\u53E5",description:"\u901A\u8FC7\u6267\u884CSQL\u8BED\u53E5\uFF0C\u53EF\u4EE5\u9020\u51FA/\u6062\u590D\u7528\u4F8B\u573A\u666F\u9700\u8981\u7684\u6570\u636E",onClick:function(){return Je(1)}})}),(0,t.jsx)(i.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(q.B,{type:"icon-redis2",style:{fontSize:32}}),title:"Redis\u64CD\u4F5C",description:"\u901A\u8FC7\u64CD\u4F5CRedis\uFF0C\u53EF\u4EE5\u83B7\u53D6\u6216\u8005\u6821\u9A8C\u7F13\u5B58\u4E2D\u7684\u6570\u636E",onClick:function(){return Je(2)}})}),(0,t.jsx)(i.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(q.B,{type:"icon-python",style:{fontSize:32}}),title:"Python\u65B9\u6CD5",description:"\u9700\u8981\u81EA\u5B9A\u4E49\u9020\u6570\u65B9\u6CD5\u7684\uFF0C\u53EF\u4EE5\u4F7F\u7528Python\u7F16\u5199\u5BF9\u5E94\u7684\u6838\u5FC3\u65B9\u6CD5",onClick:function(){return Je(3)}})}),(0,t.jsx)(i.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(q.B,{type:"icon-qingqiu",style:{fontSize:32}}),title:"HTTP\u8BF7\u6C42",description:"\u4F9D\u8D56\u4E8E\u7B2C\u4E09\u65B9\u7684\u63A5\u53E3\uFF0C\u63A8\u8350\u4F7F\u7528HTTP\u8BF7\u6C42\uFF0C\u5982\u901A\u8FC7\u767E\u5EA6api\u8BC6\u522B\u5BF9\u5E94\u56FE\u7247\u9A8C\u8BC1\u7801",onClick:function(){return Je(4)}})})]});if(k===1){if(re===0)return(0,t.jsx)(w,{form:_,suffix:x});if(re===1)return(0,t.jsx)(Pe,{form:_,suffix:x});if(re===2)return(0,t.jsx)(St,{form:_,suffix:x});if(re===3)return(0,t.jsx)(b,{form:_,suffix:x});if(re===4)return(0,t.jsx)(Ce,{suffix:x,form:_,headers:$,bodyType:Me,setBodyType:nt,setHeaders:pe,body:gt,setBody:Ve})}},Oe=function(){be({currentStep:k-1})};return(0,t.jsx)(Ue.Z,{title:x?"\u540E\u7F6E\u6B65\u9AA4":"\u524D\u7F6E\u6B65\u9AA4",width:et||800,open:M,onClose:function(){return Se(!1)},footer:null,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(i.Z,{span:6}),(0,t.jsx)(i.Z,{span:12,children:(0,t.jsxs)(S.Z,{current:k,size:"small",children:[(0,t.jsx)(ce,{title:"\u9009\u62E9\u7C7B\u578B"},"type"),(0,t.jsx)(ce,{title:"\u6784\u9020\u6570\u636E"},"type")]})}),(0,t.jsx)(i.Z,{span:6})]}),jt(),(0,t.jsxs)("div",{style:{marginTop:24,textAlign:"center"},children:[k===_e&&(0,t.jsxs)(O.ZP,{type:"primary",onClick:ht,children:[(0,t.jsx)(ge.Z,{})," \u5B8C\u6210"]}),k>0&&(0,t.jsxs)(O.ZP,{style:{margin:"0 8px"},onClick:function(){return Oe()},children:[(0,t.jsx)(q.B,{type:"icon-shangyibu1"})," \u4E0A\u4E00\u6B65"]})]})]})})},ne=(0,N.connect)(function(D){var p=D.construct,M=D.testcase,_=D.loading;return{construct:p,loading:_,testcase:M}})(Bt)},44046:function(Ft,De,e){e.d(De,{Z:function(){return et}});var me=e(97857),o=e.n(me),ae=e(19632),y=e.n(ae),A=e(9783),z=e.n(A),ye=e(15009),s=e.n(ye),W=e(99289),v=e.n(W),R=e(5574),E=e.n(R),S=e(37594),g=e(44413),i=e(22763),Ue=e(7624),O=e(67294),N=e(4393),q=e(90596),a=e(15106),n=e(85893),V=function(h){return(0,n.jsx)(N.Z,{bordered:h.bordered,children:(0,n.jsx)(a.Z,o()({},h))})},I=(0,q.connect)(function(P){var h=P.gconfig;return{gconfig:h}})(V),rt=e(65245),F=e(96074),He=e(17788),t=e(71230),je=e(15746),Ae=e(14726),Z=e(72051),Ze=e(11475),de=e(51042),We=e(84298),xe=e(20659),oe=e(10981),r=e(19478),ee=function(h){var d=h.dispatch,x=h.testcase,se=h.caseId,G=h.createMode,k=(0,O.useState)(!1),_e=E()(k,2),re=_e[0],Q=_e[1],ie=(0,O.useState)({}),Ge=E()(ie,2),he=Ge[0],Fe=Ge[1],$=x.asserts,pe=function(){var Ve=v()(s()().mark(function Y(fe){var Me;return s()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,d({type:"testcase/deleteTestCaseAsserts",payload:{id:fe.id}});case 2:Me=be.sent,Me&&d({type:"testcase/save",payload:{asserts:$.filter(function(Re){return Re.id!==fe.id})}});case 4:case"end":return be.stop()}},Y)}));return function(fe){return Ve.apply(this,arguments)}}(),tt=function(Y){var fe=y()($);fe.splice(Y.index,1),d({type:"testcase/save",payload:{asserts:fe}})},it=[{title:"#",key:"index",render:function(Y,fe,Me){return Me+1}},{title:"\u6821\u9A8C\u5185\u5BB9",key:"name",dataIndex:"name"},{title:"\u7C7B\u578B",key:"assert_type",dataIndex:"assert_type",render:function(Y){return r.Z.ASSERT_TYPE[Y]}},{title:"\u9884\u671F\u7ED3\u679C",key:"expected",dataIndex:"expected",ellipse:!0},{title:"\u5B9E\u9645\u7ED3\u679C",key:"actually",dataIndex:"actually",ellipse:!0},{title:"\u64CD\u4F5C",key:"ops",render:function(Y,fe,Me){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){Q(!0),Fe(o()(o()({},fe),{},{index:Me}))},children:"\u7F16\u8F91"}),(0,n.jsx)(F.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){He.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u65AD\u8A00\u6570\u636E\u5417?",icon:(0,n.jsx)(Ze.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var be=v()(s()().mark(function ht(){return s()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(!G){jt.next=4;break}tt(o()(o()({},fe),{},{index:Me})),jt.next=6;break;case 4:return jt.next=6,pe(fe);case 6:case"end":return jt.stop()}},ht)}));function Re(){return be.apply(this,arguments)}return Re}()})},children:"\u5220\u9664"})]})}}],gt=function(){var Ve=v()(s()().mark(function Y(fe){var Me,nt,be,Re,ht,Je;return s()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Me=o()({case_id:se},fe),!G){Oe.next=8;break}return he.index!==void 0?(be=y()($),be.splice(he.index,1,o()({},Me))):be=[].concat(y()($),[o()({},Me)]),Oe.next=5,d({type:"testcase/save",payload:{asserts:be}});case 5:Q(!1),Oe.next=29;break;case 8:if(!he.id){Oe.next=22;break}return Oe.next=11,d({type:"testcase/updateTestCaseAsserts",payload:o()(o()({},Me),{},{id:he.id})});case 11:if(nt=Oe.sent,!oe.Z.response(nt,!0)){Oe.next=20;break}return Q(!1),Re=y()($),ht=Re.findIndex(function(ft){return he.id===ft.id}),Je=Re[ht],Re.splice(ht,1,o()(o()({},Je),nt.data)),Oe.next=20,d({type:"testcase/save",payload:{asserts:Re}});case 20:Oe.next=29;break;case 22:return Oe.next=24,d({type:"testcase/insertTestCaseAsserts",payload:Me});case 24:if(nt=Oe.sent,!oe.Z.response(nt,!0)){Oe.next=29;break}return Q(!1),Oe.next=29,d({type:"testcase/save",payload:{asserts:[].concat(y()($),[nt.data])}});case 29:case"end":return Oe.stop()}},Y)}));return function(fe){return Ve.apply(this,arguments)}}();return(0,n.jsx)(t.Z,{gutter:8,children:(0,n.jsxs)(je.Z,{span:24,children:[(0,n.jsx)(We.Z,{open:re,fields:xe.Z.CaseAsserts,title:"\u7528\u4F8B\u65AD\u8A00",left:6,right:18,onFinish:gt,onCancel:function(){return Q(!1)},record:he}),(0,n.jsx)(t.Z,{style:{marginBottom:16},children:(0,n.jsx)(je.Z,{span:8,children:(0,n.jsxs)(Ae.ZP,{type:"primary",onClick:function(){Q(!0),Fe({})},children:[(0,n.jsx)(de.Z,{}),"\u6DFB\u52A0\u65AD\u8A00"]})})}),(0,n.jsx)(Z.Z,{columns:it,dataSource:$,rowKey:function(Y){return Y.id},locale:{emptyText:(0,n.jsx)(i.Z,{height:150})}})]})})},u=(0,q.connect)(function(P){var h=P.testcase,d=P.loading;return{testcase:h,loading:d}})(ee),w=e(38925),ge=e(26194),te=function(h){var d=h.caseId,x=h.testcase,se=h.loading,G=h.dispatch,k=h.currentEnv,_e=h.createMode,re=_e===void 0?!1:_e,Q=x.testData,ie=(0,O.useState)({current:1,total:0,pageSize:5}),Ge=E()(ie,2),he=Ge[0],Fe=Ge[1],$=(0,O.useState)([]),pe=E()($,2),tt=pe[0],it=pe[1],gt=(0,O.useState)({}),Ve=E()(gt,2),Y=Ve[0],fe=Ve[1],Me=(0,O.useState)(!1),nt=E()(Me,2),be=nt[0],Re=nt[1],ht=(0,O.useState)(null),Je=E()(ht,2),jt=Je[0],Oe=Je[1];(0,O.useEffect)(function(){var f=parseInt(k,10),c=Q[f];c?(it(y()(c)),Fe(o()(o()({},he),{},{current:1,total:c.length}))):(it([]),Fe(o()(o()({},he),{},{current:1,total:0})))},[k,Q]);var ft=function(){var f=v()(s()().mark(function c(l){var C,X;return s()().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return C=o()({},Q),X=C[parseInt(k,10)],C[parseInt(k,10)]=X.filter(function(yt){return l.name!==yt.name}),Ye.next=5,G({type:"testcase/save",payload:{testData:C}});case 5:case"end":return Ye.stop()}},c)}));return function(l){return f.apply(this,arguments)}}(),ve=function(){var f=v()(s()().mark(function c(l){var C,X,ue;return s()().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.next=2,G({type:"testcase/deleteTestcaseData",payload:{id:l}});case 2:if(C=yt.sent,!C){yt.next=9;break}return X=o()({},Q),ue=X[parseInt(k,10)],X[parseInt(k,10)]=ue.filter(function(Ot){return Ot.id!==l}),yt.next=9,G({type:"testcase/save",payload:{testData:X}});case 9:case"end":return yt.stop()}},c)}));return function(l){return f.apply(this,arguments)}}(),Tt=[{title:"#",dataIndex:"id",key:"id"},{title:"\u573A\u666F\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u6D4B\u8BD5\u6570\u636E",dataIndex:"json_data",key:"json_data",ellipse:!0},{title:"\u64CD\u4F5C",key:"ops",render:function(c,l,C){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){fe(o()(o()({},l),{},{index:C})),Re(!0)},children:"\u7F16\u8F91"}),(0,n.jsx)(F.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){He.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u6D4B\u8BD5\u6570\u636E\u5417?",icon:(0,n.jsx)(Ze.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var ue=v()(s()().mark(function yt(){return s()().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:if(!re){bt.next=5;break}return bt.next=3,ft(l);case 3:bt.next=7;break;case 5:return bt.next=7,ve(l.id);case 7:case"end":return bt.stop()}},yt)}));function Ye(){return ue.apply(this,arguments)}return Ye}()})},children:"\u5220\u9664"})]})}}],Et=function(){var f=v()(s()().mark(function c(l){var C,X;return s()().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:C=o()({},Q),X=o()({env:k},l),Y.index!==void 0?C[parseInt(k,10)].splice(Y.index,1,X):C[parseInt(k,10)]===void 0?C[parseInt(k,10)]=[X]:C[parseInt(k,10)].push(X),G({type:"testcase/save",payload:{testData:C}}),Re(!1);case 5:case"end":return Ye.stop()}},c)}));return function(l){return f.apply(this,arguments)}}(),Ct=function(){var f=v()(s()().mark(function c(l){var C;return s()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(Y.id){ue.next=6;break}return ue.next=3,G({type:"testcase/insertTestcaseData",payload:o()({case_id:d,env:k},l)});case 3:C=ue.sent,ue.next=9;break;case 6:return ue.next=8,G({type:"testcase/updateTestcaseData",payload:o()({id:Y.id,case_id:d,env:k},l)});case 8:C=ue.sent;case 9:C&&Re(!1);case 10:case"end":return ue.stop()}},c)}));return function(l){return f.apply(this,arguments)}}(),at=[{name:"name",label:"\u6D4B\u8BD5\u573A\u666F",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u573A\u666F",initialValue:Y.name},{name:"json_data",label:"JSON\u6570\u636E",required:!0,placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u573A\u666F",initialValue:Y.name,component:(0,n.jsx)(ge.Z,{height:200,setEditor:Oe,theme:"material-one-dark"})}];return(0,n.jsxs)(t.Z,{gutter:8,children:[(0,n.jsx)(We.Z,{title:"\u6D4B\u8BD5\u6570\u636E",record:Y,onCancel:function(){Re(!1)},left:4,right:20,width:650,open:be,onFinish:re?Et:Ct,fields:at,children:(0,n.jsx)(w.Z,{closable:!0,type:"info",style:{marginBottom:12},message:"\u6570\u636E\u7BA1\u7406\u63A5\u53D7\u4E00\u4E32key-value\u7684\u6570\u636E\uFF0C\u4F9B\u5927\u5BB6\u5728case\u91CC\u9762\u4F7F\u7528\u8FD9\u4E9B\u53D8\u91CF\uFF0C\u7528${\u53D8\u91CF}\u7684\u65B9\u5F0F\u3002",showIcon:!0})}),(0,n.jsx)(je.Z,{span:24,children:(0,n.jsxs)(N.Z,{bordered:!1,children:[(0,n.jsx)(t.Z,{gutter:8,children:(0,n.jsx)(je.Z,{span:6,children:(0,n.jsxs)(Ae.ZP,{type:"primary",onClick:function(){Re(!0),fe({})},children:[(0,n.jsx)(de.Z,{})," \u6DFB\u52A0\u6570\u636E"]})})}),(0,n.jsx)(t.Z,{gutter:8,style:{marginTop:12},children:(0,n.jsx)(je.Z,{span:24,children:(0,n.jsx)(Z.Z,{columns:Tt,pagination:he,rowKey:function(c){return c.id},loading:se.effects["testcase/insertTestcaseData"]||se.effects["testcase/updateTestcaseData"]||se.effects["testcase/deleteTestcaseData"],dataSource:tt,locale:{emptyText:(0,n.jsx)(i.Z,{height:"150"})},onChange:function(c){return Fe(o()(o()({},he),{},{current:c.current}))}})})})]})})]})},Ke=(0,q.connect)(function(P){var h=P.testcase,d=P.loading;return{testcase:h,loading:d}})(te),ut=e(13769),Qe=e.n(ut),B=e(34041),J=e(8232),Xe=e(55102),ke=e(86738),Pe=e(31484),qe=["index"],ot=["title","editable","children","dataIndex","name","record","handleSave","toggleEdit"],we=B.Z.Option,$e=O.createContext(null),mt=function(h){var d=h.index,x=Qe()(h,qe),se=J.Z.useForm(),G=E()(se,1),k=G[0];return(0,n.jsx)(J.Z,{form:k,component:!1,children:(0,n.jsx)($e.Provider,{value:k,children:(0,n.jsx)("tr",o()({},x))})})},dt=function(P){var h=P.columns,d=P.dataSource,x=P.setDataSource,se=(0,O.useState)(null),G=E()(se,2),k=G[0],_e=G[1],re=function($){var pe=$.title,tt=$.editable,it=$.children,gt=$.dataIndex,Ve=$.name,Y=$.record,fe=$.handleSave,Me=$.toggleEdit,nt=Qe()($,ot),be=(0,O.useContext)($e),Re=(0,O.useRef)(null),ht=(0,O.useState)({}),Je=E()(ht,2),jt=Je[0],Oe=Je[1];(0,O.useEffect)(function(){k!=null&&be.setFieldsValue(d[k])},[k]);var ft=function(at,f,c){var l=y()(d),C=l.findIndex(function(ue){return at.key===ue.key}),X=l[C];l[C]=o()(o()({},X),{},z()({},f,c)),x(l)},ve=function(at,f,c,l,C){return f==="source"?(0,n.jsx)(J.Z.Item,{style:{margin:0},name:f,rules:[{required:!0,message:"".concat(at," is required.")}],children:(0,n.jsxs)(B.Z,{placeholder:"\u9009\u62E9\u6570\u636E\u6765\u6E90",style:{width:"90%"},ref:l,onSelect:function(ue){ft(c,f,ue)},onBlur:C,children:[(0,n.jsx)(we,{value:0,children:"Response: \u6B63\u5219"}),(0,n.jsx)(we,{value:1,children:"Response: JSONPath"}),(0,n.jsx)(we,{value:2,children:"Header: K/V"}),(0,n.jsx)(we,{value:3,children:"Cookie: K/V"}),(0,n.jsx)(we,{value:4,children:"\u54CD\u5E94\u72B6\u6001\u7801"}),(0,n.jsx)(we,{value:5,children:"Body: \u6B63\u5219"}),(0,n.jsx)(we,{value:6,children:"Body: JSONPath"}),(0,n.jsx)(we,{value:7,children:"Request Header: K/V"})]})}):f==="expression"?(0,n.jsx)(J.Z.Item,{style:{margin:0},name:f,rules:[{required:c.source!==4,message:"".concat(at," is required.")}],children:(0,n.jsx)(Xe.Z,{ref:l,onPressEnter:C,disabled:c.source===4,onBlur:C,placeholder:c.source===4?"\u65E0\u9700\u586B\u5199":"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"})}):f==="match_index"?(0,n.jsx)(J.Z.Item,{style:{margin:0},name:f,rules:[{required:[4,1,6,2,3,7].indexOf(c.source)===-1,message:"".concat(at," is required.")}],children:(0,n.jsx)(Xe.Z,{ref:l,onPressEnter:C,disabled:[4,1,6,2,3,7].indexOf(c.source)>-1,onBlur:C,placeholder:c.source===4?"\u65E0\u9700\u586B\u5199":"\u8BF7\u8F93\u5165\u5339\u914D\u9879"})}):(0,n.jsx)(J.Z.Item,{style:{margin:0},name:f,rules:[{required:c.source!==4,message:"".concat(at," is required.")}],children:(0,n.jsx)(Xe.Z,{ref:l,onPressEnter:C,onBlur:C,placeholder:"\u8BF7\u8F93\u5165".concat(at)})})},Tt=function(){var Ct=v()(s()().mark(function at(){var f;return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,be.validateFields();case 3:f=l.sent,_e(null),be.setFieldsValue(Y),fe(o()(o()({},Y),f)),l.next=12;break;case 9:l.prev=9,l.t0=l.catch(0),console.log("Save failed:",l.t0);case 12:case"end":return l.stop()}},at,null,[[0,9]])}));return function(){return Ct.apply(this,arguments)}}(),Et=it;return tt&&(Et=k===Y.key?ve(Ve,gt,Y,Re,Tt):(0,n.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},children:it})),(0,n.jsx)("td",o()(o()({},nt),{},{children:Et}))},Q=function($){var pe=y()(d),tt=pe.findIndex(function(gt){return $.key===gt.key}),it=pe[tt];pe.splice(tt,1,o()(o()({},it),$)),pe.filter(function(gt){return gt.name}).length===pe.length&&pe.push({key:d.length===0?0:d[d.length-1].key+1,source:1}),x(pe)},ie=function($){var pe=y()(d);x(pe.filter(function(tt){return tt.key!==$}).map(function(tt,it){return o()(o()({},tt),{},{key:it})}))},Ge=h.map(function(Fe){return Fe.editable?o()(o()({},Fe),{},{onCell:function(pe){return{record:pe,editable:Fe.editable,dataIndex:Fe.dataIndex,title:Fe.title,name:Fe.name,handleSave:Q}}}):Fe});Ge=[].concat(y()(Ge),[{title:"\u64CD\u4F5C",render:function($,pe){return d.length>1?(0,n.jsx)(ke.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:function(){ie(pe.key)},children:(0,n.jsx)(Pe.Z,{twoToneColor:"red",onClick:function(it){it.stopPropagation()}})}):null}}]);var he={body:{row:mt,cell:re}};return(0,n.jsx)(Z.Z,{onRow:function($){return{onClick:function(tt){_e($.key)}}},components:he,rowClassName:"editable-row",dataSource:d,columns:Ge,pagination:!1})},ct=e(63783),At={JSONPATH_TITLE:`JSON\u683C\u5F0F\u7684\u89E3\u6790\u540C\u6837\u652F\u6301\u6570\u7EC4\u4E2D\u6307\u5B9A\u5BF9\u8C61\uFF0C\u5982data.itemlist[0]\uFF1B\u652F\u6301\u63D0\u53D6\u6570\u636E\u4E2D\u968F\u673A\u503Cdata.itemlist[random]\uFF1B\u540C\u65F6\u652F\u6301\u63D0\u53D6\u90E8\u5206\u503C\u7EC4\u5408\u4E3A\u65B0\u6570\u7EC4\uFF0Cdata.itemlist[0-99].id\u5BFC\u51FA\u524D100\u4E2Aid\uFF0Cdata.itemlist[all].id\u5373\u5BFC\u51FA\u5168\u90E8id\u3002\u82E5\u60F3\u5C06\u6570\u7EC4\u5185\u7684\u503C\u8FDB\u884C\u904D\u5386\u4F7F\u7528\uFF0C\u8BF7\u7ED3\u5408\u6570\u636E\u5BFC\u51FA\u8282\u70B9\u914D\u5408\u4F7F\u7528\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u53EF\u6307\u5B9A\u5339\u914D\u9879.
                    \u5E38\u89C1\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u4F7F\u7528\u5230\u7684\u5B57\u7B26\u8303\u56F4\u793A\u4F8B\u5982\u4E0B:
                    \u82F1\u6587\u5B57\u6BCD:[a-zA-Z]
                    \u6570\u5B57:[0-9]
                    \u4E2D\u6587\u5B57\u7B26\u8303\u56F4:[\u4E00-\u9FA5]
                    \u4E2D\u6587\u3001\u82F1\u6587\u3001\u6570\u5B57\uFF1A[\u4E00-\u9FA5a-zA-Z0-9]
                    \u6307\u5B9A\u7B26\u5408\u6761\u4EF6\u7684\u5B57\u7B26\u4E2A\u6570\uFF1A[a-zA-Z]{2,4} \u8868\u793A2-4\u4E2A\u5B57\u7B26\uFF1B{2}\u8868\u793A\u5B57\u7B26\u4E2A\u6570\u4E3A2\u4E2A\u3002
                    \u6CE8\u610F\uFF1A\u5C3D\u91CF\u4E0D\u8981\u4F7F\u7528*,\u5426\u52190\u4E2A\u4E5F\u4F1A\u5339\u914D\u5230`},Dt={0:"Response: \u6B63\u5219",1:"Response: JSONPath",2:"Header: K/V",3:"Cookie: K/V",4:"\u54CD\u5E94\u72B6\u6001\u7801",5:"Body: \u6B63\u5219",6:"Body: JSONPath",7:"Request Header: K/V"},St=function(P){var h=P.dispatch,d=P.testcase,x=P.caseId,se=P.createMode,G=d.outParameters,k=function(Q){h({type:"testcase/save",payload:{outParameters:Q}})},_e=[{title:"\u51FA\u53C2\u540D",dataIndex:"name",key:"name",name:"\u51FA\u53C2\u540D",width:"20%",editable:!0,render:function(Q){return Q||"\u8BF7\u8F93\u5165\u51FA\u53C2\u540D"}},{title:"\u6765\u6E90",name:"\u6765\u6E90",dataIndex:"source",key:"source",width:"25%",editable:!0,render:function(Q){return Q!==void 0?Dt[Q]:"\u8BF7\u9009\u62E9\u6765\u6E90"}},{name:"\u89E3\u6790\u8868\u8FBE\u5F0F",title:(0,n.jsxs)("span",{children:["\u89E3\u6790\u8868\u8FBE\u5F0F ",(0,n.jsx)(g.Z,{icon:(0,n.jsx)(ct.Z,{}),title:At.JSONPATH_TITLE})]}),dataIndex:"expression",key:"expression",editable:!0,render:function(Q,ie){return ie.source!==4?Q||"\u8BF7\u8F93\u5165\u89E3\u6790\u8868\u8FBE\u5F0F":"\u65E0\u9700\u586B\u5199"}},{title:"\u7B2C\u51E0\u4E2A\u5339\u914D\u9879",name:"\u7B2C\u51E0\u4E2A\u5339\u914D\u9879",dataIndex:"match_index",editable:!0,render:function(Q,ie){return ie.source!==4&&ie.source!==1&&ie.source!==6?Q||"\u8BF7\u8F93\u5165\u5339\u914D\u9879":"\u65E0\u9700\u586B\u5199"}}];return(0,n.jsx)(dt,{columns:_e,dataSource:G,setDataSource:k})},Zt=e(11941),Ie=e(96746),xt=Zt.Z.TabPane,Be=function(h){var d=h.open,x=h.gconfig,se=h.variables,G=h.onCancel,k=[{title:"\u53D8\u91CF\u540D",dataIndex:"name",key:"name",render:function(Q){return(0,n.jsx)(Ie.Z.Text,{copyable:!0,children:Q})}}],_e=[].concat(k,[{title:"\u6765\u6E90",dataIndex:"stepName",key:"stepName"}]);return(0,n.jsx)(He.Z,{title:"\u53D8\u91CF\u5217\u8868",open:d,width:500,footer:null,onCancel:G,children:(0,n.jsxs)(Zt.Z,{children:[(0,n.jsx)(xt,{tab:"\u5168\u5C40\u53D8\u91CF",children:(0,n.jsx)(Z.Z,{columns:k,dataSource:x,size:"small"})},"global"),(0,n.jsx)(xt,{tab:"\u7528\u4F8B\u53D8\u91CF",children:(0,n.jsx)(Z.Z,{columns:_e,dataSource:se,size:"small"})},"case")]})})},b=Be,T=e(89609),L=e(4713),H=e(59697),Ce=e(65987),lt=e(34804),ce=e(17811),Bt=e(2453),ne=e(55060),D=e(66309),p=e(72269),M=e(42180),_=e(85418),Se=e(78957),ze=e(12845),Ne=e(40411),le=Zt.Z.TabPane,Te=function(h){var d=h.dispatch,x=h.testcase,se=h.case_id,G=h.setSuffix,k=h.body,_e=h.setBody,re=h.formData,Q=h.setFormData,ie=h.gconfig,Ge=h.onSubmit,he=h.form,Fe=h.createMode,$=Fe===void 0?!1:Fe,pe=h.headers,tt=h.setHeaders,it=h.bodyType,gt=h.setBodyType,Ve=h.loading,Y=x.preConstructor,fe=x.postConstructor,Me=x.activeKey,nt=x.constructors_case,be=x.envActiveKey,Re=x.asserts,ht=x.caseInfo,Je=ie.envList,jt=(0,O.useState)(!1),Oe=E()(jt,2),ft=Oe[0],ve=Oe[1],Tt=(0,O.useState)([]),Et=E()(Tt,2),Ct=Et[0],at=Et[1],f=(0,O.useState)([]),c=E()(f,2),l=c[0],C=c[1],X=(0,O.useState)(localStorage.getItem("case_study")===null),ue=E()(X,2),Ye=ue[0],yt=ue[1],Ot=(0,O.useState)(null),bt=E()(Ot,2),Lt=bt[0],Ut=bt[1],It=(0,O.useRef)(null),Kt=(0,O.useRef)(null),zt=(0,O.useRef)(null),Nt=(0,O.useRef)(null),Vt=(0,O.useRef)(null),Ht=(0,O.useRef)(null),Jt=Je.map(function(j){return{key:j.id,label:(0,n.jsx)("a",{onClick:function(){Ut(j.name),Bt.ZP.success("\u6D4B\u8BD5\u73AF\u5883\u5DF2\u5207\u6362\u81F3"+j.name)},children:j.name})}}),Yt=function(){var j=v()(s()().mark(function m(U){var Ee,K;return s()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Ee=U.map(function(vt){return{case_id:vt.case_id,step_name:vt.name}}),Le.next=3,(0,L.Sb)(Ee);case 3:K=Le.sent,oe.Z.response(K)&&C(Object.keys(K.data).map(function(vt){return K.data[vt]}));case 5:case"end":return Le.stop()}},m)}));return function(U){return j.apply(this,arguments)}}(),Qt=[{title:"\u6570\u636E\u7BA1\u7406",placement:"right",description:"\u6570\u636E\u7BA1\u7406\u6A21\u5757\uFF0C\u4EE5\u6570\u636E\u9A71\u52A8\u7684\u65B9\u5F0F\u6279\u91CF\u8BF7\u6C42\u63A5\u53E3\uFF0C\u89E3\u51B3\u91CD\u590D\u7F16\u5199\u573A\u666F\u7684\u70E6\u607C~\u{1F47B}",cover:(0,n.jsx)(ne.Z,{width:"100%",style:{height:200},src:"/data_driven.jpeg"}),target:function(){return It.current}},{title:"\u524D\u7F6E\u6B65\u9AA4",placement:"right",description:"\u5728\u524D\u7F6E\u6B65\u9AA4\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u6784\u9020\u4E00\u5207\u4F60\u9700\u8981\u7684\u6570\u636E\uFF0C\u5305\u62EC\u4F46\u4E0D\u9650\u4E8EDB/Redis\u7B49\uFF0C\u5E76\u80FD\u5C06\u6570\u636E\u4F20\u9012\u4E0B\u53BB\u{1F440}",cover:(0,n.jsx)(ne.Z,{width:"100%",style:{height:200},src:"/pre.svg"}),target:function(){return Kt.current}},{title:"\u63A5\u53E3\u8BF7\u6C42",placement:"right",description:"\u5728\u63A5\u53E3\u8BF7\u6C42\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u6784\u5EFAHTTP/DUBBO/GRPC\u8FD93\u7C7B\u8BF7\u6C42\uFF0C\u5982\u679C\u9047\u5230\u6709\u53D8\u91CF\u9700\u8981\u586B\u5199\uFF0C\u53EF\u4EE5\u6309\u4E0B\u5FEB\u6377\u952E\u300E$\u300F\u5F39\u51FA\u53D8\u91CF\u83DC\u5355\u54E6~\u{1F42C}",cover:(0,n.jsx)(ne.Z,{width:"100%",style:{height:200},src:"/api.svg"}),target:function(){return Nt.current}},{title:"\u51FA\u53C2\u63D0\u53D6",placement:"left",description:"\u5728\u51FA\u53C2\u63D0\u53D6\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u63D0\u53D6\u4F60\u5728\u4E0B\u4E00\u4E2A\u6B65\u9AA4\u4E2D\u9700\u8981\u7684\u6570\u636E, \u6BD4\u5982\u4F60\u53EF\u4EE5\u63D0\u53D6\u767B\u5F55\u540E\u7684token\uFF0C\u7528\u4E8E\u63A5\u4E0B\u6765\u7684\u64CD\u4F5C\uFF01\u51FA\u53C2\u63D0\u53D6\u4E3B\u8981\u652F\u6301\u6B63\u5219\u548CJSONPath2\u79CD\u65B9\u5F0F\uFF0C\u5982\u679C\u8FD8\u4E0D\u719F\u6089\u7684\u8BDD\uFF0C\u5EFA\u8BAE\u53BB\u641C\u7D22\u5B66\u4E60\u4E00\u4E0B\u54E6~\u{1F47D}",cover:(0,n.jsx)(ne.Z,{width:"100%",style:{height:200},src:"/out.svg"}),target:function(){return Ht.current}},{title:"\u65AD\u8A00",placement:"left",description:"\u5728\u65AD\u8A00\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u5BF9\u4F60\u672C\u6B21\u6D4B\u8BD5\u7684\u6570\u636E\u8FDB\u884C\u6821\u9A8C\uFF0C\u4EE5\u4FBF\u4E8E\u540E\u7EED\u573A\u666F\u81EA\u52A8\u6267\u884C\u65F6\u80FD\u68C0\u6D4B\u51FA\u5F02\u5E38\uFF0C\u65AD\u8A00\u5F88\u91CD\u8981\uFF0C\u8BB0\u5F97\u8981\u586B\u54E6\uFF01\u{1F383}",cover:(0,n.jsx)(ne.Z,{width:"100%",style:{height:200},src:"/assert.svg"}),target:function(){return Vt.current}},{title:"\u540E\u7F6E\u6B65\u9AA4",placement:"left",description:"\u5728\u540E\u7F6E\u6B65\u9AA4\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u505A\u4E00\u4E9B\u6E05\u7406\u5DE5\u4F5C\uFF0C\u6BD4\u5982\u5220\u9664\u4F60\u521B\u5EFA\u7684\u6570\u636E\u7B49\uFF0C\u7528\u6CD5\u4E0E\u524D\u7F6E\u6B65\u9AA4\u7C7B\u4F3C~\u{1F680}",cover:(0,n.jsx)(ne.Z,{width:"100%",style:{height:200},src:"/clean.svg"}),target:function(){return zt.current}}];(0,ce.Z)(["shift.4"],function(){Me!=="4"&&window.location.href.indexOf("/apiTest/testcase/")>-1&&window.location.href.endsWith("/".concat(se))&&ve(!0)},{exactMatch:!0,useCapture:!0});var Xt=function(){var j=v()(s()().mark(function m(){var U;return s()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,T.Z7)({page:1,size:500});case 2:U=K.sent,oe.Z.response(U)&&at(U.data.map(function(st){return{name:"${"+st.key+"}"}}));case 4:case"end":return K.stop()}},m)}));return function(){return j.apply(this,arguments)}}();(0,O.useEffect)(function(){Xt()},[]),(0,O.useEffect)(function(){Yt(Y)},[Y]);var Mt=function(){d({type:"testcase/save",payload:{constructorModal:!0,testCaseConstructorData:{public:!0,enable:!0},currentStep:0,constructRecord:{}}}),d({type:"construct/save",payload:{currentStep:0}})},wt=function(){var j=v()(s()().mark(function m(U){var Ee,K,st,Le=arguments;return s()().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Ee=Le.length>1&&Le[1]!==void 0?Le[1]:!1,Pt.next=3,d({type:"construct/delete",payload:{id:U.id}});case 3:K=Pt.sent,K&&(Ee?st=fe.filter(function(pt){return pt.id!==U.id}):st=Y.filter(function(pt){return pt.id!==U.id}),d({type:"testcase/save",payload:z()({},Ee?"postConstructor":"preConstructor",st)}));case 5:case"end":return Pt.stop()}},m)}));return function(U){return j.apply(this,arguments)}}(),_t=function(){var j=v()(s()().mark(function m(U,Ee){var K;return s()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:K=y()(Ee?fe:Y),K.splice(U.index,1),d({type:"testcase/save",payload:z()({},Ee?"postConstructor":"preConstructor",K.map(function(vt,Pt){return o()(o()({},vt),{},{index:Pt})}))});case 3:case"end":return Le.stop()}},m)}));return function(U,Ee){return j.apply(this,arguments)}}(),qt=function(m,U){return m.type===4?{body:U.body,headers:H.Z.parseHeaders(U.headers),base_path:U.base_path,url:U.url,request_method:U.request_method,body_type:U.body_type}:U},kt=function(m){var U=JSON.parse(m.constructor_json);d({type:"construct/save",payload:{currentStep:1,testCaseConstructorData:o()(o()({},m),qt(m,U)),constructorType:m.type}}),d({type:"testcase/save",payload:{constructorModal:!0,constructRecord:m}})},en=function(){var j=v()(s()().mark(function m(U,Ee){var K,st,Le,vt=arguments;return s()().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(K=vt.length>2&&vt[2]!==void 0?vt[2]:!1,Le=y()(K?fe:Y),!$){pt.next=6;break}st=!0,pt.next=9;break;case 6:return pt.next=8,d({type:"construct/update",payload:o()(o()({},U),{},{enable:Ee})});case 8:st=pt.sent;case 9:st&&($?Le.forEach(function(Rt,tn){tn===U.index&&(Rt.enable=Ee)}):Le.forEach(function(Rt){Rt.id===U.id&&(Rt.enable=Ee)}),d({type:"testcase/save",payload:z()({},K?"postConstructor":"preConstructor",Le)}));case 10:case"end":return pt.stop()}},m)}));return function(U,Ee){return j.apply(this,arguments)}}(),$t=function(m){var U=JSON.parse(m.constructor_json);if(m.type===0){var Ee=nt[U.case_id];return Ee?(0,n.jsxs)("div",{children:["\u7528\u4F8B:"," ",(0,n.jsx)("a",{href:"/#/apiTest/testcase/".concat(Ee.directory_id,"/").concat(Ee.id),rel:"noreferrer",children:Ee.name})]}):null}if(m.type===1)return(0,n.jsx)("code",{children:U.sql});if(m.type===2)return(0,n.jsx)("code",{children:(0,n.jsx)("pre",{children:U.command})});if(m.type===3)return(0,n.jsx)("code",{children:(0,n.jsx)("pre",{children:U.command})})},Wt=function(m){var U=m.number,Ee=m.bgColor,K=m.color,st=m.style;return U===0?null:(0,n.jsx)("div",{style:o()({display:"inline-block",marginLeft:2,textAlign:"center",width:24,borderRadius:10,background:Ee,color:K},st),children:U})},Gt=[{title:"\u540D\u79F0",key:"name",dataIndex:"name",render:function(m,U,Ee){return(0,n.jsx)("a",{onClick:function(){kt(o()(o()({},U),{},{tempIndex:Ee}))},children:m})},className:"drag-visible"},{title:"\u7C7B\u578B",key:"type",dataIndex:"type",render:function(m){return(0,n.jsx)(D.Z,{color:r.Z.CASE_CONSTRUCTOR_COLOR[m],children:r.Z.CASE_CONSTRUCTOR[m]})},className:"drag-visible"},{title:"\u72B6\u6001",key:"enable",dataIndex:"enable",className:"drag-visible",render:function(m,U){return(0,n.jsx)(p.Z,{defaultChecked:U.enable,onChange:function(){var Ee=v()(s()().mark(function K(st){return s()().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.next=2,en(U,st);case 2:case"end":return vt.stop()}},K)}));return function(K){return Ee.apply(this,arguments)}}()})}},{title:"\u8FD4\u56DE\u503C",key:"value",dataIndex:"value",className:"drag-visible"},{title:"\u64CD\u4F5C",key:"ops",className:"drag-visible",render:function(m,U,Ee){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){kt(o()(o()({},U),{},{tempIndex:Ee}))},children:(0,n.jsx)(Ce.Z,{})}),(0,n.jsx)("a",{style:{marginLeft:8},onClick:function(){He.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6570\u636E\u6784\u9020\u5668\u5417?",icon:(0,n.jsx)(Ze.Z,{}),content:"\u5982\u679C\u53EA\u662F\u6682\u65F6\u4E0D\u5F00\u542F\uFF0C\u53EF\u4EE5\u5148\u6682\u505C\u5B83~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var st=v()(s()().mark(function vt(){return s()().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(!$){pt.next=5;break}return pt.next=3,_t(U);case 3:pt.next=7;break;case 5:return pt.next=7,wt(U);case 7:case"end":return pt.stop()}},vt)}));function Le(){return st.apply(this,arguments)}return Le}()})},children:(0,n.jsx)(Pe.Z,{twoToneColor:"red"})})]})}}];return(0,n.jsxs)(t.Z,{gutter:8,style:{marginTop:36,minHeight:500},children:[(0,n.jsx)(b,{open:ft,gconfig:Ct,variables:l,onCancel:function(){return ve(!1)}}),(0,n.jsx)(M.Z,{open:Ye,onClose:function(){localStorage.setItem("case_study","done"),yt(!1)},steps:Qt}),(0,n.jsx)(je.Z,{span:24,children:(0,n.jsxs)(Zt.Z,{activeKey:Me,onChange:function(m){d({type:"testcase/save",payload:{activeKey:m}}),G(m==="6"),m==="1"&&Je.length>0&&d({type:"testcase/save",payload:{envActiveKey:Je[0].id.toString()}})},tabBarExtraContent:(0,n.jsx)(_.Z,{menu:{items:Jt},children:(0,n.jsx)("a",{onClick:function(m){m.preventDefault()},children:(0,n.jsxs)(Se.Z,{children:[Lt||"\u9009\u62E9\u5F53\u524D\u6267\u884C\u73AF\u5883",(0,n.jsx)(lt.Z,{})]})})}),children:[(0,n.jsx)(le,{tab:(0,n.jsxs)("span",{ref:It,children:[(0,n.jsx)(S.B,{type:"icon-shujuqudong1"}),"\u6570\u636E\u7BA1\u7406"," ",(0,n.jsx)(g.Z,{onClick:function(){window.open("".concat(r.Z.DOCUMENT_URL,"/%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/%E6%A6%82%E5%BF%B5/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"))},icon:(0,n.jsx)(ct.Z,{}),title:"\u5728\u8FD9\u91CC\u4F60\u53EF\u4EE5\u5BF9\u591A\u5957\u73AF\u5883\u7684\u6D4B\u8BD5\u6570\u636E\u8FDB\u884C\u7BA1\u7406\uFF0C\u4ECE\u800C\u8FBE\u5230\u6570\u636E\u9A71\u52A8\u7684\u76EE\u7684~\u70B9\u51FB\u6B64\u6309\u94AE\u67E5\u770B\u8BE6\u7EC6\u6587\u6863\u3002"})]}),children:Je.length>0?(0,n.jsx)(Zt.Z,{tabPosition:"left",activeKey:be,onChange:function(m){d({type:"testcase/save",payload:{envActiveKey:m}})},children:Je.map(function(j){return(0,n.jsx)(le,{tab:j.name,children:(0,n.jsx)(Ke,{caseId:se,currentEnv:be,createMode:$})},j.id)})}):(0,n.jsx)(Ue.Z,{height:280,desc:(0,n.jsxs)("span",{children:["\u6CA1\u6709\u4EFB\u4F55\u73AF\u5883\u4FE1\u606F, ",(0,n.jsx)("a",{href:"/#/config/environment",children:"\u53BB\u6DFB\u52A0"})]})})},"1"),(0,n.jsx)(le,{tab:(0,n.jsxs)("div",{ref:Kt,children:[(0,n.jsx)(S.B,{type:"icon-DependencyGraph_16x"}),"\u524D\u7F6E\u6B65\u9AA4",(0,n.jsx)(Wt,{number:Y.length,bgColor:"rgb(237, 242, 251)",color:"rgb(29, 98, 203)"})]}),children:Y.length===0?(0,n.jsx)(i.Z,{height:180,desc:(0,n.jsxs)("div",{children:["\u8FD8\u6CA1\u6709\u524D\u7F6E\u6B65\u9AA4, \u8FD8\u4E0D\u8D76\u5FEB ",(0,n.jsx)("a",{onClick:Mt,children:"\u6DFB\u52A0\u4E00\u4E2A"}),"?"]})}):(0,n.jsxs)(t.Z,{gutter:12,children:[(0,n.jsxs)(je.Z,{span:16,children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(je.Z,{span:24,children:(0,n.jsxs)(Ae.ZP,{type:"dashed",block:!0,style:{marginBottom:16},onClick:Mt,children:[(0,n.jsx)(de.Z,{}),"\u6DFB\u52A0"]})})}),(0,n.jsx)(rt.Z,{columns:Gt,dataSource:Y,setDataSource:function(m){d({type:"testcase/save",payload:{preConstructor:m}})},loading:Ve.effects["construct/delete"]||Ve.effects["construct/update"],dragCallback:function(){var j=v()(s()().mark(function m(U){return s()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!$){K.next=2;break}return K.abrupt("return",!0);case 2:return K.next=4,d({type:"construct/orderConstructor",payload:U.map(function(st,Le){return{id:st.id,index:Le}})});case 4:return K.abrupt("return",K.sent);case 5:case"end":return K.stop()}},m)}));return function(m){return j.apply(this,arguments)}}()})]}),(0,n.jsx)(je.Z,{span:8,children:(0,n.jsx)(N.Z,{style:{height:400,overflow:"auto"},hoverable:!0,bordered:!1,children:Y.filter(function(j){return j.enable}).length===0?(0,n.jsx)(Ue.Z,{desc:"\u6682\u65E0\u5F00\u542F\u7684\u524D\u7F6E\u6B65\u9AA4"}):(0,n.jsx)(ze.Z,{children:Y.map(function(j,m){return j.enable?(0,n.jsxs)(ze.Z.Item,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(Ne.Z,{count:m+1,style:{backgroundColor:"#a6d3ff"}},m)," ","\u540D\u79F0:"," ",j.type===0?(0,n.jsx)("a",{children:j.name},j.name):j.name]},m),$t(j)]},m):null})})})})]})},"2"),(0,n.jsx)(le,{tab:(0,n.jsxs)("span",{ref:Nt,children:[(0,n.jsx)(S.B,{type:"icon-qingqiu"}),"\u63A5\u53E3\u8BF7\u6C42"]}),children:(0,n.jsx)(t.Z,{gutter:[8,8],children:(0,n.jsx)(je.Z,{span:24,children:(0,n.jsx)(I,{form:he,body:k,setBody:_e,headers:pe,formData:re,setFormData:Q,caseInfo:ht,setHeaders:tt,bodyType:it,setBodyType:gt,bordered:!1,save:Ge})})})},"3"),(0,n.jsx)(le,{tab:(0,n.jsxs)("span",{ref:Ht,children:[(0,n.jsx)(S.B,{type:"icon-canshu2"}),"\u51FA\u53C2\u63D0\u53D6"," ",(0,n.jsx)(g.Z,{icon:(0,n.jsx)(ct.Z,{}),title:"\u901A\u8FC7\u7BA1\u7406\u8BF7\u6C42\u4EA7\u751F\u7684\u53C2\u6570\uFF0C\u5E2E\u52A9\u6211\u4EEC\u66F4\u597D\u5730\u6539\u5584\u3010\u65AD\u8A00\u3011"})]}),children:(0,n.jsx)(St,{caseId:se,createMode:$,dispatch:d,testcase:x})},"4"),(0,n.jsx)(le,{tab:(0,n.jsxs)("div",{ref:Vt,children:[(0,n.jsx)(S.B,{type:"icon-duanyan"}),"\u65AD\u8A00"," ",(0,n.jsx)(Wt,{number:Re.length,bgColor:"rgb(233, 249, 245)",color:"rgb(40, 195, 151)"})]}),children:(0,n.jsx)(u,{asserts:Re,caseId:se,createMode:$})},"5"),(0,n.jsx)(le,{tab:(0,n.jsxs)("div",{ref:zt,children:[(0,n.jsx)(S.B,{type:"icon-qingliwuliuliang"}),"\u540E\u7F6E\u6B65\u9AA4",(0,n.jsx)(Wt,{number:fe.length,bgColor:"rgb(255, 238, 239)",color:"rgb(255, 87, 95)"})]}),children:fe.length===0?(0,n.jsx)(i.Z,{height:180,desc:(0,n.jsxs)("div",{children:["\u8FD8\u6CA1\u6709\u540E\u7F6E\u6B65\u9AA4, \u8FD8\u4E0D\u8D76\u7D27 ",(0,n.jsx)("a",{onClick:Mt,children:"\u6DFB\u52A0\u4E00\u4E2A"}),"?"]})}):(0,n.jsxs)(t.Z,{gutter:12,children:[(0,n.jsxs)(je.Z,{span:16,children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(je.Z,{span:24,children:(0,n.jsxs)(Ae.ZP,{type:"dashed",block:!0,style:{marginBottom:16},onClick:Mt,children:[(0,n.jsx)(de.Z,{}),"\u6DFB\u52A0"]})})}),(0,n.jsx)(rt.Z,{columns:Gt,dataSource:fe,setDataSource:function(m){d({type:"testcase/save",payload:{postConstructor:m}})},loading:Ve.effects["construct/delete"]||Ve.effects["construct/update"],dragCallback:function(){var j=v()(s()().mark(function m(U){return s()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!$){K.next=2;break}return K.abrupt("return",!0);case 2:return K.next=4,d({type:"construct/orderConstructor",payload:U.map(function(st,Le){return{id:st.id,index:Le}})});case 4:return K.abrupt("return",K.sent);case 5:case"end":return K.stop()}},m)}));return function(m){return j.apply(this,arguments)}}()})]}),(0,n.jsx)(je.Z,{span:8,children:(0,n.jsx)(N.Z,{style:{height:400,overflow:"auto"},hoverable:!0,bordered:!1,children:fe.filter(function(j){return j.enable}).length===0?(0,n.jsx)(i.Z,{desc:"\u6682\u65E0\u5F00\u542F\u7684\u540E\u7F6E\u6B65\u9AA4"}):(0,n.jsx)(ze.Z,{children:fe.map(function(j,m){return j.enable?(0,n.jsxs)(ze.Z.Item,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(Ne.Z,{count:m+1,style:{backgroundColor:"#a6d3ff"}},m)," ","\u540D\u79F0:"," ",j.type===0?(0,n.jsx)("a",{children:j.name},j.name):j.name]},m),$t(j)]},m):null})})})})]})},"6")]})})]})},et=(0,q.connect)(function(P){var h=P.testcase,d=P.gconfig,x=P.loading;return{testcase:h,gconfig:d,loading:x}})(Te)},88496:function(Ft,De,e){e.d(De,{Z:function(){return n}});var me=e(15009),o=e.n(me),ae=e(99289),y=e.n(ae),A=e(90596),z=e(8232),ye=e(4393),s=e(14726),W=e(71230),v=e(15746),R={caseTitle:"caseTitle___B4Pl6"},E=e(76081),S=e(20659),g=e(67294),i=e(60219),Ue=e(74842),O=e(44046),N=e(85893),q=z.Z.Item,a=function(I){var rt=I.dispatch,F=I.form,He=I.testcase,t=I.caseId,je=I.body,Ae=I.setBody,Z=I.headers,Ze=I.setHeaders,de=I.formData,We=I.setFormData,xe=I.bodyType,oe=I.setBodyType,r=I.setSuffix,ee=I.onSubmit,u=I.create,w=u===void 0?!1:u,ge=He.caseInfo;return(0,g.useEffect)(function(){F.resetFields(),F.setFieldsValue(ge),Ae(ge.body)},[ge]),(0,N.jsx)(z.Z,{form:F,name:"addCase",initialValues:ge,children:(0,N.jsxs)(ye.Z,{title:(0,N.jsx)("span",{className:R.caseTitle,children:"\u573A\u666F\u4FE1\u606F"}),extra:w?null:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(s.ZP,{type:"primary",onClick:y()(o()().mark(function te(){return o()().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return ut.next=2,ee(w);case 2:case"end":return ut.stop()}},te)})),children:[(0,N.jsx)(i.Z,{})," \u63D0\u4EA4"]}),w?(0,N.jsxs)(s.ZP,{style:{marginLeft:8},children:[(0,N.jsx)(Ue.Z,{})," \u6D4B\u8BD5"]}):(0,N.jsxs)(s.ZP,{style:{marginLeft:8},onClick:function(){rt({type:"testcase/save",payload:{editing:!1}})},children:[(0,N.jsx)(i.Z,{})," \u53D6\u6D88"]})]}),children:[(0,N.jsx)(W.Z,{gutter:[8,8],children:S.Z.CaseDetail.map(function(te){return(0,N.jsx)(v.Z,{span:te.span||24,children:(0,N.jsx)(q,{label:te.label,colon:te.colon||!0,labelCol:{span:8},wrapperCol:{span:16},rules:[{required:te.required,message:te.message}],name:te.name,valuePropName:te.valuePropName||"value",children:(0,E.Z)(te.type,te.placeholder,te.component)})})})}),(0,N.jsx)(W.Z,{style:{marginTop:8},children:(0,N.jsx)(v.Z,{span:24,children:(0,N.jsx)(O.Z,{case_id:t,body:je,bodyType:xe,setBody:Ae,headers:Z,setHeaders:Ze,form:F,createMode:w,formData:de,setFormData:We,setSuffix:r,setBodyType:oe})})})]})})},n=(0,A.connect)(function(V){var I=V.user,rt=V.testcase,F=V.loading;return{testcase:rt,user:I,loading:F}})(a)},87023:function(Ft,De,e){e.d(De,{Z:function(){return We}});var me=e(15009),o=e.n(me),ae=e(99289),y=e.n(ae),A=e(5574),z=e.n(A),ye=e(11941),s=e(40411),W=e(85265),v=e(71230),R=e(26412),E=e(72051),S=e(67294),g=e(42481),i=e(26671),Ue=e(9783),O=e.n(Ue),N=e(70366),q=e.n(N),a=e(85893),n=60,V={nameFontSize:12,childCountWidth:22,countMarginLeft:0,itemPadding:16,nameMarginLeft:4,rootPadding:18},I=function(xe){var oe=xe.data,r=xe.graph,ee=xe.setGraph,u=xe.container_id,w=u===void 0?"container":u;return(0,S.useEffect)(function(){if(oe!==null){q().registerNode("treeNode",{draw:function(B,J){var Xe=B.id,ke=B.label,Pe=B.collapsed,qe=B.selected,ot=B.children,we=B.depth,$e=we===0,mt=ot&&ot.length!==0,dt=V.childCountWidth,ct=V.countMarginLeft,At=V.itemPadding,Dt=V.selectedIconWidth,St=V.nameMarginLeft,Zt=V.rootPadding,Ie=0,xt=28,Be=0,b=-xt/2,T=J.addShape("text",{attrs:{text:ke,x:Be*2,y:b,textAlign:"left",textBaseline:"top",fontFamily:"PingFangSC-Regular"},cursor:"pointer",name:"name-text-shape"}),L=T.getBBox().width;Ie=L+At+St,Ie=Ie<n?n:Ie,!$e&&mt&&(Ie+=ct,Ie+=dt);var H={x:Be,y:b,width:Ie,height:xt,radius:4};$e&&qe&&(H.fill="#e8f7ff",H.stroke="#e8f7ff");var Ce=J.addShape("rect",{attrs:H,name:"root-key-shape-rect-shape"});$e||J.addShape("path",{attrs:{path:[["M",Be-1,0],["L",Ie,0]],stroke:"#AAB7C4",lineWidth:1},name:"node-path-shape"});var lt=Be-10,ce=-xt+15;$e&&J.addShape("rect",{attrs:{x:lt,y:ce,width:Ie+12,height:xt,radius:14,fill:"#e8f7ff",cursor:"pointer"},name:"main-shape"});var Bt="rgba(0, 0, 0, .65)";if(qe&&(Bt="#40A8FF"),$e?J.addShape("text",{attrs:{text:ke,x:lt+Zt,y:1,textAlign:"left",textBaseline:"middle",fill:Bt,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"root-text-shape"}):J.addShape("text",{attrs:{text:ke,x:qe?lt+6+St:lt+6,y:b-5,textAlign:"start",textBaseline:"top",fill:Bt,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"not-root-text-shape"}),mt&&!$e){var ne=12,D=Ie-dt,p=-ne/2;J.addShape("rect",{attrs:{width:dt,height:12,stroke:Pe?"#1890ff":"#5CDBD3",fill:Pe?"#fff":"#E6FFFB",x:D,y:p,radius:6,cursor:"pointer"},name:"child-count-rect-shape"}),J.addShape("text",{attrs:{text:"".concat(ot==null?void 0:ot.length),fill:"rgba(0, 0, 0, .65)",x:D+dt/2,y:p+12,fontSize:10,width:dt,textAlign:"center",cursor:"pointer"},name:"child-count-text-shape"})}return Ce}}),q().registerEdge("smooth",{draw:function(B,J){var Xe=B.startPoint,ke=B.endPoint,Pe=Math.abs(ke.x-Xe.x),qe=[["M",Xe.x,Xe.y],["C",Xe.x+Pe/4,Xe.y,ke.x-Pe/2,ke.y,ke.x,ke.y]],ot=J.addShape("path",{attrs:{stroke:"#AAB7C4",path:qe},name:"smooth-path-shape"});return ot}});var ge=document.getElementById(w),te=ge.scrollWidth,Ke=ge.scrollHeight||400;if(r==null){var ut=new(q()).TreeGraph({container:w,width:te,height:Ke,modes:{default:[{type:"collapse-expand"},"drag-canvas","zoom-canvas"]},defaultNode:{type:"treeNode",anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"smooth"},layout:{type:"compactBox",direction:"LR",getId:function(B){return B.id},getHeight:function(){return 16},getWidth:function(B){var J=q().Util.getTextSize(B.label,V.nameFontSize)[0],Xe=V.itemPadding+V.nameMarginLeft+J+V.rootPadding+V.childCountWidth;return Xe},getVGap:function(){return 15},getHGap:function(){return 30}}});ee(O()({},w,ut)),ut.data(oe),ut.render(),ut.fitView()}else r.changeData(oe),r.render(),r.fitView();typeof window!="undefined"&&(window.onresize=function(){!r||r.get("destroyed")||!ge||!ge.scrollWidth||!ge.scrollHeight||r.changeSize(ge.scrollWidth,ge.scrollHeight)})}},[oe]),(0,a.jsx)("div",{})},rt=e(4713),F=e(10981),He=e(22763),t=e(37594),je=e(26194),Ae=e(24315),Z=ye.Z.TabPane,Ze={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},de=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],We=function(xe){var oe,r=xe.response,ee=xe.caseName,u=xe.width,w=xe.modal,ge=xe.setModal,te=xe.single,Ke=te===void 0?!0:te;console.log("resp",r);var ut=(0,S.useState)(null),Qe=z()(ut,2),B=Qe[0],J=Qe[1],Xe=(0,S.useState)([]),ke=z()(Xe,2),Pe=ke[0],qe=ke[1],ot=(0,S.useState)({}),we=z()(ot,2),$e=we[0],mt=we[1],dt=(0,S.useState)(null),ct=z()(dt,2),At=ct[0],Dt=ct[1],St=function(){var b=y()(o()().mark(function T(){var L,H,Ce,lt,ce=arguments;return o()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return L=ce.length>0&&ce[0]!==void 0?ce[0]:r.case_id,H=ce.length>1&&ce[1]!==void 0?ce[1]:!0,ne.next=4,(0,rt.T4)({case_id:L});case 4:Ce=ne.sent,F.Z.response(Ce)&&(H?J(Ce.data):(lt=Object.keys(r).map(function(D){return Ce.data}),qe(lt)));case 6:case"end":return ne.stop()}},T)}));return function(){return b.apply(this,arguments)}}(),Zt=function(){var b=y()(o()().mark(function T(){var L,H,Ce;return o()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!Ke){ce.next=6;break}if(r.case_id===void 0){ce.next=4;break}return ce.next=4,St();case 4:ce.next=16;break;case 6:L=0,H=Object.keys(r);case 7:if(!(L<H.length)){ce.next=16;break}if(Ce=H[L],r[Ce].case_id===void 0){ce.next=12;break}return ce.next=12,St(r[Ce].case_id,!1);case 12:return ce.abrupt("return");case 13:L++,ce.next=7;break;case 16:case"end":return ce.stop()}},T)}));return function(){return b.apply(this,arguments)}}();(0,S.useEffect)(function(){Zt()},[r]);var Ie=function(T){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r;if(L[T]===null||L[T]===void 0||L[T]==="{}")return[];var H=JSON.parse(L[T]);return Object.keys(H).map(function(Ce){return{key:Ce,value:H[Ce]}})},xt=[{title:"\u65AD\u8A00\u4FE1\u606F",key:"msg",dataIndex:"msg"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(T){return(0,a.jsx)(s.Z,{status:T?"success":"error",text:T?"\u901A\u8FC7":"\u672A\u901A\u8FC7"})}}],Be=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r;if(T.asserts===void 0||!T.asserts)return[];var L=JSON.parse(T.asserts),H=[];return Object.keys(L).forEach(function(Ce){typeof L[Ce].msg=="string"?H.push({status:L[Ce].status,msg:L[Ce].msg}):L[Ce].msg.forEach(function(lt){H.push({status:L[Ce].status,msg:lt})})}),H};return(0,a.jsx)(W.Z,{title:(0,a.jsxs)("span",{children:["[",(0,a.jsx)("strong",{children:ee}),"] \u6267\u884C\u8BE6\u60C5"]}),width:u||1e3,open:w,placement:"right",onClose:function(){return ge(!1)},children:(0,a.jsx)(v.Z,{gutter:[8,8],children:Ke?(0,a.jsxs)(ye.Z,{style:{width:"100%",minHeight:460},tabPosition:"left",children:[(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,a.jsxs)(R.Z,{column:2,bordered:!0,size:"middle",children:[(0,a.jsx)(R.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,a.jsx)(s.Z,{status:r.status?"success":"error",text:r.status?"\u6210\u529F":"\u5931\u8D25"})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:r.request_method}),(0,a.jsx)(R.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,a.jsxs)("span",{style:{color:Ze[r.status_code]?Ze[r.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[r.status_code," ",Ze[r.status_code]?Ze[r.status_code].text:""]})}),(0,a.jsx)(R.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,a.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,a.jsx)("span",{style:{color:"#67C23A"},children:r.cost})})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:r.url}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:r.request_data?(0,a.jsx)(g.Z,{language:"json",style:i.BV,children:r.request_data}):(0,a.jsx)(He.Z,{height:120})})]})},"1"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,a.jsx)(E.Z,{columns:xt,dataSource:Be(),size:"small",pagination:!1})},"3"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,a.jsx)(Ae.Z,{language:"html",setEditor:Dt,readOnly:!0,value:r.logs,height:"80vh"})},"2"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Request Headers"]}),children:(0,a.jsx)(E.Z,{columns:de,dataSource:Ie("request_headers"),size:"small",pagination:!1})},"5"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,a.jsx)(E.Z,{columns:de,dataSource:Ie("cookies"),size:"small",pagination:!1})},"6"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Response Headers"]}),children:(0,a.jsx)(E.Z,{columns:de,dataSource:Ie("response_headers"),size:"small",pagination:!1})},"7"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-xiangying"}),"Response"]}),children:(0,a.jsx)(je.Z,{readOnly:!0,setEditor:Dt,value:JSON.stringify(((oe=r[name])===null||oe===void 0?void 0:oe.response)||null,null,2),height:"80vh"})},"4"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,a.jsx)("div",{id:"container",children:(0,a.jsx)(I,{data:B,graph:$e.container,setGraph:mt})})},"8")]}):(0,a.jsx)(ye.Z,{style:{width:"100%",minHeight:460},children:Object.keys(r).map(function(b,T){var L,H;return(0,a.jsx)(Z,{tab:b,children:(0,a.jsxs)(ye.Z,{style:{width:"100%"},tabPosition:"left",children:[(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,a.jsxs)(R.Z,{column:2,bordered:!0,size:"middle",children:[(0,a.jsx)(R.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,a.jsx)(s.Z,{status:r[b].status?"success":"error",text:r[b].status?"\u6210\u529F":"\u5931\u8D25"})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:r[b].request_method}),(0,a.jsx)(R.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,a.jsxs)("span",{style:{color:Ze[r[b].status_code]?Ze[r[b].status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[r[b].status_code," ",Ze[r[b].status_code]?Ze[r[b].status_code].text:""]})}),(0,a.jsx)(R.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,a.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,a.jsx)("span",{style:{color:"#67C23A"},children:r[b].cost})})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:r[b].url}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:r[b].request_data?(0,a.jsx)(g.Z,{language:"json",style:i.BV,children:r[b].request_data}):(0,a.jsx)(He.Z,{height:120})})]})},"1"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,a.jsx)(E.Z,{columns:xt,dataSource:Be(r[b]),size:"small",pagination:!1})},"3"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,a.jsx)(Ae.Z,{language:"html",setEditor:Dt,readOnly:!0,value:(L=r[b])===null||L===void 0?void 0:L.logs,height:"80vh"})},"2"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Request Headers"]}),children:(0,a.jsx)(E.Z,{columns:de,dataSource:Ie("request_headers",r[b]),size:"small",pagination:!1})},"5"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,a.jsx)(E.Z,{columns:de,dataSource:Ie("cookies",r[b]),size:"small",pagination:!1})},"6"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Response Headers"]}),children:(0,a.jsx)(E.Z,{columns:de,dataSource:Ie("response_headers",r[b]),size:"small",pagination:!1})},"7"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-xiangying"}),"Response"]}),children:(0,a.jsx)(je.Z,{setEditor:Dt,readOnly:!0,value:JSON.stringify(((H=r[b])===null||H===void 0?void 0:H.response)||null,null,2),height:"80vh"})},"4"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,a.jsx)("div",{id:"container_".concat(T),children:(0,a.jsx)(I,{data:Pe[T],graph:$e["container_".concat(T)],setGraph:mt,container_id:"container_".concat(T)})})},"8")]})},T.toString())})})})})}},72729:function(){}}]);
