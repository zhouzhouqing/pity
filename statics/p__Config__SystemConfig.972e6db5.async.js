"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[9467],{60219:function(V,m,s){s.d(m,{Z:function(){return h}});var v=s(1413),d=s(67294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},B=p,y=s(84089),E=function(C,A){return d.createElement(y.Z,(0,v.Z)((0,v.Z)({},C),{},{ref:A,icon:B}))},S=d.forwardRef(E),h=S},96353:function(V,m,s){s.r(m),s.d(m,{default:function(){return G}});var v=s(15009),d=s.n(v),p=s(99289),B=s.n(p),y=s(5574),E=s.n(y),S=s(58841),h=s(11941),n=s(8232),C=s(2453),A=s(75081),R=s(4393),f=s(71230),t=s(15746),z=s(14726),P=s(97857),c=s.n(P),g=s(34041),l=s(55102),O=s(19478),e=s(85893),Y=function(o){var r=o.form;return(0,e.jsxs)(f.Z,{gutter:8,children:[(0,e.jsx)(t.Z,{span:4}),(0,e.jsx)(t.Z,{span:16,children:(0,e.jsxs)(n.Z,c()(c()({form:r},O.Z.LAYOUT),{},{children:[(0,e.jsx)(n.Z.Item,{label:"\u7C7B\u578B",name:"oss_type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9oss\u7C7B\u578B"}],children:(0,e.jsxs)(g.Z,{placeholder:"\u8BF7\u9009\u62E9oss\u7C7B\u578B",children:[(0,e.jsx)(g.Z.Option,{value:"aliyun",children:"\u963F\u91CC\u4E91"}),(0,e.jsx)(g.Z.Option,{value:"cos",children:"\u817E\u8BAF\u4E91"}),(0,e.jsx)(g.Z.Option,{value:"qiniu",children:"\u4E03\u725B\u4E91"})]})}),(0,e.jsx)(n.Z.Item,{label:"access_id",name:"access_key_id",rules:[{required:!0,message:"\u8BF7\u8F93\u5165access_key_id"}],children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165access_key_id"})}),(0,e.jsx)(n.Z.Item,{label:"access_secret",name:"access_key_secret",rules:[{required:!0,message:"\u8BF7\u8F93\u5165access_secret"}],children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165access_secret"})}),(0,e.jsx)(n.Z.Item,{label:"bucket",name:"bucket",rules:[{required:!0,message:"\u8BF7\u8F93\u5165bucket"}],children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165bucket"})}),(0,e.jsx)(n.Z.Item,{label:"endpoint",name:"endpoint",children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165endpoint, \u53EF\u4E0D\u586B"})})]}))}),(0,e.jsx)(t.Z,{span:4})]})},L=function(o){var r=o.form;return(0,e.jsxs)(f.Z,{gutter:8,children:[(0,e.jsx)(t.Z,{span:4}),(0,e.jsx)(t.Z,{span:16,children:(0,e.jsxs)(n.Z,c()(c()({form:r},O.Z.LAYOUT),{},{children:[(0,e.jsx)(n.Z.Item,{label:"\u53D1\u4EF6\u4EBA",name:"sender",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D1\u4EF6\u4EBA\u90AE\u7BB1"}],children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165\u53D1\u4EF6\u4EBA\u90AE\u7BB1"})}),(0,e.jsx)(n.Z.Item,{label:"host",name:"host",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668host"}],children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668host"})}),(0,e.jsx)(n.Z.Item,{label:"\u90AE\u7BB1\u79D8\u94A5",name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u79D8\u94A5"}],children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u79D8\u94A5"})}),(0,e.jsx)(n.Z.Item,{label:"\u6536\u4EF6\u4EBA\u540D\u79F0",name:"to",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u4EF6\u4EBA\u540D\u79F0"}],children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165\u6536\u4EF6\u4EBA\u540D\u79F0"})})]}))}),(0,e.jsx)(t.Z,{span:4})]})},H=function(o){var r=o.form;return(0,e.jsxs)(f.Z,{gutter:8,children:[(0,e.jsx)(t.Z,{span:4}),(0,e.jsx)(t.Z,{span:16,children:(0,e.jsx)(n.Z,c()(c()({form:r},O.Z.LAYOUT),{},{children:(0,e.jsx)(n.Z.Item,{label:"token",name:"token",children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165yapi token"})})}))}),(0,e.jsx)(t.Z,{span:4})]})},M=s(60219),U=s(90596),I=s(67294),D=h.Z.TabPane,$=function(r){var j=r.dispatch,J=r.gconfig,b=r.loading,K=n.Z.useForm(),N=E()(K,1),i=N[0],Z=J.configuration,Q=function(){var x=Z.email,a=Z.oss,F=Z.yapi;i.setFieldsValue(x),i.setFieldsValue(a),i.setFieldsValue(F)};(0,I.useEffect)(function(){j({type:"gconfig/fetchSystemConfig"})},[]),(0,I.useEffect)(function(){Q()},[Z]);var W=function(){var T=B()(d()().mark(function x(){var a,F;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,i.validateFields();case 3:a=u.sent,u.next=10;break;case 6:return u.prev=6,u.t0=u.catch(0),C.ZP.info("\u6709\u5FC5\u586B\u5B57\u6BB5\u672A\u586B\u5199\uFF0C\u8BF7\u68C0\u67E5"),u.abrupt("return");case 10:F={email:{sender:a.sender,password:a.password,host:a.host,to:a.to},yapi:{token:a.token},oss:{oss_type:a.oss_type,access_key_id:a.access_key_id,access_key_secret:a.access_key_secret,bucket:a.bucket,endpoint:a.endpoint}},j({type:"gconfig/updateConfiguration",payload:F});case 12:case"end":return u.stop()}},x,null,[[0,6]])}));return function(){return T.apply(this,arguments)}}();return(0,e.jsx)(S._z,{title:"\u7CFB\u7EDF\u8BBE\u7F6E",breadcrumb:null,children:(0,e.jsx)(A.Z,{spinning:b.effects["gconfig/updateConfiguration"]||b.effects["gconfig/fetchSystemConfig"],children:(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(f.Z,{children:(0,e.jsx)(t.Z,{span:24,children:(0,e.jsxs)(h.Z,{tabPosition:"left",children:[(0,e.jsx)(D,{tab:"\u90AE\u4EF6\u8BBE\u7F6E",forceRender:!0,children:(0,e.jsx)(L,{form:i})},"1"),(0,e.jsx)(D,{tab:"OSS\u8BBE\u7F6E",forceRender:!0,children:(0,e.jsx)(Y,{form:i})},"2"),(0,e.jsx)(D,{tab:"Yapi\u8BBE\u7F6E",forceRender:!0,children:(0,e.jsx)(H,{form:i})},"3")]})})}),(0,e.jsx)(f.Z,{children:(0,e.jsx)("div",{style:{margin:"16px auto"},children:(0,e.jsx)(z.ZP,{type:"primary",icon:(0,e.jsx)(M.Z,{}),onClick:W,children:"\u4FDD\u5B58"})})})]})})})},G=(0,U.connect)(function(o){var r=o.gconfig,j=o.loading;return{gconfig:r,loading:j}})($)}}]);
